(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[106],{40106:function(xr,U,z){"use strict";z.d(U,{Z:function(){return VS}});var F={};z.r(F),z.d(F,{GADDI:function(){return bs},Stack:function(){return Ri},breadthFirstSearch:function(){return Un},connectedComponent:function(){return sr},cosineSimilarity:function(){return pe},default:function(){return Os},depthFirstSearch:function(){return Jn},detectAllCycles:function(){return Wn},detectAllDirectedCycle:function(){return Hn},detectAllUndirectedCycle:function(){return bn},detectCycle:function(){return Bn},detectDirectedCycle:function(){return fs},dijkstra:function(){return Ve},findAllPath:function(){return ar},findShortestPath:function(){return nr},floydWarshall:function(){return Nr},getAdjMatrix:function(){return Te},getDegree:function(){return zr},getInDegree:function(){return fn},getNeighbors:function(){return Vr},getOutDegree:function(){return wn},iLouvain:function(){return Er},kCore:function(){return Kr},kMeans:function(){return re},labelPropagation:function(){return hn},louvain:function(){return Xn},minimumSpanningTree:function(){return Za},nodesCosineSimilarity:function(){return or},pageRank:function(){return Bo}});var j={};z.r(j),z.d(j,{Line:function(){return mo},applyMatrix:function(){return Ii},compare:function(){return ko},distance:function(){return ts},floydWarshall:function(){return Ro},fractionToLine:function(){return Ds},getAdjMatrix:function(){return ls},getBBoxBoundLine:function(){return Co},getCircleCenterByPoints:function(){return so},getCircleIntersectByPoint:function(){return Hi},getDegree:function(){return Fi},getEllipseIntersectByPoint:function(){return So},getLineIntersect:function(){return Jo},getPointsCenter:function(){return ns},getRectIntersectByPoint:function(){return Es},intersectBBox:function(){return Mo},invertMatrix:function(){return yo},isPointInPolygon:function(){return Na},isPointsOverlap:function(){return Vs},isPolygonsIntersect:function(){return Gi},itemIntersectByLine:function(){return Ls},lerp:function(){return me},lerpArray:function(){return We},move:function(){return Yo},pointLineDistance:function(){return Ft},pointLineSquareDist:function(){return ru},pointRectSquareDist:function(){return hs},rotate:function(){return za},scale:function(){return Fo},scaleMatrix:function(){return es},squareDist:function(){return Vo},translate:function(){return Xo}});var B={};z.r(B),z.d(B,{cloneBesidesImg:function(){return ye},getAnimateCfgWithCallback:function(){return Oe},getBBox:function(){return To},getComboBBox:function(){return Zt},getLabelPosition:function(){return cf},getLetterWidth:function(){return O},getLoopCfgs:function(){return ju},getTextSize:function(){return dt},plainCombosToTrees:function(){return kt},reconstructTree:function(){return Ht},shouldRefreshEdge:function(){return le},traverseTree:function(){return Io},traverseTreeUp:function(){return h},truncateLabelByLength:function(){return St}});var L={};z.r(L),z.d(L,{catmullRomToBezier:function(){return Ea},fillPath:function(){return qc},fillPathByDiff:function(){return nu},formatPath:function(){return au},intersection:function(){return Zc},parsePathArray:function(){return Di},parsePathString:function(){return Tn},pathToAbsolute:function(){return ga},pathToCurve:function(){return _i},rectPath:function(){return Ns}});var k={};z.r(k),z.d(k,{easeBack:function(){return ml},easeBackIn:function(){return yl},easeBackInOut:function(){return ml},easeBackOut:function(){return kc},easeBounce:function(){return uu},easeBounceIn:function(){return Jl},easeBounceInOut:function(){return Fu},easeBounceOut:function(){return uu},easeCircle:function(){return Kl},easeCircleIn:function(){return Hl},easeCircleInOut:function(){return Kl},easeCircleOut:function(){return Nc},easeCubic:function(){return tc},easeCubicIn:function(){return dl},easeCubicInOut:function(){return tc},easeCubicOut:function(){return Lc},easeElastic:function(){return ic},easeElasticIn:function(){return is},easeElasticInOut:function(){return mh},easeElasticOut:function(){return ic},easeExp:function(){return Ru},easeExpIn:function(){return jl},easeExpInOut:function(){return Ru},easeExpOut:function(){return ac},easeLinear:function(){return Qf},easePoly:function(){return ec},easePolyIn:function(){return gl},easePolyInOut:function(){return ec},easePolyOut:function(){return Dc},easeQuad:function(){return Jf},easeQuadIn:function(){return Ic},easeQuadInOut:function(){return Jf},easeQuadOut:function(){return Oc},easeSin:function(){return Lf},easeSinIn:function(){return nc},easeSinInOut:function(){return Lf},easeSinOut:function(){return Of}});var D={};z.r(D),z.d(D,{calculationItemsBBox:function(){return mg},cloneEvent:function(){return rm},formatPadding:function(){return ed},isNaN:function(){return Df},isViewportChanged:function(){return nm},processParallelEdges:function(){return am},uniqueId:function(){return td}});var w={};z.r(w),z.d(w,{getClosedSpline:function(){return cd},getControlPoint:function(){return uv},getSpline:function(){return Pg},getStarPath:function(){return Sm},paddedHull:function(){return Fg},pathToPoints:function(){return fd},pointsToPolygon:function(){return _m},roundedHull:function(){return ld}});var b={};z.r(b),z.d(b,{defaultSubjectColors:function(){return Vm}});var g={};z.r(g),z.d(g,{isForce:function(){return Zg}});var y={};z.r(y),z.d(y,{Base:function(){return sf},Circle:function(){return p1},Ellipse:function(){return m1},Image:function(){return b1},Line:function(){return w1},Marker:function(){return M1},Path:function(){return Sd},Polygon:function(){return P1},Polyline:function(){return R1},Rect:function(){return z1},Text:function(){return W1}});var d={};z.r(d),z.d(d,{Base:function(){return Uu},Circle:function(){return $1},Dom:function(){return Q1},Ellipse:function(){return tx},Image:function(){return rx},Line:function(){return ax},Marker:function(){return ox},Path:function(){return ux},Polygon:function(){return cx},Polyline:function(){return hx},Rect:function(){return yx},Text:function(){return wx}});var S={};z.r(S),z.d(S,{getColorSetsBySubjectColors:function(){return qx},getColorsWithSubjectColor:function(){return Od},mixColor:function(){return gs}});var _={};z.r(_),z.d(_,{arrayToTextureData:function(){return hb},attributesToTextureData:function(){return lb},buildTextureData:function(){return ub},buildTextureDataWithOneEdgeAttr:function(){return fb},buildTextureDataWithTwoEdgeAttr:function(){return cb},proccessToFunc:function(){return sb},radialLayout:function(){return vb}});var E={};z.r(E),z.d(E,{gpuDetector:function(){return G0}});var I={};z.r(I),z.d(I,{getBrowserName:function(){return z0}});var P={};z.r(P),z.d(P,{assign:function(){return Yc},default:function(){return wp},defaultI18n:function(){return zd},format:function(){return bp},parse:function(){return Ep},setGlobalDateI18n:function(){return hp},setGlobalDateMasks:function(){return xp}});var N=z(67294);var H=function(){return H=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},H.apply(this,arguments)};function nt(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t}var X=function(){return Math.random().toString(36).substring(6)},Y=function(i){var e=i.animate,t=i.backgroundColor,r=i.backgroundOpacity,n=i.baseUrl,a=i.children,o=i.foregroundColor,s=i.foregroundOpacity,u=i.gradientRatio,f=i.uniqueKey,c=i.interval,l=i.rtl,x=i.speed,m=i.style,C=i.title,R=nt(i,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),V=f||X(),Q=V+"-diff",rt=V+"-animated-diff",st=V+"-aria",lt=l?{transform:"scaleX(-1)"}:null,Ct="0; "+c+"; 1",At=x+"s";return(0,N.createElement)("svg",H({"aria-labelledby":st,role:"img",style:H(H({},m),lt)},R),C?(0,N.createElement)("title",{id:st},C):null,(0,N.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+n+"#"+Q+")",style:{fill:"url("+n+"#"+rt+")"}}),(0,N.createElement)("defs",{role:"presentation"},(0,N.createElement)("clipPath",{id:Q},a),(0,N.createElement)("linearGradient",{id:rt},(0,N.createElement)("stop",{offset:"0%",stopColor:t,stopOpacity:r},e&&(0,N.createElement)("animate",{attributeName:"offset",values:-u+"; "+-u+"; 1",keyTimes:Ct,dur:At,repeatCount:"indefinite"})),(0,N.createElement)("stop",{offset:"50%",stopColor:o,stopOpacity:s},e&&(0,N.createElement)("animate",{attributeName:"offset",values:-u/2+"; "+-u/2+"; "+(1+u/2),keyTimes:Ct,dur:At,repeatCount:"indefinite"})),(0,N.createElement)("stop",{offset:"100%",stopColor:t,stopOpacity:r},e&&(0,N.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+u),keyTimes:Ct,dur:At,repeatCount:"indefinite"})))))};Y.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var Z=function(i){return i.children?(0,N.createElement)(Y,H({},i)):(0,N.createElement)(J,H({},i))},J=function(i){return(0,N.createElement)(Z,H({viewBox:"0 0 476 124"},i),(0,N.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),(0,N.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),(0,N.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),(0,N.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),(0,N.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),(0,N.createElement)("circle",{cx:"20",cy:"20",r:"20"}))},it=function(i){return createElement(Z,H({viewBox:"0 0 400 460"},i),createElement("circle",{cx:"31",cy:"31",r:"15"}),createElement("rect",{x:"58",y:"18",rx:"2",ry:"2",width:"140",height:"10"}),createElement("rect",{x:"58",y:"34",rx:"2",ry:"2",width:"140",height:"10"}),createElement("rect",{x:"0",y:"60",rx:"2",ry:"2",width:"400",height:"400"}))},tt=function(i){return createElement(Z,H({viewBox:"0 0 340 84"},i),createElement("rect",{x:"0",y:"0",width:"67",height:"11",rx:"3"}),createElement("rect",{x:"76",y:"0",width:"140",height:"11",rx:"3"}),createElement("rect",{x:"127",y:"48",width:"53",height:"11",rx:"3"}),createElement("rect",{x:"187",y:"48",width:"72",height:"11",rx:"3"}),createElement("rect",{x:"18",y:"48",width:"100",height:"11",rx:"3"}),createElement("rect",{x:"0",y:"71",width:"37",height:"11",rx:"3"}),createElement("rect",{x:"18",y:"23",width:"140",height:"11",rx:"3"}),createElement("rect",{x:"166",y:"23",width:"173",height:"11",rx:"3"}))},ut=function(i){return createElement(Z,H({viewBox:"0 0 400 110"},i),createElement("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"250",height:"10"}),createElement("rect",{x:"20",y:"20",rx:"3",ry:"3",width:"220",height:"10"}),createElement("rect",{x:"20",y:"40",rx:"3",ry:"3",width:"170",height:"10"}),createElement("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"250",height:"10"}),createElement("rect",{x:"20",y:"80",rx:"3",ry:"3",width:"200",height:"10"}),createElement("rect",{x:"20",y:"100",rx:"3",ry:"3",width:"80",height:"10"}))},vt=function(i){return createElement(Z,H({viewBox:"0 0 245 125"},i),createElement("circle",{cx:"10",cy:"20",r:"8"}),createElement("rect",{x:"25",y:"15",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"50",r:"8"}),createElement("rect",{x:"25",y:"45",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"80",r:"8"}),createElement("rect",{x:"25",y:"75",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"110",r:"8"}),createElement("rect",{x:"25",y:"105",rx:"5",ry:"5",width:"220",height:"10"}))},pt=Z,Dt=function(i){var e=i.loadingTemplate,t=function(){return e||N.createElement(pt,{viewBox:"0 0 400 180",width:200,height:90,speed:1},N.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),N.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),N.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),N.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),N.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),N.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),N.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),N.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),N.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),N.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"}))};return N.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"#fff"}},t())},Ot=function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),te=function(i){Ot(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.state={hasError:!1},t.renderError=function(r){var n=t.props.errorTemplate;switch(r){default:return typeof n=="function"?n(r):n||N.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",r.message)}},t}return e.getDerivedStateFromError=function(t){return{hasError:!0,error:t}},e.getDerivedStateFromProps=function(t,r){return r.children!==t.children?{children:t.children,hasError:!1,error:void 0}:null},e.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):N.createElement(N.Fragment,null,this.props.children)},e}(N.Component),Gt=te,K=z(97582),p=z(13810),at={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,r=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),(0,p.each)(r,function(n,a){e.on(a,n)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,r=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),(0,p.each)(t,function(n,a){e.off(a,n)}),e.get("canvas").set("draggable",r)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}},ht=function(){function i(){}return i.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));var r=(0,p.clone)(at);Object.assign(r,t);var n=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var u=this.getEvents();this.events=null;var f={};u&&((0,p.each)(u,function(c,l){f[l]=(0,p.wrapBehavior)(s,c)}),this.events=f)};n.prototype=r,i.types[e]=n},i.hasBehavior=function(e){return!!i.types[e]},i.getBehavior=function(e){return i.types[e]},i.types={},i}(),wt=ht,Mt=wt,Ut="*",Vt=function(){function i(){this._events={}}return i.prototype.on=function(e,t,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!r}),this},i.prototype.once=function(e,t){return this.on(e,t,!0)},i.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=this._events[e]||[],o=this._events[Ut]||[],s=function(u){for(var f=u.length,c=0;c<f;c++)if(u[c]){var l=u[c],x=l.callback,m=l.once;m&&(u.splice(c,1),u.length===0&&delete t._events[e],f--,c--),x.apply(t,r)}};s(a),s(o)},i.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var r=this._events[e]||[],n=r.length,a=0;a<n;a++)r[a].callback===t&&(r.splice(a,1),n--,a--);r.length===0&&delete this._events[e]}return this},i.prototype.getEvents=function(){return this._events},i}(),Me=Vt,Wt=z(35600);function ae(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return Wt.fromTranslation(r,t),Wt.multiply(i,r,e)}function he(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return Wt.fromRotation(r,t),Wt.multiply(i,r,e)}function Se(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return Wt.fromScaling(r,t),Wt.multiply(i,r,e)}function xe(i,e,t){return Wt.multiply(i,t,e)}function Bt(i,e){for(var t=i?[].concat(i):[1,0,0,0,1,0,0,0,1],r=0,n=e.length;r<n;r++){var a=e[r];switch(a[0]){case"t":ae(t,t,[a[1],a[2]]);break;case"s":Se(t,t,[a[1],a[2]]);break;case"r":he(t,t,a[1]);break;case"m":xe(t,t,a[1]);break;default:break}}return t}function fe(i,e){return i[0]*e[1]-e[0]*i[1]}function Le(i,e,t){var r=vec2.angle(i,e),n=fe(i,e)>=0;return t?n?Math.PI*2-r:r:n?r:Math.PI*2-r}function jt(i,e,t){return t?(i[0]=e[1],i[1]=-1*e[0]):(i[0]=-1*e[1],i[1]=e[0]),i}var oe=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];!c&&c!==0||!l&&l!==0||(a[c][l]=1,t||(a[l][c]=1))}),a},Te=oe,se=function(e,t){return e===t},Ie=function(){function i(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return i.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},i}(),Pe=function(){function i(e){e===void 0&&(e=se),this.head=null,this.tail=null,this.compare=e}return i.prototype.prepend=function(e){var t=new Ie(e,this.head);return this.head=t,this.tail||(this.tail=t),this},i.prototype.append=function(e){var t=new Ie(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},i.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,e)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),t},i.prototype.find=function(e){var t=e.value,r=t===void 0?void 0:t,n=e.callback,a=n===void 0?void 0:n;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||r!==void 0&&this.compare(o.value,r))return o;o=o.next}return null},i.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},i.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},i.prototype.fromArray=function(e){var t=this;return e.forEach(function(r){return t.append(r)}),this},i.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},i.prototype.reverse=function(){for(var e=this.head,t=null,r=null;e;)r=e.next,e.next=t,t=e,e=r;this.tail=this.head,this.head=t},i.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},i}(),Lt=Pe,Je=function(){function i(){this.linkedList=new Lt}return i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},i.prototype.enqueue=function(e){this.linkedList.append(e)},i.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toString=function(e){return this.linkedList.toString(e)},i}(),Lr=Je,Vr=function(e,t,r){t===void 0&&(t=[]);var n=t.filter(function(u){return u.source===e||u.target===e});if(r==="target"){var a=function(f){return f.source===e};return n.filter(a).map(function(u){return u.target})}if(r==="source"){var o=function(f){return f.target===e};return n.filter(o).map(function(u){return u.source})}var s=function(f){return f.source===e?f.target:f.source};return n.map(s)},Xr=function(e,t){return t.filter(function(r){return r.source===e})},Mn=function(e,t){return t.filter(function(r){return r.source===e||r.target===e})},Hr=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(r)};function Cn(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next,s=o;return n[s]?!1:(n[s]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}var Zn=function(e,t,r,n){n===void 0&&(n=!0);var a=Cn(r),o=new Lr,s=e.edges,u=s===void 0?[]:s;o.enqueue(t);for(var f="",c=function(){var x=o.dequeue();a.enter({current:x,previous:f}),Vr(x,u,n?"target":void 0).forEach(function(m){a.allowTraversal({previous:f,current:x,next:m})&&o.enqueue(m)}),a.leave({current:x,previous:f}),f=x};!o.isEmpty();)c()},Un=Zn,mn=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u=[],f=function m(C){u.push(C),s[C.id]=!0;for(var R=Vr(C.id,a),V=function(st){var lt=R[st];if(!s[lt]){var Ct=r.filter(function(At){return At.id===lt});Ct.length>0&&m(Ct[0])}},Q=0;Q<R.length;++Q)V(Q)},c=0;c<r.length;c++){var l=r[c];if(!s[l.id]){f(l);for(var x=[];u.length>0;)x.push(u.pop());o.push(x)}}return o},rr=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u={},f={},c=[],l=0,x=function V(Q){u[Q.id]=l,f[Q.id]=l,l+=1,o.push(Q),s[Q.id]=!0;for(var rt=Vr(Q.id,a,"target").filter(function(Nt){return r.map(function(Kt){return Kt.id}).indexOf(Nt)>-1}),st=function(Kt){var ge=rt[Kt];if(!u[ge]&&u[ge]!==0){var ue=r.filter(function(Ae){return Ae.id===ge});ue.length>0&&V(ue[0]),f[Q.id]=Math.min(f[Q.id],f[ge])}else s[ge]&&(f[Q.id]=Math.min(f[Q.id],u[ge]))},lt=0;lt<rt.length;lt++)st(lt);if(f[Q.id]===u[Q.id]){for(var Ct=[];o.length>0;){var At=o.pop();if(s[At.id]=!1,Ct.push(At),At===Q)break}Ct.length>0&&c.push(Ct)}},m=0,C=r;m<C.length;m++){var R=C[m];!u[R.id]&&u[R.id]!==0&&x(R)}return c};function sr(i,e){return e?rr(i):mn(i)}var lr=function(e){var t={},r=e.nodes,n=r===void 0?[]:r,a=e.edges,o=a===void 0?[]:a;return n.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},zr=lr,fn=function(e,t){var r=lr(e);return r[t]?lr(e)[t].inDegree:0},wn=function(e,t){var r=lr(e);return r[t]?lr(e)[t].outDegree:0};function ln(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next;return n[o]?!1:(n[o]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}function $n(i,e,t,r,n){n===void 0&&(n=!0),r.enter({current:e,previous:t});var a=i.edges,o=a===void 0?[]:a;Vr(e,o,n?"target":void 0).forEach(function(s){r.allowTraversal({previous:t,current:e,next:s})&&$n(i,s,e,r,n)}),r.leave({current:e,previous:t})}function Jn(i,e,t,r){r===void 0&&(r=!0),$n(i,e,"",ln(t),r)}var Da=function(e){var t=null,r=e.nodes,n=r===void 0?[]:r,a={},o={},s={},u={};n.forEach(function(l){o[l.id]=l});for(var f={enter:function(x){var m=x.current,C=x.previous;if(s[m]){t={};for(var R=m,V=C;V!==m;)t[R]=V,R=V,V=a[V];t[R]=V}else s[m]=m,delete o[m],a[m]=C},leave:function(x){var m=x.current;u[m]=m,delete s[m]},allowTraversal:function(x){var m=x.next;return t?!1:!u[m]}};Object.keys(o).length;){var c=Object.keys(o)[0];Jn(e,c,f)}return t},bn=function(e,t,r){var n,a;r===void 0&&(r=!0);for(var o=[],s=sr(e,!1),u=0,f=s;u<f.length;u++){var c=f[u];if(c.length)for(var l=c[0],x=l.id,m=[l],C=(n={},n[x]=l,n),R=(a={},a[x]=new Set,a);m.length>0;)for(var V=m.pop(),Q=V.id,rt=Vr(Q,e.edges),st=function(At){var Nt,Kt=rt[At],ge=e.nodes.find(function(Mr){return Mr.id===Kt});if(Kt===Q)o.push((Nt={},Nt[Kt]=V,Nt));else if(!(Kt in R))C[Kt]=V,m.push(ge),R[Kt]=new Set([V]);else if(!R[Q].has(ge)){for(var ue=!0,Ae=[ge,V],Ke=C[Q];R[Kt].size&&!R[Kt].has(Ke)&&(Ae.push(Ke),Ke!==C[Ke.id]);)Ke=C[Ke.id];if(Ae.push(Ke),t&&r?(ue=!1,Ae.findIndex(function(Mr){return t.indexOf(Mr.id)>-1})>-1&&(ue=!0)):t&&!r&&Ae.findIndex(function(Mr){return t.indexOf(Mr.id)>-1})>-1&&(ue=!1),ue){for(var Gr={},wr=1;wr<Ae.length;wr+=1)Gr[Ae[wr-1].id]=Ae[wr];Ae.length&&(Gr[Ae[Ae.length-1].id]=Ae[0]),o.push(Gr)}R[Kt].add(V)}},lt=0;lt<rt.length;lt+=1)st(lt)}return o},Hn=function(e,t,r){r===void 0&&(r=!0);for(var n=[],a=new Set,o=[],s=[],u={},f={},c=function(Ke){for(var Gr=[Ke];Gr.length>0;){var wr=Gr.pop();a.has(wr)&&(a.delete(wr),o[wr.id].forEach(function(Mr){Gr.push(Mr)}),o[wr.id].clear())}},l=function Ae(Ke,Gr,wr){var Mr=!1;if(t&&r===!1&&t.indexOf(Ke.id)>-1)return Mr;n.push(Ke),a.add(Ke);for(var vr=wr[Ke.id],sn=0;sn<vr.length;sn+=1){var nn=u[vr[sn]];if(nn===Gr){for(var mr={},Dr=1;Dr<n.length;Dr+=1)mr[n[Dr-1].id]=n[Dr];n.length&&(mr[n[n.length-1].id]=n[0]),s.push(mr),Mr=!0}else a.has(nn)||Ae(nn,Gr,wr)&&(Mr=!0)}if(Mr)c(Ke);else for(var sn=0;sn<vr.length;sn+=1){var nn=u[vr[sn]];o[nn.id].has(Ke)||o[nn.id].add(Ke)}return n.pop(),Mr},x=e.nodes,m=x===void 0?[]:x,C=0;C<m.length;C+=1){var R=m[C],V=R.id;f[V]=C,u[C]=R}if(t&&r)for(var Q=function(Ke){var Gr=t[Ke];f[m[Ke].id]=f[Gr],f[Gr]=0,u[0]=m.find(function(wr){return wr.id===Gr}),u[f[m[Ke].id]]=m[Ke]},C=0;C<t.length;C++)Q(C);for(var rt=function(Ke){for(var Gr,wr,Mr=1/0,vr=0;vr<Ke.length;vr+=1)for(var sn=Ke[vr],nn=0;nn<sn.length;nn++){var mr=f[sn[nn].id];mr<Mr&&(Mr=mr,wr=vr)}for(var Dr=Ke[wr],qr=[],vr=0;vr<Dr.length;vr+=1){var un=Dr[vr];qr[un.id]=[];for(var Dn=0,Rn=Vr(un.id,e.edges,"target").filter(function(qa){return Dr.map(function(Pa){return Pa.id}).indexOf(qa)>-1});Dn<Rn.length;Dn++){var ca=Rn[Dn];ca===un.id&&!(r===!1&&t.indexOf(un.id)>-1)?s.push((Gr={},Gr[un.id]=un,Gr)):qr[un.id].push(f[ca])}}return{component:Dr,adjList:qr,minIdx:Mr}},st=0;st<m.length;){var lt=m.filter(function(Ae){return f[Ae.id]>=st}),Ct=rr({nodes:lt,edges:e.edges}).filter(function(Ae){return Ae.length>1});if(Ct.length===0)break;var At=rt(Ct),Nt=At.minIdx,Kt=At.adjList,ge=At.component;if(ge.length>1){ge.forEach(function(Ae){o[Ae.id]=new Set});var ue=u[Nt];if(t&&r&&t.indexOf(ue.id)===-1)return s;l(ue,ue,Kt),st=Nt+1}else break}return s},Wn=function(e,t,r,n){return n===void 0&&(n=!0),t?Hn(e,r,n):bn(e,r,n)},Bn=Da,ya=function(e,t,r){for(var n=1/0,a,o=0;o<t.length;o++){var s=t[o].id;!r[s]&&e[s]<=n&&(n=e[s],a=t[o])}return a},q=function(e,t,r,n){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f=[],c={},l={},x={};o.forEach(function(st,lt){var Ct=st.id;f.push(Ct),l[Ct]=1/0,Ct===t&&(l[Ct]=0)});for(var m=o.length,C=function(lt){var Ct=ya(l,o,c),At=Ct.id;if(c[At]=!0,l[At]===1/0)return"continue";var Nt=[];r?Nt=Xr(At,u):Nt=Mn(At,u),Nt.forEach(function(Kt){var ge=Kt.target,ue=Kt.source,Ae=ge===At?ue:ge,Ke=n&&Kt[n]?Kt[n]:1;l[Ae]>l[Ct.id]+Ke?(l[Ae]=l[Ct.id]+Ke,x[Ae]=[Ct.id]):l[Ae]===l[Ct.id]+Ke&&x[Ae].push(Ct.id)})},R=0;R<m;R++)C(R);x[t]=[t];var V={};for(var Q in l)l[Q]!==1/0&&Ee(t,Q,x,V);var rt={};for(var Q in V)rt[Q]=V[Q][0];return{length:l,path:rt,allPath:V}},Ve=q;function Ee(i,e,t,r){if(i===e)return[i];if(r[e])return r[e];for(var n=[],a=0,o=t[e];a<o.length;a++){var s=o[a],u=Ee(i,s,t,r);if(!u)return;for(var f=0,c=u;f<c.length;f++){var l=c[f];(0,p.isArray)(l)?n.push((0,K.__spreadArray)((0,K.__spreadArray)([],l,!0),[e],!1)):n.push([l,e])}}return r[e]=n,r[e]}var nr=function(e,t,r,n,a){var o=Ve(e,t,n,a),s=o.length,u=o.path,f=o.allPath;return{length:s[r],path:u[r],allPath:f[r]}},ar=function(e,t,r,n){var a;if(t===r)return[[t]];var o=e.edges,s=o===void 0?[]:o,u=[t],f=(a={},a[t]=!0,a),c=[],l=[],x=n?Vr(t,s,"target"):Vr(t,s);for(c.push(x);u.length>0&&c.length>0;){var m=c[c.length-1];if(m.length){var C=m.shift();C&&(u.push(C),f[C]=!0,x=n?Vr(C,s,"target"):Vr(C,s),c.push(x.filter(function(Q){return!f[Q]})))}else{var R=u.pop();f[R]=!1,c.pop();continue}if(u[u.length-1]===r){var V=u.map(function(rt){return rt});l.push(V);var R=u.pop();f[R]=!1,c.pop()}}return l},Ur=function(e,t){for(var r=Te(e,t),n=[],a=r.length,o=0;o<a;o+=1){n[o]=[];for(var s=0;s<a;s+=1)o===s?n[o][s]=0:r[o][s]===0||!r[o][s]?n[o][s]=1/0:n[o][s]=r[o][s]}for(var u=0;u<a;u+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)n[o][s]>n[o][u]+n[u][s]&&(n[o][s]=n[o][u]+n[u][s]);return n},Nr=Ur,gn=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f={},c={};o.forEach(function(lt,Ct){var At=Hr();lt.clusterId=At,f[At]={id:At,nodes:[lt]},c[lt.id]={node:lt,idx:Ct}});var l=Te(e,t),x=[],m={};l.forEach(function(lt,Ct){var At=0,Nt=o[Ct].id;m[Nt]={},lt.forEach(function(Kt,ge){if(Kt){At+=Kt;var ue=o[ge].id;m[Nt][ue]=Kt}}),x.push(At)});for(var C=0,R=function(){var Ct=!1;if(o.forEach(function(At){var Nt={};Object.keys(m[At.id]).forEach(function(Mr){var vr=m[At.id][Mr],sn=c[Mr].node,nn=sn.clusterId;Nt[nn]||(Nt[nn]=0),Nt[nn]+=vr});var Kt=-1/0,ge=[];if(Object.keys(Nt).forEach(function(Mr){Kt<Nt[Mr]?(Kt=Nt[Mr],ge=[Mr]):Kt===Nt[Mr]&&ge.push(Mr)}),!(ge.length===1&&ge[0]===At.clusterId)){var ue=ge.indexOf(At.clusterId);if(ue>=0&&ge.splice(ue,1),ge&&ge.length){Ct=!0;var Ae=f[At.clusterId],Ke=Ae.nodes.indexOf(At);Ae.nodes.splice(Ke,1);var Gr=Math.floor(Math.random()*ge.length),wr=f[ge[Gr]];wr.nodes.push(At),At.clusterId=wr.id}}}),!Ct)return"break";C++};C<n;){var V=R();if(V==="break")break}Object.keys(f).forEach(function(lt){var Ct=f[lt];(!Ct.nodes||!Ct.nodes.length)&&delete f[lt]});var Q=[],rt={};u.forEach(function(lt){var Ct=lt.source,At=lt.target,Nt=lt[r]||1,Kt=c[Ct].node.clusterId,ge=c[At].node.clusterId,ue="".concat(Kt,"---").concat(ge);if(rt[ue])rt[ue].weight+=Nt,rt[ue].count++;else{var Ae={source:Kt,target:ge,weight:Nt,count:1};rt[ue]=Ae,Q.push(Ae)}});var st=[];return Object.keys(f).forEach(function(lt){st.push(f[lt])}),{clusters:st,clusterEdges:Q}},hn=gn,pn=function(){function i(e){this.arr=e}return i.prototype.getArr=function(){return this.arr||[]},i.prototype.add=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]+r[a];return new i(n)}},i.prototype.subtract=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]-r[a];return new i(n)}},i.prototype.avg=function(e){var t=[];if(e!==0)for(var r in this.arr)t[r]=this.arr[r]/e;return new i(t)},i.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new i(e)},i.prototype.squareEuclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return n}},i.prototype.euclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(n)}else console.error("The two vectors are unequal in length.")},i.prototype.normalize=function(){var e=[],t=(0,p.clone)(this.arr);t.sort(function(o,s){return o-s});var r=t[t.length-1],n=t[0];for(var a in this.arr)e[a]=(this.arr[a]-n)/(r-n);return new i(e)},i.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var r in this.arr)t+=Math.pow(this.arr[r],2);return Math.sqrt(t)},i.prototype.dot=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=this.arr[a]*e.arr[a];return n}else console.error("The two vectors are unequal in length.")},i.prototype.equal=function(e){var t,r=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(r==null?void 0:r.length))return!1;for(var n in this.arr)if(this.arr[n]!==r[n])return!1;return!0},i}(),gt=pn,bt=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,W=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,T=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=100);var r={};e.forEach(function(a){a.properties&&Object.keys(a.properties).forEach(function(o){if(o==="id"||!"".concat(a.properties[o]).match(bt)&&!"".concat(a.properties[o]).match(W)&&isNaN(Number(a.properties[o]))){r.hasOwnProperty(o)&&delete r[o];return}r.hasOwnProperty(o)?r[o]+=1:r[o]=1})});var n=Object.keys(r).sort(function(a,o){return r[o]-r[a]});return n.length<t?n:n.slice(0,t)},A=function(e,t){return t.map(function(r){return e.hasOwnProperty(r)?e[r]:0})},et=function(e){for(var t=T(e),r=[],n=0;n<e.length;n++)r[n]=A(e[n].properties,t);return r},_t=function(e,t){t===void 0&&(t=void 0);var r=[];return e.forEach(function(n){t===void 0&&r.push(n),n[t]!==void 0&&r.push(n[t])}),r},Xt={getAllSortProperties:T,getPropertyWeight:et,getAllProperties:_t},Rt;(function(i){i.EuclideanDistance="euclideanDistance"})(Rt||(Rt={}));var ee=function(e,t,r){var n=[];t!=null&&t.length?n=t:(e.forEach(function(o){n=n.concat(Object.keys(o))}),n=(0,p.uniq)(n));var a={};return n.forEach(function(o){var s=[];e.forEach(function(u){u[o]!==void 0&&u[o]!==""&&s.push(u[o])}),s.length&&!(r!=null&&r.includes(o))&&(a[o]=(0,p.uniq)(s))}),a},Ge=function(e,t,r){var n=ee(e,t,r),a=[];if(!Object.keys(n).length)return a;var o=Object.values(n),s=o.every(function(u){return u.every(function(f){return typeof f=="number"})});return e.forEach(function(u,f){var c=[];Object.keys(n).forEach(function(l){var x=u[l],m=n[l],C=m.findIndex(function(Q){return x===Q}),R=[];if(s)R.push(x);else for(var V=0;V<m.length;V++)V===C?R.push(1):R.push(0);c=c.concat(R)}),a[f]=c}),a},De=function(e,t,r,n){r===void 0&&(r=Rt.EuclideanDistance);var a=0;switch(r){case Rt.EuclideanDistance:a=new gt(e).euclideanDistance(new gt(t));break;default:break}return a},fr={getAllKeyValueMap:ee,oneHot:Ge,getDistance:De},jr=function(e,t,r,n){for(var a=t.length,o=2*n,s=0,u=0;u<a;u++)for(var f=e[u].clusterId,c=0;c<a;c++){var l=e[c].clusterId;if(f===l){var x=t[u][c]||0,m=r[u]||0,C=r[c]||0;s+=x-m*C/o}}return s*=1/o,s},Sr=function(e,t){e===void 0&&(e=[]);for(var r=e.length,n=new gt([]),a=0;a<r;a++)n=n.add(new gt(t[a]));var o=n.avg(r);o.normalize();for(var s=0,a=0;a<r;a++){var u=new gt(t[a]),f=u.squareEuclideanDistance(o);s+=f}var c=[];e.forEach(function(){c.push([])});for(var a=0;a<r;a++){var u=new gt(t[a]);e[a].clusterInertial=0;for(var l=0;l<r;l++){if(a===l){c[a][l]=0;continue}var x=new gt(t[l]);c[a][l]=u.squareEuclideanDistance(x),e[a].clusterInertial+=c[a][l]}}for(var m=0,C=2*r*s,a=0;a<r;a++)for(var R=e[a].clusterId,l=0;l<r;l++){var V=e[l].clusterId;if(!(a===l||R!==V)){var Q=e[a].clusterInertial*e[l].clusterInertial/Math.pow(C,2)-c[a][l]/C;m+=Q}}return Number(m.toFixed(4))},vn=function(e,t,r,n,a,o,s,u,f){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),u===void 0&&(u=["id"]),f===void 0&&(f=1);var c=e.nodes,l=c===void 0?[]:c,x=e.edges,m=x===void 0?[]:x,C=[];if(a){l.forEach(function(mr,Dr){mr.properties=mr.properties||{},mr.originIndex=Dr});var R=[];l.every(function(mr){return mr.hasOwnProperty("nodeType")})&&(R=Array.from(new Set(l.map(function(mr){return mr.nodeType}))),l.forEach(function(mr){mr.properties.nodeType=R.findIndex(function(Dr){return Dr===mr.nodeType})}));var V=_t(l,o);C=Ge(V,s,u)}var Q=1,rt={},st={};l.forEach(function(mr,Dr){var qr=String(Q++);mr.clusterId=qr,rt[qr]={id:qr,nodes:[mr]},st[mr.id]={node:mr,idx:Dr}});var lt=Te(e,t),Ct=[],At={},Nt=0;lt.forEach(function(mr,Dr){var qr=0,un=l[Dr].id;At[un]={},mr.forEach(function(Dn,Rn){if(Dn){qr+=Dn;var ca=l[Rn].id;At[un][ca]=Dn,Nt+=Dn}}),Ct.push(qr)}),Nt/=2;for(var Kt=1/0,ge=1/0,ue=0,Ae=[],Ke={};;){a&&l.every(function(mr){return mr.hasOwnProperty("properties")})?Kt=jr(l,lt,Ct,Nt)+Sr(l,C)*f:Kt=jr(l,lt,Ct,Nt),ue===0&&(ge=Kt,Ae=l,Ke=rt);var Gr=Kt>0&&Kt>ge&&Kt-ge<n;if(Kt>ge&&(Ae=l.map(function(mr){return{node:mr,clusterId:mr.clusterId}}),Ke=(0,p.clone)(rt),ge=Kt),Gr||ue>100)break;ue++,Object.keys(rt).forEach(function(mr){var Dr=0;m.forEach(function(qr){var un=qr.source,Dn=qr.target,Rn=st[un].node.clusterId,ca=st[Dn].node.clusterId;(Rn===mr&&ca!==mr||ca===mr&&Rn!==mr)&&(Dr=Dr+(qr[r]||1))}),rt[mr].sumTot=Dr}),l.forEach(function(mr,Dr){var qr=rt[mr.clusterId],un=0,Dn,Rn=Ct[Dr]/(2*Nt),ca=0,ra=qr.nodes;ra.forEach(function(Vi){var ji=st[Vi.id].idx;ca+=lt[Dr][ji]||0});var qa=ca-qr.sumTot*Rn,Pa=ra.filter(function(Vi){return Vi.id!==mr.id}),Ta=[];Pa.forEach(function(Vi,ji){Ta[ji]=C[Vi.originIndex]});var oi=Sr(Pa,C)*f,Ei=At[mr.id];if(Object.keys(Ei).forEach(function(Vi){var ji=st[Vi].node,eo=ji.clusterId;if(eo!==mr.clusterId){var No=rt[eo],Go=No.nodes;if(!(!Go||!Go.length)){var Va=0;Go.forEach(function(pa){var ei=st[pa.id].idx;Va+=lt[Dr][ei]||0});var di=Va-No.sumTot*Rn,Sa=Go.concat([mr]),gi=[];Sa.forEach(function(pa,ei){gi[ei]=C[pa.originIndex]});var Mi=Sr(Sa,C)*f,na=di-qa;a&&(na=di+Mi-(qa+oi)),na>un&&(un=na,Dn=No)}}}),un>0){Dn.nodes.push(mr);var wi=mr.clusterId;mr.clusterId=Dn.id;var Cs=qr.nodes.indexOf(mr);qr.nodes.splice(Cs,1);var mi=0,As=0;m.forEach(function(Vi){var ji=Vi.source,eo=Vi.target,No=st[ji].node.clusterId,Go=st[eo].node.clusterId;(No===Dn.id&&Go!==Dn.id||Go===Dn.id&&No!==Dn.id)&&(mi=mi+(Vi[r]||1)),(No===wi&&Go!==wi||Go===wi&&No!==wi)&&(As=As+(Vi[r]||1))}),Dn.sumTot=mi,qr.sumTot=As}})}var wr={},Mr=0;Object.keys(Ke).forEach(function(mr){var Dr=Ke[mr];if(!Dr.nodes||!Dr.nodes.length){delete Ke[mr];return}var qr=String(Mr+1);qr!==mr&&(Dr.id=qr,Dr.nodes=Dr.nodes.map(function(un){return{id:un.id,clusterId:qr}}),Ke[qr]=Dr,wr[mr]=qr,delete Ke[mr],Mr++)}),Ae.forEach(function(mr){var Dr=mr.node,qr=mr.clusterId;Dr&&(Dr.clusterId=qr,Dr.clusterId&&wr[Dr.clusterId]&&(Dr.clusterId=wr[Dr.clusterId]))});var vr=[],sn={};m.forEach(function(mr){var Dr=mr.source,qr=mr.target,un=mr[r]||1,Dn=st[Dr].node.clusterId,Rn=st[qr].node.clusterId;if(!(!Dn||!Rn)){var ca="".concat(Dn,"---").concat(Rn);if(sn[ca])sn[ca].weight+=un,sn[ca].count++;else{var ra={source:Dn,target:Rn,weight:un,count:1};sn[ca]=ra,vr.push(ra)}}});var nn=[];return Object.keys(Ke).forEach(function(mr){nn.push(Ke[mr])}),{clusters:nn,clusterEdges:vr}},Xn=vn,je=function(e,t,r,n,a,o,s,u){return t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1),Xn(e,t,r,n,!0,a,o,s,u)},Er=je,Pr=function(e,t){var r;t===void 0&&(t=1);for(var n=(0,p.clone)(e),a=n.nodes,o=a===void 0?[]:a,s=n.edges,u=s===void 0?[]:s,f=function(){var x=zr({nodes:o,edges:u}),m=Object.keys(x);m.sort(function(V,Q){var rt,st;return((rt=x[V])===null||rt===void 0?void 0:rt.degree)-((st=x[Q])===null||st===void 0?void 0:st.degree)});var C=m[0];if(!o.length||((r=x[C])===null||r===void 0?void 0:r.degree)>=t)return"break";var R=o.findIndex(function(V){return V.id===C});o.splice(R,1),u=u.filter(function(V){return!(V.source===C||V.target===C)})};;){var c=f();if(c==="break")break}return{nodes:o,edges:u}},Kr=Pr,$t=function(e,t,r){var n=[];switch(e){case Rt.EuclideanDistance:n=t[r];break;default:n=[];break}return n},Pt=function(e,t,r,n,a,o){t===void 0&&(t=3),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=["id"]),o===void 0&&(o=Rt.EuclideanDistance);var s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l={clusters:[{id:"0",nodes:u}],clusterEdges:[]};if(o===Rt.EuclideanDistance&&!u.every(function(qr){return qr.hasOwnProperty(r)}))return l;var x=[],m=[];if(o===Rt.EuclideanDistance&&(x=_t(u,r),m=Ge(x,n,a)),!m.length)return l;for(var C=(0,p.uniq)(m.map(function(qr){return qr.join("")})),R=Math.min(t,u.length,C.length),V=0;V<u.length;V++)u[V].originIndex=V;for(var Q=[],rt=[],st=[],V=0;V<R;V++)if(V===0){var lt=Math.floor(Math.random()*u.length);switch(o){case Rt.EuclideanDistance:Q[V]=m[lt];break;default:Q[V]=[];break}rt.push(lt),st[V]=[u[lt]],u[lt].clusterId=String(V)}else{for(var Ct=-1/0,At=0,Nt=function(Dn){if(!rt.includes(Dn)){for(var Rn=0,ca=0;ca<Q.length;ca++){var ra=0;switch(o){case Rt.EuclideanDistance:ra=De(m[u[Dn].originIndex],Q[ca],o);break;default:break}Rn+=ra}var qa=Rn/Q.length;qa>Ct&&!Q.find(function(Pa){return(0,p.isEqual)(Pa,$t(o,m,u[Dn].originIndex))})&&(Ct=qa,At=Dn)}},Kt=0;Kt<u.length;Kt++)Nt(Kt);Q[V]=$t(o,m,At),rt.push(At),st[V]=[u[At]],u[At].clusterId=String(V)}for(var ge=0;;){for(var V=0;V<u.length;V++){var ue=0,Ae=1/0;if(!(ge===0&&rt.includes(V))){for(var Ke=0;Ke<Q.length;Ke++){var Gr=0;switch(o){case Rt.EuclideanDistance:Gr=De(m[V],Q[Ke],o);break;default:break}Gr<Ae&&(Ae=Gr,ue=Ke)}if(u[V].clusterId!==void 0)for(var wr=st[Number(u[V].clusterId)].length-1;wr>=0;wr--)st[Number(u[V].clusterId)][wr].id===u[V].id&&st[Number(u[V].clusterId)].splice(wr,1);u[V].clusterId=String(ue),st[ue].push(u[V])}}for(var Mr=!1,V=0;V<st.length;V++){for(var vr=st[V],sn=new gt([]),Ke=0;Ke<vr.length;Ke++)sn=sn.add(new gt(m[vr[Ke].originIndex]));var nn=sn.avg(vr.length);nn.equal(new gt(Q[V]))||(Mr=!0,Q[V]=nn.getArr())}if(ge++,u.every(function(qr){return qr.clusterId!==void 0})&&Mr||ge>=1e3)break}var mr=[],Dr={};return c.forEach(function(qr){var un,Dn,Rn=qr.source,ca=qr.target,ra=(un=u.find(function(oi){return oi.id===Rn}))===null||un===void 0?void 0:un.clusterId,qa=(Dn=u.find(function(oi){return oi.id===ca}))===null||Dn===void 0?void 0:Dn.clusterId,Pa="".concat(ra,"---").concat(qa);if(Dr[Pa])Dr[Pa].count++;else{var Ta={source:ra,target:qa,count:1};Dr[Pa]=Ta,mr.push(Ta)}}),{clusters:st,clusterEdges:mr}},re=Pt,be=function(e,t){var r=new gt(t),n=r.norm2(),a=new gt(e),o=a.norm2(),s=r.dot(a),u=n*o,f=u?s/u:0;return f},pe=be,ke=function(e,t,r,n,a){e===void 0&&(e=[]),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=[]);var o=(0,p.clone)(e.filter(function(x){return x.id!==t.id})),s=e.findIndex(function(x){return x.id===t.id}),u=_t(e,r),f=Ge(u,n,a),c=f[s],l=[];return o.forEach(function(x,m){if(x.id!==t.id){var C=f[m],R=pe(C,c);l.push(R),x.cosineSimilarity=R}}),o.sort(function(x,m){return m.cosineSimilarity-x.cosineSimilarity}),{allCosineSimilarity:l,similarNodes:o}},or=ke,cr=function(){function i(e){this.count=e.length,this.parent={};for(var t=0,r=e;t<r.length;t++){var n=r[t];this.parent[n]=n}}return i.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},i.prototype.union=function(e,t){var r=this.find(e),n=this.find(t);r!==n&&(r<n?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},i.prototype.connected=function(e,t){return this.find(e)===this.find(t)},i}(),rn=cr,Nn=function(e,t){return e-t},An=function(){function i(e){e===void 0&&(e=Nn),this.compareFn=e,this.list=[]}return i.prototype.getLeft=function(e){return 2*e+1},i.prototype.getRight=function(e){return 2*e+2},i.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},i.prototype.isEmpty=function(){return this.list.length<=0},i.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},i.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},i.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},i.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var r=this.list[t];this.list[t]=this.list[e],this.list[e]=r,e=t,t=this.getParent(e)}},i.prototype.moveDown=function(e){var t,r=e,n=this.getLeft(e),a=this.getRight(e),o=this.list.length;n!==null&&n<o&&this.compareFn(this.list[r],this.list[n])>0?r=n:a!==null&&a<o&&this.compareFn(this.list[r],this.list[a])>0&&(r=a),e!==r&&(t=[this.list[r],this.list[e]],this.list[e]=t[0],this.list[r]=t[1],this.moveDown(r))},i}(),la=An,aa=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=a[0],f=new Set;f.add(u);var c=function(V,Q){return t?V.weight-Q.weight:0},l=new la(c);for(Mn(u.id,s).forEach(function(R){l.insert(R)});!l.isEmpty();){var x=l.delMin(),m=x.source,C=x.target;f.has(m)&&f.has(C)||(r.push(x),f.has(m)||(f.add(m),Mn(m,s).forEach(function(R){l.insert(R)})),f.has(C)||(f.add(C),Mn(C,s).forEach(function(R){l.insert(R)})))}return r},Ca=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=s.map(function(m){return m});t&&u.sort(function(m,C){return m.weight-C.weight});for(var f=new rn(a.map(function(m){return m.id}));u.length>0;){var c=u.shift(),l=c.source,x=c.target;f.connected(l,x)||(r.push(c),f.union(l,x))}return r},Qa=function(e,t,r){var n={prim:aa,kruskal:Ca};return r?n[r](e,t):Ca(e,t)},Za=Qa,Xa=function(e,t,r){typeof t!="number"&&(t=1e-6),typeof r!="number"&&(r=.85);for(var n=1,a=0,o=1e3,s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l=u.length,x,m={},C={},R=0;R<l;++R){var V=u[R],Q=V.id;m[Q]=1/l,C[Q]=1/l}for(var rt=zr(e);o>0&&n>t;){a=0;for(var R=0;R<l;++R){var V=u[R],Q=V.id;if(x=0,rt[V.id].inDegree===0)m[Q]=0;else{for(var st=Vr(Q,c,"source"),lt=0;lt<st.length;++lt){var Ct=st[lt],At=rt[Ct].outDegree;At>0&&(x+=C[Ct]/At)}m[Q]=r*x,a+=m[Q]}}a=(1-a)/l,n=0;for(var R=0;R<l;++R){var V=u[R],Q=V.id;x=m[Q]+a,n+=Math.abs(x-C[Q]),C[Q]=x}o-=1}return C},Bo=Xa,Ai=-1,xi=-1,po="-1",ro="-1",bo=-1,$o="-1",Ia=function(){function i(e,t,r,n){e===void 0&&(e=Ai),t===void 0&&(t=xi),r===void 0&&(r=xi),n===void 0&&(n=po),this.id=e,this.from=t,this.to=r,this.label=n}return i}(),zo=function(){function i(e,t){e===void 0&&(e=xi),t===void 0&&(t=ro),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return i.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},i}(),ms=function(){function i(e,t,r){e===void 0&&(e=xi),t===void 0&&(t=!0),r===void 0&&(r=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return i.prototype.getNodeNum=function(){return this.nodes.length},i.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var r=new zo(e,t);this.nodes.push(r),this.nodeMap[e]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},i.prototype.addEdge=function(e,t,r,n){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[e])){var a=new Ia(e,t,r,n);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[t].addEdge(a),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(a),!this.directed){var o=new Ia(e,r,t,n);this.nodeMap[r].addEdge(o),this.edgeLabelMap[n].push(o)}}},i}(),Oa=function(){function i(e,t,r,n,a){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||ro,edgeLabel:n||po,nodeLabel2:a||ro}}return i.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i}(),qo=function(){function i(){this.rmpath=[],this.dfsEdgeList=[]}return i.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,r=e.length;if(t!==r)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i.prototype.pushBack=function(e,t,r,n,a){return this.dfsEdgeList.push(new Oa(e,t,r,n,a)),this.dfsEdgeList},i.prototype.toGraph=function(e,t){e===void 0&&(e=bo),t===void 0&&(t=!1);var r=new ms(e,!0,t);return this.dfsEdgeList.forEach(function(n){var a=n.fromNode,o=n.toNode,s=n.nodeEdgeNodeLabel,u=s.nodeLabel1,f=s.edgeLabel,c=s.nodeLabel2;u!==ro&&r.addNode(a,u),c!==ro&&r.addNode(o,c),u!==ro&&c!==u&&r.addEdge(void 0,a,o,f)}),r},i.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,r=t-1;r>=0;r--){var n=this.dfsEdgeList[r],a=n.fromNode,o=n.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(r),e=a)}return this.rmpath},i.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},i}(),Uo=function(){function i(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return i.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},i.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},i}(),Qo=function(){function i(e){var t=e.graphs,r=e.minSupport,n=r===void 0?2:r,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,u=s===void 0?4:s,f=e.top,c=f===void 0?10:f,l=e.directed,x=l===void 0?!1:l,m=e.verbose,C=m===void 0?!1:m;this.graphs=t,this.dfsCode=new qo,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=c,this.directed=x,this.counter=0,this.maxNodeNum=u,this.minNodeNum=o,this.verbose=C,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return i.prototype.findForwardRootEdges=function(e,t){var r=this,n=[],a=e.nodeMap;return t.edges.forEach(function(o){(r.directed||t.label<=a[o.to].label)&&n.push(o)}),n},i.prototype.findBackwardEdge=function(e,t,r,n){if(!this.directed&&t===r)return null;for(var a=e.nodeMap,o=a[r.to],s=o.edges,u=s.length,f=0;f<u;f++){var c=s[f];if(!(n.hasEdge(c)||c.to!==t.from)){if(this.directed){if(a[t.from].label<a[r.to].label||a[t.from].label===a[r.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&a[t.to].label<=a[r.to].label)return c}}return null},i.prototype.findForwardPureEdges=function(e,t,r,n){for(var a=[],o=t.to,s=e.nodeMap[o].edges,u=s.length,f=0;f<u;f++){var c=s[f],l=e.nodeMap[c.to];r<=l.label&&!n.hasNode(l)&&a.push(c)}return a},i.prototype.findForwardRmpathEdges=function(e,t,r,n){for(var a=[],o=e.nodeMap,s=o[t.to].label,u=o[t.from],f=u.edges,c=f.length,l=0;l<c;l++){var x=f[l],m=o[x.to].label;t.to===x.to||r>m||n.hasNode(o[x.to])||(t.label<x.label||t.label===x.label&&s<=m)&&a.push(x)}return a},i.prototype.getSupport=function(e){var t={};return e.forEach(function(r){t[r.graphId]||(t[r.graphId]=!0)}),Object.keys(t).length},i.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(r){var n=e[r],a=n.nodeLabel1,o=n.edgeLabel,s=n.nodeLabel2;if(!t){t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<t.nodeLabel1||a===t.nodeLabel1&&o<t.edgeLabel||a===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),t},i.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var r=this.directed,n=t.toGraph(bo,r),a=n.nodeMap,o=new qo,s={};n.nodes.forEach(function(l){var x=e.findForwardRootEdges(n,l);x.forEach(function(m){var C=a[m.to],R="".concat(l.label,"-").concat(m.label,"-").concat(C.label);s[R]||(s[R]={projected:[],nodeLabel1:l.label,edgeLabel:m.label,nodeLabel2:C.label});var V={graphId:n.id,edge:m,preNode:null};s[R].projected.push(V)})});var u=this.findMinLabel(s);if(u){o.dfsEdgeList.push(new Oa(0,1,u.nodeLabel1,u.edgeLabel,u.nodeLabel2));var f=function l(x){for(var m=o.buildRmpath(),C=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,R=o.dfsEdgeList[m[0]].toNode,V={},Q=!1,rt=0,st=r?-1:0,lt=function(sn){if(Q)return"break";x.forEach(function(nn){var mr=new Uo(nn),Dr=e.findBackwardEdge(n,mr.edges[m[sn]],mr.edges[m[0]],mr);Dr&&(V[Dr.label]||(V[Dr.label]={projected:[],edgeLabel:Dr.label}),V[Dr.label].projected.push({graphId:n.id,edge:V,preNode:nn}),rt=o.dfsEdgeList[m[sn]].fromNode,Q=!0)})},Ct=m.length-1;Ct>st;Ct--){var At=lt(Ct);if(At==="break")break}if(Q){var Nt=e.findMinLabel(V);o.dfsEdgeList.push(new Oa(R,rt,ro,Nt.edgeLabel,ro));var Kt=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[Kt]!==o.dfsEdgeList[Kt]?!1:l(V[Nt.edgeLabel].projected)}var ge={};Q=!1;var ue=0;x.forEach(function(vr){var sn=new Uo(vr),nn=e.findForwardPureEdges(n,sn.edges[m[0]],C,sn);nn.length>0&&(Q=!0,ue=R,nn.forEach(function(mr){var Dr="".concat(mr.label,"-").concat(a[mr.to].label);ge[Dr]||(ge[Dr]={projected:[],edgeLabel:mr.label,nodeLabel2:a[mr.to].label}),ge[Dr].projected.push({graphId:n.id,edge:mr,preNode:vr})}))});for(var Ae=m.length,Ke=function(sn){if(Q)return"break";var nn=m[sn];x.forEach(function(mr){var Dr=new Uo(mr),qr=e.findForwardRmpathEdges(n,Dr.edges[nn],C,Dr);qr.length>0&&(Q=!0,ue=o.dfsEdgeList[nn].fromNode,qr.forEach(function(un){var Dn="".concat(un.label,"-").concat(a[un.to].label);ge[Dn]||(ge[Dn]={projected:[],edgeLabel:un.label,nodeLabel2:a[un.to].label}),ge[Dn].projected.push({graphId:n.id,edge:un,preNode:mr})}))})},Ct=0;Ct<Ae;Ct++){var Gr=Ke(Ct);if(Gr==="break")break}if(!Q)return!0;var wr=e.findMinLabel(ge);o.dfsEdgeList.push(new Oa(ue,R+1,ro,wr.edgeLabel,wr.nodeLabel2));var Mr=o.dfsEdgeList.length-1;return t.dfsEdgeList[Mr]!==o.dfsEdgeList[Mr]?!1:l(ge["".concat(wr.edgeLabel,"-").concat(wr.nodeLabel2)].projected)},c="".concat(u.nodeLabel1,"-").concat(u.edgeLabel,"-").concat(u.nodeLabel2);return f(s[c].projected)}},i.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,p.clone)(e))}},i.prototype.subGraphMining=function(e){var t=this,r=this.getSupport(e);if(!(r<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},f={};e.forEach(function(c){for(var l=t.graphs[c.graphId],x=l.nodeMap,m=new Uo(c),C=a.length-1;C>=0;C--){var R=t.findBackwardEdge(l,m.edges[a[C]],m.edges[a[0]],m);if(R){var V="".concat(t.dfsCode.dfsEdgeList[a[C]].fromNode,"-").concat(R.label);f[V]||(f[V]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[a[C]].fromNode,edgeLabel:R.label}),f[V].projected.push({graphId:c.graphId,edge:R,preNode:c})}}if(!(n>=t.maxNodeNum)){var Q=t.findForwardPureEdges(l,m.edges[a[0]],s,m);Q.forEach(function(st){var lt="".concat(o,"-").concat(st.label,"-").concat(x[st.to].label);u[lt]||(u[lt]={projected:[],fromNodeId:o,edgeLabel:st.label,nodeLabel2:x[st.to].label}),u[lt].projected.push({graphId:c.graphId,edge:st,preNode:c})});for(var rt=function(lt){var Ct=t.findForwardRmpathEdges(l,m.edges[a[lt]],s,m);Ct.forEach(function(At){var Nt="".concat(t.dfsCode.dfsEdgeList[a[lt]].fromNode,"-").concat(At.label,"-").concat(x[At.to].label);u[Nt]||(u[Nt]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[a[lt]].fromNode,edgeLabel:At.label,nodeLabel2:x[At.to].label}),u[Nt].projected.push({graphId:c.graphId,edge:At,preNode:c})})},C=0;C<a.length;C++)rt(C)}}),Object.keys(f).forEach(function(c){var l=f[c],x=l.toNodeId,m=l.edgeLabel;t.dfsCode.dfsEdgeList.push(new Oa(o,x,"-1",m,"-1")),t.subGraphMining(f[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(u).forEach(function(c){var l=u[c],x=l.fromNodeId,m=l.edgeLabel,C=l.nodeLabel2;t.dfsCode.dfsEdgeList.push(new Oa(x,o+1,ro,m,C)),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()})}},i.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,a={},o={},s={},u={};return Object.keys(e).forEach(function(f){var c=e[f],l=c.nodeMap;c.nodes.forEach(function(x,m){var C=x.label,R="".concat(f,"-").concat(C);if(!s[R]){var V=a[C]||0;V++,a[C]=V}s[R]={graphKey:f,label:C},x.edges.forEach(function(Q){var rt=C,st=l[Q.to].label;if(!t&&rt>st){var lt=st;st=rt,rt=lt}var Ct=Q.label,At="".concat(f,"-").concat(rt,"-").concat(Ct,"-").concat(st),Nt="".concat(rt,"-").concat(Ct,"-").concat(st);if(!o[Nt]){var Kt=o[Nt]||0;Kt++,o[Nt]=Kt}u[At]={graphId:f,nodeLabel1:rt,edgeLabel:Ct,nodeLabel2:st}})})}),Object.keys(a).forEach(function(f){var c=a[f];if(!(c<r)){var l={nodes:[],edges:[]};l.nodes.push({id:"0",label:f}),n.push(l)}}),n},i.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,r=this.directed,n={};Object.keys(t).forEach(function(a){var o=t[a],s=o.nodeMap;o.nodes.forEach(function(u){var f=e.findForwardRootEdges(o,u);f.forEach(function(c){var l=s[c.to],x="".concat(u.label,"-").concat(c.label,"-").concat(l.label);n[x]||(n[x]={projected:[],nodeLabel1:u.label,edgeLabel:c.label,nodeLabel2:l.label});var m={graphId:a,edge:c,preNode:null};n[x].projected.push(m)})})}),Object.keys(n).forEach(function(a){var o=n[a],s=o.projected,u=o.nodeLabel1,f=o.edgeLabel,c=o.nodeLabel2;e.dfsCode.dfsEdgeList.push(new Oa(0,1,u,f,c)),e.subGraphMining(s),e.dfsCode.dfsEdgeList.pop()})}},i}(),no=function(e,t,r,n){var a={};return Object.keys(e).forEach(function(o,s){var u=e[o],f=new ms(s,!0,t),c={};u.nodes.forEach(function(l,x){f.addNode(x,l[r]),c[l.id]=x}),u.edges.forEach(function(l,x){var m=c[l.source],C=c[l.target];f.addEdge(-1,m,C,l[n])}),f&&f.getNodeNum()&&(a[f.id]=f)}),a},Eo=function(e,t,r){var n=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var u;o.nodes.push((u={id:"".concat(s.id)},u[t]=s.label,u))}),a.edges.forEach(function(s){var u;o.edges.push((u={source:"".concat(s.from),target:"".concat(s.to)},u[r]=s.label,u))}),n.push(o)}),n},Us="cluster",Qs=function(e){var t=e.graphs,r=e.directed,n=r===void 0?!1:r,a=e.nodeLabelProp,o=a===void 0?Us:a,s=e.edgeLabelProp,u=s===void 0?Us:s,f=no(t,n,o,u),c=e.minSupport,l=e.maxNodeNum,x=e.minNodeNum,m=e.verbose,C=e.top,R={graphs:f,minSupport:c,maxNodeNum:l,minNodeNum:x,top:C,verbose:m,directed:n},V=new Qo(R);V.run();var Q=Eo(V.frequentSubgraphs,o,u);return Q},ki=Qs,ao=function(e,t,r,n){r===void 0&&(r="cluster"),n===void 0&&(n=2);var a=[],o=e.nodes;return t.forEach(function(s,u){a.push(Ts(o,s,u,r,n))}),a},Ts=function(e,t,r,n,a){var o=[r],s=[],u={};return t.forEach(function(f,c){if(f<=a&&r!==c){o.push(c),s.push(e[c]);var l=e[c][n];u[l]?(u[l].count++,u[l].dists.push(f)):u[l]={count:1,dists:[f]}}}),Object.keys(u).forEach(function(f){u[f].dists=u[f].dists.sort(function(c,l){return c-l})}),{nodeIdx:r,nodeId:e[r].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:u}},Ws=function(e,t,r,n,a){var o=Math.ceil(r/t),s={},u=0;return n.forEach(function(f,c){for(var l=0,x=0,m=f.nodeIdxs,C=f.neighborNum-1;l<o;){for(var R=m[1+Math.floor(Math.random()*C)],V=0;(s["".concat(c,"-").concat(R)]||s["".concat(R,"-").concat(c)])&&(R=Math.floor(Math.random()*t),V++,!(V>2*t)););if(V<2*t&&(s["".concat(c,"-").concat(R)]={start:c,end:R,distance:a[c][R]},l++,u++,u>=r))return s;if(x++,x>2*t)break}if(l<o){var Q=o-l;o=(o+Q)/(t-c-1)}}),s},Po=function(e,t,r,n){var a=r.nodes;return n||(n={}),Object.keys(e).forEach(function(o){var s,u;if(!(n&&n[o])){n[o]={nodes:[],edges:[]};var f=e[o],c=(s=t[f.start])===null||s===void 0?void 0:s.nodeIdxs,l=(u=t[f.end])===null||u===void 0?void 0:u.nodeIdxs;if(!(!c||!l)){var x=new Set(l),m=c.filter(function(rt){return x.has(rt)});if(!(!m||!m.length)){for(var C={},R=m.length,V=0;V<R;V++){var Q=a[m[V]];n[o].nodes.push(Q),C[Q.id]=!0}r.edges.forEach(function(rt){C[rt.source]&&C[rt.target]&&n[o].edges.push(rt)})}}}}),n},wo=function(e,t,r,n){var a,o,s={};e.nodes.forEach(function(f){s[f.id]=f});var u=0;return!(!((a=t==null?void 0:t.edges)===null||a===void 0)&&a.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(f){var c=s[f.source][r],l=s[f.target][r],x=t==null?void 0:t.nodes[0][r],m=t==null?void 0:t.nodes[1][r],C=t==null?void 0:t.edges[0][n];f[n]===C&&(c===x&&l===m||c===m&&l===x)&&u++}),u)},Xs=function(e,t,r){for(var n=1/0,a=0,o=function(f){var c=e[f],l=Object.keys(c).sort(function(rt,st){return c[rt]-c[st]}),x=10,m=[];l.forEach(function(rt,st){m[st%x]||(m[st%x]={graphs:[],totalCount:0,aveCount:0}),m[st%x].graphs.push(rt),m[st%x].totalCount+=c[rt]});var C=0,R=[];m.forEach(function(rt){var st=rt.totalCount/rt.graphs.length;rt.aveCount=st,R.push(st);var lt=0,Ct=rt.length;rt.graphs.forEach(function(At,Nt){var Kt=c[At];rt.graphs.forEach(function(ge,ue){Nt!==ue&&(lt+=Math.abs(Kt-c[ge]))})}),lt/=Ct*(Ct-1)/2,C+=lt}),C/=m.length;var V=0;R.forEach(function(rt,st){R.forEach(function(lt,Ct){st!==Ct&&(V+=Math.abs(rt-lt))}),V/=R.length*(R.length-1)/2});var Q=V-C;n<Q&&(n=Q,a=f)},s=0;s<t;s++)o(s);return{structure:r[a],structureCountMap:e[a]}},xs=function(e,t){var r={},n={};return e.forEach(function(a,o){r[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[t];n[s]||(n[s]=[]),n[s].push(a)}),{nodeMap:r,nodeLabelMap:n}},Ys=function(e,t,r){var n={},a={};return e.forEach(function(o,s){n["".concat(Hr)]={idx:s,edge:o};var u=o[t];a[u]||(a[u]=[]),a[u].push(o);var f=r[o.source];f&&(f.degree++,f.outDegree++);var c=r[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:n,edgeLabelMap:a}},qn=function(e,t,r){var n=t.length,a={};return t.forEach(function(o,s){for(var u=r?0:s+1,f=e[s].id,c=u;c<n;c++)if(s!==c){var l=e[c].id,x=o[c];a["".concat(f,"-").concat(l)]=x,r||(a["".concat(l,"-").concat(f)]=x)}}),a},io=function(e,t,r,n,a,o,s,u,f,c,l){var x,m="".concat(t.id,"-").concat(r.id);if(c&&c[m])return c[m];var C=l?l[m]:void 0;if(!C){var R=(x={},x[m]={start:n[t.id].idx,end:n[r.id].idx,distance:a},x);l=Po(R,o,e,l),C=l[m]}return wo(C,s,u,f)},_o=function(e,t,r,n){var a,o,s,u=(a=e[t])===null||a===void 0?void 0:a.degree,f=(o=e[t])===null||o===void 0?void 0:o.inDegree,c=(s=e[t])===null||s===void 0?void 0:s.outDegree;return e[t]===void 0&&(u=1/0,f=1/0,c=1/0,n[t].forEach(function(l){var x=r[l.id].degree;u>x&&(u=x);var m=r[l.id].inDegree;f>m&&(f=m);var C=r[l.id].outDegree;c>C&&(c=C)}),e[t]={degree:u,inDegree:f,outDegree:c}),{minPatternNodeLabelDegree:u,minPatternNodeLabelInDegree:f,minPatternNodeLabelOutDegree:c}},Ti=function(e,t,r,n,a,o,s){var u;if(r===void 0&&(r=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var f=e.nodes.length;if(f){var c=Nr(e,r),l=Nr(t,r),x=qn(e.nodes,c,r),m=qn(t.nodes,l,r),C=xs(e.nodes,o),R=C.nodeMap,V=C.nodeLabelMap,Q=xs(t.nodes,o),rt=Q.nodeMap,st=Q.nodeLabelMap;Ys(e.edges,s,R);var lt=Ys(t.edges,s,rt).edgeLabelMap,Ct=[];l==null||l.forEach(function(Va){Ct=Ct.concat(Va)}),a||(a=Math.max.apply(Math,(0,K.__spreadArray)((0,K.__spreadArray)([],Ct,!1),[2],!1))),n||(n=a);var At=ao(e,c,o,n),Nt=ao(t,l,o,n),Kt=Math.min(100,f*(f-1)/2),ge=Ws(n,f,Kt,At,c),ue=Po(ge,At,e),Ae=10,Ke=1,Gr=1,wr=4,Mr={graphs:ue,nodeLabelProp:o,edgeLabelProp:s,minSupport:Ke,minNodeNum:Gr,maxNodeNum:wr,directed:r},vr=ki(Mr).slice(0,Ae),sn=vr.length,nn=[];vr.forEach(function(Va,di){nn[di]={},Object.keys(ue).forEach(function(Sa){var gi=ue[Sa],Mi=wo(gi,Va,o,s);nn[di][Sa]=Mi})});var mr=Xs(nn,sn,vr),Dr=mr.structure,qr=mr.structureCountMap,un=t.nodes[0],Dn=[],Rn=(u=t.nodes[0])===null||u===void 0?void 0:u[o],ca=-1/0;t.nodes.forEach(function(Va){var di=Va[o],Sa=V[di];(Sa==null?void 0:Sa.length)>ca&&(ca=Sa.length,Dn=Sa,Rn=di,un=Va)});var ra={},qa={},Pa={},Ta={},oi={},Ei={};Object.keys(st).forEach(function(Va,di){oi[Va]=[],r&&(Ei[Va]=[]);var Sa=-1/0,gi=st[Va],Mi={};gi.forEach(function(ni){var ci=m["".concat(un.id,"-").concat(ni.id)];if(ci&&oi[Va].push(ci),Sa<ci&&(Sa=ci),Mi["".concat(un.id,"-").concat(ni.id)]={start:0,end:rt[ni.id].idx,distance:ci},r){var La=m["".concat(ni.id,"-").concat(un.id)];La&&Ei[Va].push(La)}}),oi[Va]=oi[Va].sort(function(ni,ci){return ni-ci}),r&&(Ei[Va]=Ei[Va].sort(function(ni,ci){return ni-ci})),qa=Po(Mi,Nt,t,qa);var na=[];if(Object.keys(Mi).forEach(function(ni){if(Pa[ni]){na.push(Pa[ni]);return}var ci=qa[ni];Pa[ni]=wo(ci,Dr,o,s),na.push(Pa[ni])}),na=na.sort(function(ni,ci){return ci-ni}),Ta["".concat(un.id,"-").concat(Va)]=na,Va!==Rn)for(var pa=(Dn==null?void 0:Dn.length)||0,ei=function(ci){var La=Dn[ci],ps=At[R[La.id].idx],Pi=ps.nodeLabelCountMap[Va],gc=st[Va].length;if(!Pi||Pi.count<gc)return Dn.splice(ci,1),"continue";for(var lh=!1,tu=0;tu<gc;tu++)if(Pi.dists[tu]>oi[Va][tu]){lh=!0;break}if(lh)return Dn.splice(ci,1),"continue";var Yu={};ps.neighbors.forEach(function(eu){var ff=x["".concat(La.id,"-").concat(eu.id)];Yu["".concat(La.id,"-").concat(eu.id)]={start:R[La.id].idx,end:R[eu.id].idx,distance:ff}}),ue=Po(Yu,At,e,ue);var Gf=[];Object.keys(Yu).forEach(function(eu){if(qr[eu]){Gf.push(qr[eu]);return}var ff=ue[eu];qr[eu]=wo(ff,Dr,o,s),Gf.push(qr[eu])}),Gf=Gf.sort(function(eu,ff){return ff-eu});for(var jc=!1,tu=0;tu<gc;tu++)if(Gf[tu]<na[tu]){jc=!0;break}if(jc)return Dn.splice(ci,1),"continue"},Ci=pa-1;Ci>=0;Ci--)ei(Ci)});var wi=[];Dn==null||Dn.forEach(function(Va){for(var di=R[Va.id].idx,Sa=Ts(e.nodes,c[di],di,o,a),gi=Sa.neighbors,Mi=gi.length,na=!1,pa=Mi-1;pa>=0;pa--){if(gi.length+1<t.nodes.length){na=!0;return}var ei=gi[pa],Ci=ei[o];if(!st[Ci]||!st[Ci].length){gi.splice(pa,1);continue}if(!oi[Ci]||!oi[Ci].length){gi.splice(pa,1);continue}var ni="".concat(Va.id,"-").concat(ei.id),ci=x[ni],La=oi[Ci].length-1,ps=oi[Ci][La];if(ci>ps){gi.splice(pa,1);continue}if(r){var Pi="".concat(ei.id,"-").concat(Va.id),gc=x[Pi];La=Ei[Ci].length-1;var lh=Ei[Ci][La];if(gc>lh){gi.splice(pa,1);continue}}var tu=qr[ni]?qr[ni]:io(e,Va,ei,R,ci,At,Dr,o,s,qr,ue),Yu="".concat(un.id,"-").concat(Ci),Gf=Ta[Yu][Ta[Yu].length-1];if(tu<Gf){gi.splice(pa,1);continue}var jc=_o(ra,Ci,rt,st),eu=jc.minPatternNodeLabelDegree,ff=jc.minPatternNodeLabelInDegree,pc=jc.minPatternNodeLabelOutDegree;if(R[ei.id].degree<eu){gi.splice(pa,1);continue}}na||wi.push({nodes:[Va].concat(gi)})});var Cs=Ve(t,un.id,!1).length,mi={};r?(Object.keys(Cs).forEach(function(Va){var di=rt[Va].node[o];mi[di]?mi[di].push(Cs[Va]):mi[di]=[Cs[Va]]}),Object.keys(mi).forEach(function(Va){mi[Va].sort(function(di,Sa){return di-Sa})})):mi=oi;for(var As=wi.length,Vi=function(di){var Sa=wi[di],gi=Sa.nodes[0],Mi={},na={};Sa.nodes.forEach(function(go,Su){na[go.id]={idx:Su,node:go,degree:0,inDegree:0,outDegree:0};var ys=go[o];Mi[ys]?Mi[ys]++:Mi[ys]=1});var pa=[],ei={};e.edges.forEach(function(go){na[go.source]&&na[go.target]&&(pa.push(go),ei[go[s]]?ei[go[s]]++:ei[go[s]]=1,na[go.source].degree++,na[go.target].degree++,na[go.source].outDegree++,na[go.target].inDegree++)});for(var Ci=Object.keys(lt).length,ni=!1,ci=0;ci<Ci;ci++){var La=Object.keys(lt)[ci];if(!ei[La]||ei[La]<lt[La].length){ni=!0;break}}if(ni)return wi.splice(di,1),"continue";var ps=pa.length;if(ps<t.edges.length)return wi.splice(di,1),"break";for(var Pi=!1,gc=function(Su){var ys=pa[Su],zf=ys[s],Nl=lt[zf];if(!Nl||!Nl.length)return ei[zf]--,Nl&&ei[zf]<Nl.length?(Pi=!0,"break"):(pa.splice(Su,1),na[ys.source].degree--,na[ys.target].degree--,na[ys.source].outDegree--,na[ys.target].inDegree--,"continue");var By=na[ys.source].node[o],Fy=na[ys.target].node[o],ug=!1;if(Nl.forEach(function(Gy){var zy=rt[Gy.source].node,Uy=rt[Gy.target].node;zy[o]===By&&Uy[o]===Fy&&(ug=!0),!r&&zy[o]===Fy&&Uy[o]===By&&(ug=!0)}),!ug)return ei[zf]--,Nl&&ei[zf]<Nl.length?(Pi=!0,"break"):(pa.splice(Su,1),na[ys.source].degree--,na[ys.target].degree--,na[ys.source].outDegree--,na[ys.target].inDegree--,"continue")},ci=ps-1;ci>=0;ci--){var lh=gc(ci);if(lh==="break")break}if(Pi)return wi.splice(di,1),"continue";Sa.edges=pa;var tu=Ve(Sa,Sa.nodes[0].id,!1).length;if(Object.keys(tu).reverse().forEach(function(go){if(!(go===Sa.nodes[0].id||Pi)){if(tu[go]===1/0){var Su=na[go].node[o];if(Mi[Su]--,Mi[Su]<st[Su].length){Pi=!0;return}var ys=Sa.nodes.indexOf(na[go].node);Sa.nodes.splice(ys,1),na[go]=void 0;return}var zf=R[go].node[o];if(!mi[zf]||!mi[zf].length||tu[go]>mi[zf][mi[zf].length-1]){var Su=na[go].node[o];if(Mi[Su]--,Mi[Su]<st[Su].length){Pi=!0;return}var ys=Sa.nodes.indexOf(na[go].node);Sa.nodes.splice(ys,1),na[go]=void 0}}}),Pi)return wi.splice(di,1),"continue";for(var Yu=!0,Gf=0;Yu&&!Pi;){Yu=!1;var jc=r?na[gi.id].degree<rt[un.id].degree||na[gi.id].inDegree<rt[un.id].inDegree||na[gi.id].outDegree<rt[un.id].outDegree:na[gi.id].degree<rt[un.id].degree;if(jc){Pi=!0;break}if(Mi[gi[o]]<st[gi[o]].length){Pi=!0;break}for(var eu=Sa.nodes.length,ff=eu-1;ff>=0;ff--){var pc=Sa.nodes[ff],ky=na[pc.id].degree,jS=na[pc.id].inDegree,HS=na[pc.id].outDegree,KS=pc[o],sg=_o(ra,KS,rt,st),Ry=sg.minPatternNodeLabelDegree,ZS=sg.minPatternNodeLabelInDegree,$S=sg.minPatternNodeLabelOutDegree,qS=r?ky<Ry||jS<ZS||HS<$S:ky<Ry;if(qS){if(Mi[pc[o]]--,Mi[pc[o]]<st[pc[o]].length){Pi=!0;break}Sa.nodes.splice(ff,1),na[pc.id]=void 0,Yu=!0}}if(Pi||!Yu&&Gf!==0)break;ps=pa.length;for(var Zv=ps-1;Zv>=0;Zv--){var yc=pa[Zv];if(!na[yc.source]||!na[yc.target]){pa.splice(Zv,1);var $v=yc[s];if(ei[$v]--,na[yc.source]&&(na[yc.source].degree--,na[yc.source].outDegree--),na[yc.target]&&(na[yc.target].degree--,na[yc.target].inDegree--),lt[$v]&&ei[$v]<lt[$v].length){Pi=!0;break}Yu=!0}}Gf++}if(Pi||Pi||Sa.nodes.length<t.nodes.length||pa.length<t.edges.length)return wi.splice(di,1),"continue"},ji=As-1;ji>=0;ji--){var eo=Vi(ji);if(eo==="break")break}for(var No=wi.length,Go=function(di){var Sa=wi[di],gi={};Sa.edges.forEach(function(pa){var ei="".concat(pa.source,"-").concat(pa.target,"-").concat(pa.label);gi[ei]?gi[ei]++:gi[ei]=1});for(var Mi=function(ei){var Ci=wi[ei],ni={};Ci.edges.forEach(function(La){var ps="".concat(La.source,"-").concat(La.target,"-").concat(La.label);ni[ps]?ni[ps]++:ni[ps]=1});var ci=!0;Object.keys(ni).length!==Object.keys(gi).length?ci=!1:Object.keys(gi).forEach(function(La){ni[La]!==gi[La]&&(ci=!1)}),ci&&wi.splice(ei,1)},na=No-1;na>di;na--)Mi(na);No=wi.length},ji=0;ji<=No-1;ji++)Go(ji);return wi}}},bs=Ti,Is=function(){function i(e){e===void 0&&(e=10),this.linkedList=new Lt,this.maxStep=e}return Object.defineProperty(i.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},i.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},i.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},i.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},i.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},i}(),Ri=Is,fs=Bn,Os={getAdjMatrix:Te,breadthFirstSearch:Un,connectedComponent:sr,getDegree:zr,getInDegree:fn,getOutDegree:wn,detectCycle:Bn,detectDirectedCycle:fs,detectAllCycles:Wn,detectAllDirectedCycle:Hn,detectAllUndirectedCycle:bn,depthFirstSearch:Jn,dijkstra:Ve,findAllPath:ar,findShortestPath:nr,floydWarshall:Nr,labelPropagation:hn,louvain:Xn,iLouvain:Er,kCore:Kr,kMeans:re,cosineSimilarity:pe,nodesCosineSimilarity:or,minimumSpanningTree:Za,pageRank:Bo,getNeighbors:Vr,Stack:Ri,GADDI:bs},Wo=z(77160),xn=z(31437),cs=Bt,ko=function(e){return function(t,r){return t[e]-r[e]}},oo=function(e,t,r){return e>=t&&e<=r},Jo=function(e,t,r,n){var a=1e-4,o={x:r.x-e.x,y:r.y-e.y},s={x:t.x-e.x,y:t.y-e.y},u={x:n.x-r.x,y:n.y-r.y},f=s.x*u.y-s.y*u.x,c=f*f,l=1/f,x=s.x*s.x+s.y*s.y,m=u.x*u.x+u.y*u.y;if(c>a*x*m){var C=(o.x*u.y-o.y*u.x)*l,R=(o.x*s.y-o.y*s.x)*l;return!oo(C,0,1)||!oo(R,0,1)?null:{x:e.x+C*s.x,y:e.y+C*s.y}}return null},Es=function(e,t){var r=e.x,n=e.y,a=e.width,o=e.height,s=r+a/2,u=n+o/2,f=[],c={x:s,y:u};f.push({x:r,y:n}),f.push({x:r+a,y:n}),f.push({x:r+a,y:n+o}),f.push({x:r,y:n+o}),f.push({x:r,y:n});for(var l=null,x=1;x<f.length&&(l=Jo(f[x-1],f[x],c,t),!l);x++);return l},Hi=function(e,t){var r=e.x,n=e.y,a=e.r,o=t.x,s=t.y,u=o-r,f=s-n;if(u*u+f*f<a*a)return null;var c=Math.atan(f/u);return{x:r+Math.abs(a*Math.cos(c))*Math.sign(u),y:n+Math.abs(a*Math.sin(c))*Math.sign(f)}},So=function(e,t){var r=e.rx,n=e.ry,a=e.x,o=e.y,s=t.x-a,u=t.y-o,f=Math.atan2(u/n,s/r);return f<0&&(f+=2*Math.PI),{x:a+r*Math.cos(f),y:o+n*Math.sin(f)}},Ii=function(e,t,r){r===void 0&&(r=1);var n=[e.x,e.y,r];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),Wo.transformMat3(n,n,t),{x:n[0],y:n[1]}},yo=function(e,t,r){r===void 0&&(r=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var n=Wt.invert([1,0,0,0,1,0,0,0,1],t);n||(n=[1,0,0,0,1,0,0,0,1]);var a=[e.x,e.y,r];return Wo.transformMat3(a,a,n),{x:a[0],y:a[1]}},so=function(e,t,r){var n=e.x-t.x,a=e.y-t.y,o=e.x-r.x,s=e.y-r.y,u=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,f=(e.x*e.x-r.x*r.x-r.y*r.y+e.y*e.y)/2,c=a*o-n*s;return{x:-(s*u-a*f)/c,y:-(n*f-o*u)/c}},ts=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},es=function(e,t){var r=[];return e.forEach(function(n){var a=[];n.forEach(function(o){a.push(o*t)}),r.push(a)}),r},Ro=function(e){for(var t=[],r=e.length,n=0;n<r;n+=1){t[n]=[];for(var a=0;a<r;a+=1)n===a?t[n][a]=0:e[n][a]===0||!e[n][a]?t[n][a]=1/0:t[n][a]=e[n][a]}for(var o=0;o<r;o+=1)for(var n=0;n<r;n+=1)for(var a=0;a<r;a+=1)t[n][a]>t[n][o]+t[o][a]&&(t[n][a]=t[n][o]+t[o][a]);return t},ls=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];a[c][l]=1,t||(a[l][c]=1)}),a},Xo=function(e,t){e.translate(t.x,t.y)},Yo=function(e,t,r,n){n===void 0&&(n={duration:500});var a=e.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=t.x-o.minX,u=t.y-o.minY;if(r){var f=s*a[0],c=u*a[4],l=0,x=0,m=0,C=0;e.animate(function(V){return m=f*V,C=c*V,a=cs(a,[["t",m-l,C-x]]),l=m,x=C,{matrix:a}},n)}else{var R=cs(a,[["t",s,u]]);e.setMatrix(R)}},Fo=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=t;(0,p.isArray)(t)||(n=[t,t]),(0,p.isArray)(t)&&t.length===1&&(n=[t[0],t[0]]),r=cs(r,[["s",n[0],n[1]]]),e.setMatrix(r)},za=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=cs(r,[["r",t]]),e.setMatrix(r)},Fi=function(e,t,r){for(var n=[],a=0;a<e;a++)n[a]=0;return r.forEach(function(o){o.source&&(n[t[o.source]]+=1),o.target&&(n[t[o.target]]+=1)}),n};function uo(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}var Na=function(e,t,r){var n=!1,a=e.length,o=1e-6;function s(l){return Math.abs(l)<o?0:l<0?-1:1}if(a<=2)return!1;for(var u=0;u<a;u++){var f=e[u],c=e[(u+1)%a];if(uo(f,c,[t,r]))return!0;s(f[1]-r)>0!=s(c[1]-r)>0&&s(t-(r-f[1])*(f[0]-c[0])/(f[1]-c[1])-f[0])<0&&(n=!n)}return n},Mo=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},rs=function(e,t){var r=!1;return(0,p.each)(e,function(n){if(Jo(n.from,n.to,t.from,t.to))return r=!0,!1}),r},Gi=function(e,t){var r=function(x){var m=x.map(function(R){return R[0]}),C=x.map(function(R){return R[1]});return{minX:Math.min.apply(null,m),maxX:Math.max.apply(null,m),minY:Math.min.apply(null,C),maxY:Math.max.apply(null,C)}},n=function(x){for(var m=[],C=x.length,R=0;R<C-1;R++){var V=x[R],Q=x[R+1];m.push({from:{x:V[0],y:V[1]},to:{x:Q[0],y:Q[1]}})}if(m.length>1){var rt=x[0],st=x[C-1];m.push({from:{x:st[0],y:st[1]},to:{x:rt[0],y:rt[1]}})}return m};if(e.length<2||t.length<2)return!1;var a=r(e),o=r(t);if(!Mo(a,o))return!1;var s=!1;if((0,p.each)(t,function(l){if(Na(e,l[0],l[1]))return s=!0,!1}),s||((0,p.each)(e,function(l){if(Na(t,l[0],l[1]))return s=!0,!1}),s))return!0;var u=n(e),f=n(t),c=!1;return(0,p.each)(f,function(l){if(rs(u,l))return c=!0,!1}),c},mo=function(){function i(e,t,r,n){this.x1=e,this.y1=t,this.x2=r,this.y2=n}return i.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2),a={x:e,y:t,minX:e,minY:t,maxX:r,maxY:n,width:r-e,height:n-t};return a},i}(),Co=function(e,t){var r={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return r[t]},Ao=function(e,t){var r=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),n=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),a=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(a){var o=r/a,s=n/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},Ls=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=0,o=[],s=0;s<4;s++){var u=Co(n,r[s]),f=u[0],c=u[1],l=u[2],x=u[3];o[s]=Jo({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:f,y:c},{x:l,y:x}),o[s]&&(a+=1)}return[o,a]},Ds=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var u=Co(n,r[s]),f=u[0],c=u[1],l=u[2],x=u[3],m=Ao(t,new mo(f,c,l,x));m=Math.abs(m-.5),m>=0&&m<=1&&(o+=1,a=m<a?m:a)}return o===0?-1:a},ns=function(e){var t=0,r=0;if(e.length>0){for(var n=0,a=e;n<a.length;n++){var o=a[n];t+=o.x,r+=o.y}t/=e.length,r/=e.length}return{x:t,y:r}},Vo=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},ru=function(e,t){var r=t.x1,n=t.y1,a=t.x2-r,o=t.y2-n,s=e.x-r,u=e.y-n,f=s*a+u*o,c;f<=0?c=0:(s=a-s,u=o-u,f=s*a+u*o,f<=0?c=0:c=f*f/(a*a+o*o));var l=s*s+u*u-c;return l<0&&(l=0),l},Vs=function(e,t,r){return r===void 0&&(r=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(r,2)},hs=function(e,t){var r=e.x<t.x,n=e.x>t.x+t.width,a=e.y>t.y+t.height,o=e.y<t.y,s=r||n||a||o;if(!s)return 0;if(a&&!r&&!n)return Math.pow(t.y+t.height-e.y,2);if(o&&!r&&!n)return Math.pow(e.y-t.y,2);if(r&&!a&&!o)return Math.pow(t.x-e.x,2);if(n&&!a&&!o)return Math.pow(t.x+t.width-e.x,2);var u=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),f=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return u*u+f*f},Ft=function(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=t.x,u=t.y,f=[a-r,o-n];if(xn.exactEquals(f,[0,0]))return NaN;var c=[-f[1],f[0]];xn.normalize(c,c);var l=[s-r,u-n];return Math.abs(xn.dot(l,c))},me=function(e,t,r){return e+(t-e)*r},We=function(e,t,r){for(var n=Math.min(e.length,t.length),a=new Array(n),o=0;o<n;o++)a[o]=me(e[o],t[o],r);return a},qe="rgb(95, 149, 255)",Rr="rgb(255, 255, 255)",En="rgb(0, 0, 0)",Vn="rgb(247, 250, 255)",ja="rgb(239, 244, 255)",li="rgb(253, 253, 253)",fo="rgb(250, 250, 250)",qi="rgb(224, 224, 224)",js="rgb(234, 234, 234)",Mu="rgb(245, 245, 245)",gu="rgb(191, 213, 255)",Hs="#4572d9",pu="rgb(223, 234, 255)",Ua={mainStroke:qe,mainFill:ja,activeStroke:qe,activeFill:Vn,inactiveStroke:gu,inactiveFill:Vn,selectedStroke:qe,selectedFill:Rr,highlightStroke:Hs,highlightFill:pu,disableStroke:qi,disableFill:fo,edgeMainStroke:qi,edgeActiveStroke:qe,edgeInactiveStroke:js,edgeSelectedStroke:qe,edgeHighlightStroke:qe,edgeDisableStroke:Mu,comboMainStroke:qi,comboMainFill:li,comboActiveStroke:qe,comboActiveFill:Vn,comboInactiveStroke:qi,comboInactiveFill:li,comboSelectedStroke:qe,comboSelectedFill:li,comboHighlightStroke:Hs,comboHighlightFill:li,comboDisableStroke:js,comboDisableFill:fo},Fn={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Ua.mainStroke,fill:ja},size:20,color:Ua.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Ua.activeFill,stroke:Ua.activeStroke}},nodeStateStyles:{active:{fill:Ua.activeFill,stroke:Ua.activeStroke,lineWidth:2,shadowColor:Ua.mainStroke,shadowBlur:10},selected:{fill:Ua.selectedFill,stroke:Ua.selectedStroke,lineWidth:4,shadowColor:Ua.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Ua.highlightFill,stroke:Ua.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Ua.inactiveFill,stroke:Ua.inactiveStroke,lineWidth:1},disable:{fill:Ua.disableFill,stroke:Ua.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:En,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Ua.edgeMainStroke,lineAppendWidth:2},color:Ua.edgeMainStroke},edgeStateStyles:{active:{stroke:Ua.edgeActiveStroke,lineWidth:1},selected:{stroke:Ua.edgeSelectedStroke,lineWidth:2,shadowColor:Ua.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Ua.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Ua.edgeInactiveStroke,lineWidth:1},disable:{stroke:Ua.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:En,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Ua.comboMainFill,lineWidth:1,stroke:Ua.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Ua.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Ua.comboActiveStroke,lineWidth:1,fill:Ua.comboActiveFill},selected:{stroke:Ua.comboSelectedStroke,lineWidth:2,fill:Ua.comboSelectedFill,shadowColor:Ua.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Ua.comboHighlightStroke,lineWidth:2,fill:Ua.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Ua.comboInactiveStroke,fill:Ua.comboInactiveFill,lineWidth:1},disable:{stroke:Ua.comboDisableStroke,fill:Ua.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},Vu={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},jo=Math.PI,Cu=Math.sin,ws=Math.cos,Ki=Cu(jo/8),Oi=ws(jo/8),To=function(e,t){var r=e.getBBox(),n={x:r.minX,y:r.minY},a={x:r.maxX,y:r.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),n=Ii(n,o),a=Ii(a,o)}var s=n.x,u=n.y,f=a.x,c=a.y;return{x:s,y:u,minX:s,minY:u,maxX:f,maxY:c,width:f-s,height:c-u}},ju=function(e){var t=e.sourceNode||e.targetNode,r=t.get("group"),n=r.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),s=e.loopCfg||{},u=s.dist||Math.max(o.width,o.height)*2,f=s.position||Fn.defaultLoopPosition,c=[(o.minX+o.maxX)/2+n[6],(o.minY+o.maxY)/2+n[7]],l=[e.startPoint.x,e.startPoint.y],x=[e.endPoint.x,e.endPoint.y],m=o.height/2,C=o.width/2,R=m,V=m,Q=R*Ki,rt=R*Oi,st=V*Ki,lt=V*Oi,Ct=a.get("type"),At=Math.min(m/2,C/2),Nt=Math.min(m,C),Kt=s!=null&&s.pointPadding?Math.min(Nt,s==null?void 0:s.pointPadding):At;if(l[0]===x[0]&&l[1]===x[1]){switch(f){case"top":Ct==="circle"?(l=[c[0]-Q,c[1]-rt],x=[c[0]+st,c[1]-lt]):(l=[c[0]-Kt,c[1]-m],x=[c[0]+Kt,c[1]-m]);break;case"top-right":R=m,V=C,Ct==="circle"?(Q=R*Ki,rt=R*Oi,st=V*Ki,lt=V*Oi,l=[c[0]+Q,c[1]-rt],x=[c[0]+lt,c[1]-st]):(l=[c[0]+C-Kt,c[1]-m],x=[c[0]+C,c[1]-m+Kt]);break;case"right":R=C,V=C,Ct==="circle"?(Q=R*Ki,rt=R*Oi,st=V*Ki,lt=V*Oi,l=[c[0]+rt,c[1]-Q],x=[c[0]+lt,c[1]+st]):(l=[c[0]+C,c[1]-Kt],x=[c[0]+C,c[1]+Kt]);break;case"bottom-right":R=C,V=m,Ct==="circle"?(Q=R*Ki,rt=R*Oi,st=V*Ki,lt=V*Oi,l=[c[0]+rt,c[1]+Q],x=[c[0]+st,c[1]+lt]):(l=[c[0]+C,c[1]+m-Kt],x=[c[0]+C-Kt,c[1]+m]);break;case"bottom":R=m,V=m,Ct==="circle"?(Q=R*Ki,rt=R*Oi,st=V*Ki,lt=V*Oi,l=[c[0]+Q,c[1]+rt],x=[c[0]-st,c[1]+lt]):(l=[c[0]-Kt,c[1]+m],x=[c[0]+Kt,c[1]+m]);break;case"bottom-left":R=m,V=C,Ct==="circle"?(Q=R*Ki,rt=R*Oi,st=V*Ki,lt=V*Oi,l=[c[0]-Q,c[1]+rt],x=[c[0]-lt,c[1]+st]):(l=[c[0]-C,c[1]+m-Kt],x=[c[0]-C+Kt,c[1]+m]);break;case"left":R=C,V=C,Ct==="circle"?(Q=R*Ki,rt=R*Oi,st=V*Ki,lt=V*Oi,l=[c[0]-rt,c[1]+Q],x=[c[0]-lt,c[1]-st]):(l=[c[0]-C,c[1]-Kt],x=[c[0]-C,c[1]+Kt]);break;case"top-left":R=C,V=m,Ct==="circle"?(Q=R*Ki,rt=R*Oi,st=V*Ki,lt=V*Oi,l=[c[0]-rt,c[1]-Q],x=[c[0]-st,c[1]-lt]):(l=[c[0]-C+Kt,c[1]-m],x=[c[0]-C,c[1]-m+Kt]);break;default:R=C,V=C,Q=R*Ki,rt=R*Oi,st=V*Ki,lt=V*Oi,l=[c[0]-Q,c[1]-rt],x=[c[0]+st,c[1]-lt]}if(s.clockwise===!1){var ge=[l[0],l[1]];l=[x[0],x[1]],x=[ge[0],ge[1]]}}var ue=[l[0]-c[0],l[1]-c[1]],Ae=(R+u)/R,Ke=(V+u)/V;s.clockwise===!1&&(Ae=(V+u)/V,Ke=(R+u)/R);var Gr=xn.scale([0,0],ue,Ae),wr=[c[0]+Gr[0],c[1]+Gr[1]],Mr=[x[0]-c[0],x[1]-c[1]],vr=xn.scale([0,0],Mr,Ke),sn=[c[0]+vr[0],c[1]+vr[1]];return e.startPoint={x:l[0],y:l[1]},e.endPoint={x:x[0],y:x[1]},e.controlPoints=[{x:wr[0],y:wr[1]},{x:sn[0],y:sn[1]}],e},cf=function(e,t,r,n,a){var o=1e-4,s=[],u=e==null?void 0:e.getPoint(t);if(!u)return{x:0,y:0,angle:0};if(t<o)s=e.getStartTangent().reverse();else if(t>1-o)s=e.getEndTangent();else{var f=e==null?void 0:e.getPoint(t+o);s.push([u.x,u.y]),s.push([f.x,f.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=jo*2),r&&(u.x+=ws(c)*r,u.y+=Cu(c)*r),n){var l=c-jo/2;c>1/2*jo&&c<3*1/2*jo&&(l-=jo),u.x+=ws(l)*n,u.y+=Cu(l)*n}var x={x:u.x,y:u.y,angle:c};return a?(c>.5*jo&&c<1.5*jo&&(c-=jo),(0,K.__assign)({rotate:c},x)):x},Uf=function i(e,t,r,n){if(n(e,t,r)===!1)return!1;if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return!1}return!0},Au=function i(e,t,r,n){if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return}return n(e,t,r)!==!1},Io=function(e,t){typeof t=="function"&&Uf(e,null,-1,t)},h=function(e,t){typeof t=="function"&&Au(e,null,-1,t)},O=function(e,t){return t*(Vu[e]||1)},dt=function(e,t){var r=0,n=new RegExp("[\u4E00-\u9FA5]+");return e.split("").forEach(function(a){n.test(a)?r+=t:r+=O(a,t)}),[r,t]},St=function(e,t){return typeof t!="number"||t<=0||t>=e.length?e:e.substring(0,t)+"..."},kt=function(e,t){var r=[],n={},a={};e.forEach(function(u){a[u.id]=u}),e.forEach(function(u,f){var c=(0,p.clone)(u);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo ".concat(c.id," can not be the same as the combo's id")),delete c.parentId):c.parentId&&!a[c.parentId]&&(console.warn("The parent combo for combo ".concat(c.id," does not exist!")),delete c.parentId);var l=n[c.id];if(l){if(c.children=l.children,n[c.id]=c,l=c,!l.parentId){r.push(l);return}var x=n[l.parentId];if(x)x.children?x.children.push(c):x.children=[c];else{var m={id:l.parentId,children:[l]};n[l.parentId]=m,n[c.id]=c}return}if((0,p.isString)(u.parentId)){var C=n[u.parentId];if(C)C.children?C.children.push(c):C.children=[c],n[c.id]=c;else{var R={id:u.parentId,children:[c]};n[R.id]=R,n[c.id]=c}}else r.push(c),n[c.id]=c});var o={};(t||[]).forEach(function(u){o[u.id]=u;var f=n[u.comboId];if(f){var c={id:u.id,comboId:u.comboId};f.children?f.children.push(c):f.children=[c],c.itemType="node",n[u.id]=c}});var s=0;return r.forEach(function(u){u.depth=s+10,Io(u,function(f){var c,l=n[f.id].itemType;l==="node"?c=n[f.comboId]:c=n[f.parentId],c&&l==="node"?f.depth=s+1:f.depth=s+10,s<f.depth&&(s=f.depth);var x=o[f.id];return x&&(x.depth=f.depth),!0})}),r},Ht=function(e,t,r){var n,a=e,o,s={root:{children:e}},u=!1,f="root";(e||[]).forEach(function(C){if(!u){if(C.id===t){o=C,C.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0;return}Io(C,function(R){var V;return s[R.id]={children:(R==null?void 0:R.children)||[]},a=(V=s[R.parentId||R.comboId||"root"])===null||V===void 0?void 0:V.children,R&&(R.removed||t===R.id)&&a?(f=R.parentId||R.comboId||"root",o=R,R.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0,!1):!0})}}),a=(n=s[f])===null||n===void 0?void 0:n.children;var c=a?a.indexOf(o):-1;if(c>-1&&a.splice(c,1),u||(o={id:t,itemType:"node",comboId:r},s[t]={children:void 0}),t){var l=!1;if(r){var x=0;(e||[]).forEach(function(C){l||Io(C,function(R){return r===R.id?(l=!0,R.children?R.children.push(o):R.children=[o],x=R.depth,o.itemType==="node"?o.depth=x+2:o.depth=x+1,!1):!0})})}else(!r||!l)&&o.itemType!=="node"&&e.push(o);var m=o.depth;Io(o,function(C){return C.itemType==="node"?m+=2:m+=1,C.depth=m,!0})}return e},Zt=function(e,t,r){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var a=r==null?void 0:r.getModel(),o=a||{},s=o.x,u=o.y,f=o.fixSize,c=o.collapsed,l=o.fixCollapseSize,x=c?l:f,m=(0,p.isArray)(x)?x:[x,x],C=m[0],R=m[1],V=[C/2,R/2];return{minX:s-V[0],minY:u-V[1],maxX:s+V[0],maxY:u+V[1],x:s,y:u,width:C,height:R}}return e.forEach(function(Q){var rt=t.findById(Q.id);if(!(!rt||!rt.isVisible())){rt.set("bboxCanvasCache",void 0);var st=rt.getCanvasBBox();st.x&&n.minX>st.minX&&(n.minX=st.minX),st.y&&n.minY>st.minY&&(n.minY=st.minY),st.x&&n.maxX<st.maxX&&(n.maxX=st.maxX),st.y&&n.maxY<st.maxY&&(n.maxY=st.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,(r==null?void 0:r.getKeyShape().get("type"))==="circle"&&(n.width=Math.hypot(n.height,n.width),n.height=n.width),Object.keys(n).forEach(function(Q){(n[Q]===1/0||n[Q]===-1/0)&&(n[Q]=void 0)}),n},le=function(e){var t=(0,p.isNumber)(e.x)||(0,p.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||(0,p.isNumber)(e.style.r)||(0,p.isNumber)(e.style.width)||(0,p.isNumber)(e.style.height)||(0,p.isNumber)(e.style.rx)||(0,p.isNumber)(e.style.ry)),t},ye=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if(!(r==="img"&&!(0,p.isString)(n)))if((0,p.isObject)(n)&&!(0,p.isArray)(n)){var a={};Object.keys(n).forEach(function(o){var s=n[o];o==="img"&&!(0,p.isString)(s)||(a[o]=(0,p.clone)(s))}),t[r]=a}else t[r]=(0,p.clone)(n)}),t},Oe=function(e){var t=e.animateCfg,r=e.callback,n;if(!t)n={duration:500,callback:r};else if(n=(0,p.clone)(t),t.callback){var a=t.callback;n.callback=function(){r(),a()}}else n.callback=r;return n},He=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,r=e.edges,n=e.combos,a=n===void 0?[]:n;if(!t&&!r){var o=!0;return Io(e,function(x){return(0,p.isString)(x.id)?!0:(o=!1,!1)}),o}var s=(t||[]).find(function(x){return!(0,p.isString)(x.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var u=(t||[]).map(function(x){return x.id}),f=a==null?void 0:a.map(function(x){return x.id}),c=(0,K.__spreadArray)((0,K.__spreadArray)([],u,!0),f,!0),l=(r||[]).find(function(x){return!c.includes(x.source)||!c.includes(x.target)});return l?(console.warn("G6 Warning Tips: The source %c".concat(l.source,"%c or the target %c").concat(l.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},Ar=function(e,t){if(e==="node"||e==="combo"){if(t.id&&!(0,p.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!t.source||!t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},Ir=function(){function i(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return i.prototype.formatModes=function(){var e=this.modes;(0,p.each)(e,function(t){(0,p.each)(t,function(r,n){(0,p.isString)(r)&&(t[n]={type:r})})})},i.prototype.setBehaviors=function(e){var t=this.graph,r=this.modes[e],n=[],a;(0,p.each)(r||[],function(o){var s=wt.getBehavior(o.type||o);s&&(a=new s(o),a&&(a.bind(t),n.push(a)))}),this.currentBehaves=n},i.mergeBehaviors=function(e,t){return(0,p.each)(t,function(r){e.indexOf(r)<0&&((0,p.isString)(r)&&(r={type:r}),e.push(r))}),e},i.filterBehaviors=function(e,t){var r=[];return e.forEach(function(n){var a="";(0,p.isString)(n)?a=n:a=n.type,t.indexOf(a)<0&&r.push(n)}),r},i.prototype.setMode=function(e){var t=this,r=t.modes,n=t.graph,a=e,o=r[a];o&&(n.emit("beforemodechange",{mode:e}),(0,p.each)(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(n)}),this.setBehaviors(a),n.emit("aftermodechange",{mode:e}),this.mode=e)},i.prototype.getMode=function(){return this.mode},i.prototype.manipulateBehaviors=function(e,t,r){var n=this,a;if((0,p.isArray)(e)?a=e:a=[e],(0,p.isArray)(t))return(0,p.each)(t,function(s){n.modes[s]?r?n.modes[s]=i.mergeBehaviors(n.modes[s]||[],a):n.modes[s]=i.filterBehaviors(n.modes[s]||[],a):r&&(n.modes[s]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||r&&(this.modes[o]=a),r?this.modes[o]=i.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=i.filterBehaviors(this.modes[o]||[],a),this.formatModes(),this.setMode(this.mode),this},i.prototype.updateBehavior=function(e,t,r){(0,p.isString)(e)&&(e={type:e});var n=[];if(!r||r===this.mode||r==="default"){if(n=this.currentBehaves,!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=n.length,o=0;o<a;o++){var s=n[o];if(s.type===e.type)return s.updateCfg(t),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(n=this.modes[r],!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var u=n.length,o=0;o<u;o++){var s=n[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),n[o]=s,this;o===u-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},i.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},i}(),_r=Ir,Qr=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,yn=new RegExp("([a-z])["+Qr+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Qr+"]*,?["+Qr+"]*)+)","ig"),kr=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Qr+"]*,?["+Qr+"]*","ig"),Tn=function(i){if(!i)return null;if((0,p.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(yn,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(kr,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return i}),t},Ea=function(i,e){for(var t=[],r=0,n=i.length;n-2*!e>r;r+=2){var a=[{x:+i[r-2],y:+i[r-1]},{x:+i[r],y:+i[r+1]},{x:+i[r+2],y:+i[r+3]},{x:+i[r+4],y:+i[r+5]}];e?r?n-4===r?a[3]={x:+i[0],y:+i[1]}:n-2===r&&(a[2]={x:+i[0],y:+i[1]},a[3]={x:+i[2],y:+i[3]}):a[0]={x:+i[n-2],y:+i[n-1]}:n-4===r?a[3]=a[2]:r||(a[0]={x:+i[r],y:+i[r+1]}),t.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return t},wa=function(i,e,t,r,n){var a=[];if(n===null&&r===null&&(r=t),i=+i,e=+e,t=+t,r=+r,n!==null){var o=Math.PI/180,s=i+t*Math.cos(-r*o),u=i+t*Math.cos(-n*o),f=e+t*Math.sin(-r*o),c=e+t*Math.sin(-n*o);a=[["M",s,f],["A",t,t,0,+(n-r>180),0,u,c]]}else a=[["M",i,e],["m",0,-r],["a",t,r,0,1,1,0,2*r],["a",t,r,0,1,1,0,-2*r],["z"]];return a},ga=function(i){if(i=Tn(i),!i||!i.length)return[["M",0,0]];var e=[],t=0,r=0,n=0,a=0,o=0,s,u;i[0][0]==="M"&&(t=+i[0][1],r=+i[0][2],n=t,a=r,o++,e[0]=["M",t,r]);for(var f=i.length===3&&i[0][0]==="M"&&i[1][0].toUpperCase()==="R"&&i[2][0].toUpperCase()==="Z",c=void 0,l=void 0,x=o,m=i.length;x<m;x++){if(e.push(c=[]),l=i[x],s=l[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=l[1],c[2]=l[2],c[3]=l[3],c[4]=l[4],c[5]=l[5],c[6]=+l[6]+t,c[7]=+l[7]+r;break;case"V":c[1]=+l[1]+r;break;case"H":c[1]=+l[1]+t;break;case"R":u=[t,r].concat(l.slice(1));for(var C=2,R=u.length;C<R;C++)u[C]=+u[C]+t,u[++C]=+u[C]+r;e.pop(),e=e.concat(Ea(u,f));break;case"O":e.pop(),u=wa(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);break;case"U":e.pop(),e=e.concat(wa(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":n=+l[1]+t,a=+l[2]+r;break;default:for(var C=1,R=l.length;C<R;C++)c[C]=+l[C]+(C%2?t:r)}else if(s==="R")u=[t,r].concat(l.slice(1)),e.pop(),e=e.concat(Ea(u,f)),c=["R"].concat(l.slice(-2));else if(s==="O")e.pop(),u=wa(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);else if(s==="U")e.pop(),e=e.concat(wa(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));else for(var V=0,Q=l.length;V<Q;V++)c[V]=l[V];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":t=+n,r=+a;break;case"H":t=c[1];break;case"V":r=c[1];break;case"M":n=c[c.length-2],a=c[c.length-1];break;default:t=c[c.length-2],r=c[c.length-1]}}return e},ta=function(i,e,t,r){return[i,e,t,r,t,r]},ha=function(i,e,t,r,n,a){var o=.3333333333333333,s=2/3;return[o*i+s*t,o*e+s*r,o*n+s*t,o*a+s*r,n,a]},Bi=function(i,e,t,r,n,a,o,s,u,f){t===r&&(t+=1);var c=Math.PI*120/180,l=Math.PI/180*(+n||0),x=[],m,C,R,V,Q,rt=function(qa,Pa,Ta){var oi=qa*Math.cos(Ta)-Pa*Math.sin(Ta),Ei=qa*Math.sin(Ta)+Pa*Math.cos(Ta);return{x:oi,y:Ei}};if(f)C=f[0],R=f[1],V=f[2],Q=f[3];else{m=rt(i,e,-l),i=m.x,e=m.y,m=rt(s,u,-l),s=m.x,u=m.y,i===s&&e===u&&(s+=1,u+=1);var st=(i-s)/2,lt=(e-u)/2,Ct=st*st/(t*t)+lt*lt/(r*r);Ct>1&&(Ct=Math.sqrt(Ct),t=Ct*t,r=Ct*r);var At=t*t,Nt=r*r,Kt=(a===o?-1:1)*Math.sqrt(Math.abs((At*Nt-At*lt*lt-Nt*st*st)/(At*lt*lt+Nt*st*st)));V=Kt*t*lt/r+(i+s)/2,Q=Kt*-r*st/t+(e+u)/2,C=Math.asin(((e-Q)/r).toFixed(9)),R=Math.asin(((u-Q)/r).toFixed(9)),C=i<V?Math.PI-C:C,R=s<V?Math.PI-R:R,C<0&&(C=Math.PI*2+C),R<0&&(R=Math.PI*2+R),o&&C>R&&(C=C-Math.PI*2),!o&&R>C&&(R=R-Math.PI*2)}var ge=R-C;if(Math.abs(ge)>c){var ue=R,Ae=s,Ke=u;R=C+c*(o&&R>C?1:-1),s=V+t*Math.cos(R),u=Q+r*Math.sin(R),x=Bi(s,u,t,r,n,0,o,Ae,Ke,[R,ue,V,Q])}ge=R-C;var Gr=Math.cos(C),wr=Math.sin(C),Mr=Math.cos(R),vr=Math.sin(R),sn=Math.tan(ge/4),nn=4/3*t*sn,mr=4/3*r*sn,Dr=[i,e],qr=[i+nn*wr,e-mr*Gr],un=[s+nn*vr,u-mr*Mr],Dn=[s,u];if(qr[0]=2*Dr[0]-qr[0],qr[1]=2*Dr[1]-qr[1],f)return[qr,un,Dn].concat(x);x=[qr,un,Dn].concat(x).join().split(",");for(var Rn=[],ca=0,ra=x.length;ca<ra;ca++)Rn[ca]=ca%2?rt(x[ca-1],x[ca],l).y:rt(x[ca],x[ca+1],l).x;return Rn},_i=function(i,e){var t=ga(i),r=e&&ga(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],u="",f="",c,l=function(st,lt,Ct){var At,Nt;if(!st)return["C",lt.x,lt.y,lt.x,lt.y,lt.x,lt.y];switch(!(st[0]in{T:1,Q:1})&&(lt.qx=lt.qy=null),st[0]){case"M":lt.X=st[1],lt.Y=st[2];break;case"A":st=["C"].concat(Bi.apply(0,[lt.x,lt.y].concat(st.slice(1))));break;case"S":Ct==="C"||Ct==="S"?(At=lt.x*2-lt.bx,Nt=lt.y*2-lt.by):(At=lt.x,Nt=lt.y),st=["C",At,Nt].concat(st.slice(1));break;case"T":Ct==="Q"||Ct==="T"?(lt.qx=lt.x*2-lt.qx,lt.qy=lt.y*2-lt.qy):(lt.qx=lt.x,lt.qy=lt.y),st=["C"].concat(ha(lt.x,lt.y,lt.qx,lt.qy,st[1],st[2]));break;case"Q":lt.qx=st[1],lt.qy=st[2],st=["C"].concat(ha(lt.x,lt.y,st[1],st[2],st[3],st[4]));break;case"L":st=["C"].concat(ta(lt.x,lt.y,st[1],st[2]));break;case"H":st=["C"].concat(ta(lt.x,lt.y,st[1],lt.y));break;case"V":st=["C"].concat(ta(lt.x,lt.y,lt.x,st[1]));break;case"Z":st=["C"].concat(ta(lt.x,lt.y,lt.X,lt.Y));break;default:break}return st},x=function(st,lt){if(st[lt].length>7){st[lt].shift();for(var Ct=st[lt];Ct.length;)o[lt]="A",r&&(s[lt]="A"),st.splice(lt++,0,["C"].concat(Ct.splice(0,6)));st.splice(lt,1),c=Math.max(t.length,r&&r.length||0)}},m=function(st,lt,Ct,At,Nt){st&&lt&&st[Nt][0]==="M"&&lt[Nt][0]!=="M"&&(lt.splice(Nt,0,["M",At.x,At.y]),Ct.bx=0,Ct.by=0,Ct.x=st[Nt][1],Ct.y=st[Nt][2],c=Math.max(t.length,r&&r.length||0))};c=Math.max(t.length,r&&r.length||0);for(var C=0;C<c;C++){t[C]&&(u=t[C][0]),u!=="C"&&(o[C]=u,C&&(f=o[C-1])),t[C]=l(t[C],n,f),o[C]!=="A"&&u==="C"&&(o[C]="C"),x(t,C),r&&(r[C]&&(u=r[C][0]),u!=="C"&&(s[C]=u,C&&(f=s[C-1])),r[C]=l(r[C],a,f),s[C]!=="A"&&u==="C"&&(s[C]="C"),x(r,C)),m(t,r,n,a,C),m(r,t,a,n,C);var R=t[C],V=r&&r[C],Q=R.length,rt=r&&V.length;n.x=R[Q-2],n.y=R[Q-1],n.bx=parseFloat(R[Q-4])||n.x,n.by=parseFloat(R[Q-3])||n.y,a.bx=r&&(parseFloat(V[rt-4])||a.x),a.by=r&&(parseFloat(V[rt-3])||a.y),a.x=r&&V[rt-2],a.y=r&&V[rt-1]}return r?[t,r]:t},Li=/,?([a-z]),?/gi,Di=function(i){return i.join(",").replace(Li,"$1")},Ni=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},zi=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],x=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],m=0,C=0;C<c;C++){var R=f*l[C]+f,V=Ni(R,i,t,n,o),Q=Ni(R,e,r,a,s),rt=V*V+Q*Q;m+=x[C]*Math.sqrt(rt)}return f*m},co=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,x,m,C=0;C<2;++C){if(C===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,x=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,x=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;m=-x/l,m>0&&m<1&&u.push(m);continue}var R=l*l-4*x*c,V=Math.sqrt(R);if(!(R<0)){var Q=(-l+V)/(2*c);Q>0&&Q<1&&u.push(Q);var rt=(-l-V)/(2*c);rt>0&&rt<1&&u.push(rt)}}for(var st=u.length,lt=st,Ct;st--;)m=u[st],Ct=1-m,f[0][st]=Ct*Ct*Ct*i+3*Ct*Ct*m*t+3*Ct*m*m*n+m*m*m*o,f[1][st]=Ct*Ct*Ct*e+3*Ct*Ct*m*r+3*Ct*m*m*a+m*m*m*s;return f[0][lt]=i,f[1][lt]=e,f[0][lt+1]=o,f[1][lt+1]=s,f[0].length=f[1].length=lt+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},Ha=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var l=u/c,x=f/c,m=+l.toFixed(2),C=+x.toFixed(2);if(!(m<+Math.min(i,t).toFixed(2)||m>+Math.max(i,t).toFixed(2)||m<+Math.min(n,o).toFixed(2)||m>+Math.max(n,o).toFixed(2)||C<+Math.min(e,r).toFixed(2)||C>+Math.max(e,r).toFixed(2)||C<+Math.min(a,s).toFixed(2)||C>+Math.max(a,s).toFixed(2)))return{x:l,y:x}}}},Ja=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},Ns=function(i,e,t,r,n){if(n)return[["M",+i+ +n,e],["l",t-n*2,0],["a",n,n,0,0,1,n,n],["l",0,r-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-t,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-r],["a",n,n,0,0,1,n,-n],["z"]];var a=[["M",i,e],["l",t,0],["l",0,r],["l",-t,0],["z"]];return a.parsePathArray=Di,a},_s=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:Ns(i,e,t,r),vb:[i,e,t,r].join(" ")}},vs=function(i,e){return i=_s(i),e=_s(e),Ja(e,i.x,i.y)||Ja(e,i.x2,i.y)||Ja(e,i.x,i.y2)||Ja(e,i.x2,i.y2)||Ja(i,e.x,e.y)||Ja(i,e.x2,e.y)||Ja(i,e.x,e.y2)||Ja(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},yu=function(i,e,t,r,n,a,o,s){(0,p.isArray)(i)||(i=[i,e,t,r,n,a,o,s]);var u=co.apply(null,i);return _s(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},Wf=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),x=u*u,m=x*u,C=c*i+l*3*u*t+f*3*u*u*n+m*o,R=c*e+l*3*u*r+f*3*u*u*a+m*s,V=i+2*u*(t-i)+x*(n-2*t+i),Q=e+2*u*(r-e)+x*(a-2*r+e),rt=t+2*u*(n-t)+x*(o-2*n+t),st=r+2*u*(a-r)+x*(s-2*a+r),lt=f*i+u*t,Ct=f*e+u*r,At=f*n+u*o,Nt=f*a+u*s,Kt=90-Math.atan2(V-rt,Q-st)*180/Math.PI;return{x:C,y:R,m:{x:V,y:Q},n:{x:rt,y:st},start:{x:lt,y:Ct},end:{x:At,y:Nt},alpha:Kt}},Hc=function(i,e,t){var r=yu(i),n=yu(e);if(!vs(r,n))return t?0:[];for(var a=zi.apply(0,i),o=zi.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},x=t?0:[],m=0;m<s+1;m++){var C=Wf.apply(0,i.concat(m/s));f.push({x:C.x,y:C.y,t:m/s})}for(var m=0;m<u+1;m++){var C=Wf.apply(0,e.concat(m/u));c.push({x:C.x,y:C.y,t:m/u})}for(var m=0;m<s;m++)for(var R=0;R<u;R++){var V=f[m],Q=f[m+1],rt=c[R],st=c[R+1],lt=Math.abs(Q.x-V.x)<.001?"y":"x",Ct=Math.abs(st.x-rt.x)<.001?"y":"x",At=Ha(V.x,V.y,Q.x,Q.y,rt.x,rt.y,st.x,st.y);if(At){if(l[At.x.toFixed(4)]===At.y.toFixed(4))continue;l[At.x.toFixed(4)]=At.y.toFixed(4);var Nt=V.t+Math.abs((At[lt]-V[lt])/(Q[lt]-V[lt]))*(Q.t-V.t),Kt=rt.t+Math.abs((At[Ct]-rt[Ct])/(st[Ct]-rt[Ct]))*(st.t-rt.t);Nt>=0&&Nt<=1&&Kt>=0&&Kt<=1&&(t?x+=1:x.push({x:At.x,y:At.y,t1:Nt,t2:Kt}))}}return x},Kc=function(i,e,t){i=_i(i),e=_i(e);for(var r,n,a,o,s,u,f,c,l,x,m=t?0:[],C=0,R=i.length;C<R;C++){var V=i[C];if(V[0]==="M")r=s=V[1],n=u=V[2];else{V[0]==="C"?(l=[r,n].concat(V.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var Q=0,rt=e.length;Q<rt;Q++){var st=e[Q];if(st[0]==="M")a=f=st[1],o=c=st[2];else{st[0]==="C"?(x=[a,o].concat(st.slice(1)),a=x[6],o=x[7]):(x=[a,o,a,o,f,c,f,c],a=f,o=c);var lt=Hc(l,x,t);if(t)m+=lt;else{for(var Ct=0,At=lt.length;Ct<At;Ct++)lt[Ct].segment1=C,lt[Ct].segment2=Q,lt[Ct].bez1=l,lt[Ct].bez2=x;m=m.concat(lt)}}}}}return m},Zc=function(i,e){return Kc(i,e)};function $c(i,e){var t=[],r=[];function n(a,o){if(a.length===1)t.push(a[0]),r.push(a[0]);else{for(var s=[],u=0;u<a.length-1;u++)u===0&&t.push(a[0]),u===a.length-2&&r.push(a[u+1]),s[u]=[(1-o)*a[u][0]+o*a[u+1][0],(1-o)*a[u][1]+o*a[u+1][1]];n(s,o)}}return i.length&&n(i,e),{left:t,right:r.reverse()}}function Xf(i,e,t){var r=[[i[1],i[2]]];t=t||2;var n=[];e[0]==="A"?(r.push(e[6]),r.push(e[7])):e[0]==="C"?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var a=r,o=1/t,s=0;s<t-1;s++){var u=o/(1-o*s),f=$c(a,u);n.push(f.left),a=f.right}n.push(a);var c=n.map(function(l){var x=[];return l.length===4&&(x.push("C"),x=x.concat(l[2])),l.length>=3&&(l.length===3&&x.push("Q"),x=x.concat(l[1])),l.length===2&&x.push("L"),x=x.concat(l[l.length-1]),x});return c}var mc=function(i,e,t){if(t===1)return[[].concat(i)];var r=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")r=r.concat(Xf(i,e,t));else{var n=[].concat(i);n[0]==="M"&&(n[0]="L");for(var a=0;a<=t-1;a++)r.push(n)}return r},qc=function(i,e){if(i.length===1)return i;var t=i.length-1,r=e.length-1,n=t/r,a=[];if(i.length===1&&i[0][0]==="M"){for(var o=0;o<r-t;o++)i.push(i[0]);return i}for(var o=0;o<r;o++){var s=Math.floor(n*o);a[s]=(a[s]||0)+1}var u=a.reduce(function(f,c,l){return l===t?f.concat(i[t]):f.concat(mc(i[l],i[l+1],c))},[]);return u.unshift(i[0]),(e[r]==="Z"||e[r]==="z")&&u.push("Z"),u},Yf=function(i,e){if(i.length!==e.length)return!1;var t=!0;return(0,p.each)(i,function(r,n){if(r!==e[n])return t=!1,!1}),t};function xc(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var lf=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],Yf(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,x=s[u-1][f-1].min+o;s[u][f]=xc(c,l,x)}}return s},nu=function(i,e){var t=lf(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n].min!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}r=i.length;var l=n-r;if(r<n)for(var u=0;u<l;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]),r+=1;return i};function hf(i,e,t){for(var r=[].concat(i),n,a=1/(t+1),o=In(e)[0],s=1;s<=t;s++)a*=s,n=Math.floor(i.length*a),n===0?r.unshift([o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]):r.splice(n,0,[o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]);return r}function In(i){var e=[];switch(i[0]){case"M":e.push([i[1],i[2]]);break;case"L":e.push([i[1],i[2]]);break;case"A":e.push([i[6],i[7]]);break;case"Q":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"T":e.push([i[1],i[2]]);break;case"C":e.push([i[5],i[6]]),e.push([i[1],i[2]]),e.push([i[3],i[4]]);break;case"S":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"H":e.push([i[1],i[1]]);break;case"V":e.push([i[1],i[1]]);break;default:}return e}var au=function(i,e){if(i.length<=1)return i;for(var t,r=0;r<e.length;r++)if(i[r][0]!==e[r][0])switch(t=In(i[r]),e[r][0]){case"M":i[r]=["M"].concat(t[0]);break;case"L":i[r]=["L"].concat(t[0]);break;case"A":i[r]=[].concat(e[r]),i[r][6]=t[0][0],i[r][7]=t[0][1];break;case"Q":if(t.length<2)if(r>0)t=hf(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["Q"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"T":i[r]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(r>0)t=hf(t,i[r-1],2);else{i[r]=e[r];break}i[r]=["C"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"S":if(t.length<2)if(r>0)t=hf(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["S"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;default:i[r]=e[r]}return i},Ka=function(){function i(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return i.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},i.prototype.stopPropagation=function(){this.propagationStopped=!0},i.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},i.prototype.save=function(){},i.prototype.restore=function(){},i}(),vf=Ka;function df(i,e){var t=i.indexOf(e);t!==-1&&i.splice(t,1)}var Js=typeof window!="undefined"&&typeof window.document!="undefined";function Vf(i,e){if(i.isCanvas())return!0;for(var t=e.getParent(),r=!1;t;){if(t===i){r=!0;break}t=t.getParent()}return r}function iu(i){return i.cfg.visible&&i.cfg.capture}var gf=function(i){(0,K.__extends)(e,i);function e(t){var r=i.call(this)||this;r.destroyed=!1;var n=r.getDefaultCfg();return r.cfg=(0,p.mix)(n,t),r}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,r){this.cfg[t]=r},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(Me),bc=gf,Tu=z(34155),Ss=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))},jf=function(){function i(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return i}(),Ec=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=Tu.platform}return i}(),lo=function(){function i(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"}return i}(),pf=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),mu=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),ot=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,mt=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Tt=3,Yt=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",ot]],ie=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ze(i){return i?Yr(i):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new mu:typeof navigator!="undefined"?Yr(navigator.userAgent):On()}function Xe(i){return i!==""&&Yt.reduce(function(e,t){var r=t[0],n=t[1];if(e)return e;var a=n.exec(i);return!!a&&[r,a]},!1)}function dr(i){var e=Xe(i);return e?e[0]:null}function Yr(i){var e=Xe(i);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new pf;var n=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);n?n.length<Tt&&(n=Ss(Ss([],n,!0),Gn(Tt-n.length),!0)):n=[];var a=n.join("."),o=tn(i),s=mt.exec(i);return s&&s[1]?new lo(t,a,o,s[1]):new jf(t,a,o)}function tn(i){for(var e=0,t=ie.length;e<t;e++){var r=ie[e],n=r[0],a=r[1],o=a.exec(i);if(o)return n}return null}function On(){var i=typeof Tu!="undefined"&&Tu.version;return i?new Ec(Tu.version.slice(1)):null}function Gn(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}function Sn(i,e){var t=[],r=i[0],n=i[1],a=i[2],o=i[3],s=i[4],u=i[5],f=i[6],c=i[7],l=i[8],x=e[0],m=e[1],C=e[2],R=e[3],V=e[4],Q=e[5],rt=e[6],st=e[7],lt=e[8];return t[0]=x*r+m*o+C*f,t[1]=x*n+m*s+C*c,t[2]=x*a+m*u+C*l,t[3]=R*r+V*o+Q*f,t[4]=R*n+V*s+Q*c,t[5]=R*a+V*u+Q*l,t[6]=rt*r+st*o+lt*f,t[7]=rt*n+st*s+lt*c,t[8]=rt*a+st*u+lt*l,t}function ua(i,e){var t=[],r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function ma(i){var e=[],t=i[0],r=i[1],n=i[2],a=i[3],o=i[4],s=i[5],u=i[6],f=i[7],c=i[8],l=c*o-s*f,x=-c*a+s*u,m=f*a-o*u,C=t*l+r*x+n*m;return C?(C=1/C,e[0]=l*C,e[1]=(-c*r+n*f)*C,e[2]=(s*r-n*o)*C,e[3]=x*C,e[4]=(c*t-n*u)*C,e[5]=(-s*t+n*a)*C,e[6]=m*C,e[7]=(-f*t+r*u)*C,e[8]=(o*t-r*a)*C,e):null}var va=Bt,fa="matrix",Ra=["zIndex","capture","visible","type"],Kn=["repeat"],ka=":",xa="*";function Qn(i){for(var e=[],t=0;t<i.length;t++)(0,p.isArray)(i[t])?e.push([].concat(i[t])):e.push(i[t]);return e}function Ba(i,e){var t={},r=e.attrs;for(var n in i)t[n]=r[n];return t}function si(i,e){var t={},r=e.attr();return(0,p.each)(i,function(n,a){Kn.indexOf(a)===-1&&!(0,p.isEqual)(r[a],n)&&(t[a]=n)}),t}function pi(i,e){if(e.onFrame)return i;var t=e.startTime,r=e.delay,n=e.duration,a=Object.prototype.hasOwnProperty;return(0,p.each)(i,function(o){t+r<o.startTime+o.delay+o.duration&&n>o.delay&&(0,p.each)(e.toAttrs,function(s,u){a.call(o.toAttrs,u)&&(delete o.toAttrs[u],delete o.fromAttrs[u])})}),i}var ri=function(i){(0,K.__extends)(e,i);function e(t){var r=i.call(this,t)||this;r.attrs={};var n=r.getDefaultAttrs();return(0,p.mix)(n,t.attrs),r.attrs=n,r.initAttrs(n),r.initAnimate(),r}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=r[0],o=r[1];if(!a)return this.attrs;if((0,p.isObject)(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return r.length===2?(this.setAttr(a,o),this.afterAttrsChange((t={},t[a]=o,t)),this):this.attrs[a]},e.prototype.isClipped=function(t,r){var n=this.getClip();return n&&!n.isHit(t,r)},e.prototype.setAttr=function(t,r){var n=this.attrs[t];n!==r&&(this.attrs[t]=r,this.onAttrChange(t,r,n))},e.prototype.onAttrChange=function(t,r,n){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var r=this.cfg.applyTo;r&&r.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var r=this.getParent();return r&&r.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var r=this.getParent();r?(df(r.getChildren(),this),r.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(fa,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(fa)},e.prototype.setMatrix=function(t){this.attr(fa,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var r=this.attr("matrix"),n=this.cfg.parentMatrix;n&&r?t=Sn(n,r):t=r||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var r=this.attr("matrix"),n=null;t&&r?n=Sn(t,r):n=r||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var r=this.attr("matrix");return r?ua(r,t):t},e.prototype.invertFromMatrix=function(t){var r=this.attr("matrix");if(r){var n=ma(r);if(n)return ua(n,t)}return t},e.prototype.setClip=function(t){var r=this.getCanvas(),n=null;if(t){var a=this.getShapeBase(),o=(0,p.upperFirst)(t.type),s=a[o];s&&(n=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:r}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,r=this.attrs,n={};(0,p.each)(r,function(s,u){(0,p.isArray)(r[u])?n[u]=Qn(r[u]):n[u]=r[u]});var a=this.constructor,o=new a({attrs:n});return(0,p.each)(Ra,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},i.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var a=this.get("animations")||[];n.timer||n.initTimer();var o=t[0],s=t[1],u=t[2],f=u===void 0?"easeLinear":u,c=t[3],l=c===void 0?p.noop:c,x=t[4],m=x===void 0?0:x,C,R,V,Q,rt;(0,p.isFunction)(o)?(C=o,o={}):(0,p.isObject)(o)&&o.onFrame&&(C=o.onFrame,R=o.repeat),(0,p.isObject)(s)?(rt=s,s=rt.duration,f=rt.easing||"easeLinear",m=rt.delay||0,R=rt.repeat||R||!1,l=rt.callback||p.noop,V=rt.pauseCallback||p.noop,Q=rt.resumeCallback||p.noop):((0,p.isNumber)(l)&&(m=l,l=null),(0,p.isFunction)(f)?(l=f,f="easeLinear"):f=f||"easeLinear");var st=si(o,this),lt={fromAttrs:Ba(st,this),toAttrs:st,duration:s,easing:f,repeat:R,callback:l,pauseCallback:V,resumeCallback:Q,delay:m,startTime:n.getTime(),id:(0,p.uniqueId)(),onFrame:C,pathFormatted:!1};a.length>0?a=pi(a,lt):n.addAnimator(this),a.push(lt),this.set("animations",a),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var r=this;t===void 0&&(t=!0);var n=this.get("animations");(0,p.each)(n,function(a){t&&(a.onFrame?r.attr(a.onFrame(1)):r.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),r=this.get("animations"),n=t.getTime();return(0,p.each)(r,function(a){a._paused=!0,a._pauseTime=n,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),r=t.getTime(),n=this.get("animations"),a=this.get("_pause").pauseTime;return(0,p.each)(n,function(o){o.startTime=o.startTime+(r-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",n),this},e.prototype.emitDelegation=function(t,r){var n=this,a=r.propagationPath,o=this.getEvents(),s;t==="mouseenter"?s=r.fromShape:t==="mouseleave"&&(s=r.toShape);for(var u=function(x){var m=a[x],C=m.get("name");if(C){if((m.isGroup()||m.isCanvas&&m.isCanvas())&&s&&Vf(m,s))return"break";(0,p.isArray)(C)?(0,p.each)(C,function(R){n.emitDelegateEvent(m,R,r)}):f.emitDelegateEvent(m,C,r)}},f=this,c=0;c<a.length;c++){var l=u(c);if(l==="break")break}},e.prototype.emitDelegateEvent=function(t,r,n){var a=this.getEvents(),o=r+ka+n.type;(a[o]||a[xa])&&(n.name=o,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(o,n))},e.prototype.translate=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=this.getMatrix(),a=va(n,[["t",t,r]]);return this.setMatrix(a),this},e.prototype.move=function(t,r){var n=this.attr("x")||0,a=this.attr("y")||0;return this.translate(t-n,r-a),this},e.prototype.moveTo=function(t,r){return this.move(t,r)},e.prototype.scale=function(t,r){var n=this.getMatrix(),a=va(n,[["s",t,r||t]]);return this.setMatrix(a),this},e.prototype.rotate=function(t){var r=this.getMatrix(),n=va(r,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var r=this.attr(),n=r.x,a=r.y,o=this.getMatrix(),s=va(o,[["t",-n,-a],["r",t],["t",n,a]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,r,n){var a=this.getMatrix(),o=va(a,[["t",-t,-r],["r",n],["t",t,r]]);return this.setMatrix(o),this},e}(bc),$a=ri,Si={},Ui="_INDEX";function Wi(i,e){if(i.set("canvas",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){Wi(r,e)})}}function Ps(i,e){if(i.set("timeline",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){Ps(r,e)})}}function wc(i,e){var t=i.getChildren();return t.indexOf(e)>=0}function ou(i,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),df(i.getChildren(),e)}function xu(i){return function(e,t){var r=i(e,t);return r===0?e[Ui]-t[Ui]:r}}var Iu=function(i){(0,K.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,p.each)(o,function(u){var f=u.getBBox(),c=f.minX,l=f.maxX,x=f.minY,m=f.maxY;c<t&&(t=c),l>r&&(r=l),x<n&&(n=x),m>a&&(a=m)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getCanvasBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,p.each)(o,function(u){var f=u.getCanvasBBox(),c=f.minX,l=f.maxX,x=f.minY,m=f.maxY;c<t&&(t=c),l>r&&(r=l),x<n&&(n=x),m>a&&(a=m)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,r,n){if(i.prototype.onAttrChange.call(this,t,r,n),t==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},e.prototype.applyMatrix=function(t){var r=this.getTotalMatrix();i.prototype.applyMatrix.call(this,t);var n=this.getTotalMatrix();n!==r&&this._applyChildrenMarix(n)},e.prototype._applyChildrenMarix=function(t){var r=this.getChildren();(0,p.each)(r,function(n){n.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1];(0,p.isObject)(n)?a=n:a.type=n;var o=Si[a.type];o||(o=(0,p.upperFirst)(a.type),Si[a.type]=o);var s=this.getShapeBase(),u=new s[o](a);return this.add(u),u},e.prototype.addGroup=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1],o;if((0,p.isFunction)(n))a?o=new n(a):o=new n({parent:this});else{var s=n||{},u=this.getGroupBase();o=new u(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,r,n){if(!iu(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,t,r,n);else{var s=[t,r,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],n))}return o},e.prototype._findShape=function(t,r,n,a){for(var o=null,s=t.length-1;s>=0;s--){var u=t[s];if(iu(u)&&(u.isGroup()?o=u.getShape(r,n,a):u.isHit(r,n)&&(o=u)),o)break}return o},e.prototype.add=function(t){var r=this.getCanvas(),n=this.getChildren(),a=this.get("timeline"),o=t.getParent();o&&ou(o,t,!1),t.set("parent",this),r&&Wi(t,r),a&&Ps(t,a),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var r=this.getTotalMatrix();r&&t.applyMatrix(r)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();(0,p.each)(t,function(r,n){return r[Ui]=n,r}),t.sort(xu(function(r,n){return r.get("zIndex")-n.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),r=t.length-1;r>=0;r--)t[r].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),i.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var r=this.getChildren();return r[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var r=this.getChildren();return r.indexOf(t)>-1},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0),this.contain(t)&&t.remove(r)},e.prototype.findAll=function(t){var r=[],n=this.getChildren();return(0,p.each)(n,function(a){t(a)&&r.push(a),a.isGroup()&&(r=r.concat(a.findAll(t)))}),r},e.prototype.find=function(t){var r=null,n=this.getChildren();return(0,p.each)(n,function(a){if(t(a)?r=a:a.isGroup()&&(r=a.find(t)),r)return!1}),r},e.prototype.findById=function(t){return this.find(function(r){return r.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(r){return r.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(r){return r.get("name")===t})},e}($a),Hu=Iu,ks=0,Ku=0,Ou=0,yf=1e3,Zu,Lu,ds=0,Ks=0,su=0,Du=typeof performance=="object"&&performance.now?performance:Date,as=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function bu(){return Ks||(as(Pl),Ks=Du.now()+su)}function Pl(){Ks=0}function Nu(){this._call=this._time=this._next=null}Nu.prototype=Qc.prototype={constructor:Nu,restart:function(i,e,t){if(typeof i!="function")throw new TypeError("callback is not a function");t=(t==null?bu():+t)+(e==null?0:+e),!this._next&&Lu!==this&&(Lu?Lu._next=this:Zu=this,Lu=this),this._call=i,this._time=t,Hf()},stop:function(){this._call&&(this._call=null,this._time=1/0,Hf())}};function Qc(i,e,t){var r=new Nu;return r.restart(i,e,t),r}function mf(){bu(),++ks;for(var i=Zu,e;i;)(e=Ks-i._time)>=0&&i._call.call(null,e),i=i._next;--ks}function _c(){Ks=(ds=Du.now())+su,ks=Ku=0;try{mf()}finally{ks=0,tl(),Ks=0}}function Jc(){var i=Du.now(),e=i-ds;e>yf&&(su-=e,ds=i)}function tl(){for(var i,e=Zu,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),i=e,e=e._next):(t=e._next,e._next=null,e=i?i._next=t:Zu=t);Lu=i,Hf(r)}function Hf(i){if(!ks){Ku&&(Ku=clearTimeout(Ku));var e=i-Ks;e>24?(i<1/0&&(Ku=setTimeout(_c,i-Du.now()-su)),Ou&&(Ou=clearInterval(Ou))):(Ou||(ds=Du.now(),Ou=setInterval(Jc,yf)),ks=1,as(_c))}}var Kf=z(52677);function xf(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function el(i,e){var t=Object.create(i.prototype);for(var r in e)t[r]=e[r];return t}function bf(){}var Ef=.7,Zf=1/Ef,$u="\\s*([+-]?\\d+)\\s*",qu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kl=/^#([0-9a-f]{3,8})$/,Rl=new RegExp("^rgb\\(".concat($u,",").concat($u,",").concat($u,"\\)$")),Bl=new RegExp("^rgb\\(".concat(Zs,",").concat(Zs,",").concat(Zs,"\\)$")),$f=new RegExp("^rgba\\(".concat($u,",").concat($u,",").concat($u,",").concat(qu,"\\)$")),rl=new RegExp("^rgba\\(".concat(Zs,",").concat(Zs,",").concat(Zs,",").concat(qu,"\\)$")),Re=new RegExp("^hsl\\(".concat(qu,",").concat(Zs,",").concat(Zs,"\\)$")),Fl=new RegExp("^hsla\\(".concat(qu,",").concat(Zs,",").concat(Zs,",").concat(qu,"\\)$")),Qu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xf(bf,wf,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:qf,formatHex:qf,formatHex8:Gl,formatHsl:nl,formatRgb:al,toString:al});function qf(){return this.rgb().formatHex()}function Gl(){return this.rgb().formatHex8()}function nl(){return rf(this).formatHsl()}function al(){return this.rgb().formatRgb()}function wf(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=kl.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?_f(e):t===3?new hi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Ju(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Ju(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Rl.exec(i))?new hi(e[1],e[2],e[3],1):(e=Bl.exec(i))?new hi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=$f.exec(i))?Ju(e[1],e[2],e[3],e[4]):(e=rl.exec(i))?Ju(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Re.exec(i))?Eu(e[1],e[2]/100,e[3]/100,1):(e=Fl.exec(i))?Eu(e[1],e[2]/100,e[3]/100,e[4]):Qu.hasOwnProperty(i)?_f(Qu[i]):i==="transparent"?new hi(NaN,NaN,NaN,0):null}function _f(i){return new hi(i>>16&255,i>>8&255,i&255,1)}function Ju(i,e,t,r){return r<=0&&(i=e=t=NaN),new hi(i,e,t,r)}function il(i){return i instanceof bf||(i=wf(i)),i?(i=i.rgb(),new hi(i.r,i.g,i.b,i.opacity)):new hi}function tf(i,e,t,r){return arguments.length===1?il(i):new hi(i,e,t,r==null?1:r)}function hi(i,e,t,r){this.r=+i,this.g=+e,this.b=+t,this.opacity=+r}xf(hi,tf,el(bf,{brighter:function(e){return e=e==null?Zf:Math.pow(Zf,e),new hi(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Ef:Math.pow(Ef,e),new hi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new hi($s(this.r),$s(this.g),$s(this.b),Rs(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ef,formatHex:ef,formatHex8:ol,formatRgb:Sf,toString:Sf}));function ef(){return"#".concat(Bs(this.r)).concat(Bs(this.g)).concat(Bs(this.b))}function ol(){return"#".concat(Bs(this.r)).concat(Bs(this.g)).concat(Bs(this.b)).concat(Bs((isNaN(this.opacity)?1:this.opacity)*255))}function Sf(){var i=Rs(this.opacity);return"".concat(i===1?"rgb(":"rgba(").concat($s(this.r),", ").concat($s(this.g),", ").concat($s(this.b)).concat(i===1?")":", ".concat(i,")"))}function Rs(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function $s(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function Bs(i){return i=$s(i),(i<16?"0":"")+i.toString(16)}function Eu(i,e,t,r){return r<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new Ho(i,e,t,r)}function rf(i){if(i instanceof Ho)return new Ho(i.h,i.s,i.l,i.opacity);if(i instanceof bf||(i=wf(i)),!i)return new Ho;if(i instanceof Ho)return i;i=i.rgb();var e=i.r/255,t=i.g/255,r=i.b/255,n=Math.min(e,t,r),a=Math.max(e,t,r),o=NaN,s=a-n,u=(a+n)/2;return s?(e===a?o=(t-r)/s+(t<r)*6:t===a?o=(r-e)/s+2:o=(e-t)/s+4,s/=u<.5?a+n:2-a-n,o*=60):s=u>0&&u<1?0:o,new Ho(o,s,u,i.opacity)}function nf(i,e,t,r){return arguments.length===1?rf(i):new Ho(i,e,t,r==null?1:r)}function Ho(i,e,t,r){this.h=+i,this.s=+e,this.l=+t,this.opacity=+r}xf(Ho,nf,el(bf,{brighter:function(e){return e=e==null?Zf:Math.pow(Zf,e),new Ho(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Ef:Math.pow(Ef,e),new Ho(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new hi(Mf(e>=240?e-240:e+120,a,n),Mf(e,a,n),Mf(e<120?e+240:e-120,a,n),this.opacity)},clamp:function(){return new Ho(Pu(this.h),af(this.s),af(this.l),Rs(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=Rs(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(Pu(this.h),", ").concat(af(this.s)*100,"%, ").concat(af(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function Pu(i){return i=(i||0)%360,i<0?i+360:i}function af(i){return Math.max(0,Math.min(1,i||0))}function Mf(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}function Cf(i,e,t,r,n){var a=i*i,o=a*i;return((1-3*i+3*a-o)*e+(4-6*a+3*o)*t+(1+3*i+3*a-3*o)*r+o*n)/6}function sl(i){var e=i.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),n=i[r],a=i[r+1],o=r>0?i[r-1]:2*n-a,s=r<e-1?i[r+2]:2*a-n;return Cf((t-r/e)*e,o,n,a,s)}}function ul(i){var e=i.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e),n=i[(r+e-1)%e],a=i[r%e],o=i[(r+1)%e],s=i[(r+2)%e];return Cf((t-r/e)*e,n,a,o,s)}}var ku=function(i){return function(){return i}};function Fs(i,e){return function(t){return i+t*e}}function fl(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(r){return Math.pow(i+r*e,t)}}function hh(i,e){var t=e-i;return t?Fs(i,t>180||t<-180?t-360*Math.round(t/360):t):constant(isNaN(i)?e:i)}function Sc(i){return(i=+i)==1?Mc:function(e,t){return t-e?fl(e,t,i):ku(isNaN(e)?t:e)}}function Mc(i,e){var t=e-i;return t?Fs(i,t):ku(isNaN(i)?e:i)}var Cc=function i(e){var t=Sc(e);function r(n,a){var o=t((n=tf(n)).r,(a=tf(a)).r),s=t(n.g,a.g),u=t(n.b,a.b),f=Mc(n.opacity,a.opacity);return function(c){return n.r=o(c),n.g=s(c),n.b=u(c),n.opacity=f(c),n+""}}return r.gamma=i,r}(1);function cl(i){return function(e){var t=e.length,r=new Array(t),n=new Array(t),a=new Array(t),o,s;for(o=0;o<t;++o)s=tf(e[o]),r[o]=s.r||0,n[o]=s.g||0,a[o]=s.b||0;return r=i(r),n=i(n),a=i(a),s.opacity=1,function(u){return s.r=r(u),s.g=n(u),s.b=a(u),s+""}}}var Af=cl(sl),vh=cl(ul);function ll(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,r=e.slice(),n;return function(a){for(n=0;n<t;++n)r[n]=i[n]*(1-a)+e[n]*a;return r}}function zl(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Ul(i,e){return(zl(e)?ll:hl)(i,e)}function hl(i,e){var t=e?e.length:0,r=i?Math.min(t,i.length):0,n=new Array(r),a=new Array(t),o;for(o=0;o<r;++o)n[o]=Tf(i[o],e[o]);for(;o<t;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=n[o](s);return a}}function dh(i,e){var t=new Date;return i=+i,e=+e,function(r){return t.setTime(i*(1-r)+e*r),t}}function Ac(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function Wl(i,e){var t={},r={},n;(i===null||Kf(i)!=="object")&&(i={}),(e===null||Kf(e)!=="object")&&(e={});for(n in e)n in i?t[n]=Tf(i[n],e[n]):r[n]=e[n];return function(a){for(n in t)r[n]=t[n](a);return r}}var vl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Tc=new RegExp(vl.source,"g");function Xl(i){return function(){return i}}function Yl(i){return function(e){return i(e)+""}}function Vl(i,e){var t=vl.lastIndex=Tc.lastIndex=0,r,n,a,o=-1,s=[],u=[];for(i=i+"",e=e+"";(r=vl.exec(i))&&(n=Tc.exec(e));)(a=n.index)>t&&(a=e.slice(t,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,u.push({i:o,x:Ac(r,n)})),t=Tc.lastIndex;return t<e.length&&(a=e.slice(t),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?Yl(u[0].x):Xl(e):(e=u.length,function(f){for(var c=0,l;c<e;++c)s[(l=u[c]).i]=l.x(f);return s.join("")})}function Tf(i,e){var t=Kf(e),r;return e==null||t==="boolean"?ku(e):(t==="number"?Ac:t==="string"?(r=wf(e))?(e=r,Cc):Vl:e instanceof wf?Cc:e instanceof Date?dh:zl(e)?ll:Array.isArray(e)?hl:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Wl:Ac)(i,e)}function Qf(i){return+i}function Ic(i){return i*i}function Oc(i){return i*(2-i)}function Jf(i){return((i*=2)<=1?i*i:--i*(2-i)+1)/2}function dl(i){return i*i*i}function Lc(i){return--i*i*i+1}function tc(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var of=3,gl=function i(e){e=+e;function t(r){return Math.pow(r,e)}return t.exponent=i,t}(of),Dc=function i(e){e=+e;function t(r){return 1-Math.pow(1-r,e)}return t.exponent=i,t}(of),ec=function i(e){e=+e;function t(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return t.exponent=i,t}(of),rc=Math.PI,If=rc/2;function nc(i){return+i==1?1:1-Math.cos(i*If)}function Of(i){return Math.sin(i*If)}function Lf(i){return(1-Math.cos(rc*i))/2}function Gs(i){return(Math.pow(2,-10*i)-.0009765625)*1.0009775171065494}function jl(i){return Gs(1-+i)}function ac(i){return 1-Gs(i)}function Ru(i){return((i*=2)<=1?Gs(1-i):2-Gs(i-1))/2}function Hl(i){return 1-Math.sqrt(1-i*i)}function Nc(i){return Math.sqrt(1- --i*i)}function Kl(i){return((i*=2)<=1?1-Math.sqrt(1-i*i):Math.sqrt(1-(i-=2)*i)+1)/2}var pl=4/11,gh=6/11,Bu=8/11,Zl=3/4,$l=9/11,ql=10/11,ph=15/16,Ql=21/22,yh=63/64,Oo=1/pl/pl;function Jl(i){return 1-uu(1-i)}function uu(i){return(i=+i)<pl?Oo*i*i:i<Bu?Oo*(i-=gh)*i+Zl:i<ql?Oo*(i-=$l)*i+ph:Oo*(i-=Ql)*i+yh}function Fu(i){return((i*=2)<=1?1-uu(1-i):uu(i-1)+1)/2}var Pc=1.70158,yl=function i(e){e=+e;function t(r){return(r=+r)*r*(e*(r-1)+r)}return t.overshoot=i,t}(Pc),kc=function i(e){e=+e;function t(r){return--r*r*((r+1)*e+r)+1}return t.overshoot=i,t}(Pc),ml=function i(e){e=+e;function t(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return t.overshoot=i,t}(Pc),Lo=2*Math.PI,fu=1,Zi=.3,is=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Lo);function n(a){return e*Gs(- --a)*Math.sin((r-a)/t)}return n.amplitude=function(a){return i(a,t*Lo)},n.period=function(a){return i(e,a)},n}(fu,Zi),ic=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Lo);function n(a){return 1-e*Gs(a=+a)*Math.sin((a+r)/t)}return n.amplitude=function(a){return i(a,t*Lo)},n.period=function(a){return i(e,a)},n}(fu,Zi),mh=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Lo);function n(a){return((a=a*2-1)<0?e*Gs(-a)*Math.sin((r-a)/t):2-e*Gs(a)*Math.sin((r+a)/t))/2}return n.amplitude=function(a){return i(a,t*Lo)},n.period=function(a){return i(e,a)},n}(fu,Zi),xl={};function xh(i){return xl[i.toLowerCase()]||k[i]}function Jh(i,e){xl[i.toLowerCase()]=e}var th=function(i){return["fill","stroke","fillStyle","strokeStyle"].includes(i)},bh=function(i){return/^[r,R,L,l]{1}[\s]*\(/.test(i)},eh=[1,0,0,0,1,0,0,0,1];function Eh(i,e,t){var r={},n=e.fromAttrs,a=e.toAttrs;if(!i.destroyed){var o;for(var s in a)if(!(0,p.isEqual)(n[s],a[s]))if(s==="path"){var u=a[s],f=n[s];u.length>f.length?(u=Tn(a[s]),f=Tn(n[s]),f=nu(f,u),f=au(f,u),e.fromAttrs.path=f,e.toAttrs.path=u):e.pathFormatted||(u=Tn(a[s]),f=Tn(n[s]),f=au(f,u),e.fromAttrs.path=f,e.toAttrs.path=u,e.pathFormatted=!0),r[s]=[];for(var c=0;c<u.length;c++){for(var l=u[c],x=f[c],m=[],C=0;C<l.length;C++)(0,p.isNumber)(l[C])&&x&&(0,p.isNumber)(x[C])?(o=Tf(x[C],l[C]),m.push(o(t))):m.push(l[C]);r[s].push(m)}}else if(s==="matrix"){var R=Ul(n[s]||eh,a[s]||eh),V=R(t);r[s]=V}else th(s)&&bh(a[s])?r[s]=a[s]:(0,p.isFunction)(a[s])||(o=Tf(n[s],a[s]),r[s]=o(t));i.attr(r)}}function wh(i,e,t){var r=e.startTime,n=e.delay;if(t<r+n||e._paused)return!1;var a,o=e.duration,s=e.easing,u=xh(s);if(t=t-r-e.delay,e.repeat)a=t%o/o,a=u(a);else if(a=t/o,a<1)a=u(a);else return e.onFrame?i.attr(e.onFrame(1)):i.attr(e.toAttrs),!0;if(e.onFrame){var f=e.onFrame(a);i.attr(f)}else Eh(i,e,a);return!1}var rh=function(){function i(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return i.prototype.initTimer=function(){var e=this,t=!1,r,n,a;this.timer=Qc(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(r=e.animators[s],r.destroyed){e.removeAnimator(s);continue}if(!r.isAnimatePaused()){n=r.get("animations");for(var u=n.length-1;u>=0;u--)a=n[u],t=wh(r,a,o),t&&(n.splice(u,1),t=!1,a.callback&&a.callback())}n.length===0&&e.removeAnimator(s)}var f=e.canvas.get("autoDraw");f||e.canvas.draw()}})},i.prototype.addAnimator=function(e){this.animators.push(e)},i.prototype.removeAnimator=function(e){this.animators.splice(e,1)},i.prototype.isAnimating=function(){return!!this.animators.length},i.prototype.stop=function(){this.timer&&this.timer.stop()},i.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},i.prototype.getTime=function(){return this.current},i}(),bl=rh,Rc=40,El=0,_h=":",wl=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Sh(i,e){for(var t in i)if(i.hasOwnProperty(t)&&t.indexOf(_h+e)>=0)return!0;return!1}function oc(i,e,t){t.name=e,t.target=i,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}function xt(i,e,t){if(t.bubbles){var r=void 0,n=!1;if(e==="mouseenter"?(r=t.fromShape,n=!0):e==="mouseleave"&&(n=!0,r=t.toShape),i.isCanvas()&&n)return;if(r&&Vf(i,r)){t.bubbles=!1;return}t.name=e,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}}var ne=function(){function i(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(r){var n=r.type;t._triggerEvent(n,r)},this._onDocumentMove=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(r);t.dragging&&t._emitEvent("drag",r,o,t.draggingShape)}},this._onDocumentMouseUp=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&t.dragging){var o=t._getPointInfo(r);t.draggingShape&&t._emitEvent("drop",r,o,null),t._emitEvent("dragend",r,o,t.draggingShape),t._afterDrag(t.draggingShape,o,r)}},this.canvas=e.canvas}return i.prototype.init=function(){this._bindEvents()},i.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");(0,p.each)(wl,function(r){t.addEventListener(r,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");(0,p.each)(wl,function(r){t.removeEventListener(r,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._getEventObj=function(e,t,r,n,a,o){var s=new vf(e,t);return s.fromShape=a,s.toShape=o,s.x=r.x,s.y=r.y,s.clientX=r.clientX,s.clientY=r.clientY,s.propagationPath.push(n),s},i.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},i.prototype._getPointInfo=function(e){var t=this.canvas,r=t.getClientByEvent(e),n=t.getPointByEvent(e);return{x:n.x,y:n.y,clientX:r.x,clientY:r.y}},i.prototype._triggerEvent=function(e,t){var r=this._getPointInfo(t),n=this._getShape(r,t),a=this["_on"+e],o=!1;if(a)a.call(this,r,n,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,r,null,null,n),n&&this._emitEvent(e,t,r,n,null,n),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,r,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,r,s,s,null),this._emitEvent(e,t,r,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,r,null)):this._emitEvent(e,t,r,n,null,null)}if(o||(this.currentShape=n),n&&!n.get("destroyed")){var u=this.canvas,f=u.get("el");f.style.cursor=n.attr("cursor")||u.get("cursor")}},i.prototype._onmousedown=function(e,t,r){r.button===El&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,e,t,null,null)},i.prototype._emitMouseoverEvents=function(e,t,r,n){var a=this.canvas.get("el");r!==n&&(r&&(this._emitEvent("mouseout",e,t,r,r,n),this._emitEvent("mouseleave",e,t,r,r,n),(!n||n.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),n&&(this._emitEvent("mouseover",e,t,n,r,n),this._emitEvent("mouseenter",e,t,n,r,n)))},i.prototype._emitDragoverEvents=function(e,t,r,n,a){n?(n!==r&&(r&&this._emitEvent("dragleave",e,t,r,r,n),this._emitEvent("dragenter",e,t,n,r,n)),a||this._emitEvent("dragover",e,t,n)):r&&this._emitEvent("dragleave",e,t,r,r,n),a&&this._emitEvent("dragover",e,t,n)},i.prototype._afterDrag=function(e,t,r){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var n=this._getShape(t,r);n!==e&&this._emitMouseoverEvents(r,t,e,n),this.currentShape=n},i.prototype._onmouseup=function(e,t,r){if(r.button===El){var n=this.draggingShape;this.dragging?(n&&this._emitEvent("drop",r,e,t),this._emitEvent("dragend",r,e,n),this._afterDrag(n,e,r)):(this._emitEvent("mouseup",r,e,t),t===this.mousedownShape&&this._emitEvent("click",r,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},i.prototype._ondragover=function(e,t,r){r.preventDefault();var n=this.currentShape;this._emitDragoverEvents(r,e,n,t,!0)},i.prototype._onmousemove=function(e,t,r){var n=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(r,e,a,t,!1),this._emitEvent("drag",r,e,o);else{var s=this.mousedownPoint;if(s){var u=this.mousedownShape,f=r.timeStamp,c=f-this.mousedownTimeStamp,l=s.clientX-e.clientX,x=s.clientY-e.clientY,m=l*l+x*x;c>120||m>Rc?u&&u.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",r,e,o),this.mousedownShape=null,this.mousedownPoint=null):!u&&n.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t))}else this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)}},i.prototype._emitEvent=function(e,t,r,n,a,o){var s=this._getEventObj(e,t,r,n,a,o);if(n){s.shape=n,oc(n,e,s);for(var u=n.getParent();u;)u.emitDelegation(e,s),s.propagationStopped||xt(u,e,s),s.propagationPath.push(u),u=u.getParent()}else{var f=this.canvas;oc(f,e,s)}},i.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},i}(),Ce=ne,yr="px",Br=ze(),pr=Br&&Br.name==="firefox",Tr=function(i){(0,K.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");(0,p.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var r=this.get("container");r.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new Ce({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new bl(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,r){var n=this.get("el");Js&&(n.style.width=t+yr,n.style.height=r+yr)},e.prototype.changeSize=function(t,r){this.setDOMSize(t,r),this.set("width",t),this.set("height",r),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var r=this.get("el");Js&&r&&(r.style.cursor=t)},e.prototype.getPointByEvent=function(t){var r=this.get("supportCSSTransform");if(r){if(pr&&!(0,p.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,p.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var n=this.getClientByEvent(t),a=n.x,o=n.y;return this.getPointByClient(a,o)},e.prototype.getClientByEvent=function(t){var r=t;return t.touches&&(t.type==="touchend"?r=t.changedTouches[0]:r=t.touches[0]),{x:r.clientX,y:r.clientY}},e.prototype.getPointByClient=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t-a.left,y:r-a.top}},e.prototype.getClientByPoint=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t+a.left,y:r+a.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),i.prototype.destroy.call(this))},e}(Hu),Zr=Tr,en=function(i){(0,K.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=i.prototype.clone.call(this),r=this.getChildren(),n=0;n<r.length;n++){var a=r[n];t.add(a.clone())}return t},e}(Hu),an=en,Jr=function(i){(0,K.__extends)(e,i);function e(t){return i.call(this,t)||this}return e.prototype._isInBBox=function(t,r){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=r&&n.maxY>=r},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){i.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),r=this.getTotalMatrix(),n=t.minX,a=t.minY,o=t.maxX,s=t.maxY;if(r){var u=ua(r,[t.minX,t.minY]),f=ua(r,[t.maxX,t.minY]),c=ua(r,[t.minX,t.maxY]),l=ua(r,[t.maxX,t.maxY]);n=Math.min(u[0],f[0],c[0],l[0]),o=Math.max(u[0],f[0],c[0],l[0]),a=Math.min(u[1],f[1],c[1],l[1]),s=Math.max(u[1],f[1],c[1],l[1])}var x=this.attrs;if(x.shadowColor){var m=x.shadowBlur,C=m===void 0?0:m,R=x.shadowOffsetX,V=R===void 0?0:R,Q=x.shadowOffsetY,rt=Q===void 0?0:Q,st=n-C+V,lt=o+C+V,Ct=a-C+rt,At=s+C+rt;n=Math.min(n,st),o=Math.max(o,lt),a=Math.min(a,Ct),s=Math.max(s,At)}return{x:n,y:a,minX:n,minY:a,maxX:o,maxY:s,width:o-n,height:s-a}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,r){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,r){var n=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[t,r,1];o=this.invertFromMatrix(o);var s=o[0],u=o[1],f=this._isInBBox(s,u);return this.isOnlyHitBox()?f:!!(f&&!this.isClipped(s,u)&&(this.isInShape(s,u)||n&&n.isHit(s,u)||a&&a.isHit(s,u)))},e}($a),dn=Jr,v=new Map;function M(i,e){v.set(i,e)}function G(i){return v.get(i)}function $(i){var e=i.attr(),t=e.x,r=e.y,n=e.width,a=e.height;return{x:t,y:r,width:n,height:a}}function ft(i){var e=i.attr(),t=e.x,r=e.y,n=e.r;return{x:t-n,y:r-n,width:n*2,height:n*2}}function ct(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function yt(i,e){return Math.abs(i-e)<.001}function Et(i,e){var t=(0,p.min)(i),r=(0,p.min)(e),n=(0,p.max)(i),a=(0,p.max)(e);return{x:t,y:r,width:n-t,height:a-r}}function It(i,e,t,r){return{minX:(0,p.min)([i,t]),maxX:(0,p.max)([i,t]),minY:(0,p.min)([e,r]),maxY:(0,p.max)([e,r])}}function zt(i){return(i+Math.PI*2)%(Math.PI*2)}var Qt={box:function(i,e,t,r){return Et([i,t],[e,r])},length:function(i,e,t,r){return ct(i,e,t,r)},pointAt:function(i,e,t,r,n){return{x:(1-n)*i+n*t,y:(1-n)*e+n*r}},pointDistance:function(i,e,t,r,n,a){var o=(t-i)*(n-i)+(r-e)*(a-e);if(o<0)return ct(i,e,n,a);var s=(t-i)*(t-i)+(r-e)*(r-e);return o>s?ct(t,r,n,a):this.pointToLine(i,e,t,r,n,a)},pointToLine:function(i,e,t,r,n,a){var o=[t-i,r-e];if(xn.exactEquals(o,[0,0]))return Math.sqrt((n-i)*(n-i)+(a-e)*(a-e));var s=[-o[1],o[0]];xn.normalize(s,s);var u=[n-i,a-e];return Math.abs(xn.dot(u,s))},tangentAngle:function(i,e,t,r){return Math.atan2(r-e,t-i)}},qt=1e-4;function _e(i,e,t,r,n,a){var o,s=1/0,u=[t,r],f=20;a&&a>200&&(f=a/10);for(var c=1/f,l=c/10,x=0;x<=f;x++){var m=x*c,C=[n.apply(null,i.concat([m])),n.apply(null,e.concat([m]))],R=ct(u[0],u[1],C[0],C[1]);R<s&&(o=m,s=R)}if(o===0)return{x:i[0],y:e[0]};if(o===1){var V=i.length;return{x:i[V-1],y:e[V-1]}}s=1/0;for(var x=0;x<32&&!(l<qt);x++){var Q=o-l,rt=o+l,C=[n.apply(null,i.concat([Q])),n.apply(null,e.concat([Q]))],R=ct(u[0],u[1],C[0],C[1]);if(Q>=0&&R<s)o=Q,s=R;else{var st=[n.apply(null,i.concat([rt])),n.apply(null,e.concat([rt]))],lt=ct(u[0],u[1],st[0],st[1]);rt<=1&&lt<s?(o=rt,s=lt):l*=.5}}return{x:n.apply(null,i.concat([o])),y:n.apply(null,e.concat([o]))}}function Ye(i,e){for(var t=0,r=i.length,n=0;n<r;n++){var a=i[n],o=e[n],s=i[(n+1)%r],u=e[(n+1)%r];t+=ct(a,o,s,u)}return t/2}function Cr(i,e,t,r){var n=1-r;return n*n*i+2*r*n*e+r*r*t}function $e(i,e,t){var r=i+t-2*e;if(yt(r,0))return[.5];var n=(i-e)/r;return n<=1&&n>=0?[n]:[]}function er(i,e,t,r){return 2*(1-r)*(e-i)+2*r*(t-e)}function tr(i,e,t,r,n,a,o){var s=Cr(i,t,n,o),u=Cr(e,r,a,o),f=Qt.pointAt(i,e,t,r,o),c=Qt.pointAt(t,r,n,a,o);return[[i,e,f.x,f.y,s,u],[s,u,c.x,c.y,n,a]]}function $r(i,e,t,r,n,a,o){if(o===0)return(ct(i,e,t,r)+ct(t,r,n,a)+ct(i,e,n,a))/2;var s=tr(i,e,t,r,n,a,.5),u=s[0],f=s[1];return u.push(o-1),f.push(o-1),$r.apply(null,u)+$r.apply(null,f)}var _n={box:function(i,e,t,r,n,a){var o=$e(i,t,n)[0],s=$e(e,r,a)[0],u=[i,n],f=[e,a];return o!==void 0&&u.push(Cr(i,t,n,o)),s!==void 0&&f.push(Cr(e,r,a,s)),Et(u,f)},length:function(i,e,t,r,n,a){return $r(i,e,t,r,n,a,3)},nearestPoint:function(i,e,t,r,n,a,o,s){return _e([i,t,n],[e,r,a],o,s,Cr)},pointDistance:function(i,e,t,r,n,a,o,s){var u=this.nearestPoint(i,e,t,r,n,a,o,s);return ct(u.x,u.y,o,s)},interpolationAt:Cr,pointAt:function(i,e,t,r,n,a,o){return{x:Cr(i,t,n,o),y:Cr(e,r,a,o)}},divide:function(i,e,t,r,n,a,o){return tr(i,e,t,r,n,a,o)},tangentAngle:function(i,e,t,r,n,a,o){var s=er(i,t,n,o),u=er(e,r,a,o),f=Math.atan2(u,s);return zt(f)}};function on(i,e,t,r,n){var a=1-n;return a*a*a*i+3*e*n*a*a+3*t*n*n*a+r*n*n*n}function Yn(i,e,t,r,n){var a=1-n;return 3*(a*a*(e-i)+2*a*n*(t-e)+n*n*(r-t))}function kn(i,e,t,r){var n=-3*i+9*e-9*t+3*r,a=6*i-12*e+6*t,o=3*e-3*i,s=[],u,f,c;if(yt(n,0))yt(a,0)||(u=-o/a,u>=0&&u<=1&&s.push(u));else{var l=a*a-4*n*o;yt(l,0)?s.push(-a/(2*n)):l>0&&(c=Math.sqrt(l),u=(-a+c)/(2*n),f=(-a-c)/(2*n),u>=0&&u<=1&&s.push(u),f>=0&&f<=1&&s.push(f))}return s}function ea(i,e,t,r,n,a,o,s,u){var f=on(i,t,n,o,u),c=on(e,r,a,s,u),l=Qt.pointAt(i,e,t,r,u),x=Qt.pointAt(t,r,n,a,u),m=Qt.pointAt(n,a,o,s,u),C=Qt.pointAt(l.x,l.y,x.x,x.y,u),R=Qt.pointAt(x.x,x.y,m.x,m.y,u);return[[i,e,l.x,l.y,C.x,C.y,f,c],[f,c,R.x,R.y,m.x,m.y,o,s]]}function da(i,e,t,r,n,a,o,s,u){if(u===0)return Ye([i,t,n,o],[e,r,a,s]);var f=ea(i,e,t,r,n,a,o,s,.5),c=f[0],l=f[1];return c.push(u-1),l.push(u-1),da.apply(null,c)+da.apply(null,l)}var ia={extrema:kn,box:function(i,e,t,r,n,a,o,s){for(var u=[i,o],f=[e,s],c=kn(i,t,n,o),l=kn(e,r,a,s),x=0;x<c.length;x++)u.push(on(i,t,n,o,c[x]));for(var x=0;x<l.length;x++)f.push(on(e,r,a,s,l[x]));return Et(u,f)},length:function(i,e,t,r,n,a,o,s){return da(i,e,t,r,n,a,o,s,3)},nearestPoint:function(i,e,t,r,n,a,o,s,u,f,c){return _e([i,t,n,o],[e,r,a,s],u,f,on,c)},pointDistance:function(i,e,t,r,n,a,o,s,u,f,c){var l=this.nearestPoint(i,e,t,r,n,a,o,s,u,f,c);return ct(l.x,l.y,u,f)},interpolationAt:on,pointAt:function(i,e,t,r,n,a,o,s,u){return{x:on(i,t,n,o,u),y:on(e,r,a,s,u)}},divide:function(i,e,t,r,n,a,o,s,u){return ea(i,e,t,r,n,a,o,s,u)},tangentAngle:function(i,e,t,r,n,a,o,s,u){var f=Yn(i,t,n,o,u),c=Yn(e,r,a,s,u);return zt(Math.atan2(c,f))}};function bi(i,e){var t=Math.abs(i);return e>0?t:t*-1}var ba={box:function(i,e,t,r){return{x:i-t,y:e-r,width:t*2,height:r*2}},length:function(i,e,t,r){return Math.PI*(3*(t+r)-Math.sqrt((3*t+r)*(t+3*r)))},nearestPoint:function(i,e,t,r,n,a){var o=t,s=r;if(o===0||s===0)return{x:i,y:e};for(var u=n-i,f=a-e,c=Math.abs(u),l=Math.abs(f),x=o*o,m=s*s,C=Math.PI/4,R,V,Q=0;Q<4;Q++){R=o*Math.cos(C),V=s*Math.sin(C);var rt=(x-m)*Math.pow(Math.cos(C),3)/o,st=(m-x)*Math.pow(Math.sin(C),3)/s,lt=R-rt,Ct=V-st,At=c-rt,Nt=l-st,Kt=Math.hypot(Ct,lt),ge=Math.hypot(Nt,At),ue=Kt*Math.asin((lt*Nt-Ct*At)/(Kt*ge)),Ae=ue/Math.sqrt(x+m-R*R-V*V);C+=Ae,C=Math.min(Math.PI/2,Math.max(0,C))}return{x:i+bi(R,u),y:e+bi(V,f)}},pointDistance:function(i,e,t,r,n,a){var o=this.nearestPoint(i,e,t,r,n,a);return ct(o.x,o.y,n,a)},pointAt:function(i,e,t,r,n){var a=2*Math.PI*n;return{x:i+t*Math.cos(a),y:e+r*Math.sin(a)}},tangentAngle:function(i,e,t,r,n){var a=2*Math.PI*n,o=Math.atan2(r*Math.cos(a),-t*Math.sin(a));return zt(o)}};function $i(i,e,t,r,n,a,o,s){return-1*t*Math.cos(n)*Math.sin(s)-r*Math.sin(n)*Math.cos(s)}function yi(i,e,t,r,n,a,o,s){return-1*t*Math.sin(n)*Math.sin(s)+r*Math.cos(n)*Math.cos(s)}function Ya(i,e,t){return Math.atan(-e/i*Math.tan(t))}function Xi(i,e,t){return Math.atan(e/(i*Math.tan(t)))}function Yi(i,e,t,r,n,a){return t*Math.cos(n)*Math.cos(a)-r*Math.sin(n)*Math.sin(a)+i}function xo(i,e,t,r,n,a){return t*Math.sin(n)*Math.cos(a)+r*Math.cos(n)*Math.sin(a)+e}function os(i,e,t,r){var n=Math.atan2(r*i,t*e);return(n+Math.PI*2)%(Math.PI*2)}function ho(i,e,t){return{x:i*Math.cos(t),y:e*Math.sin(t)}}function Ma(i,e,t){var r=Math.cos(t),n=Math.sin(t);return[i*r-e*n,i*n+e*r]}var ss={box:function(i,e,t,r,n,a,o){for(var s=Ya(t,r,n),u=1/0,f=-1/0,c=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var x=s+l;a<o?a<x&&x<o&&c.push(x):o<x&&x<a&&c.push(x)}for(var l=0;l<c.length;l++){var m=Yi(i,e,t,r,n,c[l]);m<u&&(u=m),m>f&&(f=m)}for(var C=Xi(t,r,n),R=1/0,V=-1/0,Q=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var rt=C+l;a<o?a<rt&&rt<o&&Q.push(rt):o<rt&&rt<a&&Q.push(rt)}for(var l=0;l<Q.length;l++){var st=xo(i,e,t,r,n,Q[l]);st<R&&(R=st),st>V&&(V=st)}return{x:u,y:R,width:f-u,height:V-R}},length:function(i,e,t,r,n,a,o){},nearestPoint:function(i,e,t,r,n,a,o,s,u){var f=Ma(s-i,u-e,-n),c=f[0],l=f[1],x=ba.nearestPoint(0,0,t,r,c,l),m=os(t,r,x.x,x.y);m<a?x=ho(t,r,a):m>o&&(x=ho(t,r,o));var C=Ma(x.x,x.y,n);return{x:C[0]+i,y:C[1]+e}},pointDistance:function(i,e,t,r,n,a,o,s,u){var f=this.nearestPoint(i,e,t,r,s,u);return ct(f.x,f.y,s,u)},pointAt:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a;return{x:Yi(i,e,t,r,n,u),y:xo(i,e,t,r,n,u)}},tangentAngle:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a,f=$i(i,e,t,r,n,a,o,u),c=yi(i,e,t,r,n,a,o,u);return zt(Math.atan2(c,f))}};function ui(i){for(var e=0,t=[],r=0;r<i.length-1;r++){var n=i[r],a=i[r+1],o=ct(n[0],n[1],a[0],a[1]),s={from:n,to:a,length:o};t.push(s),e+=o}return{segments:t,totalLength:e}}function oa(i){if(i.length<2)return 0;for(var e=0,t=0;t<i.length-1;t++){var r=i[t],n=i[t+1];e+=ct(r[0],r[1],n[0],n[1])}return e}function Fa(i,e){if(e>1||e<0||i.length<2)return null;var t=ui(i),r=t.segments,n=t.totalLength;if(n===0)return{x:i[0][0],y:i[0][1]};for(var a=0,o=null,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){var x=(e-a)/l;o=Qt.pointAt(f[0],f[1],c[0],c[1],x);break}a+=l}return o}function ti(i,e){if(e>1||e<0||i.length<2)return 0;for(var t=ui(i),r=t.segments,n=t.totalLength,a=0,o=0,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){o=Math.atan2(c[1]-f[1],c[0]-f[0]);break}a+=l}return o}function vo(i,e,t){for(var r=1/0,n=0;n<i.length-1;n++){var a=i[n],o=i[n+1],s=Qt.pointDistance(a[0],a[1],o[0],o[1],e,t);s<r&&(r=s)}return r}var cu={box:function(i){for(var e=[],t=[],r=0;r<i.length;r++){var n=i[r];e.push(n[0]),t.push(n[1])}return Et(e,t)},length:function(i){return oa(i)},pointAt:function(i,e){return Fa(i,e)},pointDistance:function(i,e,t){return vo(i,e,t)},tangentAngle:function(i,e){return ti(i,e)}};function Gu(i){var e=i.slice(0);return i.length&&e.push(i[0]),e}var we={box:function(i){return cu.box(i)},length:function(i){return oa(Gu(i))},pointAt:function(i,e){return Fa(Gu(i),e)},pointDistance:function(i,e,t){return vo(Gu(i),e,t)},tangentAngle:function(i,e){return ti(Gu(i),e)}};function br(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function gr(i,e){var t=i.get("startArrowShape"),r=i.get("endArrowShape"),n=null,a=null;return t&&(n=t.getCanvasBBox(),e=br(e,n)),r&&(a=r.getCanvasBBox(),e=br(e,a)),e}function Pn(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}var s=Et(r,n),u=s.x,f=s.y,c=s.width,l=s.height,x={minX:u,minY:f,maxX:u+c,maxY:f+l};return x=gr(i,x),{x:x.minX,y:x.minY,width:x.maxX-x.minX,height:x.maxY-x.minY}}function Ga(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}return Et(r,n)}var ve=null;function Jt(){if(!ve){var i=document.createElement("canvas");i.width=1,i.height=1,ve=i.getContext("2d")}return ve}function Be(i,e,t){var r=1;if((0,p.isString)(i)&&(r=i.split(`
`).length),r>1){var n=ir(e,t);return e*r+n*(r-1)}return e}function ir(i,e){return e?e-i:i*.14}function ur(i,e){var t=Jt(),r=0;if((0,p.isNil)(i)||i==="")return r;if(t.save(),t.font=e,(0,p.isString)(i)&&i.includes(`
`)){var n=i.split(`
`);(0,p.each)(n,function(a){var o=t.measureText(a).width;r<o&&(r=o)})}else r=t.measureText(i).width;return t.restore(),r}function Ue(i){var e=i.fontSize,t=i.fontFamily,r=i.fontWeight,n=i.fontStyle,a=i.fontVariant;return[n,a,r,e+"px",t].join(" ").trim()}function Fe(i){var e=i.attr(),t=e.x,r=e.y,n=e.text,a=e.fontSize,o=e.lineHeight,s=e.font;s||(s=Ue(e));var u=ur(n,s),f;if(!u)f={x:t,y:r,width:0,height:0};else{var c=e.textAlign,l=e.textBaseline,x=Be(n,a,o),m={x:t,y:r-x};c&&(c==="end"||c==="right"?m.x-=u:c==="center"&&(m.x-=u/2)),l&&(l==="top"?m.y+=x:l==="middle"&&(m.y+=x/2)),f={x:m.x,y:m.y,width:u,height:x}}return f}var Ze=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,de=/[^\s\,]+/ig;function Ne(i){var e=i||[];if((0,p.isArray)(e))return e;if((0,p.isString)(e))return e=e.match(Ze),(0,p.each)(e,function(t,r){if(t=t.match(de),t[0].length>1){var n=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=n}(0,p.each)(t,function(a,o){isNaN(a)||(t[o]=+a)}),e[r]=t}),e}var ce=Ne;function Qe(i,e,t,r){var n=[],a=!!r,o,s,u,f,c,l,x;if(a){u=r[0],f=r[1];for(var m=0,C=i.length;m<C;m+=1){var R=i[m];u=xn.min([0,0],u,R),f=xn.max([0,0],f,R)}}for(var m=0,V=i.length;m<V;m+=1){var R=i[m];if(m===0&&!t)x=R;else if(m===V-1&&!t)l=R,n.push(x),n.push(l);else{var Q=[m?m-1:V-1,m-1][t?0:1];o=i[Q],s=i[t?(m+1)%V:m+1];var rt=[0,0];rt=xn.sub(rt,s,o),rt=xn.scale(rt,rt,e);var st=xn.distance(R,o),lt=xn.distance(R,s),Ct=st+lt;Ct!==0&&(st/=Ct,lt/=Ct);var At=xn.scale([0,0],rt,-st),Nt=xn.scale([0,0],rt,lt);l=xn.add([0,0],R,At),c=xn.add([0,0],R,Nt),c=xn.min([0,0],c,xn.max([0,0],s,R)),c=xn.max([0,0],c,xn.min([0,0],s,R)),At=xn.sub([0,0],c,R),At=xn.scale([0,0],At,-st/lt),l=xn.add([0,0],R,At),l=xn.min([0,0],l,xn.max([0,0],o,R)),l=xn.max([0,0],l,xn.min([0,0],o,R)),Nt=xn.sub([0,0],R,l),Nt=xn.scale([0,0],Nt,lt/st),c=xn.add([0,0],R,Nt),a&&(l=xn.max([0,0],l,u),l=xn.min([0,0],l,f),c=xn.max([0,0],c,u),c=xn.min([0,0],c,f)),n.push(x),n.push(l),x=c}}return t&&n.push(n.shift()),n}function hr(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var r=!!e,n=[],a=0,o=i.length;a<o;a+=2)n.push([i[a],i[a+1]]);for(var s=Qe(n,.4,r,t),u=n.length,f=[],c,l,x,a=0;a<u-1;a+=1)c=s[a*2],l=s[a*2+1],x=n[a+1],f.push(["C",c[0],c[1],l[0],l[1],x[0],x[1]]);return r&&(c=s[u],l=s[u+1],x=n[0],f.push(["C",c[0],c[1],l[0],l[1],x[0],x[1]])),f}var Fr=hr;function Wr(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var Or=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],isEqual(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,x=s[u-1][f-1].min+o;s[u][f]=Wr(c,l,x)}}return s};function cn(i,e){var t=Or(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n]!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}if(r=i.length,r<n)for(var u=0;u<n-r;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]);return i}var jn=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Aa=new RegExp("([a-z])["+jn+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+jn+"]*,?["+jn+"]*)+)","ig"),zn=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+jn+"]*,?["+jn+"]*","ig");function sa(i){if(!i)return null;if((0,p.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(Aa,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(zn,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}var _a=/[a-z]/;function ai(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function Qi(i){var e=sa(i);if(!e||!e.length)return[["M",0,0]];for(var t=!1,r=0;r<e.length;r++){var n=e[r][0];if(_a.test(n)||["V","H","T","S"].indexOf(n)>=0){t=!0;break}}if(!t)return e;var a=[],o=0,s=0,u=0,f=0,c=0,l,x,m=e[0];(m[0]==="M"||m[0]==="m")&&(o=+m[1],s=+m[2],u=o,f=s,c++,a[0]=["M",o,s]);for(var r=c,C=e.length;r<C;r++){var R=e[r],V=a[r-1],Q=[],n=R[0],rt=n.toUpperCase();if(n!==rt)switch(Q[0]=rt,rt){case"A":Q[1]=R[1],Q[2]=R[2],Q[3]=R[3],Q[4]=R[4],Q[5]=R[5],Q[6]=+R[6]+o,Q[7]=+R[7]+s;break;case"V":Q[1]=+R[1]+s;break;case"H":Q[1]=+R[1]+o;break;case"M":u=+R[1]+o,f=+R[2]+s,Q[1]=u,Q[2]=f;break;default:for(var st=1,lt=R.length;st<lt;st++)Q[st]=+R[st]+(st%2?o:s)}else Q=e[r];switch(rt){case"Z":o=+u,s=+f;break;case"H":o=Q[1],Q=["L",o,s];break;case"V":s=Q[1],Q=["L",o,s];break;case"T":o=Q[1],s=Q[2];var Ct=ai([V[1],V[2]],[V[3],V[4]]);Q=["Q",Ct[0],Ct[1],o,s];break;case"S":o=Q[Q.length-2],s=Q[Q.length-1];var At=V.length,Nt=ai([V[At-4],V[At-3]],[V[At-2],V[At-1]]);Q=["C",Nt[0],Nt[1],Q[1],Q[2],o,s];break;case"M":u=Q[Q.length-2],f=Q[Q.length-1];break;default:o=Q[Q.length-2],s=Q[Q.length-1]}a.push(Q)}return a}var Ko=Math.PI*2,_l=function(i,e,t,r,n,a,o){var s=i.x,u=i.y;s*=e,u*=t;var f=r*s-n*u,c=n*s+r*u;return{x:f+a,y:c+o}},lu=function(i,e){var t=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=Math.cos(i),n=Math.sin(i),a=Math.cos(i+e),o=Math.sin(i+e);return[{x:r-n*t,y:n+r*t},{x:a+o*t,y:o-a*t},{x:a,y:o}]},Mh=function(i,e,t,r){var n=i*r-e*t<0?-1:1,a=i*t+e*r;return a>1&&(a=1),a<-1&&(a=-1),n*Math.acos(a)},wu=function(i,e,t,r,n,a,o,s,u,f,c,l){var x=Math.pow(n,2),m=Math.pow(a,2),C=Math.pow(c,2),R=Math.pow(l,2),V=x*m-x*R-m*C;V<0&&(V=0),V/=x*R+m*C,V=Math.sqrt(V)*(o===s?-1:1);var Q=V*n/a*l,rt=V*-a/n*c,st=f*Q-u*rt+(i+t)/2,lt=u*Q+f*rt+(e+r)/2,Ct=(c-Q)/n,At=(l-rt)/a,Nt=(-c-Q)/n,Kt=(-l-rt)/a,ge=Mh(1,0,Ct,At),ue=Mh(Ct,At,Nt,Kt);return s===0&&ue>0&&(ue-=Ko),s===1&&ue<0&&(ue+=Ko),[st,lt,ge,ue]},tv=function(i){var e=i.px,t=i.py,r=i.cx,n=i.cy,a=i.rx,o=i.ry,s=i.xAxisRotation,u=s===void 0?0:s,f=i.largeArcFlag,c=f===void 0?0:f,l=i.sweepFlag,x=l===void 0?0:l,m=[];if(a===0||o===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];var C=Math.sin(u*Ko/360),R=Math.cos(u*Ko/360),V=R*(e-r)/2+C*(t-n)/2,Q=-C*(e-r)/2+R*(t-n)/2;if(V===0&&Q===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];a=Math.abs(a),o=Math.abs(o);var rt=Math.pow(V,2)/Math.pow(a,2)+Math.pow(Q,2)/Math.pow(o,2);rt>1&&(a*=Math.sqrt(rt),o*=Math.sqrt(rt));var st=wu(e,t,r,n,a,o,c,x,C,R,V,Q),lt=st[0],Ct=st[1],At=st[2],Nt=st[3],Kt=Math.abs(Nt)/(Ko/4);Math.abs(1-Kt)<1e-7&&(Kt=1);var ge=Math.max(Math.ceil(Kt),1);Nt/=ge;for(var ue=0;ue<ge;ue++)m.push(lu(At,Nt)),At+=Nt;return m.map(function(Ae){var Ke=_l(Ae[0],a,o,R,C,lt,Ct),Gr=Ke.x,wr=Ke.y,Mr=_l(Ae[1],a,o,R,C,lt,Ct),vr=Mr.x,sn=Mr.y,nn=_l(Ae[2],a,o,R,C,lt,Ct),mr=nn.x,Dr=nn.y;return{x1:Gr,y1:wr,x2:vr,y2:sn,x:mr,y:Dr}})};function QS(i,e,t,r,n,a,o,s,u){var f=tv({px:i,py:e,cx:s,cy:u,rx:t,ry:r,xAxisRotation:n,largeArcFlag:a,sweepFlag:o});return f.reduce(function(c,l){var x=l.x1,m=l.y1,C=l.x2,R=l.y2,V=l.x,Q=l.y;return c.push(x,m,C,R,V,Q),c},[])}function JS(i,e){"TQ".indexOf(i[0])<0&&(e.qx=null,e.qy=null);var t=i.slice(1),r=t[0],n=t[1];switch(i[0]){case"M":return e.x=r,e.y=n,i;case"A":return["C"].concat(arcToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"Q":return e.qx=r,e.qy=n,["C"].concat(quadToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"L":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],i[2]));case"H":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],e.y1));case"V":return["C"].concat(lineToCubic(e.x1,e.y1,e.x1,i[1]));case"Z":return["C"].concat(lineToCubic(e.x1,e.y1,e.x,e.y));default:}return i}function tM(i,e){e===void 0&&(e=!1);for(var t=path2Absolute(i),r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},n=[],a="",o=t.length,s,u,f=[],c=0;c<o;c+=1)t[c]&&(a=t[c][0]),n[c]=a,t[c]=segmentToCubic(t[c],r),Wy(t,n,c),o=t.length,a==="Z"&&f.push(c),s=t[c],u=s.length,r.x1=+s[u-2],r.y1=+s[u-1],r.x2=+s[u-4]||r.x1,r.y2=+s[u-3]||r.y1;return e?[t,f]:t}function Wy(i,e,t){if(i[t].length>7){i[t].shift();for(var r=i[t],n=t;r.length;)e[t]="A",i.splice(n+=1,0,["C"].concat(r.splice(0,6)));i.splice(t,1)}}var fg=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},cg=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],x=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],m=0,C=0;C<c;C++){var R=f*l[C]+f,V=fg(R,i,t,n,o),Q=fg(R,e,r,a,s),rt=V*V+Q*Q;m+=x[C]*Math.sqrt(rt)}return f*m},Xy=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,x,m,C=0;C<2;++C){if(C===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,x=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,x=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;m=-x/l,m>0&&m<1&&u.push(m);continue}var R=l*l-4*x*c,V=Math.sqrt(R);if(!(R<0)){var Q=(-l+V)/(2*c);Q>0&&Q<1&&u.push(Q);var rt=(-l-V)/(2*c);rt>0&&rt<1&&u.push(rt)}}for(var st=u.length,lt=st,Ct;st--;)m=u[st],Ct=1-m,f[0][st]=Ct*Ct*Ct*i+3*Ct*Ct*m*t+3*Ct*m*m*n+m*m*m*o,f[1][st]=Ct*Ct*Ct*e+3*Ct*Ct*m*r+3*Ct*m*m*a+m*m*m*s;return f[0][lt]=i,f[1][lt]=e,f[0][lt+1]=o,f[1][lt+1]=s,f[0].length=f[1].length=lt+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},Yy=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var l=u/c,x=f/c,m=+l.toFixed(2),C=+x.toFixed(2);if(!(m<+Math.min(i,t).toFixed(2)||m>+Math.max(i,t).toFixed(2)||m<+Math.min(n,o).toFixed(2)||m>+Math.max(n,o).toFixed(2)||C<+Math.min(e,r).toFixed(2)||C>+Math.max(e,r).toFixed(2)||C<+Math.min(a,s).toFixed(2)||C>+Math.max(a,s).toFixed(2)))return{x:l,y:x}}}},Bc=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},qv=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:rectPath(i,e,t,r),vb:[i,e,t,r].join(" ")}},Vy=function(i,e){return i=qv(i),e=qv(e),Bc(e,i.x,i.y)||Bc(e,i.x2,i.y)||Bc(e,i.x,i.y2)||Bc(e,i.x2,i.y2)||Bc(i,e.x,e.y)||Bc(i,e.x2,e.y)||Bc(i,e.x,e.y2)||Bc(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},lg=function(i,e,t,r,n,a,o,s){isArray(i)||(i=[i,e,t,r,n,a,o,s]);var u=Xy.apply(null,i);return qv(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},hg=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),x=u*u,m=x*u,C=c*i+l*3*u*t+f*3*u*u*n+m*o,R=c*e+l*3*u*r+f*3*u*u*a+m*s,V=i+2*u*(t-i)+x*(n-2*t+i),Q=e+2*u*(r-e)+x*(a-2*r+e),rt=t+2*u*(n-t)+x*(o-2*n+t),st=r+2*u*(a-r)+x*(s-2*a+r),lt=f*i+u*t,Ct=f*e+u*r,At=f*n+u*o,Nt=f*a+u*s,Kt=90-Math.atan2(V-rt,Q-st)*180/Math.PI;return{x:C,y:R,m:{x:V,y:Q},n:{x:rt,y:st},start:{x:lt,y:Ct},end:{x:At,y:Nt},alpha:Kt}},jy=function(i,e,t){var r=lg(i),n=lg(e);if(!Vy(r,n))return t?0:[];for(var a=cg.apply(0,i),o=cg.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},x=t?0:[],m=0;m<s+1;m++){var C=hg.apply(0,i.concat(m/s));f.push({x:C.x,y:C.y,t:m/s})}for(var m=0;m<u+1;m++){var C=hg.apply(0,e.concat(m/u));c.push({x:C.x,y:C.y,t:m/u})}for(var m=0;m<s;m++)for(var R=0;R<u;R++){var V=f[m],Q=f[m+1],rt=c[R],st=c[R+1],lt=Math.abs(Q.x-V.x)<.001?"y":"x",Ct=Math.abs(st.x-rt.x)<.001?"y":"x",At=Yy(V.x,V.y,Q.x,Q.y,rt.x,rt.y,st.x,st.y);if(At){if(l[At.x.toFixed(4)]===At.y.toFixed(4))continue;l[At.x.toFixed(4)]=At.y.toFixed(4);var Nt=V.t+Math.abs((At[lt]-V[lt])/(Q[lt]-V[lt]))*(Q.t-V.t),Kt=rt.t+Math.abs((At[Ct]-rt[Ct])/(st[Ct]-rt[Ct]))*(st.t-rt.t);Nt>=0&&Nt<=1&&Kt>=0&&Kt<=1&&(t?x++:x.push({x:At.x,y:At.y,t1:Nt,t2:Kt}))}}return x},Hy=function(i,e,t){i=path2Curve(i),e=path2Curve(e);for(var r,n,a,o,s,u,f,c,l,x,m=t?0:[],C=0,R=i.length;C<R;C++){var V=i[C];if(V[0]==="M")r=s=V[1],n=u=V[2];else{V[0]==="C"?(l=[r,n].concat(V.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var Q=0,rt=e.length;Q<rt;Q++){var st=e[Q];if(st[0]==="M")a=f=st[1],o=c=st[2];else{st[0]==="C"?(x=[a,o].concat(st.slice(1)),a=x[6],o=x[7]):(x=[a,o,a,o,f,c,f,c],a=f,o=c);var lt=jy(l,x,t);if(t)m+=lt;else{for(var Ct=0,At=lt.length;Ct<At;Ct++)lt[Ct].segment1=C,lt[Ct].segment2=Q,lt[Ct].bez1=l,lt[Ct].bez2=x;m=m.concat(lt)}}}}}return m};function eM(i,e){return Hy(i,e)}function ev(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Qv(i,e){return ev(i)*ev(e)?(i[0]*e[0]+i[1]*e[1])/(ev(i)*ev(e)):1}function vg(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(Qv(i,e))}function Jv(i,e){return i[0]===e[0]&&i[1]===e[1]}function Ky(i,e){var t=e[1],r=e[2],n=(0,p.mod)((0,p.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,x=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,m=l*l/(t*t)+x*x/(r*r);m>1&&(t*=Math.sqrt(m),r*=Math.sqrt(m));var C=t*t*(x*x)+r*r*(l*l),R=C?Math.sqrt((t*t*(r*r)-C)/C):1;a===o&&(R*=-1),isNaN(R)&&(R=0);var V=r?R*t*x/r:0,Q=t?R*-r*l/t:0,rt=(s+f)/2+Math.cos(n)*V-Math.sin(n)*Q,st=(u+c)/2+Math.sin(n)*V+Math.cos(n)*Q,lt=[(l-V)/t,(x-Q)/r],Ct=[(-1*l-V)/t,(-1*x-Q)/r],At=vg([1,0],lt),Nt=vg(lt,Ct);return Qv(lt,Ct)<=-1&&(Nt=Math.PI),Qv(lt,Ct)>=1&&(Nt=0),o===0&&Nt>0&&(Nt=Nt-2*Math.PI),o===1&&Nt<0&&(Nt=Nt+2*Math.PI),{cx:rt,cy:st,rx:Jv(i,[f,c])?0:t,ry:Jv(i,[f,c])?0:r,startAngle:At,endAngle:At+Nt,xRotation:n,arcFlag:a,sweepFlag:o}}function dg(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function gg(i){i=ce(i);for(var e=[],t=null,r=null,n=null,a=0,o=i.length,s=0;s<o;s++){var u=i[s];r=i[s+1];var f=u[0],c={command:f,prePoint:t,params:u,startTangent:null,endTangent:null};switch(f){case"M":n=[u[1],u[2]],a=s;break;case"A":var l=Ky(t,u);c.arcParams=l;break;default:break}if(f==="Z")t=n,r=i[a+1];else{var x=u.length;t=[u[x-2],u[x-1]]}r&&r[0]==="Z"&&(r=i[a],e[a]&&(e[a].prePoint=t)),c.currentPoint=t,e[a]&&Jv(t,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var m=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=m;var C=c.prePoint;if(["L","H","V"].includes(f))c.startTangent=[C[0]-t[0],C[1]-t[1]],c.endTangent=[t[0]-C[0],t[1]-C[1]];else if(f==="Q"){var R=[u[1],u[2]];c.startTangent=[C[0]-R[0],C[1]-R[1]],c.endTangent=[t[0]-R[0],t[1]-R[1]]}else if(f==="T"){var V=e[s-1],R=dg(V.currentPoint,C);V.command==="Q"?(c.command="Q",c.startTangent=[C[0]-R[0],C[1]-R[1]],c.endTangent=[t[0]-R[0],t[1]-R[1]]):(c.command="TL",c.startTangent=[C[0]-t[0],C[1]-t[1]],c.endTangent=[t[0]-C[0],t[1]-C[1]])}else if(f==="C"){var Q=[u[1],u[2]],rt=[u[3],u[4]];c.startTangent=[C[0]-Q[0],C[1]-Q[1]],c.endTangent=[t[0]-rt[0],t[1]-rt[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[Q[0]-rt[0],Q[1]-rt[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[rt[0]-Q[0],rt[1]-Q[1]])}else if(f==="S"){var V=e[s-1],Q=dg(V.currentPoint,C),rt=[u[1],u[2]];V.command==="C"?(c.command="C",c.startTangent=[C[0]-Q[0],C[1]-Q[1]],c.endTangent=[t[0]-rt[0],t[1]-rt[1]]):(c.command="SQ",c.startTangent=[C[0]-rt[0],C[1]-rt[1]],c.endTangent=[t[0]-rt[0],t[1]-rt[1]])}else if(f==="A"){var st=.001,lt=c.arcParams||{},Ct=lt.cx,At=Ct===void 0?0:Ct,Nt=lt.cy,Kt=Nt===void 0?0:Nt,ge=lt.rx,ue=ge===void 0?0:ge,Ae=lt.ry,Ke=Ae===void 0?0:Ae,Gr=lt.sweepFlag,wr=Gr===void 0?0:Gr,Mr=lt.startAngle,vr=Mr===void 0?0:Mr,sn=lt.endAngle,nn=sn===void 0?0:sn;wr===0&&(st*=-1);var mr=ue*Math.cos(vr-st)+At,Dr=Ke*Math.sin(vr-st)+Kt;c.startTangent=[mr-n[0],Dr-n[1]];var qr=ue*Math.cos(vr+nn+st)+At,un=Ke*Math.sin(vr+nn-st)+Kt;c.endTangent=[C[0]-qr,C[1]-un]}e.push(c)}return e}function pg(i){for(var e=[],t=i.length,r=0;r<t-1;r++){var n=i[r],a=i[r+1];e.push({from:{x:n[0],y:n[1]},to:{x:a[0],y:a[1]}})}if(e.length>1){var o=i[0],s=i[t-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function Zy(i,e){var t=!1;return each(i,function(r){if(getLineIntersect(r.from,r.to,e.from,e.to))return t=!0,!1}),t}function yg(i){var e=i.map(function(r){return r[0]}),t=i.map(function(r){return r[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function $y(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function rM(i,e){if(i.length<2||e.length<2)return!1;var t=yg(i),r=yg(e);if(!$y(t,r))return!1;var n=!1;if(each(e,function(u){if(isPointInPolygon(i,u[0],u[1]))return n=!0,!1}),n||(each(i,function(u){if(isPointInPolygon(e,u[0],u[1]))return n=!0,!1}),n))return!0;var a=pg(i),o=pg(e),s=!1;return each(o,function(u){if(Zy(a,u))return s=!0,!1}),s}function qy(i,e){for(var t=[],r=[],n=[],a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,u=o.params,f=o.prePoint,c=void 0;switch(o.command){case"Q":c=_n.box(f[0],f[1],u[1],u[2],u[3],u[4]);break;case"C":c=ia.box(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var l=o.arcParams;c=ss.box(l.cx,l.cy,l.rx,l.ry,l.xRotation,l.startAngle,l.endAngle);break;default:t.push(s[0]),r.push(s[1]);break}c&&(o.box=c,t.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&n.push(o)}t=t.filter(function(Q){return!Number.isNaN(Q)&&Q!==1/0&&Q!==-1/0}),r=r.filter(function(Q){return!Number.isNaN(Q)&&Q!==1/0&&Q!==-1/0});var x=(0,p.min)(t),m=(0,p.min)(r),C=(0,p.max)(t),R=(0,p.max)(r);if(n.length===0)return{x,y:m,width:C-x,height:R-m};for(var a=0;a<n.length;a++){var o=n[a],s=o.currentPoint,V=void 0;s[0]===x?(V=rv(o,e),x=x-V.xExtra):s[0]===C&&(V=rv(o,e),C=C+V.xExtra),s[1]===m?(V=rv(o,e),m=m-V.yExtra):s[1]===R&&(V=rv(o,e),R=R+V.yExtra)}return{x,y:m,width:C-x,height:R-m}}function rv(i,e){var t=i.prePoint,r=i.currentPoint,n=i.nextPoint,a=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2),o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),s=Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2),u=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!u||Math.sin(u)===0||(0,p.isNumberEqual)(u,0))return{xExtra:0,yExtra:0};var f=Math.abs(Math.atan2(n[1]-r[1],n[0]-r[0])),c=Math.abs(Math.atan2(n[0]-r[0],n[1]-r[1]));f=f>Math.PI/2?Math.PI-f:f,c=c>Math.PI/2?Math.PI-c:c;var l={xExtra:Math.cos(u/2-f)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0};return l}function Qy(i){var e=i.attr(),t=e.path,r=e.stroke,n=r?e.lineWidth:0,a=i.get("segments")||gg(t),o=qy(a,n),s=o.x,u=o.y,f=o.width,c=o.height,l={minX:s,minY:u,maxX:s+f,maxY:u+c};return l=gr(i,l),{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}function Jy(i){var e=i.attr(),t=e.x1,r=e.y1,n=e.x2,a=e.y2,o=Math.min(t,n),s=Math.max(t,n),u=Math.min(r,a),f=Math.max(r,a),c={minX:o,maxX:s,minY:u,maxY:f};return c=gr(i,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function tm(i){var e=i.attr(),t=e.x,r=e.y,n=e.rx,a=e.ry;return{x:t-n,y:r-a,width:n*2,height:a*2}}M("rect",$),M("image",$),M("circle",ft),M("marker",ft),M("polyline",Pn),M("polygon",Ga),M("text",Fe),M("path",Qy),M("line",Jy),M("ellipse",tm);var nM="0.5.11",em=function(i){(0,K.__extends)(e,i);function e(t,r){var n=i.call(this,t,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}return e}(vf),td=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},ed=function(e){if((0,p.isArray)(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if((0,p.isNumber)(e))return[e,e,e,e];if((0,p.isString)(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},rm=function(e){var t=new em(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},nm=function(e){if(!e)return!1;for(var t=9,r=[1,0,0,0,1,0,0,0,1],n=0;n<t;n++)if(e[n]!==r[n])return!0;return!1},Df=function(e){return Number.isNaN(Number(e))},mg=function(e){for(var t=1/0,r=-1/0,n=1/0,a=-1/0,o=0;o<e.length;o++){var s=e[o],u=s.getBBox(),f=u.minX,c=u.minY,l=u.maxX,x=u.maxY;f<t&&(t=f),c<n&&(n=c),l>r&&(r=l),x>a&&(a=x)}var m=Math.floor(t),C=Math.floor(n),R=Math.ceil(r)-Math.floor(t),V=Math.ceil(a)-Math.floor(n);return{x:m,y:C,width:R,height:V,minX:t,minY:n,maxX:r,maxY:a}},am=function(e,t,r,n,a){t===void 0&&(t=15),r===void 0&&(r="quadratic"),n===void 0&&(n=void 0),a===void 0&&(a=void 0);for(var o=e.length,s=t*2,u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],f={},c=[],l={},x=0;x<o;x++){var m=e[x],C=m.source,R=m.target,V="".concat(C,"-").concat(R);if(!c[x]){f[V]||(f[V]=[]),c[x]=!0,f[V].push(m);for(var Q=0;Q<o;Q++)if(x!==Q){var rt=e[Q],st=rt.source,lt=rt.target;c[Q]||(C===lt&&R===st?(f[V].push(rt),c[Q]=!0,l["".concat(st,"|").concat(lt,"|").concat(f[V].length-1)]=!0):C===st&&R===lt&&(f[V].push(rt),c[Q]=!0))}}}for(var Ct in f)for(var At=f[Ct],Nt=At.length,Kt=0;Kt<Nt;Kt++){var ge=At[Kt];if(ge.source===ge.target){a&&(ge.type=a),ge.loopCfg={position:u[Kt%8],dist:Math.floor(Kt/8)*20+50};continue}if(Nt===1&&n&&ge.source!==ge.target){ge.type=n;continue}ge.type=r;var ue=(Kt%2===0?1:-1)*(l["".concat(ge.source,"|").concat(ge.target,"|").concat(Kt)]?-1:1);Nt%2===1?ge.curveOffset=ue*Math.ceil(Kt/2)*s:ge.curveOffset=ue*(Math.floor(Kt/2)*s+t)}return e},xg=z(31278),im=function(){function i(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return i.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,r=this.graph.get("width"),n=t.get("height");return{x:(r-e[1]-e[3])/2+e[3],y:(n-e[0]-e[2])/2+e[0]}},i.prototype.fitCenter=function(e,t){var r=this.graph,n=r.get("group"),a,o=r.getNodes();if(o.length>r.get("optimizeThreshold")){var s=1/0,u=1/0,f=-1/0,c=-1/0;o.forEach(function(lt){var Ct=lt.getModel(),At=Ct.x,Nt=Ct.y;s>At&&(s=At),u>Nt&&(u=Nt),f<At&&(f=At),c<Nt&&(c=Nt)});var l=n.getMatrix()||[1,0,0,0,1,0,0,0,1],x=Ii({x:s,y:u},l),m=x.x,C=x.y,R=Ii({x:f,y:c},l),V=R.x,Q=R.y;a={minX:m,maxX:V,minY:C,maxY:Q,width:V-m,height:Q-C,x:m,y:C}}else a=n.getCanvasBBox();if(!(a.width===0||a.height===0)){var rt=this.getViewCenter(),st={x:a.x+a.width/2,y:a.y+a.height/2};r.translate(rt.x-st.x,rt.y-st.y,e,t)}},i.prototype.animatedFitView=function(e,t,r,n,a,o,s,u){var f=this.graph;r=r||{duration:500,easing:"easeCubic"};var c=[1,0,0,0,1,0,0,0,1],l=n.x+a.x-o.x-n.minX,x=n.y+a.y-o.y-n.minY;if(!(Df(l)||Df(x))){var m=(0,xg.vs)(c,[["t",l,x]]);if(!u){var C=Oe({animateCfg:r,callback:function(){f.emit("viewportchange",{action:"translate",matrix:m})}});e.animate(function(lt){return{matrix:We(t,m,lt)}},C);return}var R=f.get("minZoom"),V=f.get("maxZoom"),Q=s;R&&s<R?(Q=R,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):V&&s>V&&(Q=V,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var rt=(0,xg.vs)(m,[["t",-a.x,-a.y],["s",Q,Q],["t",a.x,a.y]]),st=Oe({animateCfg:r,callback:function(){e.setMatrix(rt),f.emit("viewportchange",{action:"translate",matrix:m}),f.emit("viewportchange",{action:"zoom",matrix:rt})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(lt){return{matrix:We(t,rt,lt)}},st)}},i.prototype.fitView=function(e,t){var r=this.graph,n=this.getFormatPadding(),a=r.get("width"),o=r.get("height"),s=r.get("group"),u=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var f,c=r.getNodes();if(c.length>r.get("optimizeThreshold")){var l=1/0,x=1/0,m=-1/0,C=-1/0;c.forEach(function(At){var Nt=At.getModel(),Kt=Nt.x,ge=Nt.y;l>Kt&&(l=Kt),x>ge&&(x=ge),m<Kt&&(m=Kt),C<ge&&(C=ge)}),f={minX:l,maxX:m,minY:x,maxY:C,width:m-l,height:C-x,x:l,y:x}}else f=s.getCanvasBBox();if(!(f.width===0||f.height===0)){var R=this.getViewCenter(),V={x:f.x+f.width/2,y:f.y+f.height/2},Q=(a-n[1]-n[3])/f.width,rt=(o-n[0]-n[2])/f.height,st=Q;if(Q>rt&&(st=rt),e)this.animatedFitView(s,u,t,f,R,V,st,!0);else{var lt=R.x-V.x,Ct=R.y-V.y;if(Df(lt)||Df(Ct))return;r.translate(lt,Ct),r.zoom(st,R)||console.warn("zoom failed, ratio out of range, ratio: %f",st)}}},i.prototype.fitViewByRules=function(e,t,r){var n=e.onlyOutOfViewPort,a=n===void 0?!1:n,o=e.direction,s=o===void 0?"both":o,u=e.ratioRule,f=u===void 0?"min":u,c=this.graph,l=this.getFormatPadding(),x=c.get("width"),m=c.get("height"),C=c.get("group"),R=C.getMatrix()||[1,0,0,0,1,0,0,0,1];C.resetMatrix();var V,Q=c.getNodes();if(Q.length>c.get("optimizeThreshold")){var rt=1/0,st=1/0,lt=-1/0,Ct=-1/0;Q.forEach(function(wr){var Mr=wr.getModel(),vr=Mr.x,sn=Mr.y;rt>vr&&(rt=vr),st>sn&&(st=sn),lt<vr&&(lt=vr),Ct<sn&&(Ct=sn)}),V={minX:rt,maxX:lt,minY:st,maxY:Ct,width:lt-rt,height:Ct-st,x:rt,y:st}}else V=C.getCanvasBBox();if(!(V.width===0||V.height===0)){var At=this.getViewCenter(),Nt={x:V.x+V.width/2,y:V.y+V.height/2},Kt=(x-l[1]-l[3])/V.width,ge=(m-l[0]-l[2])/V.height,ue;if(s==="x"?ue=Kt:s==="y"?ue=ge:ue=f==="max"?Math.max(Kt,ge):Math.min(Kt,ge),a&&(ue=ue<1?ue:1),t)this.animatedFitView(C,R,r,V,At,Nt,ue,!0);else{var Ae=c.getZoom(),Ke=Ae*ue,Gr=c.get("minZoom");Ke<Gr&&(Ke=Gr,console.warn("fitview failed, ratio out of range, ratio: %f",ue,"graph minzoom has been used instead")),c.translate(At.x-Nt.x,At.y-Nt.y),c.zoomTo(Ke,At)}}},i.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return ed(e)},i.prototype.focusPoint=function(e,t,r){var n=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(o.x-e.x)*s[0],f=(o.y-e.y)*s[4],c=0,l=0,x=0,m=0;this.graph.get("canvas").animate(function(C){x=u*C,m=f*C,n.graph.translate(x-c,m-l),c=x,l=m},(0,K.__assign)({},r))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},i.prototype.getPointByCanvas=function(e,t){var r=this.graph.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=yo({x:e,y:t},r);return n},i.prototype.getPointByClient=function(e,t){var r=this.graph.get("canvas"),n=r.getPointByClient(e,t);return this.getPointByCanvas(n.x,n.y)},i.prototype.getClientByPoint=function(e,t){var r=this.graph.get("canvas"),n=this.getCanvasByPoint(e,t),a=r.getClientByPoint(n.x,n.y);return{x:a.x,y:a.y}},i.prototype.getCanvasByPoint=function(e,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),Ii({x:e,y:t},r)},i.prototype.focus=function(e,t,r){if((0,p.isString)(e)&&(e=this.graph.findById(e)),e){var n=0,a=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(n=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(n=o?o[6]:s[6],a=o?o[7]:s[7])}else{var u=e.get("group"),f=u.getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),n=f[6],a=f[7]}this.focusPoint({x:n,y:a},t,r)}},i.prototype.focusItems=function(e,t,r,n){if(e.length){var a=this.graph,o=this.getFormatPadding(),s=a.get("width"),u=a.get("height"),f=a.get("group"),c=f.getMatrix()||[1,0,0,0,1,0,0,0,1];f.resetMatrix();for(var l={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},x=0,m=e;x<m.length;x++){var C=m[x],R=C.getBBox();R.minX<l.minX&&(l.minX=R.minX),R.minY<l.minY&&(l.minY=R.minY),R.maxX>l.maxX&&(l.maxX=R.maxX),R.maxY>l.maxY&&(l.maxY=R.maxY)}if(l.x=l.minX,l.y=l.minY,l.width=l.maxX-l.minX,l.height=l.maxY-l.minY,!(l.width===0||l.height===0)){var V=this.getViewCenter(),Q={x:l.x+l.width/2,y:l.y+l.height/2},rt=(s-o[1]-o[3])/l.width,st=(u-o[0]-o[2])/l.height,lt=rt;rt>st&&(lt=st),r?this.animatedFitView(f,c,n,l,V,Q,lt,t):(a.translate(V.x-Q.x,V.y-Q.y),t&&!a.zoom(lt,V)&&console.warn("zoom failed, ratio out of range, ratio: %f",lt))}}},i.prototype.changeSize=function(e,t){var r=this.graph;if(!(0,p.isNumber)(e)||!(0,p.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:e,height:t});var n=r.get("canvas");n.changeSize(e,t);var a=r.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!1},i}(),om=im;function rd(i){"@babel/helpers - typeof";return rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rd(i)}function bg(i){if(typeof i!="string")return i;var e=function(Nt){if(typeof Nt!="string")return Nt;try{return JSON.parse(Nt.trim())}catch(Kt){return Nt.trim()}},t=e(i);if(typeof t!="string")return t;for(var r=function(Nt){return Nt[Nt.length-1]},n=i.trim(),a=[],o=[],s=function(){for(var Nt=[],Kt=0;Kt<arguments.length;Kt++)Nt[Kt]=arguments[Kt];return Nt.some(function(ge){return r(o)===ge})},u=function(){return r(a)},f=null,c=0,l="";c<n.length;){var x=n[c],m=s('"',"'");if(!m&&!x.trim()){c+=1;continue}var C=n[c-1]==="\\",R=s("}"),V=s("]"),Q=s(","),rt=u();if(m)if(r(o)===x&&!C){o.pop();var st=e(l);rt.push(st),f=st,l=""}else l+=x;else if(V&&x===",")l&&(rt.push(e(l)),l="");else if(R&&x===":")o.push(","),l&&(rt.push(l),l="");else if(Q&&x===",")l&&(rt.push(e(l)),l=""),o.pop();else if(x==="}"&&(R||Q)){l&&(rt.push(e(l)),l=""),Q&&o.pop();for(var lt={},Ct=1;Ct<rt.length;Ct+=2)lt[rt[Ct-1]]=rt[Ct];a.pop(),a.length&&r(a).push(lt),o.pop(),f=lt}else x==="]"&&V?(l&&(rt.push(e(l)),l=""),a.pop(),a.length&&r(a).push(rt),o.pop(),f=rt):x==="{"?(a.push([]),o.push("}")):x==="["?(a.push([]),o.push("]")):x==='"'?o.push('"'):x==="'"?o.push("'"):l+=x;c+=1}return f||l}var sm=function(e){return e.split("-").reduce(function(t,r){return t+r.charAt(0).toUpperCase()+r.slice(1)})},um=function(e){return function(t){for(var r=e.length,n=[],a=0,o="";a<r;)if(e[a]==="{"&&e[a+1]==="{")n.push(o),o="",a+=2;else if(e[a]==="}"&&e[a+1]==="}"){if(n.length){var s=n.pop();o=(0,p.get)(t,o,s.endsWith("=")?'"{'.concat(o,'}"'):o),n.push(s+o)}a+=2,o=""}else o+=e[a],a+=1;return n.push(o),n.map(function(u,f){return n[f-1]&&n[f-1].endsWith("=")?'"{'.concat(u,'}"'):u}).join("")}};function Eg(i,e){var t={},r=i.getAttributeNames&&i.getAttributeNames()||[],n=i.children&&Array.from(i.children).map(function(s){return Eg(s,e)}),a={},o=i.tagName?i.tagName.toLowerCase():"group";return o==="text"&&(t.text=i.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(r).forEach(function(s){var u=sm(s),f=i.getAttribute(s);try{if(u==="style"||u==="attrs"){var c=bg(f);t=(0,K.__assign)((0,K.__assign)({},t),c)}else a[u]=bg(f)}catch(l){if(u==="style")throw l;a[u]=f}}),a.attrs=t,e&&e.style&&a.name&&rd(e.style[a.name])==="object"&&(a.attrs=(0,K.__assign)((0,K.__assign)({},a.attrs),e.style[a.name])),e&&e.style&&a.keyshape&&(a.attrs=(0,K.__assign)((0,K.__assign)({},a.attrs),e.style)),n.length&&(a.children=n),a}function fm(i,e,t){var r=i.attrs,n=r===void 0?{}:r,a={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0},o,s;switch(i.type){case"maker":case"circle":n.r&&(s=2*n.r,o=2*n.r);break;case"text":n.text&&(s=dt(n.text,n.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,i.attrs=(0,K.__assign)({fontSize:12,fill:"#000"},n));break;default:n.width&&(s=n.width),n.height&&(o=n.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),n.marginTop&&(a.y+=n.marginTop),n.marginLeft&&(a.x+=n.marginLeft),a}function wg(i,e){var t;e===void 0&&(e={x:0,y:0});var r=(0,K.__assign)({x:0,y:0,width:0,height:0},e);if(!((t=i.children)===null||t===void 0)&&t.length){var n=i.attrs,a=n===void 0?{}:n,o=a.marginTop,s=(0,K.__assign)({},e);o&&(s.y+=o);for(var u=0;u<i.children.length;u++){i.children[u].attrs.key="".concat(a.key||"root"," -").concat(u," ");var f=wg(i.children[u],s);if(f.bbox){var c=f.bbox;f.attrs.next==="inline"?s.x+=f.bbox.width:s.y+=f.bbox.height,c.width+c.x>r.width&&(r.width=c.width+c.x),c.height+c.y>r.height&&(r.height=c.height+c.y)}}}return i.bbox=fm(i,e,r),i.attrs=(0,K.__assign)((0,K.__assign)({},i.attrs),i.bbox),i}function _g(i,e){var t,r,n,a,o=(i||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&i&&(i.attrs.key=s),!i&&e)return{action:"delete",val:e,type:o,key:s};if(i&&!e)return{action:"add",val:i,type:o};if(!i&&!e)return{action:"same",type:o};var u=[];if(((t=i.children)===null||t===void 0?void 0:t.length)>0||((r=e.children)===null||r===void 0?void 0:r.length)>0)for(var f=Math.max((n=i.children)===null||n===void 0?void 0:n.length,(a=e.children)===null||a===void 0?void 0:a.length),c=e.children||[],l=i.children||[],x=0;x<f;x+=1)u.push(_g(l[x],c[x]));var m=Object.keys(e.attrs),C=Object.keys(i.attrs);return e.type!==i.type?{action:"restructure",nowTarget:i,formerTarget:e,key:s,children:u}:m.filter(function(R){return R!=="children"}).some(function(R){return i.attrs[R]!==e.attrs[R]||!C.includes(R)})?{action:"change",val:i,children:u,type:o,key:s}:{action:"same",children:u,type:o,key:s}}function Sg(i){var e={},t=function(n){var a=typeof i=="function"?i(n):i,o=um(a)(n),s=document.createElement("div");s.innerHTML=o;var u=s.children[0],f=wg(Eg(u,n));return s.remove(),f};return{draw:function(n,a){var o=t(n),s=a,u=function f(c){var l=c.attrs,x=l===void 0?{}:l,m=c.bbox,C=c.type,R=c.children,V=(0,K.__rest)(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var Q=a.addShape(c.type,(0,K.__assign)({attrs:x,origin:{bbox:m,type:C,children:R}},V));c.keyshape&&(s=Q)}c.children&&c.children.forEach(function(rt){return f(rt)})};return u(o),e[n.id]=[o],s},update:function(n,a){e[n.id]||(e[n.id]=[]);var o=a.getContainer(),s=o.get("children"),u=t(n),f=e[n.id].pop(),c=_g(u,f),l=function C(R){var V;R.type!=="group"&&o.addShape(R.type,{attrs:R.attrs}),!((V=R.children)===null||V===void 0)&&V.length&&R.children.map(function(Q){return C(Q)})},x=function C(R){var V,Q=s.find(function(rt){return rt.attrs.key===R.attrs.key});Q&&o.removeChild(Q),!((V=R.children)===null||V===void 0)&&V.length&&R.children.map(function(rt){return C(rt)})},m=function C(R){var V=R.key;if(R.type!=="group"){var Q=s.find(function(st){return st.attrs.key===V});switch(R.action){case"change":if(Q){var rt=R.val.keyshape?a.getOriginStyle():{};Q.attr((0,K.__assign)((0,K.__assign)({},rt),R.val.attrs))}break;case"add":l(R.val);break;case"delete":x(R.val);break;case"restructure":x(R.formerTarget),l(R.nowTarget);break;default:break}}R.children&&R.children.forEach(function(st){return C(st)})};m(c),e[n.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var nd={};function Mg(i){return nd[i]||(nd[i]=(0,p.upperFirst)(i)),nd[i]}var cm={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this,r=t[e]||t[t.defaultShapeType]||t["simple-circle"];return r},draw:function(e,t,r){var n=this.getShape(e);r.shapeMap={};var a=n.draw(t,r);return n.afterDraw&&n.afterDraw(t,r,a),a},baseUpdate:function(e,t,r,n){var a,o,s=this.getShape(e);s.update&&(s.mergeStyle=(a=s.getOptions)===null||a===void 0?void 0:a.call(s,t,n),(o=s.update)===null||o===void 0||o.call(s,t,r,n)),s.afterUpdate&&s.afterUpdate(t,r)},setState:function(e,t,r,n){var a=this.getShape(e);a.setState(t,r,n)},shouldUpdate:function(e){var t=this.getShape(e);return!!t.update},getControlPoints:function(e,t){var r=this.getShape(e);return r.getControlPoints(t)},getAnchorPoints:function(e,t){var r=this.getShape(e);return r.getAnchorPoints(t)}},ad={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints,r=e.anchorPoints||t;return r}},nv=function(){function i(){}return i.registerFactory=function(e,t){var r=Mg(e),n=cm,a=(0,K.__assign)((0,K.__assign)({},n),t);return i[r]=a,a.className=r,a},i.getFactory=function(e){var t=Mg(e);return i[t]},i.registerNode=function(e,t,r){var n=i.Node,a;if(typeof t=="string"||typeof t=="function"){var o=Sg(t);a=(0,K.__assign)((0,K.__assign)({},n.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=Sg(s);a=(0,K.__assign)((0,K.__assign)((0,K.__assign)({},n.getShape("single-node")),o),t)}else{n.getShape(r);var u=r?n.getShape(r):ad;a=(0,K.__assign)((0,K.__assign)({},u),t)}return a.type=e,a.itemType="node",n[e]=a,a},i.registerEdge=function(e,t,r){var n=i.Edge,a=r?n.getShape(r):ad,o=(0,K.__assign)((0,K.__assign)({},a),t);return o.type=e,o.itemType="edge",n[e]=o,o},i.registerCombo=function(e,t,r){var n=i.Combo,a=r?n.getShape(r):ad,o=(0,K.__assign)((0,K.__assign)({},a),t);return o.type=e,o.itemType="combo",n[e]=o,o},i}(),Ms=nv;nv.registerFactory("node",{defaultShapeType:"circle"}),nv.registerFactory("edge",{defaultShapeType:"line"}),nv.registerFactory("combo",{defaultShapeType:"circle"});var id="bboxCache",od="bboxCanvasCache",aM=null,lm=function(){function i(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var r=this.get("model"),n=r.id,a=this.get("type");typeof n=="undefined"?n=td(a):typeof n!="string"&&(n=String(n)),this.get("model").id=n,this.set("id",n);var o=e.group;o&&(o.set("item",this),o.set("id",n)),this.init(),this.draw();var s=r.shape||r.type||(a==="edge"?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var f=u[s].options;if(f&&f.stateStyles){var c=this.get("styles")||r.stateStyles;c=(0,p.deepMix)({},f.stateStyles,c),this.set("styles",c)}}}return i.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=To(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=To(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),r=e.get("group"),n=e.get("model");r.clear();var a=n.visible;if(a!==void 0&&!a&&e.changeVisibility(a),!!t){e.updatePosition(n);var o=e.getShapeCfg(n),s=o.type,u=t.draw(s,o,r);u&&(e.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},i.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),r=this.getKeyShape(),n=this,a=r.get("name");if(this.get("originStyle")){var m=this.get("originStyle");a&&!m[a]&&(m[a]={});for(var C=this.getCurrentStatesStyle(),R=function(Q){var rt=t[Q],st=rt.get("name"),lt=rt.attr();if(st&&st!==a){var Ct=C[st];m[st]||(m[st]={}),Ct?Object.keys(lt).forEach(function(Kt){var ge=lt[Kt];ge!==Ct[Kt]&&(m[st][Kt]=ge)}):m[st]=rt.get("type")!=="image"?(0,p.clone)(lt):n.getShapeStyleByName(st)}else{var At=rt.attr(),Nt={};Object.keys(C).forEach(function(Kt){var ge=C[Kt];(Kt===a||!(0,p.isPlainObject)(ge))&&(Nt[Kt]=ge)}),Object.keys(At).forEach(function(Kt){var ge=At[Kt];Nt[Kt]!==ge&&(a?m[a][Kt]=ge:m[Kt]=ge)})}},s=0;s<t.length;s++)R(s);delete m.path,delete m.matrix,delete m.x,delete m.y,m[a]&&(delete m[a].x,delete m[a].y,delete m[a].matrix,delete m[a].path),n.set("originStyle",m)}else{for(var o={},s=0;s<t.length;s++){var u=t[s],f=u.get("type"),c=u.get("name");if(c&&c!==a)o[c]=f!=="image"?(0,p.clone)(u.attr()):n.getShapeStyleByName(c),f==="text"&&o[c]&&(delete o[c].x,delete o[c].y,delete o[c].matrix);else{var l=n.getShapeStyleByName();if(delete l.path,delete l.matrix,!a)Object.assign(o,l);else if(c)o[a]=l;else{var x=td("shape");u.set("name",x),e.shapeMap[x]=u,o[x]=f!=="image"?(0,p.clone)(u.attr()):n.getShapeStyleByName(c)}}}n.set("originStyle",o)}},i.prototype.restoreStates=function(e,t){var r=this,n=r.get("states");(0,p.each)(n,function(a){e.setState(t,a,!0,r)})},i.prototype.init=function(){var e=Ms.getFactory(this.get("type"));this.set("shapeFactory",e)},i.prototype.get=function(e){return this._cfg[e]},i.prototype.set=function(e,t){(0,p.isPlainObject)(e)?this._cfg=(0,K.__assign)((0,K.__assign)({},this._cfg),e):this._cfg[e]=t},i.prototype.getDefaultCfg=function(){return{}},i.prototype.clearCache=function(){this.set(id,null),this.set(od,null)},i.prototype.beforeDraw=function(){},i.prototype.afterDraw=function(){},i.prototype.afterUpdate=function(){},i.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},i.prototype.getShapeStyleByName=function(e){var t=this.get("group"),r;if(e?r=t.shapeMap[e]||t.find(function(a){return a.get("name")===e}):r=this.getKeyShape(),r){var n={};return(0,p.each)(r.attr(),function(a,o){(o!=="img"||(0,p.isString)(a))&&(n[o]=a)}),n}return{}},i.prototype.getShapeCfg=function(e,t){var r=this.get("styles");if(r){var n=e;return n.style=(0,K.__assign)((0,K.__assign)({},r),e.style),n}return e},i.prototype.getStateStyle=function(e){var t=this.get("styles"),r=t&&t[e];return r},i.prototype.getOriginStyle=function(){return this.get("originStyle")},i.prototype.getCurrentStatesStyle=function(){var e=this,t={},r=e.getStates();return!r||!r.length?this.get("originStyle"):((0,p.each)(e.getStates(),function(n){t=Object.assign(t,e.getStateStyle(n))}),t)},i.prototype.setState=function(e,t){var r=this.get("states"),n=this.get("shapeFactory"),a=e,o=e;(0,p.isString)(t)&&(a="".concat(e,":").concat(t),o="".concat(e,":"));var s=r;if((0,p.isBoolean)(t)){var u=r.indexOf(o);if(t){if(u>-1)return;r.push(a)}else u>-1&&r.splice(u,1)}else if((0,p.isString)(t)){var f=r.filter(function(x){return x.includes(o)});f.length>0&&this.clearStates(f),s=s.filter(function(x){return!x.includes(o)}),s.push(a),this.set("states",s)}if(n){var c=this.get("model"),l=c.type;n.setState(l,e,t,this)}},i.prototype.clearStates=function(e){var t=this,r=t.getStates(),n=t.get("shapeFactory"),a=t.get("model"),o=a.type;e||(e=r),(0,p.isString)(e)&&(e=[e]);var s=r.filter(function(u){return e.indexOf(u)===-1});t.set("states",s),e.forEach(function(u){n.setState(o,u,!1,t)})},i.prototype.setOptimize=function(e){this.optimize=e},i.prototype.getContainer=function(){return this.get("group")},i.prototype.getKeyShape=function(){return this.get("keyShape")},i.prototype.getModel=function(){return this.get("model")},i.prototype.getType=function(){return this.get("type")},i.prototype.getID=function(){return this.get("id")},i.prototype.isItem=function(){return!0},i.prototype.getStates=function(){return this.get("states")},i.prototype.hasState=function(e){var t=this.getStates();return t.indexOf(e)>=0},i.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},i.prototype.getUpdateType=function(e){},i.prototype.update=function(e,t){t===void 0&&(t=void 0);var r=this.get("model");if(t==="move")this.updatePosition(e);else{var n=r.visible,a=e.visible;n!==a&&a!==void 0&&this.changeVisibility(a);var o={x:r.x,y:r.y};e.x=isNaN(+e.x)?r.x:+e.x,e.y=isNaN(+e.y)?r.y:+e.y;var s=this.get("styles");if(e.stateStyles){var u=e.stateStyles;(0,p.mix)(s,u),delete e.stateStyles}Object.assign(r,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},i.prototype.updateShape=function(e){var t=this.get("shapeFactory"),r=this.get("model"),n=r.type;if(t.shouldUpdate(n)&&n===this.get("currentShape")){var a=this.getShapeCfg(r,e);t.baseUpdate(n,a,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,n)},i.prototype.updatePosition=function(e){var t=this.get("model"),r=isNaN(+e.x)?+t.x:+e.x,n=isNaN(+e.y)?+t.y:+e.y,a=this.get("group");if(isNaN(r)||isNaN(n))return!1;t.x=r,t.y=n;var o=a.getMatrix();return o&&o[6]===r&&o[7]===n?!1:(a.resetMatrix(),Xo(a,{x:r,y:n}),this.clearCache(),!0)},i.prototype.getBBox=function(){var e=this.get(id);return e||(e=this.calculateBBox(),this.set(id,e)),e},i.prototype.getCanvasBBox=function(){var e=this.get(od);return e||(e=this.calculateCanvasBBox(),this.set(od,e)),e},i.prototype.toFront=function(){var e=this.get("group");e.toFront()},i.prototype.toBack=function(){var e=this.get("group");e.toBack()},i.prototype.show=function(){this.changeVisibility(!0)},i.prototype.hide=function(){this.changeVisibility(!1)},i.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},i.prototype.isVisible=function(){return this.get("visible")},i.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},i.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},i}(),Cg=lm,av={source:"start",target:"end"},Nf="Node",nh="Point",hm="Anchor",vm=function(i){(0,K.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,r){var n=av[t]+nh,a=t+Nf,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),(0,p.isPlainObject)(r)?(this.set(n,r),this.set(a,null)):r&&(r.addEdge(this),this.set(a,r),this.set(n,null))},e.prototype.getLinkPoint=function(t,r,n){var a=av[t]+nh,o=t+Nf,s=this.get(a);if(!s){var u=this.get(o),f=t+hm,c=this.getPrePoint(t,n),l=r[f];(0,p.isNil)(l)||(s=u.getLinkPointByAnchor(l)),s=s||u.getLinkPoint(c),(0,p.isNil)(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(t,r){if(r&&r.length){var n=t==="source"?0:r.length-1;return r[n]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},e.prototype.getEndPoint=function(t){var r=t+Nf,n=av[t]+nh,a=this.get(r);return a&&!a.destroyed?a.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var r=this.getEndPoint("source"),n=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.type;return a.getControlPoints(o,{startPoint:r,endPoint:n})},e.prototype.getEndCenter=function(t){var r=t+Nf,n=av[t]+nh,a=this.get(r);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(n)},e.prototype.init=function(){i.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t,r){var n=this,a=n.get("linkCenter"),o=r!=null&&r.includes("move")?t:i.prototype.getShapeCfg.call(this,t);if(a)o.startPoint=n.getEndCenter("source"),o.endPoint=n.getEndCenter("target");else{var s=o.controlPoints||n.getControlPointsByCenter(o);o.startPoint=n.getLinkPoint("source",t,s),o.endPoint=n.getLinkPoint("target",t,s)}return o.sourceNode=n.get("sourceNode"),o.targetNode=n.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),r=this.get("source".concat(Nf)),n=this.get("target".concat(Nf));return r?delete t["source".concat(Nf)]:t.source=this.get("start".concat(nh)),n?delete t["target".concat(Nf)]:t.target=this.get("end".concat(nh)),!(0,p.isString)(t.source)&&!(0,p.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,p.isString)(t.target)&&!(0,p.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,r){r===void 0&&(r=void 0);var n=this.get("model"),a=n.visible,o=t.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("source"),u=this.get("target");if(!(!s||s.destroyed||!u||u.destroyed)){var f=this.get("styles");if(t.stateStyles){var c=t.stateStyles;(0,p.mix)(f,c),delete t.stateStyles}Object.assign(n,t),this.updateShape(r),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var t=this.get("source".concat(Nf)),r=this.get("target".concat(Nf));t&&!t.destroyed&&t.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),i.prototype.destroy.call(this)},e}(Cg),Ag=vm,sd="anchorPointsCache",dm="bboxCache",gm=function(i){(0,K.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(t,r){for(var n=0,a=t[0],o=ts(t[0],r),s=0;s<t.length;s++){var u=t[s],f=ts(u,r);f<o&&(a=u,o=f,n=s)}return a.anchorIndex=n,a},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("source")===t})},e.prototype.getNeighbors=function(t){var r=this,n=this.get("edges");if(t==="target"){var a=function(f){return f.getSource()===r};return n.filter(a).map(function(u){return u.getTarget()})}if(t==="source"){var o=function(f){return f.getTarget()===r};return n.filter(o).map(function(u){return u.getSource()})}var s=function(f){return f.getSource()===r?f.getTarget():f.getSource()};return n.map(s)},e.prototype.getLinkPointByAnchor=function(t){var r=this.getAnchorPoints();return r[t]},e.prototype.getLinkPoint=function(t){var r=this.get("keyShape"),n=r.get("type"),a=this.get("type"),o,s,u=this.getBBox();a==="combo"?(o=u.centerX||(u.maxX+u.minX)/2,s=u.centerY||(u.maxY+u.minY)/2):(o=u.centerX,s=u.centerY);var f=this.getAnchorPoints(),c;switch(n){case"circle":c=Hi({x:o,y:s,r:u.width/2},t);break;case"ellipse":c=So({x:o,y:s,rx:u.width/2,ry:u.height/2},t);break;default:c=Es(u,t)}var l=c;return f.length&&(l||(l=t),l=this.getNearestPoint(f,l)),l||(l={x:o,y:s}),l},e.prototype.getAnchorPoints=function(){var t=this.get(sd);if(!t){t=[];var r=this.get("shapeFactory"),n=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,u=r.getAnchorPoints(s,o)||[];(0,p.each)(u,function(f,c){var l={x:n.minX+f[0]*n.width,y:n.minY+f[1]*n.height,anchorIndex:c};t.push(l)}),this.set(sd,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var r=this.getEdges(),n=r.indexOf(t);n>-1&&r.splice(n,1)},e.prototype.clearCache=function(){this.set(dm,null),this.set(sd,null)},e.prototype.getUpdateType=function(t){var r,n,a,o,s;if(t){var u=!(0,p.isNil)(t.x),f=!(0,p.isNil)(t.y),c=Object.keys(t);if(c.length===1&&(u||f)||c.length===2&&u&&f)return"move";if((0,p.isNumber)(t.x)||(0,p.isNumber)(t.y)||t.type||t.anchorPoints||t.size||t!=null&&t.style&&(!((r=t==null?void 0:t.style)===null||r===void 0)&&r.r||!((n=t==null?void 0:t.style)===null||n===void 0)&&n.width||!((a=t==null?void 0:t.style)===null||a===void 0)&&a.height||!((o=t==null?void 0:t.style)===null||o===void 0)&&o.rx||!((s=t==null?void 0:t.style)===null||s===void 0)&&s.ry))return"bbox|label";var l=c.includes("label")||c.includes("labelCfg");return l?"style|label":"style"}},e.prototype.setState=function(t,r){var n=this;if(this.optimize){i.prototype.setState.call(this,t,r);return}this.runWithBBoxAffected(function(){return i.prototype.setState.call(n,t,r)})},e.prototype.clearStates=function(t){var r=this;if(this.optimize){i.prototype.clearStates.call(this,t);return}this.runWithBBoxAffected(function(){return i.prototype.clearStates.call(r,t)})},e.prototype.runWithBBoxAffected=function(t){var r=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),a={};Object.keys(this.getKeyShape().attr()).forEach(function(f){r.includes(f)&&(a[f]=n[f])}),t();for(var o=this.getKeyShape().attr(),s=0;s<r.length;s++){var u=r[s];if(o[u]!==a[u]){this.clearCache(),this.getEdges().forEach(function(f){return f.refresh()});break}}},e}(Cg),ud=gm,Tg="bboxCache",Ig="bboxCanvasCache",iv="sizeCache",Og="anchorPointsCache",pm=function(i){(0,K.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var r=this.get("styles"),n=this.get("bbox");if(r&&n){var a=t,o=(0,p.isNumber)(t.size)?[t.size,t.size]:t.size,s=(0,p.isNumber)(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,u=o||s||Fn.defaultCombo.size,f={r:(Math.max(n.width,n.height)||Math.max(u[0],u[1]))/2,width:n.width||u[0],height:n.height||u[1]};a.style=(0,K.__assign)((0,K.__assign)((0,K.__assign)({},r),t.style),f);var c=t.padding||Fn.defaultCombo.padding;return(0,p.isNumber)(c)?(f.r+=c,f.width+=c*2,f.height+=c*2):(f.r=f.r+Math.max.apply(Math,c),f.width+=c[1]+c[3]||c[1]*2,f.height+=c[0]+c[2]||c[0]*2),this.set(iv,f),a}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),r=this.get("group"),n=this.get(Tg)||{},a=n.x,o=n.x,s=this.get(iv),u=To(t,r);if(u.centerX=(u.minX+u.maxX)/2,u.centerY=(u.minY+u.maxY)/2,s){s.width=Math.max(s.width,u.width),s.height=Math.max(s.height,u.height),this.set(iv,s);var f=t.get("type");f==="circle"?(u.width=s.r*2,u.height=s.r*2):(u.width=s.width,u.height=s.height),u.minX=u.centerX-u.width/2,u.minY=u.centerY-u.height/2,u.maxX=u.centerX+u.width/2,u.maxY=u.centerY+u.height/2}else u.width=u.maxX-u.minX,u.height=u.maxY-u.minY,u.centerX=(u.minX+u.maxX)/2,u.centerY=(u.minY+u.maxY)/2;return u.x=u.minX,u.y=u.minY,(u.x!==a||u.y!==o)&&this.set(Og,null),u}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.addNode(t);break;case"combo":r.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var r=this;return r.get("combos").push(t),!0},e.prototype.addNode=function(t){var r=this;return r.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.removeNode(t);break;case"combo":r.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var r=this.getCombos(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.removeNode=function(t){if(t){var r=this.getNodes(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){this.set(Ig,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(Tg,null),this.set(Ig,null),this.set(Og,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),r=this.get("group");t&&r.stopAnimate(),r.shapeMap={},this.clearCache(),this.set(iv,null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},e}(ud),Lg=pm,ov="node",sv="edge",Dg="vedge",Ch="combo",ym="default",Ng="Mapper",sc="stateStyles",mm=function(){function i(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,p.throttle)(function(r){var n=t.graph;if(!(!n||n.get("destroyed"))){var a=t.edgeToBeUpdateMap;if(a){var o=Object.values(a);o.length&&(o.forEach(function(s){var u=s.edge;if(!(!u||u.destroyed)){var f=u.getSource(),c=u.getTarget();!f||f.destroyed||!c||c.destroyed||u.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return i.prototype.addItem=function(e,t){var r=this.graph,n=e===Dg?sv:e,a=r.get("".concat(n,"Group"))||r.get("group"),o=(0,p.upperFirst)(n),s=null,u=r.get(n+(0,p.upperFirst)(sc))||{},f=r.get(ym+o);t[sc]&&(u=t[sc]),f&&(0,p.each)(f,function(At,Nt){(0,p.isObject)(At)&&!(0,p.isArray)(At)?t[Nt]=(0,p.deepMix)({},At,t[Nt]):(0,p.isArray)(At)?t[Nt]=t[Nt]||(0,p.clone)(f[Nt]):t[Nt]=t[Nt]||f[Nt]});var c=r.get(n+Ng);if(c){var l=c(t);l[sc]&&(u=l[sc],delete l[sc]),(0,p.each)(l,function(At,Nt){(0,p.isObject)(At)&&!(0,p.isArray)(At)?t[Nt]=(0,p.deepMix)({},t[Nt],At):t[Nt]=l[Nt]||t[Nt]})}if(r.emit("beforeadditem",{type:e,model:t}),e===sv||e===Dg){var x=void 0,m=void 0;if(x=t.source,m=t.target,x&&(0,p.isString)(x)&&(x=r.findById(x)),m&&(0,p.isString)(m)&&(m=r.findById(m)),!x||!m){console.warn("The source or target node of edge ".concat(t.id," does not exist!"));return}x.getType&&x.getType()==="combo"&&(t.isComboEdge=!0),m.getType&&m.getType()==="combo"&&(t.isComboEdge=!0),s=new Ag({model:t,source:x,target:m,styles:u,linkCenter:r.get("linkCenter"),group:a.addGroup()})}else if(e===ov)s=new ud({model:t,styles:u,group:a.addGroup()});else if(e===Ch){var C=t.children,R=Zt(C,r),V=void 0,Q=void 0;if(isNaN(R.x)?isNaN(t.x)&&(V=Math.random()*100):V=R.x,isNaN(R.y)?isNaN(t.y)&&(Q=Math.random()*100):Q=R.y,isNaN(t.x)||isNaN(t.y))t.x=V,t.y=Q;else{var rt=t.x-V,st=t.y-Q;this.updateComboSucceeds(t.id,rt,st,C)}var lt=a.addGroup();lt.setZIndex(t.depth),s=new Lg({model:t,styles:u,animate:r.get("animate"),bbox:t.collapsed?Zt([],r):R,group:lt}),!t.collapsed&&s.getKeyShape().get("type")==="circle"&&(R.width=Math.hypot(R.height,R.width),R.height=R.width,s.set("bbox",R),s.refresh());var Ct=s.getModel();(C||[]).forEach(function(At){var Nt=r.findById(At.id);s.addChild(Nt),At.depth=Ct.depth+2})}if(s)return s.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(e,"s")).push(s),r.get("itemMap")[s.get("id")]=s,r.emit("afteradditem",{item:s,model:t}),s},i.prototype.updateItem=function(e,t){var r=this,n,a,o=this.graph;if((0,p.isString)(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s="";e.getType&&(s=e.getType());var u=o.get(s+Ng),f=e.getModel(),c=f.x,l=f.y,x=e.getUpdateType(t);if(u){var m=(0,p.deepMix)({},f,t),C=u(m),R=(0,p.deepMix)({},f,C,t);C[sc]&&(e.set("styles",R[sc]),delete R[sc]),(0,p.each)(R,function(ue,Ae){t[Ae]=ue})}else(0,p.each)(t,function(ue,Ae){f[Ae]&&(0,p.isObject)(ue)&&!(0,p.isArray)(ue)&&(t[Ae]=(0,K.__assign)((0,K.__assign)({},f[Ae]),t[Ae]))});if(o.emit("beforeupdateitem",{item:e,cfg:t}),s===sv){if(t.source){var V=t.source;(0,p.isString)(V)&&(V=o.findById(V)),e.setSource(V)}if(t.target){var Q=t.target;(0,p.isString)(Q)&&(Q=o.findById(Q)),e.setTarget(Q)}e.update(t)}else if(s===ov){e.update(t,x);var rt=e.getEdges();x==="move"?(0,p.each)(rt,function(ue){r.edgeToBeUpdateMap[ue.getID()]={edge:ue,updateType:x},r.throttleRefresh()}):x!=null&&x.includes("bbox")&&(0,p.each)(rt,function(ue){ue.refresh(x)})}else if(s===Ch){if(e.update(t,x),!isNaN(t.x)||!isNaN(t.y)){var st=t.x-c||0,lt=t.y-l||0;this.updateComboSucceeds(f.id,st,lt)}var Ct=e.getEdges(),At=(x==null?void 0:x.includes("bbox"))||x==="move";if(At&&s===Ch){var Nt=e.get("shapeFactory"),Kt=f.type||"circle",ge=f.animate===void 0||t.animate===void 0?(a=(n=Nt[Kt])===null||n===void 0?void 0:n.options)===null||a===void 0?void 0:a.animate:f.animate||t.animate;ge?setTimeout(function(){if(!(!e||e.destroyed)){var ue=e.getKeyShape();!ue||ue.destroyed||(0,p.each)(Ct,function(Ae){Ae&&!Ae.destroyed&&Ae.refresh()})}},201):(0,p.each)(Ct,function(ue){ue.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:t})}},i.prototype.updateCombo=function(e,t,r){var n=this,a,o,s=this.graph;if((0,p.isString)(e)&&(e=s.findById(e)),!(!e||e.destroyed)){var u=e.getModel(),f=Zt(t,s,e),c=f.x,l=f.y;e.set("bbox",f);var x=c,m=l;r?(x=isNaN(u.x)?c:u.x,m=isNaN(u.y)?l:u.y):(x=isNaN(c)?u.x:c,m=isNaN(l)?u.y:l),e.update({x,y:m});var C=e.get("shapeFactory"),R=u.type||"circle",V=u.animate===void 0?(o=(a=C[R])===null||a===void 0?void 0:a.options)===null||o===void 0?void 0:o.animate:u.animate;V?setTimeout(function(){if(!(!e||e.destroyed)){var Q=e.getKeyShape();!Q||Q.destroyed||(e.getShapeCfg(u),n.updateComboEdges(e))}},201):this.updateComboEdges(e)}},i.prototype.updateComboEdges=function(e){for(var t,r,n=e.getEdges()||[],a=0;a<n.length;a++){var o=n[a];!(o!=null&&o.destroyed)&&!(!((t=o==null?void 0:o.getSource())===null||t===void 0)&&t.destroyed)&&!(!((r=o==null?void 0:o.getTarget())===null||r===void 0)&&r.destroyed)&&o.refresh()}},i.prototype.collapseCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,p.isString)(e)&&(e=r.findById(e));var n=e.getChildren();n.nodes.forEach(function(a){r.hideItem(a,t)}),n.combos.forEach(function(a){r.hideItem(a,t)})},i.prototype.updateComboSucceeds=function(e,t,r,n){var a=this;n===void 0&&(n=[]);var o=this.graph;if(!(!t&&!r)){var s=n;if(!(s!=null&&s.length)){var u=o.get("comboTrees");u==null||u.forEach(function(f){Io(f,function(c){return c.id===e?(s=c.children,!1):!0})})}s==null||s.forEach(function(f){var c=o.findById(f.id);if(c){var l=c.getModel();a.updateItem(f.id,{x:(l.x||0)+t,y:(l.y||0)+r})}})}},i.prototype.expandCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,p.isString)(e)&&(e=r.findById(e));var n=e.getChildren(),a=new Set;n.nodes.forEach(function(o){r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),n.combos.forEach(function(o){o.getModel().collapsed?o.show():r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),a.forEach(function(o){return o.refresh()})},i.prototype.removeItem=function(e){var t=this,r=this.graph;if((0,p.isString)(e)&&(e=r.findById(e)),!(!e||e.destroyed)){var n=(0,p.clone)(e.getModel()),a="";e.getType&&(a=e.getType()),r.emit("beforeremoveitem",{item:n,type:a});var o=r.get("".concat(a,"s")),s=o.indexOf(e);if(s>-1&&o.splice(s,1),a===sv){var u=r.get("v".concat(a,"s")),f=u.indexOf(e);f>-1&&u.splice(f,1)}var c=e.get("id"),l=r.get("itemMap");delete l[c];var x=r.get("comboTrees"),m=e.get("id");if(a===ov){var C=e.getModel().comboId;if(x&&C){var R=x,V=!1;x.forEach(function(At){V||Io(At,function(Nt){if(Nt.id===m&&R){var Kt=R.indexOf(Nt);return R.splice(Kt,1),V=!0,!1}return R=Nt.children,!0})})}for(var Q=e.getEdges(),rt=Q.length-1;rt>=0;rt--)r.removeItem(Q[rt],!1);C&&r.updateCombo(C)}else if(a===Ch){var st=e.getModel().parentId,lt,Ct=!1;(x||[]).forEach(function(Nt){Ct||Io(Nt,function(Kt){return Kt.id===m?(lt=Kt,Ct=!0,!1):!0})}),lt.removed=!0,lt&&lt.children&&lt.children.forEach(function(Nt){t.removeItem(Nt.id)});for(var Q=e.getEdges(),rt=Q.length;rt>=0;rt--)r.removeItem(Q[rt],!1);st&&r.updateCombo(st)}e.destroy(),r.emit("afterremoveitem",{item:n,type:a})}},i.prototype.setItemState=function(e,t,r){var n=this.graph,a=t;(0,p.isString)(r)&&(a="".concat(t,":").concat(r)),!(e.hasState(a)===r&&r||(0,p.isString)(r)&&e.hasState(a))&&(n.emit("beforeitemstatechange",{item:e,state:a,enabled:r}),e.setState(t,r),n.autoPaint(),n.emit("afteritemstatechange",{item:e,state:a,enabled:r}))},i.prototype.priorityState=function(e,t){var r=this.graph,n=e;(0,p.isString)(e)&&(n=r.findById(e)),this.setItemState(n,t,!1),this.setItemState(n,t,!0)},i.prototype.clearItemStates=function(e,t){var r=this.graph;(0,p.isString)(e)&&(e=r.findById(e)),r.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),r.emit("afteritemstatesclear",{item:e,states:t})},i.prototype.refreshItem=function(e){var t=this.graph;(0,p.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},i.prototype.addCombos=function(e,t){var r=this,n=this.graph;(e||[]).forEach(function(o){h(o,function(s){var u;return t.forEach(function(f){f.id===s.id&&(f.children=s.children,f.depth=s.depth,u=f)}),u&&r.addItem("combo",u),!0})});var a=n.get("comboGroup");a&&a.sort()},i.prototype.changeItemVisibility=function(e,t){var r=this,n=this.graph;if((0,p.isString)(e)&&(e=n.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(n.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===ov){var a=e.getEdges();(0,p.each)(a,function(c){t&&!(c.get("source").isVisible()&&c.get("target").isVisible())||r.changeItemVisibility(c,t)})}else if(e.getType&&e.getType()===Ch){var o=n.get("comboTrees"),s=e.get("id"),u=[],f=!1;(o||[]).forEach(function(l){f||!l.children||l.children.length===0||Io(l,function(x){return x.id===s?(u=x.children,f=!0,!1):!0})}),u&&(!t||t&&!e.getModel().collapsed)&&u.forEach(function(l){var x=n.findById(l.id);r.changeItemVisibility(x,t)});var a=e.getEdges();(0,p.each)(a,function(l){t&&!(l.get("source").isVisible()&&l.get("target").isVisible())||r.changeItemVisibility(l,t)})}return n.emit("afteritemvisibilitychange",{item:e,visible:t}),e},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),xm=mm,bm=function(){function i(e){this.graph=e,this.destroyed=!1}return i.prototype.updateState=function(e,t,r){var n=this.graph.get("states"),a=t;(0,p.isString)(r)&&(a="".concat(t,":").concat(r)),n[a]||(n[a]=[]),r?n[a].push(e):n[a]=n[a].filter(function(o){return o!==e}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:n})},i.prototype.updateStates=function(e,t,r){var n=this.graph.get("states"),a=(0,p.isString)(t)?[t]:t;a.forEach(function(o){var s=o;n[s]||(n[s]=[]),(0,p.isString)(r)&&(s="".concat(o,":").concat(r)),r?n[s].push(e):n[s]=n[s].filter(function(u){return u!==e})}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:t})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),Em=bm,wm=function(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(r,n){if(r.charAt(0)==="\\")return r.slice(1);var a=t[n];return a===0&&(a="0"),a||""})},Pg=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var r=0,n=e;r<n.length;r++){var a=n[r],o=a.x,s=a.y;t.push(o),t.push(s)}var u=Fr(t);return u.unshift(["M",e[0].x,e[0].y]),u},uv=function(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var a={x:(1-r)*e.x+r*t.x,y:(1-r)*e.y+r*t.y},o=[0,0];xn.normalize(o,[t.x-e.x,t.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*n,o[0]*n];return a.x+=s[0],a.y+=s[1],a},_m=function(e,t){var r=e.length;if(!r)return"";for(var n="",a="",o=0;o<r;o++){var s=e[o];o===0?a="M{x} {y}":a="L{x} {y}",n+=wm(a,s)}return t&&(n+="Z"),n},fd=function(e){var t=[];return e.forEach(function(r){var n=r[0];if(n!=="A")for(var a=1;a<r.length;a=a+2)t.push([r[a],r[a+1]]);else{var o=r.length;t.push([r[o-2],r[o-1]])}}),t},cd=function(e){if(e.length<2)throw new Error("point length must larger than 2, now it's ".concat(e.length));var t=e[0],r=e[1],n=e[e.length-1],a=e[e.length-2];e.unshift(n),e.unshift(a),e.push(t),e.push(r);for(var o=[],s=1;s<e.length-2;s+=1){var u=e[s-1].x,f=e[s-1].y,c=e[s].x,l=e[s].y,x=e[s+1].x,m=e[s+1].y,C=s!==e.length-2?e[s+2].x:x,R=s!==e.length-2?e[s+2].y:m,V=c+(x-u)/6,Q=l+(m-f)/6,rt=x-(C-c)/6,st=m-(R-l)/6;o.push(["C",V,Q,rt,st,x,m])}return o.unshift(["M",n.x,n.y]),o},kg=function(e,t){return xn.scale([0,0],xn.normalize([0,0],e),t)},Rg=function(e,t){var r=[e[1]-t[1],t[0]-e[0]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(n===0)throw new Error("p0 should not be equal to p1");return[r[0]/n,r[1]/n]},Bg=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function ld(i,e){var t=function(l){var x=[l[0][0],l[0][1]-e],m=[l[0][0],l[0][1]+e];return"M ".concat(x," A ").concat(e,",").concat(e,",0,0,0,").concat(m," A ").concat(e,",").concat(e,",0,0,0,").concat(x)},r=function(l){var x=xn.scale([0,0],Rg(l[0],l[1]),e),m=xn.scale([0,0],x,-1),C=xn.add([0,0],l[0],x),R=xn.add([0,0],l[1],x),V=xn.add([0,0],l[1],m),Q=xn.add([0,0],l[0],m);return"M ".concat(C," L ").concat(R," A ").concat([e,e,"0,0,0",V].join(",")," L ").concat(Q," A ").concat([e,e,"0,0,0",C].join(","))};if(!i||i.length<1)return"";if(i.length===1)return t(i);if(i.length===2)return r(i);for(var n=new Array(i.length),a=0;a<n.length;++a){var o=a===0?i[i.length-1]:i[a-1],s=i[a],u=xn.scale([0,0],Rg(o,s),e);n[a]=[xn.add([0,0],o,u),xn.add([0,0],s,u)]}var f="A ".concat([e,e,"0,0,0,"].join(","));return n=n.map(function(c,l){var x="";return l===0&&(x="M ".concat(n[n.length-1][1]," ")),x+="".concat(f+c[0]," L ").concat(c[1]),x}),n.join(" ")}function Fg(i,e){var t=i.length,r=function(c){var l=[c[0][0],c[0][1]-e],x=[c[0][0],c[0][1]+e];return"M ".concat(l," A ").concat([e,e,"0,0,0",x].join(",")," A ").concat([e,e,"0,0,0",l].join(","))},n=function(c){var l=Bg(c[0],c[1]),x=kg(l,e),m=xn.add([0,0],c[0],xn.scale([0,0],x,-1)),C=xn.add([0,0],c[1],x),R=1.2*e,V=kg(xn.normalize([0,0],l),R),Q=xn.scale([0,0],V,-1),rt=xn.add([0,0],m,Q),st=xn.add([0,0],C,Q),lt=xn.add([0,0],m,V);return"M ".concat(m," C ").concat([rt,st,C].join(",")," S ").concat([lt,m].join(",")," Z")};if(!i||t<1)return"";if(t===1)return r(i);if(t===2)return n(i);for(var a=i.map(function(f,c){var l=i[(c+1)%t];return{p:f,v:xn.normalize([0,0],Bg(f,l))}}),o=0;o<a.length;++o){var s=o>0?o-1:t-1,u=xn.normalize([0,0],xn.add([0,0],a[s].v,xn.scale([0,0],a[o].v,-1)));a[o].p=xn.add([0,0],a[o].p,xn.scale([0,0],u,e))}return a.map(function(f){var c=f.p;return{x:c[0],y:c[1]}})}var Sm=function(e,t){for(var r=[],n=0;n<5;n++){var a=Math.cos((18+72*n)/180*Math.PI)*e,o=Math.sin((18+72*n)/180*Math.PI)*e,s=Math.cos((54+72*n)/180*Math.PI)*t,u=Math.sin((54+72*n)/180*Math.PI)*t;n===0?r.push(["M",a,-o]):r.push(["L",a,-o]),r.push(["L",s,-u])}return r.push(["Z"]),r},Gg=function(e,t,r){return(e.y-r.y)*(t.x-r.x)-(e.x-r.x)*(t.y-r.y)},zg=function(e){var t=e.map(function(l){return{x:l.getModel().x,y:l.getModel().y}});t.sort(function(l,x){return l.x===x.x?l.y-x.y:l.x-x.x});for(var r={},n=t.length-1;n>=0;n--){var a=t[n],o=a.x,s=a.y;r["".concat(o,"-").concat(s)]&&t.splice(n,1),r["".concat(o,"-").concat(s)]=!0}if(t.length===1)return t;for(var u=[],n=0;n<t.length;n++){for(;u.length>=2&&Gg(u[u.length-2],u[u.length-1],t[n])<=0;)u.pop();u.push(t[n])}for(var f=[],n=t.length-1;n>=0;n--){for(;f.length>=2&&Gg(f[f.length-2],f[f.length-1],t[n])<=0;)f.pop();f.push(t[n])}f.pop(),u.pop();var c=u.concat(f);return c},Mm={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Cm(i,e,t){var r=!1,n=function(u,f){return e.cells[u+f*e.width]},a=function(u,f){var c=0;return n(u-1,f-1)>=t&&(c+=1),n(u,f-1)>t&&(c+=2),n(u-1,f)>t&&(c+=4),n(u,f)>t&&(c+=8),c},o=function(u,f){for(var c=u,l=f,x,m,C=0;C<e.width*e.height;C++){if(x=c,m=l,i.findIndex(function(V){return V.x===c&&V.y===l})>-1){if(!(i[0].x!==c||i[0].y!==l))return!0}else i.push({x:c,y:l});var R=a(c,l);switch(R){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:x===0&&(m===-1?c-=1:c+=1);break;case 1:case 13:case 5:l--;break;case 9:x===1&&(m===0?l-=1:l+=1);break;case 10:case 8:case 11:l++;break;default:return console.warn("Marching squares invalid state: ".concat(R)),!0}}};this.march=function(){for(var s=0;s<e.width&&!r;s+=1)for(var u=0;u<e.height&&!r;u+=1)n(s,u)>t&&a(s,u)!==15&&(r=o(s,u));return r}}var Am=function(e,t,r){var n=Math.ceil(e/r),a=Math.ceil(t/r),o=new Float32Array(Math.max(0,n*a)).fill(0);return{cells:o,width:n,height:a}},Tm=function(e,t,r){var n=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},u={x:o.getModel().x,y:o.getModel().y},f=Vo(s,u),c=new mo(s.x,s.y,u.x,u.y),l=r.reduce(function(x,m){return Ds(m,c)>0?x+1:x},0);f*Math.pow(l+1,2)<a&&(n=o,a=f*Math.pow(l+1,2))}),n},Ug=function(e,t){var r=Number.POSITIVE_INFINITY,n=null;return e.forEach(function(a){var o=Ds(a,t);o>=0&&o<r&&(n=a,r=o)}),n},Im=function(e,t,r,n){var a=[],o=[];o.push(e);for(var s=!0,u=0,f=function(m,C){var R=!1;return C.forEach(function(V){R||(Vs(m,{x:V.x1,y:V.y1})||Vs(m,{x:V.x2,y:V.y2}))&&(R=!0)}),R},c=function(m,C){for(var R=0,V=C;R<V.length;R++){var Q=V[R],rt=Q.getBBox(),st=[[rt.x,rt.y],[rt.x+rt.width,rt.y],[rt.x,rt.y+rt.height],[rt.x+rt.width,rt.y+rt.height]];if(Na(st,m.x,m.y))return!0}return!1};s&&u<r;){s=!1;for(var l=function(){var m=o.pop(),C=Ug(t,m);if(C){var R=Ls(C,m),V=R[0],Q=R[1];if(Q===2){var rt=function(lt){for(var Ct=n,At=Wg(C,Ct,V,lt),Nt=f(At,o)||f(At,a),Kt=c(At,t);!Nt&&Kt&&Ct>=1;)Ct/=1.5,At=Wg(C,Ct,V,lt),Nt=f(At,o)||f(At,a),Kt=c(At,t);At&&!Nt&&(!lt||!Kt)&&(o.push(new mo(m.x1,m.y1,At.x,At.y)),o.push(new mo(At.x,At.y,m.x2,m.y2)),s=!0)};rt(!0),s||rt(!1)}}s||a.push(m),u+=1};!s&&o.length;)l()}for(;o.length;)a.push(o.pop());return a};function Om(i,e,t,r,n){var a=Tm(i,t,e);if(a===null)return[];var o=function(l){for(var x=[];l.length>0;){var m=l.pop();if(l.length===0){x.push(m);break}var C=l.pop(),R=new mo(m.x1,m.y1,C.x2,C.y2),V=Ug(e,R);V?(x.push(m),l.push(C)):l.push(R)}return x},s=new mo(i.getModel().x,i.getModel().y,a.getModel().x,a.getModel().y),u=Im(s,e,r,n),f=o(u);return f}var Lm=function(e,t,r){var n=Object.assign(Mm,r),a=ns(e.map(function(rt){return{x:rt.getModel().x,y:rt.getModel().y}}));e=e.sort(function(rt,st){return Vo({x:rt.getModel().x,y:rt.getModel().y},a)-Vo({x:st.getModel().x,y:st.getModel().y},a)});var o=[],s=[];e.forEach(function(rt){var st=Om(rt,t,o,n.maxRoutingIterations,n.morphBuffer);st.forEach(function(lt){s.push(lt)}),o.push(rt)});for(var u=Dm(e,s,n.nodeR0),f=Am(u.width,u.height,n.pixelGroupSize),c=[],l=[],x=0;x<n.maxMarchingIterations;x++)if(Nm(e,t,s,u,f,n),c=[],l=[],!!new Cm(c,f,n.threshold).march()){var m=c.map(function(rt){return{x:Math.round(rt.x*n.pixelGroupSize+u.minX),y:Math.round(rt.y*n.pixelGroupSize+u.minY)}});if(m){var C=m.length;if(n.skip>1)for(C=Math.floor(m.length/n.skip);C<3&&n.skip>1;)n.skip-=1,C=Math.floor(m.length/n.skip);for(var R=0,V=0;V<C;V+=1,R+=n.skip)l.push({x:m[R].x,y:m[R].y})}var Q=function(){for(var st=0,lt=e;st<lt.length;st++){var Ct=lt[st],At=l.map(function(Nt){return[Nt.x,Nt.y]});if(!Na(At,Ct.getBBox().centerX,Ct.getBBox().centerY))return!1}return!0};if(l&&Q())return l;if(n.threshold*=.9,x<=n.maxMarchingIterations*.5)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else if(n.nonMemberInfluenceFactor!==0&&t.length>0)n.nonMemberInfluenceFactor*=.8;else break}return l};function Dm(i,e,t){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},n=[];i.forEach(function(u){n.push(u.getBBox())}),e.forEach(function(u){n.push(u.getBBox())});for(var a=0,o=n;a<o.length;a++){var s=o[a];r.minX=(s.minX<r.minX?s.minX:r.minX)-t,r.minY=(s.minY<r.minY?s.minY:r.minY)-t,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+t,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+t}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}function Nm(i,e,t,r,n,a){function o(m,C){var R=Math.floor((m-C)/a.pixelGroupSize);return R<0?0:R}function s(m,C){return m*a.pixelGroupSize+C}var u=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),f=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),c=function(C,R){var V=Math.min(o(C.minX,R+r.minX),n.width),Q=Math.min(o(C.minY,R+r.minY),n.height),rt=Math.min(o(C.maxX,-R+r.minX),n.width),st=Math.min(o(C.maxY,-R+r.minY),n.height);return[V,Q,rt,st]},l=function(C,R){for(var V=C.getBBox(),Q=c(V,a.nodeR1),rt=Q[0],st=Q[1],lt=Q[2],Ct=Q[3],At=st;At<Ct;At+=1)for(var Nt=rt;Nt<lt;Nt+=1)if(!(R<0&&n[Nt+At*n.width]<=0)){var Kt=s(Nt,r.minX),ge=s(At,r.minY),ue=hs({x:Kt,y:ge},{x:V.minX,y:V.minY,width:V.width,height:V.height});if(ue<Math.pow(a.nodeR1,2)){var Ae=Math.sqrt(ue)-a.nodeR1;n.cells[Nt+At*n.width]+=R*Ae*Ae}}},x=function(C,R){for(var V=C.getBBox(),Q=c(V,a.edgeR1),rt=Q[0],st=Q[1],lt=Q[2],Ct=Q[3],At=st;At<Ct;At+=1)for(var Nt=rt;Nt<lt;Nt+=1)if(!(R<0&&n.cells[Nt+At*n.width]<=0)){var Kt=s(Nt,r.minX),ge=s(At,r.minY),ue=ru({x:Kt,y:ge},C);if(ue<Math.pow(a.edgeR1,2)){var Ae=Math.sqrt(ue)-a.edgeR1;n.cells[Nt+At*n.width]+=R*Ae*Ae}}};a.nodeInfluenceFactor&&i.forEach(function(m){l(m,a.nodeInfluenceFactor/u)}),a.edgeInfluenceFactor&&t.forEach(function(m){x(m,a.edgeInfluenceFactor/f)}),a.negativeNodeInfluenceFactor&&e.forEach(function(m){l(m,a.negativeNodeInfluenceFactor/u)})}function Wg(i,e,t,r){var n=i.getBBox(),a=t[0],o=t[1],s=t[2],u=t[3],f={topLeft:{x:n.minX-e,y:n.minY-e},topRight:{x:n.maxX+e,y:n.minY-e},bottomLeft:{x:n.minX-e,y:n.maxY+e},bottomRight:{x:n.maxX+e,y:n.maxY+e}},c=n.height*n.width;function l(C,R){return n.width*((C.y-n.minY+(R.y-n.minY))*.5)}if(o){if(a)return r?f.topLeft:f.bottomRight;if(s)return r?f.bottomLeft:f.topRight;var x=l(o,u);return x<c*.5?o.y>u.y?r?f.topLeft:f.bottomRight:r?f.topRight:f.bottomLeft:o.y<u.y?r?f.bottomLeft:f.topRight:r?f.bottomRight:f.topLeft}if(u){if(a)return r?f.topRight:f.bottomLeft;if(s)return r?f.bottomRight:f.topLeft}var m=l(a,s);return m<c*.5?a.x>s.x?r?f.topLeft:f.bottomRight:r?f.bottomLeft:f.topRight:a.x<s.x?r?f.topRight:f.bottomLeft:r?f.bottomRight:f.topLeft}var Pm=function(){function i(e,t){this.cfg=(0,p.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return(0,p.isString)(r)?e.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,p.isString)(r)?e.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return i.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},i.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},i.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},i.prototype.calcPath=function(e,t){var r,n,a;switch(this.type){case"round-convex":r=zg(e),a=ld(r.map(function(o){return[o.x,o.y]}),this.padding),n=sa(a);break;case"smooth-convex":r=zg(e),r.length===2?(a=ld(r.map(function(o){return[o.x,o.y]}),this.padding),n=sa(a)):r.length>2&&(a=Fg(r.map(function(o){return[o.x,o.y]}),this.padding),n=cd(a));break;case"bubble":r=Lm(e,t,this.cfg.bubbleCfg),n=r.length>=2&&cd(r);break;default:}return n},i.prototype.render=function(){this.group.addShape("path",{attrs:(0,K.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},i.prototype.addMember=function(e){if(e){(0,p.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.addNonMember=function(e){if(e){(0,p.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.removeMember=function(e){if(e){(0,p.isString)(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.removeNonMember=function(e){if(e){(0,p.isString)(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.updateData=function(e,t){var r=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(n){return(0,p.isString)(n)?r.graph.findById(n):n})),t&&(this.nonMembers=t.map(function(n){return(0,p.isString)(n)?r.graph.findById(n):n})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.updateStyle=function(e){var t=this.group.findById(this.id);t.attr((0,K.__assign)({},e))},i.prototype.updateCfg=function(e){var t=this;this.cfg=(0,p.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(r){return(0,p.isString)(r)?t.graph.findById(r):r})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,p.isString)(r)?t.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.contain=function(e){var t=this,r;(0,p.isString)(e)?r=this.graph.findById(e):r=e;var n,a=r.getKeyShape();if(r.get("type")==="path")n=fd(a.attr("path"));else{var o=a.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map(function(s){var u=t.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),Gi(n,fd(this.path))},i.prototype.destroy=function(){this.group.remove(),this.cfg=null},i}(),Xg=Pm,Ah=Bt,km="node",Rm=function(i){(0,K.__extends)(e,i);function e(t){var r=i.call(this)||this;return r.sortCombos=(0,p.debounce)(function(){var n=r.get("comboSorted");if(!(!r||r.destroyed||n)){r.set("comboSorted",!0);var a=[],o={},s=r.get("comboTrees");(s||[]).forEach(function(f){Io(f,function(c){return a[c.depth]?a[c.depth].push(c.id):a[c.depth]=[c.id],o[c.id]=c.depth,!0})});var u=r.getEdges().concat(r.get("vedges"));(u||[]).forEach(function(f){var c=f.getModel(),l=o[c.source]||0,x=o[c.target]||0,m=Math.max(l,x);a[m]?a[m].push(c.id):a[m]=[c.id]}),a.forEach(function(f){if(!(!f||!f.length))for(var c=f.length-1;c>=0;c--){var l=r.findById(f[c]);l&&l.toFront()}})}},500,!1),r.cfg=(0,p.deepMix)(r.getDefaultCfg(),t),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new Ri(r.cfg.maxStep),r.redoStack=new Ri(r.cfg.maxStep)),r}return e.prototype.init=function(){this.initCanvas();var t=new om(this),r=new _r(this),n=new xm(this),a=new Em(this);this.set({viewController:t,modeController:r,itemController:n,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var r=t.get("el"),n=(r||{}).id,a=n===void 0?"g6":n,o=t.addGroup({id:"".concat(a,"-root"),className:Fn.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:"".concat(a,"-edge"),className:Fn.edgeContainerClassName}),u=o.addGroup({id:"".concat(a,"-node"),className:Fn.nodeContainerClassName}),f=o.addGroup({id:"".concat(a,"-combo"),className:Fn.comboContainerClassName});f.toBack(),this.set({nodeGroup:u,edgeGroup:s,comboGroup:f})}var c=o.addGroup({id:"".concat(a,"-delegate"),className:Fn.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,r){return(0,p.isPlainObject)(t)?this.cfg=(0,K.__assign)((0,K.__assign)({},this.cfg),t):this.cfg[t]=r,t==="enabledStack"&&r&&!this.undoStack&&!this.redoStack&&(this.undoStack=new Ri(this.cfg.maxStep),this.redoStack=new Ri(this.cfg.maxStep)),this},e.prototype.get=function(t){var r;return(r=this.cfg)===null||r===void 0?void 0:r[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,r){(0,p.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");r||(r=t.get("states")),n.clearItemStates(t,r);var a=this.get("stateController");a.updateStates(t,r,!1)},e.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},e.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},e.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,r){var n,a=this.get("".concat(t,"s"));return(0,p.each)(a,function(o,s){if(r(o,s))return n=o,n}),n},e.prototype.findAll=function(t,r){var n=[];return(0,p.each)(this.get("".concat(t,"s")),function(a,o){r(a,o)&&n.push(a)}),n},e.prototype.findAllByState=function(t,r,n){return n?this.findAll(t,function(a){return a.hasState(r)&&n(a)}):this.findAll(t,function(a){return a.hasState(r)})},e.prototype.translate=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,p.clone)(s.getMatrix());if(u||(u=[1,0,0,0,1,0,0,0,1]),n){var f=Oe({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});Yo(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+r},n,f||{duration:500,easing:"easeCubic"})}else u=Ah(u,[["t",t,r]]),s.setMatrix(u),this.emit("viewportchange",{action:"translate",matrix:u}),this.autoPaint()},e.prototype.moveTo=function(t,r,n,a){var o=this.get("group");Yo(o,{x:t,y:r},n,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t,r,n,a){t&&this.set("fitViewPadding",t);var o=this.get("viewController");r?o.fitViewByRules(r,n,a):o.fitView(n,a),this.autoPaint()},e.prototype.fitCenter=function(t,r){var n=this.get("viewController");n.fitCenter(t,r),this.autoPaint()},e.prototype.addBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!0),this},e.prototype.removeBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!1),this},e.prototype.updateBehavior=function(t,r,n){var a=this.get("modeController");return a.updateBehavior(t,r,n),this},e.prototype.zoom=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,p.clone)(s.getMatrix())||[1,0,0,0,1,0,0,0,1],f=this.get("minZoom"),c=this.get("maxZoom"),l=this.getZoom()||1,x=l*t,m=t,C=!1;if(f&&x<f?(m=f/l,C=!0):c&&x>c&&(m=c/l,C=!0),r?u=Ah(u,[["t",-r.x,-r.y],["s",m,m],["t",r.x,r.y]]):u=Ah(u,[["s",m,m]]),n){var R=(0,p.clone)(s.getMatrix());R||(R=[1,0,0,0,1,0,0,0,1]);var V=R[0],Q=V*m,rt=Oe({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(st){if(st===1)R=u;else{var lt=me(V,Q,st)/R[0];r?R=Ah(R,[["t",-r.x,-r.y],["s",lt,lt],["t",r.x,r.y]]):R=Ah(R,[["s",lt,lt]])}return{matrix:R}},rt)}else s.setMatrix(u),this.emit("viewportchange",{action:"zoom",matrix:u}),this.autoPaint();return!C},e.prototype.zoomTo=function(t,r,n,a){var o=t/this.getZoom();return this.zoom(o,r,n,a)},e.prototype.focusItem=function(t,r,n){var a=this.get("viewController"),o=!1;r?o=!0:r===void 0&&(o=this.get("animate"));var s={};n?s=n:n===void 0&&(s=this.get("animateCfg")),a.focus(t,o,s),this.autoPaint()},e.prototype.focusItems=function(t,r,n,a){var o=this.get("viewController");o.focusItems(t,r,n,a)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,r){var n=this.get("viewController");return n.getPointByClient(t,r)},e.prototype.getClientByPoint=function(t,r){var n=this.get("viewController");return n.getClientByPoint(t,r)},e.prototype.getPointByCanvas=function(t,r){var n=this.get("viewController");return n.getPointByCanvas(t,r)},e.prototype.getCanvasByPoint=function(t,r){var n=this.get("viewController");return n.getCanvasByPoint(t,r)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!0);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!1}],f.nodes=[{id:o,visible:!0}];break;case"edge":u.nodes=[{id:o,visible:!1}],f.edges=[{id:o,visible:!0}];break;case"combo":u.nodes=[{id:o,visible:!1}],f.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.hideItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!1);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!0}],f.nodes=[{id:o,visible:!1}];break;case"edge":u.nodes=[{id:o,visible:!0}],f.edges=[{id:o,visible:!1}];break;case"combo":u.nodes=[{id:o,visible:!0}],f.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.refreshItem=function(t){var r=this.get("itemController");r.refreshItem(t)},e.prototype.setAutoPaint=function(t){var r=this;r.set("autoPaint",t);var n=r.get("canvas");n.set("autoDraw",t)},e.prototype.remove=function(t,r){r===void 0&&(r=!0),this.removeItem(t,r)},e.prototype.removeItem=function(t,r){r===void 0&&(r=!0);var n=t;if((0,p.isString)(t)&&(n=this.findById(t)),!n&&(0,p.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(n){var a="";if(n.getType&&(a=n.getType()),r&&this.get("enabledStack")){var o=(0,K.__assign)((0,K.__assign)({},n.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var u=n.getEdges(),f=u.length-1;f>=0;f--)s.edges.push((0,K.__assign)((0,K.__assign)({},u[f].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break;default:break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var c=n.getModel();c.comboId&&this.updateComboTree(n,void 0,!1)}var l=this.get("itemController");if(l.removeItem(n),a==="combo"){var x=Ht(this.get("comboTrees"));this.set("comboTrees",x)}}},e.prototype.innerAddItem=function(t,r,n){if(!Ar(t,r))return!1;if(r.id&&this.findById(r.id)){console.warn("This item exists already. Be sure the id %c".concat(r.id,"%c is unique."),"font-size: 20px; color: red;","");return}var a,o=this.get("comboTrees")||[];if(t==="combo"){var s=this.get("itemMap"),u=!1;if(o.forEach(function(C){u||h(C,function(R){if(r.parentId===R.id){u=!0;var V=(0,K.__assign)({id:r.id,depth:R.depth+2},r);R.children?R.children.push(V):R.children=[V],r.depth=V.depth,a=n.addItem(t,r)}var Q=s[R.id];return u&&Q&&Q.getType&&Q.getType()==="combo"&&n.updateCombo(Q,R.children),!0})}),!u){var f=(0,K.__assign)({id:r.id,depth:0},r);r.depth=f.depth,o.push(f),a=n.addItem(t,r)}this.set("comboTrees",o),r.collapsed&&(this.collapseCombo(a,!1),this.updateCombo(a))}else if(t==="node"&&(0,p.isString)(r.comboId)&&o){var c=this.findById(r.comboId);c&&c.getType&&c.getType()!=="combo"&&console.warn("'".concat(r.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),a=n.addItem(t,r);var l=this.get("itemMap"),x=!1,m=!1;o.forEach(function(C){m||x||h(C,function(R){if(R.id===r.id)return m=!0,!1;if(r.comboId===R.id&&!m){x=!0;var V=(0,p.clone)(r);V.itemType="node",R.children?R.children.push(V):R.children=[V],V.depth=R.depth+1}return x&&l[R.id].getType&&l[R.id].getType()==="combo"&&n.updateCombo(l[R.id],R.children),!0})})}else a=n.addItem(t,r);if(t==="node"&&r.comboId||t==="combo"&&r.parentId){var c=this.findById(r.comboId||r.parentId);c&&c.getType&&c.getType()==="combo"&&c.addChild(a)}return a},e.prototype.addItem=function(t,r,n,a){n===void 0&&(n=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController"),u=this.innerAddItem(t,r,s);if(u===!1||u===!0)return u;var f=this.get("combos");if(f&&f.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var c=(0,K.__assign)((0,K.__assign)({},u.getModel()),{itemType:t}),l={};switch(t){case"node":l.nodes=[c];break;case"edge":l.edges=[c];break;case"combo":l.combos=[c];break;default:break}this.pushStack("add",{before:{},after:l})}return u},e.prototype.addItems=function(t,r,n){t===void 0&&(t=[]),r===void 0&&(r=!0),n===void 0&&(n=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!n);for(var o=this.get("itemController"),s=[],u=0;u<t.length;u++){var f=t[u];f.type!=="edge"&&f.type!=="vedge"?s.push(this.innerAddItem(f.type,f.model,o)):s.push(void 0)}for(var u=0;u<t.length;u++){var f=t[u];(f.type==="edge"||f.type==="vedge")&&(s[u]=this.innerAddItem(f.type,f.model,o))}if(n){var c=this.get("combos");c&&c.length>0&&this.sortCombos()}if(this.autoPaint(),r&&this.get("enabledStack")){for(var l={nodes:[],edges:[],combos:[]},u=0;u<t.length;u++){var x=t[u].type,m=s[u];if(m&&m!==!0){var C=(0,K.__assign)((0,K.__assign)({},m.getModel()),{itemType:x});switch(x){case"node":l.nodes.push(C);break;case"edge":l.edges.push(C);break;case"combo":l.combos.push(C);break;default:break}}}this.pushStack("addItems",{before:{},after:l})}return s},e.prototype.add=function(t,r,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.addItem(t,r,n,a)},e.prototype.updateItem=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController"),s;(0,p.isString)(t)?s=this.findById(t):s=t;var u=n&&this.get("enabledStack"),f;u&&(f=(0,p.clone)(s.getModel()));var c="";s.getType&&(c=s.getType());var l=(0,K.__spreadArray)([],s.getStates(),!0);if(c==="combo"&&(0,p.each)(l,function(R){return a.setItemState(s,R,!1)}),o.updateItem(s,r),c==="combo"&&(0,p.each)(l,function(R){return a.setItemState(s,R,!0)}),u){var x={nodes:[],edges:[],combos:[]},m={nodes:[],edges:[],combos:[]},C=(0,K.__assign)({id:f.id},r);switch(c){case"node":x.nodes.push(f),m.nodes.push(C);break;case"edge":x.edges.push(f),m.edges.push(C);break;case"combo":x.combos.push(f),m.combos.push(C);break;default:break}this.pushStack("update",{before:x,after:m})}},e.prototype.update=function(t,r,n){n===void 0&&(n=!0),this.updateItem(t,r,n)},e.prototype.setItemState=function(t,r,n){(0,p.isString)(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,r,n);var o=this.get("stateController");o.updateState(t,r,n)},e.prototype.priorityState=function(t,r){var n=this.get("itemController");n.priorityState(t,r)},e.prototype.data=function(t){He(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var n=r.nodes,a=n===void 0?[]:n,o=r.edges,s=o===void 0?[]:o,u=r.combos,f=u===void 0?[]:u;if(this.clear(!0),this.emit("beforerender"),t.addItems(a.map(function(V){return{type:"node",model:V}}),!1,!1),(f==null?void 0:f.length)!==0){var c=kt(f,a);this.set("comboTrees",c),t.addCombos(f)}t.addItems(s.map(function(V){return{type:"edge",model:V}}),!1,!1);var l=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var x=t.get("layoutController");if(x){if(x.layout(m),this.destroyed)return}else m();function m(){(t.get("comboTrees")||[]).forEach(function(V){h(V,function(Q){var rt=t.findById(Q.id);return rt.getType()==="combo"&&Q.collapsed&&(t.collapseCombo(Q.id,!1),t.updateCombo(rt)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",l),setTimeout(function(){var V;(V=t.getCombos())===null||V===void 0||V.forEach(function(Q){Q.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(f&&f.length!==0)this.sortCombos();else if(r.nodes&&r.edges&&r.nodes.length<r.edges.length){var C=this.getNodes();C.forEach(function(V){V.toFront()})}else{var R=this.getEdges();R.forEach(function(V){V.toBack()})}},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,r,n){var a=this,o,s=this.get("itemMap");(0,p.each)(n,function(u){if(o=s[u.id],o){if(a.get("animate")&&t===km){var f=o.getContainer().getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:f[6],y:f[7]})}a.updateItem(o,u,!1)}else o=a.addItem(t,u,!1);o&&r["".concat(t,"s")].push(o)})},e.prototype.changeData=function(t,r){var n=this,a;r===void 0&&(r=!0);var o=this,s=t||o.get("data");if(!He(s))return this;this.emit("beforechangedata"),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(lt){return o.clearItemStates(lt)}),this.getEdges().map(function(lt){return o.clearItemStates(lt)});var u=this.get("canvas"),f=u.get("localRefresh");u.set("localRefresh",!1),o.get("data")||(o.data(s),o.render());var c=this.get("itemMap"),l={nodes:[],edges:[]},x=s.combos;if(x){var m=kt(x,s.nodes);this.set("comboTrees",m)}else this.set("comboTrees",[]);this.diffItems("node",l,s.nodes),(0,p.each)(c,function(lt,Ct){c[Ct].getModel().depth=0,!(lt.getType&&lt.getType()==="edge")&&(lt.getType&&lt.getType()==="combo"?(delete c[Ct],lt.destroy()):l.nodes.indexOf(lt)<0&&(delete c[Ct],o.remove(lt,!1)))});for(var C=this.getCombos(),R=C.length,V=R-1;V>=0;V--)C[V].destroyed&&C.splice(V,1);x&&(o.addCombos(x),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,s.edges),(0,p.each)(c,function(lt,Ct){lt.getType&&(lt.getType()==="node"||lt.getType()==="combo")||l.edges.indexOf(lt)<0&&(delete c[Ct],o.remove(lt,!1))}),(this.get("comboTrees")||[]).forEach(function(lt){h(lt,function(Ct){var At=n.findById(Ct.id);return At.getType()==="combo"&&Ct.collapsed&&n.collapseCombo(Ct.id,!1),!0})}),this.set({nodes:l.nodes,edges:l.edges});var Q=(this.get("layout")||{}).relayoutAtChangeData,rt=Q===void 0?!0:Q,st=this.get("layoutController");return rt&&st&&(st.changeData(function(){setTimeout(function(){var lt;(lt=o.getCombos())===null||lt===void 0||lt.forEach(function(Ct){Ct.set("animate",!0)})},0)}),o.get("animate")&&!st.getLayoutType()?(o.positionsAnimate(),(a=o.getCombos())===null||a===void 0||a.forEach(function(lt){return lt.set("animate",!0)})):o.autoPaint()),setTimeout(function(){u.set("localRefresh",f)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var r=this,n=r.get("comboTrees"),a=this.get("itemController");a.addCombos(n,t)},e.prototype.createCombo=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController");this.set("comboSorted",!1);var s="",u;if(t){if((0,p.isString)(t))s=t,u={id:t};else{if(s=t.id,!s){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}u=t}var f=n&&this.get("enabledStack"),c={nodes:[],combos:[]};f&&r.forEach(function(Q){var rt=a.findById(Q),st=rt.getType();if(!(st!=="node"&&st!=="combo")){var lt=rt.getModel();c["".concat(st,"s")].push({id:Q,parentId:st==="node"?lt.comboId:lt.parentId})}});var l=this.get("comboTrees"),x=new Set(r),m=new Map;l&&(l.forEach(function(Q){h(Q,function(rt,st,lt){if(x.has(rt.id)){if(st){var Ct=a.findById(st.id),At=a.findById(rt.id);st.children.splice(lt,1),Ct.removeChild(At),o.updateCombo(Ct,st.children)}rt.itemType==="combo"&&m.set(rt.id,rt)}return!0})}),l=l.filter(function(Q){return!x.has(Q.id)}),this.set("comboTrees",l));var C={nodes:[],combos:[]},R=r.map(function(Q){var rt=a.findById(Q),st=rt.getModel(),lt="";rt.getType&&(lt=rt.getType());var Ct=m.get(Q)||{id:rt.getID(),itemType:lt};return lt==="combo"?(Ct.parentId=s,st.parentId=s):lt==="node"&&(Ct.comboId=s,st.comboId=s),f&&C["".concat(lt,"s")].push({id:st.id,parentId:s}),Ct});u.children=R,this.addItem("combo",u,!1),this.set("comboSorted",!1),l&&(l.forEach(function(Q){Io(Q,function(rt){return rt.id===s?(rt.itemType="combo",rt.children=R,!1):!0})}),this.sortCombos()),f&&(C.combos.push(u),this.pushStack("createCombo",{before:c,after:C}));var V=this.findById(s);!V.getModel().parentId&&V.getChildren().combos.length&&this.updateComboTree(V,void 0,!1),setTimeout(function(){V.set("animate",!0)},0)}},e.prototype.uncombo=function(t,r){var n=this,a,o;r===void 0&&(r=!0);var s=this,u=t;if((0,p.isString)(t)&&(u=this.findById(t)),!u||u.getType&&u.getType()!=="combo"){console.warn("The item is not a combo!");return}var f=u.getModel(),c=u.getModel().parentId,l=s.get("comboTrees");l||(l=[]);var x=this.get("itemMap"),m=u.get("id"),C,R=[],V=this.get("combos"),Q=this.findById(c),rt=r&&this.get("enabledStack"),st={};if(rt&&(st=(0,p.clone)(f),st.children=[]),l.forEach(function(Nt){C||h(Nt,function(Kt){var ge;if(Kt.id===m){C=Kt;var ue=u.getEdges().map(function(Gr){return Gr.getID()});ue.forEach(function(Gr){n.removeItem(Gr,!1)});var Ae=V.indexOf(u);V.splice(Ae,1),delete x[m];var Ke=(0,p.clone)(u.getModel());u.destroy(),n.emit("afterremoveitem",{item:Ke,type:"combo"})}if(c&&C&&Kt.id===c){Q.removeCombo(u),R=Kt.children;var Ae=R.indexOf(C);return Ae!==-1&&R.splice(Ae,1),(ge=C.children)===null||ge===void 0||ge.forEach(function(wr){var Mr=n.findById(wr.id),vr=Mr.getModel();Mr.getType&&Mr.getType()==="combo"?(wr.parentId=c,delete wr.comboId,vr.parentId=c,delete vr.comboId):Mr.getType&&Mr.getType()==="node"&&(wr.comboId=c,vr.comboId=c),Q.addChild(Mr),R.push(wr)}),n.updateCombo(Q),!1}return!0})}),!c&&C){var lt=l.indexOf(C);l.splice(lt,1),(a=C.children)===null||a===void 0||a.forEach(function(Nt){Nt.parentId=void 0;var Kt=n.findById(Nt.id).getModel();delete Kt.parentId,delete Kt.comboId,Nt.itemType!=="node"&&l.push(Nt)})}if(rt){var Ct={nodes:[],combos:[]},At={nodes:[],combos:[]};(o=C.children)===null||o===void 0||o.forEach(function(Nt){var Kt=n.findById(Nt.id),ge=Kt.getType();ge!=="node"&&ge!=="combo"||(Ct["".concat(ge,"s")].push({id:Nt.id,parentId:m}),At["".concat(ge,"s")].push({id:Nt.id,parentId:c}))}),Ct.combos.push(st),this.pushStack("uncombo",{before:Ct,after:At})}},e.prototype.updateCombos=function(t){var r=this;t===void 0&&(t=!1);var n=this,a=this.get("comboTrees"),o=n.get("itemController"),s=n.get("itemMap");(a||[]).forEach(function(u){h(u,function(f){var c;if(!f)return!0;var l=s[f.id];if(((c=l==null?void 0:l.getType)===null||c===void 0?void 0:c.call(l))==="combo"){var x=(0,K.__spreadArray)([],l.getStates(),!0);(0,p.each)(x,function(m){return r.setItemState(l,m,!1)}),o.updateCombo(l,f.children,t),(0,p.each)(x,function(m){return r.setItemState(l,m,!0)})}return!0})}),n.sortCombos()},e.prototype.updateCombo=function(t){var r=this,n=this,a=t,o;if((0,p.isString)(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),u=n.get("itemController"),f=n.get("itemMap");(s||[]).forEach(function(c){h(c,function(l){if(!l)return!0;var x=f[l.id];if(o===l.id&&x&&x.getType&&x.getType()==="combo"){var m=(0,K.__spreadArray)([],x.getStates(),!0);(0,p.each)(m,function(C){x.getStateStyle(C)&&r.setItemState(x,C,!1)}),u.updateCombo(x,l.children),(0,p.each)(m,function(C){x.getStateStyle(C)&&r.setItemState(x,C,!0)}),o&&(o=l.parentId)}return!0})})},e.prototype.updateComboTree=function(t,r,n){n===void 0&&(n=!0);var a=this;this.set("comboSorted",!1);var o;(0,p.isString)(t)?o=a.findById(t):o=t;var s=o.getModel(),u=s.comboId||s.parentId,f="";if(o.getType&&(f=o.getType()),r&&f==="combo"){var c=this.get("comboTrees"),l=!0,x;if((c||[]).forEach(function(rt){x||Io(rt,function(st){if(!x)return st.id===o.getID()&&(x=st),!0})}),Io(x,function(rt){return rt.id===r?(l=!1,!1):!0}),!l){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(n&&this.get("enabledStack")){var m={},C={};f==="combo"?(m.combos=[{id:s.id,parentId:s.parentId}],C.combos=[{id:s.id,parentId:r}]):f==="node"&&(m.nodes=[{id:s.id,parentId:s.comboId}],C.nodes=[{id:s.id,parentId:r}]),this.pushStack("updateComboTree",{before:m,after:C})}if(s.parentId||s.comboId){var R=this.findById(s.parentId||s.comboId);R&&R.removeChild(o)}if(f==="combo"?s.parentId=r:f==="node"&&(s.comboId=r),r){var V=this.findById(r);V&&V.addChild(o)}if(u){var V=this.findById(u);V&&V.removeChild(o)}var Q=Ht(this.get("comboTrees"),s.id,r);this.set("comboTrees",Q),this.updateCombos()},e.prototype.save=function(){var t=[],r=[],n=[];return(0,p.each)(this.get("nodes"),function(a){t.push(a.getModel())}),(0,p.each)(this.get("edges"),function(a){r.push(a.getModel())}),(0,p.each)(this.get("combos"),function(a){n.push(a.getModel())}),{nodes:t,edges:r,combos:n}},e.prototype.changeSize=function(t,r){var n=this.get("viewController");return n.changeSize(t,r),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var r=t.get("nodes"),n=t.get("edges"),a=t.get("edges");(0,p.each)(r,function(o){o.refresh()}),(0,p.each)(n,function(o){o.refresh()}),(0,p.each)(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,p.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},e.prototype.positionsAnimate=function(t){var r=this;r.emit("beforeanimate");var n=r.get("animateCfg"),a=n.onFrame,o=t?r.getNodes().concat(r.getCombos()):r.getNodes(),s=o.map(function(f){var c=f.getModel();return{id:c.id,x:c.x,y:c.y}});r.stopAnimate();var u=r.get("canvas");r.animating=!0,setTimeout(function(){u.animate(function(f){(0,p.each)(s,function(c){var l=r.findById(c.id);if(!(!l||l.destroyed)){var x=l.get("originAttrs"),m=l.get("model"),C=l.getContainer().getMatrix();if(x==null&&(C&&(x={x:C[6],y:C[7]}),l.set("originAttrs",x||0)),a){var R=a(l,f,c,x||{x:0,y:0});l.set("model",Object.assign(m,R))}else x?(m.x=x.x+(c.x-x.x)*f,m.y=x.y+(c.y-x.y)*f):(m.x=c.x,m.y=c.y)}}),r.refreshPositions(t)},{duration:n.duration,easing:n.easing,callback:function(){(0,p.each)(o,function(c){c.set("originAttrs",null)}),n.callback&&n.callback(),r.emit("afteranimate"),r.animating=!1}})},0)},e.prototype.refreshPositions=function(t){var r=this;r.emit("beforegraphrefreshposition");var n=r.get("nodes"),a=r.get("edges"),o=r.get("vedges"),s=r.get("combos"),u,f={},c=function(x){(0,p.each)(x,function(m){u=m.getModel();var C=m.get("originAttrs");if(!(C&&u.x===C.x&&u.y===C.y)){var R=m.updatePosition({x:u.x,y:u.y});f[u.id]=R,u.comboId&&(f[u.comboId]=f[u.comboId]||R),u.parentId&&(f[u.parentId]=f[u.parentId]||R)}})};c(s),c(n),s&&s.length!==0&&(t&&c(s),r.updateCombos()),(0,p.each)(a,function(l){var x=l.getSource().getModel(),m=l.getTarget();if(!(0,p.isPlainObject)(m)){var C=m.getModel();(f[x.id]||f[C.id]||l.getModel().isComboEdge)&&l.refresh()}}),(0,p.each)(o,function(l){l.refresh()}),r.emit("aftergraphrefreshposition"),r.autoPaint()},e.prototype.stopAnimate=function(){var t=this.get("canvas"),r=t.cfg.timeline;r&&r.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var r=this.get("modeController");return r.setMode(t),this},e.prototype.clear=function(t){var r;return t===void 0&&(t=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,r,n,a){var o=this;t===void 0&&(t={}),a===void 0&&(a=!0);var s=this.get("layoutController");if((0,p.isString)(t)&&(t={type:t}),r){var u=n;u||(r==="begin"?u={x:0,y:0}:u={x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var f=["force","gForce","fruchterman","force2"];f.includes(t.type)||!t.type&&f.includes(s==null?void 0:s.layoutType)?t.center=[u.x,u.y]:this.once("afterlayout",function(x){var m=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*m[0]+m[6],u.y=u.y*m[0]+m[7];var C=o.getGroup().getCanvasBBox(),R=C.minX,V=C.maxX,Q=C.minY,rt=C.maxY,st={x:(R+V)/2,y:(Q+rt)/2};r==="begin"&&(st.x=R,st.y=Q),o.translate(u.x-st.x,u.y-st.y)})}var c=(0,K.__assign)({},this.get("layout")),l={};Object.assign(l,c,t),t.pipes&&!t.type?delete l.type:!t.pipes&&l.type&&delete l.pipes,this.set("layout",l),s&&(s.isLayoutTypeSame(l)&&l.gpuEnabled===c.gpuEnabled?s.updateLayoutCfg(l):s.changeLayout(l),a&&this.get("enabledStack")&&this.pushStack("layout",{before:c,after:l}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},e.prototype.layout=function(){var t,r=this.get("layoutController"),n=this.get("layout");if(!(!n||!r)){if(n.workerEnabled){r.layout();return}!((t=r.layoutMethods)===null||t===void 0)&&t.length?r.relayout(!0):r.layout()}},e.prototype.collapseCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),!this.destroyed){if((0,p.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"collapse",item:t});var a=t.getModel(),o=this.get("itemController");o.collapseCombo(t,r),a.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(x){c||Io(x,function(m){if(c&&m.depth<=a.depth)return!1;if(a.id===m.id&&(c=!0),c){var C=n.findById(m.id);C&&C.getType&&C.getType()==="combo"&&(u=u.concat(C.getNodes()),u=u.concat(C.getCombos()))}return!0})});var l={};s.forEach(function(x){var m=x.getModel(),C=m.isVEdge,R=m.size,V=R===void 0?1:R;if(!(x.isVisible()&&!C)){var Q=x.getSource(),rt=x.getTarget(),st=null,lt;if(Q.getModel().id===a.id||u.includes(Q)&&!u.includes(rt)?(st=rt,lt=!1):(rt.getModel().id===a.id||!u.includes(Q)&&u.includes(rt))&&(st=Q,lt=!0),st){if(C){n.removeItem(x,!1);return}for(var Ct=st.getModel();!st.isVisible();){var At=Ct.parentId,Nt=Ct.comboId,Kt=At||Nt;if(st=n.findById(Kt),!st||!Kt)return;Ct=st.getModel()}var ge=Ct.id,ue=lt?{source:ge,target:a.id,size:V,isVEdge:!0}:{source:a.id,target:ge,size:V,isVEdge:!0},Ae="".concat(ue.source,"-").concat(ue.target);if(l[Ae]){l[Ae].size+=V;return}l[Ae]=ue}}}),this.addItems(Object.values(l).map(function(x){return{type:"vedge",model:x}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},e.prototype.expandCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),(0,p.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.expandCombo(t,r),a.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(x){c||Io(x,function(m){if(c&&m.depth<=a.depth)return!1;if(a.id===m.id&&(c=!0),c){var C=n.findById(m.id);C&&C.getType&&C.getType()==="combo"&&(u=u.concat(C.getNodes()),u=u.concat(C.getCombos()))}return!0})});var l={};s.forEach(function(x){if(!(x.isVisible()&&!x.getModel().isVEdge)){var m=x.getSource(),C=x.getTarget(),R=m.get("id"),V=C.get("id"),Q=null,rt;if(R===a.id||u.includes(m)&&!u.includes(C)?(Q=C,rt=!1):V===a.id||!u.includes(m)&&u.includes(C)?(Q=m,rt=!0):u.includes(m)&&u.includes(C)&&m.isVisible()&&C.isVisible()&&x.show(),Q){var st=x.getModel(),lt=st.isVEdge,Ct=st.size,At=Ct===void 0?1:Ct;if(lt){n.removeItem(x,!1);return}for(var Nt=Q.getModel();!Q.isVisible();){var Kt=Nt.parentId,ge=Nt.comboId,ue=Kt||ge;if(Q=n.findById(ue),!Q||!ue)return;Nt=Q.getModel()}for(var Ae=Nt.id,Ke=rt?C:m,Gr=Ke.getModel();!Ke.isVisible();){var wr=Gr.parentId,Mr=Gr.comboId,vr=wr||Mr;if(Ke=n.findById(vr),!Ke||!vr)return;if(Gr.comboId===a.id||Gr.parentId===a.id)break;Gr=Ke.getModel()}var sn=Gr.id;if(Ae){var nn=rt?{source:Ae,target:sn,isVEdge:!0,size:At}:{source:sn,target:Ae,isVEdge:!0,size:At},mr="".concat(nn.source,"-").concat(nn.target);if(l[mr]){l[mr].size+=At;return}l[mr]=nn}}}}),this.addItems(Object.values(l).map(function(x){return{type:"vedge",model:x}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})},e.prototype.collapseExpandCombo=function(t,r){if(r===void 0&&(r=!0),(0,p.isString)(t)&&(t=this.findById(t)),!(!t||t.getType&&t.getType()!=="combo")){for(var n=t.getModel(),a=this.findById(n.parentId);a;){var o=a.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),a=void 0;return}a=this.findById(o.parentId)}var s=n.collapsed;s?this.expandCombo(t,r):this.collapseCombo(t,r),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,r){var n=t;return(0,p.isString)(t)&&(n=this.findById(t)),n.getNeighbors(r)},e.prototype.getNodeDegree=function(t,r,n){r===void 0&&(r=void 0),n===void 0&&(n=!1);var a=t;(0,p.isString)(t)&&(a=this.findById(t));var o=this.get("degrees");(!o||n)&&(o=zr(this.save()),this.set("degrees",o));var s=o[a.getID()],u=0;if(!s)return 0;switch(r){case"in":u=s.inDegree;break;case"out":u=s.outDegree;break;case"all":u=s;break;default:u=s.degree;break}return u},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,r,n){if(t===void 0&&(t="update"),n===void 0&&(n="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=r?(0,p.clone)(r):{before:{},after:(0,p.clone)(this.save())};n==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{action:t,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix");return(!n||!t)&&(n=Te(this.save(),r),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!n||!t)&&(n=Te(this.save(),r),this.set("adjMatrix",n)),(!a||!t)&&(a=Nr(this.save(),r),this.set("shortestPathMatrix",a)),a},e.prototype.on=function(t,r,n){return i.prototype.on.call(this,t,r,n)},e.prototype.destroy=function(){var t,r,n,a,o;this.emit("beforedestroy"),this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(r=this.get("modeController"))===null||r===void 0||r.destroy(),(n=this.get("viewController"))===null||n===void 0||n.destroy(),(a=this.get("stateController"))===null||a===void 0||a.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},e.prototype.createHull=function(t){if(!t.members||t.members.length<1){console.warn("Create hull failed! The members is empty.");return}var r=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),(!r||r.get("destroyed"))&&(r=this.get("group").addGroup({id:"hullGroup"}),r.toBack(),this.set("hullGroup",r)),n[t.id])return console.warn("Existed hull id."),n[t.id];var a=r.addGroup({id:"".concat(t.id,"-container")}),o=new Xg(this,(0,K.__assign)((0,K.__assign)({},t),{group:a})),s=o.id;return n[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var r,n;(0,p.isString)(t)?n=this.getHullById(t):n=t,(r=this.get("hullMap"))===null||r===void 0||delete r[n.id],n.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(r){var n=t[r];n.destroy()}),this.set("hullMap",{}))},e}(Me),Yg=Rm;function hd(i){"@babel/helpers - typeof";return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hd(i)}var ah=Bt,Vg="-shape",vd="-label",fv=["startArrow","endArrow"],jg={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Bm={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},cv={edge:Bm,node:jg,combo:jg},dd="-label-bg",gd={options:{labelCfg:{style:{fontFamily:Fn.windowFontFamily}},descriptionCfg:{style:{fontFamily:Fn.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return t==="move"||t!=null&&t.includes("bbox")?e:(0,p.deepMix)({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var r=this.drawShape(e,t);if(r.set("className",this.itemType+Vg),t.shapeMap[this.itemType+Vg]=r,e.label){var n=this.drawLabel(e,t);n.set("className",this.itemType+vd),t.shapeMap[this.itemType+vd]=n}return r},afterDraw:function(e,t,r){},drawShape:function(e,t){return null},drawLabel:function(e,t){var r=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,n=r||{},a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var u=s.getBBox(),f=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":f=ah(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break;case"lefttop":f=ah(f,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":f=ah(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);break;default:f=ah(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break}else f=ah(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);s.setMatrix(f)}if(a.background){var c=this.drawLabelBg(e,t,s),l=this.itemType+dd;c.set("classname",l),t.shapeMap[l]=c,s.toFront()}return s},drawLabelBg:function(e,t,r){var n=this.options.labelCfg,a=(0,p.mix)({},n,e.labelCfg),o=this.getLabelBgStyleByPosition(r,a),s=t.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return t.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,t,r){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,r){var n=this.getLabelStyleByPosition(e,t,r),a="".concat(this.itemType,"Label"),o=Fn[a]?Fn[a].style:null;return(0,K.__assign)((0,K.__assign)((0,K.__assign)({},o),n),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,r){this.updateShapeStyle(e,t,r),this.updateLabel(e,t,r)},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=t.getKeyShape(),s=(0,p.mix)({},o.attr(),e.style),u=function(l){var x,m=s[l];if((0,p.isPlainObject)(m)){var C=((n=a.shapeMap)===null||n===void 0?void 0:n[l])||a.find(function(R){return R.get("name")===l});C==null||C.attr(m)}else o.attr((x={},x[l]=m,x))};for(var f in s)u(f)},updateLabel:function(e,t,r){var n,a,o=t.getContainer(),s=(this.mergeStyle||this.getOptions({},r)||{}).labelCfg,u=s===void 0?{}:s,f=this.itemType+vd,c=o.shapeMap[f]||o.find(function(lt){return lt.get("className")===f}),l=this.itemType+dd,x=o.shapeMap[l]||o.find(function(lt){return lt.get("className")===l});if(c&&e.label===void 0&&(o.removeChild(c),delete o.shapeMap[f],x&&(o.removeChild(x),delete o.shapeMap[l])),e.label||e.label==="")if(c){(!r||r==="bbox|label"||this.itemType==="edge"&&r!=="style")&&(u=(0,p.deepMix)(u,e.labelCfg));var C=this.getLabelStyleByPosition(e,u,o),R=(n=e.labelCfg)===null||n===void 0?void 0:n.style,V=(0,K.__assign)((0,K.__assign)({},C),R),Q=V.rotate;if(delete V.rotate,!isNaN(Q)&&Q!==""){var rt=[1,0,0,0,1,0,0,0,1];rt=ah(rt,[["t",-V.x,-V.y],["r",Q],["t",V.x,V.y]]),V.matrix=rt,c.attr(V)}else((a=c.getMatrix())===null||a===void 0?void 0:a[4])!==1&&c.resetMatrix(),c.attr(V);if(!x)V.background&&(x=this.drawLabelBg(e,o,c),x.set("classname",l),o.shapeMap[l]=x,c.toFront());else if(V.background){var st=this.getLabelBgStyleByPosition(c,u);x.attr(st)}else o.removeChild(x)}else{var m=this.drawLabel(e,o);m.set("className",f),o.shapeMap[f]=m}},afterUpdate:function(e,t){},setState:function(e,t,r){var n,a,o,s=r.get("keyShape");if(!(!s||s.destroyed)){var u=r.getType(),f=(0,p.isBoolean)(t)?e:"".concat(e,":").concat(t),c=this.getStateStyle(f,r),l=r.getStateStyle(f);if(!(!l&&!c)){var x=(0,p.mix)({},l||c),m=r.getContainer(),C={x:1,y:1,cx:1,cy:1,matrix:1};if(u==="combo"&&(C.r=1,C.width=1,C.height=1),t){var R=function(vr){var sn,nn=x[vr];if((0,p.isPlainObject)(nn)&&!fv.includes(vr)){var mr=((o=m.shapeMap)===null||o===void 0?void 0:o[vr])||m.find(function(Dr){return Dr.get("name")===vr});mr==null||mr.attr(nn)}else s.attr((sn={},sn[vr]=nn,sn))};for(var V in x)R(V)}else{var Q=ye(r.getCurrentStatesStyle()),rt=r.getModel(),st=(0,p.mix)({},rt.style,ye(r.getOriginStyle())),lt=s.get("name"),Ct=s.attr(),At={};Object.keys(Ct).forEach(function(Mr){if(Mr!=="img"){var vr=Ct[Mr];vr&&hd(vr)==="object"?At[Mr]=(0,p.clone)(vr):At[Mr]=vr}});var Nt={},Kt=function(vr){var sn=x[vr];if((0,p.isPlainObject)(sn)&&!fv.includes(vr)){var nn=m.shapeMap[vr]||m.find(function(qr){return qr.get("name")===vr});if(nn){var mr=ye(nn.attr());(0,p.each)(sn,function(qr,un){if(vr===lt&&At[un]&&!C[un]){delete At[un];var Dn=st[vr][un]||cv[u][un];s.attr(un,Dn)}else if(mr[un]||mr[un]===0){delete mr[un];var Rn=st[vr][un]||cv[u][un];nn.attr(un,Rn)}}),Nt[vr]=mr}}else if(At[vr]&&!C[vr]){delete At[vr];var Dr=st[vr]||(st[lt]?st[lt][vr]:void 0)||cv[u][vr];s.attr(vr,Dr)}};for(var ge in x)Kt(ge);lt?Nt[lt]=At:(0,p.mix)(Nt,At);for(var V in Q)if(!C[V]){var ue=Q[V];(!(0,p.isPlainObject)(ue)||fv.includes(V))&&(lt?((0,p.mix)(st[lt],(a={},a[V]=ue,a)),delete st[V]):(0,p.mix)(st,(n={},n[V]=ue,n)),delete Q[V])}var Ae={};(0,p.deepMix)(Ae,st,Nt,Q);var Ke=!1,Gr=function(vr){var sn,nn,mr=Ae[vr];if((0,p.isPlainObject)(mr)&&!fv.includes(vr)){var Dr=m.shapeMap[vr]||m.find(function(un){return un.get("name")===vr});Dr&&((Dr.get("type")==="text"||Dr.get("labelRelated"))&&(delete mr.x,delete mr.y,delete mr.matrix),vr===lt&&(u==="combo"&&(delete mr.r,delete mr.width,delete mr.height),Ke=!0),Dr.attr(mr))}else if(!Ke){var qr=mr||cv[u][vr];u==="combo"?lt||s.attr((sn={},sn[vr]=qr,sn)):s.attr((nn={},nn[vr]=qr,nn))}};for(var wr in Ae)Gr(wr)}}}},getStateStyle:function(e,t){var r=t.getModel(),n=t.getType(),a=this.getOptions(r),o=a.stateStyles,s=a.style,u=s===void 0?{}:s,f=r.stateStyles?r.stateStyles[e]:o&&o[e];return n==="combo"?(0,p.clone)(f):(0,p.mix)({},u,f)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,r,n=(e==null?void 0:e.anchorPoints)||((t=this.getCustomConfig(e))===null||t===void 0?void 0:t.anchorPoints)||((r=this.options)===null||r===void 0?void 0:r.anchorPoints);return n}},Fm={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Fn.nodeLabel.offset,getSize:function(e){var t,r=((t=this.mergeStyle)===null||t===void 0?void 0:t.size)||e.size||this.getOptions({}).size||Fn.defaultNode.size;return(0,p.isArray)(r)&&r.length===1&&(r=[r[0],r[0]]),(0,p.isArray)(r)||(r=[r,r]),r},getLabelStyleByPosition:function(e,t){var r=t.maxLength,n=e.label;r&&(n=St(n,r));var a=t.position||this.labelPosition;if(a==="center")return{x:0,y:0,text:n,textBaseline:"middle",textAlign:"center"};var o=t.offset;(0,p.isNil)(o)&&(o=this.offset);var s=this.getSize(e),u;switch(a){case"top":u={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":u={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":u={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:u={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return u.text=n,u},getLabelBgStyleByPosition:function(e,t){var r;if(!e)return{};var n=(r=t.style)===null||r===void 0?void 0:r.background;if(!n)return{};var a=e.getBBox(),o=ed(n.padding),s=a.width+o[1]+o[3],u=a.height+o[0]+o[2];return(0,K.__assign)((0,K.__assign)({x:a.minX-o[3],y:a.minY-o[0]},n),{width:s,height:u})},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=a,a},updateLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Ae){return Ae.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Ae){return Ae.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Ae){return Ae.get("className")==="link-point-top"}),s=t.shapeMap["link-point-bottom"]||t.find(function(Ae){return Ae.get("className")==="link-point-bottom"}),u;n&&(u=n.attr()),a&&!u&&(u=a.attr()),o&&!u&&(u=o.attr()),s&&!u&&(u=s.attr()),u||(u=r);var f=(0,p.mix)({},u,e.linkPoints),c=f.fill,l=f.stroke,x=f.lineWidth,m=f.size/2;m||(m=f.r);var C=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},R=C.left,V=C.right,Q=C.top,rt=C.bottom,st=this.getSize(e),lt=st[0],Ct=st[1],At={r:m,fill:c,stroke:l,lineWidth:x};if(n)!R&&R!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,K.__assign)((0,K.__assign)({},At),{x:-lt/2,y:0}));else if(R){var Nt="link-point-left";t.shapeMap[Nt]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},At),{x:-lt/2,y:0}),className:Nt,name:Nt,isAnchorPoint:!0})}if(a)!V&&V!==void 0&&(a.remove(),delete t.shapeMap["link-point-right"]),a.attr((0,K.__assign)((0,K.__assign)({},At),{x:lt/2,y:0}));else if(V){var Kt="link-point-right";t.shapeMap[Kt]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},At),{x:lt/2,y:0}),className:Kt,name:Kt,isAnchorPoint:!0})}if(o)!Q&&Q!==void 0&&(o.remove(),delete t.shapeMap["link-point-top"]),o.attr((0,K.__assign)((0,K.__assign)({},At),{x:0,y:-Ct/2}));else if(Q){var ge="link-point-top";t.shapeMap[ge]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},At),{x:0,y:-Ct/2}),className:ge,name:ge,isAnchorPoint:!0})}if(s)!rt&&rt!==void 0?(s.remove(),delete t.shapeMap["link-point-bottom"]):s.attr((0,K.__assign)((0,K.__assign)({},At),{x:0,y:Ct/2}));else if(rt){var ue="link-point-bottom";t.shapeMap[ue]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},At),{x:0,y:Ct/2}),className:ue,name:ue,isAnchorPoint:!0})}},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,K.__assign)({},r)),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)},updateIcon:function(e,t){var r=this,n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},s=o.show,u=o.text,f=n.shapeMap["".concat(this.type,"-icon")]||n.find(function(Q){return Q.get("name")==="".concat(r.type,"-icon")});if(f)if(s||s===void 0){var c=(0,p.mix)({},f.attr(),a),l=c.width,x=l===void 0?20:l,m=c.height,C=m===void 0?20:m;(c.fontFamily==="iconfont"||c.hasOwnProperty("text"))&&(x=0,C=0),f.attr((0,K.__assign)((0,K.__assign)({},c),{x:-x/2,y:-C/2}))}else f.remove(),delete n.shapeMap["".concat(this.type,"-icon")];else if(s){var R="".concat(this.type,"-icon");if(u)n.shapeMap[R]=n.addShape("text",{attrs:(0,K.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:R,name:R});else{var x=a.width,C=a.height;n.shapeMap[R]=n.addShape("image",{attrs:(0,K.__assign)((0,K.__assign)({},a),{x:-x/2,y:-C/2}),className:R,name:R})}var V=n.shapeMap["node-label"]||n.find(function(Q){return Q.get("name")==="node-label"});V&&V.toFront()}}},Gm=(0,K.__assign)((0,K.__assign)({},gd),Fm);Ms.registerNode("single-node",Gm);var lv="edge-shape";function zm(i){var e=i;return i==="start"?e="end":i==="end"&&(e="start"),e}var Um={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Fn.defaultEdge.size,style:{x:0,y:0,stroke:Fn.defaultEdge.style.stroke,lineAppendWidth:Fn.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Fn.edgeLabel.style.fill,fontSize:Fn.edgeLabel.style.fontSize,fontFamily:Fn.windowFontFamily}},stateStyles:(0,K.__assign)({},Fn.edgeStateStyles)},getPath:function(e){var t=[];return(0,p.each)(e,function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,p.mix)({},t,r,e.style),a=e.size||Fn.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,u=this.getControlPoints(e),f=[o];u&&(f=f.concat(u)),f.push(s);var c=this.getPath(f),l=(0,p.mix)({},Fn.defaultEdge.style,{stroke:Fn.defaultEdge.color,lineWidth:a,path:c},n);return l},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=((n=t.getKeyShape)===null||n===void 0?void 0:n.call(t))||a.shapeMap["edge-shape"],s=e.size;e=this.getPathPoints(e);var u=e.startPoint,f=e.endPoint,c=this.getControlPoints(e),l=[u];c&&(l=l.concat(c)),l.push(f);var x=o.attr(),m=e.style||{};m.stroke===void 0&&(m.stroke=e.color);var C=e.sourceNode,R=e.targetNode,V={radius:m.radius};c||(V={source:C,target:R,offset:m.offset,radius:m.radius});var Q=this.getPath(l,V),rt={};r==="move"?rt={path:Q}:(x.endArrow&&m.endArrow===!1&&(e.style.endArrow={path:""}),x.startArrow&&m.startArrow===!1&&(e.style.startArrow={path:""}),rt=(0,K.__assign)({},e.style),rt.lineWidth===void 0&&(rt.lineWidth=((0,p.isNumber)(s)?s:s==null?void 0:s[0])||x.lineWidth),rt.path===void 0&&(rt.path=Q),rt.stroke===void 0&&(rt.stroke=x.stroke||e.color)),o&&o.attr(rt)},getLabelStyleByPosition:function(e,t,r){var n=t.position||this.labelPosition,a={},o=r==null?void 0:r.shapeMap[lv],s;n==="start"?s=0:n==="end"?s=1:s=.5;var u=t.refX||this.refX,f=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return a.x=e.startPoint.x+u,a.y=e.startPoint.y+f,a.text=e.label,a;var c;(0,p.isNil)(t.autoRotate)?c=this.labelAutoRotate:c=t.autoRotate;var l=cf(o,s,u,f,c);return a.x=l.x,a.y=l.y,a.rotate=l.rotate,a.textAlign=this._getTextAlign(n,l.angle),a.text=e.label,a},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var r=e.getBBox(),n=t.style&&t.style.background;if(!n)return{};var a=n.padding,o=r.width+a[1]+a[3],s=r.height+a[0]+a[2],u=(0,K.__assign)((0,K.__assign)({},n),{width:o,height:s,x:r.minX-a[3],y:r.minY-a[0],matrix:[1,0,0,0,1,0,0,0,1]}),f;return(0,p.isNil)(t.autoRotate)?f=this.labelAutoRotate:f=t.autoRotate,f&&(u.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),u},_getTextAlign:function(e,t){var r="center";return t?(t=t%(Math.PI*2),e!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?r=e:r=zm(e)),r):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("path",{className:lv,name:lv,attrs:r});return t.shapeMap[lv]=n,n},drawLabel:function(e,t){var r=this.options.labelCfg,n=(0,p.deepMix)({},r,e.labelCfg),a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,name:"text-shape",labelRelated:!0,draggable:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),a.background){var u=this.drawLabelBg(e,t,s,a,o),f=this.itemType+dd;u.set("classname",f),t.shapeMap[f]=u,s.toFront()}return s},drawLabelBg:function(e,t,r,n,a){var o=this.options.labelCfg,s=(0,p.deepMix)({},o,e.labelCfg),u=this.getLabelBgStyleByPosition(r,s),f=t.addShape("rect",{name:"text-bg-shape",attrs:u,labelRelated:!0});return t.shapeMap["text-bg-shape"]=f,f}},Wm=(0,K.__assign)((0,K.__assign)({},gd),Um);Ms.registerEdge("single-edge",Wm),Ms.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Ms.registerEdge("spline",{getPath:function(e){var t=Pg(e);return t}},"single-edge"),Ms.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint,n={x:(t.x+r.x)/2,y:(t.y+r.y)/2},a,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],a=so(t,o,r),t.x<=r.x&&t.y>r.y?this.clockwise=a.x>o.x?0:1:t.x<=r.x&&t.y<r.y?this.clockwise=a.x>o.x?1:0:t.x>r.x&&t.y<=r.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)===(r.x-t.x)/(r.y-t.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),(0,p.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:r.x-t.x,y:r.y-t.y},u=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+u)+n.x,y:e.curveOffset*Math.sin(-Math.PI/2+u)+n.y},a=so(t,o,r)}var f=ts(t,a),c=[{x:f,y:f}];return c},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),e.length===2?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),Ms.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var r=e.startPoint,n=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,p.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,p.isArray)(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var a=uv(r,n,e.curvePosition,e.curveOffset);t=[a]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),Ms.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,p.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,p.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var r=e.startPoint,n=e.endPoint,a=uv(r,n,e.curvePosition[0],e.curveOffset[0]),o=uv(r,n,e.curvePosition[1],e.curveOffset[1]);t=[a,o]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),Ms.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,p.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,p.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,p.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.y-t.y,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x,y:t.y+n*this.curvePosition[0]+a[0]},s={x:r.x,y:r.y-n*this.curvePosition[1]+a[1]};return[o,s]}},"cubic"),Ms.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,p.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,p.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,p.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.x-t.x,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x+n*this.curvePosition[0]+a[0],y:t.y},s={x:r.x-n*this.curvePosition[1]+a[1],y:r.y},u=[o,s];return u}},"cubic"),Ms.registerEdge("loop",{getPathPoints:function(e){return ju(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var Xm={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Fn.comboLabel.refX,refY:Fn.comboLabel.refY,options:{style:{stroke:Fn.defaultCombo.style.stroke,fill:Fn.defaultCombo.style.fill,lineWidth:Fn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Fn.comboLabel.style.fill,fontSize:Fn.comboLabel.style.fontSize,fontFamily:Fn.windowFontFamily}},stateStyles:(0,K.__assign)({},Fn.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=(0,p.clone)(e.size||this.options.size||Fn.defaultCombo.size);return(0,p.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,p.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,p.isArray)(a)&&(a=Math.max.apply(Math,a));var o=t.refX,s=t.refY;(0,p.isNil)(o)&&(o=this.refX),(0,p.isNil)(s)&&(s=this.refY);var u=this.getSize(e),f=Math.max(n.r,u[0]/2)||u[0]/2,c=f+a,l;switch(r){case"top":l={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":l={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":l={x:-c+o,y:0,textAlign:"left"};break;case"center":l={x:0,y:0,text:e.label,textAlign:"center"};break;default:l={x:c+o,y:0,textAlign:"right"};break}return l.text=e.label,l},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"combo-shape"});return a},updateCollapsedIcon:function(e,t,r){var n=e.collapsed,a=e.collapsedSubstituteIcon,o=a===void 0?{}:a,s=Object.assign({},this.options.collapsedSubstituteIcon,o),u=s.show,f=s.img,c=s.width,l=s.height,x=t.getContainer(),m=x.find(function(Q){return Q.get("name")==="combo-collapsed-substitute-icon"}),C=m&&!m.destroyed,R=t.get("keyShape");if(n&&u){if(C)m.show();else{var V={width:c||r.r*2||r.width,height:l||r.r*2||r.height};m=x.addShape("image",{attrs:(0,K.__assign)({img:f,x:-V.width/2,y:-V.height/2},V),name:"combo-collapsed-substitute-icon",draggable:!0})}R.hide()}else C&&(m.hide(),R.show())},updateShape:function(e,t,r){var n=this,a=t.get("keyShape"),o=t.get("animate"),s=o&&(e.animate===void 0?this.options.animate:e.animate);s&&a.animate?(e.collapsed||this.updateCollapsedIcon(e,t,r),a.animate(r,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&n.updateCollapsedIcon(e,t,r)}})):(a.attr((0,K.__assign)({},r)),this.updateCollapsedIcon(e,t,r)),this.updateLabel(e,t)}},Ym=(0,K.__assign)((0,K.__assign)({},gd),Xm);Ms.registerCombo("single-combo",Ym),Ms.registerCombo("circle",{options:{size:[Fn.defaultCombo.size[0],Fn.defaultCombo.size[0]],padding:Math.max.apply(Math,Fn.defaultCombo.padding),animate:!0,style:{stroke:Fn.defaultCombo.style.stroke,fill:Fn.defaultCombo.style.fill,lineWidth:Fn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Fn.comboLabel.style.fill,fontSize:Fn.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,K.__assign)({},Fn.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e);delete r.height,delete r.width;var n=t.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0});return n},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,p.isArray)(r)&&(r=Math.max.apply(Math,r));var n={stroke:e.color},a=(0,p.mix)({},t,n,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;if(o)s=(0,p.isNumber)(o)?o/2:o[0]/2;else{var u=this.getSize(e);!(0,p.isNumber)(a.r)||isNaN(a.r)?s=u[0]/2||Fn.defaultCombo.style.r:s=Math.max(a.r,u[0]/2)||u[0]/2}a.r=s+r;var f=(0,K.__assign)({x:0,y:0},a);return e.style?e.style.r=s:e.style={r:s},f},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,p.isArray)(n)&&(n=Math.max.apply(Math,n));var a=(0,p.clone)(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;o?s=(0,p.isNumber)(o)?o/2:o[0]/2:s=Math.max(a.r,r[0]/2)||r[0]/2,a.r=s+n;var u=t.get("sizeCache");u&&(u.r=a.r);var f={stroke:e.color},c=t.get("keyShape"),l=(0,p.mix)({},c.attr(),f,a);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,t,l,!0)}},"single-combo"),Ms.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Fn.defaultCombo.style.stroke,fill:Fn.defaultCombo.style.fill,lineWidth:Fn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Fn.comboLabel.style.fill,fontSize:Fn.comboLabel.style.fontSize,fontFamily:Fn.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,K.__assign)({},Fn.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0});return n},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,p.isNumber)(a)&&(a=[a,a,a,a]);var o=t.refX,s=t.refY;(0,p.isNil)(o)&&(o=this.refX),(0,p.isNil)(s)&&(s=this.refY);var u=-n.width/2-a[3],f=n.width/2+a[1],c=-n.height/2-a[0],l=n.height/2+a[2],x;switch(r){case"top":x={x:u+o,y:c+s,textBaseline:"top",textAlign:"left"};break;case"bottom":x={x:0,y:l+s,textBaseline:"top",textAlign:"center"};break;case"left":x={x:u+s,y:0,textAlign:"left"};break;case"center":x={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":x={x:0,y:c+s,textBaseline:"top",textAlign:"center"};break;default:x={x:f+o,y:0,textAlign:"right"};break}return x.text=e.label,x},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,p.isNumber)(r)&&(r=[r,r,r,r]);var n={stroke:e.color},a=(0,p.mix)({},t,n,e.style),o=this.getSize(e),s,u,f=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;f?(0,p.isNumber)(f)?(s=f,u=f):(s=f[0],u=f[1]):(!(0,p.isNumber)(a.width)||isNaN(a.width)?s=o[0]||Fn.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!(0,p.isNumber)(a.height)||isNaN(a.height)?u=o[1]||Fn.defaultCombo.style.height:u=Math.max(a.height,o[1])||o[1]);var c=-s/2-r[3],l=-u/2-r[0];a.width=s+r[1]+r[3],a.height=u+r[0]+r[2];var x=(0,K.__assign)({x:c,y:l},a);return e.style?(e.style.width=s,e.style.height=u):e.style={width:s,height:u},x},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,p.isNumber)(n)&&(n=[n,n,n,n]);var a=(0,p.clone)(e.style),o,s,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?(0,p.isNumber)(u)?(o=u,s=u):(o=u[0],s=u[1]):(o=Math.max(a.width,r[0])||r[0],s=Math.max(a.height,r[1])||r[1]),a.width=o+n[1]+n[3],a.height=s+n[0]+n[2];var f=t.get("sizeCache");f&&(f.width=a.width,f.height=a.height),a.x=-o/2-n[3],a.y=-s/2-n[0];var c={stroke:e.color},l=t.get("keyShape"),x=(0,p.mix)({},l.attr(),c,a);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,t,x,!1)}},"single-combo"),Ms.registerNode("simple-circle",{options:{size:Fn.defaultNode.size,style:{x:0,y:0,stroke:Fn.defaultNode.style.stroke,fill:Fn.defaultNode.style.fill,lineWidth:Fn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Fn.nodeLabel.style.fill,fontSize:Fn.nodeLabel.style.fontSize,fontFamily:Fn.windowFontFamily}},stateStyles:(0,K.__assign)({},Fn.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var r=this.getShapeStyle(e),n="".concat(this.type,"-keyShape"),a=t.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return t.shapeMap[n]=a,a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,p.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,K.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=this.getSize(e),a={stroke:e.color,r:n[0]/2},o=t.get("keyShape"),s=(0,p.deepMix)({},o.attr(),a,e.style);this.updateShape(e,t,s,!0,r)}},"single-node"),Ms.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:Fn.defaultNode.style.stroke,fill:Fn.defaultNode.style.fill,lineWidth:Fn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Fn.nodeLabel.style.fill,fontSize:Fn.nodeLabel.style.fontSize,fontFamily:Fn.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,K.__assign)({},Fn.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return n},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,p.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,K.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,p.mix)({},a,s.attr(),u);f=(0,p.mix)(f,e.style),this.updateShape(e,t,f,!1,r)}},"single-node"),Ms.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:Fn.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e);delete n.fill;var a=t.addShape(r,{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,a),a},drawClip:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).clipCfg;if(r.show){var n=r.type,a=r.x,o=r.y,s=r.style;if(n==="circle"){var u=r.r;t.setClip({type:"circle",attrs:(0,K.__assign)({r:u,x:a,y:o},s)})}else if(n==="rect"){var f=r.width,c=r.height,l=a-f/2,x=o-c/2;t.setClip({type:"rect",attrs:(0,K.__assign)({x:l,y:x,width:f,height:c},s)})}else if(n==="ellipse"){var m=r.rx,C=r.ry;t.setClip({type:"ellipse",attrs:(0,K.__assign)({x:a,y:o,rx:m,ry:C},s)})}else if(n==="polygon"){var R=r.points;t.setClip({type:"polygon",attrs:(0,K.__assign)({points:R},s)})}else if(n==="path"){var V=r.path;t.setClip({type:"path",attrs:(0,K.__assign)({path:V},s)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),r=t.style,n=t.img,a=this.getSize(e),o=a[0],s=a[1];r&&(o=r.width||a[0],s=r.height||a[1]);var u=(0,K.__assign)({x:-o/2,y:-s/2,width:o,height:s,img:n},r);return u},updateShapeStyle:function(e,t){var r=t.getContainer(),n="".concat(this.itemType,"-shape"),a=r.shapeMap[n]||r.find(function(s){return s.get("className")===n})||t.getKeyShape(),o=this.getShapeStyle(e);a&&!a.destroyed&&a.attr(o)}},"single-node");var Hg={triangle:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2," L ").concat(n+t,",").concat(e/2," Z");return a},vee:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=20),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2,`
        L `).concat(n+2*t/3,",0 L ").concat(n+t,",").concat(e/2," Z");return a},circle:function(e,t){e===void 0&&(e=5),t===void 0&&(t=0);var r=t*2,n="M ".concat(r,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return n},rect:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=10),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(e/2,` 
        L `).concat(n,",").concat(e/2," Z");return a},diamond:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,`,0 
        L `).concat(n+t/2,",").concat(-e/2,` 
        L `).concat(n+t,`,0 
        L `).concat(n+t/2,",").concat(e/2," Z");return a},triangleRect:function(e,t,r,n,a,o){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=15),n===void 0&&(n=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,u=s+t+a,f="M ".concat(s,",0 L ").concat(s+t,",-").concat(e/2," L ").concat(s+t,",").concat(e/2,` Z
            M `).concat(u,", -").concat(r/2,`
            L `).concat(u+n," -").concat(r/2,`
            L `).concat(u+n," ").concat(r/2,`
            L `).concat(u," ").concat(r/2,`
            Z`);return f}},Kg={collapse:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e+r-4,t]]},expand:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e-r+2*r-4,t],["M",e-r+r,t-r+4],["L",e,t+r-4]]},upTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t+a],["L",e+n,t+a],["L",e,t-r],["Z"]]},downTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t-a],["L",e+n,t-a],["L",e,t+r],["Z"]]}},Fc=Ms,Vm=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],Zg=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"},jm=Bt,Hm=(0,K.__assign)((0,K.__assign)((0,K.__assign)((0,K.__assign)((0,K.__assign)((0,K.__assign)((0,K.__assign)({},D),B),w),j),b),g),{transform:jm,mat3:Wt}),zs=Hm,Km=function(){function i(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return i.prototype.initLayout=function(){},i.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},i.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var r=e.pipes;return Array.isArray(r)?r.map(function(n){return(n==null?void 0:n.type)||""}):null},i.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),r=Array.isArray(this.layoutType),n=Array.isArray(t);return r&&n?this.layoutType.every(function(a,o){return a===t[o]}):Array.isArray(t)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},i.prototype.refreshLayout=function(){var e=this,t=e.graph,r=e.layoutType,n=e.layoutCfg,a=n===void 0?{}:n;if(t){var o=a.animate,s=o===void 0&&(r==="force"||r==="force2"),u=Zg(r)&&(o||s);t.get("animate")&&!u?t.positionsAnimate(r==="comboCombined"):t.refreshPositions(r==="comboCombined")}},i.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,r=(0,K.__rest)(e,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,!t&&this.layout()},i.prototype.changeData=function(e){this.layout(e)},i.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return e==null||e.forEach(function(r){var n,a=(n=r.getType)===null||n===void 0?void 0:n.call(r);a&&t.push(a),r.destroy()}),this.layoutMethods=[],t},i.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},i.prototype.setDataFromGraph=function(){for(var e,t=[],r=[],n=[],a=[],o=[],s=[],u=[],f=this.graph.getNodes(),c=this.graph.getEdges(),l=this.graph.getCombos(),x=f.length,m=0;m<x;m++){var C=f[m];if(!(!C||C.destroyed)){var R=C.getModel();if(!C.isVisible()){r.push(R);continue}t.push(R)}}for(var V=c.length,m=0;m<V;m++){var Q=c[m];if(!(!Q||Q.destroyed)){var R=Q.getModel();if(!Q.isVisible()){a.push(R);continue}R.isComboEdge?o.push(R):n.push(R)}}for(var rt=l.length,m=0;m<rt;m++){var st=l[m];if(!st.destroyed){var R=st.getModel();if(!st.isVisible()){u.push(R);continue}s.push(R)}}return{nodes:t,hiddenNodes:r,edges:n,hiddenEdges:a,combos:s,hiddenCombos:u,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(lt){return lt.getModel()})}},i.prototype.relayout=function(e){var t=this,r=this,n=r.graph,a=r.layoutMethods,o=r.layoutCfg;if(!(!n||n.get("destroyed"))){var s=Promise.resolve();if(e){this.data=this.setDataFromGraph();var u=this.data.nodes;if(!u)return!1;s=this.initPositions(o.center,u)}n.emit("beforelayout"),a==null||a.forEach(function(f,c){var l=o[c]||o;s=s.then(function(){var x,m=t.execLayoutMethod(l,c);return c===a.length-1&&((x=o.onAllLayoutEnd)===null||x===void 0||x.call(o)),m})})}},i.prototype.filterLayoutData=function(e,t){var r=e.nodes,n=e.edges,a=(0,K.__rest)(e,["nodes","edges"]);if(!r)return e;var o,s;(0,p.isFunction)(t==null?void 0:t.nodesFilter)?o=t.nodesFilter:o=function(){return!0};var u=r.filter(o);if((0,p.isFunction)(t==null?void 0:t.edgesFilter))s=t.edgesFilter;else{var f=u.reduce(function(c,l){return c[l.id]=!0,c},{});s=function(l){return f[l.source]&&f[l.target]}}return(0,K.__assign)({nodes:u,edges:n.filter(s)},a)},i.prototype.getLayoutBBox=function(e){var t=this.graph,r=(0,p.groupBy)(t.getNodes(),function(o){return o.getModel().layoutOrder}),n=Object.values(r).map(function(o){var s=mg(o);return s.size=[s.width,s.height],s}),a=Object.values((0,p.groupBy)(e,"layoutOrder"));return{groupNodes:a,layoutNodes:n}},i.prototype.layoutAnimate=function(){},i.prototype.moveToZero=function(){var e=this.graph,t=e.get("data"),r=t.nodes;if(!(r[0].x===void 0||r[0].x===null||Df(r[0].x))){for(var n=[0,0],a=r.length,o=0;o<a;o++){var s=r[o];n[0]+=s.x,n[1]+=s.y}n[0]/=r.length,n[1]/=r.length;for(var o=0;o<a;o++){var s=r[o];s.x-=n[0],s.y-=n[1]}}},i.prototype.initPositions=function(e,t){var r;return(0,K.__awaiter)(this,void 0,void 0,function(){var n,a,o;return(0,K.__generator)(this,function(s){return n=this.graph,t!=null&&t.length?(a=t.filter(function(u){return Df(u.x)||Df(u.y)}),o=a?a.length:0,o?[2,(r=this.initWithPreset)===null||r===void 0?void 0:r.call(this,function(){},function(){var u=n.get("width")*.85,f=n.get("height")*.85,c=Math.ceil(Math.sqrt(o)*(u/f)),l=Math.ceil(o/c),x=u/(c-1),m=f/(l-1);(!isFinite(x)||!x)&&(x=0),(!isFinite(m)||!x)&&(m=0);for(var C=e[0]-u/2,R=e[1]-f/2,V=!0,Q=0;Q<o;Q++){var rt=a[Q];Df(+rt.x)&&(V=!1,rt.x=Q%c*x+C),Df(+rt.y)&&(V=!1,rt.y=Math.floor(Q/c)*m+R)}})]:[2]):[2,Promise.resolve()]})})},i.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},i}(),$g=Km,Zm=function(){function i(e){this.graph=e,this.destroyed=!1,this.initEvents()}return i}(),qg=Zm,uc=Fc.registerNode,Qg=Fc.registerEdge,$m=Fc.registerCombo,Jg=Mt.registerBehavior,Ln=Fn,iM={version:Fn.version,AbstractGraph:Yg,BaseGlobal:Ln,Util:zs,Shape:Fc,Node:ud,Edge:Ag,Combo:Lg,Hull:Xg,registerNode:Fc.registerNode,registerEdge:Fc.registerEdge,registerCombo:Fc.registerCombo,registerBehavior:Mt.registerBehavior,Arrow:Hg,Marker:Kg,AbstractLayout:$g,AbstractEvent:qg},qm=z(10369);function Qm(){return window?window.devicePixelRatio:1}function t0(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function Sl(i,e,t,r,n,a){return n>=i&&n<=i+t&&a>=e&&a<=e+r}function Th(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function Jm(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function e0(i,e){return i[0]===e[0]&&i[1]===e[1]}var t1=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,e1=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,r1=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,r0=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function n0(i,e){var t=i.match(r0);(0,p.each)(t,function(r){var n=r.split(":");e.addColorStop(n[0],n[1])})}function n1(i,e,t){var r=t1.exec(t),n=parseFloat(r[1])%360*(Math.PI/180),a=r[2],o=e.getBBox(),s,u;n>=0&&n<1/2*Math.PI?(s={x:o.minX,y:o.minY},u={x:o.maxX,y:o.maxY}):1/2*Math.PI<=n&&n<Math.PI?(s={x:o.maxX,y:o.minY},u={x:o.minX,y:o.maxY}):Math.PI<=n&&n<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},u={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},u={x:o.maxX,y:o.minY});var f=Math.tan(n),c=f*f,l=(u.x-s.x+f*(u.y-s.y))/(c+1)+s.x,x=f*(u.x-s.x+f*(u.y-s.y))/(c+1)+s.y,m=i.createLinearGradient(s.x,s.y,l,x);return n0(a,m),m}function a1(i,e,t){var r=e1.exec(t),n=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(o===0){var u=s.match(r0);return u[u.length-1].split(":")[1]}var f=e.getBBox(),c=f.maxX-f.minX,l=f.maxY-f.minY,x=Math.sqrt(c*c+l*l)/2,m=i.createRadialGradient(f.minX+c*n,f.minY+l*a,0,f.minX+c/2,f.minY+l/2,o*x);return n0(s,m),m}function i1(i,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var r,n,a=r1.exec(t),o=a[1],s=a[2];function u(){r=i.createPattern(n,o),e.set("pattern",r),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return n=new Image,s.match(/^data:/i)||(n.crossOrigin="Anonymous"),n.src=s,n.complete?u():(n.onload=u,n.src=n.src),r}function o1(i,e,t){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return t;if((0,p.isString)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return n1(i,e,t);if(t[0]==="r")return a1(i,e,t);if(t[0]==="p")return i1(i,e,t)}return t}if(t instanceof CanvasPattern)return t}function s1(i){var e=0,t=0,r=0,n=0;return(0,p.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,[e,t,r,n]}function hv(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function pd(i,e){return hv(i)*hv(e)?(i[0]*e[0]+i[1]*e[1])/(hv(i)*hv(e)):1}function a0(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(pd(i,e))}function i0(i,e){var t=e[1],r=e[2],n=(0,p.mod)((0,p.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,x=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,m=l*l/(t*t)+x*x/(r*r);m>1&&(t*=Math.sqrt(m),r*=Math.sqrt(m));var C=t*t*(x*x)+r*r*(l*l),R=C?Math.sqrt((t*t*(r*r)-C)/C):1;a===o&&(R*=-1),isNaN(R)&&(R=0);var V=r?R*t*x/r:0,Q=t?R*-r*l/t:0,rt=(s+f)/2+Math.cos(n)*V-Math.sin(n)*Q,st=(u+c)/2+Math.sin(n)*V+Math.cos(n)*Q,lt=[(l-V)/t,(x-Q)/r],Ct=[(-1*l-V)/t,(-1*x-Q)/r],At=a0([1,0],lt),Nt=a0(lt,Ct);return pd(lt,Ct)<=-1&&(Nt=Math.PI),pd(lt,Ct)>=1&&(Nt=0),o===0&&Nt>0&&(Nt=Nt-2*Math.PI),o===1&&Nt<0&&(Nt=Nt+2*Math.PI),{cx:rt,cy:st,rx:e0(i,[f,c])?0:t,ry:e0(i,[f,c])?0:r,startAngle:At,endAngle:At+Nt,xRotation:n,arcFlag:a,sweepFlag:o}}var vv=Math.sin,dv=Math.cos,yd=Math.atan2,gv=Math.PI;function o0(i,e,t,r,n,a,o){var s=e.stroke,u=e.lineWidth,f=t-n,c=r-a,l=yd(c,f),x=new Sd({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*dv(gv/6)+","+10*vv(gv/6)+" L0,0 L"+10*dv(gv/6)+",-"+10*vv(gv/6),stroke:s,lineWidth:u}});x.translate(n,a),x.rotateAtPoint(n,a,l),i.set(o?"startArrowShape":"endArrowShape",x)}function s0(i,e,t,r,n,a,o){var s=e.startArrow,u=e.endArrow,f=e.stroke,c=e.lineWidth,l=o?s:u,x=l.d,m=l.fill,C=l.stroke,R=l.lineWidth,V=(0,K.__rest)(l,["d","fill","stroke","lineWidth"]),Q=t-n,rt=r-a,st=yd(rt,Q);x&&(n=n-dv(st)*x,a=a-vv(st)*x);var lt=new Sd({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:(0,K.__assign)((0,K.__assign)({},V),{stroke:C||f,lineWidth:R||c,fill:m})});lt.translate(n,a),lt.rotateAtPoint(n,a,st),i.set(o?"startArrowShape":"endArrowShape",lt)}function Ml(i,e,t,r,n){var a=yd(r-e,t-i);return{dx:dv(a)*n,dy:vv(a)*n}}function md(i,e,t,r,n,a){typeof e.startArrow=="object"?s0(i,e,t,r,n,a,!0):e.startArrow?o0(i,e,t,r,n,a,!0):i.set("startArrowShape",null)}function xd(i,e,t,r,n,a){typeof e.endArrow=="object"?s0(i,e,t,r,n,a,!1):e.endArrow?o0(i,e,t,r,n,a,!1):i.set("startArrowShape",null)}var u0={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function ih(i,e){var t=e.attr();for(var r in t){var n=t[r],a=u0[r]?u0[r]:r;a==="matrix"&&n?i.transform(n[0],n[1],n[3],n[4],n[6],n[7]):a==="lineDash"&&i.setLineDash?(0,p.isArray)(n)&&i.setLineDash(n):(a==="strokeStyle"||a==="fillStyle"?n=o1(i,e,n):a==="globalAlpha"&&(n=n*i.globalAlpha),i[a]=n)}}function bd(i,e,t){for(var r=0;r<e.length;r++){var n=e[r];n.cfg.visible?n.draw(i,t):n.skipDraw()}}function u1(i,e,t){var r=i.get("refreshElements");(0,p.each)(r,function(n){if(n!==i)for(var a=n.cfg.parent;a&&a!==i&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),r[0]===i?wd(e,t):Ed(e,t)}function Ed(i,e){for(var t=0;t<i.length;t++){var r=i[t];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&wd(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&Ed(r.cfg.children,e);else{var n=f1(r,e);r.cfg.refresh=n,n&&r.isGroup()&&Ed(r.cfg.children,e)}}}function f0(i){for(var e=0;e<i.length;e++){var t=i[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&f0(t.cfg.children)}}function wd(i,e){for(var t=0;t<i.length;t++){var r=i[t];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&wd(r.get("children"),e))}}function f1(i,e){var t=i.cfg.cacheCanvasBBox,r=i.cfg.isInView&&t&&Th(t,e);return r}function c0(i,e,t,r){var n=t.path,a=t.startArrow,o=t.endArrow;if(n){var s=[0,0],u=[0,0],f={dx:0,dy:0};e.beginPath();for(var c=0;c<n.length;c++){var l=n[c],x=l[0];if(c===0&&a&&a.d){var m=i.getStartTangent();f=Ml(m[0][0],m[0][1],m[1][0],m[1][1],a.d)}else if(c===n.length-2&&n[c+1][0]==="Z"&&o&&o.d){var C=n[c+1];if(C[0]==="Z"){var m=i.getEndTangent();f=Ml(m[0][0],m[0][1],m[1][0],m[1][1],o.d)}}else if(c===n.length-1&&o&&o.d&&n[0]!=="Z"){var m=i.getEndTangent();f=Ml(m[0][0],m[0][1],m[1][0],m[1][1],o.d)}var R=f.dx,V=f.dy;switch(x){case"M":e.moveTo(l[1]-R,l[2]-V),u=[l[1],l[2]];break;case"L":e.lineTo(l[1]-R,l[2]-V);break;case"Q":e.quadraticCurveTo(l[1],l[2],l[3]-R,l[4]-V);break;case"C":e.bezierCurveTo(l[1],l[2],l[3],l[4],l[5]-R,l[6]-V);break;case"A":{var Q=void 0;r?(Q=r[c],Q||(Q=i0(s,l),r[c]=Q)):Q=i0(s,l);var rt=Q.cx,st=Q.cy,lt=Q.rx,Ct=Q.ry,At=Q.startAngle,Nt=Q.endAngle,Kt=Q.xRotation,ge=Q.sweepFlag;if(e.ellipse)e.ellipse(rt,st,lt,Ct,Kt,At,Nt,1-ge);else{var ue=lt>Ct?lt:Ct,Ae=lt>Ct?1:lt/Ct,Ke=lt>Ct?Ct/lt:1;e.translate(rt,st),e.rotate(Kt),e.scale(Ae,Ke),e.arc(0,0,ue,At,Nt,1-ge),e.scale(1/Ae,1/Ke),e.rotate(-Kt),e.translate(-rt,-st)}break}case"Z":e.closePath();break;default:break}if(x==="Z")s=u;else{var Gr=l.length;s=[l[Gr-2],l[Gr-1]]}}}}function l0(i,e){var t=i.get("canvas");t&&(e==="remove"&&(i._cacheCanvasBBox=i.get("cacheCanvasBBox")),i.get("hasChanged")||(i.set("hasChanged",!0),i.cfg.parent&&i.cfg.parent.get("hasChanged")||(t.refreshElement(i,e,t),t.get("autoDraw")&&t.draw())))}function c1(i){var e;if(i.destroyed)e=i._cacheCanvasBBox;else{var t=i.get("cacheCanvasBBox"),r=t&&!!(t.width&&t.height),n=i.getCanvasBBox(),a=n&&!!(n.width&&n.height);r&&a?e=Jm(t,n):r?e=t:a&&(e=n)}return e}function l1(i){if(!i.length)return null;var e=[],t=[],r=[],n=[];return(0,p.each)(i,function(a){var o=c1(a);o&&(e.push(o.minX),t.push(o.minY),r.push(o.maxX),n.push(o.maxY))}),{minX:(0,p.min)(e),minY:(0,p.min)(t),maxX:(0,p.max)(r),maxY:(0,p.max)(n)}}function h1(i,e){return!i||!e||!Th(i,e)?null:{minX:Math.max(i.minX,e.minX),minY:Math.max(i.minY,e.minY),maxX:Math.min(i.maxX,e.maxX),maxY:Math.min(i.maxY,e.maxY)}}var v1=function(i){(0,K.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){l0(this,t)},e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,r){r&&(t.save(),ih(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,r=[],n=[];(0,p.each)(t,function(x){var m=x.cfg.cacheCanvasBBox;m&&x.cfg.isInView&&(r.push(m.minX,m.maxX),n.push(m.minY,m.maxY))});var a=null;if(r.length){var o=(0,p.min)(r),s=(0,p.max)(r),u=(0,p.min)(n),f=(0,p.max)(n);a={minX:o,minY:u,x:o,y:u,maxX:s,maxY:f,width:s-o,height:f-u};var c=this.cfg.canvas;if(c){var l=c.getViewRange();this.set("isInView",Th(a,l))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},e.prototype.draw=function(t,r){var n=this.cfg.children,a=r?this.cfg.refresh:!0;n.length&&a&&(t.save(),ih(t,this),this._applyClip(t,this.getClip()),bd(t,n,r),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(an),h0=v1,d1=function(i){(0,K.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,K.__assign)((0,K.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return h0},e.prototype.onCanvasChange=function(t){l0(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),r=this.getHitLineWidth(),n=G(t),a=n(this),o=r/2,s=a.x-o,u=a.y-o,f=a.x+a.width+o,c=a.y+a.height+o;return{x:s,minX:s,y:u,minY:u,width:a.width+r,height:a.height+r,maxX:f,maxY:c}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,r){r&&(t.save(),ih(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.draw=function(t,r){var n=this.cfg.clipShape;if(r){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!Th(r,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),ih(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var r=this.getCanvasBBox(),n=Th(r,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",r):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isFill()&&(!(0,p.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&n>0&&(!(0,p.isNil)(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,r){var n=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(dn),sf=d1,g1=function(i){(0,K.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,K.__assign)((0,K.__assign)({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.r,l=o/2,x=t0(u,f,t,r);return a&&n?x<=c+l:a?x<=c:n?x>=c-l&&x<=c+l:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.r;t.beginPath(),t.arc(n,a,o,0,Math.PI*2,!1),t.closePath()},e}(sf),p1=g1;function pv(i,e,t,r){return i/(t*t)+e/(r*r)}var y1=function(i){(0,K.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,K.__assign)((0,K.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=o/2,f=s.x,c=s.y,l=s.rx,x=s.ry,m=(t-f)*(t-f),C=(r-c)*(r-c);return a&&n?pv(m,C,l+u,x+u)<=1:a?pv(m,C,l,x)<=1:n?pv(m,C,l-u,x-u)>=1&&pv(m,C,l+u,x+u)<=1:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.rx,s=r.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,a,o,s,0,0,Math.PI*2,!1);else{var u=o>s?o:s,f=o>s?1:o/s,c=o>s?s/o:1;t.save(),t.translate(n,a),t.scale(f,c),t.arc(0,0,u,0,Math.PI*2),t.restore(),t.closePath()}},e}(sf),m1=y1;function v0(i){return i instanceof HTMLElement&&(0,p.isString)(i.nodeName)&&i.nodeName.toUpperCase()==="CANVAS"}var x1=function(i){(0,K.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,K.__assign)((0,K.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var r=this,n=this.attrs;if((0,p.isString)(t)){var a=new Image;a.onload=function(){if(r.destroyed)return!1;r.attr("img",a),r.set("loading",!1),r._afterLoading();var o=r.get("callback");o&&o.call(r)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):v0(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="img"&&this._setImage(r)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.sx,f=r.sy,c=r.swidth,l=r.sheight,x=r.img;(x instanceof Image||v0(x))&&(!(0,p.isNil)(u)&&!(0,p.isNil)(f)&&!(0,p.isNil)(c)&&!(0,p.isNil)(l)?t.drawImage(x,u,f,c,l,n,a,o,s):t.drawImage(x,n,a,o,s))},e}(sf),b1=x1;function Gc(i,e,t,r,n,a,o){var s=Math.min(i,t),u=Math.max(i,t),f=Math.min(e,r),c=Math.max(e,r),l=n/2;return a>=s-l&&a<=u+l&&o>=f-l&&o<=c+l?Qt.pointToLine(i,e,t,r,a,o)<=n/2:!1}var E1=function(i){(0,K.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,K.__assign)((0,K.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2,s=t.startArrow,u=t.endArrow;s&&md(this,t,a,o,r,n),u&&xd(this,t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr(),u=s.x1,f=s.y1,c=s.x2,l=s.y2;return Gc(u,f,c,l,o,t,r)},e.prototype.createPath=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2,u=r.startArrow,f=r.endArrow,c={dx:0,dy:0},l={dx:0,dy:0};u&&u.d&&(c=Ml(n,a,o,s,r.startArrow.d)),f&&f.d&&(l=Ml(n,a,o,s,r.endArrow.d)),t.beginPath(),t.moveTo(n+c.dx,a+c.dy),t.lineTo(o-l.dx,s-l.dy)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return Qt.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return Qt.pointAt(n,a,o,s,t)},e}(sf),w1=E1,_1={circle:function(i,e,t){return[["M",i-t,e],["A",t,t,0,1,0,i+t,e],["A",t,t,0,1,0,i-t,e]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["Z"]]},"triangle-down":function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},S1=function(i){(0,K.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,p.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.symbol||"circle",o=this._getR(t),s,u;if((0,p.isFunction)(a))s=a,u=s(r,n,o),u=Qi(u);else{if(s=e.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;u=s(r,n,o)}return u},e.prototype.createPath=function(t){var r=this._getPath(),n=this.get("paramsCache");c0(this,t,{path:r},n)},e.Symbols=_1,e}(sf),M1=S1;function d0(i,e,t){var r=Jt();return i.createPath(r),r.isPointInPath(e,t)}var C1=1e-6;function _d(i){return Math.abs(i)<C1?0:i<0?-1:1}function A1(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}function g0(i,e,t){var r=!1,n=i.length;if(n<=2)return!1;for(var a=0;a<n;a++){var o=i[a],s=i[(a+1)%n];if(A1(o,s,[e,t]))return!0;_d(o[1]-t)>0!=_d(s[1]-t)>0&&_d(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function Ih(i,e,t,r,n,a,o,s){var u=(Math.atan2(s-e,o-i)+Math.PI*2)%(Math.PI*2);if(u<r||u>n)return!1;var f={x:i+t*Math.cos(u),y:e+t*Math.sin(u)};return t0(f.x,f.y,o,s)<=a/2}var T1=Bt;function I1(i){for(var e=!1,t=i.length,r=0;r<t;r++){var n=i[r],a=n[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function O1(i,e,t,r,n){for(var a=!1,o=e/2,s=0;s<i.length;s++){var u=i[s],f=u.currentPoint,c=u.params,l=u.prePoint,x=u.box;if(!(x&&!Sl(x.x-o,x.y-o,x.width+e,x.height+e,t,r))){switch(u.command){case"L":case"Z":a=Gc(l[0],l[1],f[0],f[1],e,t,r);break;case"Q":var m=_n.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],t,r);a=m<=e/2;break;case"C":var C=ia.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],c[5],c[6],t,r,n);a=C<=e/2;break;case"A":var R=u.arcParams,V=R.cx,Q=R.cy,rt=R.rx,st=R.ry,lt=R.startAngle,Ct=R.endAngle,At=R.xRotation,Nt=[t,r,1],Kt=rt>st?rt:st,ge=rt>st?1:rt/st,ue=rt>st?st/rt:1,Ae=T1(null,[["t",-V,-Q],["r",-At],["s",1/ge,1/ue]]);Wo.transformMat3(Nt,Nt,Ae),a=Ih(0,0,Kt,lt,Ct,e,Nt[0],Nt[1]);break;default:break}if(a)break}}return a}function L1(i){for(var e=i.length,t=[],r=[],n=[],a=0;a<e;a++){var o=i[a],s=o[0];s==="M"?(n.length&&(r.push(n),n=[]),n.push([o[1],o[2]])):s==="Z"?n.length&&(t.push(n),n=[]):n.push([o[1],o[2]])}return n.length>0&&r.push(n),{polygons:t,polylines:r}}var yv=(0,K.__assign)({hasArc:I1,extractPolygons:L1,isPointInStroke:O1},L);function p0(i,e,t){for(var r=!1,n=0;n<i.length;n++){var a=i[n];if(r=g0(a,e,t),r)break}return r}var D1=function(i){(0,K.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,K.__assign)((0,K.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="path"&&this._setPathArr(r),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=Qi(t);var r=yv.hasArc(t);this.set("hasArc",r),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=gg(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),r=t.startArrow,n=t.endArrow;if(r){var a=this.getStartTangent();md(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(n){var a=this.getEndTangent();xd(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.getSegments(),u=this.get("hasArc"),f=!1;if(n){var c=this.getTotalLength();f=yv.isPointInStroke(s,o,t,r,c)}if(!f&&a)if(u)f=d0(this,t,r);else{var l=this.attr("path"),x=yv.extractPolygons(l);f=p0(x.polygons,t,r)||p0(x.polylines,t,r)}return f},e.prototype.createPath=function(t){var r=this.attr(),n=this.get("paramsCache");c0(this,t,r,n)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,p.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var n,a,o=this.get("curve");if(!r||r.length===0)return o?{x:o[0][1],y:o[0][2]}:null;(0,p.each)(r,function(c,l){t>=c[0]&&t<=c[1]&&(n=(t-c[0])/(c[1]-c[0]),a=l)});var s=o[a];if((0,p.isNil)(s)||(0,p.isNil)(a))return null;var u=s.length,f=o[a+1];return ia.pointAt(s[u-2],s[u-1],f[1],f[2],f[3],f[4],f[5],f[6],n)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",yv.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,r=0,n=[],a,o,s,u,f=this.get("curve");if(f){if((0,p.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(t+=ia.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,p.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(a=[],a[0]=r/t,o=ia.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6]),r+=o||0,a[1]=r/t,n.push(a))}),this.set("tCache",n)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),r;if(t.length>1){var n=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;r=[],o?(r.push([n[0]-o[0],n[1]-o[1]]),r.push([n[0],n[1]])):(r.push([a[0],a[1]]),r.push([n[0],n[1]]))}return r},e.prototype.getEndTangent=function(){var t=this.getSegments(),r=t.length,n;if(r>1){var a=t[r-2].currentPoint,o=t[r-1].currentPoint,s=t[r-1].endTangent;n=[],s?(n.push([o[0]-s[0],o[1]-s[1]]),n.push([o[0],o[1]])):(n.push([a[0],a[1]]),n.push([o[0],o[1]]))}return n},e}(sf),Sd=D1;function y0(i,e,t,r,n){var a=i.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=i[o][0],u=i[o][1],f=i[o+1][0],c=i[o+1][1];if(Gc(s,u,f,c,e,t,r))return!0}if(n){var l=i[0],x=i[a-1];if(Gc(l[0],l[1],x[0],x[1],e,t,r))return!0}return!1}var N1=function(i){(0,K.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr().points,u=!1;return n&&(u=y0(s,o,t,r,!0)),!u&&a&&(u=g0(s,t,r)),u},e.prototype.createPath=function(t){var r=this.attr(),n=r.points;if(!(n.length<2)){t.beginPath();for(var a=0;a<n.length;a++){var o=n[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(sf),P1=N1,k1=function(i){(0,K.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,K.__assign)((0,K.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),r=this.attrs,n=r.points,a=r.startArrow,o=r.endArrow,s=n.length,u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];a&&md(this,t,n[1][0],n[1][1],u,f),o&&xd(this,t,n[s-2][0],n[s-2][1],c,l)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr().points;return y0(s,o,t,r,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var r=this.attr(),n=r.points,a=r.startArrow,o=r.endArrow,s=n.length;if(!(n.length<2)){var u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];if(a&&a.d){var x=Ml(u,f,n[1][0],n[1][1],a.d);u+=x.dx,f+=x.dy}if(o&&o.d){var x=Ml(n[s-2][0],n[s-2][1],c,l,o.d);c-=x.dx,l-=x.dy}t.beginPath(),t.moveTo(u,f);for(var m=0;m<s-1;m++){var C=n[m];t.lineTo(C[0],C[1])}t.lineTo(c,l)}},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,p.isNil)(r)?(this.set("totalLength",cu.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,p.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),Qt.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,p.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=Qt.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(sf),R1=k1;function B1(i,e,t,r,n,a,o){var s=n/2;return Sl(i-s,e-s,t,n,a,o)||Sl(i+t-s,e-s,n,r,a,o)||Sl(i+s,e+r-s,t,n,a,o)||Sl(i-s,e+s,n,r,a,o)}function F1(i,e,t,r,n,a,o,s){var u=a/2;return Gc(i+n,e,i+t-n,e,a,o,s)||Gc(i+t,e+n,i+t,e+r-n,a,o,s)||Gc(i+t-n,e+r,i+n,e+r,a,o,s)||Gc(i,e+r-n,i,e+n,a,o,s)||Ih(i+t-n,e+n,n,1.5*Math.PI,2*Math.PI,a,o,s)||Ih(i+t-n,e+r-n,n,0,.5*Math.PI,a,o,s)||Ih(i+n,e+r-n,n,.5*Math.PI,Math.PI,a,o,s)||Ih(i+n,e+n,n,Math.PI,1.5*Math.PI,a,o,s)}var G1=function(i){(0,K.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,K.__assign)((0,K.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.width,l=s.height,x=s.radius;if(x){var C=!1;return n&&(C=F1(u,f,c,l,x,o,t,r)),!C&&a&&(C=d0(this,t,r)),C}else{var m=o/2;if(a&&n)return Sl(u-m,f-m,c+m,l+m,t,r);if(a)return Sl(u,f,c,l,t,r);if(n)return B1(u,f,c,l,o,t,r)}},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.radius;if(t.beginPath(),u===0)t.rect(n,a,o,s);else{var f=s1(u),c=f[0],l=f[1],x=f[2],m=f[3];t.moveTo(n+c,a),t.lineTo(n+o-l,a),l!==0&&t.arc(n+o-l,a+l,l,-Math.PI/2,0),t.lineTo(n+o,a+s-x),x!==0&&t.arc(n+o-x,a+s-x,x,0,Math.PI/2),t.lineTo(n+m,a+s),m!==0&&t.arc(n+m,a+s-m,m,Math.PI/2,Math.PI),t.lineTo(n,a+c),c!==0&&t.arc(n+c,a+c,c,Math.PI,Math.PI*1.5),t.closePath()}},e}(sf),z1=G1,U1=function(i){(0,K.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,K.__assign)((0,K.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=Ue(t)},e.prototype._setText=function(t){var r=null;(0,p.isString)(t)&&t.indexOf(`
`)!==-1&&(r=t.split(`
`)),this.set("textArr",r)},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(r)},e.prototype._getSpaceingY=function(){var t=this.attrs,r=t.lineHeight,n=t.fontSize*1;return r?r-n:n*.14},e.prototype._drawTextArr=function(t,r,n){var a=this.attrs,o=a.textBaseline,s=a.x,u=a.y,f=a.fontSize*1,c=this._getSpaceingY(),l=Be(a.text,a.fontSize,a.lineHeight),x;(0,p.each)(r,function(m,C){x=u+C*(c+f)-l+f,o==="middle"&&(x+=l-f-(l-f)/2),o==="top"&&(x+=l-f),(0,p.isNil)(m)||(n?t.fillText(m,s,x):t.strokeText(m,s,x))})},e.prototype._drawText=function(t,r){var n=this.attr(),a=n.x,o=n.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,r);else{var u=n.text;(0,p.isNil)(u)||(r?t.fillText(u,a,o):t.strokeText(u,a,o))}},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isStroke()&&n>0&&(!(0,p.isNil)(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!(0,p.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(sf),W1=U1;function X1(i,e){if(e){var t=ma(e);return ua(t,i)}return i}function m0(i,e,t){var r=i.getTotalMatrix();if(r){var n=X1([e,t,1],r),a=n[0],o=n[1];return[a,o]}return[e,t]}function x0(i,e,t){if(i.isCanvas&&i.isCanvas())return!0;if(!iu(i)||i.cfg.isInView===!1)return!1;if(i.cfg.clipShape){var r=m0(i,e,t),n=r[0],a=r[1];if(i.isClipped(n,a))return!1}var o=i.cfg.cacheCanvasBBox||i.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function b0(i,e,t){if(!x0(i,e,t))return null;for(var r=null,n=i.getChildren(),a=n.length,o=a-1;o>=0;o--){var s=n[o];if(s.isGroup())r=b0(s,e,t);else if(x0(s,e,t)){var u=s,f=m0(s,e,t),c=f[0],l=f[1];u.isInShape(c,l)&&(r=s)}if(r)break}return r}var Y1=function(i){(0,K.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return h0},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||Qm();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),r=t.getContext("2d");return this.set("context",r),t},e.prototype.setDOMSize=function(t,r){i.prototype.setDOMSize.call(this,t,r);var n=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*r,o>1&&n.scale(o,o)},e.prototype.clear=function(){i.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),r=this.get("el");t.clearRect(0,0,r.width,r.height)},e.prototype.getShape=function(t,r){var n;return this.get("quickHit")?n=b0(this,t,r):n=i.prototype.getShape.call(this,t,r,null),n},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),r=this.getViewRange(),n;if(t.length&&t[0]===this)n=r;else if(n=l1(t),n){n.minX=Math.floor(n.minX),n.minY=Math.floor(n.minY),n.maxX=Math.ceil(n.maxX),n.maxY=Math.ceil(n.maxY),n.maxY+=1;var a=this.get("clipView");a&&(n=h1(n,r))}return n},e.prototype.refreshElement=function(t){var r=this.get("refreshElements");r.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,p.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),r=this.get("el"),n=this.getChildren();t.clearRect(0,0,r.width,r.height),ih(t,this),bd(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),r=this.get("refreshElements"),n=this.getChildren(),a=this._getRefreshRegion();a?(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),ih(t,this),u1(this,n,a),bd(t,n,a),t.restore()):r.length&&f0(r),(0,p.each)(r,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,r=this.get("drawFrame");r||(r=(0,p.requestAnimationFrame)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",r))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(Zr),fc=Y1,oM="0.5.12",Md={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},vi={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},sM=null;function zu(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function E0(i){var e=Md[i.type],t=i.getParent();if(!e)throw new Error("the type "+i.type+" is not supported by svg");var r=zu(e);if(i.get("id")&&(r.id=i.get("id")),i.set("el",r),i.set("attrs",{}),t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(r)}return r}function w0(i,e){var t=i.get("el"),r=(0,p.toArray)(t.children).sort(e),n=document.createDocumentFragment();r.forEach(function(a){n.appendChild(a)}),t.appendChild(n)}function V1(i,e){var t=i.parentNode,r=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),n=r[e],a=r.indexOf(i);if(n){if(a>e)t.insertBefore(i,n);else if(a<e){var o=r[e+1];o?t.insertBefore(i,o):t.appendChild(i)}}else t.appendChild(i)}function j1(i,e){var t=i.cfg.el,r=i.attr(),n={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(!n.dx&&!n.dy&&!n.blur&&!n.color)t.removeAttribute("filter");else{var a=e.find("filter",n);a||(a=e.addShadow(n)),t.setAttribute("filter","url(#"+a+")")}}function Oh(i){var e=i.attr().matrix;if(e){for(var t=i.cfg.el,r=[],n=0;n<9;n+=3)r.push(e[n]+","+e[n+1]);r=r.join(","),r.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function Lh(i,e){var t=i.getClip(),r=i.get("el");if(!t)r.removeAttribute("clip-path");else if(t&&!r.hasAttribute("clip-path")){E0(t),t.createPath(e);var n=e.addClip(t);r.setAttribute("clip-path","url(#"+n+")")}}function _0(i,e){e.forEach(function(t){t.draw(i)})}function S0(i,e){var t=i.get("canvas");if(t&&t.get("autoDraw")){var r=t.get("context"),n=i.getParent(),a=n?n.getChildren():[t],o=i.get("el");if(e==="remove"){var s=i.get("isClipShape");if(s){var u=o&&o.parentNode,f=u&&u.parentNode;u&&f&&f.removeChild(u)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")V1(o,a.indexOf(i));else if(e==="sort"){var c=i.get("children");c&&c.length&&w0(i,function(l,x){return c.indexOf(l)-c.indexOf(x)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?Oh(i):e==="clip"?Lh(i,r):e==="attr"||e==="add"&&i.draw(r)}}var H1=function(i){(0,K.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=zu("g");this.set("el",t);var r=this.getParent();if(r){var n=r.get("el");n||(n=r.createDom(),r.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.createPath(n,t)}},e.prototype.onCanvasChange=function(t){S0(this,t)},e.prototype.getShapeBase=function(){return d},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var r=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),Lh(this,t),this.createPath(t),r.length&&_0(t,r))},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,p.each)(r||n,function(o,s){vi[s]&&a.setAttribute(vi[s],o)}),Oh(this)},e}(an),M0=H1,K1=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,K.__assign)((0,K.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.draw(n,t)}},e.prototype.getShapeBase=function(){return d},e.prototype.getGroupBase=function(){return M0},e.prototype.onCanvasChange=function(t){S0(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),r=null;if(t)r=t.getBBox();else{var n=G(this.get("type"));n&&(r=n(this))}if(r){var a=r.x,o=r.y,s=r.width,u=r.height,f=this.getHitLineWidth(),c=f/2,l=a-c,x=o-c,m=a+s+c,C=o+u+c;return{x:l,y:x,minX:l,minY:x,maxX:m,maxY:C,width:s+f,height:u+f}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),r=t.fill,n=t.fillStyle;return(r||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),r=t.stroke,n=t.strokeStyle;return(r||n)&&this.canStroke},e.prototype.draw=function(t,r){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||E0(this),Lh(this,t),this.createPath(t,r),this.shadow(t,r),this.strokeAndFill(t,r),this.transform(r))},e.prototype.createPath=function(t,r){},e.prototype.strokeAndFill=function(t,r){var n=r||this.attr(),a=n.fill,o=n.fillStyle,s=n.stroke,u=n.strokeStyle,f=n.fillOpacity,c=n.strokeOpacity,l=n.lineWidth,x=this.get("el");this.canFill&&(r?"fill"in n?this._setColor(t,"fill",a):"fillStyle"in n&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),f&&x.setAttribute(vi.fillOpacity,f)),this.canStroke&&l>0&&(r?"stroke"in n?this._setColor(t,"stroke",s):"strokeStyle"in n&&this._setColor(t,"stroke",u):this._setColor(t,"stroke",s||u),c&&x.setAttribute(vi.strokeOpacity,c),l&&x.setAttribute(vi.lineWidth,l))},e.prototype._setColor=function(t,r,n){var a=this.get("el");if(!n){a.setAttribute(vi[r],"none");return}if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var o=t.find("gradient",n);o||(o=t.addGradient(n)),a.setAttribute(vi[r],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=t.find("pattern",n);o||(o=t.addPattern(n)),a.setAttribute(vi[r],"url(#"+o+")")}else a.setAttribute(vi[r],n)},e.prototype.shadow=function(t,r){var n=this.attr(),a=r||n,o=a.shadowOffsetX,s=a.shadowOffsetY,u=a.shadowBlur,f=a.shadowColor;(o||s||u||f)&&j1(this,t)},e.prototype.transform=function(t){var r=this.attr(),n=(t||r).matrix;n&&Oh(this)},e.prototype.isInShape=function(t,r){return this.isPointInPath(t,r)},e.prototype.isPointInPath=function(t,r){var n=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=t+o.left,u=r+o.top,f=document.elementFromPoint(s,u);return!!(f&&f.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,r=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?r+n:0},e}(dn),Uu=K1,Z1=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,K.__assign)((0,K.__assign)({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,p.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):vi[s]&&a.setAttribute(vi[s],o)})},e}(Uu),$1=Z1,q1=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");if((0,p.each)(r||n,function(f,c){vi[c]&&a.setAttribute(vi[c],f)}),typeof n.html=="function"){var o=n.html.call(this,n);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,u=s.length-1;u>=0;u--)a.removeChild(s[u]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=n.html},e}(Uu),Q1=q1,J1=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,K.__assign)((0,K.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,p.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):vi[s]&&a.setAttribute(vi[s],o)})},e}(Uu),tx=J1,ex=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,K.__assign)((0,K.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,p.each)(r||a,function(s,u){u==="img"?n._setImage(a.img):vi[u]&&o.setAttribute(vi[u],s)})},e.prototype.setAttr=function(t,r){this.attrs[t]=r,t==="img"&&this._setImage(r)},e.prototype._setImage=function(t){var r=this.attr(),n=this.get("el");if((0,p.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)r.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,p.isString)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),r.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",a.toDataURL())}},e}(Uu),rx=ex,nx=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,K.__assign)((0,K.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,p.each)(r||n,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var u=(0,p.isObject)(o)?t.addArrow(n,vi[s]):t.getDefaultArrow(n,vi[s]);a.setAttribute(vi[s],"url(#"+u+")")}else a.removeAttribute(vi[s]);else vi[s]&&a.setAttribute(vi[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return Qt.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return Qt.pointAt(n,a,o,s,t)},e}(Uu),ax=nx,mv={circle:function(i,e,t){return[["M",i,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["z"]]},triangleDown:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},C0={get:function(i){return mv[i]},register:function(i,e){mv[i]=e},remove:function(i){delete mv[i]},getAll:function(){return mv}},ix=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var r=this.get("el");r.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,p.isArray)(t)?t.map(function(r){return r.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.r||t.radius,o=t.symbol||"circle",s;return(0,p.isFunction)(o)?s=o:s=C0.get(o),s?s(r,n,a):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=C0,e}(Uu),ox=ix,sx=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,K.__assign)((0,K.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,p.each)(r||a,function(s,u){if(u==="path"&&(0,p.isArray)(s))o.setAttribute("d",n._formatPath(s));else if(u==="startArrow"||u==="endArrow")if(s){var f=(0,p.isObject)(s)?t.addArrow(a,vi[u]):t.getDefaultArrow(a,vi[u]);o.setAttribute(vi[u],"url(#"+f+")")}else o.removeAttribute(vi[u]);else vi[u]&&o.setAttribute(vi[u],s)})},e.prototype._formatPath=function(t){var r=t.map(function(n){return n.join(" ")}).join("");return~r.indexOf("NaN")?"":r},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var r=this.get("el"),n=this.getTotalLength();if(n===0)return null;var a=r?r.getPointAtLength(t*n):null;return a?{x:a.x,y:a.y}:null},e}(Uu),ux=sx,fx=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,p.each)(r||n,function(o,s){s==="points"&&(0,p.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):vi[s]&&a.setAttribute(vi[s],o)})},e}(Uu),cx=fx,lx=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,K.__assign)((0,K.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,p.each)(r||n,function(o,s){s==="points"&&(0,p.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):vi[s]&&a.setAttribute(vi[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,p.isNil)(r)?(this.set("totalLength",cu.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,p.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),Qt.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,p.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=Qt.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(Uu),hx=lx,vx=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,dx=/[^\s,]+/gi;function gx(i){var e=0,t=0,r=0,n=0;return(0,p.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,{r1:e,r2:t,r3:r,r4:n}}function uM(i){if(i=i||[],isArray(i))return i;if(isString(i))return i=i.match(vx),each(i,function(e,t){if(e=e.match(dx),e[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}each(e,function(n,a){isNaN(n)||(e[a]=+n)}),i[t]=e}),i}var px=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,K.__assign)((0,K.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el"),s=!1,u=["x","y","width","height","radius"];(0,p.each)(r||a,function(f,c){u.indexOf(c)!==-1&&!s?(o.setAttribute("d",n._assembleRect(a)),s=!0):u.indexOf(c)===-1&&vi[c]&&o.setAttribute(vi[c],f)})},e.prototype._assembleRect=function(t){var r=t.x,n=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+r+","+n+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var u=gx(s);(0,p.isArray)(s)?s.length===1?u.r1=u.r2=u.r3=u.r4=s[0]:s.length===2?(u.r1=u.r3=s[0],u.r2=u.r4=s[1]):s.length===3?(u.r1=s[0],u.r2=u.r4=s[1],u.r3=s[2]):(u.r1=s[0],u.r2=s[1],u.r3=s[2],u.r4=s[3]):u.r1=u.r2=u.r3=u.r4=s;var f=[["M "+(r+u.r1)+","+n],["l "+(a-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(o-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-a)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-o)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]];return f.join(" ")},e}(Uu),yx=px,A0=.3,mx={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},xx={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},bx={left:"left",start:"left",center:"middle",right:"end",end:"end"},Ex=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,K.__assign)((0,K.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");this._setFont(),(0,p.each)(r||a,function(s,u){u==="text"?n._setText(""+s):u==="matrix"&&s?Oh(n):vi[u]&&o.setAttribute(vi[u],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),r=this.attr(),n=r.textBaseline,a=r.textAlign,o=ze();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",xx[n]||"alphabetic"):t.setAttribute("alignment-baseline",mx[n]||"baseline"),t.setAttribute("text-anchor",bx[a]||"left")},e.prototype._setText=function(t){var r=this.get("el"),n=this.attr(),a=n.x,o=n.textBaseline,s=o===void 0?"bottom":o;if(!t)r.innerHTML="";else if(~t.indexOf(`
`)){var u=t.split(`
`),f=u.length-1,c="";(0,p.each)(u,function(l,x){x===0?s==="alphabetic"?c+='<tspan x="'+a+'" dy="'+-f+'em">'+l+"</tspan>":s==="top"?c+='<tspan x="'+a+'" dy="0.9em">'+l+"</tspan>":s==="middle"?c+='<tspan x="'+a+'" dy="'+-(f-1)/2+'em">'+l+"</tspan>":s==="bottom"?c+='<tspan x="'+a+'" dy="-'+(f+A0)+'em">'+l+"</tspan>":s==="hanging"&&(c+='<tspan x="'+a+'" dy="'+(-(f-1)-A0)+'em">'+l+"</tspan>"):c+='<tspan x="'+a+'" dy="1em">'+l+"</tspan>"}),r.innerHTML=c}else r.innerHTML=t},e}(Uu),wx=Ex,_x=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Sx=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Mx=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function T0(i){var e=i.match(Mx);if(!e)return"";var t="";return e.sort(function(r,n){return r=r.split(":"),n=n.split(":"),Number(r[0])-Number(n[0])}),(0,p.each)(e,function(r){r=r.split(":"),t+='<stop offset="'+r[0]+'" stop-color="'+r[1]+'"></stop>'}),t}function Cx(i,e){var t=_x.exec(i),r=(0,p.mod)((0,p.toRadian)(parseFloat(t[1])),Math.PI*2),n=t[2],a,o;r>=0&&r<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=r&&r<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=r&&r<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(r),u=s*s,f=(o.x-a.x+s*(o.y-a.y))/(u+1)+a.x,c=s*(o.x-a.x+s*(o.y-a.y))/(u+1)+a.y;e.setAttribute("x1",a.x),e.setAttribute("y1",a.y),e.setAttribute("x2",f),e.setAttribute("y2",c),e.innerHTML=T0(n)}function Ax(i,e){var t=Sx.exec(i),r=parseFloat(t[1]),n=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];e.setAttribute("cx",r),e.setAttribute("cy",n),e.setAttribute("r",a),e.innerHTML=T0(o)}var Tx=function(){function i(e){this.cfg={};var t=null,r=(0,p.uniqueId)("gradient_");return e.toLowerCase()[0]==="l"?(t=zu("linearGradient"),Cx(e,t)):(t=zu("radialGradient"),Ax(e,t)),t.setAttribute("id",r),this.el=t,this.id=r,this.cfg=e,this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),Ix=Tx,Ox={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},Lx={x:"-40%",y:"-40%",width:"200%",height:"200%"},Dx=function(){function i(e){this.type="filter",this.cfg={},this.type="filter";var t=zu("filter");return(0,p.each)(Lx,function(r,n){t.setAttribute(n,r)}),this.el=t,this.id=(0,p.uniqueId)("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return i.prototype.match=function(e,t){if(this.type!==e)return!1;var r=!0,n=this.cfg;return(0,p.each)(Object.keys(n),function(a){if(n[a]!==t[a])return r=!1,!1}),r},i.prototype.update=function(e,t){var r=this.cfg;return r[Ox[e]]=t,this._parseShadow(r,this.el),this},i.prototype._parseShadow=function(e,t){var r=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=r},i}(),Nx=Dx,Px=function(){function i(e,t){this.cfg={};var r=zu("marker"),n=(0,p.uniqueId)("marker_");r.setAttribute("id",n);var a=zu("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),r.appendChild(a),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=a,this.id=n;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(e.lineWidth,a)),this}return i.prototype.match=function(){return!1},i.prototype._setDefaultPath=function(e,t){var r=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY","5")},i.prototype._setMarker=function(e,t){var r=this.el,n=this.cfg.path,a=this.cfg.d;(0,p.isArray)(n)&&(n=n.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",n),r.appendChild(t),a&&r.setAttribute("refX",""+a/e)},i.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},i}(),I0=Px,kx=function(){function i(e){this.type="clip",this.cfg={};var t=zu("clipPath");this.el=t,this.id=(0,p.uniqueId)("clip_"),t.id=this.id;var r=e.cfg.el;return t.appendChild(r),this.cfg=e,this}return i.prototype.match=function(){return!1},i.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},i}(),Rx=kx,Bx=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Fx=function(){function i(e){this.cfg={};var t=zu("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var r=zu("image");t.appendChild(r);var n=(0,p.uniqueId)("pattern_");t.id=n,this.el=t,this.id=n,this.cfg=e;var a=Bx.exec(e),o=a[2];r.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function u(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?u():(s.onload=u,s.src=s.src),this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),Gx=Fx,zx=function(){function i(e){var t=zu("defs"),r=(0,p.uniqueId)("defs_");t.id=r,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return i.prototype.find=function(e,t){for(var r=this.children,n=null,a=0;a<r.length;a++)if(r[a].match(e,t)){n=r[a].id;break}return n},i.prototype.findById=function(e){for(var t=this.children,r=null,n=0;n<t.length;n++)if(t[n].id===e){r=t[n];break}return r},i.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},i.prototype.getDefaultArrow=function(e,t){var r=e.stroke||e.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var n=new I0(e,t);return this.defaultArrow[r]=n,this.el.appendChild(n.el),this.add(n),n.id},i.prototype.addGradient=function(e){var t=new Ix(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addArrow=function(e,t){var r=new I0(e,t);return this.el.appendChild(r.el),this.add(r),r.id},i.prototype.addShadow=function(e){var t=new Nx(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addPattern=function(e){var t=new Gx(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addClip=function(e){var t=new Rx(e);return this.el.appendChild(t.el),this.add(t),t.id},i}(),Ux=zx,Wx=function(i){(0,K.__extends)(e,i);function e(t){return i.call(this,(0,K.__assign)((0,K.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return d},e.prototype.getGroupBase=function(){return M0},e.prototype.getShape=function(t,r,n){var a=n.target||n.srcElement;if(!Md[a.tagName]){for(var o=a.parentNode;o&&!Md[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},e.prototype.createDom=function(){var t=zu("svg"),r=new Ux(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",r),t},e.prototype.onCanvasChange=function(t){var r=this.get("context"),n=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&w0(this,function(s,u){return a.indexOf(s)-a.indexOf(u)?1:0})}else if(t==="clear"){if(n){n.innerHTML="";var o=r.el;o.innerHTML="",n.appendChild(o)}}else t==="matrix"?Oh(this):t==="clip"?Lh(this,r):t==="changeSize"&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),r=this.getChildren();Lh(this,t),r.length&&_0(t,r)},e}(Zr),Dh=Wx,fM="0.5.6",Nh,Cd,O0,Ad;function Xx(){Nh=document.createElement("table"),Cd=document.createElement("tr"),O0=/^\s*<(\w+|!)[^>]*>/,Ad={tr:document.createElement("tbody"),tbody:Nh,thead:Nh,tfoot:Nh,td:Cd,th:Cd,"*":document.createElement("div")}}function Ji(i){Nh||Xx();var e=O0.test(i)&&RegExp.$1;(!e||!(e in Ad))&&(e="*");var t=Ad[e];i=typeof i=="string"?i.replace(/(^\s*)|(\s*$)/g,""):i,t.innerHTML=""+i;var r=t.childNodes[0];return r&&t.contains(r)&&t.removeChild(r),r}var Yx=z(6767),Ph=z.n(Yx),xv=z(97234),bv=2,L0=.16,Vx=.05,jx=.05,Hx=.15,D0=5,N0=4,Kx=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function P0(i,e,t){var r;return Math.round(i.h)>=60&&Math.round(i.h)<=240?r=t?Math.round(i.h)-bv*e:Math.round(i.h)+bv*e:r=t?Math.round(i.h)+bv*e:Math.round(i.h)-bv*e,r<0?r+=360:r>=360&&(r-=360),r}function k0(i,e,t){if(i.h===0&&i.s===0)return i.s;var r;return t?r=i.s-L0*e:e===N0?r=i.s+L0:r=i.s+Vx*e,r>1&&(r=1),t&&e===D0&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function R0(i,e,t){var r;return t?r=i.v+jx*e:r=i.v-Hx*e,r>1&&(r=1),Number(r.toFixed(2))}function Ev(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],r=(0,xv.Z)(i),n=D0;n>0;n-=1){var a=r.toHsv(),o=(0,xv.Z)({h:P0(a,n,!0),s:k0(a,n,!0),v:R0(a,n,!0)}).toHexString();t.push(o)}t.push(r.toHexString());for(var s=1;s<=N0;s+=1){var u=r.toHsv(),f=(0,xv.Z)({h:P0(u,s),s:k0(u,s),v:R0(u,s)}).toHexString();t.push(f)}return e.theme==="dark"?Kx.map(function(c){var l=c.index,x=c.opacity,m=xv.Z.mix(e.backgroundColor||"#141414",t[l],x*100).toHexString();return m}):t}var Td={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},qs={},Id={};Object.keys(Td).forEach(function(i){qs[i]=Ev(Td[i]),qs[i].primary=qs[i][5],Id[i]=Ev(Td[i],{theme:"dark",backgroundColor:"#141414"}),Id[i].primary=Id[i][5]});var cM=qs.red,lM=qs.volcano,hM=qs.gold,vM=qs.orange,dM=qs.yellow,gM=qs.lime,pM=qs.green,yM=qs.cyan,mM=qs.blue,xM=qs.geekblue,bM=qs.purple,EM=qs.magenta,wM=qs.grey,gs=function(e,t,r){var n=Ph()(e),a=Ph()(t);return Ph()([(1-r)*n.red()+r*a.red(),(1-r)*n.green()+r*a.green(),(1-r)*n.blue()+r*a.blue()]).rgb()},Zx=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="rgb(150, 150, 150)");var n=gs(t,e,.05).rgb().toString(),a=gs(t,e,.1).rgb().toString(),o=gs(t,e,.2).rgb().toString(),s=gs(t,e,.4).rgb().toString(),u=gs(t,r,.02).rgb().toString(),f=gs(t,r,.05).rgb().toString(),c=gs(t,r,.1).rgb().toString(),l=gs(t,r,.2).rgb().toString(),x=gs(t,r,.3).rgb().toString(),m=Ev(e,{theme:"default",backgroundColor:t}),C=Ph()(e).hex().toLowerCase(),R=m.indexOf(C),V=e;return R!==-1&&(V=m[R+1]),{mainStroke:e,mainFill:a,activeStroke:e,activeFill:n,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:t,highlightStroke:V,highlightFill:o,disableStroke:x,disableFill:f,edgeMainStroke:x,edgeActiveStroke:e,edgeInactiveStroke:l,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:x,comboMainFill:u,comboActiveStroke:e,comboActiveFill:n,comboInactiveStroke:x,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:V,comboHighlightFill:u,comboDisableStroke:l,comboDisableFill:f}},$x=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="#777");var n=gs(t,e,.2).rgb().toString(),a=gs(t,e,.3).rgb().toString(),o=gs(t,e,.6).rgb().toString(),s=gs(t,e,.8).rgb().toString(),u=gs(t,r,.2).rgb().toString(),f=gs(t,r,.25).rgb().toString(),c=gs(t,r,.3).rgb().toString(),l=gs(t,r,.4).rgb().toString(),x=gs(t,r,.5).rgb().toString(),m=Ev(e,{theme:"dark",backgroundColor:t}),C=Ph()(e).hex().toLowerCase(),R=m.indexOf(C),V=e;return R!==-1&&(V=m[R+1]),{mainStroke:s,mainFill:n,activeStroke:e,activeFill:a,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:n,highlightStroke:e,highlightFill:o,disableStroke:x,disableFill:f,edgeMainStroke:r,edgeActiveStroke:e,edgeInactiveStroke:r,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:l,comboMainFill:f,comboActiveStroke:e,comboActiveFill:u,comboInactiveStroke:l,comboInactiveFill:f,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:V,comboHighlightFill:f,comboDisableStroke:l,comboDisableFill:u}},Od=function(e,t,r,n){return t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)"),r==="default"?Zx(e,t,"rgb(150, 150, 150)"):$x(e,t,"#777")},qx=function(e,t,r,n){t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)");var a=[];return e.forEach(function(o){a.push(Od(o,t,r,n))}),a},Qx="rgb(95, 149, 255)",Jx="rgb(255, 255, 255)",B0="rgb(0, 0, 0)",fi=Od(Qx,Jx),Cl={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:fi.mainStroke,fill:fi.mainFill},size:20,color:fi.mainStroke,linkPoints:{size:8,lineWidth:1,fill:fi.activeFill,stroke:fi.activeStroke}},nodeStateStyles:{active:{fill:fi.activeFill,stroke:fi.activeStroke,lineWidth:2,shadowColor:fi.mainStroke,shadowBlur:10},selected:{fill:fi.selectedFill,stroke:fi.selectedStroke,lineWidth:4,shadowColor:fi.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:fi.highlightFill,stroke:fi.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:fi.inactiveFill,stroke:fi.inactiveStroke,lineWidth:1},disable:{fill:fi.disableFill,stroke:fi.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:B0,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:fi.edgeMainStroke,lineAppendWidth:2},color:fi.edgeMainStroke},edgeStateStyles:{active:{stroke:fi.edgeActiveStroke,lineWidth:1},selected:{stroke:fi.edgeSelectedStroke,lineWidth:2,shadowColor:fi.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:fi.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:fi.edgeInactiveStroke,lineWidth:1},disable:{stroke:fi.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:B0,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:fi.comboMainFill,lineWidth:1,stroke:fi.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:fi.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:fi.comboActiveStroke,lineWidth:1,fill:fi.comboActiveFill},selected:{stroke:fi.comboSelectedStroke,lineWidth:2,fill:fi.comboSelectedFill,shadowColor:fi.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:fi.comboHighlightStroke,lineWidth:2,fill:fi.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:fi.comboInactiveStroke,fill:fi.comboInactiveFill,lineWidth:1},disable:{stroke:fi.comboDisableStroke,fill:fi.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"},tb=function(e){var t=e.clone();return eb(e,t),t},eb=function i(e,t){var r;e.isGroup()&&t.isGroup()&&((r=e.get("children"))===null||r===void 0||r.forEach(function(s,u){var f=t.get("children")[u];i(s,f)}));var n=e.get("type"),a=t.get("type");if(!(n!=="image"||a!=="image")){var o=e.get("clipShape");o&&t.setClip({type:o.get("type"),attrs:o.attr()})}};function wv(i,e,t){if(i){if(typeof i.addEventListener=="function")return i.addEventListener(e,t,!1),{remove:function(){i.removeEventListener(e,t,!1)}};if(typeof i.attachEvent=="function")return i.attachEvent("on"+e,t),{remove:function(){i.detachEvent("on"+e,t)}}}}var rb=zs.cloneEvent,nb=zs.isViewportChanged,ab=function(i){(0,K.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.extendEvents=[],r.dragging=!1,r.mousedown=!1,r.preItem=null,r.destroy(),r.graph=t,r.destroyed=!1,r.initEvents(),r}return e.prototype.initEvents=function(){var t=this,r=t.graph,n=t.extendEvents,a=n===void 0?[]:n,o=r.get("canvas"),s=o.get("el"),u=(0,p.wrapBehavior)(this,"onCanvasEvents"),f=(0,p.wrapBehavior)(this,"onExtendEvents"),c=(0,p.wrapBehavior)(this,"onWheelEvent");o.off("*").on("*",u),this.canvasHandler=u,a.push(wv(s,"wheel",c)),typeof window!="undefined"&&(a.push(wv(window,"keydown",f)),a.push(wv(window,"keyup",f)),a.push(wv(window,"focus",f))),this.resetHandler&&r.off("afterchangedata",this.resetHandler),this.resetHandler=(0,p.wrapBehavior)(this,"resetStatus"),r.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var r=this,n=this.graph,a=n.get("canvas"),o=t.target,s=t.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"mouseup":setTimeout(function(){return r.mousedown=!1});break;case"click":if(!this.mousedown)return;break;default:break}t.canvasX=t.x,t.canvasY=t.y;var u={x:t.canvasX,y:t.canvasY},f=n.get("group"),c=f.getMatrix();if(c||(c=[1,0,0,0,1,0,0,0,1]),nb(c)&&(u=n.getPointByClient(t.clientX,t.clientY)),t.x=u.x,t.y=u.y,t.currentTarget=n,o===a){(s==="mousemove"||s==="mouseleave")&&this.handleMouseMove(t,"canvas"),t.target=a,t.item=null,n.emit(s,t),n.emit("canvas:".concat(s),t);return}var l=e.getItemRoot(o);if(!l){n.emit(s,t);return}var x=l.get("item");if(!x.destroyed){var m=x.getType();if(t.target=o,t.item=x,t.canvasX===t.x&&t.canvasY===t.y){var C=n.getCanvasByPoint(t.x,t.y);t.canvasX=C.x,t.canvasY=C.y}t.name&&!t.name.includes(":")?(n.emit("".concat(m,":").concat(s),t),n.emit(s,t)):t.name&&n.emit(t.name,t),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(t,m)}},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,p.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,r){var n=this,a=n.graph,o=n.preItem,s=a.get("canvas"),u=t.target===s?null:t.item;t=rb(t),o&&o!==u&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),u&&o!==u&&(t.item=u,this.emitCustomEvent(r,"mouseenter",t),this.dragging&&this.emitCustomEvent(r,"dragenter",t)),this.preItem=u},e.prototype.emitCustomEvent=function(t,r,n){n.type=r,this.graph.emit("".concat(t,":").concat(r),n)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,r=t.graph,n=t.canvasHandler,a=t.extendEvents,o=r.get("canvas");o.off("*",n),(0,p.each)(a,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(qg),ib=ab,ii=z(67320),ob=z(81746),_v=z.n(ob),F0=zs.traverseTree,sb=function(e,t){var r;return e?(0,p.isNumber)(e)?r=function(a){return e}:r=e:r=function(a){return t||1},r},ub=function(e,t){var r=[],n=[],a={},o=0;for(o=0;o<e.length;o++){var s=e[o];a[s.id]=o,r.push(s.x),r.push(s.y),r.push(0),r.push(0),n.push([])}for(o=0;o<t.length;o++){var u=t[o];n[a[u.source]].push(a[u.target]),n[a[u.target]].push(a[u.source])}var f=0;for(o=0;o<e.length;o++){var c=r.length,l=n[o],x=l.length;r[o*4+2]=c,r[o*4+3]=l.length,f=Math.max(f,l.length);for(var m=0;m<x;++m){var C=l[m];r.push(+C)}}for(;r.length%4!==0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:f}},fb=function(e,t,r){var n=[],a=[],o={},s=0;for(s=0;s<e.length;s++){var u=e[s];o[u.id]=s,n.push(u.x),n.push(u.y),n.push(0),n.push(0),a.push([])}for(s=0;s<t.length;s++){var f=t[s];a[o[f.source]].push(o[f.target]),a[o[f.source]].push(r(f)),a[o[f.target]].push(o[f.source]),a[o[f.target]].push(r(f))}var c=0;for(s=0;s<e.length;s++){var l=n.length,x=a[s],m=x.length;n[s*4+2]=l,n[s*4+3]=m/2,c=Math.max(c,m/2);for(var C=0;C<m;++C){var R=x[C];n.push(+R)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:c}},cb=function(e,t,r,n){var a=[],o=[],s={},u=0;for(u=0;u<e.length;u++){var f=e[u];s[f.id]=u,a.push(f.x),a.push(f.y),a.push(0),a.push(0),o.push([])}for(u=0;u<t.length;u++){var c=t[u];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(r(c)),o[s[c.source]].push(n(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(r(c)),o[s[c.target]].push(n(c)),o[s[c.target]].push(0)}var l=0;for(u=0;u<e.length;u++){var x=a.length,m=o[u],C=m.length;a[u*4+2]=x+1048576*C/4,a[u*4+3]=0,l=Math.max(l,C/4);for(var R=0;R<C;++R){var V=m[R];a.push(+V)}}for(;a.length%4!==0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:l}},lb=function(e,t){var r=[],n=e.length,a={};return t.forEach(function(o){e.forEach(function(s,u){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),r.push(a[o[s]]),u===n-1)for(;r.length%4!==0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(a).length}},hb=function(e){for(var t=[],r=e.length,n=e[0].length,a=function(u){e.forEach(function(f,c){if(t.push(f[u]),c===r-1)for(;t.length%4!==0;)t.push(0)})},o=0;o<n;o++)a(o);return new Float32Array(t)},vb=function(e,t){var r=["V","TB","BT"],n={x:1/0,y:1/0},a={x:-1/0,y:-1/0},o="x",s="y";t&&r.indexOf(t)>=0&&(s="x",o="y");var u=0;F0(e,function(l){return u++,l.x>a.x&&(a.x=l.x),l.x<n.x&&(n.x=l.x),l.y>a.y&&(a.y=l.y),l.y<n.y&&(n.y=l.y),!0});var f=Math.PI*2/u,c=a[s]-n[s];return c===0||F0(e,function(l){var x=(l[s]-n[s])/c*(Math.PI*2-f)+f,m=Math.abs(o==="x"?l.x-e.x:l.y-e.y);return l.x=m*Math.cos(x),l.y=m*Math.sin(x),!0}),e},G0=function i(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){t=t||{};var r=t.parent!==void 0?t.parent:document.body,n=t.id!==void 0?t.id:"oldie",a=i().getWebGLErrorMessage();a.id=n,r.appendChild(a)}}},z0=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("firefox")>-1?"firefox":e.indexOf("safari")>-1?"safari":e.indexOf("opr")>-1?"opera":e.indexOf("chrome")>-1?"chrome":e.indexOf("trident")>-1?"ie 11":e.indexOf("ie")>-1?"ie":"unknown"},db=(0,K.__assign)((0,K.__assign)((0,K.__assign)((0,K.__assign)((0,K.__assign)({},zs),S),_),E),I),cc=db,gb=cc.radialLayout,pb=function(){function i(e){this.type=e.type,this.radial=e.radial,this.config=e}return i.prototype.init=function(e){var t=this;if(this.data=e,this.radial){this.layoutMethod=function(r){var n=_v()[t.type](r,t.config);return gb(n),n};return}this.layoutMethod=function(r){return _v()[t.type](r,t.config)}},i.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},i.prototype.layout=function(e){return this.init(e),this.execute()},i}(),yb=pb;(0,ii.registerLayout)("grid",ii.GridLayout),(0,ii.registerLayout)("random",ii.RandomLayout),(0,ii.registerLayout)("force",ii.ForceLayout),(0,ii.registerLayout)("circular",ii.CircularLayout),(0,ii.registerLayout)("dagre",ii.DagreLayout),(0,ii.registerLayout)("dagreCompound",ii.DagreCompoundLayout),(0,ii.registerLayout)("radial",ii.RadialLayout),(0,ii.registerLayout)("concentric",ii.ConcentricLayout),(0,ii.registerLayout)("mds",ii.MDSLayout),(0,ii.registerLayout)("fruchterman",ii.FruchtermanLayout),(0,ii.registerLayout)("fruchterman-gpu",ii.FruchtermanGPULayout),(0,ii.registerLayout)("gForce",ii.GForceLayout),(0,ii.registerLayout)("force2",ii.Force2Layout),(0,ii.registerLayout)("gForce-gpu",ii.GForceGPULayout),(0,ii.registerLayout)("comboForce",ii.ComboForceLayout),(0,ii.registerLayout)("comboCombined",ii.ComboCombinedLayout),(0,ii.registerLayout)("forceAtlas2",ii.ForceAtlas2Layout);var mb=function(e,t){t.isCustomLayout=!0,ii.Layouts[e]=(0,ii.registerLayout)(e,t)},xb=function(){function i(e,t){var r=e.toString(),n=new Blob(["importScripts('".concat(t,"');(").concat(r,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}return i}(),bb=xb,Eb=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js");function t(){var n={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var u=s.data.type;return u===n.RUN||u===n.GPURUN}function o(s){var u=this,f=s.data.type;switch(f){case n.RUN:{var c=s.data,l=c.nodes,x=c.edges,m=c.layoutCfg,C=m===void 0?{}:m,R=C.type,V=layout.getLayoutByName(R);if(!V){this.postMessage({type:n.ERROR,message:"layout ".concat(R," not found")});break}var Q;C.onLayoutEnd=function(){u.postMessage({type:n.END,nodes:l}),Q==null||Q.destroy()},Q=new V(C),Q.init({nodes:l,edges:x}),Q.execute();break}case n.GPURUN:{var rt=s.data,st=rt.nodes,x=rt.edges,lt=rt.layoutCfg,C=lt===void 0?{}:lt,Ct=rt.canvas,R=C.type,V=layout.getLayoutByName(R);if(!V){this.postMessage({type:n.ERROR,message:"layout ".concat(R," not found")});break}if(R.split("-")[1]!=="gpu"){this.postMessage({type:n.ERROR,message:"layout ".concat(R," does not support GPU")});break}var At=new V(C);At.init({nodes:st,edges:x}),At.executeWithWorker(Ct,this);break}default:break}}onmessage=function(u){a(u)&&o(u)}}var r=new bb(t,e);return r},oh={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function Ld(i){"@babel/helpers - typeof";return Ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ld(i)}var U0=function(e){return setTimeout(e,16)},W0=function(e){return clearTimeout(e)},Sv={requestAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||U0;return t(e)},cancelAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||W0;return t(e)}},wb=["fruchterman","gForce"],_b=["force","grid","circular"],Sb=function(i){(0,K.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.graph=t,r.layoutCfg=t.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=Eb(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(Sv.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(Sv.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,K.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,R,x,m,C,R,V;return(0,K.__generator)(this,function(Q){switch(Q.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];u=t.type,t.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},u&&this.isGPU&&(X0(u)?u="".concat(u,"-gpu"):console.warn("The '".concat(u,"' layout does not support GPU calculation for now, it will run in CPU."))),zs.isForce(u)?(f=t.onTick,c=t.animate,l=c===void 0&&(u==="force"||u==="force2"),R=function(){f&&f(),(c||l)&&s.refreshPositions()},t.tick=R):(u==="comboForce"||u==="comboCombined")&&(t.comboTrees=s.get("comboTrees")),x=!1;try{m=new ii.Layouts[u](t),this.layoutMethods[r]&&this.layoutMethods[r].destroy(),this.layoutMethods[r]=m}catch(rt){console.warn("The layout method: '".concat(u,"' does not exist! Please specify it first.")),o()}return x=m.enableTick,x&&(C=t.onTick,R=function(){C&&C(),s.refreshPositions()},m.tick=R),V=this.filterLayoutData(this.data,t),Tb(V,r),m.init(V),s.emit("beforesublayout",{type:u}),[4,m.execute()];case 1:return Q.sent(),m.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,K.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,x,m;return(0,K.__generator)(this,function(C){switch(C.label){case 0:return s=this.graph,u=r==null?void 0:r.type,r.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},zs.isForce(u)&&(f=r.onTick,c=r.animate,l=c===void 0&&(u==="force"||u==="force2"),x=function(){f==null||f(),(c||l)&&s.refreshPositions()},r.tick=x),m=this.filterLayoutData(this.data,r),t.init(m),t.updateCfg(r),s.emit("beforesublayout",{type:u}),[4,t.execute()];case 1:return C.sent(),t.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var r=this,n,a=this.graph;if(!(!a||a.get("destroyed"))){this.data=this.setDataFromGraph();var o=this.data,s=o.nodes,u=o.hiddenNodes;if(!s)return!1;var f=a.get("width"),c=a.get("height"),l={};Object.assign(l,{width:f,height:c,center:[f/2,c/2]},this.layoutCfg),this.layoutCfg=l;var x=l.type,m=!1;(n=this.layoutMethods)===null||n===void 0||n.forEach(function(Ct){var At;return m=!!(!((At=Ct.nodes)===null||At===void 0)&&At.length)||m});var C=this.destoryLayoutMethods();a.emit("beforelayout");var R=Promise.resolve();m&&x&&(C==null?void 0:C.length)===1&&C[0]===x?this.tweakInit():R=this.initPositions(l.center,s);var V=this.initPositions(l.center,u);V.then(),this.isGPU=Y0(l,x);var Q=l.onLayoutEnd,rt=l.layoutEndFormatted,st=l.adjust;if(rt||(l.layoutEndFormatted=!0,l.onAllLayoutEnd=function(){return(0,K.__awaiter)(r,void 0,void 0,function(){return(0,K.__generator)(this,function(Ct){switch(Ct.label){case 0:return Q&&Q(s),this.refreshLayout(),st&&l.pipes?[4,this.adjustPipesBox(this.data,st)]:[3,2];case 1:Ct.sent(),this.refreshLayout(),Ct.label=2;case 2:return a.emit("afterlayout"),[2]}})})}),this.stopWorker(),l.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var lt=!1;return l.type?(lt=!0,R=R.then(function(){return(0,K.__awaiter)(r,void 0,void 0,function(){return(0,K.__generator)(this,function(Ct){switch(Ct.label){case 0:return[4,this.execLayoutMethod(l,0)];case 1:return[2,Ct.sent()]}})})})):l.pipes&&(lt=!0,l.pipes.forEach(function(Ct,At){R=R.then(function(){return(0,K.__awaiter)(r,void 0,void 0,function(){return(0,K.__generator)(this,function(Nt){switch(Nt.label){case 0:return[4,this.execLayoutMethod(Ct,At)];case 1:return[2,Nt.sent()]}})})})})),lt?R.then(function(){l.onAllLayoutEnd&&l.onAllLayoutEnd(),t&&t()}).catch(function(Ct){console.warn("graph layout failed,",Ct)}):(a.refreshPositions(),t==null||t()),!1}},e.prototype.tweakInit=function(){var t=this,r=t.data,n=t.graph,a=r.nodes,o=r.edges;if(a!=null&&a.length){var s={};a.forEach(function(c){var l=c.x,x=c.y;!isNaN(l)&&!isNaN(x)&&(s[c.id]={x:l,y:x},c.mass=c.mass||2)}),o.forEach(function(c){var l=c.source,x=c.target,m=s[l],C=s[x];!m&&C?s[l]={x:C.x+(Math.random()-.5)*80,y:C.y+(Math.random()-.5)*80}:!C&&m&&(s[x]={x:m.x+(Math.random()-.5)*80,y:m.y+(Math.random()-.5)*80})});var u=n.get("width"),f=n.get("height");a.forEach(function(c){var l=s[c.id]||{x:u/2+(Math.random()-.5)*20,y:f/2+(Math.random()-.5)*20};c.x=l.x,c.y=l.y})}},e.prototype.initWithPreset=function(t,r){var n=this;return new Promise(function(a,o){return(0,K.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,x,m;return(0,K.__generator)(this,function(C){switch(C.label){case 0:return s=this,u=s.layoutCfg,f=s.data,c=u.preset,!(c!=null&&c.type)||!ii.Layouts[c==null?void 0:c.type]?(r==null||r(),a(),[2,!1]):(l=Y0(c,c.type),x=l?"".concat(c.type,"-gpu"):c.type,m=new ii.Layouts[x](c),delete u.preset,m.init(f),[4,m.execute()]);case 1:return C.sent(),t==null||t(),a(),[2,!0]}})})})},e.prototype.layoutWithWorker=function(t,r){var n=this,a=this,o=a.layoutCfg,s=a.graph,u=this.getWorker(),f=this.workerData;if(!u)return!1;f.requestId=null,f.requestId2=null,f.currentTick=null,f.currentTickData=null,s.emit("beforelayout");var c=Promise.resolve(),l=!1;if(o.type)l=!0,c=c.then(function(){return n.runWebworker(u,t,o)});else if(o.pipes){l=!0;for(var x=function(Q){c=c.then(function(){return n.runWebworker(u,t,Q)})},m=0,C=o.pipes;m<C.length;m++){var R=C[m];x(R)}}return l&&c.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),r==null||r()}).catch(function(V){console.error("layout failed",V)}),!0},e.prototype.runWebworker=function(t,r,n){var a=this,o=this.isGPU,s=this.filterLayoutData(r,n),u=s.nodes,f=s.edges,c=document.createElement("canvas"),l=o&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,x=Cb(n,function(C){return typeof C!="function"});if(!l)t.postMessage({type:oh.RUN,nodes:u,edges:f,layoutCfg:x});else{var m=c.transferControlToOffscreen();x.type="".concat(x.type,"-gpu"),t.postMessage({type:oh.GPURUN,nodes:u,edges:f,layoutCfg:x,canvas:m},[m])}return new Promise(function(C,R){t.onmessage=function(V){a.handleWorkerMessage(C,R,V,s,n)}})},e.prototype.handleWorkerMessage=function(t,r,n,a,o){var s=this,u=s.graph,f=s.workerData,c=n.data,l=c.type,x=function(){o.onTick&&o.onTick()};switch(l){case oh.TICK:f.currentTick=c.currentTick,f.currentTickData=c,f.requestId||(f.requestId=Sv.requestAnimationFrame(function(){Dd(a,c),u.refreshPositions(),x(),c.currentTick===c.totalTicks?t():f.currentTick===c.totalTicks&&(f.requestId2=Sv.requestAnimationFrame(function(){Dd(a,f.currentTickData),u.refreshPositions(),f.requestId2=null,x(),t()})),f.requestId=null}));break;case oh.END:f.currentTick==null&&(Dd(a,c),t());break;case oh.GPUEND:f.currentTick==null&&(Ab(a,c),t());break;case oh.ERROR:console.warn("Web-Worker layout error!",c.message),r();break;default:r();break}},e.prototype.updateLayoutCfg=function(t){var r=this,n=this,a=n.graph,o=n.layoutMethods;if(!(!a||a.get("destroyed"))){var s=t.disableTriggerLayout,u=(0,K.__rest)(t,["disableTriggerLayout"]),f=(0,p.mix)({},this.layoutCfg,u);if(this.layoutCfg=f,!s){if(!(o!=null&&o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(u.workerEnabled&&this.layoutWithWorker(this.data,null))){a.emit("beforelayout");var c=Promise.resolve(),l=!1;(o==null?void 0:o.length)===1?(l=!0,c=c.then(function(){return(0,K.__awaiter)(r,void 0,void 0,function(){return(0,K.__generator)(this,function(x){switch(x.label){case 0:return[4,this.updateLayoutMethod(o[0],f)];case 1:return[2,x.sent()]}})})})):o!=null&&o.length&&(l=!0,o.forEach(function(x,m){var C=f.pipes[m];c=c.then(function(){return(0,K.__awaiter)(r,void 0,void 0,function(){return(0,K.__generator)(this,function(R){switch(R.label){case 0:return[4,this.updateLayoutMethod(x,C)];case 1:return[2,R.sent()]}})})})})),l&&c.then(function(){f.onAllLayoutEnd&&f.onAllLayoutEnd()}).catch(function(x){console.warn("layout failed",x)})}}}},e.prototype.adjustPipesBox=function(t,r){var n=this;return new Promise(function(a){var o=t.nodes;o!=null&&o.length||a(),_b.includes(r)||(console.warn("The adjust type ".concat(r," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),a());var s={center:n.layoutCfg.center,nodeSize:function(C){return Math.max(C.height,C.width)},preventOverlap:!0,onLayoutEnd:function(){}},u=n.getLayoutBBox(o),f=u.groupNodes,c=u.layoutNodes,l=(0,p.clone)(c);s.onLayoutEnd=function(){c==null||c.forEach(function(m,C){var R,V,Q,rt=m.x-((R=l[C])===null||R===void 0?void 0:R.x),st=m.y-((V=l[C])===null||V===void 0?void 0:V.y);(Q=f[C])===null||Q===void 0||Q.forEach(function(lt){lt.x+=rt,lt.y+=st})}),a()};var x=new ii.Layouts[r](s);x.layout({nodes:c})})},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}($g),Mb=Sb;function Dd(i,e){for(var t=i.nodes,r=e.nodes,n=t.length,a=0;a<n;a++){var o=t[a];o.x=r[a].x,o.y=r[a].y}}function Cb(i,e){var t={};return i&&Ld(i)==="object"?(Object.keys(i).forEach(function(r){i.hasOwnProperty(r)&&e(i[r])&&(t[r]=i[r])}),t):i}function Ab(i,e){for(var t=i.nodes,r=e.vertexEdgeData,n=t.length,a=0;a<n;a++){var o=t[a],s=r[4*a],u=r[4*a+1];o.x=s,o.y=u}}function Tb(i,e){var t;if(!((t=i==null?void 0:i.nodes)===null||t===void 0)&&t.length){var r=i.nodes;r.forEach(function(n){n.layoutOrder=e})}}function X0(i){return wb.includes(i)}function Y0(i,e){var t=e;e&&e.split("-")[1]==="gpu"&&(t=e.split("-")[0],i.gpuEnabled=!0);var r=!1;return i.gpuEnabled&&(r=!0,G0().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),r=!1)),r&&!X0(t)&&(console.warn("The '".concat(t,"' layout does not support GPU calculation for now, it will run in CPU.")),r=!1),r}var V0=Bt,Ib="svg",Ob=function(i){(0,K.__extends)(e,i);function e(t){var r=i.call(this,t)||this,n=r.get("defaultNode");return n||r.set("defaultNode",{type:"circle"}),n.type||(n.type="circle",r.set("defaultNode",n)),r.destroyed=!1,r}return e.prototype.initLayoutController=function(){var t=new Mb(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new ib(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var r=t.clientWidth,n=t.clientHeight,a=this.get("width")||r,o=this.get("height")||n;!this.get("width")&&!this.get("height")&&(this.set("width",r),this.set("height",n));var s=this.get("renderer"),u;if(s===Ib)u=new Dh({container:t,width:a,height:o});else{var f={container:t,width:a,height:o},c=this.get("pixelRatio");c&&(f.pixelRatio=c,window.devicePixelRatio=c),u=new fc(f)}this.set("canvas",u)},e.prototype.initPlugins=function(){var t=this;(0,p.each)(t.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,r,n,a){return(0,K.__awaiter)(this,void 0,void 0,function(){var o,s,u;return(0,K.__generator)(this,function(f){switch(f.label){case 0:return o=t.style.backgroundImage,s=o.slice(5,o.length-2),u=new Image,u.src=s,[4,new Promise(function(c){u.onload=function(){var l=r.createPattern(u,"repeat");r.rect(0,0,n,a),r.fillStyle=l,r.fill(),c("")}})];case 1:return f.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,r,n,a,o,s){var u=this,f=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),l=c.getRenderer(),x=s||c.get("el"),m="";t||(t="image/png"),setTimeout(function(){return(0,K.__awaiter)(u,void 0,void 0,function(){var C,R,V,Q,rt,st,lt,Ct,At,Nt;return(0,K.__generator)(this,function(Kt){switch(Kt.label){case 0:return l!=="svg"?[3,1]:(C=x.cloneNode(!0),R=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),V=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",R),V.replaceChild(C,V.documentElement),Q=new XMLSerializer().serializeToString(V),m="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(Q)),[3,4]);case 1:return rt=void 0,st=x.getContext("2d"),lt=a||this.get("width"),Ct=o||this.get("height"),At=void 0,f?[4,this.downloadImageWatermark(f,st,lt,Ct)]:[3,3];case 2:Kt.sent(),Kt.label=3;case 3:if(r){Nt=typeof window!="undefined"?window.devicePixelRatio:1;try{rt=st.getImageData(0,0,lt*Nt,Ct*Nt),At=st.globalCompositeOperation,st.globalCompositeOperation="destination-over",st.fillStyle=r,st.fillRect(0,0,lt,Ct)}catch(ge){console.error("Download image failed. Out of memory at ImageData creation")}}m=x.toDataURL(t),r&&(st.clearRect(0,0,lt,Ct),st.putImageData(rt,0,0),st.globalCompositeOperation=At),Kt.label=4;case 4:return n&&n(m),[2]}})})},16)},e.prototype.toDataURL=function(t,r){var n=this.get("canvas"),a=n.getRenderer(),o=n.get("el");t||(t="image/png");var s="";if(a==="svg"){var u=o.cloneNode(!0),f=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",f);c.replaceChild(u,c.documentElement);var l=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(l))}else{var x=void 0,m=o.getContext("2d"),C=Math.max(this.get("width"),500),R=Math.max(this.get("height"),500),V=void 0;if(r){var Q=typeof window!="undefined"&&window.devicePixelRatio||1;try{x=m.getImageData(0,0,C*Q,R*Q),V=m.globalCompositeOperation,m.globalCompositeOperation="destination-over",m.fillStyle=r,m.fillRect(0,0,C,R)}catch(rt){console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(t),r&&(m.clearRect(0,0,C,R),m.putImageData(x,0,0),m.globalCompositeOperation=V)}return s},e.prototype.toFullDataURL=function(t,r,n){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,u=this.get("renderer"),f=Ji('<div id="virtual-image"></div>'),c=n?n.backgroundColor:void 0,l=n?n.padding:void 0;l?(0,p.isNumber)(l)&&(l=[l,l,l,l]):l=[0,0,0,0];var x=o+l[0]+l[2],m=s+l[1]+l[3],C={container:f,height:x,width:m,quickHit:!0},R=u==="svg"?new Dh(C):new fc(C),V=this.get("group"),Q=V.clone(),rt=(0,p.clone)(Q.getMatrix());rt||(rt=[1,0,0,0,1,0,0,0,1]);var st=(a.maxX+a.minX)/2,lt=(a.maxY+a.minY)/2;rt=V0(rt,[["t",-st,-lt],["t",s/2+l[3],o/2+l[0]]]),Q.resetMatrix(),Q.setMatrix(rt),R.add(Q);var Ct=R.get("el"),At="";r||(r="image/png"),setTimeout(function(){if(u==="svg"){var Nt=Ct.cloneNode(!0),Kt=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),ge=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Kt);ge.replaceChild(Nt,ge.documentElement);var ue=new XMLSerializer().serializeToString(ge);At="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(ue))}else{var Ae=void 0,Ke=Ct.getContext("2d"),Gr=void 0;if(c){var wr=typeof window!="undefined"?window.devicePixelRatio:1;try{Ae=Ke.getImageData(0,0,m*wr,x*wr),Gr=Ke.globalCompositeOperation,Ke.globalCompositeOperation="destination-over",Ke.fillStyle=c,Ke.fillRect(0,0,m,x)}catch(Mr){console.error("Download image failed. Out of memory at ImageData creation")}}At=Ct.toDataURL(r),c&&(Ke.clearRect(0,0,m,x),Ke.putImageData(Ae,0,0),Ke.globalCompositeOperation=Gr)}t&&t(At)},16)},e.prototype.downloadFullImage=function(t,r,n){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,u=o.width,f=this.get("renderer"),c=Ji('<div id="virtual-image"></div>'),l=document.querySelector(".g6-graph-watermarker"),x=n?n.backgroundColor:void 0,m=n?n.padding:void 0;m?(0,p.isNumber)(m)&&(m=[m,m,m,m]):m=[0,0,0,0];var C=s+m[0]+m[2],R=u+m[1]+m[3];if(l){var V=this.get("graphWaterMarker").cfg||{},Q=V.width,rt=V.height;C=Math.ceil(C/rt)*rt,R=Math.ceil(R/Q)*Q}var st={container:c,height:C,width:R},lt=f==="svg"?new Dh(st):new fc(st),Ct=this.get("group"),At=tb(Ct),Nt=(0,p.clone)(At.getMatrix());Nt||(Nt=[1,0,0,0,1,0,0,0,1]);var Kt=(o.maxX+o.minX)/2,ge=(o.maxY+o.minY)/2;Nt=V0(Nt,[["t",-Kt,-ge],["t",u/2+m[3],s/2+m[0]]]),At.resetMatrix(),At.setMatrix(Nt),lt.add(At);var ue=lt.get("el");r||(r="image/png"),this.asyncToDataUrl(r,x,function(Ae){var Ke=document.createElement("a"),Gr=(t||"graph")+(f==="svg"?".svg":".".concat(r.split("/")[1]));a.dataURLToImage(Ae,f,Ke,Gr);var wr=document.createEvent("MouseEvents");wr.initEvent("click",!1,!1),Ke.dispatchEvent(wr)},R,C,ue)},e.prototype.downloadImage=function(t,r,n){var a=this,o=this;o.stopAnimate();var s=o.get("canvas"),u=s.getRenderer();r||(r="image/png");var f=(t||"graph")+(u==="svg"?".svg":".".concat(r.split("/")[1])),c=document.createElement("a");o.asyncToDataUrl(r,n,function(l){a.dataURLToImage(l,u,c,f);var x=document.createEvent("MouseEvents");x.initEvent("click",!1,!1),c.dispatchEvent(x)})},e.prototype.dataURLToImage=function(t,r,n,a){if(!t||t==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var u=o[0].match(/:(.*?);/);u&&u.length>=2&&(s=u[1])}for(var f=atob(o[1]),c=f.length,l=new Uint8Array(c);c--;)l[c]=f.charCodeAt(c);var x=new Blob([l],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(x,a):n.addEventListener("click",function(){n.download=a,n.href=window.URL.createObjectURL(x)})}else n.addEventListener("click",function(){n.download=a,n.href=t})},e.prototype.addPlugin=function(t){var r=this;t.destroyed||(r.get("plugins").push(t),t.initPlugin(r))},e.prototype.removePlugin=function(t){var r=this.get("plugins"),n=r.indexOf(t);n>=0&&(t.destroyPlugin(),r.splice(n,1))},e.prototype.setImageWaterMarker=function(t,r){t===void 0&&(t=Cl.waterMarkerImage);var n=this.get("container");(0,p.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,p.deepMix)({},Cl.imageWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.image;if(!t){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var x={container:n,width:s,height:u,capture:!1},m=this.get("pixelRatio");m&&(x.pixelRatio=m,window.devicePixelRatio=m),a=new fc(x),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var C=a.get("context"),R=c.rotate,V=c.x,Q=c.y;C.rotate(-R*Math.PI/180);var rt=new Image;rt.crossOrigin="anonymous",rt.src=t,rt.onload=function(){if(C.drawImage(rt,V,Q,c.width,c.height),C.rotate(R*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var st=document.querySelector(".g6-graph-watermarker");st||(st=document.createElement("div"),st.className="g6-graph-watermarker"),st.className="g6-graph-watermarker",a.destroyed||(st.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(st))}}},e.prototype.setTextWaterMarker=function(t,r){var n=this.get("container");(0,p.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,p.deepMix)({},Cl.textWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.text;if(!(t!=null&&t.length)){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var x={container:n,width:s,height:u,capture:!1},m=this.get("pixelRatio");m&&(x.pixelRatio=m,window.devicePixelRatio=m),a=new fc(x),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var C=a.get("context"),R=c.rotate,V=c.fill,Q=c.fontFamily,rt=c.fontSize,st=c.baseline,lt=c.x,Ct=c.y,At=c.lineHeight;C.rotate(-R*Math.PI/180),C.font="".concat(rt,"px ").concat(Q),C.fillStyle=V,C.textBaseline=st;for(var Nt=(0,p.isString)(t)?[t]:t,Kt=Nt.length-1;Kt>=0;Kt--)C.fillText(Nt[Kt],lt,Ct+Kt*At);if(C.rotate(R*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var ge=document.querySelector(".g6-graph-watermarker");ge||(ge=document.createElement("div"),ge.className="g6-graph-watermarker"),ge.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(ge)}},e.prototype.destroy=function(){var t,r,n,a;(0,p.each)(this.get("plugins"),function(c){c.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var u=o[s];if(u){var f=u.parentElement;f&&f.removeChild(u)}}(t=this.get("eventController"))===null||t===void 0||t.destroy(),(r=this.get("layoutController"))===null||r===void 0||r.destroy(),(n=this.get("graphWaterMarker"))===null||n===void 0||n.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),i.prototype.destroy.call(this)},e}(Yg),j0=Ob;function Nd(i){"@babel/helpers - typeof";return Nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nd(i)}function H0(i,e){if(e===void 0&&(e=new WeakMap),i===null)return i;if(i instanceof Date)return new Date(i);if(i instanceof RegExp)return new RegExp(i);if(Nd(i)!=="object")return i;if(e.get(i))return e.get(i);var t=Array.isArray(i)?[]:{};e.set(i,t);for(var r in i)i.hasOwnProperty(r)&&i[r]!==void 0&&(t[r]=H0(i[r],e));return t}function Lb(i){try{return structuredClone(i)}catch(e){return H0(i)}}var Db=cc.radialLayout,Pd=cc.traverseTree,Nb=function(i){(0,K.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return e.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction=t.type==="indented"?"LR":"TB"),t.radial?function(r){var n=_v()[t.type](r,t);return Db(n),n}:function(r){return _v()[t.type](r,t)}):null},e.indexOfChild=function(t,r){var n=-1;return(0,p.each)(t,function(a,o){if(r===a.id)return n=o,!1}),n},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,r,n){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=a.addItem("node",o,!1);if(r){if(s.set("parent",r),n){var u=r.get("originAttrs");if(u)s.set("originAttrs",u);else{var f=r.getModel();s.set("originAttrs",{x:f.x,y:f.y})}}var c=r.get("children");c?c.push(s):r.set("children",[s]),a.addItem("edge",{source:r.get("id"),target:s.get("id"),id:"".concat(r.get("id"),":").concat(s.get("id"))},!1)}return(0,p.each)(t.children||[],function(l){a.innerAddChild(l,s,n)}),a.emit("afteraddchild",{item:s,parent:r}),s},e.prototype.innerUpdateChild=function(t,r,n){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,r,n);return}(0,p.each)(t.children||[],function(C){a.innerUpdateChild(C,o,n)});var s=o.get("children");if(s){var u=s.length;if(u>0)for(var f=s.length-1;f>=0;f--){var c=s[f].getModel();e.indexOfChild(t.children||[],c.id)===-1&&(a.innerRemoveChild(c.id,{x:t.x,y:t.y},n),s.splice(f,1))}}var l,x;o.get("originAttrs")&&(l=o.get("originAttrs").x,x=o.get("originAttrs").y);var m=o.getModel();n&&o.set("originAttrs",{x:m.x,y:m.y}),o.set("model",Object.assign(m,t.data)),(l!==t.x||x!==t.y)&&o.updatePosition({x:t.x,y:t.y})},e.prototype.innerRemoveChild=function(t,r,n){var a=this,o=a.findById(t);if(o)if((0,p.each)(o.get("children"),function(u){a.innerRemoveChild(u.getModel().id,r,n)}),n){var s=o.getModel();o.set("to",r),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},e.prototype.changeData=function(t,r){r===void 0&&(r=!0);var n=this;this.getNodes().map(function(a){return n.clearItemStates(a)}),this.getEdges().map(function(a){return n.clearItemStates(a)}),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:t||n.get("data")}),t?(n.data(t),n.render(!1)):n.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var r=this;r.updateLayout(t)},e.prototype.updateLayout=function(t,r,n,a){a===void 0&&(a=!0);var o=this;if(!t){console.warn("layout cannot be null");return}if(a&&this.get("enabledStack")&&this.pushStack("layout",{before:o.get("layout"),after:t}),o.set("layout",t),o.set("layoutMethod",o.getLayout()),o.layout(),r){var s=n;s||(r==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var u=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*u[0]+u[6],s.y=s.y*u[0]+u[7];var f=this.getGroup().getCanvasBBox(),c=f.minX,l=f.maxX,x=f.minY,m=f.maxY,C={x:(c+l)/2,y:(x+m)/2};r==="begin"&&(C.x=c,C.y=x),this.translate(s.x-C.x,s.y-C.y)}},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var r=this;r.layout(t)},e.prototype.layout=function(t){var r=this,n=this,a=n.get("data"),o=n.get("layoutMethod"),s=n.get("layout"),u=a;if(s!=null&&s.excludeInvisibles){a=(0,p.clone)(n.get("data"));var f={};Pd(a,function(x){var m=x.children;if(!(m!=null&&m.length))return!0;for(var C=m.length-1;C>=0;C--){var R=r.findById(m[C].id),V=R?!R.isVisible():m[C].visible===!1;V&&(f[x.id]=f[x.id]||[],f[x.id].push({idx:C,child:m.splice(C,1)[0]}))}}),u=o?o(a,n.get("layout")):a,Pd(u,function(x){var m=f[x.id];if(m!=null&&m.length)for(var C=m.length-1;C>=0;C--){var R=m[C],V=R.idx,Q=R.child;x.children.splice(V,0,Q)}})}else u=o?o(a,n.get("layout")):a;var c=n.get("animate");if(n.emit("beforerefreshlayout",{data:a,layoutData:u}),n.emit("beforelayout"),n.innerUpdateChild(u,void 0,c),t){var l=n.get("viewController");l.fitView()}c?n.layoutAnimate(u):(n.refresh(),n.paint()),n.emit("afterrefreshlayout",{data:a,layoutData:u}),n.emit("afterlayout")},e.prototype.addChild=function(t,r,n){n===void 0&&(n=!0);var a=this;a.emit("beforeaddchild",{model:t,parent:r}),(0,p.isString)(r)||(r=r.get("id"));var o=a.findDataById(r);if(o){o.children||(o.children=[]),o.children.push(t);var s=a.findById(r);s.refresh(),a.changeData(void 0,n)}},e.prototype.updateChildren=function(t,r,n){n===void 0&&(n=!0);var a=this,o=a.findById(r);if(!r||!o){console.warn("Update children failed! There is no node with id '".concat(r,"'"));return}var s=a.findDataById(r);s.children=t,o.refresh(),a.changeData(void 0,n)},e.prototype.updateChild=function(t,r,n){n===void 0&&(n=!0);var a=this;if(!r||!a.findById(r)){a.changeData(t,n);return}var o=a.findDataById(r),s=a.findById(t.id);if(o.children||(o.children=[]),!s)o.children.push(t);else{var u=e.indexOfChild(o.children,t.id);u>-1&&(o.children[u]=t)}var f=a.findById(r);f==null||f.refresh(),a.changeData(void 0,n)},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0);var n=this,a=n.findById(t),o;if(a?o=a==null?void 0:a.get("parent"):o=n.getNodes().find(function(l){var x=l.getModel().children||[];return!!x.find(function(m){return m.id===t})}),o&&!o.destroyed){var s=o.get("id"),u=n.findDataById(s),f=u&&u.children||[],c=e.indexOfChild(f,t);f.splice(c,1),o.refresh()}n.changeData(void 0,r)},e.prototype.findDataById=function(t,r){var n=this;if(r||(r=n.get("data")),t===r.id)return r;var a=null;return(0,p.each)(r.children||[],function(o){if(o.id===t)return a=o,!1;if(a=n.findDataById(t,o),a)return!1}),a},e.prototype.layoutAnimate=function(t,r){var n=this,a=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){Pd(t,function(s){var u=n.findById(s.id);if(u){var f=u.get("originAttrs"),c=u.get("model");if(f||(f={x:c.x,y:c.y},u.set("originAttrs",f)),r){var l=r(u,o,f,t);u.set("model",Object.assign(c,l))}else c.x=f.x+(s.x-f.x)*o,c.y=f.y+(s.y-f.y)*o}return!0}),(0,p.each)(n.get("removeList"),function(s){var u=s.getModel(),f=s.get("originAttrs"),c=s.get("to");u.x=f.x+(c.x-f.x)*o,u.y=f.y+(c.y-f.y)*o}),n.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){(0,p.each)(n.getNodes(),function(s){s.set("originAttrs",null)}),(0,p.each)(n.get("removeList"),function(s){n.removeItem(s,!1)}),n.set("removeList",[]),a.callback&&a.callback(),n.emit("afteranimate",{data:t})},delay:a.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){t===void 0&&(t=!0);var r=this,n=r.get("data");if(!n||!(0,p.isObject)(n)||!Object.keys(n).length)throw new Error("data must be defined first");r.clear(),t&&this.get("enabledStack")&&this.clearStack(),r.emit("beforerender"),r.layout(this.get("fitView")),r.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(t){i.prototype.data.call(this,t),this.set("originData",Lb(t))},e}(j0),Pb=Nb;function Wa(i,e){if(i)for(var t in e)e.hasOwnProperty(t)&&(i.style[t]=e[t]);return i}var kb=function(){function i(e){this._cfgs=(0,p.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return i.prototype.getDefaultCfgs=function(){return{}},i.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var r=t.getEvents(),n={};(0,p.each)(r,function(a,o){var s=(0,p.wrapBehavior)(t,a);n[o]=s,e.on(o,s)}),this._events=n,this.init()},i.prototype.getEvents=function(){return{}},i.prototype.get=function(e){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[e]},i.prototype.set=function(e,t){this._cfgs[e]=t},i.prototype.destroy=function(){},i.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;(0,p.each)(t,function(r,n){e.off(n,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},i}(),hu=kb,Rb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),K0="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",Bb=function(i){Rb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{img:K0,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),r=t.get("container"),n=t.get("canvas").get("el"),a=this.get("img")||K0;a.includes("url(")||(a='url("'.concat(a,'")'));var o=Ji(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=Ji(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(a,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),r.insertBefore(o,n)},e.prototype.positionInit=function(){var t=this.get("graph"),r=t.get("minZoom"),n=t.get("width"),a=t.get("height");Wa(this.get("container"),{width:"".concat(n,"px"),height:"".concat(a,"px")});var o=n*80/r,s=a*80/r;Wa(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(s,"px"),left:"-".concat(o/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var r=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(a?n[6]:"0",", ").concat(a?n[7]:"0",")");Wa(r,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),r=t.get("container"),n=this.get("container");r.removeChild(n)},e}(hu),Fb=Bb,Gb=z(38186),kh=z.n(Gb),zb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&kh()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var Ub=function(i){zb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(r){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(r){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),r=Ji("<div class=".concat(t||"g6-component-contextmenu","></div>"));Wa(r,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),(0,p.isString)(n)&&(n=document.getElementById(n)),n.appendChild(r),this.set("menu",r)},e.prototype.onMenuShow=function(t){var r=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1){r.onMenuHide();return}}else if(n.indexOf("canvas")===-1){r.onMenuHide();return}var a=this.get("shouldBegin");if(a(t)){var o=this.get("menu"),s=this.get("getContent"),u=this.get("graph"),f=s(t,u);(0,p.isString)(f)?o.innerHTML=f:o.innerHTML=f.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var l=function(Kt){c(Kt.target,t.item,u)};this.set("handleMenuClickWrapper",l),o.addEventListener("click",l)}var x=u.get("width"),m=u.get("height"),C=o.getBoundingClientRect(),R=this.get("offsetX")||0,V=this.get("offsetY")||0,Q=u.getContainer().offsetTop,rt=u.getContainer().offsetLeft,st=t.canvasX+rt+R,lt=t.canvasY+Q+V;st+C.width>x&&(st=t.canvasX-C.width-R+rt),lt+C.height>m&&(lt=t.canvasY-C.height-V+Q),lt<0&&(lt=0),Wa(o,{top:"".concat(lt,"px"),left:"".concat(st,"px"),visibility:"visible"});var Ct=this.get("trigger")==="click",At=function(Kt){if(Ct){Ct=!1;return}r.onMenuHide()};document.body.addEventListener("click",At),this.set("handler",At)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),r=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}r&&document.body.removeEventListener("click",r)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&Wa(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,p.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(hu),Wb=Ub,Xb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kd=function(){return kd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},kd.apply(this,arguments)},Z0=Math.max,Yb=Bt,Vb="default",jb="keyShape",Hb="delegate",$0="svg",Kb=function(i){Xb(e,i);function e(t){var r=i.call(this,t)||this;return r.handleUpdateCanvas=(0,p.debounce)(function(n){var a=r;a.destroyed||a.updateCanvas()},100,!1),r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.size,a=r.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,f=navigator.userAgent.toLowerCase().indexOf("safari")>-1,c=Ji(`
      <div
        class=`.concat(r.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(f||u),`
      </div>`)),l=0,x=0,m=!1,C=0,R=0,V=0,Q=0,rt=0,st=0,lt=f||u?"mousedown":"dragstart";c.addEventListener(lt,function(Kt){var ge,ue;if(Kt.dataTransfer){var Ae=new Image;Ae.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(ue=(ge=Kt.dataTransfer).setDragImage)===null||ue===void 0||ue.call(ge,Ae,0,0);try{Kt.dataTransfer.setData("text/html","view-port-minimap")}catch(Gr){Kt.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,Kt.target===c){var Ke=c.style;C=parseInt(Ke.left,10),R=parseInt(Ke.top,10),V=parseInt(Ke.width,10),Q=parseInt(Ke.height,10),!(V>n[0]||Q>n[1])&&(st=a.getZoom(),rt=t.get("ratio"),m=!0,l=Kt.clientX,x=Kt.clientY)}},!1);var Ct=function(ge){if(!(!m||(0,p.isNil)(ge.clientX)||(0,p.isNil)(ge.clientY))){var ue=l-ge.clientX,Ae=x-ge.clientY;(C-ue<0||C-ue+V>=n[0])&&(ue=0),(R-Ae<0||R-Ae+Q>=n[1])&&(Ae=0),C-=ue,R-=Ae,Wa(c,{left:"".concat(C,"px"),top:"".concat(R,"px")}),a.translate(ue*st/rt,Ae*st/rt),l=ge.clientX,x=ge.clientY}};!f&&!u&&c.addEventListener("drag",Ct,!1);var At=function(){m=!1,r.refresh=!0},Nt=f||u?"mouseup":"dragend";c.addEventListener(Nt,At,!1),s.addEventListener("mouseleave",At),s.addEventListener("mouseup",At),(f||u)&&s.addEventListener("mousemove",Ct,!1),this.set("viewport",c),s.appendChild(c)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("totaldx"),n=this.get("totaldy"),a=this.get("graph"),o=this.get("size"),s=a.get("canvas").get("el"),u=a.get("width")||s.scrollWidth||500,f=a.get("height")||s.scrollHeight||500,c=a.getPointByCanvas(0,0),l=a.getPointByCanvas(u,f),x=this.get("viewport");x||this.initViewport();var m=(l.x-c.x)*t,C=(l.y-c.y)*t,R=c.x*t+r,V=c.y*t+n,Q=R+m,rt=V+C;R<0&&(m+=R,R=0),Q>o[0]&&(m=m-(Q-o[0])),V<0&&(C+=V,V=0),rt>o[1]&&(C=C-(rt-o[1])),this.set("ratio",t);var st="".concat(R,"px"),lt="".concat(V,"px");Wa(x,{left:st,top:lt,width:"".concat(m,"px"),height:"".concat(C,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,r=this.get("canvas"),n=t.get("group");if(!n.destroyed){r.clear();var a;this.get("hideEdge")?(a=r.addGroup(),n.get("children").forEach(function(s){s.get("id").includes("-edge")||a.add(s.clone())})):(a=n.clone(),a.resetMatrix(),r.add(a));var o=t.get("renderer");o===$0&&this.updateVisible(a)}},e.prototype.updateVisible=function(t){var r=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var n=t.get("children");if(!n||!n.length)return;n.forEach(function(a){a.get("visible")||a.hide(),r.updateVisible(a)})}},e.prototype.updateKeyShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,p.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,p.each)(r.getNodes(),function(u){t.updateOneNodeKeyShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,p.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,r){if(!this.destroyed){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?f=Object.assign(u,f):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?(f=Object.assign(u,f),a.toFront()):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,p.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,p.each)(r.getNodes(),function(u){t.updateOneNodeDelegateShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,p.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},r=Object.keys(t);if(!(!r||r.length===0))for(var n=r.length-1;n>=0;n--){var a=t[r[n]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[r[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")];if(a){var o=t.get("keyShape").attr("path");a.attr("path",o)}else a=t.get("keyShape").clone(),r.add(a);t.isVisible()?a.show():a.hide(),a.exist=!0,n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,r){var n=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[t.get("id")],s=t.getBBox();if(o){var u={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(u),o.toFront()}else o=r.addShape("rect",{attrs:kd({x:s.minX,y:s.minY,width:s.width,height:s.height},n),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=t.get("size"),a=t.get("className"),o=t.get("container"),s=Ji("<div class='".concat(a,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));(0,p.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):r.get("container").appendChild(s),t.set("container",s);var u=Ji('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(u),u.addEventListener("dragenter",function(l){l.preventDefault()}),u.addEventListener("dragover",function(l){l.preventDefault()});var f,c=r.get("renderer");c===$0?f=new Dh({container:u,width:n[0],height:n[1]}):f=new fc({container:u,width:n[0],height:n[1]}),t.set("canvas",f),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case Vb:this.updateGraphShapes();break;case jb:this.updateKeyShapes();break;case Hb:this.updateDelegateShapes();break;default:break}var u=a.get("children")[0];if(u){u.resetMatrix();var f=u.getCanvasBBox(),c=r.get("canvas").getCanvasBBox(),l=r.getZoom()||1,x=c.width/l,m=c.height/l;Number.isFinite(f.width)&&(x=Z0(f.width,x),m=Z0(f.height,m)),x+=2*s,m+=2*s;var C=Math.min(n[0]/x,n[1]/m),R=[1,0,0,0,1,0,0,0,1],V=0,Q=0;Number.isFinite(f.minX)&&(V=-f.minX),Number.isFinite(f.minY)&&(Q=-f.minY);var rt=(n[0]-(x-2*s)*C)/2,st=(n[1]-(m-2*s)*C)/2;R=Yb(R,[["t",V,Q],["s",C,C],["t",rt,st]]),u.setMatrix(R),this.set("ratio",C),this.set("totaldx",rt+V*C),this.set("totaldy",st+Q*C),this.set("dx",rt),this.set("dy",st),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("container");r!=null&&r.parentNode&&r.parentNode.removeChild(r)},e}(hu),Zb=Kb,$b=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function Pf(i,e,t){var r=i.x-e.x,n=i.y-e.y;return!t||Math.abs(r)>t||Math.abs(n)>t?Math.sqrt(r*r+n*n):t}function qb(i,e){return i.x*e.x+i.y*e.y}function q0(i,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(t*t*e.source.x+t*(i.y-e.source.y)+i.x)/(t*t+1),n=t*(r-e.source.x)+e.source.y;return{x:r,y:n}}var Qb=function(i){$b(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),r=this.get("onTick"),n=function(){r&&r(),t.refreshPositions()};this.set("tick",n)},e.prototype.bundling=function(t){var r=this;if(r.set("data",t),!r.isTicking()){var n=t.edges||[],a=t.nodes||[],o={},s=!1;if(a.forEach(function(lt){(lt.x===null||!lt.y===null||lt.x===void 0||!lt.y===void 0)&&(s=!0),o[lt.id]=lt}),s)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",o);var u=r.get("divisions"),f=r.get("divRate"),c=r.divideEdges(u);r.set("edgePoints",c);var l=r.getEdgeBundles();r.set("edgeBundles",l);for(var x=r.get("cycles"),m=r.get("iterations"),C=r.get("iterRate"),R=r.get("lambda"),V=0;V<x;V++){for(var Q=function(Ct){var At=[];n.forEach(function(Nt,Kt){if(Nt.source!==Nt.target){var ge=o[Nt.source],ue=o[Nt.target];At[Kt]=r.getEdgeForces({source:ge,target:ue},Kt,u,R);for(var Ae=0;Ae<u+1;Ae++)c[Kt][Ae].x+=At[Kt][Ae].x,c[Kt][Ae].y+=At[Kt][Ae].y}})},rt=0;rt<m;rt++)Q(rt);R=R/2,u*=f,m*=C,c=r.divideEdges(u),r.set("edgePoints",c)}n.forEach(function(lt,Ct){lt.source!==lt.target&&(lt.type="polyline",lt.controlPoints=c[Ct].slice(1,c[Ct].length-1))});var st=r.get("graph");st.refresh()}},e.prototype.updateBundling=function(t){var r=this,n=t.data;if(n&&r.set("data",n),r.get("ticking")&&r.set("ticking",!1),Object.keys(t).forEach(function(o){r.set(o,t[o])}),t.onTick){var a=this.get("graph");r.set("tick",function(){t.onTick(),a.refresh()})}r.bundling(n)},e.prototype.divideEdges=function(t){var r=this,n=r.get("data").edges,a=r.get("nodeIdMap"),o=r.get("edgePoints");return(!o||o===void 0)&&(o=[]),n.forEach(function(s,u){var f;(!o[u]||o[u]===void 0)&&(o[u]=[]);var c=a[s.source],l=a[s.target];if(t===1)o[u].push({x:c.x,y:c.y}),o[u].push({x:.5*(c.x+l.x),y:.5*(c.y+l.y)}),o[u].push({x:l.x,y:l.y});else{var x=0;!((f=o[u])===null||f===void 0)&&f.length?x=r.getEdgeLength(o[u]):x=Pf({x:c.x,y:c.y},{x:l.x,y:l.y});var m=x/(t+1),C=m,R=[{x:c.x,y:c.y}];o[u].forEach(function(V,Q){if(Q!==0){for(var rt=Pf(V,o[u][Q-1]);rt>C;){var st=C/rt,lt={x:o[u][Q-1].x,y:o[u][Q-1].y};lt.x+=st*(V.x-o[u][Q-1].x),lt.y+=st*(V.y-o[u][Q-1].y),R.push(lt),rt-=C,C=m}C-=rt}}),R.push({x:l.x,y:l.y}),o[u]=R}}),o},e.prototype.getEdgeLength=function(t){var r=0;return t.forEach(function(n,a){a!==0&&(r+=Pf(n,t[a-1]))}),r},e.prototype.getEdgeBundles=function(){var t=this,r=t.get("data"),n=r.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),n.forEach(function(u,f){(!s[f]||s[f]===void 0)&&(s[f]=[])}),n.forEach(function(u,f){var c=o[u.source],l=o[u.target];n.forEach(function(x,m){if(!(m<=f)){var C=o[x.source],R=o[x.target],V=t.getBundleScore({source:c,target:l},{source:C,target:R});V>=a&&(s[f].push(m),s[m].push(f))}})}),s},e.prototype.getBundleScore=function(t,r){var n=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,t.length=Pf({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),r.length=Pf({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y});var a=n.getAngleScore(t,r),o=n.getScaleScore(t,r),s=n.getPositionScore(t,r),u=n.getVisibilityScore(t,r);return a*o*s*u},e.prototype.getAngleScore=function(t,r){var n=qb({x:t.vx,y:t.vy},{x:r.vx,y:r.vy});return n/(t.length*r.length)},e.prototype.getScaleScore=function(t,r){var n=(t.length+r.length)/2,a=2/(n/Math.min(t.length,r.length)+Math.max(t.length,r.length)/n);return a},e.prototype.getPositionScore=function(t,r){var n=(t.length+r.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2},s=Pf(a,o);return n/(n+s)},e.prototype.getVisibilityScore=function(t,r){var n=this.getEdgeVisibility(t,r),a=this.getEdgeVisibility(r,t);return n<a?n:a},e.prototype.getEdgeVisibility=function(t,r){var n=q0(r.source,t),a=q0(r.target,t),o={x:(n.x+a.x)/2,y:(n.y+a.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*Pf(o,s)/Pf(n,a))},e.prototype.getEdgeForces=function(t,r,n,a){for(var o=this,s=o.get("edgePoints"),u=o.get("K"),f=u/(Pf(t.source,t.target)*(n+1)),c=[{x:0,y:0}],l=1;l<n;l++){var x={x:0,y:0},m=o.getSpringForce({pre:s[r][l-1],cur:s[r][l],next:s[r][l+1]},f),C=o.getElectrostaticForce(l,r);x.x=a*(m.x+C.x),x.y=a*(m.y+C.y),c.push(x)}return c.push({x:0,y:0}),c},e.prototype.getSpringForce=function(t,r){var n=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return n*=r,a*=r,{x:n,y:a}},e.prototype.getElectrostaticForce=function(t,r){var n=this,a=n.get("eps"),o=n.get("edgeBundles"),s=n.get("edgePoints"),u=o[r],f={x:0,y:0};return u.forEach(function(c){var l={x:s[c][t].x-s[r][t].x,y:s[c][t].y-s[r][t].y};if(Math.abs(l.x)>a||Math.abs(l.y)>a){var x=Pf(s[c][t],s[r][t]),m=1/x;f.x+=l.x*m,f.y+=l.y*m}}),f},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),i.prototype.destroy.call(this)},e}(hu),Jb=Qb,tE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rd=function(){return Rd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Rd.apply(this,arguments)},Mv=.05,Q0={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},eE=function(i){tE(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,p.clone)(Q0),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,r=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",r*r);var n=t.get("d");t.set("molecularParam",(n+1)*r)},e.prototype.createDelegate=function(t){var r=this,n=this,a=n.get("delegate");(!a||a.destroyed)&&(n.magnify(t),a=n.get("delegate"),a.on("dragstart",function(o){n.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){n.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){r.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-Mv:a=1/(1-Mv);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.set("r2",l*l);var x=r.get("d");r.set("molecularParam",(x+1)*l),r.set("delegateCenterDiff",void 0),r.magnify(t,u)}},e.prototype.scaleRByDrag=function(t){var r=this;if(t){var n=r.get("dragPrePos"),a=r.get("graph"),o,s=a.getPointByClient(t.clientX,t.clientY);t.x-n.x<0?o=1-Mv:o=1/(1-Mv);var u=r.get("maxR"),f=r.get("minR"),c=r.get("r");(c>(u||a.get("height"))&&o>1||c<(f||a.get("height")*.05)&&o<1)&&(o=1),c*=o,r.set("r",c),r.set("r2",c*c);var l=r.get("d");r.set("molecularParam",(l+1)*c),r.magnify(t,s),r.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var r=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=0;t.originalEvent.wheelDelta<0?n=-.1:n=.1;var a=r.get("d"),o=a+n,s=r.get("maxD"),u=r.get("minD");if(o<s&&o>u){r.set("d",o);var f=r.get("r");r.set("molecularParam",(o+1)*f);var c=r.get("delegate"),l=c?{x:c.attr("x"),y:c.attr("y")}:void 0;r.set("delegateCenterDiff",void 0),r.magnify(t,l)}}},e.prototype.scaleDByDrag=function(t){var r=this,n=r.get("dragPrePos"),a=t.x-n.x>0?.1:-.1,o=r.get("d"),s=o+a,u=r.get("maxD"),f=r.get("minD");if(s<u&&s>f){r.set("d",s);var c=r.get("r");r.set("molecularParam",(s+1)*c),r.magnify(t)}r.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,r){var n=this;n.restoreCache();var a=n.get("graph"),o=n.get("cachedMagnifiedModels"),s=n.get("cachedOriginPositions"),u=n.get("showLabel"),f=n.get("r"),c=n.get("r2"),l=n.get("d"),x=n.get("molecularParam"),m=a.getNodes(),C=m.length,R=r?{x:r.x,y:r.y}:{x:t.x,y:t.y};n.get("dragging")&&(n.get("trigger")==="mousemove"||n.get("trigger")==="click")&&(R=n.get("cacheCenter"));var V=n.get("delegateCenterDiff");V&&(R.x+=V.x,R.y+=V.y),n.updateDelegate(R,f);for(var Q=0;Q<C;Q++){var rt=m[Q].getModel(),st=rt.x,lt=rt.y;if(!(isNaN(st)||isNaN(lt))){var Ct=(st-R.x)*(st-R.x)+(lt-R.y)*(lt-R.y);if(!isNaN(Ct)&&Ct<c&&Ct!==0){var At=Math.sqrt(Ct),Nt=x*At/(l*At+f),Kt=(st-R.x)/At,ge=(lt-R.y)/At;if(rt.x=Kt*Nt+R.x,rt.y=ge*Nt+R.y,s[rt.id]||(s[rt.id]={x:st,y:lt,texts:[]}),o.push(rt),u&&2*At<f)for(var ue=m[Q],Ae=ue.getContainer(),Ke=Ae.getChildren(),Gr=Ke.length,wr=0;wr<Gr;wr++){var Mr=Ke[wr];Mr.get("type")==="text"&&(s[rt.id].texts.push({visible:Mr.get("visible"),shape:Mr}),Mr.set("visible",!0))}}}}a.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,r=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),a=r.length,o=0;o<a;o++){var s=r[o],u=s.id,f=n[u];s.x=f.x,s.y=f.y;for(var c=f.texts.length,l=0;l<c;l++){var x=f.texts[l];x.shape.set("visible",x.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.d,o=t.trigger,s=t.minD,u=t.maxD,f=t.minR,c=t.maxR,l=t.scaleDBy,x=t.scaleRBy;isNaN(t.r)||(r.set("r",n),r.set("r2",n*n)),isNaN(a)||r.set("d",a),isNaN(u)||r.set("maxD",u),isNaN(s)||r.set("minD",s),isNaN(c)||r.set("maxR",c),isNaN(f)||r.set("minR",f);var m=r.get("d"),C=r.get("r");if(r.set("molecularParam",(m+1)*C),(o==="mousemove"||o==="click"||o==="drag")&&r.set("trigger",o),l==="drag"||l==="wheel"||l==="unset"){r.set("scaleDBy",l),r.get("delegate").remove(),r.get("delegate").destroy();var R=r.get("dPercentText");R&&(R.remove(),R.destroy())}if(x==="drag"||x==="wheel"||x==="unset"){r.set("scaleRBy",x),r.get("delegate").remove(),r.get("delegate").destroy();var R=r.get("dPercentText");R&&(R.remove(),R.destroy())}},e.prototype.updateDelegate=function(t,r){var n=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var u=o.get("group"),f=a.get("delegateStyle")||Q0;s=u.addShape("circle",{attrs:Rd({r:r/1.5,x:t.x,y:t.y},f),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(C){a.scaleRByWheel(C)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(C){a.set("dragging",!0),a.set("cacheCenter",{x:C.x,y:C.y}),a.set("dragPrePos",{x:C.x,y:C.y})}),s.on("drag",function(C){a.scaleRByDrag(C)}),s.on("dragend",function(C){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(C){n.scaleDByWheel(C)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(C){a.set("dragging",!0),a.set("cacheCenter",{x:C.x,y:C.y}),a.set("dragPrePos",{x:C.x,y:C.y})}),s.on("drag",function(C){n.scaleDByDrag(C)}),s.on("dragend",function(C){a.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:r/1.5});if(a.get("showDPercent")){var c=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),l=a.get("dPercentText"),x=t.y+r/1.5+16;if(!l||l.destroyed){var m=o.get("group");l=m.addShape("text",{attrs:{text:"".concat(c,"%"),x:t.x,y:x,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",l)}else l.attr({text:"".concat(c,"%"),x:t.x,y:x})}a.set("delegate",s)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(hu),rE=eE,nE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),J0=.05;typeof document!="undefined"&&kh()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var aE=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],r=e.target;r;){if(t.push(r),r.tagName==="HTML")return t.push(document,window),t;r=r.parentElement}return t},iE=function(i){nE(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(r){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var t=this,r=this.get("graph"),n=this.get("getContent"),a=n(r),o=a;(0,p.isString)(a)&&(o=Ji(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var u=this.get("container");u||(u=this.get("graph").get("container")),(0,p.isString)(u)&&(u=document.getElementById(u)),u.appendChild(o),this.set("toolBar",o);var f=this.get("handleClick");o.addEventListener("click",function(l){var x=aE(l).filter(function(C){return C.nodeName==="LI"});if(x.length!==0){var m=x[0].getAttribute("code");m&&(f?f(m,r):t.handleDefaultOperator(m))}});var c=this.get("position");c&&Wa(o,{top:"".concat(c.y,"px"),left:"".concat(c.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!r||!n||!a||!o||(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4"),a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(s){var u=s.undoStack,f=s.redoStack,c=u.length,l=f.length;c===0?(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),n.removeAttribute("style")),l===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),r=t.getUndoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action;t.pushStack(a,(0,p.clone)(n.data),"redo");var o=n.data.before;if(a==="add"&&(o=n.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(l){var x=o[l];x&&x.forEach(function(m){var C=t.findById(m.id);m.visible?t.showItem(C,!1):t.hideItem(C,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(l){var x=o[l];x&&x.forEach(function(m){var C=t.findById(m.id);delete m.id,t.updateItem(C,m,!1),C.getType()==="combo"&&t.updateCombo(C)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(l){var x=o[l];x&&x.forEach(function(m){var C=m.itemType;delete m.itemType,t.addItem(C,m,!1)})});break}case"add":Object.keys(o).forEach(function(l){var x=o[l];x&&x.forEach(function(m){t.removeItem(m.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(l){var x=o[l];x&&x.forEach(function(m){t.updateComboTree(m.id,m.parentId,!1)})});break;case"createCombo":var s=n.data.after.combos,u=s[s.length-1];Object.keys(o).forEach(function(l){var x=o[l];x&&x.forEach(function(m){t.updateComboTree(m.id,m.parentId,!1)})}),t.removeItem(u.id,!1);break;case"uncombo":var f=o.combos[o.combos.length-1],c=o.nodes.concat(o.combos).map(function(l){return l.id}).filter(function(l){return l!==f.id});t.createCombo(f,c,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.redo=function(){var t=this.get("graph"),r=t.getRedoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action,o=n.data.after;if(t.pushStack(a,(0,p.clone)(n.data)),a==="delete"&&(o=n.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(x){var m=t.findById(x.id);x.visible?t.showItem(m,!1):t.hideItem(m,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(x){var m=t.findById(x.id);delete x.id,t.updateItem(m,x,!1),m.getType()==="combo"&&t.updateCombo(m)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(c){t.removeItem(c.id,!1)}),o.nodes&&o.nodes.forEach(function(c){t.removeItem(c.id,!1)}),o.combos&&o.combos.forEach(function(c){t.removeItem(c.id,!1)});break;case"add":{Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(x){var m=x.itemType;delete x.itemType,t.addItem(m,x,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(x){t.updateComboTree(x.id,x.parentId,!1)})});break;case"createCombo":var s=o.combos[o.combos.length-1];t.createCombo(s,s.children.map(function(c){return c.id}),!1);break;case"uncombo":var u=n.data.before.combos,f=u[u.length-1];t.uncombo(f.id,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),r=t.getZoom(),n=1/(1-J0*this.get("zoomSensitivity")),a=this.get("maxZoom")||t.get("maxZoom");n*r>a||t.zoomTo(r*n)},e.prototype.zoomIn=function(){var t=this.get("graph"),r=t.getZoom(),n=1-J0*this.get("zoomSensitivity"),a=this.get("minZoom")||t.get("minZoom");n*r<a||t.zoomTo(r*n)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break;default:}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,p.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(hu),oE=iE,sE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&kh()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var uE=function(i){sE(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(r){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`.concat(r.item.getType(),`</h4>
          <span class='tooltip-id'>ID\uFF1A`).concat(r.item.getID(),`</span>
        `)},shouldBegin:function(r){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,r=t.get("className")||"g6-component-tooltip",n=Ji("<div class='".concat(r,"'></div>")),a=t.get("container");a||(a=t.get("graph").get("container")),(0,p.isString)(a)&&(a=document.getElementById(a)),Wa(n,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(n),t.get("trigger")!=="click"&&(n.addEventListener("mouseenter",function(o){Wa(n,{visibility:"visible",display:"unset"})}),n.addEventListener("mouseleave",function(o){t.hideTooltip()})),t.set("tooltip",n)},e.prototype.onClick=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var r=this.get("itemTypes");t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var r=this.get("itemTypes");if(!(t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=this.get("tooltip"),a=this.get("getContent"),o=a(t);(0,p.isString)(o)?n.innerHTML=o:(this.clearContainer(),n.appendChild(o)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&Wa(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var r=this.get("shouldBegin"),n=this.get("tooltip");if(!r(t)){Wa(n,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=this.get("offsetX")||0,f=this.get("offsetY")||0,c=a.getPointByClient(t.clientX,t.clientY),l=this.get("fixToNode"),x=t.item;if(x.getType&&x.getType()==="node"&&l&&(0,p.isArray)(l)&&l.length>=2){var m=x.getBBox();c={x:m.minX+m.width*l[0],y:m.minY+m.height*l[1]}}var C=a.getCanvasByPoint(c.x,c.y),R=C.x,V=C.y,Q=a.getContainer(),rt={x:R+Q.offsetLeft+u,y:V+Q.offsetTop+f};Wa(n,{visibility:"visible",display:"unset"});var st=n.getBoundingClientRect();R+st.width+u>o&&(rt.x-=st.width+u),V+st.height+f>s&&(rt.y-=st.height+f,rt.y<0&&(rt.y=0)),Wa(n,{left:"".concat(rt.x,"px"),top:"".concat(rt.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,p.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(hu),fE=uE,tp="timebarstartplay",ep="timebarendplay",kf="valuechange",Al="timebarConfigChanged",zc="playPauseBtn",Rh="nextStepBtn",Bh="preStepBtn",_M={opacity:.5,fill:"#000"},SM={opacity:.5,fill:"#000",r:5},MM={fill:"#fff",fontSize:12},cE=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.container,s=e.text,u=e.padding,f=u===void 0?[4,4,4,4]:u,c=e.className,l=c===void 0?"g6-component-timebar-tooltip":c,x=e.backgroundColor,m=x===void 0?"#000":x,C=e.textColor,R=C===void 0?"#fff":C,V=e.opacity,Q=V===void 0?.8:V,rt=e.fontSize,st=rt===void 0?12:rt;this.container=o,this.className=l,this.backgroundColor=m,this.textColor=R,this.x=r,this.y=a,this.text=s,this.padding=f,this.opacity=Q,this.fontSize=st,this.render()}return i.prototype.render=function(){var e=this,t=e.className,r=e.x,n=e.y,a=e.backgroundColor,o=e.textColor,s=e.text,u=e.padding,f=e.opacity,c=e.fontSize,l=e.container,x=Ji("<div class='".concat(t,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(f,'"></div>'));(0,p.isString)(l)&&(l=document.getElementById(l)),l.appendChild(x),e.parentHeight=l.offsetHeight,e.parentWidth=l.offsetWidth,Wa(x,{visibility:"hidden",top:0,left:0});var m=Ji(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(a,"; font-size: ").concat(c,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(o,"; padding: ").concat(u[0],"px ").concat(u[1],"px ").concat(u[2],"px ").concat(u[3],"px'></div>"));m.innerHTML=s,x.appendChild(m),e.backgroundDOM=m;var C=Ji("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(a,"'></div>"));x.appendChild(C),e.arrowDOM=C,e.container=x},i.prototype.show=function(e){var t=this,r=e.text,n=e.x,a=e.y,o=e.clientX,s=e.clientY;t.backgroundDOM.innerHTML=r;var u=t.backgroundDOM.offsetWidth,f=t.backgroundDOM.offsetHeight,c=t.arrowDOM.offsetWidth,l=t.arrowDOM.offsetHeight;Wa(t.container,{top:"".concat(-f-l,"px"),left:"".concat(n,"px"),visibility:"visible"}),Wa(t.backgroundDOM,{marginLeft:"".concat(-u/2,"px")}),Wa(t.arrowDOM,{marginLeft:"".concat(-c/2,"px"),top:"".concat(f,"px")});var x=n-u/2,m=n+u/2;x<0?Wa(t.backgroundDOM,{marginLeft:"".concat(-u/2-x,"px")}):m>t.parentWidth&&Wa(t.backgroundDOM,{marginLeft:"".concat(-u/2-m+t.parentWidth+12,"px")})},i.prototype.hide=function(){Wa(this.container,{top:0,left:0,visibility:"hidden"})},i}(),lE=cE,Bd=function(){return Bd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Bd.apply(this,arguments)},hE=function(){function i(e){this.config=(0,p.deepMix)({},e),this.init()}return i.prototype.update=function(e){this.config=(0,p.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},i.prototype.init=function(){this.initElement(),this.renderMarker()},i.prototype.initElement=function(){var e=this.config,t=e.group,r=e.style,n=r.scale,a=n===void 0?1:n,o=r.offsetX,s=o===void 0?0:o,u=r.offsetY,f=u===void 0?0:u,c=this.config.x+s,l=this.config.y+f,x=t.addGroup({name:zc});this.startMarkerGroup=x.addGroup({name:zc}),this.circle=t.addShape("circle",{attrs:Bd({x:c,y:l,r:this.config.r*a},r),name:zc}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,l,a),fill:r.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=x.addGroup({name:zc});var m=.25*this.config.r*a,C=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*a,y:l-C/2,width:m,height:C,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*a,y:l-C/2,width:m,height:C,fill:r.stroke||"#aaa",lineWidth:0}})},i.prototype.updateElement=function(){var e=this.config.style,t=e.scale,r=t===void 0?1:t,n=e.offsetX,a=n===void 0?0:n,o=e.offsetY,s=o===void 0?0:o,u=this.config.x+a,f=this.config.y+s;this.circle.attr("x",u),this.circle.attr("y",f),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(u,f,r));var c=.25*this.config.r*r,l=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",u-(1/4+1/8)*this.config.r*r),this.pauseLeftMarker.attr("y",f-l/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",l),this.pauseRightMarker.attr("x",u+1/8*this.config.r*r),this.pauseRightMarker.attr("y",f-l/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",l)},i.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},i.prototype.getStartMarkerPath=function(e,t,r){var n=.5*this.config.r*Math.sqrt(3)*r;return[["M",e-n/Math.sqrt(3)/2,t-n/2],["L",e+n/Math.sqrt(3),t],["L",e-n/Math.sqrt(3)/2,t+n/2]]},i}(),vE=hE,Zo=function(){return Zo=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Zo.apply(this,arguments)},Fh=Bt,dE="#aaa",gE="green",pE={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},yE={fill:"#fff"},mE={fill:"green"},rp={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},np={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},xE={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:rp,timeTypeControllerStyle:np},Fd=110,Uc=50,Rf={SINGLE:"single",RANGE:"range"},bE=function(){function i(e){this.controllerCfg=(0,p.deepMix)({},xE,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||Rf.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return i.prototype.init=function(){this.renderPlayButton()},i.prototype.getNextMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e+r,t],["L",e,t+r],["Z",e,t-r],["M",e,t],["L",e-r,t-r],["L",e-r,t+r],["Z"]]},i.prototype.getPreMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e-r,t],["L",e,t+r],["L",e,t-r],["M",e,t],["L",e+r,t-r],["L",e+r,t+r],["Z"]]},i.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,r=e.height,n=e.x,a=e.y,o=e.hideTimeTypeController,s=e.fill,u=s===void 0?dE:s,f=e.stroke,c=f===void 0?gE:f,l=e.containerStyle,x=l===void 0?{}:l,m=Zo(Zo({},pE),e.playBtnStyle||{}),C=Zo(Zo({},yE),e.preBtnStyle||{}),R=Zo(Zo({},mE),e.nextBtnStyle||{}),V=r/2-5,Q=a+10,rt=this.controllerGroup.addShape("rect",{attrs:Zo({x:n,y:Q,width:t,height:r,stroke:c,fill:u},x),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:Q,r:V}):this.playButton=new vE({group:this.controllerGroup,x:t/2,y:Q+V+5,r:V,isPlay:this.isPlay,style:m});var st=C.offsetX||0,lt=C.offsetY||0,Ct=(C.scale||1)*V;this.controllerGroup.addShape("path",{attrs:Zo({path:this.getPreMarkerPath(t/2-5*V+st,Q+V+5+lt,Ct*.5)},C),name:Bh});var At=R.offsetX||0,Nt=R.offsetY||0,Kt=(R.scale||1)*V;this.controllerGroup.addShape("path",{attrs:Zo({path:this.getNextMarkerPath(t/2+5*V+At,Q+V+5+Nt,Kt*.5)},R),name:Rh}),rt.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var ge=this.controllerCfg.scale,ue=ge===void 0?1:ge,Ae=this.controllerGroup.getCanvasBBox(),Ke=(Ae.maxX+Ae.minX)/2,Gr=(Ae.maxY+Ae.minY)/2,wr=Fh([1,0,0,0,1,0,0,0,1],[["t",-Ke,-Gr],["s",ue,ue],["t",Ke,Gr]]);this.controllerGroup.setMatrix(wr)},i.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,r=e.width,n=e.hideTimeTypeController,a=Zo(Zo({},rp),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,u=a.text,f=u===void 0?{}:u,c=a.pointer,l=c===void 0?{}:c,x=a.scale,m=x===void 0?1:x,C=a.offsetX,R=C===void 0?0:C,V=a.offsetY,Q=V===void 0?0:V,rt=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=rt;var st=[],lt=5;this.speedAxisY=[19,22,26,32,39];for(var Ct=0;Ct<5;Ct++){var At=t+this.speedAxisY[Ct],Nt=r-(n?Uc:Fd);rt.addShape("line",{attrs:Zo({x1:Nt,x2:Nt+15,y1:At,y2:At},s),speed:lt,name:"speed-rect"}),this.speedAxisY[Ct]=At,st.push(lt),lt=lt-1}this.speedText=rt.addShape("text",{attrs:Zo({x:r-(n?Uc:Fd)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},f),name:"speed-text"}),this.speedPoint=rt.addShape("path",{attrs:Zo({path:this.getPointerPath(r-(n?Uc:Fd),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},l),name:"speed-pointer"});var Kt=this.speedGroup.getCanvasBBox(),ge=(Kt.maxX+Kt.minX)/2,ue=(Kt.maxY+Kt.minY)/2,Ae=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Ae=Fh(Ae,[["t",-ge,-ue],["s",m,m],["t",ge+R*m,ue+Q*m]]),this.speedGroup.setMatrix(Ae)},i.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},i.prototype.renderToggleTime=function(){var e,t,r=this.controllerCfg,n=r.width,a=r.defaultTimeType,o=Zo(Zo({},np),this.controllerCfg.timeTypeControllerStyle||{}),s=o.scale,u=s===void 0?1:s,f=o.offsetX,c=f===void 0?0:f,l=o.offsetY,x=l===void 0?0:l,m=o.box,C=m===void 0?{}:m,R=o.check,V=R===void 0?{}:R,Q=o.text,rt=Q===void 0?{}:Q;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var st=a===Rf.SINGLE;this.toggleGroup.addShape("rect",{attrs:Zo({x:n-Uc,y:this.speedAxisY[0]+3.5},C),isChecked:st,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:Zo({path:[["M",n-Uc+3,this.speedAxisY[1]+6],["L",n-Uc+7,this.speedAxisY[1]+10],["L",n-Uc+12,this.speedAxisY[1]+4]]},V),capture:!1,name:"check-icon"}),st||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:Zo({text:st?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4":((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:n-Uc+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},rt),name:"checked-text"});var lt=this.toggleGroup.getCanvasBBox(),Ct=(lt.maxX+lt.minX)/2,At=(lt.maxY+lt.minY)/2,Nt=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Nt=Fh(Nt,[["t",-Ct,-At],["s",u,u],["t",Ct+c*u,At+x*u]]),this.toggleGroup.setMatrix(Nt)},i.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var r=t.target.attr("y1"),n=e.speedPoint.attr("matrix"),a=e.speedAxisY.indexOf(n[7]||0),o=e.speedAxisY.indexOf(r),s=e.speedAxisY[o]-e.speedAxisY[a];n=Fh(n,[["t",0,s]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Al,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var r=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],n=r[7],a=e.speedAxisY.indexOf(n);if(a===-1){var o=1/0;e.speedAxisY.forEach(function(u,f){var c=Math.abs(u-n);o>c&&(o=c,a=f)})}t.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(e.speedAxisY.length-1,a+1);var s=e.speedAxisY[a]-n;r=Fh(r,[["t",0,s]]),e.speedPoint.setMatrix(r),e.currentSpeed=e.speedAxisY.length-a,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Al,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var r,n,a=t.target.get("isChecked");a?(e.checkedIcon.hide(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),e.currentType=Rf.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((r=e.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),e.currentType=Rf.SINGLE),t.target.set("isChecked",!a),e.group.emit(Al,{type:e.currentType,speed:e.currentSpeed})})},i.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},i}(),ap=bE,Gh=function(){return Gh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Gh.apply(this,arguments)},EE=Bt,wE={fill:"#5B8FF9"},_E={fill:"#e6e8e9"},SE=function(){function i(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,r=e.canvas,n=e.group,a=e.width,o=e.height,s=e.padding,u=e.data,f=e.start,c=e.end,l=e.x,x=l===void 0?0:l,m=e.y,C=m===void 0?0:m,R=e.tickLabelFormatter,V=e.selectedTickStyle,Q=V===void 0?wE:V,rt=e.unselectedTickStyle,st=rt===void 0?_E:rt,lt=e.tooltipBackgroundColor,Ct=e.tooltipFomatter,At=e.tickLabelStyle,Nt=e.controllerCfg,Kt=Nt===void 0?{speed:1}:Nt;this.graph=t,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=r,this.width=a,this.height=o,this.padding=s,this.data=u,this.start=f,this.end=c,this.tickLabelFormatter=R,this.tickLabelStyle=At||{},this.selectedTickStyle=Q,this.unselectedTickStyle=st,this.controllerCfg=Kt,this.currentSpeed=Kt.speed||1,this.x=x,this.y=C,this.tooltipBackgroundColor=lt,this.tooltipFomatter=Ct,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return i.prototype.renderSlices=function(){var e=this,t=this,r=t.width,n=t.height,a=t.padding,o=t.data,s=t.start,u=t.end,f=t.tickLabelFormatter,c=t.selectedTickStyle,l=t.unselectedTickStyle,x=t.tickLabelStyle,m=r-2*a,C=10,R=4,V=3*a+R+C,Q=n-V-2*a,rt=2,st=o.length,lt=(m-rt*(st-1))/st;this.tickWidth=lt;var Ct=this.sliceGroup,At=[],Nt=[],Kt=Math.round(st*s),ge=Math.round(st*u);this.startTickRectId=Kt,this.endTickRectId=ge;var ue=x.rotate;delete x.rotate,o.forEach(function(Ke,Gr){var wr=Gr>=Kt&&Gr<=ge,Mr=wr?c:l,vr=Ct.addShape("rect",{attrs:Gh({x:a+Gr*(lt+rt),y:a,width:lt,height:Q},Mr),draggable:!0,name:"tick-rect-".concat(Gr)}),sn=Ct.addShape("rect",{attrs:{x:a+Gr*lt+rt*(2*Gr-1)/2,y:a,width:Gr===0||Gr===st-1?lt+rt/2:lt+rt,height:Q,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(Gr)});sn.toFront();var nn=vr.getBBox(),mr=(nn.minX+nn.maxX)/2;At.push({rect:vr,pickRect:sn,value:Ke.date,x:mr,y:nn.minY});var Dr;if(f?(Dr=f(Ke),!(0,p.isString)(Dr)&&Dr&&(Dr=Ke.date)):Gr%Math.round(st/10)===0&&(Dr=Ke.date),Dr){Nt.push(Dr);var qr=nn.maxY+a*2;Ct.addShape("line",{attrs:{stroke:"#BFBFBF",x1:mr,y1:qr,x2:mr,y2:qr+R},name:"tick-line"});var un=qr+R+a,Dn=Ct.addShape("text",{attrs:Gh({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:mr,y:un,textAlign:"center",text:Dr,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},x),capture:!1,name:"tick-label"}),Rn=Dn.getBBox();if(Rn.maxX>r?Dn.attr("textAlign","right"):Rn.minX<0&&Dn.attr("textAlign","left"),(0,p.isNumber)(ue)&&Nt.length!==10){var ca=EE([1,0,0,0,1,0,0,0,1],[["t",-mr,-un],["r",ue],["t",mr-5,un+2]]);Dn.attr({textAlign:"left",matrix:ca})}Nt.length===1?Dn.attr({textAlign:"left"}):Nt.length===10&&Dn.attr({textAlign:"right"})}}),this.tickRects=At;var Ae=this.group;this.currentSpeed=1,this.controllerBtnGroup=new ap(Gh({group:Ae,x:this.x,y:this.y+n+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},i.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(c){var l=c.target;if(!(l.get("type")!=="rect"||!l.get("name"))){var x=parseInt(l.get("name").split("-")[2],10);if(!isNaN(x)){var m=e.tickRects,C=e.unselectedTickStyle;m.forEach(function(rt){rt.rect.attr(C)});var R=e.selectedTickStyle;m[x].rect.attr(R),e.startTickRectId=x,e.endTickRectId=x;var V=m.length,Q=x/V;e.graph.emit(kf,{value:[Q,Q]})}}}),t.on("dragstart",function(c){var l=e.tickRects,x=e.unselectedTickStyle;l.forEach(function(rt){rt.rect.attr(x)});var m=c.target,C=parseInt(m.get("name").split("-")[2],10),R=e.selectedTickStyle;l[C].rect.attr(R),e.startTickRectId=C;var V=l.length,Q=C/V;e.graph.emit(kf,{value:[Q,Q]}),e.dragging=!0}),t.on("dragover",function(c){if(e.dragging&&c.target.get("type")==="rect"){for(var l=parseInt(c.target.get("name").split("-")[2],10),x=e.startTickRectId,m=e.tickRects,C=e.selectedTickStyle,R=e.unselectedTickStyle,V=0;V<m.length;V++){var Q=V>=x&&V<=l?C:R;m[V].rect.attr(Q)}var rt=m.length;e.endTickRectId=l;var st=x/rt,lt=l/rt;e.graph.emit(kf,{value:[st,lt]})}}),t.on("drop",function(c){if(e.dragging&&(e.dragging=!1,c.target.get("type")==="rect")){var l=e.startTickRectId,x=parseInt(c.target.get("name").split("-")[2],10);if(!(x<l)){var m=e.selectedTickStyle,C=e.tickRects;C[x].rect.attr(m),e.endTickRectId=x;var R=C.length,V=l/R,Q=x/R;e.graph.emit(kf,{value:[V,Q]})}}});var r=this,n=r.tooltipBackgroundColor,a=r.tooltipFomatter,o=r.canvas,s=new lE({container:o.get("container"),backgroundColor:n}),u=this.tickRects;u.forEach(function(c){var l=c.pickRect;l.on("mouseenter",function(x){var m=x.target;if(m.get("type")==="rect"){var C=parseInt(m.get("name").split("-")[2],10),R=o.getClientByPoint(u[C].x,u[C].y);s.show({x:u[C].x,y:u[C].y,clientX:R.x,clientY:R.y,text:a?a(u[C].value):u[C].value})}}),l.on("mouseleave",function(x){s.hide()})});var f=this.group;f.on("".concat(zc,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),f.on("".concat(Rh,":click"),function(){e.updateStartEnd(1)}),f.on("".concat(Bh,":click"),function(){e.updateStartEnd(-1)}),f.on(Al,function(c){var l=c.type,x=c.speed;e.currentSpeed=x})},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(tp,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(ep,null))},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)===0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.updateStartEnd=function(e){var t=this,r=this.tickRects,n=r.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(e>0?t.endTickRectId++:(r[t.endTickRectId].rect.attr(a),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var u=t.startTickRectId;u<=t.endTickRectId-1;u++)r[u].rect.attr(a);t.startTickRectId=t.endTickRectId}if(r[t.endTickRectId]){r[t.endTickRectId].rect.attr(o);var f=t.startTickRectId/n,c=t.endTickRectId/n;this.graph.emit(kf,{value:[f,c]})}},i.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var r=t.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(zc,":click")),e.off("".concat(Rh,":click")),e.off("".concat(Bh,":click")),e.off(Al),this.sliceGroup.destroy()},i}(),ME=SE,ip={};function CE(i){return ip[i]}function Bf(i,e){ip[i]=e}var AE=function(){function i(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return i.prototype.translate=function(e){return e},i.prototype.change=function(e){(0,p.assign)(this.__cfg__,e),this.init()},i.prototype.clone=function(){return this.constructor(this.__cfg__)},i.prototype.getTicks=function(){var e=this;return(0,p.map)(this.ticks,function(t,r){return(0,p.isObject)(t)?t:{text:e.getText(t,r),tickValue:t,value:e.scale(t)}})},i.prototype.getText=function(e,t){var r=this.formatter,n=r?r(e,t):e;return(0,p.isNil)(n)||!(0,p.isFunction)(n.toString)?"":n.toString()},i.prototype.getConfig=function(e){return this.__cfg__[e]},i.prototype.init=function(){(0,p.assign)(this,this.__cfg__),this.setDomain(),(0,p.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},i.prototype.initCfg=function(){},i.prototype.setDomain=function(){},i.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if((0,p.isString)(e)){var r=CE(e);if(!r)throw new Error("There is no method to to calculate ticks!");t=r(this)}else(0,p.isFunction)(e)&&(t=e(this));return t},i.prototype.rangeMin=function(){return this.range[0]},i.prototype.rangeMax=function(){return this.range[1]},i.prototype.calcPercent=function(e,t,r){return(0,p.isNumber)(e)?(e-t)/(r-t):NaN},i.prototype.calcValue=function(e,t,r){return t+e*(r-t)},i}(),Gd=AE,TE=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var r=this.translateIndexMap.get(t);return r===void 0&&(r=(0,p.isNumber)(t)?t:NaN),r},e.prototype.scale=function(t){var r=this.translate(t),n=this.calcPercent(r,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var r=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),a=Math.round(r*n)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},e.prototype.getText=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=t;return(0,p.isNumber)(t)&&!this.values.includes(t)&&(a=this.values[a]),i.prototype.getText.apply(this,(0,K.__spreadArrays)([a],r))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,p.isNil)(this.getConfig("min"))&&(this.min=0),(0,p.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(Gd),zh=TE,op=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Wc="\\d\\d?",Xc="\\d\\d",IE="\\d{3}",OE="\\d{4}",Uh="[^\\s]+",sp=/\[([^]*?)\]/gm;function up(i,e){for(var t=[],r=0,n=i.length;r<n;r++)t.push(i[r].substr(0,e));return t}var fp=function(i){return function(e,t){var r=t[i].map(function(a){return a.toLowerCase()}),n=r.indexOf(e.toLowerCase());return n>-1?n:null}};function Yc(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0,n=e;r<n.length;r++){var a=n[r];for(var o in a)i[o]=a[o]}return i}var cp=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],lp=["January","February","March","April","May","June","July","August","September","October","November","December"],LE=up(lp,3),DE=up(cp,3),zd={dayNamesShort:DE,dayNames:cp,monthNamesShort:LE,monthNames:lp,amPm:["am","pm"],DoFn:function(i){return i+["th","st","nd","rd"][i%10>3?0:(i-i%10!==10?1:0)*i%10]}},Cv=Yc({},zd),hp=function(i){return Cv=Yc(Cv,i)},vp=function(i){return i.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},vu=function(i,e){for(e===void 0&&(e=2),i=String(i);i.length<e;)i="0"+i;return i},NE={D:function(i){return String(i.getDate())},DD:function(i){return vu(i.getDate())},Do:function(i,e){return e.DoFn(i.getDate())},d:function(i){return String(i.getDay())},dd:function(i){return vu(i.getDay())},ddd:function(i,e){return e.dayNamesShort[i.getDay()]},dddd:function(i,e){return e.dayNames[i.getDay()]},M:function(i){return String(i.getMonth()+1)},MM:function(i){return vu(i.getMonth()+1)},MMM:function(i,e){return e.monthNamesShort[i.getMonth()]},MMMM:function(i,e){return e.monthNames[i.getMonth()]},YY:function(i){return vu(String(i.getFullYear()),4).substr(2)},YYYY:function(i){return vu(i.getFullYear(),4)},h:function(i){return String(i.getHours()%12||12)},hh:function(i){return vu(i.getHours()%12||12)},H:function(i){return String(i.getHours())},HH:function(i){return vu(i.getHours())},m:function(i){return String(i.getMinutes())},mm:function(i){return vu(i.getMinutes())},s:function(i){return String(i.getSeconds())},ss:function(i){return vu(i.getSeconds())},S:function(i){return String(Math.round(i.getMilliseconds()/100))},SS:function(i){return vu(Math.round(i.getMilliseconds()/10),2)},SSS:function(i){return vu(i.getMilliseconds(),3)},a:function(i,e){return i.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(i,e){return i.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+vu(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+vu(Math.floor(Math.abs(e)/60),2)+":"+vu(Math.abs(e)%60,2)}},dp=function(i){return+i-1},gp=[null,Wc],pp=[null,Uh],yp=["isPm",Uh,function(i,e){var t=i.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],mp=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(i){var e=(i+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],PE={D:["day",Wc],DD:["day",Xc],Do:["day",Wc+Uh,function(i){return parseInt(i,10)}],M:["month",Wc,dp],MM:["month",Xc,dp],YY:["year",Xc,function(i){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+i>68?t-1:t)+i)}],h:["hour",Wc,void 0,"isPm"],hh:["hour",Xc,void 0,"isPm"],H:["hour",Wc],HH:["hour",Xc],m:["minute",Wc],mm:["minute",Xc],s:["second",Wc],ss:["second",Xc],YYYY:["year",OE],S:["millisecond","\\d",function(i){return+i*100}],SS:["millisecond",Xc,function(i){return+i*10}],SSS:["millisecond",IE],d:gp,dd:gp,ddd:pp,dddd:pp,MMM:["month",Uh,fp("monthNamesShort")],MMMM:["month",Uh,fp("monthNames")],a:yp,A:yp,ZZ:mp,Z:mp},Av={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},xp=function(i){return Yc(Av,i)},bp=function(i,e,t){if(e===void 0&&(e=Av.default),t===void 0&&(t={}),typeof i=="number"&&(i=new Date(i)),Object.prototype.toString.call(i)!=="[object Date]"||isNaN(i.getTime()))throw new Error("Invalid Date pass to format");e=Av[e]||e;var r=[];e=e.replace(sp,function(a,o){return r.push(o),"@@@"});var n=Yc(Yc({},Cv),t);return e=e.replace(op,function(a){return NE[a](i,n)}),e.replace(/@@@/g,function(){return r.shift()})};function Ep(i,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=Av[e]||e,i.length>1e3)return null;var r=new Date,n={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=e.replace(sp,function(lt,Ct){return o.push(vp(Ct)),"@@@"}),u={},f={};s=vp(s).replace(op,function(lt){var Ct=PE[lt],At=Ct[0],Nt=Ct[1],Kt=Ct[3];if(u[At])throw new Error("Invalid format. "+At+" specified twice in format");return u[At]=!0,Kt&&(f[Kt]=!0),a.push(Ct),"("+Nt+")"}),Object.keys(f).forEach(function(lt){if(!u[lt])throw new Error("Invalid format. "+lt+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=i.match(new RegExp(s,"i"));if(!c)return null;for(var l=Yc(Yc({},Cv),t),x=1;x<c.length;x++){var m=a[x-1],C=m[0],R=m[2],V=R?R(c[x],l):+c[x];if(V==null)return null;n[C]=V}n.isPm===1&&n.hour!=null&&+n.hour!=12?n.hour=+n.hour+12:n.isPm===0&&+n.hour==12&&(n.hour=0);var Q;if(n.timezoneOffset==null){Q=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond);for(var rt=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],x=0,st=rt.length;x<st;x++)if(u[rt[x][0]]&&n[rt[x][0]]!==Q[rt[x][1]]())return null}else if(Q=new Date(Date.UTC(n.year,n.month,n.day,n.hour,n.minute-n.timezoneOffset,n.second,n.millisecond)),n.month>11||n.month<0||n.day>31||n.day<1||n.hour>23||n.hour<0||n.minute>59||n.minute<0||n.second>59||n.second<0)return null;return Q}var kE={format:bp,parse:Ep,defaultI18n:zd,setGlobalDateI18n:hp,setGlobalDateMasks:xp},wp=kE;function RE(i){return function(e,t,r,n){for(var a=(0,p.isNil)(r)?0:r,o=(0,p.isNil)(n)?e.length:n;a<o;){var s=a+o>>>1;i(e[s])>t?o=s:a=s+1}return a}}var _p="format";function Sp(i,e){var t=P[_p]||wp[_p];return t(i,e)}function Tv(i){return(0,p.isString)(i)&&(i.indexOf("T")>0?i=new Date(i).getTime():i=new Date(i.replace(/-/gi,"/")).getTime()),(0,p.isDate)(i)&&(i=i.getTime()),i}var uf=1e3,Tl=60*uf,Il=60*Tl,lc=24*Il,Wh=lc*31,Mp=lc*365,Xh=[["HH:mm:ss",uf],["HH:mm:ss",uf*10],["HH:mm:ss",uf*30],["HH:mm",Tl],["HH:mm",Tl*10],["HH:mm",Tl*30],["HH",Il],["HH",Il*6],["HH",Il*12],["YYYY-MM-DD",lc],["YYYY-MM-DD",lc*4],["YYYY-WW",lc*7],["YYYY-MM",Wh],["YYYY-MM",Wh*4],["YYYY-MM",Wh*6],["YYYY",lc*380]];function BE(i,e,t){var r=(e-i)/t,n=RE(function(o){return o[1]})(Xh,r)-1,a=Xh[n];return n<0?a=Xh[0]:n>=Xh.length&&(a=(0,p.last)(Xh)),a}var FE=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=Tv(t);var r=this.values.indexOf(t);return r===-1&&((0,p.isNumber)(t)&&t<this.values.length?r=t:r=NaN),r},e.prototype.getText=function(t,r){var n=this.translate(t);if(n>-1){var a=this.values[n],o=this.formatter;return a=o?o(a,r):Sp(a,this.mask),a}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;(0,p.each)(t,function(r,n){t[n]=Tv(r)}),t.sort(function(r,n){return r-n}),i.prototype.setDomain.call(this)},e}(zh),GE=FE,zE=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if((0,p.isNil)(t))return NaN;var r=this.rangeMin(),n=this.rangeMax(),a=this.max,o=this.min;if(a===o)return r;var s=this.getScalePercent(t);return r+s*(n-r)},e.prototype.init=function(){i.prototype.init.call(this);var t=this.ticks,r=(0,p.head)(t),n=(0,p.last)(t);r<this.min&&(this.min=r),n>this.max&&(this.max=n),(0,p.isNil)(this.minLimit)||(this.min=r),(0,p.isNil)(this.maxLimit)||(this.max=n)},e.prototype.setDomain=function(){var t=(0,p.getRange)(this.values),r=t.min,n=t.max;(0,p.isNil)(this.min)&&(this.min=r),(0,p.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=r,this.max=n)},e.prototype.calculateTicks=function(){var t=this,r=i.prototype.calculateTicks.call(this);return this.nice||(r=(0,p.filter)(r,function(n){return n>=t.min&&n<=t.max})),r},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;return(t-n)/(r-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(Gd),Iv=zE,UE=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t);return this.min+r*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(Iv),Yh=UE;function Vc(i,e){var t=Math.E,r;return e>=0?r=Math.pow(t,Math.log(e)/i):r=Math.pow(t,Math.log(-e)/i)*-1,r}function Wu(i,e){return i===1?1:Math.log(e)/Math.log(i)}function Cp(i,e,t){(0,p.isNil)(t)&&(t=Math.max.apply(null,i));var r=t;return(0,p.each)(i,function(n){n>0&&n<r&&(r=n)}),r===t&&(r=t/e),r>1&&(r=1),r}function Ap(i){var e=i.toString().split(/[eE]/),t=(e[0].split(".")[1]||"").length-+(e[1]||0);return t>0?t:0}function CM(i,e){var t=Ap(i),r=Ap(e),n=Math.pow(10,Math.max(t,r));return(i*n+e*n)/n}var WE=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var r=this.base,n=Wu(r,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,u=this.positiveMin;if(u){if(t===0)return 0;s=Wu(r,u/r);var f=1/(n-s)*o;if(t<f)return t/f*u}else s=Wu(r,this.min);var c=(t-a)/o,l=c*(n-s)+s;return Math.pow(r,l)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){i.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=Cp(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n||t<=0)return 0;var a=this.base,o=this.positiveMin;o&&(n=o*1/a);var s;return t<o?s=t/o/(Wu(a,r)-Wu(a,n)):s=(Wu(a,t)-Wu(a,n))/(Wu(a,r)-Wu(a,n)),s},e}(Iv),XE=WE,YE=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t),n=this.exponent,a=Vc(n,this.max),o=Vc(n,this.min),s=r*(a-o)+o,u=s>=0?1:-1;return Math.pow(s,n)*u},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n)return 0;var a=this.exponent,o=(Vc(a,t)-Vc(a,n))/(Vc(a,r)-Vc(a,n));return o},e}(Iv),VE=YE,jE=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,r){var n=this.translate(t),a=this.formatter;return a?a(n,r):Sp(n,this.mask)},e.prototype.scale=function(t){var r=t;return((0,p.isString)(r)||(0,p.isDate)(r))&&(r=this.translate(r)),i.prototype.scale.call(this,r)},e.prototype.translate=function(t){return Tv(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,r=this.getConfig("min"),n=this.getConfig("max");if((!(0,p.isNil)(r)||!(0,p.isNumber)(r))&&(this.min=this.translate(this.min)),(!(0,p.isNil)(n)||!(0,p.isNumber)(n))&&(this.max=this.translate(this.max)),t&&t.length){var a=[],o=1/0,s=o,u=0;(0,p.each)(t,function(f){var c=Tv(f);if(isNaN(c))throw new TypeError("Invalid Time: "+f+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),u<c&&(u=c),a.push(c)}),t.length>1&&(this.minTickInterval=s-o),(0,p.isNil)(r)&&(this.min=o),(0,p.isNil)(n)&&(this.max=u)}},e}(Yh),HE=jE,KE=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var r=this.ticks,n=r.length,a=this.getInvertPercent(t),o=Math.floor(a*(n-1));if(o>=n-1)return(0,p.last)(r);if(o<0)return(0,p.head)(r);var s=r[o],u=r[o+1],f=o/(n-1),c=(o+1)/(n-1);return s+(a-f)/(c-f)*(u-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=i.prototype.calculateTicks.call(this);return this.nice||((0,p.last)(t)!==this.max&&t.push(this.max),(0,p.head)(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var r=this.ticks;if(t<(0,p.head)(r))return 0;if(t>(0,p.last)(r))return 1;var n=0;return(0,p.each)(r,function(a,o){if(t>=a)n=o;else return!1}),n/(r.length-1)},e}(Iv),Tp=KE,ZE=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(Tp),$E=ZE,Ip={};function qE(i){return Ip[i]}function Ff(i,e){if(qE(i))throw new Error("type '"+i+"' existed.");Ip[i]=e}var QE=function(i){(0,K.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,p.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var r=this.range;return t<r[0]||t>r[1]?NaN:this.values[0]},e}(Gd),JE=QE;function Op(i){var e=i.values,t=i.tickInterval,r=i.tickCount,n=i.showLast;if((0,p.isNumber)(t)){var a=(0,p.filter)(e,function(C,R){return R%t===0}),o=(0,p.last)(e);return n&&(0,p.last)(a)!==o&&a.push(o),a}var s=e.length,u=i.min,f=i.max;if((0,p.isNil)(u)&&(u=0),(0,p.isNil)(f)&&(f=e.length-1),!(0,p.isNumber)(r)||r>=s)return e.slice(u,f+1);if(r<=0||f<=0)return[];for(var c=r===1?s:Math.floor(s/(r-1)),l=[],x=u,m=0;m<r&&!(x>=f);m++)x=Math.min(u+m*c,f),m===r-1&&n?l.push(e[f]):l.push(e[x]);return l}function tw(i){var e=i.min,t=i.max,r=i.nice,n=i.tickCount,a=new ew;return a.domain([e,t]),r&&a.nice(n),a.ticks(n)}var Ud=5,Lp=Math.sqrt(50),Dp=Math.sqrt(10),Np=Math.sqrt(2),ew=function(){function i(){this._domain=[0,1]}return i.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},i.prototype.nice=function(e){var t,r;e===void 0&&(e=Ud);var n=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],u=this._domain[o],f;return u<s&&(t=[u,s],s=t[0],u=t[1],r=[o,a],a=r[0],o=r[1]),f=Ov(s,u,e),f>0?(s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f,f=Ov(s,u,e)):f<0&&(s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f,f=Ov(s,u,e)),f>0?(n[a]=Math.floor(s/f)*f,n[o]=Math.ceil(u/f)*f,this.domain(n)):f<0&&(n[a]=Math.ceil(s*f)/f,n[o]=Math.floor(u*f)/f,this.domain(n)),this},i.prototype.ticks=function(e){return e===void 0&&(e=Ud),rw(this._domain[0],this._domain[this._domain.length-1],e||Ud)},i}();function rw(i,e,t){var r,n=-1,a,o,s;if(e=+e,i=+i,t=+t,i===e&&t>0)return[i];if((r=e<i)&&(a=i,i=e,e=a),(s=Ov(i,e,t))===0||!isFinite(s))return[];if(s>0)for(i=Math.ceil(i/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-i+1));++n<a;)o[n]=(i+n)*s;else for(i=Math.floor(i*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(i-e+1));++n<a;)o[n]=(i-n)/s;return r&&o.reverse(),o}function Ov(i,e,t){var r=(e-i)/Math.max(0,t),n=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,n);return n>=0?(a>=Lp?10:a>=Dp?5:a>=Np?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(a>=Lp?10:a>=Dp?5:a>=Np?2:1)}function Pp(i,e,t){var r;return t==="ceil"?r=Math.ceil(i/e):t==="floor"?r=Math.floor(i/e):r=Math.round(i/e),r*e}function Wd(i,e,t){var r=Pp(i,t,"floor"),n=Pp(e,t,"ceil");r=(0,p.fixedBase)(r,t),n=(0,p.fixedBase)(n,t);for(var a=[],o=Math.max((n-r)/(Math.pow(2,12)-1),t),s=r;s<=n;s=s+o){var u=(0,p.fixedBase)(s,o);a.push(u)}return{min:r,max:n,ticks:a}}function Xd(i,e,t){var r,n=i.minLimit,a=i.maxLimit,o=i.min,s=i.max,u=i.tickCount,f=u===void 0?5:u,c=(0,p.isNil)(n)?(0,p.isNil)(e)?o:e:n,l=(0,p.isNil)(a)?(0,p.isNil)(t)?s:t:a;if(c>l&&(r=[c,l],l=r[0],c=r[1]),f<=2)return[c,l];for(var x=(l-c)/(f-1),m=[],C=0;C<f;C++)m.push(c+x*C);return m}function nw(i){var e=i.min,t=i.max,r=i.tickInterval,n=i.minLimit,a=i.maxLimit,o=tw(i);return!(0,p.isNil)(n)||!(0,p.isNil)(a)?Xd(i,(0,p.head)(o),(0,p.last)(o)):r?Wd(e,t,r).ticks:o}function Ol(i){return Math.abs(i)<1e-15?i:parseFloat(i.toFixed(15))}var aw=[1,5,2,2.5,4,3],AM=null,kp=Number.EPSILON*100;function iw(i,e){return(i%e+e)%e}function ow(i){return Math.round(i*1e12)/1e12}function sw(i,e,t,r,n,a){var o=(0,p.size)(e),s=(0,p.indexOf)(e,i),u=0,f=iw(r,a);return(f<kp||a-f<kp)&&r<=0&&n>=0&&(u=1),1-s/(o-1)-t+u}function uw(i,e,t){var r=(0,p.size)(e),n=(0,p.indexOf)(e,i),a=1;return 1-n/(r-1)-t+a}function fw(i,e,t,r,n,a){var o=(i-1)/(a-n),s=(e-1)/(Math.max(a,r)-Math.min(t,n));return 2-Math.max(o/s,s/o)}function cw(i,e){return i>=e?2-(i-1)/(e-1):1}function lw(i,e,t,r){var n=e-i;return 1-.5*(Math.pow(e-r,2)+Math.pow(i-t,2))/Math.pow(.1*n,2)}function hw(i,e,t){var r=e-i;if(t>r){var n=(t-r)/2;return 1-Math.pow(n,2)/Math.pow(.1*r,2)}return 1}function vw(){return 1}function dw(i,e,t,r,n,a){t===void 0&&(t=5),r===void 0&&(r=!0),n===void 0&&(n=aw),a===void 0&&(a=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(i)||Number.isNaN(e)||typeof i!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-i<1e-15||o===1)return{min:i,max:e,ticks:[i]};if(e-i>1e148){var s=t||5,u=(e-i)/s;return{min:i,max:e,ticks:Array(s).fill(null).map(function(qr,un){return Ol(i+u*un)})}}for(var f={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var l=0;l<n.length;l+=1){var x=n[l],m=uw(x,n,c);if(a[0]*m+a[1]+a[2]+a[3]<f.score){c=1/0;break}for(var C=2;C<1/0;){var R=cw(C,o);if(a[0]*m+a[1]+a[2]*R+a[3]<f.score)break;for(var V=(e-i)/(C+1)/c/x,Q=Math.ceil(Math.log10(V));Q<1/0;){var rt=c*x*Math.pow(10,Q),st=hw(i,e,rt*(C-1));if(a[0]*m+a[1]*st+a[2]*R+a[3]<f.score)break;var lt=Math.floor(e/rt)*c-(C-1)*c,Ct=Math.ceil(i/rt)*c;if(lt<=Ct)for(var s=Ct-lt,At=0;At<=s;At+=1){var Nt=lt+At,Kt=Nt*(rt/c),ge=Kt+rt*(C-1),ue=rt,Ae=sw(x,n,c,Kt,ge,ue),Ke=lw(i,e,Kt,ge),Gr=fw(C,o,i,e,Kt,ge),wr=vw(),Mr=a[0]*Ae+a[1]*Ke+a[2]*Gr+a[3]*wr;Mr>f.score&&(!r||Kt<=i&&ge>=e)&&(f.lmin=Kt,f.lmax=ge,f.lstep=ue,f.score=Mr)}Q+=1}C+=1}}c+=1}var vr=Ol(f.lmax),sn=Ol(f.lmin),nn=Ol(f.lstep),mr=Math.floor(ow((vr-sn)/nn))+1,Dr=new Array(mr);Dr[0]=Ol(sn);for(var l=1;l<mr;l++)Dr[l]=Ol(Dr[l-1]+nn);return{min:Math.min(i,(0,p.head)(Dr)),max:Math.max(e,(0,p.last)(Dr)),ticks:Dr}}function gw(i){var e=i.min,t=i.max,r=i.tickCount,n=i.nice,a=i.tickInterval,o=i.minLimit,s=i.maxLimit,u=dw(e,t,r,n).ticks;return!(0,p.isNil)(o)||!(0,p.isNil)(s)?Xd(i,(0,p.head)(u),(0,p.last)(u)):a?Wd(e,t,a).ticks:u}function pw(i){var e=i.base,t=i.tickCount,r=i.min,n=i.max,a=i.values,o,s=Wu(e,n);if(r>0)o=Math.floor(Wu(e,r));else{var u=Cp(a,e,n);o=Math.floor(Wu(e,u))}for(var f=s-o,c=Math.ceil(f/t),l=[],x=o;x<s+c;x=x+c)l.push(Math.pow(e,x));return r<=0&&l.unshift(0),l}function Rp(i,e,t){if(t===void 0&&(t=5),i===e)return{max:e,min:i,ticks:[i]};var r=t<0?0:Math.round(t);if(r===0)return{max:e,min:i,ticks:[]};var n=1.5,a=.5+1.5*n,o=e-i,s=o/r,u=Math.pow(10,Math.floor(Math.log10(s))),f=u;2*u-s<n*(s-f)&&(f=2*u,5*u-s<a*(s-f)&&(f=5*u,10*u-s<n*(s-f)&&(f=10*u)));for(var c=Math.ceil(e/f),l=Math.floor(i/f),x=Math.max(c*f,e),m=Math.min(l*f,i),C=Math.floor((x-m)/f)+1,R=new Array(C),V=0;V<C;V++)R[V]=Ol(m+V*f);return{min:m,max:x,ticks:R}}function yw(i){var e=i.exponent,t=i.tickCount,r=Math.ceil(Vc(e,i.max)),n=Math.floor(Vc(e,i.min)),a=Rp(n,r,t).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function mw(i,e){var t=i.length*e;return e===1?i[i.length-1]:e===0?i[0]:t%1!==0?i[Math.ceil(t)-1]:i.length%2===0?(i[t-1]+i[t])/2:i[t]}function xw(i){var e=i.tickCount,t=i.values;if(!t||!t.length)return[];for(var r=t.slice().sort(function(s,u){return s-u}),n=[],a=0;a<e;a++){var o=a/(e-1);n.push(mw(r,o))}return n}function bw(i){var e=i.min,t=i.max,r=i.tickCount,n=i.tickInterval,a=i.minLimit,o=i.maxLimit,s=Rp(e,t,r).ticks;return!(0,p.isNil)(a)||!(0,p.isNil)(o)?Xd(i,(0,p.head)(s),(0,p.last)(s)):n?Wd(e,t,n).ticks:s}function Ew(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickInterval,a=i.tickCount;if(n)a=Math.ceil((t-e)/n);else{n=BE(e,t,a)[1];var o=(t-e)/n,s=o/a;s>1&&(n=n*Math.ceil(s)),r&&n<r&&(n=r)}n=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),n);for(var u=[],f=e;f<t+n;f+=n)u.push(f);return u}function ww(i){var e=Op((0,K.__assign)({showLast:!0},i));return e}function Lv(i){return new Date(i).getFullYear()}function _w(i){return new Date(i,0,1).getTime()}function Yd(i){return new Date(i).getMonth()}function Sw(i,e){var t=Lv(i),r=Lv(e),n=Yd(i),a=Yd(e);return(r-t)*12+(a-n)%12}function Mw(i,e){return new Date(i,e,1).getTime()}function Cw(i,e){return Math.ceil((e-i)/lc)}function Aw(i,e){return Math.ceil((e-i)/Il)}function Tw(i,e){return Math.ceil((e-i)/(60*1e3))}function Iw(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickCount,a=i.tickInterval,o=[];a||(a=(t-e)/n,r&&a<r&&(a=r)),a=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),a);var s=Lv(e);if(a>Mp)for(var u=Lv(t),f=Math.ceil(a/Mp),c=s;c<=u+f;c=c+f)o.push(_w(c));else if(a>Wh)for(var l=Math.ceil(a/Wh),x=Yd(e),m=Sw(e,t),c=0;c<=m+l;c=c+l)o.push(Mw(s,c+x));else if(a>lc)for(var C=new Date(e),R=C.getFullYear(),V=C.getMonth(),Q=C.getDate(),rt=Math.ceil(a/lc),st=Cw(e,t),c=0;c<st+rt;c=c+rt)o.push(new Date(R,V,Q+c).getTime());else if(a>Il)for(var C=new Date(e),R=C.getFullYear(),V=C.getMonth(),rt=C.getDate(),lt=C.getHours(),Ct=Math.ceil(a/Il),At=Aw(e,t),c=0;c<=At+Ct;c=c+Ct)o.push(new Date(R,V,rt,lt+c).getTime());else if(a>Tl)for(var Nt=Tw(e,t),Kt=Math.ceil(a/Tl),c=0;c<=Nt+Kt;c=c+Kt)o.push(e+c*Tl);else{var ge=a;ge<uf&&(ge=uf);for(var ue=Math.floor(e/uf)*uf,Ae=Math.ceil((t-e)/uf),Ke=Math.ceil(ge/uf),c=0;c<Ae+Ke;c=c+Ke)o.push(ue+c*uf)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}Bf("cat",Op),Bf("time-cat",ww),Bf("wilkinson-extended",gw),Bf("r-pretty",bw),Bf("time",Ew),Bf("time-pretty",Iw),Bf("log",pw),Bf("pow",yw),Bf("quantile",xw),Bf("d3-linear",nw),Ff("cat",zh),Ff("category",zh),Ff("identity",JE),Ff("linear",Yh),Ff("log",XE),Ff("pow",VE),Ff("time",HE),Ff("timeCat",GE),Ff("quantize",Tp),Ff("quantile",$E);var Ow=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))};function Lw(i){return(0,p.map)(i,function(e,t){var r=t===0?"M":"L",n=e[0],a=e[1];return[r,n,a]})}function Bp(i){return Lw(i)}function Dw(i){if(i.length<=2)return Bp(i);var e=[];(0,p.each)(i,function(o){(0,p.isEqual)(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=Fr(e,!1),r=(0,p.head)(i),n=r[0],a=r[1];return t.unshift(["M",n,a]),t}function Nw(i,e,t,r){r===void 0&&(r=!0);var n=new Yh({values:i}),a=new zh({values:(0,p.map)(i,function(s,u){return u})}),o=(0,p.map)(i,function(s,u){return[a.scale(u)*e,t-n.scale(s)*t]});return r?Dw(o):Bp(o)}function Pw(i,e,t,r){r===void 0&&(r=5);for(var n=new Yh({values:i}),a=new zh({values:(0,p.map)(i,function(x,m){return m})}),o=(0,p.map)(i,function(x,m){return[a.scale(m)*e,t-n.scale(x)*t]}),s=[],u=0;u<o.length;u++){var f=o[u],c={x:f[0],y:f[1],y0:t,size:r},l=Bw(c);s.push.apply(s,l)}return Fw(s)}function kw(i,e){var t=new Yh({values:i}),r=Math.max(0,t.min);return e-t.scale(r)*e}function Rw(i,e,t,r){var n=Ow([],i,!0),a=kw(r,t);return n.push(["L",e,a]),n.push(["L",0,a]),n.push(["Z"]),n}function Bw(i){var e=i.x,t=i.y,r=i.y0,n=i.size,a,o;(0,p.isArray)(t)?(a=t[0],o=t[1]):(a=r,o=t);var s,u;(0,p.isArray)(e)?(s=e[0],u=e[1]):(s=e-n/2,u=e+n/2);var f=[{x:s,y:a},{x:s,y:o}];return f.push({x:u,y:o},{x:u,y:a}),f}function Fw(i,e){e===void 0&&(e=!0);var t=[],r=i[0];t.push(["M",r.x,r.y]);for(var n=1,a=i.length;n<a;n++)t.push(["L",i[n].x,i[n].y]);return e&&(t.push(["L",r.x,r.y]),t.push(["z"])),t}var Vh=function(){return Vh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Vh.apply(this,arguments)},Gw={stroke:"#C5C5C5",strokeOpacity:.85},zw={fill:"#CACED4",opacity:.85},Uw=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.width,s=o===void 0?200:o,u=e.height,f=u===void 0?26:u,c=e.smooth,l=c===void 0?!0:c,x=e.isArea,m=x===void 0?!1:x,C=e.data,R=C===void 0?[]:C,V=e.lineStyle,Q=e.areaStyle,rt=e.group,st=e.interval,lt=st===void 0?null:st;this.group=rt,this.x=r,this.y=a,this.width=s,this.height=f,this.data=R,this.smooth=l,this.isArea=m,this.lineStyle=Object.assign({},Gw,V),this.areaStyle=Object.assign({},zw,Q),this.intervalConfig=lt,this.renderLine()}return i.prototype.renderLine=function(){var e=this,t=e.x,r=e.y,n=e.width,a=e.height,o=e.barWidth,s=e.data,u=e.smooth,f=e.isArea,c=e.lineStyle,l=e.areaStyle,x=this.group.addGroup({name:"trend-group"});if(s){var m=Nw(s,n,a,u);if(x.addShape("path",{attrs:Vh({path:m},c),name:"trend-line"}),f){var C=Rw(m,n,a,s);x.addShape("path",{attrs:Vh({path:C},l),name:"trend-area"})}}this.intervalConfig&&x.addShape("path",{attrs:Vh({path:Pw(this.intervalConfig.data,n,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),x.move(t,r)},i.prototype.destory=function(){this.group.destroy()},i}(),Ww=Uw,sh=function(){return sh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},sh.apply(this,arguments)},Xw={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Yw={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Vw=function(){function i(e){var t=e.group,r=e.name,n=e.type,a=e.x,o=a===void 0?0:a,s=e.y,u=s===void 0?0:s,f=e.width,c=f===void 0?2:f,l=e.height,x=l===void 0?24:l,m=e.style,C=m===void 0?{}:m;this.group=t,this.name=r,this.handleType=n,this.x=o,this.y=u,this.width=c,this.height=x,n==="trend"?this.style=sh(sh({},Xw),C):n==="simple"&&(this.style=sh(sh({},Yw),C)),this.renderHandle()}return i.prototype.setX=function(e){this.setXY(e,void 0)},i.prototype.setY=function(e){this.setXY(void 0,e)},i.prototype.setXY=function(e,t){(0,p.isNumber)(e)&&(this.x=e),(0,p.isNumber)(t)&&(this.y=t),this.updateXY()},i.prototype.renderHandle=function(){var e=this,t=e.width,r=e.height,n=e.style,a=e.name,o=n.fill,s=n.stroke,u=n.radius,f=n.opacity,c=n.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:r,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineAppendWidth:12},name:"".concat(a,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r/2,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineWidth:2},name:"".concat(a,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},i.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.topCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.topCircle.attr("fill",r)})},i.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)})},i.prototype.show=function(){this.handleGroup.show()},i.prototype.hide=function(){this.handleGroup.hide()},i.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},i}(),Fp=Vw,to=function(){return to=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},to.apply(this,arguments)},jw=Bt,Hw={fill:"#416180",opacity:.05},Kw={fill:"#416180",opacity:.15,radius:5},Zw={fill:"#5B8FF9",opacity:.3,cursor:"grab"},Vd=2,$w={width:Vd,height:24},qw={textBaseline:"middle",fill:"#000",opacity:.45},Qw={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},Jw={lineWidth:1,stroke:"#ccc"},t2=function(){function i(e){var t=this;this.prevX=0,this.onMouseDown=function(qr){return function(un){t.currentHandler=qr;var Dn=un.originalEvent;Dn.stopPropagation(),Dn.preventDefault(),t.prevX=(0,p.get)(Dn,"touches.0.pageX",Dn.pageX);var Rn=t.canvas.get("container");Rn.addEventListener("mousemove",t.onMouseMove),Rn.addEventListener("mouseup",t.onMouseUp),Rn.addEventListener("mouseleave",t.onMouseUp),Rn.addEventListener("touchmove",t.onMouseMove),Rn.addEventListener("touchend",t.onMouseUp),Rn.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(qr){qr.stopPropagation(),qr.preventDefault();var un=(0,p.get)(qr,"touches.0.pageX",qr.pageX),Dn=un-t.prevX,Rn=t.adjustOffsetRange(Dn/t.width);t.updateStartEnd(Rn),t.updateUI(),t.prevX=un},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var qr=t.canvas.get("container");qr&&(qr.removeEventListener("mousemove",t.onMouseMove),qr.removeEventListener("mouseup",t.onMouseUp),qr.removeEventListener("mouseleave",t.onMouseUp),qr.removeEventListener("touchmove",t.onMouseMove),qr.removeEventListener("touchend",t.onMouseUp),qr.removeEventListener("touchcancel",t.onMouseUp))};var r=e.x,n=r===void 0?0:r,a=e.y,o=a===void 0?0:a,s=e.width,u=s===void 0?100:s,f=e.height,c=e.padding,l=c===void 0?10:c,x=e.trendCfg,m=e.controllerCfg,C=m===void 0?{speed:1}:m,R=e.backgroundStyle,V=R===void 0?{}:R,Q=e.foregroundStyle,rt=Q===void 0?{}:Q,st=e.handlerStyle,lt=st===void 0?{}:st,Ct=e.textStyle,At=Ct===void 0?{}:Ct,Nt=e.start,Kt=Nt===void 0?0:Nt,ge=e.end,ue=ge===void 0?1:ge,Ae=e.minText,Ke=Ae===void 0?"":Ae,Gr=e.maxText,wr=Gr===void 0?"":Gr,Mr=e.group,vr=e.graph,sn=e.canvas,nn=e.tick,mr=nn===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(un){return un},ticks:[]}:nn,Dr=e.type;this.graph=vr,this.canvas=sn,this.group=Mr,this.timeBarType=Dr,this.x=n,this.y=o,this.width=u,this.height=f,this.padding=l,this.ticks=mr.ticks,this.trendCfg=x,this.controllerCfg=C,this.currentSpeed=C.speed||1,this.tickLabelFormatter=mr.tickLabelFormatter,Dr==="trend"?this.backgroundStyle=to(to({},Hw),V):Dr==="simple"&&(this.backgroundStyle=to(to({},Kw),V)),this.foregroundStyle=to(to({},Zw),rt),this.handlerStyle=to(to({},$w),lt),this.textStyle=to(to({},qw),At),this.tickLabelStyle=to(to({},Qw),mr.tickLabelStyle),this.tickLineStyle=to(to({},Jw),mr.tickLineStyle),this.currentMode=C.defaultTimeType||Rf.RANGE,this.start=Kt,this.end=ue,this.minText=Ke,this.maxText=wr,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return i.prototype.update=function(e){var t=e.x,r=e.y,n=e.width,a=e.height,o=e.minText,s=e.maxText,u=e.start,f=e.end;this.start=Math.min(1,Math.max(u,0)),this.end=Math.min(1,Math.max(f,0)),(0,p.assign)(this,{x:t,y:r,width:n,height:a,minText:o,maxText:s}),this.updateUI()},i.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},i.prototype.renderSlider=function(){var e=this,t=this,r=t.width,n=t.height,a=t.timeBarType;if(a==="trend"&&(0,p.size)((0,p.get)(this.trendCfg,"data"))){var o=new Ww(to(to({x:this.x,y:this.y,width:r,height:n},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:to({x:0,y:0,width:r,height:n},this.backgroundStyle),name:"background"});var u=this.group.addGroup();a==="trend"?(this.minTextShape=u.addShape("text",{attrs:to({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:to({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=u.addShape("text",{attrs:to({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:to({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:to({x:0,y:this.y,height:n},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(Q){Q.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(Q){Q.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var f=(0,p.get)(this.handlerStyle,"width",2),c=(0,p.get)(this.handlerStyle,"height",24),l=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new Fp({name:"minHandlerShape",group:l,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var x=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new Fp({name:"maxHandlerShape",group:x,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var m=this.ticks,C=r/(m.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(Q){Q.destroy()});var R=-1/0,V=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=m.map(function(Q,rt){e.tickPosList.push(e.x+rt*C);var st;e.tickLabelFormatter?(st=e.tickLabelFormatter(Q),!(0,p.isString)(st)&&st&&(st=Q.date)):st=Q.date;var lt=e.x+rt*C,Ct=e.y+n+5,At=e.group.addShape("text",{attrs:to({x:lt,y:Ct,text:st,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if((0,p.isNumber)(V)&&rt!==m.length-1){var Nt=jw([1,0,0,0,1,0,0,0,1],[["t",-lt,-Ct],["r",V],["t",lt-5,Ct+2]]);At.attr({textAlign:"left",matrix:Nt})}rt===0?At.attr({textAlign:"left"}):rt!==m.length-1&&At.attr({textAlign:"right"});var Kt=e.group.addShape("line",{attrs:to({x1:e.x+rt*C,y1:e.y+n+2,x2:e.x+rt*C,y2:e.y+n+6},e.tickLineStyle),name:"tick-line"});Kt.toBack();var ge=At.getBBox();return ge.minX>R?(At.show(),Kt.show(),R=ge.minX+ge.width+10):(At.hide(),Kt.hide()),At}),this.controllerBtnGroup=new ap(to({group:this.group,x:this.x,y:this.y+n+25,width:r,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===Rf.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},i.prototype.bindEvents=function(){var e=this,t=this.group.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(zc,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(Rh,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(Bh,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(Al,function(n){var a=n.type,o=n.speed;e.currentSpeed=o,e.currentMode=a,a===Rf.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):a===Rf.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},i.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},i.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,r=1-this.start;return Math.min(r,Math.max(t,e))}case this.maxHandlerShape:{var t=0-this.end,r=1-this.end;return Math.min(r,Math.max(t,e))}case this.foregroundShape:{var t=0-this.start,r=1-this.end;return Math.min(r,Math.max(t,e))}default:return 0}},i.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t==null?void 0:t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r==null?void 0:r.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;default:break}},i.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var t=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",r-t);var n=(0,p.get)(this.handlerStyle,"width",Vd);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,r]),o=a[0],s=a[1];this.minHandlerShape.setX(t-n/2),(0,p.each)(o,function(u,f){return e.minTextShape.attr(f,u)}),this.maxHandlerShape.setX(r-n/2),(0,p.each)(s,function(u,f){return e.maxTextShape.attr(f,u)}),this.currentMode===Rf.RANGE?this.graph.emit(kf,{value:[this.start,this.end].sort()}):this.currentMode===Rf.SINGLE&&this.graph.emit(kf,{value:[this.end,this.end]})},i.prototype.dodgeText=function(e){var t,r,n=2,a=(0,p.get)(this.handlerStyle,"width",Vd),o=this.minTextShape,s=this.maxTextShape,u=e[0],f=e[1],c=!1;u>f&&(t=[f,u],u=t[0],f=t[1],r=[s,o],o=r[0],s=r[1],c=!0);var l=o.getBBox(),x=s.getBBox(),m=null,C=null;return this.timeBarType==="trend"?(m=u-l.width<this.x+n?{x:u+a/2+n,textAlign:"left"}:{x:u-a/2-n,textAlign:"right"},C=f+x.width>this.x+this.width?{x:f-a/2-n,textAlign:"right"}:{x:f+a/2+n,textAlign:"left"}):this.timeBarType==="simple"&&(m=o.attr("x")>l.width?{x:u,textAlign:"center"}:{x:u,textAlign:"left"},C=s.attr("x")>this.width-x.width?{x:f,textAlign:"right"}:{x:f,textAlign:"center"}),c?[C,m]:[m,C]},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e,r=t.ticks,n=t.width,a=e.currentSpeed,o=n/r.length,s=o/((10-a)*1e3/60),u=e.adjustOffsetRange(s/e.width);e.updateStartEnd(u),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(tp,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(ep,null))},i.prototype.destory=function(){this.graph.off(kf,function(){});var e=this.group,t=e.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var r=e.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(zc,":click")),e.off("".concat(Rh,":click")),e.off("".concat(Bh,":click")),e.off(Al),e.destroy(),this.trendComponent&&this.trendComponent.destory()},i}(),e2=t2,r2=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hc=function(){return hc=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},hc.apply(this,arguments)},n2=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t},a2=4,i2=26,o2=function(i){r2(e,i);function e(t){var r=i.call(this,t)||this;return r.afterrenderListener=function(n){return r.filterData({})},r.valueChangeListener=(0,p.throttle)(function(n){return r.filterData(n)},200,{trailing:!0,leading:!0}),r.changeData=function(n){var a=r.get("graph");r.cacheGraphData=a.get("data"),r.filterData({})},r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var t=this.get("graph"),r=this._cfgs,n=r.width,a=r.height,o=r.putInGraphContainer,s=this.get("className")||"g6-component-timebar",u=this.get("container"),f;if(u?((0,p.isString)(u)&&(u=document.getElementById(u)),f=u):(f=Ji("<div class='".concat(s,"'></div>")),Wa(f,{position:"relative"})),o){var c=this.get("graph").get("container");c.appendChild(f)}this.set("timeBarContainer",f);var l,x=t.get("renderer");x==="SVG"?l=new Dh({container:f,width:n,height:a}):l=new fc({container:f,width:n,height:a}),this.get("containerCSS")&&Wa(f,this.get("containerCSS")),this.set("canvas",l)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),r=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",r),this.renderTrend(),this.initEvent();var n=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",n)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var r=this.get("timebar");r&&(r.isPlay=!!t,r.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,r=this._cfgs,n=r.width,a=r.x,o=r.y,s=r.padding,u=r.type,f=r.trend,c=r.slider,l=r.controllerCfg,x=r.textStyle,m=r.tick,C=r.backgroundStyle,R=r.foregroundStyle,V=f.data,Q=n2(f,["data"]),rt=n-2*s,st=u==="trend"?i2:a2,lt=this.get("graph"),Ct=this.get("timeBarGroup"),At=this.get("canvas"),Nt=null;if(u==="trend"||u==="simple"){var Kt=this.get("getValue");Nt=new e2(hc(hc({graph:lt,canvas:At,group:Ct,type:u,x:a+s,y:u==="trend"?o+s:o+s+15,width:rt,height:st,padding:s,backgroundStyle:C,foregroundStyle:R,trendCfg:hc(hc({},Q),{data:V.map(function(ue){return(Kt==null?void 0:Kt(ue))||ue.value})})},c),{tick:{ticks:V,tickLabelFormatter:m.tickLabelFormatter,tickLabelStyle:m.tickLabelStyle,tickLineStyle:m.tickLineStyle},handlerStyle:hc(hc({},c.handlerStyle),{height:c.height||st}),controllerCfg:l,textStyle:x}))}else u==="tick"&&(Nt=new ME(hc({graph:lt,canvas:At,group:Ct,x:a+s,y:o+s,width:n,height:42,padding:2,controllerCfg:l},m)));var ge=function ue(){var Ae=t.get("timebar");Ae.draggingHandler=!1,Ae.isPlay&&(Ae.isPlay=!1,Ae.currentHandler=Ae.maxHandlerShape,Ae.changePlayStatus()),document.removeEventListener("mouseup",ue)};At.on("mousedown",function(ue){(ue.target.get("name")==="maxHandlerShape-handler"||ue.target.get("name")==="minHandlerShape-handler"||ue.target===Nt.foregroundShape)&&document.addEventListener("mouseup",ge)}),this.set("timebar",Nt)},e.prototype.filterData=function(t){var r,n=t.value;if(!n){n=[];var a=this._cfgs.type;!a||a==="trend"||a==="simple"?(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end):a==="tick"&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end)}var o=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?o=this._cfgs.trend.data:s==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var u=this.get("rangeChange"),f=this.get("graph"),c=Math.round(o.length*n[0]),l=Math.round(o.length*n[1]);l=l>=o.length?o.length-1:l,c=c>=o.length?o.length-1:c;var x=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,m=x?x(o[c]):o[c].date,C=x?x(o[l]):o[l].date;if(s!=="tick"){var R=this.get("timebar");R.setText(m,C)}if(u)u(f,m,C);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=f.get("data"));var V=this.get("filterItemTypes"),Q=this.get("changeData"),rt=this.get("getDate"),st=this.get("shouldIgnore"),lt=o[c].date,Ct=o[l].date;if(Q||Q===void 0){var At=this.cacheGraphData.nodes,Nt=this.cacheGraphData.edges,Kt={},ge={};f.getNodes().forEach(function(ue){return Kt[ue.getID()]=!0}),f.getEdges().forEach(function(ue){return ge[ue.getID()]=!0}),V.includes("node")&&(At==null||At.forEach(function(ue){var Ae=+((rt==null?void 0:rt(ue))||ue.date),Ke=Ae>=lt&&Ae<=Ct||(st==null?void 0:st("node",ue,{min:lt,max:Ct})),Gr=Kt[ue.id];Gr&&!Ke?(f.removeItem(ue.id),Kt[ue.id]=!1):!Gr&&Ke&&(f.addItem("node",ue),Kt[ue.id]=!0)}),Nt==null||Nt.forEach(function(ue){var Ae=Kt[ue.source]&&Kt[ue.target]||(st==null?void 0:st("edge",ue,{min:lt,max:Ct})),Ke=!!f.findById(ue.id);Ke&&!Ae?(f.removeItem(ue.id),ge[ue.id]=!1):!Ke&&Ae?(f.addItem("edge",ue),ge[ue.id]=!0):Ke||(ge[ue.id]=!1)})),(this.get("filterEdge")||V.includes("edge"))&&(Nt==null||Nt.filter(function(ue){var Ae=+((rt==null?void 0:rt(ue))||ue.date),Ke=Ae>=lt&&Ae<=Ct||(st==null?void 0:st("edge",ue,{min:lt,max:Ct})),Gr=Kt[ue.source]&&Kt[ue.target],wr=Ke&&Gr,Mr=ge[ue.id];Mr&&!wr?(ge[ue.id]=!1,f.removeItem(ue.id)):!Mr&&wr&&(ge[ue.id]=!0,f.addItem("edge",ue))}))}else V.includes("node")&&f.getNodes().forEach(function(ue){var Ae=ue.getModel();if(!(st!=null&&st("node",Ae,{min:lt,max:Ct}))){var Ke=+((rt==null?void 0:rt(Ae))||Ae.date);Ke<lt||Ke>Ct?f.hideItem(ue):f.showItem(ue)}}),(this.get("filterEdge")||V.includes("edge"))&&f.getEdges().forEach(function(ue){var Ae=ue.getModel();if(!(st!=null&&st("edge",Ae,{min:o[c].date,max:o[l].date}))){var Ke=+((rt==null?void 0:rt(Ae))||Ae.date);if(Ke<o[c].date||Ke>o[l].date)f.hideItem(ue);else{var Gr=ue.getSource().isVisible(),wr=ue.getTarget().isVisible();Gr&&wr&&f.showItem(ue)}}})}},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(kf,this.valueChangeListener)},e.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(kf,this.valueChangeListener);var r=this.get("timebar");r&&r.destory&&r.destory(),i.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var a=this.get("container");a||(a=this.get("graph").get("container")),(0,p.isString)(a)&&(a=document.getElementById(a)),a===n&&(a=a.parentElement),a.removeChild(n)}},e}(hu),s2=o2,u2=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),f2=zs.applyMatrix;function c2(i,e){var t,r;if(i.naturalWidth)t=i.naturalWidth,r=i.naturalHeight;else{var n=new Image;n.src=i.src,n.onload=function(){e&&e(n.width,n.height)}}return[t,r]}var l2=function(i){u2(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.graph;if(!this.destroyed){var a=this.get("container");(0,p.isString)(a)&&(a=document.getElementById(a));var o=Ji("<div class=".concat(r.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,u=0,f=!1,c=0,l=0,x=0,m=0,C=0,R=0;a.addEventListener("mousedown",function(V){if(r.refresh=!1,V.target===o){var Q=o.style;x=parseInt(Q.width,10),m=parseInt(Q.height,10);var rt=t.get("width"),st=t.get("height");x>rt||m>st||(R=n.getZoom(),C=t.get("ratio"),f=!0,s=V.clientX,u=V.clientY)}},!1),a.addEventListener("mousemove",function(V){if(!(!f||(0,p.isNil)(V.clientX)||(0,p.isNil)(V.clientY))){var Q=t.get("width"),rt=t.get("height"),st=o.style;c=parseInt(st.left,10),l=parseInt(st.top,10),x=parseInt(st.width,10),m=parseInt(st.height,10);var lt=s-V.clientX,Ct=u-V.clientY;c-lt<0?lt=c:c-lt+x>=Q&&(lt=0),l-Ct<0?Ct=l:l-Ct+m>=rt&&(Ct=0),c-=lt,l-=Ct,Wa(o,{left:"".concat(c,"px"),top:"".concat(l,"px")}),n.translate(lt*R/C,Ct*R/C),s=V.clientX,u=V.clientY}},!1),a.addEventListener("mouseleave",function(){f=!1,r.refresh=!0},!1),a.addEventListener("mouseup",function(){f=!1,r.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("width"),n=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=o/s,f=a.getGroup(),c=f.getCanvasBBox(),l=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],x=[c.maxX-c.minX,c.maxY-c.minY],m={centerX:l[0],centerY:l[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>u?(m.width=x[0],m.height=m.width/u):(m.height=x[1],m.width=m.height*u),m.minX=l[0]-m.width/2,m.minY=l[1]-m.height/2;var C=f.getMatrix();C||(C=[1,0,0,0,1,0,0,0,1]);var R=Wt.invert([1,0,0,0,1,0,0,0,1],C),V=f2({x:m.minX,y:m.minY},R),Q=a.getCanvasByPoint(V.x,V.y),rt=this.get("viewport");rt||this.initViewport();var st=o/m.width,lt=st*r,Ct=st*n,At=r*-Q.x/m.width,Nt=n*-Q.y/m.height,Kt=At+lt,ge=Nt+Ct;At<0&&(lt+=At,At=0),Kt>r&&(lt=lt-(Kt-r)),Nt<0&&(Ct+=Nt,Nt=0),ge>n&&(Ct=Ct-(ge-n)),this.set("ratio",t);var ue="".concat(At,"px"),Ae="".concat(Nt,"px");Wa(rt,{left:ue,top:Ae,width:"".concat(lt,"px"),height:"".concat(Ct,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=r.get("width"),a=r.get("height"),o=a/n,s=t.get("className"),u=t.get("container"),f=t.get("width"),c=t.get("height");!f&&!c&&(f=200),f?(c=o*f,t.set("height",c)):(f=1/o*c,t.set("width",f));var l=Ji("<div class='".concat(s,"' style='width: ").concat(f,"px; height: ").concat(c,"px; overflow: hidden; position: relative;'></div>"));(0,p.isString)(u)&&(u=document.getElementById(u)),u?u.appendChild(l):r.get("container").appendChild(l),t.set("container",l);var x=Ji('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');l.appendChild(x);var m=Ji('<span style="display: table-cell; vertical-align: middle; "></span>');x.appendChild(m),t.set("containerDOM",x),t.set("containerSpan",m);var C=Ji('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",C),t.updateImgSize(),m.appendChild(C),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,r=t.get("imgDOM"),n=t.get("width"),a=t.get("height");r.onload=function(){var o=c2(r);o[0]>o[1]?r.width=n:r.height=a}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),a=r.get("canvas").getCanvasBBox(),o=a.width,s=n/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var r=this,n=r.get("imgDOM");n.remove(),r.set("graphImg",t);var a=Ji('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));r.set("imgDOM",a),a.src=t,r.updateImgSize();var o=r.get("containerSpan");o.appendChild(a),r.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(hu),h2=l2,v2=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jd=function(){return jd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},jd.apply(this,arguments)},d2=zs.distance,Gp=.05,zp={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},g2=function(i){v2(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,p.clone)(zp),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,r=t.get("showLabel"),n=r==="node"||r==="both",a=r==="edge"||r==="both";t.set("showNodeLabel",n),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var r=this,n=r.get("delegate");(!n||n.destroyed)&&(r.filter(t),n=r.get("delegate"),n.on("dragstart",function(a){}),n.on("drag",function(a){r.filter(a)}),this.get("scaleRBy")==="wheel"&&n.on("mousewheel",function(a){r.scaleRByWheel(a)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-Gp:a=1/(1-Gp);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.filter(t)}},e.prototype.filter=function(t){var r=this,n=r.get("graph"),a=n.getNodes(),o={},s=r.get("r"),u=r.get("type"),f={x:t.x,y:t.y};r.updateDelegate(f,s);var c=r.get("shouldShow"),l=r.get("vShapes");l&&l.forEach(function(Q){Q.remove(),Q.destroy()}),l=[],a.forEach(function(Q){var rt=Q.getModel(),st=rt.x,lt=rt.y;d2({x:st,y:lt},f)<s&&(o[rt.id]=Q)});var x=n.getEdges(),m=[];x.forEach(function(Q){var rt=Q.getModel(),st=rt.source,lt=rt.target;c(rt)&&(u==="only-source"||u==="one"?o[st]&&!o[lt]&&m.push(Q):u==="only-target"||u==="one"?o[lt]&&!o[st]&&m.push(Q):u==="both"&&o[st]&&o[lt]&&m.push(Q))});var C=r.get("showNodeLabel"),R=r.get("showEdgelabel"),V=n.get("group");m.forEach(function(Q){var rt=Q.get("group").get("children");rt.forEach(function(st){var lt=st.get("type"),Ct=V.addShape(lt,{attrs:st.attr()});l.push(Ct),C&&lt==="text"&&Ct.set("visible",!0)})}),Object.keys(o).forEach(function(Q){var rt=o[Q],st=rt.get("group").clone();if(V.add(st),l.push(st),R)for(var lt=st.get("children"),Ct=0;Ct<lt.length;Ct++){var At=lt[Ct];At.get("type")==="text"&&At.set("visible",!0)}}),r.set("vShapes",l)},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.trigger,o=t.minR,s=t.maxR,u=t.scaleRBy,f=t.showLabel,c=t.shouldShow;if(isNaN(t.r)||r.set("r",n),isNaN(s)||r.set("maxR",s),isNaN(o)||r.set("minR",o),(a==="mousemove"||a==="click")&&r.set("trigger",a),u==="wheel"||u==="unset"){r.set("scaleRBy",u),r.get("delegate").remove(),r.get("delegate").destroy();var l=r.get("dPercentText");l&&(l.remove(),l.destroy())}(f==="node"||f==="both")&&r.set("showNodeLabel",!0),(f==="edge"||f==="both")&&r.set("showEdgeLabel",!0),c&&r.set("shouldShow",c)},e.prototype.updateDelegate=function(t,r){var n=this,a=n.get("graph"),o=n.get("delegate");if(!o||o.destroyed){var s=a.get("group"),u=n.get("delegateStyle")||zp;o=s.addShape("circle",{attrs:jd({r,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(f){n.scaleRByWheel(f)})}else o.attr({x:t.x,y:t.y,r});n.set("delegate",o)},e.prototype.clear=function(){var t=this,r=t.get("vShapes");r&&r.forEach(function(a){a.remove(),a.destroy()}),r=[],t.set("vShapes",r);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(hu),p2=g2,y2=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),m2=zs.pointLineDistance,x2={stroke:"#FA8C16",lineWidth:1},b2=function(i){y2(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{line:x2,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var r=t.item,n=r.get("delegateShape")||r,a=n.getBBox(),o=r.getModel(),s=o.x-a.x,u=o.y-a.y;this.show({x:a.minX+s,y:a.minY+u},{width:a.width,height:a.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=t.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(u){var f=u.getBBox(),c=u.get("id");a===!0||a==="horizontal"?(r["".concat(c,"tltr")]=[f.minX,f.minY,f.maxX,f.minY,u],r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u],r["".concat(c,"blbr")]=[f.minX,f.maxY,f.maxX,f.maxY,u]):a==="center"&&(r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u]),a===!0||a==="vertical"?(n["".concat(c,"tlbl")]=[f.minX,f.minY,f.minX,f.maxY,u],n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u],n["".concat(c,"trbr")]=[f.maxX,f.minY,f.maxX,f.maxY,u]):a==="center"&&(n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u])})},e.prototype.show=function(t,r){var n=(0,p.mix)({},t);return this.itemAlign(t,r,n),t},e.prototype.itemAlign=function(t,r,n){var a=this,o=this._cfgs,s=o.horizontalLines,u=o.verticalLines,f=o.tolerance,c={x:n.x+r.width/2,y:n.y},l={x:n.x+r.width/2,y:n.y+r.height/2},x={x:n.x+r.width/2,y:n.y+r.height},m={x:n.x,y:n.y+r.height/2},C={x:n.x+r.width,y:n.y+r.height/2},R=[],V=[],Q=null;if(this.clearAlignLine(),(0,p.each)(s,function(st){st[4].isVisible&&(R.push(a.getLineDisObject(st,c)),R.push(a.getLineDisObject(st,l)),R.push(a.getLineDisObject(st,x)))}),(0,p.each)(u,function(st){st[4].isVisible&&(V.push(a.getLineDisObject(st,m)),V.push(a.getLineDisObject(st,l)),V.push(a.getLineDisObject(st,C)))}),R.sort(function(st,lt){return st.dis-lt.dis}),V.sort(function(st,lt){return st.dis-lt.dis}),R.length!==0&&R[0].dis<f){t.y=R[0].line[1]-R[0].point.y+n.y,Q={type:"item",horizontals:[R[0]]};for(var rt=1;rt<3;rt++)R[0].dis===R[rt].dis&&Q.horizontals.push(R[rt])}if(V.length!==0&&V[0].dis<f){t.x=V[0].line[0]-V[0].point.x+n.x,Q?Q.verticals=[V[0]]:Q={type:"item",verticals:[V[0]]};for(var rt=1;rt<3;rt++)V[0].dis===V[rt].dis&&Q.verticals.push(V[rt])}Q&&(Q.bbox=r,this.addAlignLine(Q))},e.prototype.addAlignLine=function(t){var r=t.bbox,n=t.type,a=t.horizontals,o=t.verticals,s=this._cfgs,u=s.line,f=s.alignLines,c=this.get("graph"),l=c.get("group");n==="item"&&(a&&(0,p.each)(a,function(x){var m=x.line,C=x.point,R=(m[0]+m[2])/2,V,Q;C.x<R?(V=C.x-r.width/2,Q=Math.max(m[0],m[2])):(V=C.x+r.width/2,Q=Math.min(m[0],m[2]));var rt=(0,p.mix)({x1:V,y1:m[1],x2:Q,y2:m[1]},u),st=l.addShape("line",{attrs:rt,capture:!1});f.push(st)}),o&&(0,p.each)(o,function(x){var m=x.line,C=x.point,R=(m[1]+m[3])/2,V,Q;C.y<R?(V=C.y-r.height/2,Q=Math.max(m[1],m[3])):(V=C.y+r.height/2,Q=Math.min(m[1],m[3]));var rt=(0,p.mix)({x1:m[0],y1:V,x2:m[0],y2:Q},u),st=l.addShape("line",{attrs:rt,capture:!1});f.push(st)}))},e.prototype.getLineDisObject=function(t,r){return{line:t,point:r,dis:m2(t,r)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,p.each)(t,function(r){r.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var u=s.get("id");delete r["".concat(u,"tltr")],delete r["".concat(u,"lcrc")],delete r["".concat(u,"blbr")],delete n["".concat(u,"tlbl")],delete n["".concat(u,"tcbc")],delete n["".concat(u,"trbr")]}),this.clearAlignLine()},e}(hu),E2=b2,w2=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Do=function(){return Do=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Do.apply(this,arguments)},_2=["click","mouseenter"],S2=function(i){w2(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},r=t.multiple;r&&t.trigger==="mouseenter"&&this.set("multiple",!1);var n=this.get("align");if(!n){var a=this.get("position").split("-");a.includes("left")&&(n="left"),a.includes("right")?n="right":n="center",this.set("align",n)}var o=this.get("graph"),s=o.get("container"),u=Ji(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(u),this.set("container",u);var f=this.render();Wa(u,this.getContainerPos(f)),this.bindEvents()},e.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var r=this,n=r.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),u=this.get("position").split("-"),f={top:0,right:1,bottom:2,left:3},c=0,l=0,x={left:(n.getWidth()-t[0])/2+c,top:(n.getHeight()-t[1])/2+l};return u.forEach(function(m){var C=s[f[m]],R=m;switch(m){case"top":C+=l;break;case"left":C+=c;break;case"bottom":C=n.getHeight()-t[1]-C+l,R="top";break;default:C=n.getWidth()-t[0]-C+c,R="left";break}x[R]=C}),x.top+=o+n.getContainer().offsetTop,x.left+=a+n.getContainer().offsetLeft,Object.keys(x).forEach(function(m){x[m]="".concat(x[m],"px")}),x},e.prototype.bindEvents=function(){var t=this,r=t.get("filter");if(!(!r||!r.enable)){var n=r.trigger||"click";_2.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var a=t.get("legendCanvas");n==="mouseenter"?(a.on("node-container:mouseenter",function(o){return t.filterData(o)}),a.on("node-container:mouseleave",function(o){t.clearFilter(),t.clearActiveLegend()})):(a.on("node-container:click",function(o){return t.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var r=this.render();Wa(this.get("container"),this.getContainerPos(r))},e.prototype.activateLegend=function(t){var r=this.get("filter"),n=r==null?void 0:r.multiple;n||this.clearActiveLegend();var a=t.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(l){l.set("inactive",!0)}):this.clearActiveLegend();var o=(r==null?void 0:r.legendStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},u=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(l){var x=l.get("children"),m=x[0],C=x[1];m.attr(Do(Do({},m.get("oriAttrs")),s)),C.attr(Do(Do({},C.get("oriAttrs")),u))});var f=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=f["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(l){var x=l.get("children"),m=x[0],C=x[1];m.attr(Do(Do({},m.get("oriAttrs")),f)),C.attr(Do(Do({},C.get("oriAttrs")),c))})},e.prototype.findLegendItemsByState=function(t,r,n){r===void 0&&(r="all"),n===void 0&&(n=!0);var a=this.get("legendCanvas").find(function(u){return u.get("name")==="root"}),o=a.find(function(u){return u.get("name")==="node-group"}),s=a.find(function(u){return u.get("name")==="edge-group"});return r==="node"?o.get("children").filter(function(u){return!!u.get(t)===n}):r==="edge"?s.get("children").filter(function(u){return!!u.get(t)===n}):o.get("children").filter(function(u){return!!u.get(t)===n}).concat(s.get("children").filter(function(u){return!!u.get(t)===n}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),r=t.find(function(a){return a.get("name")==="root"}),n=[r.find(function(a){return a.get("name")==="node-group"}),r.find(function(a){return a.get("name")==="edge-group"})];n.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),u=s[0],f=s[1];u.attr(u.get("oriAttrs")),f.attr(f.get("oriAttrs"))})})},e.prototype.filterData=function(t){var r=this.get("filter"),n=r==null?void 0:r.filterFunctions;if(!(!r||!n)){var a=this.get("legendCanvas"),o=this.get("graph"),s=r.graphActiveState||"active",u=r.graphInactiveState||"inactive",f=r.multiple;this.clearFilter(),f||this.clearActiveLegend(),this.activateLegend(t.target);var c=a.find(function(Q){return Q.get("name")==="root"}),l=c.find(function(Q){return Q.get("name")==="node-group"}),x=c.find(function(Q){return Q.get("name")==="edge-group"}),m=l.get("children").filter(function(Q){return Q.get("active")}),C=x.get("children").filter(function(Q){return Q.get("active")}),R=0,V=["getNodes","getEdges"];V.forEach(function(Q){o[Q]().forEach(function(rt){var st=!1,lt=Q==="getNodes"?m:C;lt.forEach(function(Ct){var At=n[Ct.get("id")];st=st||At(rt.getModel())}),st?(o.setItemState(rt,u,!1),o.setItemState(rt,s,!0),R++):(o.setItemState(rt,s,!1),o.setItemState(rt,u,!0))})}),R||V.forEach(function(Q){o[Q]().forEach(function(rt){o.clearItemStates(rt,[u])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),r=this.get("filter");if(r){var n=r.graphActiveState||"active",a=r.graphInactiveState||"inactive";t.getNodes().forEach(function(o){t.clearItemStates(o,[n,a])}),t.getEdges().forEach(function(o){t.clearItemStates(o,[n,a])})}},e.prototype.render=function(){var t=this;this.processData();var r=this.get("legendCanvas");r?r.clear():r=new fc({container:this.get("container"),width:200,height:200});var n=r.addGroup({name:"root"}),a=n.addGroup({name:"node-group"}),o=n.addGroup({name:"edge-group"});this.set("legendCanvas",r);var s=this.get("itemsData"),u=["nodes","edges"],f=[a,o];u.forEach(function(vr,sn){s[vr].forEach(function(nn){var mr,Dr=f[sn].addGroup({id:nn.id,name:"node-container"}),qr,un=nn.type,Dn=t.getShapeSize(nn),Rn=Dn.width,ca=Dn.height,ra=Dn.r,qa=t.getStyle(vr.substr(0,4),nn);switch(nn.type){case"circle":qr={r:ra,x:0,y:0};break;case"rect":qr={width:Rn,height:ca,x:-Rn/2,y:-ca/2};break;case"ellipse":qr={rx:Rn,ry:ca,x:0,y:0},un="ellipse";break;case"line":qr={x1:-Rn/2,y1:0,x2:Rn/2,y2:0},un="line";break;case"quadratic":qr={path:[["M",-Rn/2,0],["Q",0,Rn/2,Rn/2,0]]},un="path";break;case"cubic":qr={path:[["M",-Rn/2,0],["C",-Rn/6,Rn/2,Rn/6,-Rn/2,Rn/2,0]]},un="path";break;case"diamond":qr={path:[["M",0,-ca],["L",Rn,0],["L",0,ca],["L",-Rn,0],["Z"]]},un="path";break;case"triangle":qr={path:[["M",-Rn,ca],["L",0,-ca],["L",Rn,ca],["Z"]]},un="path";break;case"star":qr={path:zs.getStarPath(ra*3,ra*1.2)},un="path";break;default:qr={r:ra,x:0,y:0};break}var Pa=Dr.addShape(un,{attrs:Do(Do({},qr),qa),name:"".concat(nn.type,"-node-keyShape"),oriAttrs:Do({opacity:1},qa)});if(nn.label){var Ta=Pa.getBBox(),oi=((mr=nn.labelCfg)===null||mr===void 0?void 0:mr.style)||{},Ei=Do({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},oi);Dr.addShape("text",{attrs:Do({x:Ta.maxX+4,y:0,text:nn.label},Ei),className:"legend-label",name:"".concat(nn.type,"-node-text"),oriAttrs:Ei})}})});var c=this.get("padding"),l,x=n.find(function(vr){return vr.get("name")==="title-container"}),m={height:0,maxY:0,width:0};if(this.get("title")){x||(x=n.addGroup({name:"title-container"}));var C={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:c[0]},R=this.get("titleConfig")||{},V=Object.assign(C,R.style||{});l=x.addShape("text",{attrs:Do({text:this.get("title")},V)}),m=x.getCanvasBBox(),x.setMatrix([1,0,0,0,1,0,R.offsetX,R.offsetY,1])}this.layoutItems();var Q=n.getCanvasBBox(),rt=a.getCanvasBBox(),st=rt.minX<0?Math.abs(rt.minX)+c[3]:c[3],lt=m.maxY<rt.minY?Math.abs(m.maxY-rt.minY)+c[0]:m.maxY+c[0],Ct=[1,0,0,0,1,0,st,lt,1];a.setMatrix(Ct),Q=n.getCanvasBBox();var At=[Q.minX+Q.width+c[1],Q.minY+Q.height+c[2]];if(l){var R=Do({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));m=x.getCanvasBBox();var Nt=x.getMatrix()||[1,0,0,0,1,0,0,0,1];R.position==="center"?Nt[6]=At[0]/2+R.offsetX:R.position==="right"?(Nt[6]=At[0]-c[3]+R.offsetX,l.attr({textAlign:"right"})):(Nt[6]=c[3]+R.offsetX,l.attr({textAlign:"left"})),x.setMatrix(Nt),m=x.getCanvasBBox(),st=rt.minX<0?Math.abs(rt.minX)+c[3]:c[3],lt=rt.minY<m.maxY?Math.abs(m.maxY-rt.minY)+c[0]:m.maxY+c[0],Ct=[1,0,0,0,1,0,st,lt,1],a.setMatrix(Ct);var Kt=[1,0,0,0,1,0,st,lt,1];this.get("layout")==="vertical"?Kt[6]+=rt.maxX+this.get("horiSep"):Kt[7]+=rt.maxY+this.get("vertiSep"),o.setMatrix(Kt)}else{rt=a.getCanvasBBox();var ge=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?ge[6]+=Ct[6]+rt.maxX+this.get("horiSep"):ge[7]+=Ct[7]+rt.maxY+this.get("vertiSep"),o.setMatrix(ge)}Q=n.getCanvasBBox(),rt=a.getCanvasBBox(),Ct=a.getMatrix()||[1,0,0,0,1,0,0,0,1];var ue=o.getMatrix()||[1,0,0,0,1,0,0,0,1],Ae=o.getCanvasBBox();At=[Math.max(rt.width+Ct[6],Ae.width+ue[6])+c[1],Math.max(rt.height+Ct[7],Ae.height+ue[7])+c[2]],r.changeSize(At[0],At[1]);var Ke=this.get("containerStyle"),Gr=n.getMatrix()||[1,0,0,0,1,0,0,0,1],wr=zs.invertMatrix({x:0,y:0},Gr),Mr=n.addShape("rect",{attrs:Do({x:wr.x+(Ke.lineWidth||1),y:wr.y+(Ke.lineWidth||1),width:At[0]-2*(Ke.lineWidth||1),height:At[1]-2*(Ke.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},Ke),name:"legend-back-rect",capture:!1});return Mr.toBack(),At},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),r=this.get("horiSep"),n=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],u=t.find(function(lt){return lt.get("name")==="root"}),f=u.find(function(lt){return lt.get("name")==="node-group"}),c=u.find(function(lt){return lt.get("name")==="edge-group"}),l={min:0,max:-1/0},x=-1/0;f.get("children").forEach(function(lt,Ct){Ct===0&&(l.min=s[0]);var At=lt.get("children")[0],Nt=lt.getCanvasBBox(),Kt=At.getBBox(),ge=Kt.width,ue=Kt.height,Ae=0,Ke=0,Gr=0;a==="vertical"?(Ke=s[1],Gr=s[0]+ge/2,s[0]=Gr+Nt.height+n,Ae=Nt.maxX+Ke+ge/2):(Ke=s[0]+ge/2,Gr=s[1],s[0]=Ke+Nt.width+r,Ae=Nt.maxY+Gr+ue/2),s[0]>l.max&&(l.max=s[0]),Ae>x&&(x=Ae),lt.setMatrix([1,0,0,0,1,0,Ke,Gr,1])});var m=l.max-l.min,C={min:0,max:-1/0},R=f.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?R.maxX+r:R.maxY+n,c.get("children").forEach(function(lt,Ct){Ct===0&&(C.min=s[0]);var At=lt.get("children")[0],Nt=lt.getCanvasBBox(),Kt=At.getBBox(),ge=Kt.width,ue=Kt.height,Ae=0,Ke=0;a==="vertical"?(Ae=s[1],Ke=s[0],s[0]=Ke+Nt.height+n,lt.setMatrix([1,0,0,0,1,0,0,Ke+ue/2,1])):(Ae=s[0],Ke=s[1],s[0]=Ae+Nt.width+r,lt.setMatrix([1,0,0,0,1,0,Ae+ge/2,0,1])),s[0]>C.max&&(C.max=s[0])});var V=C.max-C.min;if(o&&o!==""&&o!=="left"){var Q=m-V,rt=o==="center"?Math.abs(Q)/2:Math.abs(Q),st=Q<0?f:c;st.get("children").forEach(function(lt){var Ct=lt.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?Ct[7]+=rt:Ct[6]+=rt,lt.setMatrix(Ct)})}},e.prototype.processData=function(){var t=this.get("data"),r={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(n,a){return n.order-a.order}),t.nodes.forEach(function(n){var a,o,s,u,f,c=n.size||[((a=n.style)===null||a===void 0?void 0:a.width)||((o=n.style)===null||o===void 0?void 0:o.r)||8,((s=n.style)===null||s===void 0?void 0:s.height)||((u=n.style)===null||u===void 0?void 0:u.r)||8],l=((f=n.labelCfg)===null||f===void 0?void 0:f.style)||{};r.nodes.push({id:n.id||(0,p.uniqueId)(),type:n.type||"circle",style:Do({},n.style),order:n.order,label:n.label,itemType:"node",size:c,labelCfg:{position:"right",style:Do({fontFamily:"Arial"},l)}})})),t.edges&&(t.edges.sort(function(n,a){return n.order-a.order}),t.edges.forEach(function(n){var a,o,s=n.type||"line";n.type==="cubic-horizontal"&&(s="cubic");var u=((a=n.labelCfg)===null||a===void 0?void 0:a.style)||{},f=n.size||[((o=n.style)===null||o===void 0?void 0:o.width)||8,1];r.edges.push({id:n.id||(0,p.uniqueId)(),type:s,size:f,style:Do({lineWidth:(0,p.isArray)(f)?f[1]:1},n.style),order:n.order,label:n.label,itemType:"edge",labelCfg:{position:"right",style:Do({fontFamily:"Arial"},u)}})})),this.set("itemsData",r)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var r=this.get(t);if((0,p.isNumber)(r))this.set(t,[r,r,r,r]);else if((0,p.isArray)(r))switch(r.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(t,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(t,[r[0],r[1],r[2],r[1]]);break;default:break}return this.get(t)},e.prototype.getShapeSize=function(t){var r,n,a;return t.size&&((0,p.isArray)(t.size)?(r=t.size[0],n=t.size[1]||t.size[0],a=t.size[0]/2):(0,p.isNumber)(t.size)&&(r=t.size,n=t.size,a=t.size/2)),t.style&&(t.style.width&&(r=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(a=t.style.r)),a||(a=5),r||(r=a),n||(n=a),{width:r,height:n,r:a}},e.prototype.getStyle=function(t,r){var n=t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return Do(Do({},n),r.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");t==null||t.destroy();var r=this.get("graph"),n=r.get("container"),a=this.get("container");n.removeChild(a)},e}(hu),M2=S2,C2=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xu=function(){return Xu=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Xu.apply(this,arguments)},Up=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t};typeof document!="undefined"&&kh()(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var Wp="canvas-annotation",A2=function(i){C2(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=Xu(Xu({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var r=t.collapsed,n=t.maxWidth,a=t.title,o=a===void 0?"":a,s=t.content,u=s===void 0?"":s,f=t.borderRadius,c=f===void 0?5:f,l=r?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",x=r?"":" <p class='g6-annotation-content'>".concat(u,"</p>"),m="<p class='g6-annotation-close'>x</p>",C=r?"".concat(c,"px"):"".concat(c,"px ").concat(c,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(c,"px; max-width: ").concat(n,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(C,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(l,`
          `).concat(m,`
        </div>
        `).concat(x,`
      </div>`)}},e.prototype.init=function(){var t=this;if(!t.destroyed){var r=t.get("graph"),n=r.getContainer(),a=t.get("container"),o=this.get("containerCfg");o?(a=this.createContainer(),n.appendChild(a)):a=n,this.set("container",a);var s=n.getBoundingClientRect(),u=new fc({container:n,width:s.right-s.left,height:s.bottom-s.top});Wa(u.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,p.debounce)(function(){return t.resizeCanvas(t)},100));var f=u.addGroup({id:"annotation-link-group"});t.set("linkGroup",f),t.set("canvas",u),t.get("getTitle")||t.set("getTitle",function(l){var x,m=((x=l==null?void 0:l.getModel)===null||x===void 0?void 0:x.call(l))||{},C=m.label,R=m.id;return C||R||"-"}),t.get("getContent")||t.set("getContent",function(l){var x,m;if(!l)return"-";var C=((x=l.getModel)===null||x===void 0?void 0:x.call(l))||{},R=C.label,V=C.id,Q=(m=l.getType)===null||m===void 0?void 0:m.call(l),rt=Q?"".concat(Q,": "):"";return"".concat(rt).concat(R||V||"")});var c=t.get("defaultData");c&&this.readData(c)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var r=this.get("containerCfg"),n=this.get("graph"),a=n.getContainer(),o=a.getBoundingClientRect(),s=o.left,u=o.right,f=o.top,c=o.bottom,l=c-f,x=u-s,m=r.position,C=m===void 0?"top":m,R=r.offsetX,V=R===void 0?0:R,Q=r.offsetY,rt=Q===void 0?0:Q,st=Up(r,["position","offsetX","offsetY"]),lt=r.height,Ct=lt===void 0?"fit-content":lt,At=r.width,Nt=At===void 0?n.getWidth():At;Ct==="100%"&&(Ct=l),Nt==="100%"&&(Nt=x);var Kt="unset",ge="unset",ue={};switch(C){case"right":Kt="".concat(l,"px"),ue={top:0,right:0},ue.right+=s+V,ue.top+=f+rt;break;case"bottom":ge="".concat(x,"px"),ue={bottom:0,left:0},ue.left+=s+V,ue.bottom+=f+rt;break;case"top":ge="".concat(x,"px");case"left":Kt="".concat(l,"px");default:ue={top:0,left:0},ue.left+=s+V,ue.top+=f+rt;break}Object.keys(ue).forEach(function(Ke){ue[Ke]="".concat(ue[Ke],"px")});var Ae=Ji("<div class='".concat(r.className," g6-annotation-container'></div>"));return Wa(Ae,Xu(Xu({position:"absolute",display:C==="top"||C==="bottom"?"inline-flex":"unset",width:(0,p.isNumber)(Nt)?"".concat(Nt,"px"):Nt,height:(0,p.isNumber)(Ct)?"".concat(Ct,"px"):Ct,maxHeight:Kt,maxWidth:ge,overflow:"scroll"},ue),st)),a.appendChild(Ae),Ae.addEventListener("scroll",function(Ke){t.updateLinks()}),Ae}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(!(!t||t.destroyed)){var r=t.get("container").getBoundingClientRect(),n=r.right-r.left,a=r.bottom-r.top;t.get("canvas").changeSize(n,a),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var r=t||this,n=r.get("cardInfoMap")||{},a=r.get("graph"),o=a.getPointByCanvas(0,0),s=a.getPointByCanvas(a.getWidth(),a.getHeight()),u=a.getClientByPoint(o.x,o.y),f=u.x,c=u.y,l=a.getClientByPoint(s.x,s.y),x=l.x,m=l.y;Object.values(n).forEach(function(C){var R=C.card;if(R){var V=R.style,Q=Ll(V.left),rt=Ll(V.top),st=R.getBoundingClientRect(),lt=st.width,Ct=st.height,At=Q,Nt=rt;Q+lt>x-f&&(At=x-f-lt),Q<0&&(At=0),rt+Ct>m-c&&(Nt=m-c-Ct),rt<0&&(Nt=0),Wa(R,{left:"".concat(At,"px"),top:"".concat(Nt,"px")})}}),r.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var r=t.item;this.toggleAnnotation(r)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var r=t.get("cardInfoMap")||{};Object.keys(r).forEach(function(n){t.hideCard(n)})}},e.prototype.toggleAnnotation=function(t,r){var n,a;r===void 0&&(r={});var o=this;if(!o.destroyed){var s=o.get("cardInfoMap")||{},u=o.get("graph"),f=o.get("container"),c=o.get("containerCfg"),l=Object.assign({},o.get("cardCfg")||{},r),x=l.minHeight,m=l.minWidth,C=l.width,R=l.height,V=l.collapsed,Q=V===void 0?!1:V,rt=l.x,st=l.y,lt=l.title,Ct=l.content,At=l.maxTitleLength,Nt=l.defaultBegin,Kt=Up(l,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),ge=o.get("linkGroup"),ue=this.get("rows")||[[]],Ae=(n=t.isCanvas)===null||n===void 0?void 0:n.call(t),Ke=Ae?Wp:t.getID(),Gr=s[Ke]||{},wr=Gr.card,Mr=Gr.link,vr=Gr.x,sn=Gr.y,nn=Gr.title,mr=Gr.content,Dr=this.get("getTitle"),qr=this.get("getContent"),un=this.get("getContentPlaceholder")||function(){return""},Dn=this.get("getTitlePlaceHolder")||function(){return""},Rn=un(t),ca=Dn(t),ra=Ji(this.getDOMContent(Xu({itemId:Ke,collapsed:Q,title:((a=nn||lt||(Dr==null?void 0:Dr(t)))===null||a===void 0?void 0:a.substr(0,At))||ca,content:mr||Ct||(qr==null?void 0:qr(t))||Rn},Kt))),qa=(0,p.isNumber)(x)?"".concat(x,"px"):x;Wa(ra,{minHeight:Q?"unset":qa,minWidth:(0,p.isNumber)(m)?"".concat(m,"px"):m,height:R,width:C});var Pa=!!wr;Pa?(Mr==null||Mr.remove(!0),f.replaceChild(ra,wr)):f.appendChild(ra);var Ta;if(!c){if(Ta=f.getBoundingClientRect()||{},rt!==void 0&&st!==void 0)vr=rt,sn=st;else if(!Pa&&!Ae){var oi=Ta.top,Ei=Nt||{},wi=Ei.left,Cs=Ei.right,mi=Cs===void 0?16:Cs,As=Ei.top,Vi=As===void 0?8:As,ji=Ei.bottom,eo=mi,No=Vi;isNaN(wi)||(eo=f.scrollWidth-wi),isNaN(ji)||(No=f.scrollHeight-ji);var Go=(0,p.isNumber)(m)?m:100;vr=f.scrollWidth-ra.scrollWidth-(ue.length-1)*Go-eo;var Va=ue[ue.length-1],di=(Va[Va.length-1]||{}).bbox;sn=(di==null?void 0:di.bottom)-oi||No}Wa(ra,{position:"absolute",left:"".concat(vr,"px"),top:"".concat(sn,"px"),cusor:c?"unset":"move"})}this.bindListener(ra,Ke);var Sa=ra.getBoundingClientRect();if(!Ae){var gi=Hd(t,Sa,u,this.get("canvas")),Mi=this.get("linkStyle");Mr=ge.addShape("path",{attrs:Xu({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:gi},Mi)})}if(s[Ke]=Xu(Xu({},s[Ke]||{}),{id:Ke,collapsed:Q,card:ra,link:Mr,x:vr,y:sn,cardBBox:Sa,content:mr||Ct,title:nn||lt,contentPlaceholder:Rn,titlePlaceholder:ca,isCanvas:Ae}),o.set("cardInfoMap",s),c)this.updateCardPositionsInConatainer(),this.updateLinks();else{var na=!isNaN(rt)&&!isNaN(st);if(!Pa&&!Ae&&!na){var pa=Ta.bottom,ei=pa===void 0?0:pa,oi=Ta.top;ue[ue.length-1].push({id:Ke,bbox:Sa}),Sa.top>ei-oi-Sa.height-16&&ue.push([]),this.set("rows",ue)}}this.updateCardSize(Ke);var Ci=this.get("onAnnotationChange");Ci==null||Ci(s[Ke],Pa?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var r=this.get("container"),n=this.get("containerCfg").position,a=r.getBoundingClientRect().width,o=getComputedStyle(r),s=Ll(o.paddingLeft)+Ll(o.paddingRight);a-=s,Object.values(t).forEach(function(u){var f=u.card,c=f.getBoundingClientRect().width;switch(n){case"right":Wa(f,{marginLeft:a?"".concat(a-c,"px"):"0px"});break;case"top":case"bottom":Wa(f,{marginLeft:"8px"});default:break}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var r=this.get("graph"),n=this.get("cardInfoMap");if(n){var a=n[t].collapsed,o=r.findById(t);if(o){var s=this.get("cardCfg").collapseType;s==="hide"&&!a?this.hideCard(t):this.toggleAnnotation(o,{collapsed:!a}),n[t]=Xu(Xu({},n[t]),{collapsed:!a})}}}},e.prototype.hideCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(!(!r||!r[t])){var n=r[t],a=n.card,o=n.link;Wa(a,{display:"none"}),o==null||o.hide();var s=this.get("onAnnotationChange");s(r[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=r[t],a=n.card,o=n.link,s=this.get("container");s.removeChild(a),o==null||o.remove(!0),delete r[t];var u=this.get("onAnnotationChange");u(n,"remove")}}},e.prototype.bindListener=function(t,r){var n=this;if(!this.destroyed){t.addEventListener("mousemove",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseEnterIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseout",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseLeaveIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseenter",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),l=c.findById(r);if(l){var x=n.get("itemHighlightState");c.setItemState(l,x,!0)}var m=f[r].link;if(m){var C=n.get("linkHighlightStyle")||{};m.attr(C)}}}),t.addEventListener("mouseleave",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),l=c.findById(r);if(l){var x=n.get("itemHighlightState");c.setItemState(l,x,!1)}var m=f[r].link;if(m){var C=n.get("linkHighlightStyle")||{};Object.keys(C).forEach(function(V){m.attr(V,void 0),m.attr(V,void 0)});var R=n.get("linkStyle");m.attr(R)}}}),t.addEventListener("click",function(u){var f=(n.get("cardCfg")||{}).onClickIcon;if(u.target.className==="g6-annotation-collapse"||u.target.className==="g6-annotation-expand"){var c=n.get("cardCfg").collapseType;c==="hide"?n.hideCard(r):n.handleExpandCollapseCard(r),f==null||f(u,r,u.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(u.target.className==="g6-annotation-close"){var l=n.get("cardCfg").closeType;l==="remove"?n.removeCard(r):n.hideCard(r),f==null||f(u,r,"close")}});var a=this.get("editable");a&&t.addEventListener("dblclick",function(u){var f=n.get("cardInfoMap"),c=(n.get("cardCfg")||{}).maxTitleLength,l=c===void 0?20:c;if(f){var x=u.target,m=x.className;if(!(m!=="g6-annotation-title"&&m!=="g6-annotation-content")){var C=m==="g6-annotation-title"?x.getBoundingClientRect():x.parentNode.getBoundingClientRect(),R=C.width,V=C.height,Q=getComputedStyle(x),rt=m==="g6-annotation-title"?"input":"textarea",st=Ji("<".concat(rt,' class="').concat(m,'-input" type="textarea" style="width:').concat(R,"px; height: ").concat(V,'px; min-width: 16px;"/>')),lt=Ji('<div class="'.concat(m,'-input-wrapper" style="width: ').concat(R,"px; height: ").concat(V,"px; min-width: 16px; margin-right: ").concat(Q.marginRight,'" />'));lt.appendChild(st),x.parentNode.replaceChild(lt,x);var Ct=f[r],At=Ct.contentPlaceholder,Nt=Ct.titlePlaceholder,Kt=Ct.content,ge=Ct.title,ue=Kt;m==="g6-annotation-title"?(st.name="title",st.maxLength=l,ue=ge):st.name="content",ue?(st.innerHTML=x.innerHTML,st.value=x.innerHTML):st.placeholder=m==="g6-annotation-title"?Nt:At,st.focus(),st.addEventListener("blur",function(Ae){st.value&&(x.innerHTML=st.value,Ct[st.name||"title"]=st.value),lt.parentNode.replaceChild(x,lt),n.updateCardSize(r);var Ke=n.get("onAnnotationChange");Ke==null||Ke(Ct,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(u){var f=u.target.className;if(!o.includes(f)){var c=t.style;n.set("dragging",{card:t,x:u.clientX,y:u.clientY,left:Ll(c.left),top:Ll(c.top)})}}),t.addEventListener("drag",function(u){u.preventDefault();var f=n.get("cardInfoMap");if(f){var c=u.clientX,l=u.clientY,x=n.get("dragging");if(!(isNaN(c)||isNaN(l)||!x)){var m=x.x,C=x.y,R=x.left,V=x.top,Q=x.card,rt=c-m,st=l-C;R+=rt,V+=st;var lt=n.get("graph"),Ct=lt.getPointByCanvas(0,0),At=lt.getPointByCanvas(lt.getWidth(),lt.getHeight()),Nt=lt.getClientByPoint(Ct.x,Ct.y),Kt=Nt.x,ge=Nt.y,ue=lt.getClientByPoint(At.x,At.y),Ae=ue.x,Ke=ue.y,Gr=Q.getBoundingClientRect(),wr=Gr.right-Gr.left,Mr=Gr.bottom-Gr.top;(R>Ae-Kt-wr&&rt>0||R<0&&rt<0)&&(R-=rt),(V>Ke-ge-Mr&&st>0||V<0&&st<0)&&(V-=st),Wa(Q,{left:"".concat(R,"px"),top:"".concat(V,"px"),visibility:"hidden"}),m=c,C=l;var vr=(f[r]||{}).link;if(vr){var sn=lt.findById(r);vr.attr("path",Hd(sn,Gr,lt,n.get("canvas")))}n.set("dragging",{x:m,y:C,left:R,top:V,card:Q})}}});var s=function(f){var c=n.get("cardInfoMap");if(c){var l=n.get("dragging");if(l){var x=l.left,m=l.top,C=l.card;c[r].x=x,c[r].y=m,Wa(C,{visibility:"visible"}),n.set("dragging",!1);var R=n.get("rows");R==null||R.forEach(function(Q){for(var rt=Q.length-1;rt>=0;rt--)Q[rt].id===r&&Q.splice(rt,1)});var V=n.get("onAnnotationChange");V==null||V(c[r],"update")}}};t.addEventListener("dragend",s)}},e.prototype.updateCardSize=function(t){var r=this.get("cardInfoMap");if(r){var n=r[t].card,a=n.getBoundingClientRect().width,o=n.getElementsByClassName("g6-annotation-title")[0];if(o){var s=getComputedStyle(o),u=Ll(s.marginLeft),f=o.getBoundingClientRect().width;Wa(o,{marginRight:"".concat(a-u-24-16-f,"px")})}}},e.prototype.updateLink=function(t){var r=t.item;if(r){var n=this.get("cardInfoMap");if(n){var a=this.get("canvas"),o=this.get("graph"),s=r.getID(),u=n[s]||{},f=u.link,c=u.card;if(f){var l=Hd(r,c.getBoundingClientRect(),o,a);f.attr("path",l)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=n.findById(o);t.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var t=this,r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=a.card,u=a.isCanvas;if(!(!s||u||s.style.display==="none")){var f=n.findById(o);f&&f.isVisible()?t.toggleAnnotation(f):t.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var r=t.item,n=t.visible;if(!(!r||r.destroyed)){var a=this.get("cardInfoMap");if(a){var o=r.getID();a[o]&&(n||this.hideCard(o))}}},e.prototype.saveData=function(t){t===void 0&&(t=!1);var r=this.get("cardInfoMap");if(r){var n=this.get("graph"),a=this.get("getTitle"),o=this.get("getContent"),s=[];return Object.values(r).forEach(function(u){var f=u.title,c=u.content,l=u.x,x=u.y,m=u.id,C=u.collapsed,R=u.card;if(!(R&&R.style.display==="none"&&!t)){var V=n.findById(m)||n.get("canvas");s.push({id:m,x:l,y:x,collapsed:C,title:f||(a==null?void 0:a(V)),content:c||(o==null?void 0:o(V)),visible:R&&R.style.display!=="none"})}}),s}},e.prototype.readData=function(t){var r=this,n=this.get("graph");t.forEach(function(a){var o=a.id,s=a.x,u=a.y,f=a.title,c=a.content,l=a.collapsed,x=a.visible,m=n.findById(o);if(!m&&o===Wp&&(m=n.get("canvas")),!m){var C=r.get("cardInfoMap")||{};C[o]=a,r.set("cardInfoMap",C);return}r.toggleAnnotation(m,{x:s,y:u,title:f,content:c,collapsed:l}),x||r.hideCard(o)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var r=this.get("container");Object.values(t).forEach(function(n){var a=n.card,o=n.link;r.removeChild(a),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("graph");!r||r.destroyed||(this.get("containerCfg")&&r.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(hu),T2=A2,I2=function(e,t){var r,n,a,o=1/0;Object.keys(e).forEach(function(f){var c=e[f];Object.keys(t).forEach(function(l){var x=t[l],m=c.x-x.x,C=c.y-x.y,R=m*m+C*C;o>R&&(o=R,r=c,n=x,a=[f,l])})});var s=20,u=zs.getControlPoint(r,n,.5,s);return[["M",r.x,r.y],["Q",u.x,u.y,n.x,n.y]]},Hd=function(e,t,r,n){var a,o,s=e.getType();if(s==="edge")o=[e.getKeyShape().getPoint(.5)];else{var u=(a=e.getKeyShape)===null||a===void 0?void 0:a.call(e).getBBox(),f=u.minX,c=u.minY,l=u.maxX,x=u.maxY,m=e.getModel(),C=m.x,R=m.y;f+=C,c+=R,l+=C,x+=R,o={left:{x:f,y:(c+x)/2},right:{x:l,y:(c+x)/2},top:{x:(f+l)/2,y:c},bottom:{x:(f+l)/2,y:x}}}Object.keys(o).forEach(function(ge){var ue=o[ge],Ae=ue.x,Ke=ue.y,Gr=r.getClientByPoint(Ae,Ke);o[ge]=n.getPointByClient(Gr.x,Gr.y)});var V=t.top,Q=V===void 0?0:V,rt=t.left,st=rt===void 0?0:rt,lt=t.right,Ct=lt===void 0?0:lt,At=t.bottom,Nt=At===void 0?0:At,Kt={left:n.getPointByClient(st,(Q+Nt)/2),right:n.getPointByClient(Ct,(Q+Nt)/2),top:n.getPointByClient((st+Ct)/2,Q),bottom:n.getPointByClient((st+Ct)/2,Nt)};return I2(o,Kt)},Ll=function(e){return Number(e.replace(/\s+|px/gi,""))||0},O2={PluginBase:hu,Menu:Wb,Grid:Fb,Minimap:Zb,Bundling:Jb,ToolBar:oE,Tooltip:fE,Fisheye:rE,TimeBar:s2,ImageMinimap:h2,EdgeFilterLens:p2,SnapLine:E2,Legend:M2,Annotation:T2},L2=O2,us=L2;uc("circle",{options:{size:Ln.defaultNode.size,style:{x:0,y:0,stroke:Ln.defaultNode.style.stroke,fill:Ln.defaultNode.style.fill,lineWidth:Ln.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ln.nodeLabel.style.fill,fontSize:Ln.nodeLabel.style.fontSize,fontFamily:Ln.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ln.defaultNode.linkPoints.size,lineWidth:Ln.defaultNode.linkPoints.lineWidth,fill:Ln.defaultNode.linkPoints.fill,stroke:Ln.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,K.__assign)({},Ln.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,p.deepMix)({},n,e.icon),s="".concat(this.type,"-keyShape"),u=t.addShape("circle",{attrs:a,className:s,name:s,draggable:!0});t.shapeMap[s]=u;var f=o.width,c=o.height,l=o.show,x=o.text;if(l){var m="".concat(this.type,"-icon");x?t.shapeMap[m]=t.addShape("text",{attrs:(0,K.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:m,name:m,draggable:!0}):t.shapeMap[m]=t.addShape("image",{attrs:(0,K.__assign)({x:-f/2,y:-c/2},o),className:m,name:m,draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints;if(r){var n=r||{},a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,K.__rest)(n,["top","left","right","bottom","size","r"]),x=this.getSize(e),m=x[0]/2;if(o){var C="link-point-left";t.shapeMap[C]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:-m,y:0,r:f/2||c||5}),className:C,name:C,isAnchorPoint:!0})}if(s){var R="link-point-right";t.shapeMap[R]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:m,y:0,r:f/2||c||5}),className:R,name:R,isAnchorPoint:!0})}if(a){var V="link-point-top";t.shapeMap[V]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:0,y:-m,r:f/2||c||5}),className:V,name:V,isAnchorPoint:!0})}if(u){var Q="link-point-bottom";t.shapeMap[Q]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:0,y:m,r:f/2||c||5}),className:Q,name:Q,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,p.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,K.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=t.getContainer(),a=this.getSize(e),o=(0,K.__assign)({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(a[0])&&(o.r=a[0]/2),this.updateShape(e,t,o,!0,r),this.updateLinkPoints(e,n)}},"single-node"),uc("rect",{options:{size:[100,30],style:{radius:0,stroke:Ln.defaultNode.style.stroke,fill:Ln.defaultNode.style.fill,lineWidth:Ln.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ln.nodeLabel.style.fill,fontSize:Ln.nodeLabel.style.fontSize,fontFamily:Ln.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ln.defaultNode.linkPoints.size,lineWidth:Ln.defaultNode.linkPoints.lineWidth,fill:Ln.defaultNode.linkPoints.fill,stroke:Ln.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,K.__assign)({},Ln.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(e,t),n},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,K.__rest)(n,["top","left","right","bottom","size","r"]),x=this.getSize(e),m=x[0],C=x[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:-m/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:m/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:0,y:-C/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:0,y:C/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,p.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,K.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,p.mix)({},a,s.attr(),u);f=(0,p.mix)(f,e.style),this.updateShape(e,t,f,!1,r),this.updateLinkPoints(e,n)}},"single-node"),uc("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:Ln.defaultNode.style.stroke,fill:Ln.defaultNode.style.fill,lineWidth:Ln.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ln.nodeLabel.style.fill,fontSize:Ln.nodeLabel.style.fontSize,fontFamily:Ln.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ln.defaultNode.linkPoints.size,lineWidth:Ln.defaultNode.linkPoints.lineWidth,fill:Ln.defaultNode.linkPoints.fill,stroke:Ln.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,K.__assign)({},Ln.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,K.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,K.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,K.__rest)(n,["top","left","right","bottom","size","r"]),x=this.getSize(e),m=x[0]/2,C=x[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:-m,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:m,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:0,y:-C,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:0,y:C,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,p.mix)({},t,r),a=this.getSize(e),o=a[0]/2,s=a[1]/2,u=(0,K.__assign)({x:0,y:0,rx:o,ry:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s={stroke:e.color,rx:o[0]/2,ry:o[1]/2},u=t.get("keyShape"),f=(0,p.mix)({},a,u.attr(),s);f=(0,p.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),uc("diamond",{options:{size:[80,80],style:{stroke:Ln.defaultNode.style.stroke,fill:Ln.defaultNode.style.fill,lineWidth:Ln.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ln.nodeLabel.style.fill,fontSize:Ln.nodeLabel.style.fontSize,fontFamily:Ln.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ln.defaultNode.linkPoints.size,lineWidth:Ln.defaultNode.linkPoints.lineWidth,fill:Ln.defaultNode.linkPoints.fill,stroke:Ln.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,K.__assign)({},Ln.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,K.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,K.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,K.__rest)(n,["top","left","right","bottom","size","r"]),x=this.getSize(e),m=x[0],C=x[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:-m/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:m/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:0,y:-C/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:0,y:C/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),r=t[0],n=t[1],a=[["M",0,-n/2],["L",r/2,0],["L",0,n/2],["L",-r/2,0],["Z"]];return a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,p.mix)({},t,r),a=this.getPath(e),o=(0,K.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,p.mix)({},a,u.attr(),s);f=(0,p.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),uc("triangle",{options:{size:40,direction:"up",style:{stroke:Ln.defaultNode.style.stroke,fill:Ln.defaultNode.style.fill,lineWidth:Ln.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ln.nodeLabel.style.fill,fontSize:Ln.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ln.defaultNode.linkPoints.size,lineWidth:Ln.defaultNode.linkPoints.lineWidth,fill:Ln.defaultNode.linkPoints.fill,stroke:Ln.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,K.__assign)({},Ln.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.icon,a=n===void 0?{}:n,o=r.direction,s=this.getShapeStyle(e),u=e.direction||o,f=t.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=a.width,l=a.height,x=a.show,m=a.offset,C=a.text;if(x)if(C)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,K.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var R=-c/2,V=-l/2;(u==="up"||u==="down")&&(V+=m),(u==="left"||u==="right")&&(R+=m),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,K.__assign)({x:R,y:V},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),f},drawLinkPoints:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.linkPoints,a=n===void 0?{}:n,o=r.direction,s=e.direction||o,u=a.top,f=a.left,c=a.right,l=a.bottom,x=a.size,m=a.r,C=(0,K.__rest)(a,["top","left","right","bottom","size","r"]),R=this.getSize(e),V=R[0];if(f){var Q=null,rt=V*Math.sin(1/3*Math.PI),st=V*Math.sin(1/3*Math.PI);s==="up"?Q=[-st,rt]:s==="down"?Q=[-st,-rt]:s==="left"&&(Q=[-st,st-rt]),Q&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},C),{x:Q[0],y:Q[1],r:x/2||m||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var lt=null,rt=V*Math.sin(1/3*Math.PI),st=V*Math.sin(1/3*Math.PI);s==="up"?lt=[st,rt]:s==="down"?lt=[st,-rt]:s==="right"&&(lt=[st,st-rt]),lt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},C),{x:lt[0],y:lt[1],r:x/2||m||5}),className:"link-point-right",name:"link-point-right"}))}if(u){var Ct=null,rt=V*Math.sin(1/3*Math.PI),st=V*Math.sin(1/3*Math.PI);s==="up"?Ct=[st-rt,-rt]:s==="left"?Ct=[st,-rt]:s==="right"&&(Ct=[-st,-rt]),Ct&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},C),{x:Ct[0],y:Ct[1],r:x/2||m||5}),className:"link-point-top",name:"link-point-top"}))}if(l){var At=null,rt=V*Math.sin(1/3*Math.PI),st=V*Math.sin(1/3*Math.PI);s==="down"?At=[-st+rt,rt]:s==="left"?At=[st,rt]:s==="right"&&(At=[-st,rt]),At&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},C),{x:At[0],y:At[1],r:x/2||m||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,r=e.direction||t,n=this.getSize(e),a=n[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),u=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return r==="down"?u=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:r==="left"?u=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:r==="right"&&(u=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),u},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,p.mix)({},t,r),a=this.getPath(e),o=(0,K.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,p.mix)({},a,u.attr(),s);f=(0,p.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}),n=r.linkPoints,a=r.direction,o=e.direction||a,s=t.shapeMap["link-point-left"]||t.find(function(vr){return vr.get("className")==="link-point-left"}),u=t.shapeMap["link-point-right"]||t.find(function(vr){return vr.get("className")==="link-point-right"}),f=t.shapeMap["link-point-top"]||t.find(function(vr){return vr.get("className")==="link-point-top"}),c=t.shapeMap["link-point-bottom"]||t.find(function(vr){return vr.get("className")==="link-point-bottom"}),l=n,x=s||u||f||c;x&&(l=x.attr());var m=(0,p.mix)({},l,e.linkPoints),C=m.fill,R=m.stroke,V=m.lineWidth,Q=m.size/2;Q||(Q=m.r);var rt=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},st=rt.left,lt=rt.right,Ct=rt.top,At=rt.bottom,Nt=this.getSize(e),Kt=Nt[0],ge={r:Q,fill:C,stroke:R,lineWidth:V},ue=null,Ae=Kt*Math.sin(1/3*Math.PI),Ke=Kt*Math.sin(1/3*Math.PI);o==="up"?ue=[-Ke,Ae]:o==="down"?ue=[-Ke,-Ae]:o==="left"&&(ue=[-Ke,Ke-Ae]),ue&&(s?!st&&st!==void 0?(s.remove(),delete t.shapeMap["link-point-left"]):s.attr((0,K.__assign)((0,K.__assign)({},ge),{x:ue[0],y:ue[1]})):st&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},ge),{x:ue[0],y:ue[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var Gr=null;o==="up"?Gr=[Ke,Ae]:o==="down"?Gr=[Ke,-Ae]:o==="right"&&(Gr=[Ke,Ke-Ae]),Gr&&(u?!lt&&lt!==void 0?(u.remove(),delete t.shapeMap["link-point-right"]):u.attr((0,K.__assign)((0,K.__assign)({},ge),{x:Gr[0],y:Gr[1]})):lt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},ge),{x:Gr[0],y:Gr[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var wr=null;o==="up"?wr=[Ke-Ae,-Ae]:o==="left"?wr=[Ke,-Ae]:o==="right"&&(wr=[-Ke,-Ae]),wr&&(f?!Ct&&Ct!==void 0?(f.remove(),delete t.shapeMap["link-point-top"]):f.attr((0,K.__assign)((0,K.__assign)({},ge),{x:wr[0],y:wr[1]})):Ct&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},ge),{x:wr[0],y:wr[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var Mr=null;o==="down"?Mr=[-Ke+Ae,Ae]:o==="left"?Mr=[Ke,Ae]:o==="right"&&(Mr=[-Ke,Ae]),Mr&&(c?!At&&At!==void 0?(c.remove(),delete t.shapeMap["link-point-bottom"]):c.attr((0,K.__assign)((0,K.__assign)({},ge),{x:Mr[0],y:Mr[1]})):At&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},ge),{x:Mr[0],y:Mr[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),uc("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:Ln.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:Ln.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:Ln.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).preRect,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=this.getSize(e),s=o[0],u=o[1],f=t.addShape("rect",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=n.show,l=(0,K.__rest)(n,["show"]);return c&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:(0,K.__assign)({x:-s/2,y:-u/2,height:u},l),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),f},drawLogoIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).logoIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,x=n.text,m=(0,K.__rest)(n,["width","height","x","y","offset","text"]);x?t.shapeMap["rect-logo-icon"]=t.addShape("text",{attrs:(0,K.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},m),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.shapeMap["rect-logo-icon"]=t.addShape("image",{attrs:(0,K.__assign)((0,K.__assign)({},m),{x:f||-o/2+s+l,y:c||-u/2,width:s,height:u}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).stateIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,x=n.text,m=(0,K.__rest)(n,["width","height","x","y","offset","text"]);x?t.shapeMap["rect-state-icon"]=t.addShape("text",{attrs:(0,K.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},m),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.shapeMap["rect-state-icon"]=t.addShape("image",{attrs:(0,K.__assign)((0,K.__assign)({},m),{x:f||o/2-s+l,y:c||-u/2,width:s,height:u}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,K.__rest)(n,["top","left","right","bottom","size","r"]),x=this.getSize(e),m=x[0],C=x[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:-m/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:m/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:0,y:-C/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},l),{x:0,y:C/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var r=this.getOptions(e),n=r.labelCfg,a=n===void 0?{}:n,o=r.logoIcon,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],x=null,m=s.show,C=s.width,R=-l/2+a.offset;m&&(R=-l/2+C+a.offset);var V=a.style,Q=f.style,rt=f.paddingTop;return(0,p.isString)(e.description)?(x=t.addShape("text",{attrs:(0,K.__assign)((0,K.__assign)({},V),{x:R,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=x,t.shapeMap["rect-description"]=t.addShape("text",{attrs:(0,K.__assign)((0,K.__assign)({},Q),{x:R,y:17+(rt||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(x=t.addShape("text",{attrs:(0,K.__assign)((0,K.__assign)({},V),{x:R,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=x),x},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,p.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,K.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.style,a=n===void 0?{}:n,o=r.labelCfg,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],x=c[1],m=t.get("keyShape");m.attr((0,K.__assign)((0,K.__assign)({},a),{x:-l/2,y:-x/2,width:l,height:x}));var C=t.getContainer(),R=C.shapeMap["rect-logo-icon"]||C.find(function(ra){return ra.get("className")==="rect-logo-icon"}),V=R?R.attr():{},Q=(0,p.mix)({},V,e.logoIcon),rt=Q.width;rt===void 0&&(rt=this.options.logoIcon.width);var st=e.logoIcon?e.logoIcon.show:void 0,lt=s.offset,Ct=-l/2+rt+lt;!st&&st!==void 0&&(Ct=-l/2+lt);var At=C.shapeMap["node-label"]||C.find(function(ra){return ra.get("className")==="node-label"}),Nt=C.shapeMap["rect-description"]||C.find(function(ra){return ra.get("className")==="rect-description"});if(e.label)if(!At)C.shapeMap["node-label"]=C.addShape("text",{attrs:(0,K.__assign)((0,K.__assign)({},s.style),{x:Ct,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var Kt=e.labelCfg?e.labelCfg.style:{},ge=(0,p.mix)({},At.attr(),Kt);e.label&&(ge.text=e.label),ge.x=Ct,(0,p.isString)(e.description)&&(ge.y=-5),Nt&&(Nt.resetMatrix(),Nt.attr({x:Ct})),At.resetMatrix(),At.attr(ge)}if((0,p.isString)(e.description)){var ue=f.paddingTop;if(!Nt)C.shapeMap["rect-description"]=C.addShape("text",{attrs:(0,K.__assign)((0,K.__assign)({},f.style),{x:Ct,y:17+(ue||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var Kt=e.descriptionCfg?e.descriptionCfg.style:{},Ae=(0,p.mix)({},Nt.attr(),Kt);(0,p.isString)(e.description)&&(Ae.text=e.description),Ae.x=Ct,Nt.resetMatrix(),Nt.attr((0,K.__assign)((0,K.__assign)({},Ae),{y:17+(ue||0)}))}}var Ke=C.shapeMap["pre-rect"]||C.find(function(ra){return ra.get("className")==="pre-rect"});if(Ke&&!Ke.destroyed){var Gr=(0,p.mix)({},Ke.attr(),e.preRect);Ke.attr((0,K.__assign)((0,K.__assign)({},Gr),{x:-l/2,y:-x/2,height:x}))}if(R&&!R.destroyed)if(!st&&st!==void 0)R.remove(),delete C.shapeMap["pre-rect"];else{var wr=Q.width,Mr=Q.height,vr=Q.x,sn=Q.y,nn=Q.offset,mr=(0,K.__rest)(Q,["width","height","x","y","offset"]);R.attr((0,K.__assign)((0,K.__assign)({},mr),{x:vr||-l/2+wr+nn,y:sn||-Mr/2,width:wr,height:Mr}))}else st&&this.drawLogoIcon(e,C);var Dr=C.shapeMap["rect-state-icon"]||C.find(function(ra){return ra.get("className")==="rect-state-icon"}),qr=Dr?Dr.attr():{},un=(0,p.mix)({},qr,e.stateIcon);if(Dr){!un.show&&un.show!==void 0&&(Dr.remove(),delete C.shapeMap["rect-state-icon"]);var Dn=un.width,Mr=un.height,vr=un.x,sn=un.y,Rn=un.offset,ca=(0,K.__rest)(un,["width","height","x","y","offset"]);Dr.attr((0,K.__assign)((0,K.__assign)({},ca),{x:vr||l/2-Dn+Rn,y:sn||-Mr/2,width:Dn,height:Mr}))}else un.show&&this.drawStateIcon(e,C);this.updateLinkPoints(e,C)},getOptions:function(e,t){return t==="move"?e:(0,p.deepMix)({},this.options,this.getCustomConfig(e)||{},e)}},"single-node"),uc("star",{options:{size:60,style:{stroke:Ln.defaultNode.style.stroke,fill:Ln.defaultNode.style.fill,lineWidth:Ln.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ln.nodeLabel.style.fill,fontSize:Ln.nodeLabel.style.fontSize,fontFamily:Ln.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ln.defaultNode.linkPoints.size,lineWidth:Ln.defaultNode.linkPoints.lineWidth,fill:Ln.defaultNode.linkPoints.fill,stroke:Ln.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,K.__assign)({},Ln.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,K.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,K.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.leftBottom,f=n.rightBottom,c=n.size,l=n.r,x=(0,K.__rest)(n,["top","left","right","leftBottom","rightBottom","size","r"]),m=this.getSize(e),C=m[0];if(s){var R=Math.cos(.1*Math.PI)*C,V=Math.sin((18+72*0)/180*Math.PI)*C;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},x),{x:R,y:-V,r:c/2||l||5}),className:"link-point-right",name:"link-point-right"})}if(a){var R=Math.cos(.5*Math.PI)*C,V=Math.sin((18+72*1)/180*Math.PI)*C;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},x),{x:R,y:-V,r:c/2||l||5}),className:"link-point-top",name:"link-point-top"})}if(o){var R=Math.cos(.9*Math.PI)*C,V=Math.sin((18+72*2)/180*Math.PI)*C;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},x),{x:R,y:-V,r:c/2||l||5}),className:"link-point-left",name:"link-point-left"})}if(u){var R=Math.cos(1.3*Math.PI)*C,V=Math.sin((18+72*3)/180*Math.PI)*C;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},x),{x:R,y:-V,r:c/2||l||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(f){var R=Math.cos(1.7*Math.PI)*C,V=Math.sin((18+72*4)/180*Math.PI)*C;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},x),{x:R,y:-V,r:c/2||l||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var t=this.getSize(e),r=t[0],n=r*3/8,a=e.innerR||n;return zs.getStarPath(r,a)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,p.mix)({},t,r),a=this.getPath(e),o=(0,K.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,p.mix)({},a,u.attr(),s);f=(0,p.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Ae){return Ae.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Ae){return Ae.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Ae){return Ae.get("className")==="link-point-top"}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(Ae){return Ae.get("className")==="link-point-left-bottom"}),u=t.shapeMap["link-point-left-bottom"]||t.find(function(Ae){return Ae.get("className")==="link-point-right-bottom"}),f=r,c=n||a||o||s||u;c&&(f=c.attr());var l=(0,p.mix)({},f,e.linkPoints),x=l.fill,m=l.stroke,C=l.lineWidth,R=l.size/2;R||(R=l.r);var V=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},Q=V.left,rt=V.right,st=V.top,lt=V.leftBottom,Ct=V.rightBottom,At=this.getSize(e),Nt=At[0],Kt={r:R,fill:x,stroke:m,lineWidth:C},ge=Math.cos((18+72*0)/180*Math.PI)*Nt,ue=Math.sin((18+72*0)/180*Math.PI)*Nt;a?!rt&&rt!==void 0?(a.remove(),delete t.shapeMap["link-point-right"]):a.attr((0,K.__assign)((0,K.__assign)({},Kt),{x:ge,y:-ue})):rt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},Kt),{x:ge,y:-ue}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),ge=Math.cos((18+72*1)/180*Math.PI)*Nt,ue=Math.sin((18+72*1)/180*Math.PI)*Nt,o?!st&&st!==void 0?(o.remove(),delete t.shapeMap["link-point-top"]):o.attr((0,K.__assign)((0,K.__assign)({},Kt),{x:ge,y:-ue})):st&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},Kt),{x:ge,y:-ue}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),ge=Math.cos((18+72*2)/180*Math.PI)*Nt,ue=Math.sin((18+72*2)/180*Math.PI)*Nt,n?!Q&&Q!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,K.__assign)((0,K.__assign)({},Kt),{x:ge,y:-ue})):Q&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},Kt),{x:ge,y:-ue}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),ge=Math.cos((18+72*3)/180*Math.PI)*Nt,ue=Math.sin((18+72*3)/180*Math.PI)*Nt,s?!lt&&lt!==void 0?(s.remove(),delete t.shapeMap["link-point-left-bottom"]):s.attr((0,K.__assign)((0,K.__assign)({},Kt),{x:ge,y:-ue})):lt&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},Kt),{x:ge,y:-ue}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),ge=Math.cos((18+72*4)/180*Math.PI)*Nt,ue=Math.sin((18+72*4)/180*Math.PI)*Nt,u?!Ct&&Ct!==void 0?(u.remove(),delete t.shapeMap["link-point-right-bottom"]):u.attr((0,K.__assign)((0,K.__assign)({},Kt),{x:ge,y:-ue})):Ct&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,K.__assign)((0,K.__assign)({},Kt),{x:ge,y:-ue}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var Xp=zs.defaultSubjectColors,jh="fan-shape-";uc("donut",{options:{size:Ln.defaultNode.size,style:{x:0,y:0,stroke:Ln.defaultNode.style.stroke,fill:Ln.defaultNode.style.fill,lineWidth:Ln.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ln.nodeLabel.style.fill,fontSize:Ln.nodeLabel.style.fontSize,fontFamily:Ln.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ln.defaultNode.linkPoints.size,lineWidth:Ln.defaultNode.linkPoints.lineWidth,fill:Ln.defaultNode.linkPoints.fill,stroke:Ln.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,K.__assign)({},Ln.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,p.deepMix)({},n,e.icon),s=t.addShape("circle",{attrs:a,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=s;var u=o.width,f=o.height,c=o.show,l=o.text;return c&&(l?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,K.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,K.__assign)({x:-u/2,y:-f/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),D2(e,t,s),this.drawLinkPoints(e,t),s},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,K.__assign)({},r)),N2(e,t,o),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)}},"circle");var D2=function(e,t,r){var n=e.donutAttrs,a=n===void 0?{}:n,o=e.donutColorMap,s=o===void 0?{}:o,u=Object.keys(a).length;if(a&&u>1){var f=Yp(a,s),c=f.configs,l=f.totalValue;if(l){var x=Vp(r),m=x.lineWidth,C=x.arcR,R=[C,0],V=0;if(u===1){Kd(t,{arcR:C,arcBegin:R,beginAngle:V,config:c[0],fanIndex:0,lineWidth:m,totalValue:l,drawWhole:!0});return}for(var Q=0;Q<c.length;Q++){var rt=Kd(t,{arcR:C,arcBegin:R,beginAngle:V,config:c[Q],fanIndex:Q,lineWidth:m,totalValue:l});if(rt.shouldEnd)return;R=rt.arcBegin,V=rt.beginAngle}}}},Kd=function(e,t){var r=t.arcR,n=t.arcBegin,a=t.beginAngle,o=t.config,s=t.fanIndex,u=t.lineWidth,f=t.totalValue,c=t.drawWhole,l=c===void 0?!1:c,x=t.updateShape,m=x===void 0?void 0:x,C=o.value/f;if(C<.001)return{beginAngle:a,arcBegin:n,shape:void 0,shouldEnd:!1};var R,V,Q;if(l||C>.999)R=[r,1e-4],Q=1;else{var rt=C*Math.PI*2;V=a+rt,R=[r*Math.cos(V),-r*Math.sin(V)],Q=rt>Math.PI?1:0}var st={path:[["M",n[0],n[1]],["A",r,r,0,Q,0,R[0],R[1]]],stroke:o.color||(m==null?void 0:m.attr("stroke"))||Xp[s%Xp.length],lineWidth:u};return m?m.attr(st):e.shapeMap["".concat(jh).concat(s)]=e.addShape("path",{attrs:st,name:"".concat(jh).concat(s),draggable:!0}),{beginAngle:V,arcBegin:R,shape:e.shapeMap["".concat(jh).concat(s)],shouldEnd:l||C>.999}},N2=function(e,t,r){var n=e.donutAttrs,a=e.donutColorMap,o=a===void 0?{}:a,s={},u=t.getContainer();if(n){var f=Yp(n,o),c=f.configs,l=f.totalValue;if(l)for(var x=Vp(r),m=x.lineWidth,C=x.arcR,R=[C,0],V=0,Q=0;Q<c.length;Q++){var rt="".concat(jh).concat(Q),st=Kd(u,{arcR:C,arcBegin:R,beginAngle:V,config:c[Q],fanIndex:Q,lineWidth:m,totalValue:l,drawWhole:c.length===1,updateShape:u.shapeMap[rt]});if(st.shape&&(s[rt]=!0),st.shouldEnd)break;R=st.arcBegin,V=st.beginAngle}}var lt=Object.keys(u.shapeMap).filter(function(Ct){return Ct.includes(jh)});lt.forEach(function(Ct){s[Ct]||(u.shapeMap[Ct].remove(!0),delete u.shapeMap[Ct])})},Yp=function(e,t){var r=0,n=[];return Object.keys(e).forEach(function(a){var o=+e[a];isNaN(o)||(n.push({key:a,value:o,color:t[a]}),r+=o)}),{totalValue:r,configs:n}},Vp=function(e){var t=e.attr("r"),r=.6*t,n=(t+r)/2,a=t-r;return{lineWidth:a,arcR:n}},Dv=function(e){var t=e.x,r=e.y;return{x:t,y:r,centerX:t,centerY:r,minX:t,minY:r,maxX:t,maxY:r,height:0,width:0}},P2=function(e){e===void 0&&(e=[]);var t=[],r=[];e.forEach(function(u){t.push(u.x),r.push(u.y)});var n=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,r),s=Math.max.apply(Math,r);return{centerX:(n+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:n,minY:o,height:s-o,width:a-n}},TM=function(e,t){return Math.abs(e.centerX-t.centerX)*2<e.width+t.width&&Math.abs(e.centerY-t.centerY)*2<e.height+t.height},Zd=function(e){for(var t=[],r={},n=e.length,a=n-1;a>=0;a--){var o=e[a];o.id="".concat(o.x,"|||").concat(o.y),r[o.id]||(r[o.id]=o,t.push(o))}return t},jp=function(e){return Zd(e)},IM=function(e,t){return[e,{x:e.x,y:t.y},t]},Nv=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},k2=function(e,t){var r=Math.abs(e.x-t.centerX),n=Math.abs(e.y-t.centerY);return r===0&&n===0?0:r/t.width>n/t.height},$d=function(e,t,r){var n=k2(t,e);if(n===0){var a=e.centerX,o=e.centerY;return r.y<t.y?o=e.minY:r.x>t.x?a=e.maxX:r.x<t.x?a=e.minX:r.x===t.x&&(o=e.maxY),{x:a,y:o}}return n?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},Hp=function(e,t){var r=Math.min(e.minX,t.minX),n=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(r+a)/2,centerY:(n+o)/2,minX:r,minY:n,maxX:a,maxY:o,height:o-n,width:a-r}},qd=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},Pv=function(e,t){var r=e.x,n=e.y;return r<t.minX||r>t.maxX||n<t.minY||n>t.maxY},R2=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},B2=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},F2=function(e,t){return R2(e,t.x).concat(B2(e,t.y))},Hh=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},G2=function(e,t){var r=-2,n=0;return t.forEach(function(a){a&&(e.x===a.x&&(n+=r),e.y===a.y&&(n+=r))}),n},Kp=function(e,t,r,n,a){return Hh(e,t)+Hh(e,r)+G2(e,[t,r,n,a])},z2=function i(e,t,r,n,a){a===void 0&&(a=0),e.unshift(t[n]),r[n]&&r[n]!==n&&a<=100&&i(e,t,r,r[n],a+1)},OM=function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)},kv=function(e,t,r,n){var a=r.x-e.x,o=r.y-e.y,s=n.x-e.x,u=n.y-e.y,f=r.x-t.x,c=r.y-t.y,l=n.x-t.x,x=n.y-t.y,m=a*u-o*s,C=f*x-c*l,R=a*c-o*f,V=s*x-u*l;return m*C<=0&&R*V<=0},Qd=function(e,t,r){if(r.width||r.height){var n=qd(r),a=n[0],o=n[1],s=n[2],u=n[3];return kv(e,t,a,o)||kv(e,t,a,u)||kv(e,t,o,s)||kv(e,t,s,u)}return!1},U2=function(e,t,r,n){var a=[];return e.forEach(function(o){if(o!==t&&(o.x===t.x||o.y===t.y)){if(Qd(o,t,r)||Qd(o,t,n))return;a.push(o)}}),Zd(a)},W2=function(e,t,r,n,a,o,s){var u,f=[],c=(u={},u[t.id]=t,u),l={},x={},m={};x[t.id]=0,m[t.id]=Kp(t,r,t);var C=new qp;C.add({id:t.id,value:m[t.id]});var R={};e.forEach(function(Ct){R[Ct.id]=Ct});for(var V;Object.keys(c).length;){var Q=C.minId(!1);if(Q)V=c[Q];else break;if(V===r){var rt=[];return z2(rt,R,l,r.id),rt}delete c[V.id],C.remove(V.id),f.push(V);var st=U2(e,V,n,a),lt=function(At){At.forEach(function(Nt){if(f.indexOf(Nt)===-1){var Kt=Nt.id;c[Kt]||(c[Kt]=Nt);var ge=m[V.id]+Hh(V,Nt);if(x[Kt]&&ge>=x[Kt]){C.add({id:Kt,value:m[Kt]});return}l[Kt]=V.id,x[Kt]=ge,m[Kt]=x[Kt]+Kp(Nt,r,t,o,s),C.add({id:Kt,value:m[Kt]})}})};lt(st)}return[t,r]},X2=function(e,t,r){return!(e.x===t.x&&t.x===r.x||e.y===t.y&&t.y===r.y)},Y2=function(e,t,r,n){var a=Hh(e,t),o=Hh(r,t);a<n&&(n=a),o<n&&(n=o);var s={x:t.x-n/a*(t.x-e.x),y:t.y-n/a*(t.y-e.y)},u={x:t.x-n/o*(t.x-r.x),y:t.y-n/o*(t.y-r.y)};return[s,u]},Zp=function(e,t){var r=[],n=e[0];return r.push("M".concat(n.x," ").concat(n.y)),e.forEach(function(a,o){var s=e[o+1],u=e[o+2];if(s&&u)if(X2(a,s,u)){var f=Y2(a,s,u,t),c=f[0],l=f[1];r.push("L".concat(c.x," ").concat(c.y)),r.push("Q".concat(s.x," ").concat(s.y," ").concat(l.x," ").concat(l.y)),r.push("L".concat(l.x," ").concat(l.y))}else r.push("L".concat(s.x," ").concat(s.y));else s&&r.push("L".concat(s.x," ").concat(s.y))}),r.join("")},$p=function(e,t,r,n,a){var o,s;if(!r||!r.getType())o=Dv(e);else if(r.getType()==="combo"){var u=r.getKeyShape().getBBox();if(u){var f=r.getModel(),c=f.x,l=f.y;o={x:c,y:l,width:u.width,height:u.height,minX:u.minX+c,maxX:u.maxX+c,minY:u.minY+l,maxY:u.maxY+l},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=Dv(e)}else o=r&&r.getBBox();if(!n||!n.getType())s=Dv(t);else if(n.getType()==="combo"){var x=n.getKeyShape().getBBox();if(x){var m=n.getModel(),C=m.x,R=m.y;s={x:C,y:R,width:x.width,height:x.height,minX:x.minX+C,maxX:x.maxX+C,minY:x.minY+R,maxY:x.maxY+R},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=Dv(t)}else s=n&&n.getBBox();var V=Nv(o,a),Q=Nv(s,a),rt=$d(V,e,t),st=$d(Q,t,e),lt=P2([rt,st]),Ct=Hp(V,lt),At=Hp(Q,lt),Nt=[];Nt=Nt.concat(qd(Ct)).concat(qd(At));var Kt={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[lt,Ct,At].forEach(function(ue){Nt=Nt.concat(F2(ue,Kt).filter(function(Ae){return Pv(Ae,V)&&Pv(Ae,Q)}))}),[{x:rt.x,y:st.y},{x:st.x,y:rt.y}].forEach(function(ue){Pv(ue,V)&&Pv(ue,Q)&&Nt.push(ue)}),Nt.unshift(rt),Nt.push(st),Nt=Zd(Nt);var ge=W2(Nt,rt,st,o,s,e,t);return ge.unshift(e),ge.push(t),jp(ge)},V2=function(e){if(!(e!=null&&e.length))return e;for(var t=e[e.length-1],r={x:t.x,y:t.y},n=[t],a=[t],o=e.length-2;o>=0;o--){var s=e[o];if(s.x===r.x?n.push(s):(n=[s],r.x=s.x),s.y===r.y?a.push(s):(a=[s],r.y=s.y),n.length>2){var u=e.indexOf(n[1]);u>-1&&e.splice(u,1);continue}if(a.length>2){var u=e.indexOf(a[1]);u>-1&&e.splice(u,1)}}return e},qp=function(){function i(){this.arr=[],this.map={},this.arr=[],this.map={}}return i.prototype._innerAdd=function(e,t){for(var r=[0,t-1];r[1]-r[0]>1;){var n=Math.floor((r[0]+r[1])/2);if(this.arr[n].value>e.value)r[1]=n;else if(this.arr[n].value<e.value)r[0]=n;else{this.arr.splice(n,0,e),this.map[e.id]=!0;return}}this.arr.splice(r[1],0,e),this.map[e.id]=!0},i.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;if(!t){this.arr.push(e),this.map[e.id]=!0;return}if(this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)},i.prototype.remove=function(e){this.map[e]&&delete this.map[e]},i.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},i.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},i.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},i}(),j2=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},H2=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},K2=function(e,t){return[e,t]},Z2=function(e,t,r,n,a){return jp($p(e,t,r,n,a.offset))},$2={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:j2,fallbackRoute:Z2},LM={maxAllowedDirectionChange:Math.PI/4,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:H2,fallbackRoute:K2},vc=function(e,t){var r=Math.round(Math.abs(e/t)),n=e<0?-1:1;return r<0?0:n*r},q2=function(e,t,r){var n={};return e.forEach(function(a){if(a)for(var o=Nv(a.getBBox(),r),s=vc(o.minX,t);s<=vc(o.maxX,t);s+=1)for(var u=vc(o.minY,t);u<=vc(o.maxY,t);u+=1)n["".concat(s,"|||").concat(u)]=!0}),n},Jd=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r||n?Math.atan2(n,r):0},Qp=function(e,t){var r=Math.abs(e-t);return r>Math.PI?2*Math.PI-r:r},Jp=function(e,t,r){for(var n=1/0,a=0,o=t.length;a<o;a++){var s=r(e,t[a]);s<n&&(n=s)}return n},ty=function(e,t,r,n,a){var o=[];if(!r)return[e];var s=a.directions,u=a.offset,f=r.getBBox(),c=t.x>f.minX&&t.x<f.maxX&&t.y>f.minY&&t.y<f.maxY,l=Nv(f,u);for(var x in l)l[x]=vc(l[x],a.gridSize);if(c){for(var m=0,C=s;m<C.length;m++)for(var R=C[m],V=[[{x:l.minX,y:l.minY},{x:l.maxX,y:l.minY}],[{x:l.minX,y:l.minY},{x:l.minX,y:l.maxY}],[{x:l.maxX,y:l.minY},{x:l.maxX,y:l.maxY}],[{x:l.minX,y:l.maxY},{x:l.maxX,y:l.maxY}]],x=0;x<4;x++){var Q=V[x],rt=zs.getLineIntersect(e,{x:e.x+R.stepX*l.width,y:e.y+R.stepY*l.height},Q[0],Q[1]);rt&&!Qd(e,rt,f)&&(rt.id="".concat(rt.x,"|||").concat(rt.y),o.push(rt))}return o}var st=$d(l,e,n);return st.id="".concat(st.x,"|||").concat(st.y),[st]},tg=function(e,t,r,n){var a=Jd(e,t),o=r[e.id];if(!o){var s=Jd(n,e);return Qp(s,a)}var u=Jd({x:o.x,y:o.y},e);return Qp(u,a)},Q2=function(e,t,r,n,a,o,s){var u=[n],f=n,c=e.id,l=e.x,x=e.y,m={x:l,y:x,id:c};tg(m,o,t,r)&&(f={x:o.x===n.x?n.x:m.x*s,y:o.y===n.y?n.y:m.y*s},u.unshift(f));for(var C=t[c];C&&C.id!==c;){var R={x:l,y:x,id:c},V={x:C.x,y:C.y,id:C.id},Q=tg(V,R,t,r);Q&&(f={x:V.x===R.x?f.x:V.x*s,y:V.y===R.y?f.y:V.y*s},u.unshift(f)),c=V.id,l=V.x,x=V.y,C=t[c]}return u[0].x=l===r.x?a.x:f.x,u[0].y=x===r.y?a.y:f.y,u.unshift(a),u},J2=function(e,t,r,n,a){if(isNaN(e.x)||isNaN(t.x))return[];var o=(0,p.deepMix)($2,a);o.obstacles=o.obstacles||[];var s=o.penalties,u=o.gridSize,f=q2(o.obstacles.concat([r,n]),u,o.offset),c={x:vc(e.x,u),y:vc(e.y,u)},l={x:vc(t.x,u),y:vc(t.y,u)};e.id="".concat(c.x,"|||").concat(c.y),t.id="".concat(l.x,"|||").concat(l.y);var x=ty(c,e,r,l,o),m=ty(l,t,n,c,o);x.forEach(function(mr){delete f[mr.id]}),m.forEach(function(mr){delete f[mr.id]});for(var C={},R={},V={},Q={},rt={},st=new qp,lt=0;lt<x.length;lt++){var Ct=x[lt];C[Ct.id]=Ct,Q[Ct.id]=0,rt[Ct.id]=Jp(Ct,m,o.distFunc),st.add({id:Ct.id,value:rt[Ct.id]})}var At=o.maximumLoops,Nt,Kt,ge,ue,Ae,Ke,Gr=1/0,wr={};for(m.forEach(function(mr){wr["".concat(mr.x,"|||").concat(mr.y)]=!0}),Object.keys(C).forEach(function(mr){var Dr=C[mr].id;rt[Dr]<=Gr&&(Gr=rt[Dr],Nt=C[Dr])});Object.keys(C).length>0&&At>0;){var Mr=st.minId((At+1)%30===0);if(Mr)Nt=C[Mr];else break;if(wr["".concat(Nt.x,"|||").concat(Nt.y)])return Q2(Nt,V,c,t,e,l,u);delete C[Nt.id],st.remove(Nt.id),R[Nt.id]=!0;for(var lt=0;lt<o.directions.length;lt++){Kt=o.directions[lt];var vr="".concat(Math.round(Nt.x)+Kt.stepX,"|||").concat(Math.round(Nt.y)+Kt.stepY);if(ge={x:Nt.x+Kt.stepX,y:Nt.y+Kt.stepY,id:vr},!R[vr]&&(Ke=tg(Nt,ge,V,c),!(Ke>o.maxAllowedDirectionChange)&&!f[vr])){C[vr]||(C[vr]=ge);var sn=s[Ke];ue=o.distFunc(Nt,ge)+(isNaN(sn)?u:sn),Ae=Q[Nt.id]+ue;var nn=Q[vr];nn&&Ae>=nn||(V[vr]=Nt,Q[vr]=Ae,rt[vr]=Ae+Jp(ge,m,o.distFunc),st.add({id:vr,value:rt[vr]}))}}At-=1}return o.fallbackRoute(e,t,r,n,o)};Qg("polyline",{options:{color:Ln.defaultEdge.color,size:Ln.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:Ln.defaultEdge.style.stroke,lineAppendWidth:Ln.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Ln.edgeLabel.style.fill,fontSize:Ln.edgeLabel.style.fontSize,fontFamily:Ln.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,K.__assign)({},Ln.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e);r.radius===0&&delete r.radius;var n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return t.shapeMap["edge-shape"]=n,n},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,p.mix)({},t,r,e.style);e=this.getPathPoints(e),this.radius=n.radius,this.offset=n.offset;var a=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),u=[a];s&&(u=u.concat(s)),u.push(o);var f=e.sourceNode,c=e.targetNode,l=n.radius,x=this.options.routeCfg,m=(0,p.mix)({},x,e.routeCfg);m.offset=n.offset;var C=this.getPath(u,f,c,l,m,!s);((0,p.isArray)(C)&&C.length<=1||(0,p.isString)(C)&&C.indexOf("L")===-1)&&(C="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(C="M0 0, L0 0");var R=(0,p.mix)({},Ln.defaultEdge.style,n,{lineWidth:e.size,path:C});return R},updateShapeStyle:function(e,t){var r=t.getContainer();if(t.isVisible()){var n={stroke:e.color},a=r.shapeMap["edge-shape"]||r.find(function(lt){return lt.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,u=e.endPoint,f=this.getControlPoints(e),c=[s];f&&(c=c.concat(f)),c.push(u);var l=a.attr(),x=(0,p.mix)({},n,l,e.style),m=e.sourceNode,C=e.targetNode,R=x.radius,V=this.options.routeCfg,Q=(0,p.mix)({},V,e.routeCfg);Q.offset=x.offset;var rt=this.getPath(c,m,C,R,Q,!f);((0,p.isArray)(rt)&&rt.length<=1||(0,p.isString)(rt)&&rt.indexOf("L")===-1)&&(rt="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(rt="M0 0, L0 0"),l.endArrow&&x.endArrow===!1&&(e.style.endArrow={path:""}),l.startArrow&&x.startArrow===!1&&(e.style.startArrow={path:""});var st=(0,p.mix)(n,a.attr(),{lineWidth:o,path:rt},e.style);a&&a.attr(st)}},getPath:function(e,t,r,n,a,o){var s=a.offset,u=a.obstacles,f=a.simple;if(!s||e.length>2||o===!1){if(n)return Zp(e,n);var c=[];return(0,p.each)(e,function(C,R){R===0?c.push(["M",C.x,C.y]):c.push(["L",C.x,C.y])}),c}f!==!1&&!(u!=null&&u.length)&&(f=!0);var l=f?$p(e[e.length-1],e[0],r,t,s):J2(e[0],e[e.length-1],t,r,a);if(!l||!l.length)return"M0 0, L0 0";if(n){var x=Zp(l,n);return x}l=V2(l);var m=zs.pointsToPolygon(l);return m}},"single-edge");var ey=cc.cloneEvent,ry=cc.isNaN,ny=Math.abs,t_=10,e_=["shift","ctrl","alt","control"],r_={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,r=+e.clientX,n=+e.clientY;if(!(ry(r)||ry(n))){var a=r-t.x,o=n-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:r,y:n};var s=this.graph.get("width"),u=this.graph.get("height"),f=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,l=this.scalableRange;c<1&&c>-1&&(c=s*c,l=u*l),(f.minX<=s+c&&f.minX+a>s+c||f.maxX+c>=0&&f.maxX+c+a<0)&&(a=0),(f.minY<=u+l&&f.minY+o>u+l||f.maxY+l>=0&&f.maxY+l+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];n&&a||(e.preventDefault(),this.mousedown=!0,t.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,r=e.originalEvent;if(!(r&&e.name!=="touchstart"&&r.button!==0)&&!(e.name!=="touchstart"&&typeof window!="undefined"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(e,this)&&!t.keydown&&this.allowDrag(e)){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var n=this.graph,a=n.getEdges(),o=0,s=a.length;o<s;o++){var u=a[o].get("group").get("children");u&&u.forEach(function(st){st.set("ori-visibility",st.get("ori-visibility")||st.get("visible")),st.hide()})}for(var f=n.getNodes(),c=0,l=f.length;c<l;c++)for(var x=f[c].getContainer(),m=x.get("children"),C=0,R=m;C<R.length;C++){var V=R[C],Q=V.get("isKeyShape");Q||(V.set("ori-visibility",V.get("ori-visibility")||V.get("visible")),V.hide())}}if(typeof window!="undefined"){var rt=this;this.handleDOMContextMenu=function(st){return rt.onMouseUp(st)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){this.onMouseUp(e);return}e.preventDefault(),t.onDrag(e)},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=ey(e),!!this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(ny(this.origin.x-e.clientX)+ny(this.origin.y-e.clientY)<t_)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,r;this.mousedown=!1,this.dragstart=!1;var n=this.graph;if(!this.keydown){var a=n.getZoom(),o=n.get("modeController"),s=(r=(t=o==null?void 0:o.modes[o.mode])===null||t===void 0?void 0:t.filter(function(Nt){return Nt.type==="zoom-canvas"}))===null||r===void 0?void 0:r[0],u=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var f=n.getEdges(),c=0,l=f.length;c<l;c++){var x=f[c].get("group").get("children");x&&x.forEach(function(Nt){var Kt=Nt.get("ori-visibility");Nt.set("ori-visibility",void 0),Kt&&Nt.show()})}if(a>u)for(var m=n.getNodes(),C=0,R=m.length;C<R;C++)for(var V=m[C].getContainer(),Q=V.get("children"),rt=0,st=Q;rt<st.length;rt++){var lt=st[rt],Ct=lt.get("isKeyShape");if(!Ct){var At=lt.get("ori-visibility");lt.set("ori-visibility",void 0),At&&lt.show()}}}if(!this.dragging){this.origin=null;return}e=ey(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,n.emit("canvas:dragend",e),this.endDrag(),typeof window!="undefined"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=this,r=e.key;r&&(e_.indexOf(r.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,p.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,p.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},n_={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var t=e.getType();return t==="combo"},onTouchStart:function(e){if(e.item){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,t.onDragStart(e)}},onTouchMove:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){t.onDragEnd(e);return}e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},typeof window!="undefined"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var t,r;if(((r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag((0,K.__assign)((0,K.__assign)({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,!!this.shouldBegin((0,K.__assign)((0,K.__assign)({},e),this.mousedown),this)){var r=this.mousedown,n=r.item,a=r.target;if(!(!n||n.destroyed||n.hasLocked())){var o=n.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n),a){var s=a.get("isAnchorPoint");if(s)return}var u=this.graph;this.targets=[],this.targetCombo=null;var f=u.findAllByState("node",this.selectedState),c=n.get("id"),l=f.filter(function(m){var C=m.get("id");return c===C});if(l.length===0?this.targets.push(n):f.length>1?f.forEach(function(m){var C=m.hasLocked();C||t.targets.push(m)}):this.targets.push(n),this.graph.get("enabledStack")&&this.enableStack){var x=[];this.targets.forEach(function(m){var C=m.getModel(),R=C.x,V=C.y,Q=C.id;x.push({x:R,y:V,id:Q})}),this.set("beforeDragNodes",x)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(m){var C=m.getEdges();C.forEach(function(R){R.isVisible()&&(t.hidenEdge[R.getID()]=!0,R.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var r={};this.targets.map(function(n){t.update(n,e);var a=n.getModel().comboId;a&&(r[a]=t.graph.findById(a))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var t=this,r;if(this.mousedown=!1,this.dragstart=!1,typeof window!="undefined"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(r=this.cachedCaptureItems)===null||r===void 0||r.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(u){t.hidenEdge[u.getID()]&&u.show(),u.refresh()})}),this.hidenEdge={};var n=this.graph;if(n.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){a.before.nodes.push(o)}),this.targets.forEach(function(o){var s=o.getModel(),u=s.x,f=s.y,c=s.id;a.after.nodes.push({x:u,y:f,id:c})}),n.pushStack("update",(0,p.clone)(a))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(t))){var r=this.graph;if(this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)r.updateCombos();else{var n=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==n.id&&r.updateComboTree(a,n.id)}),r.updateCombo(t)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(r){var n=r.getModel();n.comboId&&t.updateComboTree(r)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var t=this,r=e.item,n=t.graph,a=r.getModel().comboId,o=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(a){var s=n.findById(a);t.comboActiveState&&n.setItemState(s,t.comboActiveState,!1),this.targets.map(function(u){var f=u.getModel();a!==f.comboId&&n.updateComboTree(u,a)}),n.updateCombo(s)}else this.targets.map(function(u){var f=u.getModel();f.comboId&&n.updateComboTree(u)});n.emit("dragnodeend",{items:this.targets,targetItem:r})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var r=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):t||this.targets.map(function(n){return r.update(n,e)}):this.targets.map(function(n){return r.update(n,e,t)}))},update:function(e,t,r){var n=this.origin,a=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:a.x||0,y:a.y||0});var s=t.x-n.x+this.point[o].x,u=t.y-n.y+this.point[o].y;r&&(s+=n.x-t.x,u+=n.y-t.y);var f={x:s,y:u};this.get("updateEdge")?this.graph.updateItem(e,f,!1):e.updatePosition(f)},debounceUpdate:(0,p.debounce)(function(i){var e=i.targets,t=i.graph,r=i.point,n=i.origin,a=i.evt,o=i.updateEdge,s=i.onlyChangeComboSize,u=i.updateParentCombos;e.map(function(f){var c=f.get("model"),l=f.get("id");r[l]||(r[l]={x:c.x||0,y:c.y||0});var x=a.x-n.x+r[l].x,m=a.y-n.y+r[l].y,C={x,y:m};o?t.updateItem(f,C,!1):f.updatePosition(C)}),s&&u(t,e)},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var x=e.x-this.origin.x+this.originPoint.minX,m=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x,y:m})}else{var r=t.get("group"),n=(0,p.deepMix)({},Cl.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),o=a.x,s=a.y,u=a.width,f=a.height,c=a.minX,l=a.minY;this.originPoint={x:o,y:s,width:u,height:f,minX:c,minY:l},this.delegateRect=r.addShape("rect",{attrs:(0,K.__assign)({width:u,height:f,x:o,y:s},n),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;t.length===0&&t.push(e.item);for(var r=1/0,n=-1/0,a=1/0,o=-1/0,s=0;s<t.length;s++){var u=t[s],f=u.getBBox(),c=f.minX,l=f.minY,x=f.maxX,m=f.maxY;c<r&&(r=c),l<a&&(a=l),x>n&&(n=x),m>o&&(o=m)}var C=Math.floor(r),R=Math.floor(a),V=Math.ceil(n)-Math.floor(r),Q=Math.ceil(o)-Math.floor(a);return{x:C,y:R,width:V,height:Q,minX:r,minY:a}},updateParentCombos:function(e,t){var r=e||this.graph,n=t||this.targets,a={};n==null||n.forEach(function(o){var s=o.getModel().comboId;s&&(a[s]=r.findById(s))}),Object.values(a).forEach(function(o){o&&r.updateCombo(o)})}},Rv=null,a_={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldClearStatusOnSecond:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.setAllItemStates(e)},clearOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this,r=this.shouldClearStatusOnSecond;r&&(Rv=null),this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:(0,p.throttle)(function(i,e){var t=i.item,r=e.graph;if(!(!r||r.destroyed)&&(e.item=t,!!e.shouldUpdate(i.item,{event:i,action:"activate"},e))){var n=e.shouldClearStatusOnSecond,a=t.getModel().id;if(Rv===a&&n){e.throttleClearActiveState(i,e),Rv=null;return}for(var o=e.activeState,s=e.inactiveState,u=r.getNodes(),f=r.getCombos(),c=r.getEdges(),l=r.get("vedges"),x=u.length,m=f.length,C=c.length,R=l.length,V=e.inactiveItems||{},Q=e.activeItems||{},rt=0;rt<x;rt++){var st=u[rt],lt=st.getID(),Ct=st.hasState("selected");e.resetSelected&&Ct&&r.setItemState(st,"selected",!1),Q[lt]&&(r.setItemState(st,o,!1),delete Q[lt]),s&&!V[lt]&&(r.setItemState(st,s,!0),V[lt]=st)}for(var rt=0;rt<m;rt++){var At=f[rt],Nt=At.getID(),Ct=At.hasState("selected");e.resetSelected&&Ct&&r.setItemState(At,"selected",!1),Q[Nt]&&(r.setItemState(At,o,!1),delete Q[Nt]),s&&!V[Nt]&&(r.setItemState(At,s,!0),V[Nt]=At)}for(var rt=0;rt<C;rt++){var Kt=c[rt],ge=Kt.getID();Q[ge]&&(r.setItemState(Kt,o,!1),delete Q[ge]),s&&!V[ge]&&(r.setItemState(Kt,s,!0),V[ge]=Kt)}for(var rt=0;rt<R;rt++){var ue=l[rt],Ae=ue.getID();Q[Ae]&&(r.setItemState(ue,o,!1),delete Q[Ae]),s&&!V[Ae]&&(r.setItemState(ue,s,!0),V[Ae]=ue)}if(t&&!t.destroyed){s&&(r.setItemState(t,s,!1),delete V[t.getID()]),Q[t.getID()]||(r.setItemState(t,o,!0),Q[t.getID()]=t);for(var Ke=t.getEdges(),Gr=Ke.length,rt=0;rt<Gr;rt++){var Kt=Ke[rt],ge=Kt.getID(),wr=void 0;Kt.getSource()===t?wr=Kt.getTarget():wr=Kt.getSource();var Mr=wr.getID();s&&V[Mr]&&(r.setItemState(wr,s,!1),delete V[Mr]),Q[Mr]||(r.setItemState(wr,o,!0),Q[Mr]=wr),V[ge]&&(r.setItemState(Kt,s,!1),delete V[ge]),Q[ge]||(r.setItemState(Kt,o,!0),Q[ge]=Kt),Kt.toFront()}}e.activeItems=Q,e.inactiveItems=V,n&&(Rv=t.getModel().id),r.emit("afteractivaterelations",{item:i.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,p.throttle)(function(i,e){var t=e.get("graph");if(!(!t||t.destroyed)&&e.shouldUpdate(i.item,{event:i,action:"deactivate"},e)){var r=e.activeState,n=e.inactiveState,a=e.activeItems||{},o=e.inactiveItems||{};Object.values(a).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,r)}),Object.values(o).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,n)}),e.activeItems={},e.inactiveItems={},t.emit("afteractivaterelations",{item:i.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})},Bv=Math.min,ay=Math.max,iy=Math.abs,oy="shift",i_=["drag","shift","ctrl","alt","control"],o_={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:oy,includeEdges:!0,includeCombos:!1,selectOnCombo:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return i_.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=oy,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,r=this.brush,n=this.selectOnCombo,a=(t==null?void 0:t.getType())==="combo";a&&!n||!a&&t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(e))},onMouseUp:function(e){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this,t=e.graph,r=e.selectedState,n=t.findAllByState("node",r),a=t.findAllByState("edge",r),o=t.findAllByState("combo",r);n.forEach(function(s){return t.setItemState(s,r,!1)}),a.forEach(function(s){return t.setItemState(s,r,!1)}),o.forEach(function(s){return t.setItemState(s,r,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,r,n,a){var o=e.getBBox();return o.centerX>=t&&o.centerX<=r&&o.centerY>=n&&o.centerY<=a},getSelectedNodes:function(e){var t=this,r=this,n=r.graph,a=r.originPoint,o=r.shouldUpdate,s=r.isBBoxCenterInRect,u=this.selectedState,f={x:e.x,y:e.y},c=n.getPointByCanvas(a.x,a.y),l=Bv(f.x,c.x),x=ay(f.x,c.x),m=Bv(f.y,c.y),C=ay(f.y,c.y),R=[],V=[];n.getNodes().forEach(function(st){if(st.isVisible()&&s(st,l,x,m,C)&&o(st,"select",t)){R.push(st);var lt=st.getModel();V.push(lt.id),n.setItemState(st,u,!0)}});var Q=[];this.includeEdges&&R.forEach(function(st){var lt=st.getOutEdges();lt.forEach(function(Ct){if(Ct.isVisible()){var At=Ct.getModel(),Nt=At.source,Kt=At.target;V.includes(Nt)&&V.includes(Kt)&&o(Ct,"select",t)&&(Q.push(Ct),n.setItemState(Ct,t.selectedState,!0))}})});var rt=[];this.includeCombos&&n.getCombos().forEach(function(st){if(st.isVisible()&&s(st,l,x,m,C)&&o(st,"select",t)){rt.push(st);var lt=st.getModel();V.push(lt.id),n.setItemState(st,u,!0)}}),this.selectedEdges=Q,this.selectedNodes=R,this.selectedCombos=rt,this.onSelect&&this.onSelect(R,Q,rt),n.emit("nodeselectchange",{selectedItems:{nodes:R,edges:Q,combos:rt},select:!0})},createBrush:function(){var e=this,t=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:iy(e.canvasX-t.x),height:iy(e.canvasY-t.y),x:Bv(e.canvasX,t.x),y:Bv(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},sy="shift",s_=["shift","ctrl","alt","control"],u_={getDefaultCfg:function(){return{multiple:!0,trigger:sy,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return s_.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=sy,console.warn("Behavior click-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,r=e.item;if(!(!r||r.destroyed)){var n=r.getType(),a=t.graph,o=t.keydown,s=t.multiple,u=t.shouldUpdate,f=t.shouldBegin;if(f(e,t)){if(!o||!s){var c=a.findAllByState("node",t.selectedState).concat(a.findAllByState("edge",t.selectedState)).concat(a.findAllByState("combo",t.selectedState));(0,p.each)(c,function(R){R!==r&&a.setItemState(R,t.selectedState,!1)})}var l=function(){switch(n){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}();if(!l){var x=a.findAllByState("node",t.selectedState),m=a.findAllByState("edge",t.selectedState),C=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{selectedItems:{nodes:x,edges:m,combos:C},select:!1});return}if(r.hasState(t.selectedState)){u(e,t)&&a.setItemState(r,t.selectedState,!1);var x=a.findAllByState("node",t.selectedState),m=a.findAllByState("edge",t.selectedState),C=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:x,edges:m,combos:C},select:!1})}else{u(e,t)&&a.setItemState(r,t.selectedState,!0);var x=a.findAllByState("node",t.selectedState),m=a.findAllByState("edge",t.selectedState),C=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:x,edges:m,combos:C},select:!0})}}}},onCanvasClick:function(e){var t=this,r=this,n=r.graph,a=r.shouldBegin;if(a(e,this)){var o=n.findAllByState("node",this.selectedState);(0,p.each)(o,function(f){n.setItemState(f,t.selectedState,!1)});var s=n.findAllByState("edge",this.selectedState);(0,p.each)(s,function(f){n.setItemState(f,t.selectedState,!1)});var u=n.findAllByState("combo",this.selectedState);(0,p.each)(u,function(f){n.setItemState(f,t.selectedState,!1)}),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===this.trigger.toLowerCase()||r.toLowerCase()==="control"?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}},f_=Bt,Fv=.05,c_={getDefaultCfg:function(){return this.isFireFox=z0()==="firefox",{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,r=t[0],n=t[1];e.preventDefault(),n&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,r=t[0],n=t[1];if(n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var a=function(R,V){return Math.hypot(V.x-R.x,V.y-R.y)},o=a({x:r.pageX,y:r.pageY},{x:n.pageX,y:n.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var u=this.get("minZoom")||this.graph.get("minZoom"),f=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>f||s<u)){var c=this.get("animate"),l=this.get("animateCfg"),x=this.graph.get("canvas"),m=x.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:m.x,y:m.y},c,l),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,r=this,n=r.graph,a=r.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var o=n.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=this.get("sensitivity"),f=n.getZoom(),c=f,l=f;this.isFireFox?e.deltaY>0||e.wheelDelta<0?c=1-Fv*u:c=1/(1-Fv*u):e.wheelDelta<0?c=1-Fv*u:c=1/(1-Fv*u),l=f*c;var x=this.get("minZoom")||n.get("minZoom"),m=this.get("maxZoom")||n.get("maxZoom");l>m?l=m:l<x&&(l=x);var C=this.get("enableOptimize");if(C){var R=this.get("optimizeZoom"),V=this.get("optimized"),Q=n.getNodes(),rt=n.getEdges(),st=Q.length,lt=rt.length;if(!V){for(var Ct=0;Ct<st;Ct++){var At=Q[Ct];if(!At.destroyed)for(var Nt=At.get("group").get("children"),Kt=Nt.length,ge=0;ge<Kt;ge++){var ue=Nt[ge];!ue.destoryed&&!ue.get("isKeyShape")&&(ue.set("ori-visibility",ue.get("ori-visibility")||ue.get("visible")),ue.hide())}}for(var Ae=0;Ae<lt;Ae++)for(var Ke=rt[Ae],Nt=Ke.get("group").get("children"),Kt=Nt.length,ge=0;ge<Kt;ge++){var ue=Nt[ge];ue.set("ori-visibility",ue.get("ori-visibility")||ue.get("visible")),ue.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Gr=setTimeout(function(){var Va=n.getZoom(),di=t.get("optimized");if(di){t.set("optimized",!1);for(var Sa=0;Sa<st;Sa++){var gi=Q[Sa],Mi=gi.get("group").get("children"),na=Mi.length;if(Va<R){var pa=gi.getKeyShape(),ei=pa.get("ori-visibility");pa.set("ori-visibility",void 0),ei&&pa.show()}else for(var Ci=0;Ci<na;Ci++){var ni=Mi[Ci],ei=ni.get("ori-visibility");ni.set("ori-visibility",void 0),!ni.get("visible")&&ei&&ei&&ni.show()}}for(var ci=0;ci<lt;ci++){var La=rt[ci],Mi=La.get("group").get("children"),na=Mi.length;if(Va<R){var pa=La.getKeyShape(),ei=pa.get("ori-visibility");pa.set("ori-visibility",void 0),ei&&pa.show()}else for(var Ci=0;Ci<na;Ci++){var ni=Mi[Ci];if(!ni.get("visible")){var ei=ni.get("ori-visibility");ni.set("ori-visibility",void 0),ei&&ni.show()}}}}},100);this.set("timeout",Gr)}if(f<=1){var wr=void 0,Mr=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){wr=n.findAllByState("node",a.fixState),Mr=n.findAllByState("edge",a.fixState);for(var vr=f/l,sn=wr.length,nn=0;nn<sn;nn++){var At=wr[nn],mr=At.getContainer(),Dr=At.getModel(),qr=At.getOriginStyle(),un=At.getStateStyle(a.fixState),Dn=At.get("shapeFactory").getShape(Dr.type).getStateStyle(a.fixState,At)[a.fixState];if(a.fixAll){if(l<=1){var Rn=(0,p.clone)(mr.getMatrix());Rn||(Rn=[1,0,0,0,1,0,0,0,1]);var ca=At.getModel(),ra=ca.x,qa=ca.y;Rn=f_(Rn,[["t",-ra,-qa],["s",vr,vr],["t",ra,qa]]),mr.setMatrix(Rn)}}else for(var Nt=mr.get("children"),Kt=Nt.length,ge=0;ge<Kt;ge++){var ue=Nt[ge],Pa=void 0,Ta=void 0;if(a.fixLabel){var oi=ue.get("type");if(oi==="text"){Pa=ue.attr("fontSize")||12;var Ei=un[ue.get("name")],wi=Dn[ue.get("name")],Cs=Ei?Ei.fontSize:12,mi=wi?wi.fontSize:12,As=Cs||mi||12;if(l<=1&&ue.attr("fontSize",As/l),Ta)break}}if(a.fixLineWidth&&ue.get("isKeyShape")){Ta=ue.attr("lineWidth")||0;var Vi=un.lineWidth||Dn.lineWidth||qr.lineWidth||0;if(l<=1&&ue.attr("lineWidth",Vi/l),Pa)break}}}for(var ji=Mr.length,eo=0;eo<ji;eo++)for(var Ke=Mr[eo],mr=Ke.getContainer(),Nt=mr.get("children"),Dr=Ke.getModel(),un=Ke.getStateStyle(a.fixState),Dn=Ke.get("shapeFactory").getShape(Dr.type).getStateStyle(a.fixState,Ke)[a.fixState],Kt=Nt.length,ge=0;ge<Kt;ge++){var ue=Nt[ge],Pa=void 0,Ta=void 0;if(a.fixLabel||a.fixAll){var oi=ue.get("type");if(oi==="text"){Pa=ue.attr("fontSize")||12;var Ei=un[ue.get("name")],wi=Dn[ue.get("name")],Cs=Ei?Ei.fontSize:12,mi=wi?wi.fontSize:12,As=Cs||mi||12;if(l<=1&&ue.attr("fontSize",As/l),Ta)break}}if((a.fixLineWidth||a.fixAll)&&ue.get("isKeyShape")){Ta=ue.attr("lineWidth")||0;var Vi=un.lineWidth||Dn.lineWidth||1;if(l<=1&&ue.attr("lineWidth",Vi/l),Pa)break}}}}var No=this.get("animate"),Go=this.get("animateCfg");n.zoomTo(l,{x:s.x,y:s.y},No,Go),n.emit("wheelzoom",e)}}},uy={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(!(!e.item||e.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var r=this.formatText(e.item.get("model"),e);t.innerHTML=r,Wa(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){Wa(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),r=this,n=r.width,a=r.height,o=r.container,s=r.graph;if(!t(e,this)){Wa(o,{visibility:"hidden"});return}var u=s.getPointByClient(e.clientX,e.clientY),f=s.getCanvasByPoint(u.x,u.y),c=f.x,l=f.y,x=o.getBoundingClientRect();c>n/2?c-=x.width:c+=this.offset,l>a/2?l-=x.height:l+=this.offset;var m="".concat(c,"px"),C="".concat(l,"px");Wa(this.container,{left:m,top:C,visibility:"visible"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var r=Ji('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(r),Wa(r,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}},l_=(0,K.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},uy),h_=(0,K.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},uy),fy="click",v_=["click","dblclick"],d_={getDefaultCfg:function(){return{trigger:fy,onChange:function(){}}},getEvents:function(){var e,t;return v_.includes(this.trigger)?t=this.trigger:(t=fy,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){t.toggle(e),clearTimeout(t.timer),t.timer=0},200)}else this.toggle(e)},toggle:function(e){var t=e.item;if(t){var r=this.graph.findDataById(t.get("id"));if(r){var n=r.children;if(!(!n||n.length===0)){var a=!r.collapsed;this.shouldBegin(e,a,this)&&(r.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:e.item,collapsed:a}),this.shouldUpdate(e,a,this)&&(this.onChange(t,a,this),this.graph.layout()))}}}}},g_=cc.calculationItemsBBox,p_=function i(e,t){if(t(e)!==!1&&e){var r=e.get("combos");if(r.length===0)return!1;(0,p.each)(r,function(n){i(n,t)})}},y_={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;if(!t||t.destroyed||!this.shouldUpdate(e,this))return!1;var r=t.getType();return r==="combo"},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var t=this,r=this.graph,n=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var a=r.findAllByState("combo",this.selectedState),o=n.get("id"),s=a.filter(function(f){var c=f.get("id");return o===c});s.length===0?this.targets.push(n):this.targets=a;var u=[];this.targets.forEach(function(f){var c=f.getModel(),l=c.x,x=c.y,m=c.id;u.push({x:l,y:x,id:m})}),this.set("beforeDragItems",u),this.activeState&&this.targets.map(function(f){var c=f.getModel();if(c.parentId){var l=r.findById(c.parentId);l&&r.setItemState(l,t.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],p_(n,function(f){if(f.destroyed)return!1;var c=f.getModel();return t.currentItemChildCombos.push(c.id),!0})}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var r=this.graph,n=e.item,a=n.getModel(),o=r.getCombos(),s=n.getBBox(),u=s.centerX,f=s.centerY,c=s.width,l=o.filter(function(x){var m=x.getModel();return a.parentId,m.id!==a.id&&!t.currentItemChildCombos.includes(m.id)});l.map(function(x){var m=x.getBBox(),C=m.centerX,R=m.centerY,V=m.width,Q=u-C,rt=f-R,st=2*Math.sqrt(Q*Q+rt*rt);c+V-st>.8*c?r.setItemState(x,t.activeState,!0):r.setItemState(x,t.activeState,!1)})}(0,p.each)(this.targets,function(x){t.updateCombo(x,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,t){var r=this;(this.enableDelegate||t)&&(0,p.each)(this.targets,function(n){r.updateCombo(n,e,t)})},onDrop:function(e){var t=this,r=e.item;if(this.currentShouldEnd=this.shouldEnd(e,r,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!r||!this.targets||r.destroyed)){var n=this.graph,a=r.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(t.activeState&&n.setItemState(r,t.activeState,!1),t.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o,a.id,!1)):n.updateCombo(r)}),this.end(r,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(!(!this.targets||this.targets.length===0)){var r=this.graph,n=e.item,a=n.getModel().comboId,o=a?r.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(a){if(this.activeState){var u=r.findById(a);r.setItemState(u,this.activeState,!1)}this.targets.map(function(f){t.onlyChangeComboSize?r.updateCombo(f):a!==f.getID()&&(s=r.findById(a),a!==f.getModel().parentId&&r.updateComboTree(f,a,!1))})}else this.targets.map(function(f){if(t.onlyChangeComboSize)r.updateCombo(f);else{var c=f.getModel();c.comboId&&r.updateComboTree(f,void 0,!1)}});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var r=this.getParentCombo(t.getModel().parentId),n=this.graph;r&&this.activeState&&n.setItemState(r,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var r=this;if(this.origin){var n=this.graph;if(this.delegateShape){var a=n.get("delegateGroup");a.clear(),this.delegateShape=null}if(e&&this.activeState&&n.setItemState(e,this.activeState,!1),!e){var o=n.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(u){if(!r.onlyChangeComboSize)n.updateComboTree(u,void 0,o);else{n.updateCombo(u);var f=u.getModel(),c=f.x,l=f.y,x=f.id;s.after.combos.push({x:c,y:l,id:x}),n.pushStack("update",s)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,r){var n=this;if(r===void 0&&(r={}),t(e,r)!==!1&&e){var a=e.get("combos");(0,p.each)(a,function(s){n.traverse(s,t,r)});var o=e.get("nodes");(0,p.each)(o,function(s){n.traverse(s,t,r)})}},updateCombo:function(e,t,r){this.updateSingleItem(e,t,r);var n={};this.traverse(e,function(a,o){return a.destroyed?!1:(a.getEdges().forEach(function(s){return o[s.getID()]=s}),!0)},n),Object.values(n).forEach(function(a){return a.refresh()})},updateSingleItem:function(e,t,r){var n=this.origin,a=this.graph,o=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var u=t.x-n.x+this.point[s].x,f=t.y-n.y+this.point[s].y;r&&(u+=n.x-t.x,f+=n.y-t.y),a.updateItem(e,{x:u,y:f},!1)},getParentCombo:function(e){var t=this.graph;if(e){var r=t.findById(e);if(r)return r}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var x=e.x-this.origin.x+this.originPoint.minX,m=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x,y:m})}else{var r=t.get("delegateGroup"),n=null;this.targets.length>1?n=g_(this.targets):n=this.targets[0].getBBox();var a=n.x,o=n.y,s=n.width,u=n.height,f=n.minX,c=n.minY;this.originPoint={x:a,y:o,width:s,height:u,minX:f,minY:c};var l=(0,K.__assign)((0,K.__assign)({},Cl.delegateStyle),this.delegateStyle);this.delegateShape=r.addShape("rect",{attrs:(0,K.__assign)({width:n.width,height:n.height,x:n.x,y:n.y},l),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this,t=e.graph,r=e.targets,n={};r==null||r.forEach(function(a){var o=a.getModel().parentId;o&&(n[o]=t.findById(o))}),Object.values(n).forEach(function(a){a&&t.updateCombo(a)})}},cy="dblclick",m_=["click","dblclick"],x_={getDefaultCfg:function(){return{trigger:cy,relayout:!0}},getEvents:function(){var e,t;return m_.includes(this.trigger)?t=this.trigger:(t=cy,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,r=this,n=r.graph,a=r.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;s&&(n.collapseExpandCombo(s),a&&n.get("layout")?n.layout():n.refreshPositions())}}},b_=cc.isPolygonsIntersect,E_=cc.pathToPoints,ly="shift",w_=["drag","shift","ctrl","alt","control"],__=function(e,t){var r,n=e.getKeyShape();if(e.get("type")==="path")r=E_(n.attr("path"));else{var a=n.getCanvasBBox();r=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return b_(t,r)},S_={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:ly,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return w_.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=ly,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso,r=e.item;r||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e)))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){e===void 0&&(e="canvas:click");var t=this,r=t.graph,n=t.selectedState,a=t.shouldDeselect,o=r.findAllByState("node",n),s=r.findAllByState("edge",n);(!a||a({action:e,nodes:o,edges:s}))&&(o.forEach(function(u){return r.setItemState(u,n,!1)}),s.forEach(function(u){return r.setItemState(u,n,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this,r=t.graph,n=t.shouldUpdate,a=this.points.map(function(c){return[r.getCanvasByPoint(c.x,c.y).x,r.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],u=[];r.getNodes().forEach(function(c){if(c.isVisible()&&__(c,a)&&n(c,"select",e)){s.push(c);var l=c.getModel();u.push(l.id),r.setItemState(c,o,!0)}});var f=[];this.includeEdges&&s.forEach(function(c){var l=c.getOutEdges();l.forEach(function(x){if(x.isVisible()){var m=x.getModel(),C=m.source,R=m.target;u.includes(C)&&u.includes(R)&&n(x,"select",e)&&(f.push(x),r.setItemState(x,e.selectedState,!0))}})}),this.selectedEdges=f,this.selectedNodes=s,this.onSelect&&this.onSelect(s,f),r.emit("nodeselectchange",{selectedItems:{nodes:s,edges:f},select:!0})},createLasso:function(){var e=this,t=e.graph.get("delegateGroup").addShape("path",{attrs:(0,K.__assign)({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},hy="click",M_=["click","drag"],vy=void 0,C_=["shift","ctrl","control","alt","meta",void 0],A_={getDefaultCfg:function(){return{trigger:hy,key:vy,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;M_.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=hy,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),e.key&&C_.indexOf(e.key.toLowerCase())===-1&&(e.trigger=vy,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return e.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item;(!r||r.getID()===t.source||r.getType()!=="node")&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item,n=t.graph,a=r.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var s=void 0;o&&(0,p.isFunction)(o)?s=o({source:t.source,target:a.id},t):s=t.edgeConfig;var u=(0,K.__assign)({target:a.id},s);if(t.source===a.id&&(u.type="loop"),n.emit("beforecreateedge",{}),n.updateItem(t.edge,u,!1),n.get("enabledStack")){var f=(0,K.__assign)((0,K.__assign)({},t.edge.getModel()),{itemType:"edge"}),c={};c.edges=[f],n.pushStack("add",{before:{},after:c})}n.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;var s=void 0;o&&(0,p.isFunction)(o)?s=o({source:a.id,target:a.id},t):s=t.edgeConfig,t.edge=n.addItem("edge",(0,K.__assign)({source:a.id,target:a.id},s),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!(t.key&&!t.keydown)){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var r={x:e.x,y:e.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:r},!1)}},cancelCreating:function(e){var t,r,n=this;if(!(n.key&&!n.keydown)){var a=n.graph,o=e.item;if(n.addingEdge&&(n.edge===o||!((r=(t=e.target)===null||t===void 0?void 0:t.isCanvas)===null||r===void 0)&&r.call(t))){n.edge&&!n.edge.destroyed&&a.removeItem(n.edge,!1),n.edge=null,n.addingEdge=!1;return}}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}},dy="ctrl",T_=["shift","ctrl","alt","control"],I_="1",O_={getDefaultCfg:function(){return{trigger:dy,combinedKey:I_,functionName:"fitView",functionParams:[]}},getEvents:function(){return T_.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=dy,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '".concat(this.trigger,"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();this.triggerKeydown||(n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '".concat(this.functionName,"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===o||n==="control"&&o==="ctrl"||n==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},L_=["shift","ctrl","alt","control","meta"],D_={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||L_.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this;if(this.allowDrag(e)){var r=this.graph,n=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];n.includes("control")&&n.push("ctrl");var a=n.some(function(Dr){return e["".concat(Dr,"Key")]});if(a){var o=r.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=r.getZoom();e.wheelDelta>0?u=u+u*.05:u=u-u*.05,r.zoomTo(u,{x:s.x,y:s.y})}else{var f=e.deltaX||e.movementX,c=e.deltaY||e.movementY;!c&&navigator.userAgent.indexOf("Firefox")>-1&&(c=-e.wheelDelta*125/3);var l=this.graph.get("width"),x=this.graph.get("height"),m=this.graph.get("canvas").getCanvasBBox(),C=this.scalableRange,R=this.scalableRange;C<1&&C>-1&&(C=l*C,R=x*R);var V=m.minX,Q=m.maxX,rt=m.minY,st=m.maxY;f>0?Q<-C?f=0:Q-f<-C&&(f=Q+C):f<0&&(V>l+C?f=0:V-f>l+C&&(f=V-(l+C))),c>0?st<-R?c=0:st-c<-R&&(c=st+R):c<0&&(rt>x+R?c=0:rt-c>x+R&&(c=rt-(x+R))),this.get("direction")==="x"?c=0:this.get("direction")==="y"&&(f=0),r.translate(-f,-c)}e.preventDefault();var lt=this.get("enableOptimize");if(lt){var Ct=this.get("optimizeZoom"),At=this.get("optimized"),Nt=r.getNodes(),Kt=r.getEdges(),ge=Nt.length,ue=Kt.length;if(!At){for(var Ae=0;Ae<ge;Ae++){var Ke=Nt[Ae];if(!Ke.destroyed)for(var Gr=Ke.get("group").get("children"),wr=Gr.length,Mr=0;Mr<wr;Mr++){var vr=Gr[Mr];!vr.destoryed&&!vr.get("isKeyShape")&&(vr.set("ori-visibility",vr.get("ori-visibility")||vr.get("visible")),vr.hide())}}for(var sn=0;sn<ue;sn++)for(var nn=Kt[sn],Gr=nn.get("group").get("children"),wr=Gr.length,Mr=0;Mr<wr;Mr++){var vr=Gr[Mr];vr.set("ori-visibility",vr.get("ori-visibility")||vr.get("visible")),vr.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var mr=setTimeout(function(){var Dr=r.getZoom(),qr=t.get("optimized");if(qr){t.set("optimized",!1);for(var un=0;un<ge;un++){var Dn=Nt[un],Rn=Dn.get("group").get("children"),ca=Rn.length;if(Dr<Ct){var ra=Dn.getKeyShape(),qa=ra.get("ori-visibility");qa&&ra.show()}else for(var Pa=0;Pa<ca;Pa++){var Ta=Rn[Pa],qa=Ta.get("ori-visibility");!Ta.get("visible")&&qa&&qa&&Ta.show()}}for(var oi=0;oi<ue;oi++){var Ei=Kt[oi],Rn=Ei.get("group").get("children"),ca=Rn.length;if(Dr<Ct){var ra=Ei.getKeyShape(),qa=ra.get("ori-visibility");qa&&ra.show()}else for(var Pa=0;Pa<ca;Pa++){var Ta=Rn[Pa];if(!Ta.get("visible")){var qa=Ta.get("ori-visibility");qa&&Ta.show()}}}}},100);this.set("timeout",mr)}}},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,p.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,p.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},N_={"drag-canvas":r_,"zoom-canvas":c_,"drag-node":n_,"activate-relations":a_,"brush-select":o_,"click-select":u_,"lasso-select":S_,tooltip:l_,"edge-tooltip":h_,"collapse-expand":d_,"drag-combo":y_,"collapse-expand-combo":x_,"create-edge":A_,"shortcuts-call":O_,"scroll-canvas":D_};(0,p.each)(N_,function(i,e){Jg(e,i)});var P_=(0,K.__assign)((0,K.__assign)({},F),qm),DM=us.Grid,NM=us.Minimap,PM=us.Bundling,kM=us.Menu,k_=us.Fisheye,RM=us.ToolBar,BM=us.Tooltip,R_=us.TimeBar,B_=us.ImageMinimap,F_=us.EdgeFilterLens,G_=us.SnapLine,FM=us.Legend,z_=us.Annotation,gy={version:Cl.version,Graph:j0,TreeGraph:Pb,Util:cc,Layout:ii.Layouts,TreeLayout:yb,registerLayout:mb,Global:Cl,registerBehavior:Jg,registerCombo:$m,registerEdge:Qg,registerNode:uc,Minimap:us.Minimap,Grid:us.Grid,Bundling:us.Bundling,Menu:us.Menu,ToolBar:us.ToolBar,Tooltip:us.Tooltip,Legend:us.Legend,TimeBar:R_,SnapLine:G_,Fisheye:k_,ImageMinimap:B_,EdgeFilterLens:F_,Annotation:z_,Algorithm:P_,Arrow:Hg,Marker:Kg,Shape:Fc};gy.version="4.8.23";var Dl=gy,GM="4.8.23",U_=function(){function i(e){e&&this.setData(e)}return i.prototype.getData=function(){return this.data},i.prototype.setData=function(e){this.data=e},i}(),W_=U_,uh=function(i){if(!i||typeof i!="object")return i;var e;return Array.isArray(i)?e=i.map(function(t){return uh(t)}):i instanceof HTMLElement?e=i:(e={},Object.keys(i).forEach(function(t){return e[t]=uh(i[t])})),e},X_="#1890ff",py={hover:{stroke:X_,lineWidth:2}},zM=null,UM={stroke:"#40a9ff"},Y_=[[0,.5],[1,.5]],V_={fill:"#000",fontSize:12},WM={fill:"#000",fontSize:12,textAlign:"start",textBaseline:"middle"},j_={show:!1,size:[150,100],type:"keyShape"},yy={fill:"#fff",stroke:"#40a9ff",radius:2},H_=6,_u="g",XM=4,K_={position:"absolute",right:"12px",top:"12px",display:"flex",flexDirection:"column",padding:"6px",borderRadius:"2px",fontSize:"24px",textAlign:"center",lineHeight:"24px",color:"rgba(0,0,0,.65)",backgroundColor:"#fff",boxShadow:"0 0 3px #ccc"},Kh=window.console,fh=function(){return fh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},fh.apply(this,arguments)},Z_=function(i,e){e===void 0&&(e=100);var t=[],r=i.nodes,n=r===void 0?[]:r,a=i.edges,o=a===void 0?[]:a,s=[],u=function(m){return o.filter(function(C){var R,V=t.findIndex(function(rt){return rt.id===C.target});if(V!==-1&&C.source===m){var Q=f(C.source);Kh.warn("The data [".concat(C.source,",").concat(C.target,",").concat((R=Q[0])===null||R===void 0?void 0:R.source,"] is in a loop, please check the rationality."))}return V===-1&&C.source===m})},f=function(m){return o.filter(function(C){return C.target===m})};o.forEach(function(m){var C=m.source;o.find(function(R){return R.target===C})||s.push(C)});var c=0,l=function(m){var C;return C={},C["".concat(_u,"_level")]=c,C["".concat(_u,"_parent")]=f(m.id).map(function(R){return R.source}),C["".concat(_u,"_children")]=c<e-1?u(m.id).map(function(R){return R.target}):[],C};if(!s.length)return{edges:o,nodes:n.map(function(m){return fh(fh({},m),l(m))})};for(var x=function(){var m=n.filter(function(R){return s.includes(R.id)});t=t.concat(m.map(function(R){return fh(fh({},R),l(R))}));var C=[];s.forEach(function(R){C.push.apply(C,u(R).map(function(V){return V.target}))}),s=C,c+=1};s.length;)x();return{nodes:t,edges:o}},$_=function(i,e){var t=i.nodes,r=i.edges;if(e<=0)return i;var n=t.filter(function(a){return!a.hasOwnProperty("".concat(_u,"_level"))||a["".concat(_u,"_level")]<e});return{nodes:n,edges:r.filter(function(a){var o=a.source,s=a.target;return n.filter(function(u){return[o,s].includes(u.id)}).length>=2})}},Gv=function(){return Gv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Gv.apply(this,arguments)},my=function(i,e,t,r){var n;e===void 0&&(e=0),t===void 0&&(t=""),r===void 0&&(r="");var a=i.id,o=i.children,s=o===void 0?[]:o;return Gv(Gv((n={},n["".concat(_u,"_level")]=e,n["".concat(_u,"_parentId")]=t,n["".concat(_u,"_currentPath")]=r,n),i),{children:s==null?void 0:s.map(function(u,f){return my(u,e+1,t?"".concat(t,"-").concat(a):a,"".concat(r,"-").concat(f))})})},zv=function(){return zv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},zv.apply(this,arguments)},xy=function(i,e){var t=i.children,r=t===void 0?[]:t,n=i.g_level,a=n===void 0?0:n;return e<=0?i:zv(zv({},i),{children:a+1<e?r==null?void 0:r.map(function(o){return xy(o,e)}):[]})},Uv=new Map,YM=function(i,e){var t=Uv.get(i);t?t.push(e):t=[e],Uv.set(i,t)},eg=function(i){var e=Uv.get(i)||[];e.forEach(function(t){typeof t=="function"&&t.apply(null,arguments)}),Uv.set(i,[])},q_=function(i){return(i==null?void 0:i.nodes)instanceof Array&&(i==null?void 0:i.edges)instanceof Array},by=function(i,e){var t=uh(i),r=t;return e&&(q_(i)?(r=Z_(i,e),t=$_(r,e)):(r=my(i),t=xy(r,e))),[t,r]},Q_=function(i,e,t){var r=by(e,t),n=r[0],a=r[1];i.data(n),i.set("eventData",new W_(a)),i.render(),i.get("canvas").set("localRefresh",!1),eg(i.get("id"))},Ey=function(i,e){return typeof i=="function"&&e?i(e)||{}:Array.isArray(i)?i:Y_},rg=function(){return rg=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},rg.apply(this,arguments)},ch=function(i,e){if(i&&!(typeof i=="object"&&(i==null?void 0:i.show)===!1)){var t=typeof i=="function"?i(e):i,r=t.type,n=r===void 0?"vee":r,a=t.d,o=a===void 0?0:a,s=t.size,u=s===void 0?10:s;return rg({path:Dl.Arrow[n](u,u,o),fill:"#ccc",d:o},t)}},Zh=function(i,e,t){return typeof i=="function"?i(e,t):i},wy=function(i,e){i===void 0&&(i="right");var t=e[0],r=e[1],n=0,a=0;switch(i){case"top":n=t/2,a=0;break;case"right":n=t,a=r/2;break;case"bottom":n=t/2,a=r;break;case"left":n=0,a=r/2;break}return{x:n,y:a}},J_=function(i,e){return(0,p.reduce)(i,function(t,r,n){return n=e?e(r):r,t.hasOwnProperty(n)?++t[n]:t[n]=1,t},{})},_y=function(i){var e=i.nodes,t=i.edges;if(e.length===1)return e[0].id;var r=[];t.forEach(function(u){r.push(u.source)});var n=J_(r),a=0,o="";for(var s in n)n.hasOwnProperty(s)&&n[s]>a&&(a=n[s],o=s);return o},Sy=function(i,e,t){var r,n;return t&&t.current&&(r=t.current.offsetWidth,n=t.current.offsetHeight||500),!i&&!r||!e&&!n?(Kh.warn("\u8BF7\u4E3A Graph \u6307\u5B9A width \u4E0E height\uFF01\u5426\u5219\u5C06\u4F7F\u7528\u9ED8\u8BA4\u503C 500 * 500"),[500,500]):[i||r||500,e||n||500]},My=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var e=Math.random()*16|0,t=i=="x"?e:e&3|8;return t.toString(16)})},tS=function(i,e){return i.current||(i.current="".concat(e,"-graph-").concat(My())),i.current},eS=function(i,e){var t=e!=null?e:{},r=t.nodeCfg,n=r===void 0?{}:r,a=t.edgeCfg,o=a===void 0?{}:a,s=n.nodeStateStyles,u=o.edgeStateStyles,f={},c=function(m,C,R){i.updateItem(m,{style:{endArrow:!!C&&{fill:C},startArrow:!!R&&{fill:R}}})},l=function(m,C,R){var V,Q,rt;R?m.toFront():m.toBack();var st=(V=m.getModel().style)!==null&&V!==void 0?V:{},lt=st.endArrow,Ct=st.startArrow;if(lt||Ct){if(!f[m.getID()]){var At=(lt!=null?lt:{}).fill,Nt=(Ct!=null?Ct:{}).fill,Kt=(rt=(Q=m.getModel().style)===null||Q===void 0?void 0:Q[C])===null||rt===void 0?void 0:rt.stroke;f[m.getID()]=[[Kt!=null?Kt:At,At],[Kt!=null?Kt:Nt,Nt]]}var ge=f[m.getID()];c(m,lt&&ge[0][R?0:1],Ct&&ge[1][R?0:1])}i.setItemState(m,C,R)},x=function(m,C,R,V){var Q=V==="node"?i.findAll("edge",function(st){return st.getSource()===m||st.getTarget()===m}):i.findAll("node",function(st){return m.getSource().get("id")===st.get("id")||m.getTarget().get("id")===st.get("id")}),rt=[m].concat(Q);rt.forEach(function(st){l(st,C,R)})};s&&(i.on("node:mouseenter",function(m){var C=m.item;x(C,"hover",!0,"node")}),i.on("node:mouseleave",function(m){var C=m.item;x(C,"hover",!1,"node")})),u&&(i.on("edge:mouseenter",function(m){var C=m.item;x(C,"hover",!0,"edge")}),i.on("edge:mouseleave",function(m){var C=m.item;x(C,"hover",!1,"edge")}))},Wv=function(){return Wv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Wv.apply(this,arguments)},Cy=function(i,e){if(i===void 0&&(i={}),!(!e||e.destroyed)){var t=e.get("plugins").filter(function(a){return a.get("name")==="minimap"})[0];if(t&&e.removePlugin(t),i.show){var r=Object.assign(j_,i),n=new Dl.Minimap(Wv(Wv({},r),{name:"minimap"}));e.addPlugin(n)}}},rS=z(73935),nS=z.t(rS,2),ng=function(){return ng=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},ng.apply(this,arguments)},Ay=function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(c){try{f(r.next(c))}catch(l){o(l)}}function u(c){try{f(r.throw(c))}catch(l){o(l)}}function f(c){c.done?a(c.value):n(c.value).then(s,u)}f((r=r.apply(i,e||[])).next())})},Ty=function(i,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,n,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(c){return u([f,c])}}function u(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(r=1,n&&(a=f[0]&2?n.return:f[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,f[1])).done)return a;switch(n=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,n=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1],a=f;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(f);break}a[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(i,t)}catch(c){f=[6,c],n=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},$h=ng({},nS),aS=$h.version,iS=$h.render,oS=$h.unmountComponentAtNode,Xv;try{var sS=Number((aS||"").split(".")[0]);sS>=18&&(Xv=$h.createRoot)}catch(i){}function Iy(i){var e=$h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&typeof e=="object"&&(e.usingClientEntryPoint=i)}var Yv="__rc_react_root__";function uS(i,e){Iy(!0);var t=e[Yv]||Xv(e);Iy(!1),t.render(i),e[Yv]=t}function fS(i,e){iS(i,e)}function VM(i,e){}function Oy(i,e){if(Xv){uS(i,e);return}fS(i,e)}function cS(i){return Ay(this,void 0,void 0,function(){return Ty(this,function(e){return[2,Promise.resolve().then(function(){var t;(t=i[Yv])===null||t===void 0||t.unmount(),delete i[Yv]})]})})}function lS(i){oS(i)}function jM(i){}function HM(i){return Ay(this,void 0,void 0,function(){return Ty(this,function(e){return Xv!==void 0?[2,cS(i)]:(lS(i),[2])})})}var Ly=function(i,e){e===void 0&&(e={});var t=Object.keys(e);t.forEach(function(r){i.style[r]=e[r]})},ag=new Map,ig=function(i,e,t,r,n){e===void 0&&(e={}),typeof r=="string"&&(n=r,r=void 0);var a=document.createElement("div");return Object.keys(e).forEach(function(o){a[o]=e[o]}),r&&Ly(a,r),t==="tooltip"&&(a.setAttribute("data-uuid",n),ag.has(n)?a=ag.get(n):ag.set(n,a),a.className="g2-tooltip"),Oy(i,a),a},Vv=function(){return Vv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Vv.apply(this,arguments)},hS=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t},vS=function(i,e){if(i===void 0&&(i={}),!(!e||e.destroyed)){var t=e.get("plugins").filter(function(s){return s.get("name")==="tooltip"})[0];if(t&&e.removePlugin(t),i.show||i.show===void 0&&Object.keys(i).length>0){var r=i.customContent,n=hS(i,["customContent"]),a=My(),o=new Dl.Tooltip(Vv(Vv({offsetX:10,offsetY:20,itemTypes:["node"]},n),{getContent:function(s){return(0,p.isFunction)(r)?ig(r(s.item.getModel()),{className:"g6-tooltip"},"tooltip",a):""},name:"tooltip"}));e.addPlugin(o)}}},dS=function(){function i(e){this._cfgs=(0,p.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return i.prototype.getDefaultCfgs=function(){return{}},i.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var r=t.getEvents(),n={};(0,p.each)(r,function(a,o){var s=(0,p.wrapBehavior)(t,a);n[o]=s,e.on(o,s)}),this._events=n,this.init()},i.prototype.getEvents=function(){return{}},i.prototype.get=function(e){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[e]},i.prototype.set=function(e,t){this._cfgs[e]=t},i.prototype.destroy=function(){},i.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;(0,p.each)(t,function(r,n){e.off(n,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},i}(),gS=dS,pS=function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&kh()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var yS=function(i){pS(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,customContent:function(t){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(t){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),r=Ji("<div class=".concat(t||"g6-component-contextmenu","></div>"));Wa(r,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),(0,p.isString)(n)&&(n=document.getElementById(n)),n.appendChild(r),this.set("menu",r)},e.prototype.onMenuShow=function(t){var r=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1){r.onMenuHide();return}}else if(n.indexOf("canvas")===-1){r.onMenuHide();return}var a=this.get("shouldBegin");if(a(t)){var o=this.get("menu"),s=this.get("customContent"),u=this.get("graph"),f=s(t,u);Oy(f,o),this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var l=function(Nt){c(Nt.target,t.item,u)};this.set("handleMenuClickWrapper",l),o.addEventListener("click",l)}var x=u.get("width"),m=u.get("height"),C=o.getBoundingClientRect(),R=this.get("offsetX")||0,V=this.get("offsetY")||0,Q=u.getContainer().offsetTop,rt=u.getContainer().offsetLeft,st=t.canvasX+rt+R,lt=t.canvasY+Q+V;st+C.width>x&&(st=t.canvasX-C.width-R+rt),lt+C.height>m&&(lt=t.canvasY-C.height-V+Q),Wa(o,{top:"".concat(lt,"px"),left:"".concat(st,"px"),visibility:"visible"});var Ct=this.get("trigger")==="click",At=function(Nt){if(Ct){Ct=!1;return}r.onMenuHide()};document.body.addEventListener("click",At),this.set("handler",At)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),r=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}r&&document.body.removeEventListener("click",r)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&Wa(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,p.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(gS),mS=yS,jv=function(){return jv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},jv.apply(this,arguments)},xS=function(i,e){if(i===void 0&&(i={}),!(!e||e.destroyed)){var t=e.get("plugins").filter(function(n){return n.get("name")==="menu"})[0];if(t&&e.removePlugin(t),i.show||i.show===void 0&&Object.keys(i).length>0){var r=new mS(jv(jv({offsetX:26,offsetY:0,itemTypes:["node"]},i),{name:"menu"}));e.addPlugin(r)}}},bS=function(i){var e=(0,N.useState)(!1),t=e[0],r=e[1],n=function(){document.fullscreenElement||r(!1)},a=function(){i&&i.requestFullscreen&&i.requestFullscreen().then(function(){r(!0)}).catch(function(u){Kh.error("requestFullscreen error: ",u)})},o=function(){document.exitFullscreen&&document.exitFullscreen().then(function(){r(!1)}).catch(function(u){Kh.error("exitFullscreen error: ",u)})},s=function(){if(!i){Kh.error("need dom");return}t?o():a()};return(0,N.useEffect)(function(){return document.addEventListener("fullscreenchange",n,!1),function(){document.removeEventListener("fullscreenchange",n)}},[]),[t,s]},ES=bS,wS=function(i){var e=i.toolbarCfg,t=i.container,r=i.graph,n=(0,N.useRef)(),a=(0,N.useRef)(),o=(0,N.useRef)(),s=(0,N.useRef)(1),u=e.zoomFactor,f=u===void 0?.25:u,c=e.renderIcon,l=e.customContent,x=ES(t),m=x[0],C=x[1],R=function(){return[window.outerWidth,window.outerHeight]},V=function(At){var Nt,Kt=At?R():[a.current,o.current];(Nt=n.current)===null||Nt===void 0||Nt.changeSize(Kt[0],Kt[1])},Q=function(){return t?{x:t.clientWidth/2,y:t.clientHeight/2}:{x:0,y:0}},rt=function(){var At;(At=n.current)===null||At===void 0||At.zoom(Math.min(s.current+f,5),Q())},st=function(){var At;(At=n.current)===null||At===void 0||At.zoom(Math.max(s.current-f,.25),Q())};(0,N.useEffect)(function(){r&&(n.current=r,a.current=t==null?void 0:t.clientWidth,o.current=t==null?void 0:t.clientHeight)},[r]);var lt=function(){C(),V(!document.fullscreenElement)},Ct=l||c;return Ct?Ct({zoomIn:rt,zoomOut:st,toggleFullscreen:lt,fullscreen:m,graph:r}):N.createElement(N.Fragment,null,m?N.createElement("span",{style:{cursor:"pointer"},onClick:lt},"\u2684"):N.createElement("span",{style:{cursor:"pointer"},onClick:lt},"\u2610"),N.createElement("span",{style:{cursor:"pointer"},onClick:rt},"+"),N.createElement("span",{style:{cursor:"pointer"},onClick:st},"-"))},Hv=function(){return Hv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Hv.apply(this,arguments)},_S=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t},SS=function(i,e,t){var r;i===void 0&&(i={});var n=i.show,a=i.className,o=i.style,s=_S(i,["show","className","style"]),u=e==null?void 0:e.get("id");if(!(!e||e.destroyed)){var f="".concat(u,"-toolbar"),c=document.querySelector("#".concat(f));if(c&&((r=c.parentNode)===null||r===void 0||r.removeChild(c)),n){var l=ig(N.createElement(wS,{graph:e,container:t,toolbarCfg:s}),{className:a!=null?a:"charts-toolbar",id:f},"toolbar",Hv(Hv({},K_),o));t.appendChild(l)}}},Dy={},MS=function(i,e){Dy[i]=e},KM=function(i){return Dy[i]},du=function(){return du=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},du.apply(this,arguments)};function CS(i,e,t){t===void 0&&(t={});var r=(0,N.useRef)(null),n=(0,N.useRef)(),a=(0,N.useRef)(),o=(0,N.useRef)(),s=e.data,u=e.width,f=e.height,c=e.layout,l=e.minimapCfg,x=e.behaviors,m=e.fitCenter,C=e.nodeCfg,R=e.edgeCfg,V=e.markerCfg,Q=e.level,rt=e.toolbarCfg,st=e.tooltipCfg,lt=e.menuCfg,Ct=e.customLayout,At=n.current,Nt=function(wr){wr.forEach(function(Mr){var vr,sn,nn=Mr.getModel(),mr=nn.source,Dr=nn.target,qr=(vr=At==null?void 0:At.findById(mr))===null||vr===void 0?void 0:vr.get("visible"),un=(sn=At==null?void 0:At.findById(Dr))===null||sn===void 0?void 0:sn.get("visible");(qr===!1||un===!1)&&Mr.changeVisibility(!1)})},Kt=function(){var wr,Mr;if(At){var vr=s,sn=vr;Q&&(wr=by(s,Q),vr=wr[0],sn=wr[1]),At.changeData(vr),(Mr=At.get("eventData"))===null||Mr===void 0||Mr.setData(sn),Nt(At.getEdges()),m&&At.fitCenter(),eg(At.get("id"))}},ge=function(){At==null||At.updateLayout(c),m&&(At==null||At.fitCenter())},ue=function(){if(At){var wr=C!=null?C:{},Mr=wr.type,vr=wr.anchorPoints,sn=wr.style,nn=wr.title;At.getNodes().forEach(function(mr){var Dr=Ey(vr,mr.getModel());At.updateItem(mr,{nodeCfg:C,markerCfg:V,type:Mr,style:sn,anchorPoints:Dr,labelCfg:nn})}),eg(At.get("id"))}},Ae=function(){if(At){var wr=R!=null?R:{},Mr=wr.type,vr=wr.style,sn=wr.startArrow,nn=wr.endArrow,mr=wr.label;At.getEdges().forEach(function(Dr){if(["fund-line","labels-line"].includes(Mr))At.updateItem(Dr,{edgeCfg:R});else{var qr=Dr.getModel(),un=ch(sn,qr),Dn=ch(nn,qr),Rn=mr!=null?mr:{},ca=Rn.style,ra=Rn.content;At.updateItem(Dr,{type:Mr,label:Zh(ra,qr,At),labelCfg:{style:Zh(ca,qr,At)},style:du({stroke:"#ccc",startArrow:un,endArrow:Dn},typeof vr=="function"?vr(qr,At):vr)})}})}},Ke=function(){At&&At.getNodes().forEach(function(wr){var Mr=(typeof V=="function"?V(wr.getModel(),wr.get("group")):V).position,vr=Mr===void 0?"right":Mr,sn=wr.getBBox(),nn=sn.width,mr=sn.height,Dr=wr.get("group").get("children").find(function(qr){return qr.get("name")==="collapse-icon"});Dr&&(Dr==null||Dr.attr(du({},wy(vr,[nn,mr]))))})},Gr=function(wr){var Mr=t.name,vr=Mr===void 0?"":Mr;if(vr!=="FundFlowGraph")return wr;if(wr){var sn=wr.hover,nn=sn===void 0?{}:sn,mr=nn.endArrow,Dr=nn.startArrow;return!mr&&!Dr?wr:{hover:du(du({},nn),{endArrow:mr?ch(mr):!1,startArrow:Dr?ch(Dr):!1})}}};return(0,N.useEffect)(function(){var wr;if(At&&!At.destroyed){if((0,p.isEqual)(s,o.current))return;if(t.name==="RadialGraph"&&!(!((wr=o.current.nodes)===null||wr===void 0)&&wr.length)){var Mr=_y(s);At.set("centerNode",Mr),At.updateLayout(du(du({},c),{focusNode:Mr}))}else Kt();o.current=uh(s)}},[s]),(0,N.useEffect)(function(){var wr,Mr,vr,sn,nn;if(At&&!At.destroyed){if((0,p.isEqual)(e,a.current))return;!Ct&&!(0,p.isEqual)(c,(wr=a.current)===null||wr===void 0?void 0:wr.layout)&&ge(),(0,p.isEqual)(l,(Mr=a.current)===null||Mr===void 0?void 0:Mr.minimapCfg)||Cy(l,At),(0,p.isEqual)(C,(vr=a.current)===null||vr===void 0?void 0:vr.nodeCfg)||ue(),(0,p.isEqual)(R,(sn=a.current)===null||sn===void 0?void 0:sn.edgeCfg)||Ae(),(0,p.isEqual)(V,(nn=a.current)===null||nn===void 0?void 0:nn.markerCfg)||Ke(),a.current=e}},[e]),(0,N.useEffect)(function(){if(At&&!At.destroyed){var wr=Sy(u,f,r);At.changeSize(wr[0],wr[1])}},[r,u,f]),(0,N.useEffect)(function(){if(At&&!At.destroyed){var wr=At.get("modes").default,Mr=[];wr.forEach(function(vr){(0,p.isObject)(vr)?Mr.push(vr.type):(0,p.isString)(vr)&&Mr.push(vr)}),At.removeBehaviors(Mr,"default"),At.addBehaviors(x,"default")}},[x]),(0,N.useEffect)(function(){if(r.current&&i&&!n.current){var wr=t.name,Mr=wr===void 0?"":wr,vr=t.bindEvents,sn=Sy(u,f,r),nn=e.nodeCfg,mr=e.edgeCfg,Dr=e.behaviors,qr=Dr===void 0?[]:Dr,un=e.layout,Dn=e.animate,Rn=e.autoFit,ca=e.fitCenter,ra=e.onReady,qa=e.customLayout,Pa=e.fetchLoading,Ta=nn!=null?nn:{},oi=Ta.type,Ei=Ta.anchorPoints,wi=Ta.nodeStateStyles,Cs=Ta.style,mi=Ta.title,As=Ta.linkCenter,Vi=Ta.getChildren,ji=Ta.asyncData,eo=mr!=null?mr:{},No=eo.type,Go=eo.style,Va=eo.startArrow,di=eo.endArrow,Sa=eo.label,gi=eo.edgeStateStyles,Mi={container:r.current,width:sn[0],height:sn[1],animate:Dn,linkCenter:As,modes:{default:qr},defaultNode:du(du({},nn),{nodeCfg:nn}),defaultEdge:du(du({},(0,p.omit)(mr,["label"])),{edgeCfg:mr,labelCfg:Sa==null?void 0:Sa.style}),nodeStateStyles:wi,edgeStateStyles:Gr(gi),layout:qa?void 0:un,fitView:Rn,fitCenter:ca,extraPlugin:{getChildren:Vi,fetchLoading:Pa},markerCfg:V};n.current=new Dl[i](Mi);var na=tS(n.current,Mr),pa=n.current;pa.set("id",na),MS(na,pa);var ei=["fund-card","indicator-card","file-tree-node","organization-card"],Ci=function(La){return(0,p.isString)(La)?La:Mr==="FundFlowGraph"?La==null?void 0:La.text:La==null?void 0:La.title};pa.node(function(La){if(ei.includes(oi)){var ps=Ey(Ei,La);return La.markerCfg=V,La.edgeCfg=mr,{anchorPoints:ps,_draggable:qr.includes("drag-node"),_graphId:na}}var Pi=(mi!=null?mi:{}).style;return{_graphId:na,label:Ci(La.value),labelCfg:{style:Zh(Pi,La,pa)},style:du({stroke:"#ccc"},typeof Cs=="function"?Cs(La,pa):Cs)}});var ni=function(La){var ps=(Sa!=null?Sa:{}).content;if(["DecompositionTreeGraph","OrganizationGraph","RadialTreeGraph"].includes(Mr))return Zh(ps,La,pa);if(["FundFlowGraph","FlowAnalysisGraph"].includes(Mr)){var Pi=La.value;return typeof Pi=="object"?Pi==null?void 0:Pi.text:Pi}return La.value};if(["fund-line","labels-line"].includes(No)||pa.edge(function(La){var ps=ch(Va,La),Pi=ch(di,La),gc=(Sa!=null?Sa:{}).style;return{label:ni(La),labelCfg:{style:Zh(gc,La,pa)},style:du({stroke:"#ccc",startArrow:ps,endArrow:Pi},typeof Go=="function"?Go(La,pa):Go)}}),eS(pa,e),Mr==="RadialGraph"){var ci=_y(s);pa.set("centerNode",ci)}typeof vr=="function"&&vr({graph:pa,level:Q,asyncData:ji,getChildren:Vi,fetchLoading:Pa,layout:un}),Q_(pa,s,Q),ca&&pa.fitCenter(),ra&&ra(pa),o.current=uh(s)}},[]),(0,N.useEffect)(function(){if(n.current){var wr=n.current;Cy(l,wr),vS(st,wr),xS(lt,wr),SS(rt,wr,r.current)}},[n,rt,st,lt]),(0,N.useEffect)(function(){return function(){At!=null&&At.current&&!At.current.destroyed&&At.current.destroy()}},[]),{container:r}}var AS=function(i){return Object.prototype.toString.call(i).slice(8,-1)},qh=function(){return qh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},qh.apply(this,arguments)};function TS(i,e){var t=uh(i),r=(0,N.useCallback)(function(a,o){var s=qh({},o),u=Object.keys(a);return u.forEach(function(f){AS(a[f])==="Object"?s[f]=qh(qh({},o[f]),a[f]):s[f]=a[f]}),s},[i,e]),n=r(t,e);return{uProps:n}}var Ny="marker:click",Kv=function(){return Kv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Kv.apply(this,arguments)},IS=function(i,e){e===void 0&&(e="");var t=e.split("-");t.shift();var r=i;return t.forEach(function(n){r&&(r=r.children[Number(n)])}),r!=null&&r.children?r.children.map(function(n){return Kv(Kv({},n),{children:[]})}):[]},OS=function(i,e){var t="".concat(_u,"-antd-loading");if(e){var r=(0,p.isFunction)(e)?e(i):e;document.body.appendChild(ig(r,{className:t},"fetchloading"))}else{var n=document.createElement("div");n.className=t;var a={position:"fixed",left:"0",top:"0",width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0, 0.25)",color:"#fff",fontSize:"16px",zIndex:999};Ly(n,a);var o=document.createElement("span");o.innerText="loading...",n.appendChild(o),document.body.appendChild(n)}},LS=function(i,e,t){var r=i.get("eventData").getData(),n=t.split("-");n.shift();var a=r;n.forEach(function(o){a=a.children[Number(o)]}),a.children=e},DS=function(){var i=document.getElementsByClassName("".concat(_u,"-antd-loading"));Array.from(i).forEach(function(e){document.body.removeChild(e)})},og=function(){return og=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},og.apply(this,arguments)},NS=function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(c){try{f(r.next(c))}catch(l){o(l)}}function u(c){try{f(r.throw(c))}catch(l){o(l)}}function f(c){c.done?a(c.value):n(c.value).then(s,u)}f((r=r.apply(i,e||[])).next())})},PS=function(i,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,n,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(c){return u([f,c])}}function u(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(r=1,n&&(a=f[0]&2?n.return:f[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,f[1])).done)return a;switch(n=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,n=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1],a=f;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(f);break}a[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(i,t)}catch(c){f=[6,c],n=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},kS=function(i){var e=i.graph,t=i.level,r=i.getChildren,n=i.fetchLoading,a=function(o){return NS(void 0,void 0,void 0,function(){var s,u,f,c,l,x,m,C,R,V,Q,rt,st;return PS(this,function(lt){switch(lt.label){case 0:return s=o.item,u=s.getModel(),!((st=o.target.get("name"))===null||st===void 0)&&st.startsWith("collapse-icon")?(f=s.getModel(),c=f.collapsed,l=f.g_currentPath,x=f.children,m=x===void 0?[]:x,C=f.g_parentId,R=f.g_level,V=f.id,Q=t&&!m.length&&IS(e.get("eventData").getData(),l),r&&!(m!=null&&m.length)&&!(Q!=null&&Q.length)?(OS(u,n),[4,r(s.getModel())]):[3,2]):[3,3];case 1:rt=lt.sent(),rt&&(rt=rt.map(function(Ct,At){var Nt;return og((Nt={},Nt["".concat(_u,"_level")]=R+1,Nt["".concat(_u,"_parentId")]="".concat(C,"-").concat(V),Nt["".concat(_u,"_currentPath")]="".concat(l,"-").concat(At),Nt),Ct)}),LS(e,rt,l)),Q=rt,DS(),lt.label=2;case 2:(Q==null?void 0:Q.length)>0?(u.children=Q,e.updateChild(u,u.id),e.updateItem(s,{collapsed:!1}),e.refreshItem(s),e.emit(Ny,o,{type:"fetch",collapsed:!0})):(e.updateItem(s,{collapsed:!c}),e.layout(),e.emit(Ny,o,{type:"collapse",collapsed:!!c})),lt.label=3;case 3:return[2]}})})};e.on("node:click",function(o){a(o)}),e.on("node:touchstart",function(o){a(o)})},RS=function(i){if(typeof i=="number")return[i,i,i,i];var e=[];switch(i.length){case 1:e=[i[0],i[0],i[0],i[0]];break;case 2:e=[i[0],i[1],i[0],i[1]];break;case 3:e=[i[0],i[1],i[2],i[1]];break;case 4:e=i;break;default:break}return e},Py=function(i,e,t,r){return typeof i=="function"?i(e,t,r)||{}:i||{}},Qh=function(){return Qh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Qh.apply(this,arguments)},BS=function(i,e,t,r){var n=i.show,a=i.position,o=i.collapsed,s=i.style;n&&e.addShape("marker",{attrs:Qh(Qh(Qh({},wy(a,t)),{r:6,cursor:"pointer",symbol:o?Dl.Marker.expand:Dl.Marker.collapse,stroke:yy.stroke,lineWidth:1,fill:"#fff"}),s),defaultCollapsed:!1,name:r?"collapse-icon-".concat(a):"collapse-icon",position:a})},dc=function(){return dc=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},dc.apply(this,arguments)},FS=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))},GS=function(){var i={width:12,height:12};Dl.registerNode("organization-card",{draw:function(e,t){var r,n,a;e===void 0&&(e={});var o=e.value,s=o===void 0?{}:o,u=e.nodeCfg,f=e.markerCfg,c=e._draggable,l=dc({},s),x=!1;l.text&&(x=!0,l.name=l.text),l.value&&(x=!0,l.title=l.value);var m=u,C=m.style,R=m.padding,V=R===void 0?0:R,Q=m.label,rt=Q===void 0?{}:Q,st=m.autoWidth,lt=m.customContent,Ct=rt.style,At=RS(V),Nt=(e==null?void 0:e.size)||[100,30];typeof Nt=="number"&&(Nt=[Nt,Nt]);var Kt=0,ge=Nt[0]-At[1]-At[3],ue=Py(C,e,t),Ae=t.addShape("rect",{attrs:dc(dc({x:0,y:0,width:Nt[0],height:Nt[1]},yy),ue),name:"main-box",draggable:c});if(l){var Ke=function(ra){if(x){var qa={name:"text",title:"value"};return qa[ra]}return ra};Kt+=At[0];var Gr=function(ra,qa,Pa,Ta){Ta===void 0&&(Ta=0);var oi=0,Ei=[],wi=["icon","name","title"],Cs=function(mi,As){var Vi=As.fontSize,ji=Vi===void 0?12:Vi,eo=0,No=0,Go=st?oi&&oi+At[3]:(qa+oi)/2;switch(mi){case"icon":eo=Pa,No=Kt;break;case"name":eo=Pa+Go,No=ra.title?At[0]:(Nt[1]-ji)/2;break;case"title":eo=Pa+Go,No=ra.name?At[0]+Ei[1]+H_:(Nt[1]-ji)/2;break;default:break}return{x:eo,y:No}};return wi.forEach(function(mi,As){var Vi=mi.startsWith("icon"),ji=Py(Ct,e,t,Ke(mi));mi==="icon"&&ra[mi]&&(oi=ji.width||32);var eo=t.addShape(Vi?"image":"text",{attrs:dc(dc(dc(dc({textBaseline:"top",textAlign:st?"start":"center"},Cs(mi,ji)),{text:ra[mi],img:ra[mi]}),Vi?i:V_),ji),name:"".concat(mi,"-").concat(Ta,"-").concat(As),draggable:c});Ei.push(eo.getBBox().height)}),Ei},wr=function(ra,qa){var Pa;qa===void 0&&(qa=0);var Ta=[];lt?Ta.push((Pa=lt(ra,t,{startX:At[3],startY:Kt,width:ge}))!==null&&Pa!==void 0?Pa:0):Ta.push.apply(Ta,Gr(ra,ge,At[3],qa)),Kt+=Math.max.apply(Math,Ta)};wr(l)}if(Ae==null||Ae.attr("height",Math.max(Kt+At[2],Nt[1])),st){var Mr=Math.max.apply(Math,FS([Nt[0]],(r=t==null?void 0:t.getChildren())===null||r===void 0?void 0:r.map(function(ra){return(ra.getBBox().maxX||0)+At[1]}),!1));Ae==null||Ae.attr("width",Mr)}if(f){var vr=((a=(n=t==null?void 0:t.get("item"))===null||n===void 0?void 0:n.getModel())!==null&&a!==void 0?a:{}).collapsed,sn=Ae.getBBox(),nn=sn.width,mr=sn.height,Dr=typeof f=="function"?f(e,t):f,qr=Dr.show,un=Dr.position,Dn=un===void 0?"right":un,Rn=Dr.collapsed,ca=Dr.style;BS({show:qr,position:Dn,collapsed:vr!=null?vr:Rn,style:ca},t,[nn,mr]),Ae.attr("defaultCollapsed",Rn)}return Ae},update:void 0},"single-node")},zS=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t};GS();var US={fill:"#91d5ff",stroke:"#40a9ff",radius:2},WS={type:"compactBox",direction:"TB",getId:function(e){return e.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 40},getHGap:function(){return 70}},XS={nodeCfg:{type:"organization-card",size:[100,44],style:US,padding:6,anchorPoints:[[.5,0],[.5,1]],nodeStateStyles:py,label:{style:function(i,e,t){var r={icon:{width:32,height:32},title:{fill:"#fff"},name:{fill:"#000"}};return t?r[t]:{}}}},edgeCfg:{type:"polyline",endArrow:{type:"triangle",fill:"#91d5ff"},edgeStateStyles:py,style:{stroke:"#91d5ff"}},behaviors:["zoom-canvas","drag-canvas"],layout:WS,animate:!0,markerPosition:"right",autoFit:!0,fitCenter:!0,style:{position:"relative",height:"inherit",backgroundColor:"#fff"}},YS=function(i){var e=TS(i,XS).uProps,t=e.className,r=e.style,n=e.loading,a=e.loadingTemplate,o=e.errorTemplate,s=zS(e,["className","style","loading","loadingTemplate","errorTemplate"]),u=CS("TreeGraph",s,{name:"OrganizationGraph",bindEvents:kS}).container;return N.createElement(Gt,{errorTemplate:o},n&&N.createElement(Dt,{loadingTemplate:a}),N.createElement("div",{className:t,style:r,ref:u}))},VS=YS},62238:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var z=function(B,L){var k=B.nodes,D=B.edges,w=[],b={};if(!k)throw new Error("invalid nodes data!");return k&&k.forEach(function(g,y){b[g.id]=y;var d=[];w.push(d)}),D&&D.forEach(function(g){var y=g.source,d=g.target,S=b[y],_=b[d];!S&&S!==0||!_&&_!==0||(w[S][_]=1,L||(w[_][S]=1))}),w},F=z;U.default=F},10369:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),Object.defineProperty(U,"GADDIAsync",{enumerable:!0,get:function(){return F.GADDIAsync}}),Object.defineProperty(U,"connectedComponentAsync",{enumerable:!0,get:function(){return F.connectedComponentAsync}}),U.default=void 0,Object.defineProperty(U,"detectAllCyclesAsync",{enumerable:!0,get:function(){return F.detectAllCyclesAsync}}),Object.defineProperty(U,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return F.detectAllDirectedCycleAsync}}),Object.defineProperty(U,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return F.detectAllUndirectedCycleAsync}}),Object.defineProperty(U,"detectCycleAsync",{enumerable:!0,get:function(){return F.detectCycleAsync}}),U.detectDirectedCycleAsync=void 0,Object.defineProperty(U,"dijkstraAsync",{enumerable:!0,get:function(){return F.dijkstraAsync}}),Object.defineProperty(U,"findAllPathAsync",{enumerable:!0,get:function(){return F.findAllPathAsync}}),Object.defineProperty(U,"findShortestPathAsync",{enumerable:!0,get:function(){return F.findShortestPathAsync}}),Object.defineProperty(U,"floydWarshallAsync",{enumerable:!0,get:function(){return F.floydWarshallAsync}}),Object.defineProperty(U,"getAdjMatrixAsync",{enumerable:!0,get:function(){return F.getAdjMatrixAsync}}),Object.defineProperty(U,"getDegreeAsync",{enumerable:!0,get:function(){return F.getDegreeAsync}}),Object.defineProperty(U,"getInDegreeAsync",{enumerable:!0,get:function(){return F.getInDegreeAsync}}),Object.defineProperty(U,"getNeighborsAsync",{enumerable:!0,get:function(){return F.getNeighborsAsync}}),Object.defineProperty(U,"getOutDegreeAsync",{enumerable:!0,get:function(){return F.getOutDegreeAsync}}),Object.defineProperty(U,"labelPropagationAsync",{enumerable:!0,get:function(){return F.labelPropagationAsync}}),Object.defineProperty(U,"louvainAsync",{enumerable:!0,get:function(){return F.louvainAsync}}),Object.defineProperty(U,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return F.minimumSpanningTreeAsync}}),Object.defineProperty(U,"pageRankAsync",{enumerable:!0,get:function(){return F.pageRankAsync}});var F=z(30485),j=F.detectCycleAsync;U.detectDirectedCycleAsync=j;var B={getAdjMatrixAsync:F.getAdjMatrixAsync,connectedComponentAsync:F.connectedComponentAsync,getDegreeAsync:F.getDegreeAsync,getInDegreeAsync:F.getInDegreeAsync,getOutDegreeAsync:F.getOutDegreeAsync,detectCycleAsync:F.detectCycleAsync,detectDirectedCycleAsync:j,detectAllCyclesAsync:F.detectAllCyclesAsync,detectAllDirectedCycleAsync:F.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:F.detectAllUndirectedCycleAsync,dijkstraAsync:F.dijkstraAsync,findAllPathAsync:F.findAllPathAsync,findShortestPathAsync:F.findShortestPathAsync,floydWarshallAsync:F.floydWarshallAsync,labelPropagationAsync:F.labelPropagationAsync,louvainAsync:F.louvainAsync,minimumSpanningTreeAsync:F.minimumSpanningTreeAsync,pageRankAsync:F.pageRankAsync,getNeighborsAsync:F.getNeighborsAsync,GADDIAsync:F.GADDIAsync};U.default=B},83764:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=B(z(93026)),j=z(70643);function B(w){return w&&w.__esModule?w:{default:w}}function L(w){w===void 0&&(w={});var b=w,g=function(){},y=function(){var d={};return function(S){var _=S.next,E=_;return d[E]?!1:(d[E]=!0,!0)}}();return b.allowTraversal=w.allowTraversal||y,b.enter=w.enter||g,b.leave=w.leave||g,b}var k=function(b,g,y,d){d===void 0&&(d=!0);var S=L(y),_=new F.default,E=b.edges,I=E===void 0?[]:E;_.enqueue(g);for(var P="",N=function(){var nt=_.dequeue();S.enter({current:nt,previous:P}),(0,j.getNeighbors)(nt,I,d?"target":void 0).forEach(function(X){S.allowTraversal({previous:P,current:nt,next:X})&&_.enqueue(X)}),S.leave({current:nt,previous:P}),P=nt};!_.isEmpty();)N()},D=k;U.default=D},59527:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=L,U.detectStrongConnectComponents=U.detectConnectedComponents=void 0;var F=z(70643),j=function(D){for(var w=D.nodes,b=w===void 0?[]:w,g=D.edges,y=g===void 0?[]:g,d=[],S={},_=[],E=function H(nt){_.push(nt),S[nt.id]=!0;for(var X=(0,F.getNeighbors)(nt.id,y),Y=function(it){var tt=X[it];if(!S[tt]){var ut=b.filter(function(vt){return vt.id===tt});ut.length>0&&H(ut[0])}},Z=0;Z<X.length;++Z)Y(Z)},I=0;I<b.length;I++){var P=b[I];if(!S[P.id]){E(P);for(var N=[];_.length>0;)N.push(_.pop());d.push(N)}}return d};U.detectConnectedComponents=j;var B=function(D){for(var w=D.nodes,b=w===void 0?[]:w,g=D.edges,y=g===void 0?[]:g,d=[],S={},_={},E={},I=[],P=0,N=function Y(Z){_[Z.id]=P,E[Z.id]=P,P+=1,d.push(Z),S[Z.id]=!0;for(var J=(0,F.getNeighbors)(Z.id,y,"target").filter(function(pt){return b.map(function(Dt){return Dt.id}).indexOf(pt)>-1}),it=function(Dt){var Ot=J[Dt];if(!_[Ot]&&_[Ot]!==0){var te=b.filter(function(Gt){return Gt.id===Ot});te.length>0&&Y(te[0]),E[Z.id]=Math.min(E[Z.id],E[Ot])}else S[Ot]&&(E[Z.id]=Math.min(E[Z.id],_[Ot]))},tt=0;tt<J.length;tt++)it(tt);if(E[Z.id]===_[Z.id]){for(var ut=[];d.length>0;){var vt=d.pop();if(S[vt.id]=!1,ut.push(vt),vt===Z)break}ut.length>0&&I.push(ut)}},H=0,nt=b;H<nt.length;H++){var X=nt[H];!_[X.id]&&_[X.id]!==0&&N(X)}return I};U.detectStrongConnectComponents=B;function L(k,D){return D?B(k):j(k)}},92935:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.secondReg=U.dateReg=void 0;var z=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;U.secondReg=z;var F=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;U.dateReg=F},82556:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.getOutDegree=U.getInDegree=U.default=void 0;var z=function(k){var D={},w=k.nodes,b=w===void 0?[]:w,g=k.edges,y=g===void 0?[]:g;return b.forEach(function(d){D[d.id]={degree:0,inDegree:0,outDegree:0}}),y.forEach(function(d){D[d.source].degree++,D[d.source].outDegree++,D[d.target].degree++,D[d.target].inDegree++}),D},F=z;U.default=F;var j=function(k,D){var w=z(k);return w[D]?z(k)[D].inDegree:0};U.getInDegree=j;var B=function(k,D){var w=z(k);return w[D]?z(k)[D].outDegree:0};U.getOutDegree=B},94282:function(xr,U,z){"use strict";function F(_){"@babel/helpers - typeof";return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},F(_)}Object.defineProperty(U,"__esModule",{value:!0}),U.detectAllUndirectedCycle=U.detectAllDirectedCycle=U.detectAllCycles=U.default=void 0;var j=w(z(45891)),B=D(z(59527)),L=z(70643);function k(_){if(typeof WeakMap!="function")return null;var E=new WeakMap,I=new WeakMap;return(k=function(N){return N?I:E})(_)}function D(_,E){if(!E&&_&&_.__esModule)return _;if(_===null||F(_)!=="object"&&typeof _!="function")return{default:_};var I=k(E);if(I&&I.has(_))return I.get(_);var P={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var H in _)if(H!=="default"&&Object.prototype.hasOwnProperty.call(_,H)){var nt=N?Object.getOwnPropertyDescriptor(_,H):null;nt&&(nt.get||nt.set)?Object.defineProperty(P,H,nt):P[H]=_[H]}return P.default=_,I&&I.set(_,P),P}function w(_){return _&&_.__esModule?_:{default:_}}var b=function(E){var I=null,P=E.nodes,N=P===void 0?[]:P,H={},nt={},X={},Y={};N.forEach(function(it){nt[it.id]=it});for(var Z={enter:function(tt){var ut=tt.current,vt=tt.previous;if(X[ut]){I={};for(var pt=ut,Dt=vt;Dt!==ut;)I[pt]=Dt,pt=Dt,Dt=H[Dt];I[pt]=Dt}else X[ut]=ut,delete nt[ut],H[ut]=vt},leave:function(tt){var ut=tt.current;Y[ut]=ut,delete X[ut]},allowTraversal:function(tt){var ut=tt.next;return I?!1:!Y[ut]}};Object.keys(nt).length;){var J=Object.keys(nt)[0];(0,j.default)(E,J,Z)}return I},g=function(E,I,P){var N,H;P===void 0&&(P=!0);for(var nt=[],X=(0,B.default)(E,!1),Y=0,Z=X;Y<Z.length;Y++){var J=Z[Y];if(J.length)for(var it=J[0],tt=it.id,ut=[it],vt=(N={},N[tt]=it,N),pt=(H={},H[tt]=new Set,H);ut.length>0;)for(var Dt=ut.pop(),Ot=Dt.id,te=(0,L.getNeighbors)(Ot,E.edges),Gt=function(at){var ht,wt=te[at],Mt=E.nodes.find(function(he){return he.id===wt});if(wt===Ot)nt.push((ht={},ht[wt]=Dt,ht));else if(!(wt in pt))vt[wt]=Dt,ut.push(Mt),pt[wt]=new Set([Dt]);else if(!pt[Ot].has(Mt)){for(var Ut=!0,Vt=[Mt,Dt],Me=vt[Ot];pt[wt].size&&!pt[wt].has(Me)&&(Vt.push(Me),Me!==vt[Me.id]);)Me=vt[Me.id];if(Vt.push(Me),I&&P?(Ut=!1,Vt.findIndex(function(he){return I.indexOf(he.id)>-1})>-1&&(Ut=!0)):I&&!P&&Vt.findIndex(function(he){return I.indexOf(he.id)>-1})>-1&&(Ut=!1),Ut){for(var Wt={},ae=1;ae<Vt.length;ae+=1)Wt[Vt[ae-1].id]=Vt[ae];Vt.length&&(Wt[Vt[Vt.length-1].id]=Vt[0]),nt.push(Wt)}pt[wt].add(Dt)}},K=0;K<te.length;K+=1)Gt(K)}return nt};U.detectAllUndirectedCycle=g;var y=function(E,I,P){P===void 0&&(P=!0);for(var N=[],H=new Set,nt=[],X=[],Y={},Z={},J=function(Me){for(var Wt=[Me];Wt.length>0;){var ae=Wt.pop();H.has(ae)&&(H.delete(ae),nt[ae.id].forEach(function(he){Wt.push(he)}),nt[ae.id].clear())}},it=function Vt(Me,Wt,ae){var he=!1;if(I&&P===!1&&I.indexOf(Me.id)>-1)return he;N.push(Me),H.add(Me);for(var Se=ae[Me.id],xe=0;xe<Se.length;xe+=1){var Bt=Y[Se[xe]];if(Bt===Wt){for(var fe={},Le=1;Le<N.length;Le+=1)fe[N[Le-1].id]=N[Le];N.length&&(fe[N[N.length-1].id]=N[0]),X.push(fe),he=!0}else H.has(Bt)||Vt(Bt,Wt,ae)&&(he=!0)}if(he)J(Me);else for(var xe=0;xe<Se.length;xe+=1){var Bt=Y[Se[xe]];nt[Bt.id].has(Me)||nt[Bt.id].add(Me)}return N.pop(),he},tt=E.nodes,ut=tt===void 0?[]:tt,vt=0;vt<ut.length;vt+=1){var pt=ut[vt],Dt=pt.id;Z[Dt]=vt,Y[vt]=pt}if(I&&P)for(var Ot=function(Me){var Wt=I[Me];Z[ut[Me].id]=Z[Wt],Z[Wt]=0,Y[0]=ut.find(function(ae){return ae.id===Wt}),Y[Z[ut[Me].id]]=ut[Me]},vt=0;vt<I.length;vt++)Ot(vt);for(var te=function(Me){for(var Wt,ae,he=1/0,Se=0;Se<Me.length;Se+=1)for(var xe=Me[Se],Bt=0;Bt<xe.length;Bt++){var fe=Z[xe[Bt].id];fe<he&&(he=fe,ae=Se)}for(var Le=Me[ae],jt=[],Se=0;Se<Le.length;Se+=1){var oe=Le[Se];jt[oe.id]=[];for(var Te=0,se=(0,L.getNeighbors)(oe.id,E.edges,"target").filter(function(Lt){return Le.map(function(Je){return Je.id}).indexOf(Lt)>-1});Te<se.length;Te++){var Ie=se[Te];Ie===oe.id&&!(P===!1&&I.indexOf(oe.id)>-1)?X.push((Wt={},Wt[oe.id]=oe,Wt)):jt[oe.id].push(Z[Ie])}}return{component:Le,adjList:jt,minIdx:he}},Gt=0;Gt<ut.length;){var K=ut.filter(function(Vt){return Z[Vt.id]>=Gt}),p=(0,B.detectStrongConnectComponents)({nodes:K,edges:E.edges}).filter(function(Vt){return Vt.length>1});if(p.length===0)break;var at=te(p),ht=at.minIdx,wt=at.adjList,Mt=at.component;if(Mt.length>1){Mt.forEach(function(Vt){nt[Vt.id]=new Set});var Ut=Y[ht];if(I&&P&&I.indexOf(Ut.id)===-1)return X;it(Ut,Ut,wt),Gt=ht+1}else break}return X};U.detectAllDirectedCycle=y;var d=function(E,I,P,N){return N===void 0&&(N=!0),I?y(E,P,N):g(E,P,N)};U.detectAllCycles=d;var S=b;U.default=S},45891:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=L;var F=z(70643);function j(k){k===void 0&&(k={});var D=k,w=function(){},b=function(){var g={};return function(y){var d=y.next;return g[d]?!1:(g[d]=!0,!0)}}();return D.allowTraversal=k.allowTraversal||b,D.enter=k.enter||w,D.leave=k.leave||w,D}function B(k,D,w,b,g){g===void 0&&(g=!0),b.enter({current:D,previous:w});var y=k.edges,d=y===void 0?[]:y;(0,F.getNeighbors)(D,d,g?"target":void 0).forEach(function(S){b.allowTraversal({previous:w,current:D,next:S})&&B(k,S,D,b,g)}),b.leave({current:D,previous:w})}function L(k,D,w,b){b===void 0&&(b=!0),B(k,D,"",j(w),b)}},78089:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=z(97582),j=z(13810),B=z(70643),L=function(g,y,d){for(var S=1/0,_,E=0;E<y.length;E++){var I=y[E].id;!d[I]&&g[I]<=S&&(S=g[I],_=y[E])}return _},k=function(g,y,d,S){var _=g.nodes,E=_===void 0?[]:_,I=g.edges,P=I===void 0?[]:I,N=[],H={},nt={},X={};E.forEach(function(vt,pt){var Dt=vt.id;N.push(Dt),nt[Dt]=1/0,Dt===y&&(nt[Dt]=0)});for(var Y=E.length,Z=function(pt){var Dt=L(nt,E,H),Ot=Dt.id;if(H[Ot]=!0,nt[Ot]===1/0)return"continue";var te=[];d?te=(0,B.getOutEdgesNodeId)(Ot,P):te=(0,B.getEdgesByNodeId)(Ot,P),te.forEach(function(Gt){var K=Gt.target,p=Gt.source,at=K===Ot?p:K,ht=S&&Gt[S]?Gt[S]:1;nt[at]>nt[Dt.id]+ht?(nt[at]=nt[Dt.id]+ht,X[at]=[Dt.id]):nt[at]===nt[Dt.id]+ht&&X[at].push(Dt.id)})},J=0;J<Y;J++)Z(J);X[y]=[y];var it={};for(var tt in nt)nt[tt]!==1/0&&w(y,tt,X,it);var ut={};for(var tt in it)ut[tt]=it[tt][0];return{length:nt,path:ut,allPath:it}},D=k;U.default=D;function w(b,g,y,d){if(b===g)return[b];if(d[g])return d[g];for(var S=[],_=0,E=y[g];_<E.length;_++){var I=E[_],P=w(b,I,y,d);if(!P)return;for(var N=0,H=P;N<H.length;N++){var nt=H[N];(0,j.isArray)(nt)?S.push((0,F.__spreadArray)((0,F.__spreadArray)([],nt,!0),[g],!1)):S.push([nt,g])}}return d[g]=S,d[g]}},41727:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.findShortestPath=U.findAllPath=void 0;var F=B(z(78089)),j=z(70643);function B(D){return D&&D.__esModule?D:{default:D}}var L=function(w,b,g,y,d){var S=(0,F.default)(w,b,y,d),_=S.length,E=S.path,I=S.allPath;return{length:_[g],path:E[g],allPath:I[g]}};U.findShortestPath=L;var k=function(w,b,g,y){var d;if(b===g)return[[b]];var S=w.edges,_=S===void 0?[]:S,E=[b],I=(d={},d[b]=!0,d),P=[],N=[],H=y?(0,j.getNeighbors)(b,_,"target"):(0,j.getNeighbors)(b,_);for(P.push(H);E.length>0&&P.length>0;){var nt=P[P.length-1];if(nt.length){var X=nt.shift();X&&(E.push(X),I[X]=!0,H=y?(0,j.getNeighbors)(X,_,"target"):(0,j.getNeighbors)(X,_),P.push(H.filter(function(J){return!I[J]})))}else{var Y=E.pop();I[Y]=!1,P.pop();continue}if(E[E.length-1]===g){var Z=E.map(function(it){return it});N.push(Z);var Y=E.pop();I[Y]=!1,P.pop()}}return N};U.findAllPath=k},75033:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=j(z(62238));function j(k){return k&&k.__esModule?k:{default:k}}var B=function(D,w){for(var b=(0,F.default)(D,w),g=[],y=b.length,d=0;d<y;d+=1){g[d]=[];for(var S=0;S<y;S+=1)d===S?g[d][S]=0:b[d][S]===0||!b[d][S]?g[d][S]=1/0:g[d][S]=b[d][S]}for(var _=0;_<y;_+=1)for(var d=0;d<y;d+=1)for(var S=0;S<y;S+=1)g[d][S]>g[d][_]+g[_][S]&&(g[d][S]=g[d][_]+g[_][S]);return g},L=B;U.default=L},21146:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=z(13810),j=z(68575),B=function(){function S(_,E,I,P,N){this.fromNode=_,this.toNode=E,this.nodeEdgeNodeLabel={nodeLabel1:I||j.VACANT_NODE_LABEL,edgeLabel:P||j.VACANT_EDGE_LABEL,nodeLabel2:N||j.VACANT_NODE_LABEL}}return S.prototype.equalTo=function(_){return this.fromNode===_.formNode&&this.toNode===_.toNode&&this.nodeEdgeNodeLabel===_.nodeEdgeNodeLabel},S.prototype.notEqualTo=function(_){return!this.equalTo(_)},S}(),L=function(){function S(){this.rmpath=[],this.dfsEdgeList=[]}return S.prototype.equalTo=function(_){var E=this.dfsEdgeList.length,I=_.length;if(E!==I)return!1;for(var P=0;P<E;P++)if(this.dfsEdgeList[P]!==_[P])return!1;return!0},S.prototype.notEqualTo=function(_){return!this.equalTo(_)},S.prototype.pushBack=function(_,E,I,P,N){return this.dfsEdgeList.push(new B(_,E,I,P,N)),this.dfsEdgeList},S.prototype.toGraph=function(_,E){_===void 0&&(_=j.VACANT_GRAPH_ID),E===void 0&&(E=!1);var I=new j.Graph(_,!0,E);return this.dfsEdgeList.forEach(function(P){var N=P.fromNode,H=P.toNode,nt=P.nodeEdgeNodeLabel,X=nt.nodeLabel1,Y=nt.edgeLabel,Z=nt.nodeLabel2;X!==j.VACANT_NODE_LABEL&&I.addNode(N,X),Z!==j.VACANT_NODE_LABEL&&I.addNode(H,Z),X!==j.VACANT_NODE_LABEL&&Z!==X&&I.addEdge(void 0,N,H,Y)}),I},S.prototype.buildRmpath=function(){this.rmpath=[];for(var _=void 0,E=this.dfsEdgeList.length,I=E-1;I>=0;I--){var P=this.dfsEdgeList[I],N=P.fromNode,H=P.toNode;N<H&&(_===void 0||H===_)&&(this.rmpath.push(I),_=N)}return this.rmpath},S.prototype.getNodeNum=function(){var _={};return this.dfsEdgeList.forEach(function(E){_[E.fromNode]||(_[E.fromNode]=!0),_[E.toNode]||(_[E.toNode]=!0)}),Object.keys(_).length},S}(),k=function(){function S(_){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!_){for(;_;){var E=_.edge;this.edges.push(E),this.nodesUsed[E.from]=1,this.nodesUsed[E.to]=1,this.edgesUsed[E.id]=1,_=_.preNode}this.edges=this.edges.reverse()}}return S.prototype.hasNode=function(_){return this.nodesUsed[_.id]===1},S.prototype.hasEdge=function(_){return this.edgesUsed[_.id]===1},S}(),D=function(){function S(_){var E=_.graphs,I=_.minSupport,P=I===void 0?2:I,N=_.minNodeNum,H=N===void 0?1:N,nt=_.maxNodeNum,X=nt===void 0?4:nt,Y=_.top,Z=Y===void 0?10:Y,J=_.directed,it=J===void 0?!1:J,tt=_.verbose,ut=tt===void 0?!1:tt;this.graphs=E,this.dfsCode=new L,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=P,this.top=Z,this.directed=it,this.counter=0,this.maxNodeNum=X,this.minNodeNum=H,this.verbose=ut,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return S.prototype.findForwardRootEdges=function(_,E){var I=this,P=[],N=_.nodeMap;return E.edges.forEach(function(H){(I.directed||E.label<=N[H.to].label)&&P.push(H)}),P},S.prototype.findBackwardEdge=function(_,E,I,P){if(!this.directed&&E===I)return null;for(var N=_.nodeMap,H=N[I.to],nt=H.edges,X=nt.length,Y=0;Y<X;Y++){var Z=nt[Y];if(!(P.hasEdge(Z)||Z.to!==E.from)){if(this.directed){if(N[E.from].label<N[I.to].label||N[E.from].label===N[I.to].label&&E.label<=Z.label)return Z}else if(E.label<Z.label||E.label===Z.label&&N[E.to].label<=N[I.to].label)return Z}}return null},S.prototype.findForwardPureEdges=function(_,E,I,P){for(var N=[],H=E.to,nt=_.nodeMap[H].edges,X=nt.length,Y=0;Y<X;Y++){var Z=nt[Y],J=_.nodeMap[Z.to];I<=J.label&&!P.hasNode(J)&&N.push(Z)}return N},S.prototype.findForwardRmpathEdges=function(_,E,I,P){for(var N=[],H=_.nodeMap,nt=H[E.to].label,X=H[E.from],Y=X.edges,Z=Y.length,J=0;J<Z;J++){var it=Y[J],tt=H[it.to].label;E.to===it.to||I>tt||P.hasNode(H[it.to])||(E.label<it.label||E.label===it.label&&nt<=tt)&&N.push(it)}return N},S.prototype.getSupport=function(_){var E={};return _.forEach(function(I){E[I.graphId]||(E[I.graphId]=!0)}),Object.keys(E).length},S.prototype.findMinLabel=function(_){var E=void 0;return Object.keys(_).forEach(function(I){var P=_[I],N=P.nodeLabel1,H=P.edgeLabel,nt=P.nodeLabel2;if(!E){E={nodeLabel1:N,edgeLabel:H,nodeLabel2:nt};return}(N<E.nodeLabel1||N===E.nodeLabel1&&H<E.edgeLabel||N===E.nodeLabel1&&H===E.edgeLabel&&nt<E.nodeLabel2)&&(E={nodeLabel1:N,edgeLabel:H,nodeLabel2:nt})}),E},S.prototype.isMin=function(){var _=this,E=this.dfsCode;if(this.verbose&&console.log("isMin checking",E),E.dfsEdgeList.length===1)return!0;var I=this.directed,P=E.toGraph(j.VACANT_GRAPH_ID,I),N=P.nodeMap,H=new L,nt={};P.nodes.forEach(function(J){var it=_.findForwardRootEdges(P,J);it.forEach(function(tt){var ut=N[tt.to],vt="".concat(J.label,"-").concat(tt.label,"-").concat(ut.label);nt[vt]||(nt[vt]={projected:[],nodeLabel1:J.label,edgeLabel:tt.label,nodeLabel2:ut.label});var pt={graphId:P.id,edge:tt,preNode:null};nt[vt].projected.push(pt)})});var X=this.findMinLabel(nt);if(X){H.dfsEdgeList.push(new B(0,1,X.nodeLabel1,X.edgeLabel,X.nodeLabel2));var Y=function J(it){for(var tt=H.buildRmpath(),ut=H.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,vt=H.dfsEdgeList[tt[0]].toNode,pt={},Dt=!1,Ot=0,te=I?-1:0,Gt=function(Se){if(Dt)return"break";it.forEach(function(xe){var Bt=new k(xe),fe=_.findBackwardEdge(P,Bt.edges[tt[Se]],Bt.edges[tt[0]],Bt);fe&&(pt[fe.label]||(pt[fe.label]={projected:[],edgeLabel:fe.label}),pt[fe.label].projected.push({graphId:P.id,edge:pt,preNode:xe}),Ot=H.dfsEdgeList[tt[Se]].fromNode,Dt=!0)})},K=tt.length-1;K>te;K--){var p=Gt(K);if(p==="break")break}if(Dt){var at=_.findMinLabel(pt);H.dfsEdgeList.push(new B(vt,Ot,j.VACANT_NODE_LABEL,at.edgeLabel,j.VACANT_NODE_LABEL));var ht=H.dfsEdgeList.length-1;return _.dfsCode.dfsEdgeList[ht]!==H.dfsEdgeList[ht]?!1:J(pt[at.edgeLabel].projected)}var wt={};Dt=!1;var Mt=0;it.forEach(function(he){var Se=new k(he),xe=_.findForwardPureEdges(P,Se.edges[tt[0]],ut,Se);xe.length>0&&(Dt=!0,Mt=vt,xe.forEach(function(Bt){var fe="".concat(Bt.label,"-").concat(N[Bt.to].label);wt[fe]||(wt[fe]={projected:[],edgeLabel:Bt.label,nodeLabel2:N[Bt.to].label}),wt[fe].projected.push({graphId:P.id,edge:Bt,preNode:he})}))});for(var Ut=tt.length,Vt=function(Se){if(Dt)return"break";var xe=tt[Se];it.forEach(function(Bt){var fe=new k(Bt),Le=_.findForwardRmpathEdges(P,fe.edges[xe],ut,fe);Le.length>0&&(Dt=!0,Mt=H.dfsEdgeList[xe].fromNode,Le.forEach(function(jt){var oe="".concat(jt.label,"-").concat(N[jt.to].label);wt[oe]||(wt[oe]={projected:[],edgeLabel:jt.label,nodeLabel2:N[jt.to].label}),wt[oe].projected.push({graphId:P.id,edge:jt,preNode:Bt})}))})},K=0;K<Ut;K++){var Me=Vt(K);if(Me==="break")break}if(!Dt)return!0;var Wt=_.findMinLabel(wt);H.dfsEdgeList.push(new B(Mt,vt+1,j.VACANT_NODE_LABEL,Wt.edgeLabel,Wt.nodeLabel2));var ae=H.dfsEdgeList.length-1;return E.dfsEdgeList[ae]!==H.dfsEdgeList[ae]?!1:J(wt["".concat(Wt.edgeLabel,"-").concat(Wt.nodeLabel2)].projected)},Z="".concat(X.nodeLabel1,"-").concat(X.edgeLabel,"-").concat(X.nodeLabel2);return Y(nt[Z].projected)}},S.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var _=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,F.clone)(_))}},S.prototype.subGraphMining=function(_){var E=this,I=this.getSupport(_);if(!(I<this.minSupport)&&this.isMin()){this.report();var P=this.dfsCode.getNodeNum(),N=this.dfsCode.buildRmpath(),H=this.dfsCode.dfsEdgeList[N[0]].toNode,nt=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,X={},Y={};_.forEach(function(Z){for(var J=E.graphs[Z.graphId],it=J.nodeMap,tt=new k(Z),ut=N.length-1;ut>=0;ut--){var vt=E.findBackwardEdge(J,tt.edges[N[ut]],tt.edges[N[0]],tt);if(vt){var pt="".concat(E.dfsCode.dfsEdgeList[N[ut]].fromNode,"-").concat(vt.label);Y[pt]||(Y[pt]={projected:[],toNodeId:E.dfsCode.dfsEdgeList[N[ut]].fromNode,edgeLabel:vt.label}),Y[pt].projected.push({graphId:Z.graphId,edge:vt,preNode:Z})}}if(!(P>=E.maxNodeNum)){var Dt=E.findForwardPureEdges(J,tt.edges[N[0]],nt,tt);Dt.forEach(function(te){var Gt="".concat(H,"-").concat(te.label,"-").concat(it[te.to].label);X[Gt]||(X[Gt]={projected:[],fromNodeId:H,edgeLabel:te.label,nodeLabel2:it[te.to].label}),X[Gt].projected.push({graphId:Z.graphId,edge:te,preNode:Z})});for(var Ot=function(Gt){var K=E.findForwardRmpathEdges(J,tt.edges[N[Gt]],nt,tt);K.forEach(function(p){var at="".concat(E.dfsCode.dfsEdgeList[N[Gt]].fromNode,"-").concat(p.label,"-").concat(it[p.to].label);X[at]||(X[at]={projected:[],fromNodeId:E.dfsCode.dfsEdgeList[N[Gt]].fromNode,edgeLabel:p.label,nodeLabel2:it[p.to].label}),X[at].projected.push({graphId:Z.graphId,edge:p,preNode:Z})})},ut=0;ut<N.length;ut++)Ot(ut)}}),Object.keys(Y).forEach(function(Z){var J=Y[Z],it=J.toNodeId,tt=J.edgeLabel;E.dfsCode.dfsEdgeList.push(new B(H,it,"-1",tt,"-1")),E.subGraphMining(Y[Z].projected),E.dfsCode.dfsEdgeList.pop()}),Object.keys(X).forEach(function(Z){var J=X[Z],it=J.fromNodeId,tt=J.edgeLabel,ut=J.nodeLabel2;E.dfsCode.dfsEdgeList.push(new B(it,H+1,j.VACANT_NODE_LABEL,tt,ut)),E.subGraphMining(X[Z].projected),E.dfsCode.dfsEdgeList.pop()})}},S.prototype.generate1EdgeFrequentSubGraphs=function(){var _=this.graphs,E=this.directed,I=this.minSupport,P=this.frequentSize1Subgraphs,N={},H={},nt={},X={};return Object.keys(_).forEach(function(Y){var Z=_[Y],J=Z.nodeMap;Z.nodes.forEach(function(it,tt){var ut=it.label,vt="".concat(Y,"-").concat(ut);if(!nt[vt]){var pt=N[ut]||0;pt++,N[ut]=pt}nt[vt]={graphKey:Y,label:ut},it.edges.forEach(function(Dt){var Ot=ut,te=J[Dt.to].label;if(!E&&Ot>te){var Gt=te;te=Ot,Ot=Gt}var K=Dt.label,p="".concat(Y,"-").concat(Ot,"-").concat(K,"-").concat(te),at="".concat(Ot,"-").concat(K,"-").concat(te);if(!H[at]){var ht=H[at]||0;ht++,H[at]=ht}X[p]={graphId:Y,nodeLabel1:Ot,edgeLabel:K,nodeLabel2:te}})})}),Object.keys(N).forEach(function(Y){var Z=N[Y];if(!(Z<I)){var J={nodes:[],edges:[]};J.nodes.push({id:"0",label:Y}),P.push(J)}}),P},S.prototype.run=function(){var _=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var E=this.graphs,I=this.directed,P={};Object.keys(E).forEach(function(N){var H=E[N],nt=H.nodeMap;H.nodes.forEach(function(X){var Y=_.findForwardRootEdges(H,X);Y.forEach(function(Z){var J=nt[Z.to],it="".concat(X.label,"-").concat(Z.label,"-").concat(J.label);P[it]||(P[it]={projected:[],nodeLabel1:X.label,edgeLabel:Z.label,nodeLabel2:J.label});var tt={graphId:N,edge:Z,preNode:null};P[it].projected.push(tt)})})}),Object.keys(P).forEach(function(N){var H=P[N],nt=H.projected,X=H.nodeLabel1,Y=H.edgeLabel,Z=H.nodeLabel2;_.dfsCode.dfsEdgeList.push(new B(0,1,X,Y,Z)),_.subGraphMining(nt),_.dfsCode.dfsEdgeList.pop()})}},S}(),w=function(_,E,I,P){var N={};return Object.keys(_).forEach(function(H,nt){var X=_[H],Y=new j.Graph(nt,!0,E),Z={};X.nodes.forEach(function(J,it){Y.addNode(it,J[I]),Z[J.id]=it}),X.edges.forEach(function(J,it){var tt=Z[J.source],ut=Z[J.target];Y.addEdge(-1,tt,ut,J[P])}),Y&&Y.getNodeNum()&&(N[Y.id]=Y)}),N},b=function(_,E,I){var P=[];return _.forEach(function(N){var H={nodes:[],edges:[]};N.nodes.forEach(function(nt){var X;H.nodes.push((X={id:"".concat(nt.id)},X[E]=nt.label,X))}),N.edges.forEach(function(nt){var X;H.edges.push((X={source:"".concat(nt.from),target:"".concat(nt.to)},X[I]=nt.label,X))}),P.push(H)}),P},g="cluster",y=function(_){var E=_.graphs,I=_.directed,P=I===void 0?!1:I,N=_.nodeLabelProp,H=N===void 0?g:N,nt=_.edgeLabelProp,X=nt===void 0?g:nt,Y=w(E,P,H,X),Z=_.minSupport,J=_.maxNodeNum,it=_.minNodeNum,tt=_.verbose,ut=_.top,vt={graphs:Y,minSupport:Z,maxNodeNum:J,minNodeNum:it,top:ut,verbose:tt,directed:P},pt=new D(vt);pt.run();var Dt=b(pt.frequentSubgraphs,H,X);return Dt},d=y;U.default=d},68575:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.VACANT_NODE_LABEL=U.VACANT_NODE_ID=U.VACANT_GRAPH_ID=U.VACANT_EDGE_LABEL=U.VACANT_EDGE_ID=U.Node=U.Graph=U.Edge=U.AUTO_EDGE_ID=void 0;var z=-1;U.VACANT_EDGE_ID=z;var F=-1;U.VACANT_NODE_ID=F;var j="-1";U.VACANT_EDGE_LABEL=j;var B="-1";U.VACANT_NODE_LABEL=B;var L=-1;U.VACANT_GRAPH_ID=L;var k="-1";U.AUTO_EDGE_ID=k;var D=function(){function g(y,d,S,_){y===void 0&&(y=z),d===void 0&&(d=F),S===void 0&&(S=F),_===void 0&&(_=j),this.id=y,this.from=d,this.to=S,this.label=_}return g}();U.Edge=D;var w=function(){function g(y,d){y===void 0&&(y=F),d===void 0&&(d=B),this.id=y,this.label=d,this.edges=[],this.edgeMap={}}return g.prototype.addEdge=function(y){this.edges.push(y),this.edgeMap[y.id]=y},g}();U.Node=w;var b=function(){function g(y,d,S){y===void 0&&(y=F),d===void 0&&(d=!0),S===void 0&&(S=!1),this.id=y,this.edgeIdAutoIncrease=d,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=S}return g.prototype.getNodeNum=function(){return this.nodes.length},g.prototype.addNode=function(y,d){if(!this.nodeMap[y]){var S=new w(y,d);this.nodes.push(S),this.nodeMap[y]=S,this.nodeLabelMap[d]||(this.nodeLabelMap[d]=[]),this.nodeLabelMap[d].push(y)}},g.prototype.addEdge=function(y,d,S,_){if((this.edgeIdAutoIncrease||y===void 0)&&(y=this.counter++),!(this.nodeMap[d]&&this.nodeMap[S]&&this.nodeMap[S].edgeMap[y])){var E=new D(y,d,S,_);if(this.edges.push(E),this.edgeMap[y]=E,this.nodeMap[d].addEdge(E),this.edgeLabelMap[_]||(this.edgeLabelMap[_]=[]),this.edgeLabelMap[_].push(E),!this.directed){var I=new D(y,S,d,_);this.nodeMap[S].addEdge(I),this.edgeLabelMap[_].push(I)}}},g}();U.Graph=b},82812:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=z(97582),j=D(z(75033)),B=D(z(21146)),L=D(z(78089)),k=z(70643);function D(X){return X&&X.__esModule?X:{default:X}}var w=function(Y,Z,J,it){J===void 0&&(J="cluster"),it===void 0&&(it=2);var tt=[],ut=Y.nodes;return Z.forEach(function(vt,pt){tt.push(b(ut,vt,pt,J,it))}),tt},b=function(Y,Z,J,it,tt){var ut=[J],vt=[],pt={};return Z.forEach(function(Dt,Ot){if(Dt<=tt&&J!==Ot){ut.push(Ot),vt.push(Y[Ot]);var te=Y[Ot][it];pt[te]?(pt[te].count++,pt[te].dists.push(Dt)):pt[te]={count:1,dists:[Dt]}}}),Object.keys(pt).forEach(function(Dt){pt[Dt].dists=pt[Dt].dists.sort(function(Ot,te){return Ot-te})}),{nodeIdx:J,nodeId:Y[J].id,nodeIdxs:ut,neighbors:vt,neighborNum:ut.length-1,nodeLabelCountMap:pt}},g=function(Y,Z,J,it,tt){var ut=Math.ceil(J/Z),vt={},pt=0;return it.forEach(function(Dt,Ot){for(var te=0,Gt=0,K=Dt.nodeIdxs,p=Dt.neighborNum-1;te<ut;){for(var at=K[1+Math.floor(Math.random()*p)],ht=0;(vt["".concat(Ot,"-").concat(at)]||vt["".concat(at,"-").concat(Ot)])&&(at=Math.floor(Math.random()*Z),ht++,!(ht>2*Z)););if(ht<2*Z&&(vt["".concat(Ot,"-").concat(at)]={start:Ot,end:at,distance:tt[Ot][at]},te++,pt++,pt>=J))return vt;if(Gt++,Gt>2*Z)break}if(te<ut){var wt=ut-te;ut=(ut+wt)/(Z-Ot-1)}}),vt},y=function(Y,Z,J,it){var tt=J.nodes;return it||(it={}),Object.keys(Y).forEach(function(ut){var vt,pt;if(!(it&&it[ut])){it[ut]={nodes:[],edges:[]};var Dt=Y[ut],Ot=(vt=Z[Dt.start])===null||vt===void 0?void 0:vt.nodeIdxs,te=(pt=Z[Dt.end])===null||pt===void 0?void 0:pt.nodeIdxs;if(!(!Ot||!te)){var Gt=new Set(te),K=Ot.filter(function(Mt){return Gt.has(Mt)});if(!(!K||!K.length)){for(var p={},at=K.length,ht=0;ht<at;ht++){var wt=tt[K[ht]];it[ut].nodes.push(wt),p[wt.id]=!0}J.edges.forEach(function(Mt){p[Mt.source]&&p[Mt.target]&&it[ut].edges.push(Mt)})}}}}),it},d=function(Y,Z,J,it){var tt,ut,vt={};Y.nodes.forEach(function(Dt){vt[Dt.id]=Dt});var pt=0;return!(!((tt=Z==null?void 0:Z.edges)===null||tt===void 0)&&tt.length)||((ut=Z==null?void 0:Z.nodes)===null||ut===void 0?void 0:ut.length)<2?0:(Y.edges.forEach(function(Dt){var Ot=vt[Dt.source][J],te=vt[Dt.target][J],Gt=Z==null?void 0:Z.nodes[0][J],K=Z==null?void 0:Z.nodes[1][J],p=Z==null?void 0:Z.edges[0][it];Dt[it]===p&&(Ot===Gt&&te===K||Ot===K&&te===Gt)&&pt++}),pt)},S=function(Y,Z,J){for(var it=1/0,tt=0,ut=function(Dt){var Ot=Y[Dt],te=Object.keys(Ot).sort(function(Mt,Ut){return Ot[Mt]-Ot[Ut]}),Gt=10,K=[];te.forEach(function(Mt,Ut){K[Ut%Gt]||(K[Ut%Gt]={graphs:[],totalCount:0,aveCount:0}),K[Ut%Gt].graphs.push(Mt),K[Ut%Gt].totalCount+=Ot[Mt]});var p=0,at=[];K.forEach(function(Mt){var Ut=Mt.totalCount/Mt.graphs.length;Mt.aveCount=Ut,at.push(Ut);var Vt=0,Me=Mt.length;Mt.graphs.forEach(function(Wt,ae){var he=Ot[Wt];Mt.graphs.forEach(function(Se,xe){ae!==xe&&(Vt+=Math.abs(he-Ot[Se]))})}),Vt/=Me*(Me-1)/2,p+=Vt}),p/=K.length;var ht=0;at.forEach(function(Mt,Ut){at.forEach(function(Vt,Me){Ut!==Me&&(ht+=Math.abs(Mt-Vt))}),ht/=at.length*(at.length-1)/2});var wt=ht-p;it<wt&&(it=wt,tt=Dt)},vt=0;vt<Z;vt++)ut(vt);return{structure:J[tt],structureCountMap:Y[tt]}},_=function(Y,Z){var J={},it={};return Y.forEach(function(tt,ut){J[tt.id]={idx:ut,node:tt,degree:0,inDegree:0,outDegree:0};var vt=tt[Z];it[vt]||(it[vt]=[]),it[vt].push(tt)}),{nodeMap:J,nodeLabelMap:it}},E=function(Y,Z,J){var it={},tt={};return Y.forEach(function(ut,vt){it["".concat(k.uniqueId)]={idx:vt,edge:ut};var pt=ut[Z];tt[pt]||(tt[pt]=[]),tt[pt].push(ut);var Dt=J[ut.source];Dt&&(Dt.degree++,Dt.outDegree++);var Ot=J[ut.target];Ot&&(Ot.degree++,Ot.inDegree++)}),{edgeMap:it,edgeLabelMap:tt}},I=function(Y,Z,J){var it=Z.length,tt={};return Z.forEach(function(ut,vt){for(var pt=J?0:vt+1,Dt=Y[vt].id,Ot=pt;Ot<it;Ot++)if(vt!==Ot){var te=Y[Ot].id,Gt=ut[Ot];tt["".concat(Dt,"-").concat(te)]=Gt,J||(tt["".concat(te,"-").concat(Dt)]=Gt)}}),tt},P=function(Y,Z,J,it,tt,ut,vt,pt,Dt,Ot,te){var Gt,K="".concat(Z.id,"-").concat(J.id);if(Ot&&Ot[K])return Ot[K];var p=te?te[K]:void 0;if(!p){var at=(Gt={},Gt[K]={start:it[Z.id].idx,end:it[J.id].idx,distance:tt},Gt);te=y(at,ut,Y,te),p=te[K]}return d(p,vt,pt,Dt)},N=function(Y,Z,J,it){var tt,ut,vt,pt=(tt=Y[Z])===null||tt===void 0?void 0:tt.degree,Dt=(ut=Y[Z])===null||ut===void 0?void 0:ut.inDegree,Ot=(vt=Y[Z])===null||vt===void 0?void 0:vt.outDegree;return Y[Z]===void 0&&(pt=1/0,Dt=1/0,Ot=1/0,it[Z].forEach(function(te){var Gt=J[te.id].degree;pt>Gt&&(pt=Gt);var K=J[te.id].inDegree;Dt>K&&(Dt=K);var p=J[te.id].outDegree;Ot>p&&(Ot=p)}),Y[Z]={degree:pt,inDegree:Dt,outDegree:Ot}),{minPatternNodeLabelDegree:pt,minPatternNodeLabelInDegree:Dt,minPatternNodeLabelOutDegree:Ot}},H=function(Y,Z,J,it,tt,ut,vt){var pt;if(J===void 0&&(J=!1),ut===void 0&&(ut="cluster"),vt===void 0&&(vt="cluster"),!(!Y||!Y.nodes)){var Dt=Y.nodes.length;if(Dt){var Ot=(0,j.default)(Y,J),te=(0,j.default)(Z,J),Gt=I(Y.nodes,Ot,J),K=I(Z.nodes,te,J),p=_(Y.nodes,ut),at=p.nodeMap,ht=p.nodeLabelMap,wt=_(Z.nodes,ut),Mt=wt.nodeMap,Ut=wt.nodeLabelMap;E(Y.edges,vt,at);var Vt=E(Z.edges,vt,Mt).edgeLabelMap,Me=[];te==null||te.forEach(function(bn){Me=Me.concat(bn)}),tt||(tt=Math.max.apply(Math,(0,F.__spreadArray)((0,F.__spreadArray)([],Me,!1),[2],!1))),it||(it=tt);var Wt=w(Y,Ot,ut,it),ae=w(Z,te,ut,it),he=Math.min(100,Dt*(Dt-1)/2),Se=g(it,Dt,he,Wt,Ot),xe=y(Se,Wt,Y),Bt=10,fe=1,Le=1,jt=4,oe={graphs:xe,nodeLabelProp:ut,edgeLabelProp:vt,minSupport:fe,minNodeNum:Le,maxNodeNum:jt,directed:J},Te=(0,B.default)(oe).slice(0,Bt),se=Te.length,Ie=[];Te.forEach(function(bn,Hn){Ie[Hn]={},Object.keys(xe).forEach(function(Wn){var Bn=xe[Wn],ya=d(Bn,bn,ut,vt);Ie[Hn][Wn]=ya})});var Pe=S(Ie,se,Te),Lt=Pe.structure,Je=Pe.structureCountMap,Lr=Z.nodes[0],Vr=[],Xr=(pt=Z.nodes[0])===null||pt===void 0?void 0:pt[ut],Mn=-1/0;Z.nodes.forEach(function(bn){var Hn=bn[ut],Wn=ht[Hn];(Wn==null?void 0:Wn.length)>Mn&&(Mn=Wn.length,Vr=Wn,Xr=Hn,Lr=bn)});var Hr={},Cn={},Zn={},Un={},mn={},rr={};Object.keys(Ut).forEach(function(bn,Hn){mn[bn]=[],J&&(rr[bn]=[]);var Wn=-1/0,Bn=Ut[bn],ya={};Bn.forEach(function(ar){var Ur=K["".concat(Lr.id,"-").concat(ar.id)];if(Ur&&mn[bn].push(Ur),Wn<Ur&&(Wn=Ur),ya["".concat(Lr.id,"-").concat(ar.id)]={start:0,end:Mt[ar.id].idx,distance:Ur},J){var Nr=K["".concat(ar.id,"-").concat(Lr.id)];Nr&&rr[bn].push(Nr)}}),mn[bn]=mn[bn].sort(function(ar,Ur){return ar-Ur}),J&&(rr[bn]=rr[bn].sort(function(ar,Ur){return ar-Ur})),Cn=y(ya,ae,Z,Cn);var q=[];if(Object.keys(ya).forEach(function(ar){if(Zn[ar]){q.push(Zn[ar]);return}var Ur=Cn[ar];Zn[ar]=d(Ur,Lt,ut,vt),q.push(Zn[ar])}),q=q.sort(function(ar,Ur){return Ur-ar}),Un["".concat(Lr.id,"-").concat(bn)]=q,bn!==Xr)for(var Ve=(Vr==null?void 0:Vr.length)||0,Ee=function(Ur){var Nr=Vr[Ur],gn=Wt[at[Nr.id].idx],hn=gn.nodeLabelCountMap[bn],pn=Ut[bn].length;if(!hn||hn.count<pn)return Vr.splice(Ur,1),"continue";for(var gt=!1,bt=0;bt<pn;bt++)if(hn.dists[bt]>mn[bn][bt]){gt=!0;break}if(gt)return Vr.splice(Ur,1),"continue";var W={};gn.neighbors.forEach(function(et){var _t=Gt["".concat(Nr.id,"-").concat(et.id)];W["".concat(Nr.id,"-").concat(et.id)]={start:at[Nr.id].idx,end:at[et.id].idx,distance:_t}}),xe=y(W,Wt,Y,xe);var T=[];Object.keys(W).forEach(function(et){if(Je[et]){T.push(Je[et]);return}var _t=xe[et];Je[et]=d(_t,Lt,ut,vt),T.push(Je[et])}),T=T.sort(function(et,_t){return _t-et});for(var A=!1,bt=0;bt<pn;bt++)if(T[bt]<q[bt]){A=!0;break}if(A)return Vr.splice(Ur,1),"continue"},nr=Ve-1;nr>=0;nr--)Ee(nr)});var sr=[];Vr==null||Vr.forEach(function(bn){for(var Hn=at[bn.id].idx,Wn=b(Y.nodes,Ot[Hn],Hn,ut,tt),Bn=Wn.neighbors,ya=Bn.length,q=!1,Ve=ya-1;Ve>=0;Ve--){if(Bn.length+1<Z.nodes.length){q=!0;return}var Ee=Bn[Ve],nr=Ee[ut];if(!Ut[nr]||!Ut[nr].length){Bn.splice(Ve,1);continue}if(!mn[nr]||!mn[nr].length){Bn.splice(Ve,1);continue}var ar="".concat(bn.id,"-").concat(Ee.id),Ur=Gt[ar],Nr=mn[nr].length-1,gn=mn[nr][Nr];if(Ur>gn){Bn.splice(Ve,1);continue}if(J){var hn="".concat(Ee.id,"-").concat(bn.id),pn=Gt[hn];Nr=rr[nr].length-1;var gt=rr[nr][Nr];if(pn>gt){Bn.splice(Ve,1);continue}}var bt=Je[ar]?Je[ar]:P(Y,bn,Ee,at,Ur,Wt,Lt,ut,vt,Je,xe),W="".concat(Lr.id,"-").concat(nr),T=Un[W][Un[W].length-1];if(bt<T){Bn.splice(Ve,1);continue}var A=N(Hr,nr,Mt,Ut),et=A.minPatternNodeLabelDegree,_t=A.minPatternNodeLabelInDegree,Xt=A.minPatternNodeLabelOutDegree;if(at[Ee.id].degree<et){Bn.splice(Ve,1);continue}}q||sr.push({nodes:[bn].concat(Bn)})});var lr=(0,L.default)(Z,Lr.id,!1).length,zr={};J?(Object.keys(lr).forEach(function(bn){var Hn=Mt[bn].node[ut];zr[Hn]?zr[Hn].push(lr[bn]):zr[Hn]=[lr[bn]]}),Object.keys(zr).forEach(function(bn){zr[bn].sort(function(Hn,Wn){return Hn-Wn})})):zr=mn;for(var fn=sr.length,wn=function(Hn){var Wn=sr[Hn],Bn=Wn.nodes[0],ya={},q={};Wn.nodes.forEach(function(Kr,$t){q[Kr.id]={idx:$t,node:Kr,degree:0,inDegree:0,outDegree:0};var Pt=Kr[ut];ya[Pt]?ya[Pt]++:ya[Pt]=1});var Ve=[],Ee={};Y.edges.forEach(function(Kr){q[Kr.source]&&q[Kr.target]&&(Ve.push(Kr),Ee[Kr[vt]]?Ee[Kr[vt]]++:Ee[Kr[vt]]=1,q[Kr.source].degree++,q[Kr.target].degree++,q[Kr.source].outDegree++,q[Kr.target].inDegree++)});for(var nr=Object.keys(Vt).length,ar=!1,Ur=0;Ur<nr;Ur++){var Nr=Object.keys(Vt)[Ur];if(!Ee[Nr]||Ee[Nr]<Vt[Nr].length){ar=!0;break}}if(ar)return sr.splice(Hn,1),"continue";var gn=Ve.length;if(gn<Z.edges.length)return sr.splice(Hn,1),"break";for(var hn=!1,pn=function($t){var Pt=Ve[$t],re=Pt[vt],be=Vt[re];if(!be||!be.length)return Ee[re]--,be&&Ee[re]<be.length?(hn=!0,"break"):(Ve.splice($t,1),q[Pt.source].degree--,q[Pt.target].degree--,q[Pt.source].outDegree--,q[Pt.target].inDegree--,"continue");var pe=q[Pt.source].node[ut],ke=q[Pt.target].node[ut],or=!1;if(be.forEach(function(cr){var rn=Mt[cr.source].node,Nn=Mt[cr.target].node;rn[ut]===pe&&Nn[ut]===ke&&(or=!0),!J&&rn[ut]===ke&&Nn[ut]===pe&&(or=!0)}),!or)return Ee[re]--,be&&Ee[re]<be.length?(hn=!0,"break"):(Ve.splice($t,1),q[Pt.source].degree--,q[Pt.target].degree--,q[Pt.source].outDegree--,q[Pt.target].inDegree--,"continue")},Ur=gn-1;Ur>=0;Ur--){var gt=pn(Ur);if(gt==="break")break}if(hn)return sr.splice(Hn,1),"continue";Wn.edges=Ve;var bt=(0,L.default)(Wn,Wn.nodes[0].id,!1).length;if(Object.keys(bt).reverse().forEach(function(Kr){if(!(Kr===Wn.nodes[0].id||hn)){if(bt[Kr]===1/0){var $t=q[Kr].node[ut];if(ya[$t]--,ya[$t]<Ut[$t].length){hn=!0;return}var Pt=Wn.nodes.indexOf(q[Kr].node);Wn.nodes.splice(Pt,1),q[Kr]=void 0;return}var re=at[Kr].node[ut];if(!zr[re]||!zr[re].length||bt[Kr]>zr[re][zr[re].length-1]){var $t=q[Kr].node[ut];if(ya[$t]--,ya[$t]<Ut[$t].length){hn=!0;return}var Pt=Wn.nodes.indexOf(q[Kr].node);Wn.nodes.splice(Pt,1),q[Kr]=void 0}}}),hn)return sr.splice(Hn,1),"continue";for(var W=!0,T=0;W&&!hn;){W=!1;var A=J?q[Bn.id].degree<Mt[Lr.id].degree||q[Bn.id].inDegree<Mt[Lr.id].inDegree||q[Bn.id].outDegree<Mt[Lr.id].outDegree:q[Bn.id].degree<Mt[Lr.id].degree;if(A){hn=!0;break}if(ya[Bn[ut]]<Ut[Bn[ut]].length){hn=!0;break}for(var et=Wn.nodes.length,_t=et-1;_t>=0;_t--){var Xt=Wn.nodes[_t],Rt=q[Xt.id].degree,ee=q[Xt.id].inDegree,Ge=q[Xt.id].outDegree,De=Xt[ut],fr=N(Hr,De,Mt,Ut),jr=fr.minPatternNodeLabelDegree,Sr=fr.minPatternNodeLabelInDegree,vn=fr.minPatternNodeLabelOutDegree,Xn=J?Rt<jr||ee<Sr||Ge<vn:Rt<jr;if(Xn){if(ya[Xt[ut]]--,ya[Xt[ut]]<Ut[Xt[ut]].length){hn=!0;break}Wn.nodes.splice(_t,1),q[Xt.id]=void 0,W=!0}}if(hn||!W&&T!==0)break;gn=Ve.length;for(var je=gn-1;je>=0;je--){var Er=Ve[je];if(!q[Er.source]||!q[Er.target]){Ve.splice(je,1);var Pr=Er[vt];if(Ee[Pr]--,q[Er.source]&&(q[Er.source].degree--,q[Er.source].outDegree--),q[Er.target]&&(q[Er.target].degree--,q[Er.target].inDegree--),Vt[Pr]&&Ee[Pr]<Vt[Pr].length){hn=!0;break}W=!0}}T++}if(hn||hn||Wn.nodes.length<Z.nodes.length||Ve.length<Z.edges.length)return sr.splice(Hn,1),"continue"},ln=fn-1;ln>=0;ln--){var $n=wn(ln);if($n==="break")break}for(var Jn=sr.length,Da=function(Hn){var Wn=sr[Hn],Bn={};Wn.edges.forEach(function(Ve){var Ee="".concat(Ve.source,"-").concat(Ve.target,"-").concat(Ve.label);Bn[Ee]?Bn[Ee]++:Bn[Ee]=1});for(var ya=function(Ee){var nr=sr[Ee],ar={};nr.edges.forEach(function(Nr){var gn="".concat(Nr.source,"-").concat(Nr.target,"-").concat(Nr.label);ar[gn]?ar[gn]++:ar[gn]=1});var Ur=!0;Object.keys(ar).length!==Object.keys(Bn).length?Ur=!1:Object.keys(Bn).forEach(function(Nr){ar[Nr]!==Bn[Nr]&&(Ur=!1)}),Ur&&sr.splice(Ee,1)},q=Jn-1;q>Hn;q--)ya(q);Jn=sr.length},ln=0;ln<=Jn-1;ln++)Da(ln);return sr}}},nt=H;U.default=nt},5170:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=B(z(62238)),j=z(70643);function B(D){return D&&D.__esModule?D:{default:D}}var L=function(w,b,g,y){b===void 0&&(b=!1),g===void 0&&(g="weight"),y===void 0&&(y=1e3);var d=w.nodes,S=d===void 0?[]:d,_=w.edges,E=_===void 0?[]:_,I={},P={};S.forEach(function(ut,vt){var pt=(0,j.uniqueId)();ut.clusterId=pt,I[pt]={id:pt,nodes:[ut]},P[ut.id]={node:ut,idx:vt}});var N=(0,F.default)(w,b),H=[],nt={};N.forEach(function(ut,vt){var pt=0,Dt=S[vt].id;nt[Dt]={},ut.forEach(function(Ot,te){if(Ot){pt+=Ot;var Gt=S[te].id;nt[Dt][Gt]=Ot}}),H.push(pt)});for(var X=0,Y=function(){var vt=!1;if(S.forEach(function(pt){var Dt={};Object.keys(nt[pt.id]).forEach(function(wt){var Mt=nt[pt.id][wt],Ut=P[wt].node,Vt=Ut.clusterId;Dt[Vt]||(Dt[Vt]=0),Dt[Vt]+=Mt});var Ot=-1/0,te=[];if(Object.keys(Dt).forEach(function(wt){Ot<Dt[wt]?(Ot=Dt[wt],te=[wt]):Ot===Dt[wt]&&te.push(wt)}),!(te.length===1&&te[0]===pt.clusterId)){var Gt=te.indexOf(pt.clusterId);if(Gt>=0&&te.splice(Gt,1),te&&te.length){vt=!0;var K=I[pt.clusterId],p=K.nodes.indexOf(pt);K.nodes.splice(p,1);var at=Math.floor(Math.random()*te.length),ht=I[te[at]];ht.nodes.push(pt),pt.clusterId=ht.id}}}),!vt)return"break";X++};X<y;){var Z=Y();if(Z==="break")break}Object.keys(I).forEach(function(ut){var vt=I[ut];(!vt.nodes||!vt.nodes.length)&&delete I[ut]});var J=[],it={};E.forEach(function(ut){var vt=ut.source,pt=ut.target,Dt=ut[g]||1,Ot=P[vt].node.clusterId,te=P[pt].node.clusterId,Gt="".concat(Ot,"---").concat(te);if(it[Gt])it[Gt].weight+=Dt,it[Gt].count++;else{var K={source:Ot,target:te,weight:Dt,count:1};it[Gt]=K,J.push(K)}});var tt=[];return Object.keys(I).forEach(function(ut){tt.push(I[ut])}),{clusters:tt,clusterEdges:J}},k=L;U.default=k},35179:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=z(13810),j=D(z(62238)),B=D(z(29741)),L=z(3665),k=z(26838);function D(d){return d&&d.__esModule?d:{default:d}}var w=function(S,_,E,I){for(var P=_.length,N=2*I,H=0,nt=0;nt<P;nt++)for(var X=S[nt].clusterId,Y=0;Y<P;Y++){var Z=S[Y].clusterId;if(X===Z){var J=_[nt][Y]||0,it=E[nt]||0,tt=E[Y]||0;H+=J-it*tt/N}}return H*=1/N,H},b=function(S,_){S===void 0&&(S=[]);for(var E=S.length,I=new B.default([]),P=0;P<E;P++)I=I.add(new B.default(_[P]));var N=I.avg(E);N.normalize();for(var H=0,P=0;P<E;P++){var nt=new B.default(_[P]),X=nt.squareEuclideanDistance(N);H+=X}var Y=[];S.forEach(function(){Y.push([])});for(var P=0;P<E;P++){var nt=new B.default(_[P]);S[P].clusterInertial=0;for(var Z=0;Z<E;Z++){if(P===Z){Y[P][Z]=0;continue}var J=new B.default(_[Z]);Y[P][Z]=nt.squareEuclideanDistance(J),S[P].clusterInertial+=Y[P][Z]}}for(var it=0,tt=2*E*H,P=0;P<E;P++)for(var ut=S[P].clusterId,Z=0;Z<E;Z++){var vt=S[Z].clusterId;if(!(P===Z||ut!==vt)){var pt=S[P].clusterInertial*S[Z].clusterInertial/Math.pow(tt,2)-Y[P][Z]/tt;it+=pt}}return Number(it.toFixed(4))},g=function(S,_,E,I,P,N,H,nt,X){_===void 0&&(_=!1),E===void 0&&(E="weight"),I===void 0&&(I=1e-4),P===void 0&&(P=!1),N===void 0&&(N=void 0),H===void 0&&(H=[]),nt===void 0&&(nt=["id"]),X===void 0&&(X=1);var Y=S.nodes,Z=Y===void 0?[]:Y,J=S.edges,it=J===void 0?[]:J,tt=[];if(P){Z.forEach(function(xe,Bt){xe.properties=xe.properties||{},xe.originIndex=Bt});var ut=[];Z.every(function(xe){return xe.hasOwnProperty("nodeType")})&&(ut=Array.from(new Set(Z.map(function(xe){return xe.nodeType}))),Z.forEach(function(xe){xe.properties.nodeType=ut.findIndex(function(Bt){return Bt===xe.nodeType})}));var vt=(0,L.getAllProperties)(Z,N);tt=(0,k.oneHot)(vt,H,nt)}var pt=1,Dt={},Ot={};Z.forEach(function(xe,Bt){var fe=String(pt++);xe.clusterId=fe,Dt[fe]={id:fe,nodes:[xe]},Ot[xe.id]={node:xe,idx:Bt}});var te=(0,j.default)(S,_),Gt=[],K={},p=0;te.forEach(function(xe,Bt){var fe=0,Le=Z[Bt].id;K[Le]={},xe.forEach(function(jt,oe){if(jt){fe+=jt;var Te=Z[oe].id;K[Le][Te]=jt,p+=jt}}),Gt.push(fe)}),p/=2;for(var at=1/0,ht=1/0,wt=0,Mt=[],Ut={};;){P&&Z.every(function(xe){return xe.hasOwnProperty("properties")})?at=w(Z,te,Gt,p)+b(Z,tt)*X:at=w(Z,te,Gt,p),wt===0&&(ht=at,Mt=Z,Ut=Dt);var Vt=at>0&&at>ht&&at-ht<I;if(at>ht&&(Mt=Z.map(function(xe){return{node:xe,clusterId:xe.clusterId}}),Ut=(0,F.clone)(Dt),ht=at),Vt||wt>100)break;wt++,Object.keys(Dt).forEach(function(xe){var Bt=0;it.forEach(function(fe){var Le=fe.source,jt=fe.target,oe=Ot[Le].node.clusterId,Te=Ot[jt].node.clusterId;(oe===xe&&Te!==xe||Te===xe&&oe!==xe)&&(Bt=Bt+(fe[E]||1))}),Dt[xe].sumTot=Bt}),Z.forEach(function(xe,Bt){var fe=Dt[xe.clusterId],Le=0,jt,oe=Gt[Bt]/(2*p),Te=0,se=fe.nodes;se.forEach(function(Cn){var Zn=Ot[Cn.id].idx;Te+=te[Bt][Zn]||0});var Ie=Te-fe.sumTot*oe,Pe=se.filter(function(Cn){return Cn.id!==xe.id}),Lt=[];Pe.forEach(function(Cn,Zn){Lt[Zn]=tt[Cn.originIndex]});var Je=b(Pe,tt)*X,Lr=K[xe.id];if(Object.keys(Lr).forEach(function(Cn){var Zn=Ot[Cn].node,Un=Zn.clusterId;if(Un!==xe.clusterId){var mn=Dt[Un],rr=mn.nodes;if(!(!rr||!rr.length)){var sr=0;rr.forEach(function($n){var Jn=Ot[$n.id].idx;sr+=te[Bt][Jn]||0});var lr=sr-mn.sumTot*oe,zr=rr.concat([xe]),fn=[];zr.forEach(function($n,Jn){fn[Jn]=tt[$n.originIndex]});var wn=b(zr,tt)*X,ln=lr-Ie;P&&(ln=lr+wn-(Ie+Je)),ln>Le&&(Le=ln,jt=mn)}}}),Le>0){jt.nodes.push(xe);var Vr=xe.clusterId;xe.clusterId=jt.id;var Xr=fe.nodes.indexOf(xe);fe.nodes.splice(Xr,1);var Mn=0,Hr=0;it.forEach(function(Cn){var Zn=Cn.source,Un=Cn.target,mn=Ot[Zn].node.clusterId,rr=Ot[Un].node.clusterId;(mn===jt.id&&rr!==jt.id||rr===jt.id&&mn!==jt.id)&&(Mn=Mn+(Cn[E]||1)),(mn===Vr&&rr!==Vr||rr===Vr&&mn!==Vr)&&(Hr=Hr+(Cn[E]||1))}),jt.sumTot=Mn,fe.sumTot=Hr}})}var Me={},Wt=0;Object.keys(Ut).forEach(function(xe){var Bt=Ut[xe];if(!Bt.nodes||!Bt.nodes.length){delete Ut[xe];return}var fe=String(Wt+1);fe!==xe&&(Bt.id=fe,Bt.nodes=Bt.nodes.map(function(Le){return{id:Le.id,clusterId:fe}}),Ut[fe]=Bt,Me[xe]=fe,delete Ut[xe],Wt++)}),Mt.forEach(function(xe){var Bt=xe.node,fe=xe.clusterId;Bt&&(Bt.clusterId=fe,Bt.clusterId&&Me[Bt.clusterId]&&(Bt.clusterId=Me[Bt.clusterId]))});var ae=[],he={};it.forEach(function(xe){var Bt=xe.source,fe=xe.target,Le=xe[E]||1,jt=Ot[Bt].node.clusterId,oe=Ot[fe].node.clusterId;if(!(!jt||!oe)){var Te="".concat(jt,"---").concat(oe);if(he[Te])he[Te].weight+=Le,he[Te].count++;else{var se={source:jt,target:oe,weight:Le,count:1};he[Te]=se,ae.push(se)}}});var Se=[];return Object.keys(Ut).forEach(function(xe){Se.push(Ut[xe])}),{clusters:Se,clusterEdges:ae}},y=g;U.default=y},89454:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=L(z(38823)),j=L(z(57085)),B=z(70643);function L(g){return g&&g.__esModule?g:{default:g}}var k=function(y,d){var S=[],_=y.nodes,E=_===void 0?[]:_,I=y.edges,P=I===void 0?[]:I;if(E.length===0)return S;var N=E[0],H=new Set;H.add(N);var nt=function(tt,ut){return d?tt.weight-ut.weight:0},X=new j.default(nt);for((0,B.getEdgesByNodeId)(N.id,P).forEach(function(it){X.insert(it)});!X.isEmpty();){var Y=X.delMin(),Z=Y.source,J=Y.target;H.has(Z)&&H.has(J)||(S.push(Y),H.has(Z)||(H.add(Z),(0,B.getEdgesByNodeId)(Z,P).forEach(function(it){X.insert(it)})),H.has(J)||(H.add(J),(0,B.getEdgesByNodeId)(J,P).forEach(function(it){X.insert(it)})))}return S},D=function(y,d){var S=[],_=y.nodes,E=_===void 0?[]:_,I=y.edges,P=I===void 0?[]:I;if(E.length===0)return S;var N=P.map(function(Z){return Z});d&&N.sort(function(Z,J){return Z.weight-J.weight});for(var H=new F.default(E.map(function(Z){return Z.id}));N.length>0;){var nt=N.shift(),X=nt.source,Y=nt.target;H.connected(X,Y)||(S.push(nt),H.union(X,Y))}return S},w=function(y,d,S){var _={prim:k,kruskal:D};return S?_[S](y,d):D(y,d)},b=w;U.default=b},74926:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=B(z(82556)),j=z(70643);function B(D){return D&&D.__esModule?D:{default:D}}var L=function(w,b,g){typeof b!="number"&&(b=1e-6),typeof g!="number"&&(g=.85);for(var y=1,d=0,S=1e3,_=w.nodes,E=_===void 0?[]:_,I=w.edges,P=I===void 0?[]:I,N=E.length,H,nt={},X={},Y=0;Y<N;++Y){var Z=E[Y],J=Z.id;nt[J]=1/N,X[J]=1/N}for(var it=(0,F.default)(w);S>0&&y>b;){d=0;for(var Y=0;Y<N;++Y){var Z=E[Y],J=Z.id;if(H=0,it[Z.id].inDegree===0)nt[J]=0;else{for(var tt=(0,j.getNeighbors)(J,P,"source"),ut=0;ut<tt.length;++ut){var vt=tt[ut],pt=it[vt].outDegree;pt>0&&(H+=X[vt]/pt)}nt[J]=g*H,d+=nt[J]}}d=(1-d)/N,y=0;for(var Y=0;Y<N;++Y){var Z=E[Y],J=Z.id;H=nt[J]+d,y+=Math.abs(H-X[J]),X[J]=H}S-=1}return X},k=L;U.default=k},57085:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var z=function(L,k){return L-k},F=function(){function B(L){L===void 0&&(L=z),this.compareFn=L,this.list=[]}return B.prototype.getLeft=function(L){return 2*L+1},B.prototype.getRight=function(L){return 2*L+2},B.prototype.getParent=function(L){return L===0?null:Math.floor((L-1)/2)},B.prototype.isEmpty=function(){return this.list.length<=0},B.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},B.prototype.delMin=function(){var L=this.top(),k=this.list.pop();return this.list.length>0&&(this.list[0]=k,this.moveDown(0)),L},B.prototype.insert=function(L){if(L!==null){this.list.push(L);var k=this.list.length-1;return this.moveUp(k),!0}return!1},B.prototype.moveUp=function(L){for(var k=this.getParent(L);L&&L>0&&this.compareFn(this.list[k],this.list[L])>0;){var D=this.list[k];this.list[k]=this.list[L],this.list[L]=D,L=k,k=this.getParent(L)}},B.prototype.moveDown=function(L){var k,D=L,w=this.getLeft(L),b=this.getRight(L),g=this.list.length;w!==null&&w<g&&this.compareFn(this.list[D],this.list[w])>0?D=w:b!==null&&b<g&&this.compareFn(this.list[D],this.list[b])>0&&(D=b),L!==D&&(k=[this.list[D],this.list[L]],this.list[L]=k[0],this.list[D]=k[1],this.moveDown(D))},B}(),j=F;U.default=j},88481:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=U.LinkedListNode=void 0;var z=function(k,D){return k===D},F=function(){function L(k,D){D===void 0&&(D=null),this.value=k,this.next=D}return L.prototype.toString=function(k){return k?k(this.value):"".concat(this.value)},L}();U.LinkedListNode=F;var j=function(){function L(k){k===void 0&&(k=z),this.head=null,this.tail=null,this.compare=k}return L.prototype.prepend=function(k){var D=new F(k,this.head);return this.head=D,this.tail||(this.tail=D),this},L.prototype.append=function(k){var D=new F(k);return this.head?(this.tail.next=D,this.tail=D,this):(this.head=D,this.tail=D,this)},L.prototype.delete=function(k){if(!this.head)return null;for(var D=null;this.head&&this.compare(this.head.value,k);)D=this.head,this.head=this.head.next;var w=this.head;if(w!==null)for(;w.next;)this.compare(w.next.value,k)?(D=w.next,w.next=w.next.next):w=w.next;return this.compare(this.tail.value,k)&&(this.tail=w),D},L.prototype.find=function(k){var D=k.value,w=D===void 0?void 0:D,b=k.callback,g=b===void 0?void 0:b;if(!this.head)return null;for(var y=this.head;y;){if(g&&g(y.value)||w!==void 0&&this.compare(y.value,w))return y;y=y.next}return null},L.prototype.deleteTail=function(){var k=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,k;for(var D=this.head;D.next;)D.next.next?D=D.next:D.next=null;return this.tail=D,k},L.prototype.deleteHead=function(){if(!this.head)return null;var k=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),k},L.prototype.fromArray=function(k){var D=this;return k.forEach(function(w){return D.append(w)}),this},L.prototype.toArray=function(){for(var k=[],D=this.head;D;)k.push(D),D=D.next;return k},L.prototype.reverse=function(){for(var k=this.head,D=null,w=null;k;)w=k.next,k.next=D,D=k,k=w;this.tail=this.head,this.head=D},L.prototype.toString=function(k){return k===void 0&&(k=void 0),this.toArray().map(function(D){return D.toString(k)}).toString()},L}(),B=j;U.default=B},93026:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=j(z(88481));function j(k){return k&&k.__esModule?k:{default:k}}var B=function(){function k(){this.linkedList=new F.default}return k.prototype.isEmpty=function(){return!this.linkedList.head},k.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},k.prototype.enqueue=function(D){this.linkedList.append(D)},k.prototype.dequeue=function(){var D=this.linkedList.deleteHead();return D?D.value:null},k.prototype.toString=function(D){return this.linkedList.toString(D)},k}(),L=B;U.default=L},38823:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var z=function(){function j(B){this.count=B.length,this.parent={};for(var L=0,k=B;L<k.length;L++){var D=k[L];this.parent[D]=D}}return j.prototype.find=function(B){for(;this.parent[B]!==B;)B=this.parent[B];return B},j.prototype.union=function(B,L){var k=this.find(B),D=this.find(L);k!==D&&(k<D?(this.parent[L]!==L&&this.union(this.parent[L],B),this.parent[L]=this.parent[B]):(this.parent[B]!==B&&this.union(this.parent[B],L),this.parent[B]=this.parent[L]))},j.prototype.connected=function(B,L){return this.find(B)===this.find(L)},j}(),F=z;U.default=F},17892:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.DistanceType=void 0;var z;U.DistanceType=z,function(F){F.EuclideanDistance="euclideanDistance"}(z||(U.DistanceType=z={}))},70643:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.uniqueId=U.getOutEdgesNodeId=U.getNeighbors=U.getEdgesByNodeId=void 0;var z=function(k,D,w){D===void 0&&(D=[]);var b=D.filter(function(S){return S.source===k||S.target===k});if(w==="target"){var g=function(_){return _.source===k};return b.filter(g).map(function(S){return S.target})}if(w==="source"){var y=function(_){return _.target===k};return b.filter(y).map(function(S){return S.source})}var d=function(_){return _.source===k?_.target:_.source};return b.map(d)};U.getNeighbors=z;var F=function(k,D){return D.filter(function(w){return w.source===k})};U.getOutEdgesNodeId=F;var j=function(k,D){return D.filter(function(w){return w.source===k||w.target===k})};U.getEdgesByNodeId=j;var B=function(k){k===void 0&&(k=0);var D="".concat(Math.random()).split(".")[1].substr(0,5),w="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(k,"-").concat(D).concat(w)};U.uniqueId=B},26838:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.oneHot=U.getDistance=U.getAllKeyValueMap=U.default=void 0;var F=z(13810),j=z(17892),B=L(z(29741));function L(g){return g&&g.__esModule?g:{default:g}}var k=function(y,d,S){var _=[];d!=null&&d.length?_=d:(y.forEach(function(I){_=_.concat(Object.keys(I))}),_=(0,F.uniq)(_));var E={};return _.forEach(function(I){var P=[];y.forEach(function(N){N[I]!==void 0&&N[I]!==""&&P.push(N[I])}),P.length&&!(S!=null&&S.includes(I))&&(E[I]=(0,F.uniq)(P))}),E};U.getAllKeyValueMap=k;var D=function(y,d,S){var _=k(y,d,S),E=[];if(!Object.keys(_).length)return E;var I=Object.values(_),P=I.every(function(N){return N.every(function(H){return typeof H=="number"})});return y.forEach(function(N,H){var nt=[];Object.keys(_).forEach(function(X){var Y=N[X],Z=_[X],J=Z.findIndex(function(ut){return Y===ut}),it=[];if(P)it.push(Y);else for(var tt=0;tt<Z.length;tt++)tt===J?it.push(1):it.push(0);nt=nt.concat(it)}),E[H]=nt}),E};U.oneHot=D;var w=function(y,d,S,_){S===void 0&&(S=j.DistanceType.EuclideanDistance);var E=0;switch(S){case j.DistanceType.EuclideanDistance:E=new B.default(y).euclideanDistance(new B.default(d));break;default:break}return E};U.getDistance=w;var b={getAllKeyValueMap:k,oneHot:D,getDistance:w};U.default=b},3665:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.getPropertyWeight=U.getAllSortProperties=U.getAllProperties=U.default=void 0;var F=z(92935),j=function(b,g){b===void 0&&(b=[]),g===void 0&&(g=100);var y={};b.forEach(function(S){S.properties&&Object.keys(S.properties).forEach(function(_){if(_==="id"||!"".concat(S.properties[_]).match(F.secondReg)&&!"".concat(S.properties[_]).match(F.dateReg)&&isNaN(Number(S.properties[_]))){y.hasOwnProperty(_)&&delete y[_];return}y.hasOwnProperty(_)?y[_]+=1:y[_]=1})});var d=Object.keys(y).sort(function(S,_){return y[_]-y[S]});return d.length<g?d:d.slice(0,g)};U.getAllSortProperties=j;var B=function(b,g){return g.map(function(y){return b.hasOwnProperty(y)?b[y]:0})},L=function(b){for(var g=j(b),y=[],d=0;d<b.length;d++)y[d]=B(b[d].properties,g);return y};U.getPropertyWeight=L;var k=function(b,g){g===void 0&&(g=void 0);var y=[];return b.forEach(function(d){g===void 0&&y.push(d),d[g]!==void 0&&y.push(d[g])}),y};U.getAllProperties=k;var D={getAllSortProperties:j,getPropertyWeight:L,getAllProperties:k};U.default=D},29741:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=z(13810),j=function(){function L(k){this.arr=k}return L.prototype.getArr=function(){return this.arr||[]},L.prototype.add=function(k){var D,w=k.arr;if(!(!((D=this.arr)===null||D===void 0)&&D.length))return new L(w);if(!(w!=null&&w.length))return new L(this.arr);if(this.arr.length===w.length){var b=[];for(var g in this.arr)b[g]=this.arr[g]+w[g];return new L(b)}},L.prototype.subtract=function(k){var D,w=k.arr;if(!(!((D=this.arr)===null||D===void 0)&&D.length))return new L(w);if(!(w!=null&&w.length))return new L(this.arr);if(this.arr.length===w.length){var b=[];for(var g in this.arr)b[g]=this.arr[g]-w[g];return new L(b)}},L.prototype.avg=function(k){var D=[];if(k!==0)for(var w in this.arr)D[w]=this.arr[w]/k;return new L(D)},L.prototype.negate=function(){var k=[];for(var D in this.arr)k[D]=-this.arr[D];return new L(k)},L.prototype.squareEuclideanDistance=function(k){var D,w=k.arr;if(!(!((D=this.arr)===null||D===void 0)&&D.length)||!(w!=null&&w.length))return 0;if(this.arr.length===w.length){var b=0;for(var g in this.arr)b+=Math.pow(this.arr[g]-k.arr[g],2);return b}},L.prototype.euclideanDistance=function(k){var D,w=k.arr;if(!(!((D=this.arr)===null||D===void 0)&&D.length)||!(w!=null&&w.length))return 0;if(this.arr.length===w.length){var b=0;for(var g in this.arr)b+=Math.pow(this.arr[g]-k.arr[g],2);return Math.sqrt(b)}else console.error("The two vectors are unequal in length.")},L.prototype.normalize=function(){var k=[],D=(0,F.clone)(this.arr);D.sort(function(y,d){return y-d});var w=D[D.length-1],b=D[0];for(var g in this.arr)k[g]=(this.arr[g]-b)/(w-b);return new L(k)},L.prototype.norm2=function(){var k;if(!(!((k=this.arr)===null||k===void 0)&&k.length))return 0;var D=0;for(var w in this.arr)D+=Math.pow(this.arr[w],2);return Math.sqrt(D)},L.prototype.dot=function(k){var D,w=k.arr;if(!(!((D=this.arr)===null||D===void 0)&&D.length)||!(w!=null&&w.length))return 0;if(this.arr.length===w.length){var b=0;for(var g in this.arr)b+=this.arr[g]*k.arr[g];return b}else console.error("The two vectors are unequal in length.")},L.prototype.equal=function(k){var D,w=k.arr;if(((D=this.arr)===null||D===void 0?void 0:D.length)!==(w==null?void 0:w.length))return!1;for(var b in this.arr)if(this.arr[b]!==w[b])return!1;return!0},L}(),B=j;U.default=B},31656:function(xr,U,z){"use strict";function F(X){"@babel/helpers - typeof";return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},F(X)}Object.defineProperty(U,"__esModule",{value:!0}),Object.defineProperty(U,"GADDI",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(U,"breadthFirstSearch",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(U,"connectedComponent",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(U,"depthFirstSearch",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(U,"detectCycle",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(U,"dijkstra",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(U,"findAllPath",{enumerable:!0,get:function(){return g.findAllPath}}),Object.defineProperty(U,"findShortestPath",{enumerable:!0,get:function(){return g.findShortestPath}}),Object.defineProperty(U,"floydWarshall",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(U,"getAdjMatrix",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(U,"getDegree",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(U,"getInDegree",{enumerable:!0,get:function(){return k.getInDegree}}),Object.defineProperty(U,"getNeighbors",{enumerable:!0,get:function(){return P.getNeighbors}}),Object.defineProperty(U,"getOutDegree",{enumerable:!0,get:function(){return k.getOutDegree}}),Object.defineProperty(U,"labelPropagation",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(U,"louvain",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(U,"minimumSpanningTree",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(U,"pageRank",{enumerable:!0,get:function(){return E.default}});var j=nt(z(62238)),B=nt(z(83764)),L=nt(z(59527)),k=H(z(82556)),D=nt(z(94282)),w=nt(z(45891)),b=nt(z(78089)),g=z(41727),y=nt(z(75033)),d=nt(z(5170)),S=nt(z(35179)),_=nt(z(89454)),E=nt(z(74926)),I=nt(z(82812)),P=z(70643);function N(X){if(typeof WeakMap!="function")return null;var Y=new WeakMap,Z=new WeakMap;return(N=function(it){return it?Z:Y})(X)}function H(X,Y){if(!Y&&X&&X.__esModule)return X;if(X===null||F(X)!=="object"&&typeof X!="function")return{default:X};var Z=N(Y);if(Z&&Z.has(X))return Z.get(X);var J={},it=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var tt in X)if(tt!=="default"&&Object.prototype.hasOwnProperty.call(X,tt)){var ut=it?Object.getOwnPropertyDescriptor(X,tt):null;ut&&(ut.get||ut.set)?Object.defineProperty(J,tt,ut):J[tt]=X[tt]}return J.default=X,Z&&Z.set(X,J),J}function nt(X){return X&&X.__esModule?X:{default:X}}},66044:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.MESSAGE=U.ALGORITHM=void 0;var z={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};U.ALGORITHM=z;var F={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};U.MESSAGE=F},70585:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=z(66044),j=B(z(12067));function B(D){return D&&D.__esModule?D:{default:D}}var L=function(w){return function(){for(var b=[],g=0;g<arguments.length;g++)b[g]=arguments[g];return new Promise(function(y,d){var S=new j.default;S.postMessage({_algorithmType:w,data:b}),S.onmessage=function(_){var E=_.data,I=E.data,P=E._algorithmType;F.MESSAGE.SUCCESS===P?y(I):d(),S.terminate()}})}},k=L;U.default=k},30485:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.pageRankAsync=U.minimumSpanningTreeAsync=U.louvainAsync=U.labelPropagationAsync=U.getOutDegreeAsync=U.getNeighborsAsync=U.getInDegreeAsync=U.getDegreeAsync=U.getAdjMatrixAsync=U.floydWarshallAsync=U.findShortestPathAsync=U.findAllPathAsync=U.dijkstraAsync=U.detectCycleAsync=U.detectAllUndirectedCycleAsync=U.detectAllDirectedCycleAsync=U.detectAllCyclesAsync=U.connectedComponentAsync=U.GADDIAsync=void 0;var F=B(z(70585)),j=z(66044);function B(J){return J&&J.__esModule?J:{default:J}}var L=function(it,tt){return(0,F.default)(j.ALGORITHM.getAdjMatrix).apply(void 0,[it,tt])};U.getAdjMatrixAsync=L;var k=function(it,tt){return(0,F.default)(j.ALGORITHM.connectedComponent).apply(void 0,[it,tt])};U.connectedComponentAsync=k;var D=function(it){return(0,F.default)(j.ALGORITHM.getDegree)(it)};U.getDegreeAsync=D;var w=function(it,tt){return(0,F.default)(j.ALGORITHM.getInDegree)(it,tt)};U.getInDegreeAsync=w;var b=function(it,tt){return(0,F.default)(j.ALGORITHM.getOutDegree)(it,tt)};U.getOutDegreeAsync=b;var g=function(it){return(0,F.default)(j.ALGORITHM.detectCycle)(it)};U.detectCycleAsync=g;var y=function(it){return(0,F.default)(j.ALGORITHM.detectAllCycles)(it)};U.detectAllCyclesAsync=y;var d=function(it){return(0,F.default)(j.ALGORITHM.detectAllDirectedCycle)(it)};U.detectAllDirectedCycleAsync=d;var S=function(it){return(0,F.default)(j.ALGORITHM.detectAllUndirectedCycle)(it)};U.detectAllUndirectedCycleAsync=S;var _=function(it,tt,ut,vt){return(0,F.default)(j.ALGORITHM.dijkstra).apply(void 0,[it,tt,ut,vt])};U.dijkstraAsync=_;var E=function(it,tt,ut,vt){return(0,F.default)(j.ALGORITHM.findAllPath).apply(void 0,[it,tt,ut,vt])};U.findAllPathAsync=E;var I=function(it,tt,ut,vt,pt){return(0,F.default)(j.ALGORITHM.findShortestPath).apply(void 0,[it,tt,ut,vt,pt])};U.findShortestPathAsync=I;var P=function(it,tt){return(0,F.default)(j.ALGORITHM.floydWarshall).apply(void 0,[it,tt])};U.floydWarshallAsync=P;var N=function(it,tt,ut,vt){return vt===void 0&&(vt=1e3),(0,F.default)(j.ALGORITHM.labelPropagation)(it,tt,ut,vt)};U.labelPropagationAsync=N;var H=function(it,tt,ut,vt){return(0,F.default)(j.ALGORITHM.louvain)(it,tt,ut,vt)};U.louvainAsync=H;var nt=function(it,tt,ut){return(0,F.default)(j.ALGORITHM.minimumSpanningTree).apply(void 0,[it,tt,ut])};U.minimumSpanningTreeAsync=nt;var X=function(it,tt,ut){return(0,F.default)(j.ALGORITHM.pageRank).apply(void 0,[it,tt,ut])};U.pageRankAsync=X;var Y=function(it,tt,ut){return(0,F.default)(j.ALGORITHM.getNeighbors).apply(void 0,[it,tt,ut])};U.getNeighborsAsync=Y;var Z=function(it,tt,ut,vt,pt,Dt,Ot){return ut===void 0&&(ut=!1),Dt===void 0&&(Dt="cluster"),Ot===void 0&&(Ot="cluster"),(0,F.default)(j.ALGORITHM.GADDI).apply(void 0,[it,tt,ut,vt,pt,Dt,Ot])};U.GADDIAsync=Z},12067:function(xr,U,z){"use strict";function F(b){"@babel/helpers - typeof";return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},F(b)}Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var j=k(z(31656)),B=z(66044);function L(b){if(typeof WeakMap!="function")return null;var g=new WeakMap,y=new WeakMap;return(L=function(S){return S?y:g})(b)}function k(b,g){if(!g&&b&&b.__esModule)return b;if(b===null||F(b)!=="object"&&typeof b!="function")return{default:b};var y=L(g);if(y&&y.has(b))return y.get(b);var d={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in b)if(_!=="default"&&Object.prototype.hasOwnProperty.call(b,_)){var E=S?Object.getOwnPropertyDescriptor(b,_):null;E&&(E.get||E.set)?Object.defineProperty(d,_,E):d[_]=b[_]}return d.default=b,y&&y.set(b,d),d}var D=typeof self!="undefined"?self:{};D.onmessage=function(b){var g=b.data,y=g._algorithmType,d=g.data;if(y){if(typeof j[y]=="function"){var S=j[y].apply(j,d);D.postMessage({_algorithmType:B.MESSAGE.SUCCESS,data:S});return}D.postMessage({_algorithmType:B.MESSAGE.FAILURE})}};var w=null;U.default=w},94502:function(xr,U,z){"use strict";z.r(U),z.d(U,{Kernel:function(){return Dt},World:function(){return ya}});var F=z(15861),j=z(4942),B=z(15671),L=z(43144),k=z(36719),D=z.n(k),w=z(81763),b=z.n(w),g=z(1469),y=z.n(g),d=z(64687),S=z.n(d),_=null,E=1;function I(){return E++}var P=null,N=null,H;(function(q){q[q.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",q[q.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",q[q.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",q[q.POINTS=0]="POINTS",q[q.LINES=1]="LINES",q[q.LINE_LOOP=2]="LINE_LOOP",q[q.LINE_STRIP=3]="LINE_STRIP",q[q.TRIANGLES=4]="TRIANGLES",q[q.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",q[q.TRIANGLE_FAN=6]="TRIANGLE_FAN",q[q.ZERO=0]="ZERO",q[q.ONE=1]="ONE",q[q.SRC_COLOR=768]="SRC_COLOR",q[q.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",q[q.SRC_ALPHA=770]="SRC_ALPHA",q[q.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",q[q.DST_ALPHA=772]="DST_ALPHA",q[q.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",q[q.DST_COLOR=774]="DST_COLOR",q[q.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",q[q.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",q[q.FUNC_ADD=32774]="FUNC_ADD",q[q.BLEND_EQUATION=32777]="BLEND_EQUATION",q[q.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",q[q.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",q[q.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",q[q.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",q[q.MAX_EXT=32776]="MAX_EXT",q[q.MIN_EXT=32775]="MIN_EXT",q[q.BLEND_DST_RGB=32968]="BLEND_DST_RGB",q[q.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",q[q.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",q[q.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",q[q.CONSTANT_COLOR=32769]="CONSTANT_COLOR",q[q.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",q[q.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",q[q.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",q[q.BLEND_COLOR=32773]="BLEND_COLOR",q[q.ARRAY_BUFFER=34962]="ARRAY_BUFFER",q[q.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",q[q.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",q[q.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",q[q.STREAM_DRAW=35040]="STREAM_DRAW",q[q.STATIC_DRAW=35044]="STATIC_DRAW",q[q.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",q[q.BUFFER_SIZE=34660]="BUFFER_SIZE",q[q.BUFFER_USAGE=34661]="BUFFER_USAGE",q[q.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",q[q.FRONT=1028]="FRONT",q[q.BACK=1029]="BACK",q[q.FRONT_AND_BACK=1032]="FRONT_AND_BACK",q[q.CULL_FACE=2884]="CULL_FACE",q[q.BLEND=3042]="BLEND",q[q.DITHER=3024]="DITHER",q[q.STENCIL_TEST=2960]="STENCIL_TEST",q[q.DEPTH_TEST=2929]="DEPTH_TEST",q[q.SCISSOR_TEST=3089]="SCISSOR_TEST",q[q.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",q[q.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",q[q.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",q[q.NO_ERROR=0]="NO_ERROR",q[q.INVALID_ENUM=1280]="INVALID_ENUM",q[q.INVALID_VALUE=1281]="INVALID_VALUE",q[q.INVALID_OPERATION=1282]="INVALID_OPERATION",q[q.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",q[q.CW=2304]="CW",q[q.CCW=2305]="CCW",q[q.LINE_WIDTH=2849]="LINE_WIDTH",q[q.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",q[q.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",q[q.CULL_FACE_MODE=2885]="CULL_FACE_MODE",q[q.FRONT_FACE=2886]="FRONT_FACE",q[q.DEPTH_RANGE=2928]="DEPTH_RANGE",q[q.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",q[q.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",q[q.DEPTH_FUNC=2932]="DEPTH_FUNC",q[q.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",q[q.STENCIL_FUNC=2962]="STENCIL_FUNC",q[q.STENCIL_FAIL=2964]="STENCIL_FAIL",q[q.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",q[q.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",q[q.STENCIL_REF=2967]="STENCIL_REF",q[q.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",q[q.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",q[q.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",q[q.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",q[q.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",q[q.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",q[q.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",q[q.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",q[q.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",q[q.VIEWPORT=2978]="VIEWPORT",q[q.SCISSOR_BOX=3088]="SCISSOR_BOX",q[q.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",q[q.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",q[q.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",q[q.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",q[q.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",q[q.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",q[q.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",q[q.RED_BITS=3410]="RED_BITS",q[q.GREEN_BITS=3411]="GREEN_BITS",q[q.BLUE_BITS=3412]="BLUE_BITS",q[q.ALPHA_BITS=3413]="ALPHA_BITS",q[q.DEPTH_BITS=3414]="DEPTH_BITS",q[q.STENCIL_BITS=3415]="STENCIL_BITS",q[q.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",q[q.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",q[q.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",q[q.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",q[q.SAMPLES=32937]="SAMPLES",q[q.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",q[q.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",q[q.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",q[q.DONT_CARE=4352]="DONT_CARE",q[q.FASTEST=4353]="FASTEST",q[q.NICEST=4354]="NICEST",q[q.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",q[q.BYTE=5120]="BYTE",q[q.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",q[q.SHORT=5122]="SHORT",q[q.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",q[q.INT=5124]="INT",q[q.UNSIGNED_INT=5125]="UNSIGNED_INT",q[q.FLOAT=5126]="FLOAT",q[q.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",q[q.ALPHA=6406]="ALPHA",q[q.RGB=6407]="RGB",q[q.RGBA=6408]="RGBA",q[q.LUMINANCE=6409]="LUMINANCE",q[q.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",q[q.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",q[q.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",q[q.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",q[q.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",q[q.VERTEX_SHADER=35633]="VERTEX_SHADER",q[q.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",q[q.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",q[q.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",q[q.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",q[q.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",q[q.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",q[q.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",q[q.SHADER_TYPE=35663]="SHADER_TYPE",q[q.DELETE_STATUS=35712]="DELETE_STATUS",q[q.LINK_STATUS=35714]="LINK_STATUS",q[q.VALIDATE_STATUS=35715]="VALIDATE_STATUS",q[q.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",q[q.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",q[q.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",q[q.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",q[q.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",q[q.NEVER=512]="NEVER",q[q.LESS=513]="LESS",q[q.EQUAL=514]="EQUAL",q[q.LEQUAL=515]="LEQUAL",q[q.GREATER=516]="GREATER",q[q.NOTEQUAL=517]="NOTEQUAL",q[q.GEQUAL=518]="GEQUAL",q[q.ALWAYS=519]="ALWAYS",q[q.KEEP=7680]="KEEP",q[q.REPLACE=7681]="REPLACE",q[q.INCR=7682]="INCR",q[q.DECR=7683]="DECR",q[q.INVERT=5386]="INVERT",q[q.INCR_WRAP=34055]="INCR_WRAP",q[q.DECR_WRAP=34056]="DECR_WRAP",q[q.VENDOR=7936]="VENDOR",q[q.RENDERER=7937]="RENDERER",q[q.VERSION=7938]="VERSION",q[q.NEAREST=9728]="NEAREST",q[q.LINEAR=9729]="LINEAR",q[q.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",q[q.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",q[q.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",q[q.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",q[q.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",q[q.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",q[q.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",q[q.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",q[q.TEXTURE_2D=3553]="TEXTURE_2D",q[q.TEXTURE=5890]="TEXTURE",q[q.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",q[q.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",q[q.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",q[q.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",q[q.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",q[q.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",q[q.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",q[q.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",q[q.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",q[q.TEXTURE0=33984]="TEXTURE0",q[q.TEXTURE1=33985]="TEXTURE1",q[q.TEXTURE2=33986]="TEXTURE2",q[q.TEXTURE3=33987]="TEXTURE3",q[q.TEXTURE4=33988]="TEXTURE4",q[q.TEXTURE5=33989]="TEXTURE5",q[q.TEXTURE6=33990]="TEXTURE6",q[q.TEXTURE7=33991]="TEXTURE7",q[q.TEXTURE8=33992]="TEXTURE8",q[q.TEXTURE9=33993]="TEXTURE9",q[q.TEXTURE10=33994]="TEXTURE10",q[q.TEXTURE11=33995]="TEXTURE11",q[q.TEXTURE12=33996]="TEXTURE12",q[q.TEXTURE13=33997]="TEXTURE13",q[q.TEXTURE14=33998]="TEXTURE14",q[q.TEXTURE15=33999]="TEXTURE15",q[q.TEXTURE16=34e3]="TEXTURE16",q[q.TEXTURE17=34001]="TEXTURE17",q[q.TEXTURE18=34002]="TEXTURE18",q[q.TEXTURE19=34003]="TEXTURE19",q[q.TEXTURE20=34004]="TEXTURE20",q[q.TEXTURE21=34005]="TEXTURE21",q[q.TEXTURE22=34006]="TEXTURE22",q[q.TEXTURE23=34007]="TEXTURE23",q[q.TEXTURE24=34008]="TEXTURE24",q[q.TEXTURE25=34009]="TEXTURE25",q[q.TEXTURE26=34010]="TEXTURE26",q[q.TEXTURE27=34011]="TEXTURE27",q[q.TEXTURE28=34012]="TEXTURE28",q[q.TEXTURE29=34013]="TEXTURE29",q[q.TEXTURE30=34014]="TEXTURE30",q[q.TEXTURE31=34015]="TEXTURE31",q[q.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",q[q.REPEAT=10497]="REPEAT",q[q.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",q[q.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",q[q.FLOAT_VEC2=35664]="FLOAT_VEC2",q[q.FLOAT_VEC3=35665]="FLOAT_VEC3",q[q.FLOAT_VEC4=35666]="FLOAT_VEC4",q[q.INT_VEC2=35667]="INT_VEC2",q[q.INT_VEC3=35668]="INT_VEC3",q[q.INT_VEC4=35669]="INT_VEC4",q[q.BOOL=35670]="BOOL",q[q.BOOL_VEC2=35671]="BOOL_VEC2",q[q.BOOL_VEC3=35672]="BOOL_VEC3",q[q.BOOL_VEC4=35673]="BOOL_VEC4",q[q.FLOAT_MAT2=35674]="FLOAT_MAT2",q[q.FLOAT_MAT3=35675]="FLOAT_MAT3",q[q.FLOAT_MAT4=35676]="FLOAT_MAT4",q[q.SAMPLER_2D=35678]="SAMPLER_2D",q[q.SAMPLER_CUBE=35680]="SAMPLER_CUBE",q[q.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",q[q.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",q[q.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",q[q.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",q[q.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",q[q.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",q[q.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",q[q.COMPILE_STATUS=35713]="COMPILE_STATUS",q[q.LOW_FLOAT=36336]="LOW_FLOAT",q[q.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",q[q.HIGH_FLOAT=36338]="HIGH_FLOAT",q[q.LOW_INT=36339]="LOW_INT",q[q.MEDIUM_INT=36340]="MEDIUM_INT",q[q.HIGH_INT=36341]="HIGH_INT",q[q.FRAMEBUFFER=36160]="FRAMEBUFFER",q[q.RENDERBUFFER=36161]="RENDERBUFFER",q[q.RGBA4=32854]="RGBA4",q[q.RGB5_A1=32855]="RGB5_A1",q[q.RGB565=36194]="RGB565",q[q.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",q[q.STENCIL_INDEX=6401]="STENCIL_INDEX",q[q.STENCIL_INDEX8=36168]="STENCIL_INDEX8",q[q.DEPTH_STENCIL=34041]="DEPTH_STENCIL",q[q.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",q[q.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",q[q.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",q[q.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",q[q.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",q[q.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",q[q.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",q[q.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",q[q.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",q[q.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",q[q.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",q[q.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",q[q.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",q[q.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",q[q.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",q[q.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",q[q.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",q[q.NONE=0]="NONE",q[q.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",q[q.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",q[q.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",q[q.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",q[q.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",q[q.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",q[q.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",q[q.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",q[q.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",q[q.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",q[q.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",q[q.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",q[q.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",q[q.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",q[q.COPY_SRC=1]="COPY_SRC",q[q.COPY_DST=2]="COPY_DST",q[q.SAMPLED=4]="SAMPLED",q[q.STORAGE=8]="STORAGE",q[q.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(H||(H={}));var nt=function(){function q(){(0,B.Z)(this,q),this.config=void 0}return(0,L.Z)(q,[{key:"get",value:function(){return this.config}},{key:"set",value:function(Ee){this.config=Ee}}]),q}(),X=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Y;(function(q){q.Void="Void",q.Boolean="Boolean",q.Float="Float",q.Uint32="Uint32",q.Int32="Int32",q.Vector="Vector",q.Vector2Float="vec2<f32>",q.Vector3Float="vec3<f32>",q.Vector4Float="vec4<f32>",q.Vector2Boolean="vec2<bool>",q.Vector3Boolean="vec3<bool>",q.Vector4Boolean="vec4<bool>",q.Vector2Uint="vec2<u32>",q.Vector3Uint="vec3<u32>",q.Vector4Uint="vec4<u32>",q.Vector2Int="vec2<i32>",q.Vector3Int="vec3<i32>",q.Vector4Int="vec4<i32>",q.Matrix="Matrix",q.Matrix3x3Float="mat3x3<f32>",q.Matrix4x4Float="mat4x4<i32>",q.Struct="Struct",q.FloatArray="Float[]",q.Vector4FloatArray="vec4<f32>[]"})(Y||(Y={}));var Z;(function(q){q.Program="Program",q.Identifier="Identifier",q.VariableDeclaration="VariableDeclaration",q.BlockStatement="BlockStatement",q.ReturnStatement="ReturnStatement",q.FunctionDeclaration="FunctionDeclaration",q.VariableDeclarator="VariableDeclarator",q.AssignmentExpression="AssignmentExpression",q.LogicalExpression="LogicalExpression",q.BinaryExpression="BinaryExpression",q.ArrayExpression="ArrayExpression",q.UnaryExpression="UnaryExpression",q.UpdateExpression="UpdateExpression",q.FunctionExpression="FunctionExpression",q.MemberExpression="MemberExpression",q.ConditionalExpression="ConditionalExpression",q.ExpressionStatement="ExpressionStatement",q.CallExpression="CallExpression",q.NumThreadStatement="NumThreadStatement",q.StorageStatement="StorageStatement",q.DoWhileStatement="DoWhileStatement",q.WhileStatement="WhileStatement",q.ForStatement="ForStatement",q.BreakStatement="BreakStatement",q.ContinueStatement="ContinueStatement",q.IfStatement="IfStatement",q.ImportedFunctionStatement="ImportedFunctionStatement"})(Z||(Z={}));var J;(function(q){q.Input="Input",q.Output="Output",q.Uniform="Uniform",q.Workgroup="Workgroup",q.UniformConstant="UniformConstant",q.Image="Image",q.StorageBuffer="StorageBuffer",q.Private="Private",q.Function="Function"})(J||(J={}));var it;(function(q){q.GLSL100="GLSL100",q.GLSL450="GLSL450",q.WGSL="WGSL"})(it||(it={}));var tt="__DefineValuePlaceholder__";function ut(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function vt(q,Ve){var Ee=Object.keys(q);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(q);Ve&&(nr=nr.filter(function(ar){return Object.getOwnPropertyDescriptor(q,ar).enumerable})),Ee.push.apply(Ee,nr)}return Ee}function pt(q){for(var Ve=1;Ve<arguments.length;Ve++){var Ee=arguments[Ve]!=null?arguments[Ve]:{};Ve%2?vt(Object(Ee),!0).forEach(function(nr){(0,j.Z)(q,nr,Ee[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(Ee)):vt(Object(Ee)).forEach(function(nr){Object.defineProperty(q,nr,Object.getOwnPropertyDescriptor(Ee,nr))})}return q}var Dt=function(){function q(Ve,Ee){(0,B.Z)(this,q),this.engine=Ve,this.configService=Ee,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,L.Z)(q,[{key:"init",value:function(){var Ee=this.configService.get(),nr=Ee.canvas,ar=Ee.engineOptions;this.initPromise=this.engine.init(pt({canvas:nr||ut(),antialiasing:!1},ar))}},{key:"setBundle",value:function(Ee){this.compiledBundle=JSON.parse(JSON.stringify(Ee))}},{key:"setDispatch",value:function(Ee){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=Ee),this}},{key:"setMaxIteration",value:function(Ee){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=Ee),this}},{key:"setBinding",value:function(Ee,nr){var ar=this;if(typeof Ee=="string"){var Ur=b()(nr)||D()(nr)||y()(nr);if(this.compiledBundle&&this.compiledBundle.context){var Nr=this.compiledBundle.context.defines.find(function(hn){return hn.name===Ee});if(Nr)return Nr.value=nr,this;var gn=this.compiledBundle.context.uniforms.find(function(hn){return hn.name===Ee});gn&&(Ur?(gn.data=nr,gn.isReferer=!1,gn.storageClass===J.Uniform?this.model&&this.model.updateUniform(Ee,nr):this.model&&this.model.updateBuffer(Ee,nr)):(gn.isReferer=!0,gn.data=nr))}}else Object.keys(Ee).forEach(function(hn){ar.setBinding(hn,Ee[hn])});return this}},{key:"execute",value:function(){var Ve=(0,F.Z)(S().mark(function nr(){var ar=this,Ur,Nr,gn=arguments;return S().wrap(function(pn){for(;;)switch(pn.prev=pn.next){case 0:if(Ur=gn.length>0&&gn[0]!==void 0?gn[0]:1,!this.dirty){pn.next=6;break}return this.compiledBundle.context&&(Ur>1?this.compiledBundle.context.maxIteration=Ur:this.compiledBundle.context.maxIteration++),pn.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(gt){var bt=gt.isReferer;return bt}).forEach(function(gt){var bt=gt.data,W=gt.name;ar.model.confirmInput(bt.model,W)}),Nr=0;Nr<Ur;Nr++)this.model.run();return this.engine.endFrame(),pn.abrupt("return",this);case 12:case"end":return pn.stop()}},nr,this)}));function Ee(){return Ve.apply(this,arguments)}return Ee}()},{key:"getOutput",value:function(){var Ve=(0,F.Z)(S().mark(function nr(){return S().wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:return Ur.abrupt("return",this.model.readData());case 1:case"end":return Ur.stop()}},nr,this)}));function Ee(){return Ve.apply(this,arguments)}return Ee}()},{key:"compile",value:function(){var Ve=(0,F.Z)(S().mark(function nr(){var ar,Ur,Nr;return S().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:return hn.next=2,this.initPromise;case 2:return ar=pt({},this.compiledBundle.context),Ur=this.engine.supportWebGPU?this.engine.useWGSL?it.WGSL:it.GLSL450:it.GLSL100,Nr=this.compiledBundle.shaders[Ur],ar.defines.filter(function(pn){return pn.runtime}).forEach(function(pn){var gt="".concat(tt).concat(pn.name);Nr=Nr.replace(gt,"".concat(pn.value))}),ar.shader=Nr,ar.uniforms.forEach(function(pn){if(!pn.data&&pn.storageClass===J.StorageBuffer){var gt=1;pn.type===Y.FloatArray?gt=1:pn.type===Y.Vector4FloatArray&&(gt=4),pn.data=new Float32Array(ar.output.length*gt).fill(0)}}),this.compiledBundle.context=ar,hn.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=hn.sent;case 12:case"end":return hn.stop()}},nr,this)}));function Ee(){return Ve.apply(this,arguments)}return Ee}()}]),q}(),Ot=z(81550),te=z.n(Ot),Gt=function(){function q(Ve,Ee){(0,B.Z)(this,q),this.attribute=void 0,this.buffer=void 0;var nr=Ee.buffer,ar=Ee.offset,Ur=Ee.stride,Nr=Ee.normalized,gn=Ee.size,hn=Ee.divisor;this.buffer=nr,this.attribute={buffer:nr.get(),offset:ar||0,stride:Ur||0,normalized:Nr||!1,divisor:hn||0},gn&&(this.attribute.size=gn)}return(0,L.Z)(q,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(Ee){this.buffer.subData(Ee)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),q}(),K,p,at,ht,wt,Mt,Ut,Vt,Me,Wt,ae,he,Se,xe,Bt=(K={},(0,j.Z)(K,H.POINTS,"points"),(0,j.Z)(K,H.LINES,"lines"),(0,j.Z)(K,H.LINE_LOOP,"line loop"),(0,j.Z)(K,H.LINE_STRIP,"line strip"),(0,j.Z)(K,H.TRIANGLES,"triangles"),(0,j.Z)(K,H.TRIANGLE_FAN,"triangle fan"),(0,j.Z)(K,H.TRIANGLE_STRIP,"triangle strip"),K),fe=(p={},(0,j.Z)(p,H.STATIC_DRAW,"static"),(0,j.Z)(p,H.DYNAMIC_DRAW,"dynamic"),(0,j.Z)(p,H.STREAM_DRAW,"stream"),p),Le=(at={},(0,j.Z)(at,H.BYTE,"int8"),(0,j.Z)(at,H.UNSIGNED_INT,"int16"),(0,j.Z)(at,H.INT,"int32"),(0,j.Z)(at,H.UNSIGNED_BYTE,"uint8"),(0,j.Z)(at,H.UNSIGNED_SHORT,"uint16"),(0,j.Z)(at,H.UNSIGNED_INT,"uint32"),(0,j.Z)(at,H.FLOAT,"float"),at),jt=(ht={},(0,j.Z)(ht,H.ALPHA,"alpha"),(0,j.Z)(ht,H.LUMINANCE,"luminance"),(0,j.Z)(ht,H.LUMINANCE_ALPHA,"luminance alpha"),(0,j.Z)(ht,H.RGB,"rgb"),(0,j.Z)(ht,H.RGBA,"rgba"),(0,j.Z)(ht,H.RGBA4,"rgba4"),(0,j.Z)(ht,H.RGB5_A1,"rgb5 a1"),(0,j.Z)(ht,H.RGB565,"rgb565"),(0,j.Z)(ht,H.DEPTH_COMPONENT,"depth"),(0,j.Z)(ht,H.DEPTH_STENCIL,"depth stencil"),ht),oe=(wt={},(0,j.Z)(wt,H.DONT_CARE,"dont care"),(0,j.Z)(wt,H.NICEST,"nice"),(0,j.Z)(wt,H.FASTEST,"fast"),wt),Te=(Mt={},(0,j.Z)(Mt,H.NEAREST,"nearest"),(0,j.Z)(Mt,H.LINEAR,"linear"),(0,j.Z)(Mt,H.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,j.Z)(Mt,H.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,j.Z)(Mt,H.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,j.Z)(Mt,H.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Mt),se=(Ut={},(0,j.Z)(Ut,H.REPEAT,"repeat"),(0,j.Z)(Ut,H.CLAMP_TO_EDGE,"clamp"),(0,j.Z)(Ut,H.MIRRORED_REPEAT,"mirror"),Ut),Ie=(Vt={},(0,j.Z)(Vt,H.NONE,"none"),(0,j.Z)(Vt,H.BROWSER_DEFAULT_WEBGL,"browser"),Vt),Pe=(Me={},(0,j.Z)(Me,H.NEVER,"never"),(0,j.Z)(Me,H.ALWAYS,"always"),(0,j.Z)(Me,H.LESS,"less"),(0,j.Z)(Me,H.LEQUAL,"lequal"),(0,j.Z)(Me,H.GREATER,"greater"),(0,j.Z)(Me,H.GEQUAL,"gequal"),(0,j.Z)(Me,H.EQUAL,"equal"),(0,j.Z)(Me,H.NOTEQUAL,"notequal"),Me),Lt=(Wt={},(0,j.Z)(Wt,H.FUNC_ADD,"add"),(0,j.Z)(Wt,H.MIN_EXT,"min"),(0,j.Z)(Wt,H.MAX_EXT,"max"),(0,j.Z)(Wt,H.FUNC_SUBTRACT,"subtract"),(0,j.Z)(Wt,H.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Wt),Je=(ae={},(0,j.Z)(ae,H.ZERO,"zero"),(0,j.Z)(ae,H.ONE,"one"),(0,j.Z)(ae,H.SRC_COLOR,"src color"),(0,j.Z)(ae,H.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,j.Z)(ae,H.SRC_ALPHA,"src alpha"),(0,j.Z)(ae,H.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,j.Z)(ae,H.DST_COLOR,"dst color"),(0,j.Z)(ae,H.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,j.Z)(ae,H.DST_ALPHA,"dst alpha"),(0,j.Z)(ae,H.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,j.Z)(ae,H.CONSTANT_COLOR,"constant color"),(0,j.Z)(ae,H.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,j.Z)(ae,H.CONSTANT_ALPHA,"constant alpha"),(0,j.Z)(ae,H.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,j.Z)(ae,H.SRC_ALPHA_SATURATE,"src alpha saturate"),ae),Lr=(he={},(0,j.Z)(he,H.NEVER,"never"),(0,j.Z)(he,H.ALWAYS,"always"),(0,j.Z)(he,H.LESS,"less"),(0,j.Z)(he,H.LEQUAL,"lequal"),(0,j.Z)(he,H.GREATER,"greater"),(0,j.Z)(he,H.GEQUAL,"gequal"),(0,j.Z)(he,H.EQUAL,"equal"),(0,j.Z)(he,H.NOTEQUAL,"notequal"),he),Vr=(Se={},(0,j.Z)(Se,H.ZERO,"zero"),(0,j.Z)(Se,H.KEEP,"keep"),(0,j.Z)(Se,H.REPLACE,"replace"),(0,j.Z)(Se,H.INVERT,"invert"),(0,j.Z)(Se,H.INCR,"increment"),(0,j.Z)(Se,H.DECR,"decrement"),(0,j.Z)(Se,H.INCR_WRAP,"increment wrap"),(0,j.Z)(Se,H.DECR_WRAP,"decrement wrap"),Se),Xr=(xe={},(0,j.Z)(xe,H.FRONT,"front"),(0,j.Z)(xe,H.BACK,"back"),xe),Mn=function(){function q(Ve,Ee){(0,B.Z)(this,q),this.buffer=void 0;var nr=Ee.data,ar=Ee.usage,Ur=Ee.type;this.buffer=Ve.buffer({data:nr,usage:fe[ar||H.STATIC_DRAW],type:Le[Ur||H.UNSIGNED_BYTE]})}return(0,L.Z)(q,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(Ee){var nr=Ee.data,ar=Ee.offset;this.buffer.subdata(nr,ar)}}]),q}(),Hr=z(74902);function Cn(q,Ve){var Ee=Object.keys(q);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(q);Ve&&(nr=nr.filter(function(ar){return Object.getOwnPropertyDescriptor(q,ar).enumerable})),Ee.push.apply(Ee,nr)}return Ee}function Zn(q){for(var Ve=1;Ve<arguments.length;Ve++){var Ee=arguments[Ve]!=null?arguments[Ve]:{};Ve%2?Cn(Object(Ee),!0).forEach(function(nr){(0,j.Z)(q,nr,Ee[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(Ee)):Cn(Object(Ee)).forEach(function(nr){Object.defineProperty(q,nr,Object.getOwnPropertyDescriptor(Ee,nr))})}return q}var Un=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,mn=0,rr=!1,sr=function(){function q(Ve,Ee){var nr=this;(0,B.Z)(this,q),this.reGl=Ve,this.context=Ee,this.entity=I(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var ar={};this.context.uniforms.forEach(function(pn){var gt=pn.name,bt=pn.type,W=pn.data,T=pn.isReferer,A=pn.storageClass;if(A===J.StorageBuffer){if(T)nr.textureCache[gt]={data:void 0},ar["".concat(gt,"Size")]=function(){return W.compiledBundle.context.output.textureSize};else{nr.textureCache[gt]=nr.calcDataTexture(gt,bt,W);var et=nr.textureCache[gt],_t=et.textureWidth,Xt=et.isOutput;ar["".concat(gt,"Size")]=[_t,_t],Xt&&(nr.outputTextureName=gt,nr.context.needPingpong&&(nr.outputTextureName="".concat(gt,"Output"),nr.textureCache[nr.outputTextureName]=nr.calcDataTexture(gt,bt,W)))}ar[gt]=function(){return rr&&console.log("[".concat(nr.entity,"]: ").concat(gt," ").concat(nr.textureCache[gt].id)),nr.textureCache[gt].texture}}else if(A===J.Uniform){if(W&&(Array.isArray(W)||D()(W))&&W.length>16)throw new Error("invalid data type ".concat(bt));ar[gt]=function(){return pn.data}}});var Ur=this.getOuputDataTexture(),Nr=Ur.textureWidth,gn=Ur.texelCount;ar.u_OutputTextureSize=[Nr,Nr],ar.u_OutputTexelCount=gn,this.context.output.textureSize=[Nr,Nr];var hn={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:ar,vert:Un,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(hn)}return(0,L.Z)(q,[{key:"run",value:function(){var Ee=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){Ee.computeCommand()}),rr&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var Ve=(0,F.Z)(S().mark(function nr(){var ar=this,Ur,Nr,gn,hn,pn,gt,bt,W;return S().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){Ur=ar.reGl.read()}),!Ur){A.next=6;break}if(Nr=this.getOuputDataTexture(),gn=Nr.originalDataLength,hn=Nr.elementsPerTexel,pn=Nr.typedArrayConstructor,gt=pn===void 0?Float32Array:pn,bt=[],hn!==4)for(W=0;W<Ur.length;W+=4)hn===1?bt.push(Ur[W]):hn===2?bt.push(Ur[W],Ur[W+1]):bt.push(Ur[W],Ur[W+1],Ur[W+2]);else bt=Ur;return A.abrupt("return",new gt(bt.slice(0,gn)));case 6:return A.abrupt("return",new Float32Array);case 7:case"end":return A.stop()}},nr,this)}));function Ee(){return Ve.apply(this,arguments)}return Ee}()},{key:"confirmInput",value:function(Ee,nr){var ar;this.entity===Ee.entity?(this.dynamicPingpong=!0,ar=this):ar=Ee,this.textureCache[nr].id=ar.getOuputDataTexture().id,this.textureCache[nr].texture=ar.getOuputDataTexture().texture,rr&&console.log("[".concat(this.entity,"]: confirm input ").concat(nr," from model ").concat(ar.entity,", ").concat(ar.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(Ee,nr){var ar=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Ur=this.context.uniforms.find(function(pn){var gt=pn.name;return gt===Ee});if(Ur){var Nr=this.calcDataTexture(Ee,Ur.type,nr),gn=Nr.texture,hn=Nr.data;this.textureCache[Ee].data=hn,this.textureCache[Ee].texture=gn}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var Ee=this.context.output.name;this.textureCache[Ee].id=this.getOuputDataTexture().id,this.textureCache[Ee].texture=this.getOuputDataTexture().texture}var nr=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=nr,rr&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var Ee=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=Ee}},{key:"cloneDataTexture",value:function(Ee){var nr=Ee.data,ar=Ee.textureWidth;return Zn(Zn({},Ee),{},{id:mn++,texture:this.reGl.texture({width:ar,height:ar,data:nr,type:"float"})})}},{key:"calcDataTexture",value:function(Ee,nr,ar){var Ur=1;nr===Y.Vector4FloatArray&&(Ur=4);for(var Nr=[],gn=0;gn<ar.length;gn+=Ur)Ur===1?Nr.push(ar[gn],0,0,0):Ur===2?Nr.push(ar[gn],ar[gn+1],0,0):Ur===3?Nr.push(ar[gn],ar[gn+1],ar[gn+2],0):Ur===4&&Nr.push(ar[gn],ar[gn+1],ar[gn+2],ar[gn+3]);var hn=ar.length,pn=Math.ceil(hn/Ur),gt=Math.ceil(Math.sqrt(pn)),bt=gt*gt;pn<bt&&Nr.push.apply(Nr,(0,Hr.Z)(new Array((bt-pn)*4).fill(0)));var W=this.reGl.texture({width:gt,height:gt,data:Nr,type:"float"});return{id:mn++,data:Nr,originalDataLength:hn,typedArrayConstructor:D()(ar)?ar.constructor:void 0,textureWidth:gt,texture:W,texelCount:pn,elementsPerTexel:Ur,isOutput:Ee===this.context.output.name}}}]),q}(),lr=function(){function q(Ve,Ee){(0,B.Z)(this,q),this.elements=void 0;var nr=Ee.data,ar=Ee.usage,Ur=Ee.type,Nr=Ee.count;this.elements=Ve.elements({data:nr,usage:fe[ar||H.STATIC_DRAW],type:Le[Ur||H.UNSIGNED_BYTE],count:Nr})}return(0,L.Z)(q,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(Ee){var nr=Ee.data;this.elements.subdata(nr)}},{key:"destroy",value:function(){this.elements.destroy()}}]),q}(),zr=function(){function q(Ve,Ee){(0,B.Z)(this,q),this.framebuffer=void 0;var nr=Ee.width,ar=Ee.height,Ur=Ee.color,Nr=Ee.colors,gn=Ee.depth,hn=Ee.stencil,pn={width:nr,height:ar};Array.isArray(Nr)&&(pn.colors=Nr.map(function(gt){return gt.get()})),Ur&&typeof Ur!="boolean"&&(pn.color=Ur.get()),this.framebuffer=Ve.framebuffer(pn)}return(0,L.Z)(q,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(Ee){var nr=Ee.width,ar=Ee.height;this.framebuffer.resize(nr,ar)}}]),q}(),fn=z(71002),wn=z(68630),ln=z.n(wn);function $n(q){var Ve={};return Object.keys(q).forEach(function(Ee){Jn(Ee,q[Ee],Ve,"")}),Ve}function Jn(q,Ve,Ee,nr){if(Ve===null||typeof Ve=="number"||typeof Ve=="boolean"||Array.isArray(Ve)&&typeof Ve[0]=="number"||D()(Ve)||Ve===""||Ve.resize!==void 0){Ee["".concat(nr&&nr+".").concat(q)]=Ve;return}ln()(Ve)&&Object.keys(Ve).forEach(function(ar){Jn(ar,Ve[ar],Ee,"".concat(nr&&nr+".").concat(q))}),Array.isArray(Ve)&&Ve.forEach(function(ar,Ur){Object.keys(ar).forEach(function(Nr){Jn(Nr,ar[Nr],Ee,"".concat(nr&&nr+".").concat(q,"[").concat(Ur,"]"))})})}function Da(q,Ve){var Ee=Object.keys(q);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(q);Ve&&(nr=nr.filter(function(ar){return Object.getOwnPropertyDescriptor(q,ar).enumerable})),Ee.push.apply(Ee,nr)}return Ee}function bn(q){for(var Ve=1;Ve<arguments.length;Ve++){var Ee=arguments[Ve]!=null?arguments[Ve]:{};Ve%2?Da(Object(Ee),!0).forEach(function(nr){(0,j.Z)(q,nr,Ee[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(Ee)):Da(Object(Ee)).forEach(function(nr){Object.defineProperty(q,nr,Object.getOwnPropertyDescriptor(Ee,nr))})}return q}var Hn=function(){function q(Ve,Ee){(0,B.Z)(this,q),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=Ve;var nr=Ee.vs,ar=Ee.fs,Ur=Ee.defines,Nr=Ee.attributes,gn=Ee.uniforms,hn=Ee.primitive,pn=Ee.count,gt=Ee.elements,bt=Ee.depth,W=Ee.blend,T=Ee.stencil,A=Ee.cull,et=Ee.instances,_t=Ee.scissor,Xt=Ee.viewport,Rt={};gn&&(this.uniforms=$n(gn),Object.keys(gn).forEach(function(fr){Rt[fr]=Ve.prop(fr)}));var ee={};Object.keys(Nr).forEach(function(fr){ee[fr]=Nr[fr].get()});var Ge=Ur&&this.generateDefines(Ur)||"",De={attributes:ee,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(Ge,`
`).concat(ar),uniforms:Rt,vert:`
`.concat(Ge,`
`).concat(nr),primitive:Bt[hn===void 0?H.TRIANGLES:hn]};et&&(De.instances=et),pn&&(De.count=pn),gt&&(De.elements=gt.get()),_t&&(De.scissor=_t),Xt&&(De.viewport=Xt),this.initDepthDrawParams({depth:bt},De),this.initBlendDrawParams({blend:W},De),this.initStencilDrawParams({stencil:T},De),this.initCullDrawParams({cull:A},De),this.drawCommand=Ve(De)}return(0,L.Z)(q,[{key:"addUniforms",value:function(Ee){this.uniforms=bn(bn({},this.uniforms),$n(Ee))}},{key:"draw",value:function(Ee){var nr=bn(bn({},this.uniforms),$n(Ee.uniforms||{})),ar={};Object.keys(nr).forEach(function(Ur){var Nr=(0,fn.Z)(nr[Ur]);Nr==="boolean"||Nr==="number"||Array.isArray(nr[Ur])||nr[Ur].BYTES_PER_ELEMENT?ar[Ur]=nr[Ur]:Nr==="string"||(ar[Ur]=nr[Ur].get())}),this.drawCommand(ar)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(Ee,nr){var ar=Ee.depth;ar&&(nr.depth={enable:ar.enable===void 0?!0:!!ar.enable,mask:ar.mask===void 0?!0:!!ar.mask,func:Pe[ar.func||H.LESS],range:ar.range||[0,1]})}},{key:"initBlendDrawParams",value:function(Ee,nr){var ar=Ee.blend;if(ar){var Ur=ar.enable,Nr=ar.func,gn=ar.equation,hn=ar.color,pn=hn===void 0?[0,0,0,0]:hn;nr.blend={enable:!!Ur,func:{srcRGB:Je[Nr&&Nr.srcRGB||H.SRC_ALPHA],srcAlpha:Je[Nr&&Nr.srcAlpha||H.SRC_ALPHA],dstRGB:Je[Nr&&Nr.dstRGB||H.ONE_MINUS_SRC_ALPHA],dstAlpha:Je[Nr&&Nr.dstAlpha||H.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Lt[gn&&gn.rgb||H.FUNC_ADD],alpha:Lt[gn&&gn.alpha||H.FUNC_ADD]},color:pn}}}},{key:"initStencilDrawParams",value:function(Ee,nr){var ar=Ee.stencil;if(ar){var Ur=ar.enable,Nr=ar.mask,gn=Nr===void 0?-1:Nr,hn=ar.func,pn=hn===void 0?{cmp:H.ALWAYS,ref:0,mask:-1}:hn,gt=ar.opFront,bt=gt===void 0?{fail:H.KEEP,zfail:H.KEEP,zpass:H.KEEP}:gt,W=ar.opBack,T=W===void 0?{fail:H.KEEP,zfail:H.KEEP,zpass:H.KEEP}:W;nr.stencil={enable:!!Ur,mask:gn,func:bn(bn({},pn),{},{cmp:Lr[pn.cmp]}),opFront:{fail:Vr[bt.fail],zfail:Vr[bt.zfail],zpass:Vr[bt.zpass]},opBack:{fail:Vr[T.fail],zfail:Vr[T.zfail],zpass:Vr[T.zpass]}}}}},{key:"initCullDrawParams",value:function(Ee,nr){var ar=Ee.cull;if(ar){var Ur=ar.enable,Nr=ar.face,gn=Nr===void 0?H.BACK:Nr;nr.cull={enable:!!Ur,face:Xr[gn]}}}},{key:"generateDefines",value:function(Ee){return Object.keys(Ee).map(function(nr){return"#define ".concat(nr," ").concat(Number(Ee[nr]))}).join(`
`)}}]),q}(),Wn=function(){function q(Ve,Ee){(0,B.Z)(this,q),this.texture=void 0,this.width=void 0,this.height=void 0;var nr=Ee.data,ar=Ee.type,Ur=ar===void 0?H.UNSIGNED_BYTE:ar,Nr=Ee.width,gn=Ee.height,hn=Ee.flipY,pn=hn===void 0?!1:hn,gt=Ee.format,bt=gt===void 0?H.RGBA:gt,W=Ee.mipmap,T=W===void 0?!1:W,A=Ee.wrapS,et=A===void 0?H.CLAMP_TO_EDGE:A,_t=Ee.wrapT,Xt=_t===void 0?H.CLAMP_TO_EDGE:_t,Rt=Ee.aniso,ee=Rt===void 0?0:Rt,Ge=Ee.alignment,De=Ge===void 0?1:Ge,fr=Ee.premultiplyAlpha,jr=fr===void 0?!1:fr,Sr=Ee.mag,vn=Sr===void 0?H.NEAREST:Sr,Xn=Ee.min,je=Xn===void 0?H.NEAREST:Xn,Er=Ee.colorSpace,Pr=Er===void 0?H.BROWSER_DEFAULT_WEBGL:Er;this.width=Nr,this.height=gn;var Kr={width:Nr,height:gn,type:Le[Ur],format:jt[bt],wrapS:se[et],wrapT:se[Xt],mag:Te[vn],min:Te[je],alignment:De,flipY:pn,colorSpace:Ie[Pr],premultiplyAlpha:jr,aniso:ee};nr&&(Kr.data=nr),typeof T=="number"?Kr.mipmap=oe[T]:typeof T=="boolean"&&(Kr.mipmap=T),this.texture=Ve.texture(Kr)}return(0,L.Z)(q,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(Ee){var nr=Ee.width,ar=Ee.height;this.texture.resize(nr,ar),this.width=nr,this.height=ar}},{key:"destroy",value:function(){this.texture.destroy()}}]),q}(),Bn=function(){function q(){var Ve=this;(0,B.Z)(this,q),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var Ee=(0,F.Z)(S().mark(function nr(ar){return S().wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:if(!ar.uniforms){Nr.next=3;break}return Nr.next=3,Promise.all(Object.keys(ar.uniforms).map(function(){var gn=(0,F.Z)(S().mark(function hn(pn){var gt;return S().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(!(ar.uniforms[pn]&&ar.uniforms[pn].load!==void 0)){W.next=5;break}return W.next=3,ar.uniforms[pn].load();case 3:gt=W.sent,ar.uniforms[pn]=gt;case 5:case"end":return W.stop()}},hn)}));return function(hn){return gn.apply(this,arguments)}}()));case 3:return Nr.abrupt("return",new Hn(Ve.gl,ar));case 4:case"end":return Nr.stop()}},nr)}));return function(nr){return Ee.apply(this,arguments)}}(),this.createAttribute=function(Ee){return new Gt(Ve.gl,Ee)},this.createBuffer=function(Ee){return new Mn(Ve.gl,Ee)},this.createElements=function(Ee){return new lr(Ve.gl,Ee)},this.createTexture2D=function(Ee){return new Wn(Ve.gl,Ee)},this.createFramebuffer=function(Ee){return new zr(Ve.gl,Ee)},this.useFramebuffer=function(Ee,nr){Ve.gl({framebuffer:Ee?Ee.get():null})(nr)},this.createComputeModel=function(){var Ee=(0,F.Z)(S().mark(function nr(ar){return S().wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:return Nr.abrupt("return",new sr(Ve.gl,ar));case 1:case"end":return Nr.stop()}},nr)}));return function(nr){return Ee.apply(this,arguments)}}(),this.clear=function(Ee){var nr=Ee.color,ar=Ee.depth,Ur=Ee.stencil,Nr=Ee.framebuffer,gn=Nr===void 0?null:Nr,hn={color:nr,depth:ar,stencil:Ur};hn.framebuffer=gn===null?gn:gn.get(),Ve.gl.clear(hn)},this.setScissor=function(Ee){Ve.gl&&Ve.gl._gl&&(Ee.enable&&Ee.box?(Ve.gl._gl.enable(H.SCISSOR_TEST),Ve.gl._gl.scissor(Ee.box.x,Ee.box.y,Ee.box.width,Ee.box.height)):Ve.gl._gl.disable(H.SCISSOR_TEST),Ve.gl._refresh())},this.viewport=function(Ee){var nr=Ee.x,ar=Ee.y,Ur=Ee.width,Nr=Ee.height;Ve.gl&&Ve.gl._gl&&(Ve.gl._gl.viewport(nr,ar,Ur,Nr),Ve.gl._refresh())},this.readPixels=function(Ee){var nr=Ee.framebuffer,ar=Ee.x,Ur=Ee.y,Nr=Ee.width,gn=Ee.height,hn={x:ar,y:Ur,width:Nr,height:gn};return nr&&(hn.framebuffer=nr.get()),Ve.gl.read(hn)},this.getCanvas=function(){return Ve.$canvas},this.getGLContext=function(){return Ve.gl._gl},this.destroy=function(){Ve.gl&&(Ve.gl.destroy(),Ve.inited=!1)}}return(0,L.Z)(q,[{key:"init",value:function(){var Ve=(0,F.Z)(S().mark(function nr(ar){return S().wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:if(!this.inited){Nr.next=2;break}return Nr.abrupt("return");case 2:return this.$canvas=ar.canvas,Nr.next=5,new Promise(function(gn,hn){te()({canvas:ar.canvas,attributes:{alpha:!0,antialias:ar.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(gt,bt){(gt||!bt)&&hn(gt),gn(bt)}})});case 5:this.gl=Nr.sent,this.inited=!0;case 7:case"end":return Nr.stop()}},nr,this)}));function Ee(nr){return Ve.apply(this,arguments)}return Ee}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),q}(),ya=function(){function q(){(0,B.Z)(this,q),this.engine=void 0,this.configService=new nt}return(0,L.Z)(q,[{key:"setConfig",value:function(Ee){this.configService.set(Ee)}},{key:"setEngine",value:function(Ee){this.engine=Ee}},{key:"createEntity",value:function(){return I()}},{key:"createKernel",value:function(Ee){var nr=new Dt(this.engine,this.configService);return typeof Ee=="string"?nr.setBundle(JSON.parse(Ee)):nr.setBundle(Ee),nr.init(),nr}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},nr=new q;return nr.setConfig(Ee),nr.setEngine(new Bn),nr}}]),q}()},67320:function(xr,U,z){"use strict";var F=this&&this.__createBinding||(Object.create?function(L,k,D,w){w===void 0&&(w=D);var b=Object.getOwnPropertyDescriptor(k,D);(!b||("get"in b?!k.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return k[D]}}),Object.defineProperty(L,w,b)}:function(L,k,D,w){w===void 0&&(w=D),L[w]=k[D]}),j=this&&this.__exportStar||function(L,k){for(var D in L)D!=="default"&&!Object.prototype.hasOwnProperty.call(k,D)&&F(k,L,D)};Object.defineProperty(U,"__esModule",{value:!0}),U.getLayoutByName=U.unRegisterLayout=U.registerLayout=void 0;var B=z(39464);Object.defineProperty(U,"registerLayout",{enumerable:!0,get:function(){return B.registerLayout}}),Object.defineProperty(U,"unRegisterLayout",{enumerable:!0,get:function(){return B.unRegisterLayout}}),Object.defineProperty(U,"getLayoutByName",{enumerable:!0,get:function(){return B.getLayoutByName}}),j(z(64649),U)},46253:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.Base=void 0;var z=function(){function F(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return F.prototype.layout=function(j){return this.init(j),this.execute(!0)},F.prototype.init=function(j){this.nodes=j.nodes||[],this.edges=j.edges||[],this.combos=j.combos||[],this.comboEdges=j.comboEdges||[],this.hiddenNodes=j.hiddenNodes||[],this.hiddenEdges=j.hiddenEdges||[],this.hiddenCombos=j.hiddenCombos||[],this.vedges=j.vedges||[]},F.prototype.execute=function(j){},F.prototype.executeWithWorker=function(){},F.prototype.getDefaultCfg=function(){return{}},F.prototype.updateCfg=function(j){j&&Object.assign(this,j)},F.prototype.getType=function(){return"base"},F.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},F}();U.Base=z},93959:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var b=function(g,y){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,S){d.__proto__=S}||function(d,S){for(var _ in S)Object.prototype.hasOwnProperty.call(S,_)&&(d[_]=S[_])},b(g,y)};return function(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");b(g,y);function d(){this.constructor=g}g.prototype=y===null?Object.create(y):(d.prototype=y.prototype,new d)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.CircularLayout=void 0;var j=z(46253),B=z(8273);function L(b,g,y,d){b.forEach(function(S,_){b[_].children=[],b[_].parent=[]}),d?g.forEach(function(S){var _=(0,B.getEdgeTerminal)(S,"source"),E=(0,B.getEdgeTerminal)(S,"target"),I=0;_&&(I=y[_]);var P=0;E&&(P=y[E]);var N=b[I].children,H=b[P].parent;N.push(b[P].id),H.push(b[I].id)}):g.forEach(function(S){var _=(0,B.getEdgeTerminal)(S,"source"),E=(0,B.getEdgeTerminal)(S,"target"),I=0;_&&(I=y[_]);var P=0;E&&(P=y[E]);var N=b[I].children,H=b[P].children;N.push(b[P].id),H.push(b[I].id)})}function k(b,g,y){for(var d=y.length,S=0;S<d;S++){var _=(0,B.getEdgeTerminal)(y[S],"source"),E=(0,B.getEdgeTerminal)(y[S],"target");if(b.id===_&&g.id===E||g.id===_&&b.id===E)return!0}return!1}function D(b,g){var y=b.degree,d=g.degree;return y<d?-1:y>d?1:0}var w=function(b){F(g,b);function g(y){var d=b.call(this)||this;return d.radius=null,d.nodeSize=void 0,d.startRadius=null,d.endRadius=null,d.startAngle=0,d.endAngle=2*Math.PI,d.clockwise=!0,d.divisions=1,d.ordering=null,d.angleRatio=1,d.nodes=[],d.edges=[],d.nodeMap={},d.degrees=[],d.width=300,d.height=300,d.updateCfg(y),d}return g.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},g.prototype.execute=function(){var y,d=this,S=d.nodes,_=d.edges,E=S.length;if(E===0){d.onLayoutEnd&&d.onLayoutEnd();return}!d.width&&typeof window!="undefined"&&(d.width=window.innerWidth),!d.height&&typeof window!="undefined"&&(d.height=window.innerHeight),d.center||(d.center=[d.width/2,d.height/2]);var I=d.center;if(E===1){S[0].x=I[0],S[0].y=I[1],d.onLayoutEnd&&d.onLayoutEnd();return}var P=d.radius,N=d.startRadius,H=d.endRadius,nt=d.divisions,X=d.startAngle,Y=d.endAngle,Z=d.angleRatio,J=d.ordering,it=d.clockwise,tt=d.nodeSpacing,ut=d.nodeSize,vt=(Y-X)/E,pt={};S.forEach(function(Vt,Me){pt[Vt.id]=Me}),d.nodeMap=pt;var Dt=(0,B.getDegree)(S.length,pt,_);if(d.degrees=Dt,tt){var Ot=(0,B.getFuncByUnknownType)(10,tt),te=(0,B.getFuncByUnknownType)(10,ut),Gt=-1/0;S.forEach(function(Vt){var Me=te(Vt);Gt<Me&&(Gt=Me)});var K=0;S.forEach(function(Vt,Me){Me===0?K+=Gt||10:K+=(Ot(Vt)||0)+(Gt||10)}),P=K/(2*Math.PI)}else!P&&!N&&!H?P=d.height>d.width?d.width/2:d.height/2:!N&&H?N=H:N&&!H&&(H=N);var p=vt*Z,at=[];J==="topology"?at=d.topologyOrdering():J==="topology-directed"?at=d.topologyOrdering(!0):J==="degree"?at=d.degreeOrdering():at=S;for(var ht=Math.ceil(E/nt),wt=0;wt<E;++wt){var Mt=P;!Mt&&N!==null&&H!==null&&(Mt=N+wt*(H-N)/(E-1)),Mt||(Mt=10+wt*100/(E-1));var Ut=X+wt%ht*p+2*Math.PI/nt*Math.floor(wt/ht);it||(Ut=Y-wt%ht*p-2*Math.PI/nt*Math.floor(wt/ht)),at[wt].x=I[0]+Math.cos(Ut)*Mt,at[wt].y=I[1]+Math.sin(Ut)*Mt,at[wt].weight=Dt[wt].all}return(y=d.onLayoutEnd)===null||y===void 0||y.call(d),{nodes:at,edges:this.edges}},g.prototype.topologyOrdering=function(y){y===void 0&&(y=!1);var d=this,S=d.degrees,_=d.edges,E=d.nodes,I=(0,B.clone)(E),P=d.nodeMap,N=[I[0]],H=[E[0]],nt=[],X=E.length;nt[0]=!0,L(I,_,P,y);var Y=0;return I.forEach(function(Z,J){if(J!==0)if((J===X-1||S[J].all!==S[J+1].all||k(N[Y],Z,_))&&!nt[J])N.push(Z),H.push(E[P[Z.id]]),nt[J]=!0,Y++;else{for(var it=N[Y].children,tt=!1,ut=0;ut<it.length;ut++){var vt=P[it[ut]];if(S[vt].all===S[J].all&&!nt[vt]){N.push(I[vt]),H.push(E[P[I[vt].id]]),nt[vt]=!0,tt=!0;break}}for(var pt=0;!tt&&(nt[pt]||(N.push(I[pt]),H.push(E[P[I[pt].id]]),nt[pt]=!0,tt=!0),pt++,pt!==X););}}),H},g.prototype.degreeOrdering=function(){var y=this,d=y.nodes,S=[],_=y.degrees;return d.forEach(function(E,I){E.degree=_[I].all,S.push(E)}),S.sort(D),S},g.prototype.getType=function(){return"circular"},g}(j.Base);U.CircularLayout=w},6412:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var b=function(g,y){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,S){d.__proto__=S}||function(d,S){for(var _ in S)Object.prototype.hasOwnProperty.call(S,_)&&(d[_]=S[_])},b(g,y)};return function(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");b(g,y);function d(){this.constructor=g}g.prototype=y===null?Object.create(y):(d.prototype=y.prototype,new d)}}(),j=this&&this.__assign||function(){return j=Object.assign||function(b){for(var g,y=1,d=arguments.length;y<d;y++){g=arguments[y];for(var S in g)Object.prototype.hasOwnProperty.call(g,S)&&(b[S]=g[S])}return b},j.apply(this,arguments)};Object.defineProperty(U,"__esModule",{value:!0}),U.ComboCombinedLayout=void 0;var B=z(24979),L=z(46253),k=z(8273),D=z(64649),w=function(b){F(g,b);function g(y){var d=b.call(this)||this;return d.center=[0,0],d.nodes=[],d.edges=[],d.combos=[],d.comboEdges=[],d.comboPadding=10,d.comboTrees=[],d.updateCfg(y),d}return g.prototype.getDefaultCfg=function(){return{}},g.prototype.execute=function(){var y=this,d=y.nodes,S=y.center;if(!d||d.length===0){y.onLayoutEnd&&y.onLayoutEnd();return}if(d.length===1){d[0].x=S[0],d[0].y=S[1],y.onLayoutEnd&&y.onLayoutEnd();return}y.initVals(),y.run(),y.onLayoutEnd&&y.onLayoutEnd()},g.prototype.run=function(){var y,d=this,S=d.nodes,_=d.edges,E=d.combos,I=d.comboEdges,P=d.center,N={};S.forEach(function(Gt){N[Gt.id]=Gt});var H={};E.forEach(function(Gt){H[Gt.id]=Gt});var nt=d.getInnerGraphs(N),X=[],Y=[],Z={},J=!0;this.comboTrees.forEach(function(Gt){var K=nt[Gt.id];if(K){var p=j(j({},Gt),{x:K.x||H[Gt.id].x,y:K.y||H[Gt.id].y,fx:K.fx||H[Gt.id].fx,fy:K.fy||H[Gt.id].fy,mass:K.mass||H[Gt.id].mass,size:K.size});Y.push(p),!isNaN(p.x)&&p.x!==0&&!isNaN(p.y)&&p.y!==0?J=!1:(p.x=Math.random()*100,p.y=Math.random()*100),X.push(Gt.id),(0,k.traverseTreeUp)(Gt,function(at){return at.id!==Gt.id&&(Z[at.id]=Gt.id),!0})}}),S.forEach(function(Gt){if(!(Gt.comboId&&H[Gt.comboId])){var K=j({},Gt);Y.push(K),!isNaN(K.x)&&K.x!==0&&!isNaN(K.y)&&K.y!==0?J=!1:(K.x=Math.random()*100,K.y=Math.random()*100),X.push(Gt.id)}});var it=[];if(_.concat(I).forEach(function(Gt){var K=Z[Gt.source]||Gt.source,p=Z[Gt.target]||Gt.target;K!==p&&X.includes(K)&&X.includes(p)&&it.push({source:K,target:p})}),Y!=null&&Y.length){if(Y.length===1)Y[0].x=P[0],Y[0].y=P[1];else{var tt={nodes:Y,edges:it},ut=this.outerLayout||new D.GForceLayout({gravity:1,factor:4,linkDistance:function(Gt,K,p){var at,ht,wt=((((at=K.size)===null||at===void 0?void 0:at[0])||30)+(((ht=p.size)===null||ht===void 0?void 0:ht[0])||30))/2;return Math.min(wt*1.5,700)}}),vt=(y=ut.getType)===null||y===void 0?void 0:y.call(ut);if(ut.updateCfg({center:P,kg:5,preventOverlap:!0,animate:!1}),J&&B.FORCE_LAYOUT_TYPE_MAP[vt]){var pt=Y.length<100?new D.MDSLayout:new D.GridLayout;pt.layout(tt)}ut.layout(tt)}Y.forEach(function(Gt){var K=nt[Gt.id];if(!K){var p=N[Gt.id];p&&(p.x=Gt.x,p.y=Gt.y);return}K.visited=!0,K.x=Gt.x,K.y=Gt.y,K.nodes.forEach(function(at){at.x+=Gt.x,at.y+=Gt.y})})}for(var Dt=Object.keys(nt),Ot=function(Gt){var K=Dt[Gt],p=nt[K];if(!p)return"continue";p.nodes.forEach(function(at){p.visited||(at.x+=p.x||0,at.y+=p.y||0),N[at.id]&&(N[at.id].x=at.x,N[at.id].y=at.y)}),H[K]&&(H[K].x=p.x,H[K].y=p.y)},te=Dt.length-1;te>=0;te--)Ot(te);return{nodes:S,edges:_,combos:E,comboEdges:I}},g.prototype.getInnerGraphs=function(y){var d=this,S=d.comboTrees,_=d.nodeSize,E=d.edges,I=d.comboPadding,P=d.spacing,N={},H=this.innerLayout||new D.ConcentricLayout({type:"concentric",sortBy:"id"});return H.center=[0,0],H.preventOverlap=!0,H.nodeSpacing=P,(S||[]).forEach(function(nt){(0,k.traverseTreeUp)(nt,function(X){var Y,Z=(I==null?void 0:I(X))||10;if((0,k.isArray)(Z)&&(Z=Math.max.apply(Math,Z)),!((Y=X.children)===null||Y===void 0)&&Y.length){var it=X.children.map(function(ht){if(ht.itemType==="combo")return N[ht.id];var wt=y[ht.id]||{};return j(j({},wt),ht)}),tt=it.map(function(ht){return ht.id}),ut={nodes:it,edges:E.filter(function(ht){return tt.includes(ht.source)&&tt.includes(ht.target)})},vt=1/0;it.forEach(function(ht){var wt;ht.size||(ht.size=((wt=N[ht.id])===null||wt===void 0?void 0:wt.size)||(_==null?void 0:_(ht))||[30,30]),(0,k.isNumber)(ht.size)&&(ht.size=[ht.size,ht.size]),vt>ht.size[0]&&(vt=ht.size[0]),vt>ht.size[1]&&(vt=ht.size[1])}),H.layout(ut);var pt=(0,k.getLayoutBBox)(it),Dt=pt.minX,Ot=pt.minY,te=pt.maxX,Gt=pt.maxY,K={x:(te+Dt)/2,y:(Gt+Ot)/2};ut.nodes.forEach(function(ht){ht.x-=K.x,ht.y-=K.y});var p=Math.max(te-Dt,vt)+Z*2,at=Math.max(Gt-Ot,vt)+Z*2;N[X.id]={id:X.id,nodes:it,size:[p,at]}}else if(X.itemType==="combo"){var J=Z?[Z*2,Z*2]:[30,30];N[X.id]={id:X.id,nodes:[],size:J}}return!0})}),N},g.prototype.initVals=function(){var y=this,d=y.nodeSize,S=y.spacing,_,E;if((0,k.isNumber)(S)?E=function(){return S}:(0,k.isFunction)(S)?E=S:E=function(){return 0},this.spacing=E,!d)_=function(X){var Y=E(X);if(X.size){if((0,k.isArray)(X.size)){var Z=X.size[0]>X.size[1]?X.size[0]:X.size[1];return(Z+Y)/2}if((0,k.isObject)(X.size)){var Z=X.size.width>X.size.height?X.size.width:X.size.height;return(Z+Y)/2}return(X.size+Y)/2}return 10+Y/2};else if((0,k.isFunction)(d))_=function(X){var Y=d(X),Z=E(X);if((0,k.isArray)(X.size)){var J=X.size[0]>X.size[1]?X.size[0]:X.size[1];return(J+Z)/2}return((Y||10)+Z)/2};else if((0,k.isArray)(d)){var I=d[0]>d[1]?d[0]:d[1],P=I/2;_=function(X){return P+E(X)/2}}else{var N=d/2;_=function(X){return N+E(X)/2}}this.nodeSize=_;var H=y.comboPadding,nt;(0,k.isNumber)(H)?nt=function(){return H}:(0,k.isArray)(H)?nt=function(){return Math.max.apply(null,H)}:(0,k.isFunction)(H)?nt=H:nt=function(){return 0},this.comboPadding=nt},g.prototype.getType=function(){return"comboCombined"},g}(L.Base);U.ComboCombinedLayout=w},48133:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var k=function(D,w){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,g){b.__proto__=g}||function(b,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(b[y]=g[y])},k(D,w)};return function(D,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");k(D,w);function b(){this.constructor=D}D.prototype=w===null?Object.create(w):(b.prototype=w.prototype,new b)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.ComboForceLayout=void 0;var j=z(46253),B=z(8273),L=function(k){F(D,k);function D(w){var b=k.call(this)||this;return b.center=[0,0],b.maxIteration=100,b.gravity=10,b.comboGravity=10,b.linkDistance=10,b.alpha=1,b.alphaMin=.001,b.alphaDecay=1-Math.pow(b.alphaMin,1/300),b.alphaTarget=0,b.velocityDecay=.6,b.edgeStrength=.6,b.nodeStrength=30,b.preventOverlap=!1,b.preventNodeOverlap=!1,b.preventComboOverlap=!1,b.collideStrength=void 0,b.nodeCollideStrength=.5,b.comboCollideStrength=.5,b.comboSpacing=20,b.comboPadding=10,b.optimizeRangeFactor=1,b.onTick=function(){},b.onLayoutEnd=function(){},b.depthAttractiveForceScale=1,b.depthRepulsiveForceScale=2,b.nodes=[],b.edges=[],b.combos=[],b.comboTrees=[],b.width=300,b.height=300,b.bias=[],b.nodeMap={},b.oriComboMap={},b.indexMap={},b.comboMap={},b.previousLayouted=!1,b.updateCfg(w),b}return D.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},D.prototype.execute=function(){var w=this,b=w.nodes,g=w.center;if(w.comboTree={id:"comboTreeRoot",depth:-1,children:w.comboTrees},!b||b.length===0){w.onLayoutEnd&&w.onLayoutEnd();return}if(b.length===1){b[0].x=g[0],b[0].y=g[1],w.onLayoutEnd&&w.onLayoutEnd();return}w.initVals(),w.run(),w.onLayoutEnd&&w.onLayoutEnd()},D.prototype.run=function(){var w=this,b=w.nodes,g=w.previousLayouted?w.maxIteration/5:w.maxIteration;!w.width&&typeof window!="undefined"&&(w.width=window.innerWidth),!w.height&&typeof window!="undefined"&&(w.height=window.innerHeight);var y=w.center,d=w.velocityDecay,S=w.comboMap;w.previousLayouted||w.initPos(S);for(var _=function(N){var H=[];b.forEach(function(nt,X){H[X]={x:0,y:0}}),w.applyCalculate(H),w.applyComboCenterForce(H),b.forEach(function(nt,X){!(0,B.isNumber)(nt.x)||!(0,B.isNumber)(nt.y)||(nt.x+=H[X].x*d,nt.y+=H[X].y*d)}),w.alpha+=(w.alphaTarget-w.alpha)*w.alphaDecay,w.onTick()},E=0;E<g;E++)_(E);var I=[0,0];b.forEach(function(N){!(0,B.isNumber)(N.x)||!(0,B.isNumber)(N.y)||(I[0]+=N.x,I[1]+=N.y)}),I[0]/=b.length,I[1]/=b.length;var P=[y[0]-I[0],y[1]-I[1]];b.forEach(function(N,H){!(0,B.isNumber)(N.x)||!(0,B.isNumber)(N.y)||(N.x+=P[0],N.y+=P[1])}),w.combos.forEach(function(N){var H=S[N.id];H&&H.empty&&(N.x=H.cx||N.x,N.y=H.cy||N.y)}),w.previousLayouted=!0},D.prototype.initVals=function(){var w=this,b=w.edges,g=w.nodes,y=w.combos,d={},S={},_={};g.forEach(function(Mt,Ut){S[Mt.id]=Mt,_[Mt.id]=Ut}),w.nodeMap=S,w.indexMap=_;var E={};y.forEach(function(Mt){E[Mt.id]=Mt}),w.oriComboMap=E,w.comboMap=w.getComboMap();var I=w.preventOverlap;w.preventComboOverlap=w.preventComboOverlap||I,w.preventNodeOverlap=w.preventNodeOverlap||I;var P=w.collideStrength;P&&(w.comboCollideStrength=P,w.nodeCollideStrength=P),w.comboCollideStrength=w.comboCollideStrength?w.comboCollideStrength:0,w.nodeCollideStrength=w.nodeCollideStrength?w.nodeCollideStrength:0;for(var N=0;N<b.length;++N){var H=(0,B.getEdgeTerminal)(b[N],"source"),nt=(0,B.getEdgeTerminal)(b[N],"target");d[H]?d[H]++:d[H]=1,d[nt]?d[nt]++:d[nt]=1}for(var X=[],N=0;N<b.length;++N){var H=(0,B.getEdgeTerminal)(b[N],"source"),nt=(0,B.getEdgeTerminal)(b[N],"target");X[N]=d[H]/(d[H]+d[nt])}this.bias=X;var Y=w.nodeSize,Z=w.nodeSpacing,J,it;if((0,B.isNumber)(Z)?it=function(){return Z}:(0,B.isFunction)(Z)?it=Z:it=function(){return 0},this.nodeSpacing=it,!Y)J=function(Mt){if(Mt.size){if((0,B.isArray)(Mt.size)){var Ut=Mt.size[0]>Mt.size[1]?Mt.size[0]:Mt.size[1];return Ut/2}if((0,B.isObject)(Mt.size)){var Ut=Mt.size.width>Mt.size.height?Mt.size.width:Mt.size.height;return Ut/2}return Mt.size/2}return 10};else if((0,B.isFunction)(Y))J=function(Mt){return Y(Mt)};else if((0,B.isArray)(Y)){var tt=Y[0]>Y[1]?Y[0]:Y[1],ut=tt/2;J=function(Mt){return ut}}else{var vt=Y/2;J=function(Mt){return vt}}this.nodeSize=J;var pt=w.comboSpacing,Dt;(0,B.isNumber)(pt)?Dt=function(){return pt}:(0,B.isFunction)(pt)?Dt=pt:Dt=function(){return 0},this.comboSpacing=Dt;var Ot=w.comboPadding,te;(0,B.isNumber)(Ot)?te=function(){return Ot}:(0,B.isArray)(Ot)?te=function(){return Math.max.apply(null,Ot)}:(0,B.isFunction)(Ot)?te=Ot:te=function(){return 0},this.comboPadding=te;var Gt=this.linkDistance,K;Gt||(Gt=10),(0,B.isNumber)(Gt)?K=function(Mt){return Gt}:K=Gt,this.linkDistance=K;var p=this.edgeStrength,at;p||(p=1),(0,B.isNumber)(p)?at=function(Mt){return p}:at=p,this.edgeStrength=at;var ht=this.nodeStrength,wt;ht||(ht=30),(0,B.isNumber)(ht)?wt=function(Mt){return ht}:wt=ht,this.nodeStrength=wt},D.prototype.initPos=function(w){var b=this,g=b.nodes;g.forEach(function(y,d){var S=y.comboId,_=w[S];S&&_?(y.x=_.cx+100/(d+1),y.y=_.cy+100/(d+1)):(y.x=100/(d+1),y.y=100/(d+1))})},D.prototype.getComboMap=function(){var w=this,b=w.nodeMap,g=w.comboTrees,y=w.oriComboMap,d={};return(g||[]).forEach(function(S){var _=[];(0,B.traverseTreeUp)(S,function(E){if(E.itemType==="node"||!y[E.id])return!0;if(d[E.id]===void 0){var I={id:E.id,name:E.id,cx:0,cy:0,count:0,depth:w.oriComboMap[E.id].depth||0,children:[]};d[E.id]=I}var P=E.children;P&&P.forEach(function(nt){if(!d[nt.id]&&!b[nt.id])return!0;_.push(nt)});var N=d[E.id];if(N.cx=0,N.cy=0,_.length===0){N.empty=!0;var H=y[E.id];N.cx=H.x,N.cy=H.y}return _.forEach(function(nt){if(N.count++,nt.itemType!=="node"){var X=d[nt.id];(0,B.isNumber)(X.cx)&&(N.cx+=X.cx),(0,B.isNumber)(X.cy)&&(N.cy+=X.cy);return}var Y=b[nt.id];Y&&((0,B.isNumber)(Y.x)&&(N.cx+=Y.x),(0,B.isNumber)(Y.y)&&(N.cy+=Y.y))}),N.cx/=N.count||1,N.cy/=N.count||1,N.children=_,!0})}),d},D.prototype.applyComboCenterForce=function(w){var b=this,g=b.gravity,y=b.comboGravity||g,d=this.alpha,S=b.comboTrees,_=b.indexMap,E=b.nodeMap,I=b.comboMap;(S||[]).forEach(function(P){(0,B.traverseTreeUp)(P,function(N){if(N.itemType==="node")return!0;var H=I[N.id];if(!H)return!0;var nt=I[N.id],X=(nt.depth+1)/10*.5,Y=nt.cx,Z=nt.cy;return nt.cx=0,nt.cy=0,nt.children.forEach(function(J){if(J.itemType!=="node"){var it=I[J.id];it&&(0,B.isNumber)(it.cx)&&(nt.cx+=it.cx),it&&(0,B.isNumber)(it.cy)&&(nt.cy+=it.cy);return}var tt=E[J.id],ut=tt.x-Y||.005,vt=tt.y-Z||.005,pt=Math.sqrt(ut*ut+vt*vt),Dt=_[tt.id],Ot=y*d/pt*X;w[Dt].x-=ut*Ot,w[Dt].y-=vt*Ot,(0,B.isNumber)(tt.x)&&(nt.cx+=tt.x),(0,B.isNumber)(tt.y)&&(nt.cy+=tt.y)}),nt.cx/=nt.count||1,nt.cy/=nt.count||1,!0})})},D.prototype.applyCalculate=function(w){var b=this,g=b.comboMap,y=b.nodes,d={};y.forEach(function(_,E){y.forEach(function(I,P){if(!(E<P)){var N=_.x-I.x||.005,H=_.y-I.y||.005,nt=N*N+H*H,X=Math.sqrt(nt);nt<1&&(nt=X),d["".concat(_.id,"-").concat(I.id)]={vx:N,vy:H,vl2:nt,vl:X},d["".concat(I.id,"-").concat(_.id)]={vl2:nt,vl:X,vx:-N,vy:-H}}})}),b.updateComboSizes(g),b.calRepulsive(w,d),b.calAttractive(w,d);var S=b.preventComboOverlap;S&&b.comboNonOverlapping(w,g)},D.prototype.updateComboSizes=function(w){var b=this,g=b.comboTrees,y=b.nodeMap,d=b.nodeSize,S=b.comboSpacing,_=b.comboPadding;(g||[]).forEach(function(E){var I=[];(0,B.traverseTreeUp)(E,function(P){if(P.itemType==="node")return!0;var N=w[P.id];if(!N)return!1;var H=P.children;H&&H.forEach(function(Y){!w[Y.id]&&!y[Y.id]||I.push(Y)}),N.minX=1/0,N.minY=1/0,N.maxX=-1/0,N.maxY=-1/0,I.forEach(function(Y){if(Y.itemType!=="node")return!0;var Z=y[Y.id];if(!Z)return!0;var J=d(Z),it=Z.x-J,tt=Z.y-J,ut=Z.x+J,vt=Z.y+J;N.minX>it&&(N.minX=it),N.minY>tt&&(N.minY=tt),N.maxX<ut&&(N.maxX=ut),N.maxY<vt&&(N.maxY=vt)});var nt=b.oriComboMap[P.id].size||10;(0,B.isArray)(nt)&&(nt=nt[0]);var X=Math.max(N.maxX-N.minX,N.maxY-N.minY,nt);return N.r=X/2+S(N)/2+_(N),!0})})},D.prototype.comboNonOverlapping=function(w,b){var g=this,y=g.comboTree,d=g.comboCollideStrength,S=g.indexMap,_=g.nodeMap;(0,B.traverseTreeUp)(y,function(E){if(!b[E.id]&&!_[E.id]&&E.id!=="comboTreeRoot")return!1;var I=E.children;return I&&I.length>1&&I.forEach(function(P,N){if(P.itemType==="node")return!1;var H=b[P.id];H&&I.forEach(function(nt,X){if(N<=X||nt.itemType==="node")return!1;var Y=b[nt.id];if(!Y)return!1;var Z=H.cx-Y.cx||.005,J=H.cy-Y.cy||.005,it=Z*Z+J*J,tt=H.r||1,ut=Y.r||1,vt=tt+ut,pt=ut*ut,Dt=tt*tt;if(it<vt*vt){var Ot=P.children;if(!Ot||Ot.length===0)return!1;var te=nt.children;if(!te||te.length===0)return!1;var Gt=Math.sqrt(it),K=(vt-Gt)/Gt*d,p=Z*K,at=J*K,ht=pt/(Dt+pt),wt=1-ht;Ot.forEach(function(Mt){if(Mt.itemType!=="node")return!1;if(_[Mt.id]){var Ut=S[Mt.id];te.forEach(function(Vt){if(Vt.itemType!=="node"||!_[Vt.id])return!1;var Me=S[Vt.id];w[Ut].x+=p*ht,w[Ut].y+=at*ht,w[Me].x-=p*wt,w[Me].y-=at*wt})}})}})}),!0})},D.prototype.calRepulsive=function(w,b){var g=this,y=g.nodes,d=g.width*g.optimizeRangeFactor,S=g.nodeStrength,_=g.alpha,E=g.nodeCollideStrength,I=g.preventNodeOverlap,P=g.nodeSize,N=g.nodeSpacing,H=g.depthRepulsiveForceScale,nt=g.center;y.forEach(function(X,Y){if(!(!X.x||!X.y)){if(nt){var Z=g.gravity,J=X.x-nt[0]||.005,it=X.y-nt[1]||.005,tt=Math.sqrt(J*J+it*it);w[Y].x-=J*Z*_/tt,w[Y].y-=it*Z*_/tt}y.forEach(function(ut,vt){if(Y!==vt&&!(!ut.x||!ut.y)){var pt=b["".concat(X.id,"-").concat(ut.id)],Dt=pt.vl2,Ot=pt.vl;if(!(Ot>d)){var te=b["".concat(X.id,"-").concat(ut.id)],Gt=te.vx,K=te.vy,p=Math.log(Math.abs(ut.depth-X.depth)/10)+1||1;p=p<1?1:p,ut.comboId!==X.comboId&&(p+=1);var at=p?Math.pow(H,p):1,ht=S(ut)*_/Dt*at;if(w[Y].x+=Gt*ht,w[Y].y+=K*ht,Y<vt&&I){var wt=P(X)+N(X)||1,Mt=P(ut)+N(ut)||1,Ut=wt+Mt;if(Dt<Ut*Ut){var Vt=(Ut-Ot)/Ot*E,Me=Mt*Mt,Wt=Me/(wt*wt+Me),ae=Gt*Vt,he=K*Vt;w[Y].x+=ae*Wt,w[Y].y+=he*Wt,Wt=1-Wt,w[vt].x-=ae*Wt,w[vt].y-=he*Wt}}}}})}})},D.prototype.calAttractive=function(w,b){var g=this,y=g.edges,d=g.linkDistance,S=g.alpha,_=g.edgeStrength,E=g.bias,I=g.depthAttractiveForceScale;y.forEach(function(P,N){var H=(0,B.getEdgeTerminal)(P,"source"),nt=(0,B.getEdgeTerminal)(P,"target");if(!(!H||!nt||H===nt)){var X=g.indexMap[H],Y=g.indexMap[nt],Z=g.nodeMap[H],J=g.nodeMap[nt];if(!(!Z||!J)){var it=Z.depth===J.depth?0:Math.log(Math.abs(Z.depth-J.depth)/10);Z.comboId===J.comboId&&(it=it/2);var tt=it?Math.pow(I,it):1;if(Z.comboId!==J.comboId&&tt===1?tt=I/2:Z.comboId===J.comboId&&(tt=2),!(!(0,B.isNumber)(J.x)||!(0,B.isNumber)(Z.x)||!(0,B.isNumber)(J.y)||!(0,B.isNumber)(Z.y))){var ut=b["".concat(nt,"-").concat(H)],vt=ut.vl,pt=ut.vx,Dt=ut.vy,Ot=(vt-d(P))/vt*S*_(P)*tt,te=pt*Ot,Gt=Dt*Ot,K=E[N];w[Y].x-=te*K,w[Y].y-=Gt*K,w[X].x+=te*(1-K),w[X].y+=Gt*(1-K)}}}})},D.prototype.getType=function(){return"comboForce"},D}(j.Base);U.ComboForceLayout=L},98162:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var k=function(D,w){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,g){b.__proto__=g}||function(b,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(b[y]=g[y])},k(D,w)};return function(D,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");k(D,w);function b(){this.constructor=D}D.prototype=w===null?Object.create(w):(b.prototype=w.prototype,new b)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.ConcentricLayout=void 0;var j=z(8273),B=z(46253),L=function(k){F(D,k);function D(w){var b=k.call(this)||this;return b.nodeSize=30,b.minNodeSpacing=10,b.nodeSpacing=10,b.preventOverlap=!1,b.equidistant=!1,b.startAngle=3/2*Math.PI,b.clockwise=!0,b.sortBy="degree",b.nodes=[],b.edges=[],b.width=300,b.height=300,b.onLayoutEnd=function(){},b.updateCfg(w),b}return D.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},D.prototype.execute=function(){var w,b,g=this,y=g.nodes,d=g.edges,S=y.length;if(S===0){(w=g.onLayoutEnd)===null||w===void 0||w.call(g);return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var _=g.center;if(S===1){y[0].x=_[0],y[0].y=_[1],(b=g.onLayoutEnd)===null||b===void 0||b.call(g);return}var E=g.nodeSize,I=g.nodeSpacing,P=[],N,H=0;(0,j.isArray)(E)?N=Math.max(E[0],E[1]):N=E,(0,j.isArray)(I)?H=Math.max(I[0],I[1]):(0,j.isNumber)(I)&&(H=I),y.forEach(function(p){P.push(p);var at=N;(0,j.isArray)(p.size)?at=Math.max(p.size[0],p.size[1]):(0,j.isNumber)(p.size)?at=p.size:(0,j.isObject)(p.size)&&(at=Math.max(p.size.width,p.size.height)),N=Math.max(N,at),(0,j.isFunction)(I)&&(H=Math.max(I(p),H))}),g.clockwise=g.counterclockwise!==void 0?!g.counterclockwise:g.clockwise;var nt={},X={};if(P.forEach(function(p,at){nt[p.id]=p,X[p.id]=at}),(g.sortBy==="degree"||!(0,j.isString)(g.sortBy)||P[0][g.sortBy]===void 0)&&(g.sortBy="degree",!(0,j.isNumber)(y[0].degree))){var Y=(0,j.getDegree)(y.length,X,d);P.forEach(function(p,at){p.degree=Y[at].all})}P.sort(function(p,at){return at[g.sortBy]-p[g.sortBy]}),g.maxValueNode=P[0],g.maxLevelDiff=g.maxLevelDiff||g.maxValueNode[g.sortBy]/4;var Z=[[]],J=Z[0];P.forEach(function(p){if(J.length>0){var at=Math.abs(J[0][g.sortBy]-p[g.sortBy]);g.maxLevelDiff&&at>=g.maxLevelDiff&&(J=[],Z.push(J))}J.push(p)});var it=N+(H||g.minNodeSpacing);if(!g.preventOverlap){var tt=Z.length>0&&Z[0].length>1,ut=Math.min(g.width,g.height)/2-it,vt=ut/(Z.length+(tt?1:0));it=Math.min(it,vt)}var pt=0;if(Z.forEach(function(p){var at=g.sweep;at===void 0&&(at=2*Math.PI-2*Math.PI/p.length);var ht=p.dTheta=at/Math.max(1,p.length-1);if(p.length>1&&g.preventOverlap){var wt=Math.cos(ht)-Math.cos(0),Mt=Math.sin(ht)-Math.sin(0),Ut=Math.sqrt(it*it/(wt*wt+Mt*Mt));pt=Math.max(Ut,pt)}p.r=pt,pt+=it}),g.equidistant){for(var Dt=0,Ot=0,te=0;te<Z.length;te++){var Gt=Z[te],K=Gt.r-Ot;Dt=Math.max(Dt,K)}Ot=0,Z.forEach(function(p,at){at===0&&(Ot=p.r),p.r=Ot,Ot+=Dt})}return Z.forEach(function(p){var at=p.dTheta,ht=p.r;p.forEach(function(wt,Mt){var Ut=g.startAngle+(g.clockwise?1:-1)*at*Mt;wt.x=_[0]+ht*Math.cos(Ut),wt.y=_[1]+ht*Math.sin(Ut)})}),g.onLayoutEnd&&g.onLayoutEnd(),{nodes:y,edges:d}},D.prototype.getType=function(){return"concentric"},D}(B.Base);U.ConcentricLayout=L},24979:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.FORCE_LAYOUT_TYPE_MAP=U.LAYOUT_MESSAGE=void 0,U.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},U.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},2:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var g=function(y,d){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,_){S.__proto__=_}||function(S,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(S[E]=_[E])},g(y,d)};return function(y,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");g(y,d);function S(){this.constructor=y}y.prototype=d===null?Object.create(d):(S.prototype=d.prototype,new S)}}(),j=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(U,"__esModule",{value:!0}),U.DagreLayout=void 0;var B=j(z(53186)),L=z(8273),k=z(46253),D=z(67858),w=function(g){F(y,g);function y(d){var S=g.call(this)||this;return S.rankdir="TB",S.nodesep=50,S.ranksep=50,S.controlPoints=!1,S.sortByCombo=!1,S.edgeLabelSpace=!0,S.radial=!1,S.nodes=[],S.edges=[],S.onLayoutEnd=function(){},S.layoutNode=function(_){var E=S,I=E.nodes,P=I.find(function(H){return H.id===_});if(P){var N=P.layout!==!1;return N}return!0},S.updateCfg(d),S}return y.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},y.prototype.execute=function(){var d=this,S,_,E,I,P=this,N=P.nodes,H=P.nodeSize,nt=P.rankdir,X=P.combos,Y=P.begin,Z=P.radial,J=P.comboEdges,it=J===void 0?[]:J,tt=P.vedges,ut=tt===void 0?[]:tt;if(N){var vt=P.edges||[],pt=new D.Graph({multigraph:!0,compound:!0});P.nodeMap={};var Dt={};N.forEach(function(rr){P.nodeMap[rr.id]=rr,rr.comboId&&(Dt[rr.comboId]=Dt[rr.comboId]||[],Dt[rr.comboId].push(rr.id))});var Ot=[],te={};!((S=P.nodeOrder)===null||S===void 0)&&S.length?(P.nodeOrder.forEach(function(rr){te[rr]=!0,Ot.push(P.nodeMap[rr])}),N.forEach(function(rr){te[rr.id]||Ot.push(rr)})):Ot=N;var Gt;H?(0,L.isArray)(H)?Gt=function(){return H}:Gt=function(){return[H,H]}:Gt=function(rr){return rr.size?(0,L.isArray)(rr.size)?rr.size:(0,L.isObject)(rr.size)?[rr.size.width||40,rr.size.height||40]:[rr.size,rr.size]:[40,40]};var K=(0,L.getFunc)(P.ranksep,50,P.ranksepFunc),p=(0,L.getFunc)(P.nodesep,50,P.nodesepFunc),at=p,ht=K;(nt==="LR"||nt==="RL")&&(at=K,ht=p),pt.setDefaultEdgeLabel(function(){return{}}),pt.setGraph(P);var wt={};this.sortByCombo&&X&&X.forEach(function(rr){if(wt[rr.id]=rr,rr.collapsed){var sr=Gt(rr),lr=ht(rr),zr=at(rr),fn=sr[0]+2*zr,wn=sr[1]+2*lr;pt.setNode(rr.id,{width:fn,height:wn})}rr.parentId&&(wt[rr.parentId]||pt.setNode(rr.parentId,{}),pt.setParent(rr.id,rr.parentId))}),Ot.filter(function(rr){return rr.layout!==!1}).forEach(function(rr){var sr=Gt(rr),lr=ht(rr),zr=at(rr),fn=sr[0]+2*zr,wn=sr[1]+2*lr,ln=rr.layer;(0,L.isNumber)(ln)?pt.setNode(rr.id,{width:fn,height:wn,layer:ln}):pt.setNode(rr.id,{width:fn,height:wn}),d.sortByCombo&&rr.comboId&&(wt[rr.comboId]||(wt[rr.comboId]={id:rr.comboId},pt.setNode(rr.comboId,{})),pt.setParent(rr.id,rr.comboId))}),vt.forEach(function(rr){var sr=(0,L.getEdgeTerminal)(rr,"source"),lr=(0,L.getEdgeTerminal)(rr,"target");d.layoutNode(sr)&&d.layoutNode(lr)&&pt.setEdge(sr,lr,{weight:rr.weight||1})}),(_=it==null?void 0:it.concat(ut||[]))===null||_===void 0||_.forEach(function(rr){var sr,lr,zr=rr.source,fn=rr.target,wn=!((sr=wt[zr])===null||sr===void 0)&&sr.collapsed?[zr]:Dt[zr]||[zr],ln=!((lr=wt[fn])===null||lr===void 0)&&lr.collapsed?[fn]:Dt[fn]||[fn];wn.forEach(function($n){ln.forEach(function(Jn){pt.setEdge($n,Jn,{weight:rr.weight||1})})})});var Mt=void 0;!((E=P.preset)===null||E===void 0)&&E.nodes&&(Mt=new D.Graph({multigraph:!0,compound:!0}),P.preset.nodes.forEach(function(rr){Mt==null||Mt.setNode(rr.id,rr)})),B.default.layout(pt,{prevGraph:Mt,edgeLabelSpace:P.edgeLabelSpace,keepNodeOrder:!!P.nodeOrder,nodeOrder:P.nodeOrder});var Ut=[0,0];if(Y){var Vt=1/0,Me=1/0;pt.nodes().forEach(function(rr){var sr=pt.node(rr);Vt>sr.x&&(Vt=sr.x),Me>sr.y&&(Me=sr.y)}),pt.edges().forEach(function(rr){var sr,lr=pt.edge(rr);(sr=lr.points)===null||sr===void 0||sr.forEach(function(zr){Vt>zr.x&&(Vt=zr.x),Me>zr.y&&(Me=zr.y)})}),Ut[0]=Y[0]-Vt,Ut[1]=Y[1]-Me}var Wt=nt==="LR"||nt==="RL";if(Z){var ae=this,he=ae.focusNode,Se=ae.ranksep,xe=ae.getRadialPos,Bt=(0,L.isString)(he)?he:he==null?void 0:he.id,fe=Bt?(I=pt.node(Bt))===null||I===void 0?void 0:I._rank:0,Le=[],jt=Wt?"y":"x",oe=Wt?"height":"width",Te=1/0,se=-1/0;pt.nodes().forEach(function(rr){var sr=pt.node(rr);if(P.nodeMap[rr]){var lr=p(P.nodeMap[rr]);if(fe===0)Le[sr._rank]||(Le[sr._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Le[sr._rank].nodes.push(rr),Le[sr._rank].totalWidth+=lr*2+sr[oe],Le[sr._rank].maxSize<Math.max(sr.width,sr.height)&&(Le[sr._rank].maxSize=Math.max(sr.width,sr.height));else{var zr=sr._rank-fe;if(zr===0)Le[zr]||(Le[zr]={nodes:[],totalWidth:0,maxSize:-1/0}),Le[zr].nodes.push(rr),Le[zr].totalWidth+=lr*2+sr[oe],Le[zr].maxSize<Math.max(sr.width,sr.height)&&(Le[zr].maxSize=Math.max(sr.width,sr.height));else{var fn=Math.abs(zr);Le[fn]||(Le[fn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Le[fn].totalWidth+=lr*2+sr[oe],Le[fn].maxSize<Math.max(sr.width,sr.height)&&(Le[fn].maxSize=Math.max(sr.width,sr.height)),zr<0?Le[fn].left.push(rr):Le[fn].right.push(rr)}}var wn=sr[jt]-sr[oe]/2-lr,ln=sr[jt]+sr[oe]/2+lr;wn<Te&&(Te=wn),ln>se&&(se=ln)}});var Ie=Se||50,Pe={},Lt=(se-Te)/.9,Je=[(Te+se-Lt)*.5,(Te+se+Lt)*.5],Lr=function(rr,sr,lr,zr){lr===void 0&&(lr=-1/0),zr===void 0&&(zr=[0,1]);var fn=lr;return rr.forEach(function(wn){var ln=pt.node(wn);Pe[wn]=sr;var $n=xe(ln[jt],Je,Lt,sr,zr),Jn=$n.x,Da=$n.y;if(P.nodeMap[wn]){P.nodeMap[wn].x=Jn+Ut[0],P.nodeMap[wn].y=Da+Ut[1],P.nodeMap[wn]._order=ln._order;var bn=K(P.nodeMap[wn]);fn<bn&&(fn=bn)}}),fn},Vr=!0,Xr=0;Le.forEach(function(rr){var sr,lr,zr,fn,wn,ln,$n;if(!(!(!((sr=rr==null?void 0:rr.nodes)===null||sr===void 0)&&sr.length)&&!(!((lr=rr==null?void 0:rr.left)===null||lr===void 0)&&lr.length)&&!(!((zr=rr==null?void 0:rr.right)===null||zr===void 0)&&zr.length))){if(Vr&&rr.nodes.length===1){var Jn=rr.nodes[0];if(!P.nodeMap[Jn])return;P.nodeMap[Jn].x=Ut[0],P.nodeMap[Jn].y=Ut[1],Pe[rr.nodes[0]]=0,Ie=K(P.nodeMap[Jn]),Vr=!1;return}Ie=Math.max(Ie,rr.totalWidth/(2*Math.PI));var Da=-1/0;if(fe===0||!((fn=rr.nodes)===null||fn===void 0)&&fn.length)Da=Lr(rr.nodes,Ie,Da,[0,1]);else{var bn=((wn=rr.left)===null||wn===void 0?void 0:wn.length)/(((ln=rr.left)===null||ln===void 0?void 0:ln.length)+(($n=rr.right)===null||$n===void 0?void 0:$n.length));Da=Lr(rr.left,Ie,Da,[0,bn]),Da=Lr(rr.right,Ie,Da,[bn+.05,1])}Ie+=Da,Vr=!1,Xr-rr.maxSize}}),pt.edges().forEach(function(rr){var sr,lr,zr,fn=pt.edge(rr),wn=vt.findIndex(function(Bn){var ya=(0,L.getEdgeTerminal)(Bn,"source"),q=(0,L.getEdgeTerminal)(Bn,"target");return ya===rr.v&&q===rr.w});if(!(wn<=-1)&&P.edgeLabelSpace&&P.controlPoints&&vt[wn].type!=="loop"){var ln=jt==="x"?"y":"x",$n=(sr=fn==null?void 0:fn.points)===null||sr===void 0?void 0:sr.slice(1,fn.points.length-1),Jn=[],Da=(lr=pt.node(rr.v))===null||lr===void 0?void 0:lr[ln],bn=Da-((zr=pt.node(rr.w))===null||zr===void 0?void 0:zr[ln]),Hn=Pe[rr.v],Wn=Hn-Pe[rr.w];$n==null||$n.forEach(function(Bn){var ya=(Bn[ln]-Da)/bn*Wn+Hn,q=xe(Bn[jt],Je,Lt,ya);Jn.push({x:q.x+Ut[0],y:q.y+Ut[1]})}),vt[wn].controlPoints=Jn}})}else{var Mn=new Set,Hr=nt==="BT"||nt==="RL",Cn=Hr?function(rr,sr){return sr-rr}:function(rr,sr){return rr-sr};pt.nodes().forEach(function(rr){var sr=pt.node(rr);if(sr){var lr=d.nodeMap[rr];lr||(lr=X==null?void 0:X.find(function(zr){return zr.id===rr})),lr&&(lr.x=sr.x+Ut[0],lr.y=sr.y+Ut[1],lr._order=sr._order,Mn.add(Wt?lr.x:lr.y))}});var Zn=Array.from(Mn).sort(Cn),Un=Wt?function(rr,sr){return rr.x!==sr.x}:function(rr,sr){return rr.y!==sr.y},mn=Wt?function(rr,sr,lr){var zr=Math.max(sr.y,lr.y),fn=Math.min(sr.y,lr.y);return rr.filter(function(wn){return wn.y<=zr&&wn.y>=fn})}:function(rr,sr,lr){var zr=Math.max(sr.x,lr.x),fn=Math.min(sr.x,lr.x);return rr.filter(function(wn){return wn.x<=zr&&wn.x>=fn})};pt.edges().forEach(function(rr){var sr,lr=pt.edge(rr),zr=vt.findIndex(function(ln){var $n=(0,L.getEdgeTerminal)(ln,"source"),Jn=(0,L.getEdgeTerminal)(ln,"target");return $n===rr.v&&Jn===rr.w});if(!(zr<=-1)&&P.edgeLabelSpace&&P.controlPoints&&vt[zr].type!=="loop"){(sr=lr==null?void 0:lr.points)===null||sr===void 0||sr.forEach(function(ln){ln.x+=Ut[0],ln.y+=Ut[1]});var fn=P.nodeMap[rr.v],wn=P.nodeMap[rr.w];vt[zr].controlPoints=b(lr==null?void 0:lr.points,fn,wn,Zn,Wt,Un,mn)}})}return P.onLayoutEnd&&P.onLayoutEnd(),{nodes:N,edges:vt}}},y.prototype.getRadialPos=function(d,S,_,E,I){I===void 0&&(I=[0,1]);var P=(d-S[0])/_;P=P*(I[1]-I[0])+I[0];var N=P*2*Math.PI;return{x:Math.cos(N)*E,y:Math.sin(N)*E}},y.prototype.getType=function(){return"dagre"},y}(k.Base);U.DagreLayout=w;var b=function(g,y,d,S,_,E,I){var P=(g==null?void 0:g.slice(1,g.length-1))||[];if(y&&d){var N=y.x,H=y.y,nt=d.x,X=d.y;if(_&&(N=y.y,H=y.x,nt=d.y,X=d.x),X!==H&&N!==nt){var Y=S.indexOf(H),Z=S[Y+1];if(Z){var J=P[0],it=_?{x:(H+Z)/2,y:(J==null?void 0:J.y)||nt}:{x:(J==null?void 0:J.x)||nt,y:(H+Z)/2};(!J||E(J,it))&&P.unshift(it)}var tt=S.indexOf(X),ut=Math.abs(tt-Y);if(ut===1)P=I(P,y,d),P.length||P.push(_?{x:(H+X)/2,y:N}:{x:N,y:(H+X)/2});else if(ut>1){var vt=S[tt-1];if(vt){var pt=P[P.length-1],Dt=_?{x:(X+vt)/2,y:(pt==null?void 0:pt.y)||nt}:{x:(pt==null?void 0:pt.x)||N,y:(X+vt)/2};(!pt||E(pt,Dt))&&P.push(Dt)}}}}return P}},67858:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var L=function(k,D){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,b){w.__proto__=b}||function(w,b){for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&(w[g]=b[g])},L(k,D)};return function(k,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");L(k,D);function w(){this.constructor=k}k.prototype=D===null?Object.create(D):(w.prototype=D.prototype,new w)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.Graph=void 0;var j=z(99905),B=function(L){F(k,L);function k(){return L!==null&&L.apply(this,arguments)||this}return k}(j.Graph);U.Graph=B},53186:function(xr,U,z){"use strict";var F=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(U,"__esModule",{value:!0});var j=F(z(86282)),B=z(95869);U.default={layout:j.default,util:{time:B.time,notime:B.notime}}},65721:function(xr,U,z){"use strict";var F=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(U,"__esModule",{value:!0});var j=F(z(81628)),B=function(D){var w=function(g){return function(y){var d;return((d=g.edge(y))===null||d===void 0?void 0:d.weight)||1}},b=D.graph().acyclicer==="greedy"?(0,j.default)(D,w(D)):L(D);b==null||b.forEach(function(g){var y=D.edge(g);D.removeEdgeObj(g),y.forwardName=g.name,y.reversed=!0,D.setEdge(g.w,g.v,y,"rev-".concat(Math.random()))})},L=function(D){var w=[],b={},g={},y=function(d){var S;g[d]||(g[d]=!0,b[d]=!0,(S=D.outEdges(d))===null||S===void 0||S.forEach(function(_){b[_.w]?w.push(_):y(_.w)}),delete b[d])};return D.nodes().forEach(y),w},k=function(D){D.edges().forEach(function(w){var b=D.edge(w);if(b.reversed){D.removeEdgeObj(w);var g=b.forwardName;delete b.reversed,delete b.forwardName,D.setEdge(w.w,w.v,b,g)}})};U.default={run:B,undo:k}},88597:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var F=z(95869),j=function(L){var k,D=function(w){var b=L.children(w),g=L.node(w);if(b!=null&&b.length&&b.forEach(function(S){return D(S)}),g.hasOwnProperty("minRank")){g.borderLeft=[],g.borderRight=[];for(var y=g.minRank,d=g.maxRank+1;y<d;y+=1)B(L,"borderLeft","_bl",w,g,y),B(L,"borderRight","_br",w,g,y)}};(k=L.children())===null||k===void 0||k.forEach(function(w){return D(w)})},B=function(L,k,D,w,b,g){var y={rank:g,borderType:k,width:0,height:0},d=b[k][g-1],S=(0,F.addDummyNode)(L,"border",y,D);b[k][g]=S,L.setParent(S,w),d&&L.setEdge(d,S,{weight:1})};U.default=j},85374:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var z=function(b){var g,y=(g=b.graph().rankdir)===null||g===void 0?void 0:g.toLowerCase();(y==="lr"||y==="rl")&&j(b)},F=function(b){var g,y=(g=b.graph().rankdir)===null||g===void 0?void 0:g.toLowerCase();(y==="bt"||y==="rl")&&L(b),(y==="lr"||y==="rl")&&(D(b),j(b))},j=function(b){b.nodes().forEach(function(g){B(b.node(g))}),b.edges().forEach(function(g){B(b.edge(g))})},B=function(b){var g=b.width;b.width=b.height,b.height=g},L=function(b){b.nodes().forEach(function(g){k(b.node(g))}),b.edges().forEach(function(g){var y,d=b.edge(g);(y=d.points)===null||y===void 0||y.forEach(function(S){return k(S)}),d.hasOwnProperty("y")&&k(d)})},k=function(b){b!=null&&b.y&&(b.y=-b.y)},D=function(b){b.nodes().forEach(function(g){w(b.node(g))}),b.edges().forEach(function(g){var y,d=b.edge(g);(y=d.points)===null||y===void 0||y.forEach(function(S){return w(S)}),d.hasOwnProperty("x")&&w(d)})},w=function(b){var g=b.x;b.x=b.y,b.y=g};U.default={adjust:z,undo:F}},49174:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var z=function(B,L){if(B!=="next"&&B!=="prev")return L},F=function(B){B.prev.next=B.next,B.next.prev=B.prev,delete B.next,delete B.prev},j=function(){function B(){var L={};L.prev=L,L.next=L.prev,this.shortcut=L}return B.prototype.dequeue=function(){var L=this.shortcut,k=L.prev;if(k&&k!==L)return F(k),k},B.prototype.enqueue=function(L){var k=this.shortcut;L.prev&&L.next&&F(L),L.next=k.next,k.next.prev=L,k.next=L,L.prev=k},B.prototype.toString=function(){for(var L=[],k=this.shortcut,D=k.prev;D!==k;)L.push(JSON.stringify(D,z)),D=D==null?void 0:D.prev;return"[".concat(L.join(", "),"]")},B}();U.default=j},81628:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var _=function(E,I){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,N){P.__proto__=N}||function(P,N){for(var H in N)Object.prototype.hasOwnProperty.call(N,H)&&(P[H]=N[H])},_(E,I)};return function(E,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");_(E,I);function P(){this.constructor=E}E.prototype=I===null?Object.create(I):(P.prototype=I.prototype,new P)}}(),j=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(U,"__esModule",{value:!0});var B=j(z(49174)),L=z(99905),k=function(_){F(E,_);function E(){return _!==null&&_.apply(this,arguments)||this}return E}(B.default),D=function(_){F(E,_);function E(){return _!==null&&_.apply(this,arguments)||this}return E}(L.Graph),w=function(){return 1},b=function(_,E){var I;if(_.nodeCount()<=1)return[];var P=d(_,E||w),N=g(P.graph,P.buckets,P.zeroIdx);return(I=N.map(function(H){return _.outEdges(H.v,H.w)}))===null||I===void 0?void 0:I.flat()},g=function(_,E,I){for(var P=[],N=E[E.length-1],H=E[0],nt;_.nodeCount();){for(;nt=H.dequeue();)y(_,E,I,nt);for(;nt=N.dequeue();)y(_,E,I,nt);if(_.nodeCount()){for(var X=E.length-2;X>0;--X)if(nt=E[X].dequeue(),nt){P=P.concat(y(_,E,I,nt,!0));break}}}return P},y=function(_,E,I,P,N){var H,nt,X=[];return(H=_.inEdges(P.v))===null||H===void 0||H.forEach(function(Y){var Z=_.edge(Y),J=_.node(Y.v);N&&X.push({v:Y.v,w:Y.w,in:0,out:0}),J.out===void 0&&(J.out=0),J.out-=Z,S(E,I,J)}),(nt=_.outEdges(P.v))===null||nt===void 0||nt.forEach(function(Y){var Z=_.edge(Y),J=Y.w,it=_.node(J);it.in===void 0&&(it.in=0),it.in-=Z,S(E,I,it)}),_.removeNode(P.v),N?X:void 0},d=function(_,E){var I=new D,P=0,N=0;_.nodes().forEach(function(Z){I.setNode(Z,{v:Z,in:0,out:0})}),_.edges().forEach(function(Z){var J=I.edge(Z)||0,it=(E==null?void 0:E(Z))||1,tt=J+it;I.setEdge(Z.v,Z.w,tt),N=Math.max(N,I.node(Z.v).out+=it),P=Math.max(P,I.node(Z.w).in+=it)});for(var H=[],nt=N+P+3,X=0;X<nt;X++)H.push(new k);var Y=P+1;return I.nodes().forEach(function(Z){S(H,Y,I.node(Z))}),{buckets:H,zeroIdx:Y,graph:I}},S=function(_,E,I){I.out?I.in?_[I.out-I.in+E].enqueue(I):_[_.length-1].enqueue(I):_[0].enqueue(I)};U.default=b},86282:function(xr,U,z){"use strict";var F=this&&this.__assign||function(){return F=Object.assign||function(Wt){for(var ae,he=1,Se=arguments.length;he<Se;he++){ae=arguments[he];for(var xe in ae)Object.prototype.hasOwnProperty.call(ae,xe)&&(Wt[xe]=ae[xe])}return Wt},F.apply(this,arguments)},j=this&&this.__importDefault||function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}};Object.defineProperty(U,"__esModule",{value:!0});var B=j(z(65721)),L=j(z(32778)),k=j(z(68976)),D=z(95869),w=j(z(99946)),b=j(z(54794)),g=j(z(88597)),y=j(z(85374)),d=j(z(15113)),S=j(z(90829)),_=j(z(27910)),E=z(67858),I=function(Wt,ae){var he=ae&&ae.debugTiming?D.time:D.notime;he("layout",function(){ae&&!ae.keepNodeOrder&&ae.prevGraph&&he("  inheritOrder",function(){N(Wt,ae.prevGraph)});var Se=he("  buildLayoutGraph",function(){return vt(Wt)});ae&&ae.edgeLabelSpace===!1||he("  makeSpaceForEdgeLabels",function(){pt(Se)});try{he("  runLayout",function(){P(Se,he,ae)})}catch(xe){if(xe.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,xe);return}throw xe}he("  updateInputGraph",function(){H(Wt,Se)})})},P=function(Wt,ae,he){ae("    removeSelfEdges",function(){wt(Wt)}),ae("    acyclic",function(){B.default.run(Wt)}),ae("    nestingGraph.run",function(){b.default.run(Wt)}),ae("    rank",function(){(0,k.default)((0,D.asNonCompoundGraph)(Wt))}),ae("    injectEdgeLabelProxies",function(){Dt(Wt)}),ae("    removeEmptyRanks",function(){(0,D.removeEmptyRanks)(Wt)}),ae("    nestingGraph.cleanup",function(){b.default.cleanup(Wt)}),ae("    normalizeRanks",function(){(0,D.normalizeRanks)(Wt)}),ae("    assignRankMinMax",function(){Ot(Wt)}),ae("    removeEdgeLabelProxies",function(){te(Wt)}),ae("    normalize.run",function(){L.default.run(Wt)}),ae("    parentDummyChains",function(){(0,w.default)(Wt)}),ae("    addBorderSegments",function(){(0,g.default)(Wt)}),he&&he.keepNodeOrder&&ae("    initDataOrder",function(){(0,_.default)(Wt,he.nodeOrder)}),ae("    order",function(){(0,d.default)(Wt,he==null?void 0:he.keepNodeOrder)}),ae("    insertSelfEdges",function(){Mt(Wt)}),ae("    adjustCoordinateSystem",function(){y.default.adjust(Wt)}),ae("    position",function(){(0,S.default)(Wt)}),ae("    positionSelfEdges",function(){Ut(Wt)}),ae("    removeBorderNodes",function(){ht(Wt)}),ae("    normalize.undo",function(){L.default.undo(Wt)}),ae("    fixupEdgeLabelCoords",function(){p(Wt)}),ae("    undoCoordinateSystem",function(){y.default.undo(Wt)}),ae("    translateGraph",function(){Gt(Wt)}),ae("    assignNodeIntersects",function(){K(Wt)}),ae("    reversePoints",function(){at(Wt)}),ae("    acyclic.undo",function(){B.default.undo(Wt)})},N=function(Wt,ae){Wt.nodes().forEach(function(he){var Se=Wt.node(he),xe=ae.node(he);xe!==void 0?(Se.fixorder=xe._order,delete xe._order):delete Se.fixorder})},H=function(Wt,ae){Wt.nodes().forEach(function(he){var Se,xe=Wt.node(he);if(xe){var Bt=ae.node(he);xe.x=Bt.x,xe.y=Bt.y,xe._order=Bt.order,xe._rank=Bt.rank,!((Se=ae.children(he))===null||Se===void 0)&&Se.length&&(xe.width=Bt.width,xe.height=Bt.height)}}),Wt.edges().forEach(function(he){var Se=Wt.edge(he),xe=ae.edge(he);Se.points=xe?xe.points:[],xe&&xe.hasOwnProperty("x")&&(Se.x=xe.x,Se.y=xe.y)}),Wt.graph().width=ae.graph().width,Wt.graph().height=ae.graph().height},nt=["nodesep","edgesep","ranksep","marginx","marginy"],X={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Y=["acyclicer","ranker","rankdir","align"],Z=["width","height","layer","fixorder"],J={width:0,height:0},it=["minlen","weight","width","height","labeloffset"],tt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ut=["labelpos"],vt=function(Wt){var ae=new E.Graph({multigraph:!0,compound:!0}),he=Me(Wt.graph()),Se={};return Y==null||Y.forEach(function(xe){he[xe]!==void 0&&(Se[xe]=he[xe])}),ae.setGraph(Object.assign({},X,Vt(he,nt),Se)),Wt.nodes().forEach(function(xe){var Bt=Me(Wt.node(xe)),fe=F(F({},J),Bt),Le=Vt(fe,Z);ae.setNode(xe,Le),ae.setParent(xe,Wt.parent(xe))}),Wt.edges().forEach(function(xe){var Bt=Me(Wt.edge(xe)),fe={};ut==null||ut.forEach(function(Le){Bt[Le]!==void 0&&(fe[Le]=Bt[Le])}),ae.setEdgeObj(xe,Object.assign({},tt,Vt(Bt,it),fe))}),ae},pt=function(Wt){var ae=Wt.graph();ae.ranksep||(ae.ranksep=0),ae.ranksep/=2,Wt.nodes().forEach(function(he){var Se=Wt.node(he);isNaN(Se.layer)||Se.layer||(Se.layer=0)}),Wt.edges().forEach(function(he){var Se,xe=Wt.edge(he);xe.minlen*=2,((Se=xe.labelpos)===null||Se===void 0?void 0:Se.toLowerCase())!=="c"&&(ae.rankdir==="TB"||ae.rankdir==="BT"?xe.width+=xe.labeloffset:xe.height+=xe.labeloffset)})},Dt=function(Wt){Wt.edges().forEach(function(ae){var he=Wt.edge(ae);if(he.width&&he.height){var Se=Wt.node(ae.v),xe=Wt.node(ae.w),Bt={e:ae,rank:(xe.rank-Se.rank)/2+Se.rank};(0,D.addDummyNode)(Wt,"edge-proxy",Bt,"_ep")}})},Ot=function(Wt){var ae=0;Wt.nodes().forEach(function(he){var Se,xe,Bt=Wt.node(he);Bt.borderTop&&(Bt.minRank=(Se=Wt.node(Bt.borderTop))===null||Se===void 0?void 0:Se.rank,Bt.maxRank=(xe=Wt.node(Bt.borderBottom))===null||xe===void 0?void 0:xe.rank,ae=Math.max(ae,Bt.maxRank||-1/0))}),Wt.graph().maxRank=ae},te=function(Wt){Wt.nodes().forEach(function(ae){var he=Wt.node(ae);he.dummy==="edge-proxy"&&(Wt.edge(he.e).labelRank=he.rank,Wt.removeNode(ae))})},Gt=function(Wt){var ae,he=0,Se,xe=0,Bt=Wt.graph(),fe=Bt.marginx||0,Le=Bt.marginy||0,jt=function(oe){if(oe){var Te=oe.x,se=oe.y,Ie=oe.width,Pe=oe.height;!isNaN(Te)&&!isNaN(Ie)&&(ae===void 0&&(ae=Te-Ie/2),ae=Math.min(ae,Te-Ie/2),he=Math.max(he,Te+Ie/2)),!isNaN(se)&&!isNaN(Pe)&&(Se===void 0&&(Se=se-Pe/2),Se=Math.min(Se,se-Pe/2),xe=Math.max(xe,se+Pe/2))}};Wt.nodes().forEach(function(oe){jt(Wt.node(oe))}),Wt.edges().forEach(function(oe){var Te=Wt.edge(oe);Te!=null&&Te.hasOwnProperty("x")&&jt(Te)}),ae-=fe,Se-=Le,Wt.nodes().forEach(function(oe){var Te=Wt.node(oe);Te&&(Te.x-=ae,Te.y-=Se)}),Wt.edges().forEach(function(oe){var Te,se=Wt.edge(oe);(Te=se.points)===null||Te===void 0||Te.forEach(function(Ie){Ie.x-=ae,Ie.y-=Se}),se.hasOwnProperty("x")&&(se.x-=ae),se.hasOwnProperty("y")&&(se.y-=Se)}),Bt.width=he-ae+fe,Bt.height=xe-Se+Le},K=function(Wt){Wt.edges().forEach(function(ae){var he=Wt.edge(ae),Se=Wt.node(ae.v),xe=Wt.node(ae.w),Bt,fe;he.points?(Bt=he.points[0],fe=he.points[he.points.length-1]):(he.points=[],Bt=xe,fe=Se),he.points.unshift((0,D.intersectRect)(Se,Bt)),he.points.push((0,D.intersectRect)(xe,fe))})},p=function(Wt){Wt.edges().forEach(function(ae){var he=Wt.edge(ae);if(he!=null&&he.hasOwnProperty("x"))switch((he.labelpos==="l"||he.labelpos==="r")&&(he.width-=he.labeloffset),he.labelpos){case"l":he.x-=he.width/2+he.labeloffset;break;case"r":he.x+=he.width/2+he.labeloffset;break}})},at=function(Wt){Wt.edges().forEach(function(ae){var he,Se=Wt.edge(ae);Se.reversed&&((he=Se.points)===null||he===void 0||he.reverse())})},ht=function(Wt){Wt.nodes().forEach(function(ae){var he,Se,xe;if(!((he=Wt.children(ae))===null||he===void 0)&&he.length){var Bt=Wt.node(ae),fe=Wt.node(Bt.borderTop),Le=Wt.node(Bt.borderBottom),jt=Wt.node(Bt.borderLeft[((Se=Bt.borderLeft)===null||Se===void 0?void 0:Se.length)-1]),oe=Wt.node(Bt.borderRight[((xe=Bt.borderRight)===null||xe===void 0?void 0:xe.length)-1]);Bt.width=Math.abs((oe==null?void 0:oe.x)-(jt==null?void 0:jt.x))||10,Bt.height=Math.abs((Le==null?void 0:Le.y)-(fe==null?void 0:fe.y))||10,Bt.x=((jt==null?void 0:jt.x)||0)+Bt.width/2,Bt.y=((fe==null?void 0:fe.y)||0)+Bt.height/2}}),Wt.nodes().forEach(function(ae){var he;((he=Wt.node(ae))===null||he===void 0?void 0:he.dummy)==="border"&&Wt.removeNode(ae)})},wt=function(Wt){Wt.edges().forEach(function(ae){if(ae.v===ae.w){var he=Wt.node(ae.v);he.selfEdges||(he.selfEdges=[]),he.selfEdges.push({e:ae,label:Wt.edge(ae)}),Wt.removeEdgeObj(ae)}})},Mt=function(Wt){var ae=(0,D.buildLayerMatrix)(Wt);ae==null||ae.forEach(function(he){var Se=0;he==null||he.forEach(function(xe,Bt){var fe,Le=Wt.node(xe);Le.order=Bt+Se,(fe=Le.selfEdges)===null||fe===void 0||fe.forEach(function(jt){(0,D.addDummyNode)(Wt,"selfedge",{width:jt.label.width,height:jt.label.height,rank:Le.rank,order:Bt+ ++Se,e:jt.e,label:jt.label},"_se")}),delete Le.selfEdges})})},Ut=function(Wt){Wt.nodes().forEach(function(ae){var he=Wt.node(ae);if(he.dummy==="selfedge"){var Se=Wt.node(he.e.v),xe=Se.x+Se.width/2,Bt=Se.y,fe=he.x-xe,Le=Se.height/2;Wt.setEdgeObj(he.e,he.label),Wt.removeNode(ae),he.label.points=[{x:xe+2*fe/3,y:Bt-Le},{x:xe+5*fe/6,y:Bt-Le},{y:Bt,x:xe+fe},{x:xe+5*fe/6,y:Bt+Le},{x:xe+2*fe/3,y:Bt+Le}],he.label.x=he.x,he.label.y=he.y}})},Vt=function(Wt,ae){var he={};return ae==null||ae.forEach(function(Se){Wt[Se]!==void 0&&(he[Se]=+Wt[Se])}),he},Me=function(Wt){Wt===void 0&&(Wt={});var ae={};return Object.keys(Wt).forEach(function(he){ae[he.toLowerCase()]=Wt[he]}),ae};U.default=I},54794:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var F=z(95869),j=function(w){var b,g=(0,F.addDummyNode)(w,"root",{},"_root"),y=L(w),d=Math.max.apply(Math,Object.values(y));Math.abs(d)===1/0&&(d=1);var S=d-1,_=2*S+1;w.graph().nestingRoot=g,w.edges().forEach(function(I){w.edge(I).minlen*=_});var E=k(w)+1;(b=w.children())===null||b===void 0||b.forEach(function(I){B(w,g,_,E,S,y,I)}),w.graph().nodeRankFactor=_},B=function(w,b,g,y,d,S,_){var E=w.children(_);if(!(E!=null&&E.length)){_!==b&&w.setEdge(b,_,{weight:0,minlen:g});return}var I=(0,F.addBorderNode)(w,"_bt"),P=(0,F.addBorderNode)(w,"_bb"),N=w.node(_);w.setParent(I,_),N.borderTop=I,w.setParent(P,_),N.borderBottom=P,E==null||E.forEach(function(H){B(w,b,g,y,d,S,H);var nt=w.node(H),X=nt.borderTop?nt.borderTop:H,Y=nt.borderBottom?nt.borderBottom:H,Z=nt.borderTop?y:2*y,J=X!==Y?1:d-S[_]+1;w.setEdge(I,X,{minlen:J,weight:Z,nestingEdge:!0}),w.setEdge(Y,P,{minlen:J,weight:Z,nestingEdge:!0})}),w.parent(_)||w.setEdge(b,I,{weight:0,minlen:d+S[_]})},L=function(w){var b,g={},y=function(d,S){var _=w.children(d);_==null||_.forEach(function(E){return y(E,S+1)}),g[d]=S};return(b=w.children())===null||b===void 0||b.forEach(function(d){return y(d,1)}),g},k=function(w){var b=0;return w.edges().forEach(function(g){b+=w.edge(g).weight}),b},D=function(w){var b=w.graph();b.nestingRoot&&w.removeNode(b.nestingRoot),delete b.nestingRoot,w.edges().forEach(function(g){var y=w.edge(g);y.nestingEdge&&w.removeEdgeObj(g)})};U.default={run:j,cleanup:D}},32778:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var F=z(95869),j=function(k){k.graph().dummyChains=[],k.edges().forEach(function(D){return B(k,D)})},B=function(k,D){var w=D.v,b=k.node(w).rank,g=D.w,y=k.node(g).rank,d=D.name,S=k.edge(D),_=S.labelRank;if(y!==b+1){k.removeEdgeObj(D);var E=k.graph(),I,P,N;for(N=0,++b;b<y;++N,++b)S.points=[],P={edgeLabel:S,width:0,height:0,edgeObj:D,rank:b},I=(0,F.addDummyNode)(k,"edge",P,"_d"),b===_&&(P.width=S.width,P.height=S.height,P.dummy="edge-label",P.labelpos=S.labelpos),k.setEdge(w,I,{weight:S.weight},d),N===0&&(E.dummyChains||(E.dummyChains=[]),E.dummyChains.push(I)),w=I;k.setEdge(w,g,{weight:S.weight},d)}},L=function(k){var D;(D=k.graph().dummyChains)===null||D===void 0||D.forEach(function(w){var b=k.node(w),g=b.edgeLabel,y;b.edgeObj&&k.setEdgeObj(b.edgeObj,g);for(var d=w;b.dummy;)y=k.successors(d)[0],k.removeNode(d),g.points.push({x:b.x,y:b.y}),b.dummy==="edge-label"&&(g.x=b.x,g.y=b.y,g.width=b.width,g.height=b.height),d=y,b=k.node(d)})};U.default={run:j,undo:L}},99388:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var z=function(F,j,B){var L={},k;B==null||B.forEach(function(D){for(var w=F.parent(D),b,g;w;){if(b=F.parent(w),b?(g=L[b],L[b]=w):(g=k,k=w),g&&g!==w){j.setEdge(g,w);return}w=b}})};U.default=z},38937:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var z=function(F,j){return j.map(function(B){var L=F.inEdges(B);if(!(L!=null&&L.length))return{v:B};{var k={sum:0,weight:0};return L==null||L.forEach(function(D){var w=F.edge(D),b=F.node(D.v);k.sum+=w.weight*b.order,k.weight+=w.weight}),{v:B,barycenter:k.sum/k.weight,weight:k.weight}}})};U.default=z},74798:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var F=z(67858),j=function(L,k,D){var w=B(L),b=new F.Graph({compound:!0}).setGraph({root:w}).setDefaultNodeLabel(function(g){return L.node(g)});return L.nodes().forEach(function(g){var y,d=L.node(g),S=L.parent(g);(d.rank===k||d.minRank<=k&&k<=d.maxRank)&&(b.setNode(g),b.setParent(g,S||w),(y=L[D](g))===null||y===void 0||y.forEach(function(_){var E=_.v===g?_.w:_.v,I=b.edgeFromArgs(E,g),P=I!==void 0?I.weight:0;b.setEdge(E,g,{weight:L.edge(_).weight+P})}),d.hasOwnProperty("minRank")&&b.setNode(g,{borderLeft:d.borderLeft[k],borderRight:d.borderRight[k]}))}),b},B=function(L){for(var k;L.hasNode(k="_root".concat(Math.random())););return k};U.default=j},14842:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var F=z(95869),j=function(L,k,D){for(var w=(0,F.zipObject)(D,D.map(function(E,I){return I})),b=k.map(function(E){var I,P=(I=L.outEdges(E))===null||I===void 0?void 0:I.map(function(N){return{pos:w[N.w]||0,weight:L.edge(N).weight}});return P==null?void 0:P.sort(function(N,H){return N.pos-H.pos})}),g=b.flat().filter(function(E){return E!==void 0}),y=1;y<D.length;)y<<=1;var d=2*y-1;y-=1;var S=Array(d).fill(0,0,d),_=0;return g==null||g.forEach(function(E){if(E){var I=E.pos+y;S[I]+=E.weight;for(var P=0;I>0;)I%2&&(P+=S[I+1]),I=I-1>>1,S[I]+=E.weight;_+=E.weight*P}}),_},B=function(L,k){for(var D=0,w=1;w<(k==null?void 0:k.length);w+=1)D+=j(L,k[w-1],k[w]);return D};U.default=B},15113:function(xr,U,z){"use strict";var F=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(U,"__esModule",{value:!0});var j=F(z(19722)),B=F(z(14842)),L=F(z(74798)),k=F(z(99388)),D=F(z(69563)),w=z(8273),b=z(67858),g=z(95869),y=function(E,I){for(var P=(0,g.maxRank)(E),N=[],H=[],nt=1;nt<P+1;nt++)N.push(nt);for(var nt=P-1;nt>-1;nt--)H.push(nt);var X=d(E,N,"inEdges"),Y=d(E,H,"outEdges"),Z=(0,j.default)(E);_(E,Z);for(var J=Number.POSITIVE_INFINITY,it,nt=0,tt=0;tt<4;++nt,++tt){S(nt%2?X:Y,nt%4>=2,!1,I),Z=(0,g.buildLayerMatrix)(E);var ut=(0,B.default)(E,Z);ut<J&&(tt=0,it=(0,w.clone)(Z),J=ut)}Z=(0,j.default)(E),_(E,Z);for(var nt=0,tt=0;tt<4;++nt,++tt){S(nt%2?X:Y,nt%4>=2,!0,I),Z=(0,g.buildLayerMatrix)(E);var ut=(0,B.default)(E,Z);ut<J&&(tt=0,it=(0,w.clone)(Z),J=ut)}_(E,it)},d=function(E,I,P){return I.map(function(N){return(0,L.default)(E,N,P)})},S=function(E,I,P,N){var H=new b.Graph;E==null||E.forEach(function(nt){for(var X,Y=nt.graph().root,Z=(0,D.default)(nt,Y,H,I,P,N),J=0;J<((X=Z.vs)===null||X===void 0?void 0:X.length);J++){var it=nt.node(Z.vs[J]);it&&(it.order=J)}(0,k.default)(nt,H,Z.vs)})},_=function(E,I){I==null||I.forEach(function(P){P==null||P.forEach(function(N,H){E.node(N).order=H})})};U.default=y},27910:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var z=function(F,j){for(var B=F.nodes().filter(function(b){var g;return!(!((g=F.children(b))===null||g===void 0)&&g.length)}),L=B.map(function(b){return F.node(b).rank}),k=Math.max.apply(Math,L),D=[],w=0;w<k+1;w++)D[w]=[];j==null||j.forEach(function(b){var g=F.node(b);!g||g!=null&&g.dummy||isNaN(g.rank)||(g.fixorder=D[g.rank].length,D[g.rank].push(b))})};U.default=z},19722:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var F=z(88560),j=function(B){for(var L={},k=B.nodes().filter(function(E){var I;return!(!((I=B.children(E))===null||I===void 0)&&I.length)}),D=k.map(function(E){return B.node(E).rank}),w=(0,F.max)(D),b=[],g=0;g<w+1;g++)b.push([]);var y=function(E){var I;if(!L.hasOwnProperty(E)){L[E]=!0;var P=B.node(E);isNaN(P.rank)||b[P.rank].push(E),(I=B.successors(E))===null||I===void 0||I.forEach(function(N){return y(N)})}},d=k.sort(function(E,I){return B.node(E).rank-B.node(I).rank}),S=d.filter(function(E){return B.node(E).fixorder!==void 0}),_=S.sort(function(E,I){return B.node(E).fixorder-B.node(I).fixorder});return _==null||_.forEach(function(E){isNaN(B.node(E).rank)||b[B.node(E).rank].push(E),L[E]=!0}),d==null||d.forEach(y),b};U.default=j},73792:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var z=function(B,L){var k,D,w,b={};B==null||B.forEach(function(y,d){b[y.v]={i:d,indegree:0,in:[],out:[],vs:[y.v]};var S=b[y.v];y.barycenter!==void 0&&(S.barycenter=y.barycenter,S.weight=y.weight)}),(k=L.edges())===null||k===void 0||k.forEach(function(y){var d=b[y.v],S=b[y.w];d!==void 0&&S!==void 0&&(S.indegree++,d.out.push(b[y.w]))});var g=(w=(D=Object.values(b)).filter)===null||w===void 0?void 0:w.call(D,function(y){return!y.indegree});return F(g)},F=function(B){for(var L,k,D=[],w=function(S){return function(_){_.merged||(_.barycenter===void 0||S.barycenter===void 0||_.barycenter>=S.barycenter)&&j(S,_)}},b=function(S){return function(_){_.in.push(S),--_.indegree===0&&B.push(_)}},g=function(){var S=B.pop();D.push(S),(L=S.in.reverse())===null||L===void 0||L.forEach(function(_){return w(S)(_)}),(k=S.out)===null||k===void 0||k.forEach(function(_){return b(S)(_)})};B!=null&&B.length;)g();var y=D.filter(function(S){return!S.merged}),d=["vs","i","barycenter","weight"];return y.map(function(S){var _={};return d==null||d.forEach(function(E){S[E]!==void 0&&(_[E]=S[E])}),_})},j=function(B,L){var k,D=0,w=0;B.weight&&(D+=B.barycenter*B.weight,w+=B.weight),L.weight&&(D+=L.barycenter*L.weight,w+=L.weight),B.vs=(k=L.vs)===null||k===void 0?void 0:k.concat(B.vs),B.barycenter=D/w,B.weight=w,B.i=Math.min(L.i,B.i),L.merged=!0};U.default=z},69563:function(xr,U,z){"use strict";var F=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(U,"__esModule",{value:!0});var j=F(z(38937)),B=F(z(73792)),L=F(z(17457)),k=function(b,g,y,d,S,_){var E,I,P,N,H=b.children(g),nt=b.node(g),X=nt?nt.borderLeft:void 0,Y=nt?nt.borderRight:void 0,Z={};X&&(H=H==null?void 0:H.filter(function(pt){return pt!==X&&pt!==Y}));var J=(0,j.default)(b,H||[]);J==null||J.forEach(function(pt){var Dt;if(!((Dt=b.children(pt.v))===null||Dt===void 0)&&Dt.length){var Ot=k(b,pt.v,y,d,_);Z[pt.v]=Ot,Ot.hasOwnProperty("barycenter")&&w(pt,Ot)}});var it=(0,B.default)(J,y);D(it,Z),(E=it.filter(function(pt){return pt.vs.length>0}))===null||E===void 0||E.forEach(function(pt){var Dt=b.node(pt.vs[0]);Dt&&(pt.fixorder=Dt.fixorder,pt.order=Dt.order)});var tt=(0,L.default)(it,d,S,_);if(X&&(tt.vs=[X,tt.vs,Y].flat(),!((I=b.predecessors(X))===null||I===void 0)&&I.length)){var ut=b.node(((P=b.predecessors(X))===null||P===void 0?void 0:P[0])||""),vt=b.node(((N=b.predecessors(Y))===null||N===void 0?void 0:N[0])||"");tt.hasOwnProperty("barycenter")||(tt.barycenter=0,tt.weight=0),tt.barycenter=(tt.barycenter*tt.weight+ut.order+vt.order)/(tt.weight+2),tt.weight+=2}return tt},D=function(b,g){b==null||b.forEach(function(y){var d,S=(d=y.vs)===null||d===void 0?void 0:d.map(function(_){return g[_]?g[_].vs:_});y.vs=S.flat()})},w=function(b,g){b.barycenter!==void 0?(b.barycenter=(b.barycenter*b.weight+g.barycenter*g.weight)/(b.weight+g.weight),b.weight+=g.weight):(b.barycenter=g.barycenter,b.weight=g.weight)};U.default=k},17457:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var F=z(95869),j=function(k,D,w,b){var g=(0,F.partition)(k,function(N){var H=N.hasOwnProperty("fixorder")&&!isNaN(N.fixorder);return b?!H&&N.hasOwnProperty("barycenter"):H||N.hasOwnProperty("barycenter")}),y=g.lhs,d=g.rhs.sort(function(N,H){return-N.i- -H.i}),S=[],_=0,E=0,I=0;y==null||y.sort(L(!!D,!!w)),I=B(S,d,I),y==null||y.forEach(function(N){var H;I+=(H=N.vs)===null||H===void 0?void 0:H.length,S.push(N.vs),_+=N.barycenter*N.weight,E+=N.weight,I=B(S,d,I)});var P={vs:S.flat()};return E&&(P.barycenter=_/E,P.weight=E),P},B=function(k,D,w){for(var b=w,g;D.length&&(g=D[D.length-1]).i<=b;)D.pop(),k==null||k.push(g.vs),b++;return b},L=function(k,D){return function(w,b){if(w.fixorder!==void 0&&b.fixorder!==void 0)return w.fixorder-b.fixorder;if(w.barycenter<b.barycenter)return-1;if(w.barycenter>b.barycenter)return 1;if(D&&w.order!==void 0&&b.order!==void 0){if(w.order<b.order)return-1;if(w.order>b.order)return 1}return k?b.i-w.i:w.i-b.i}};U.default=j},99946:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var z=function(B){var L,k={},D=0,w=function(b){var g,y=D;(g=B.children(b))===null||g===void 0||g.forEach(w),k[b]={low:y,lim:D++}};return(L=B.children())===null||L===void 0||L.forEach(w),k},F=function(B,L,k,D){var w=[],b=[],g=Math.min(L[k].low,L[D].low),y=Math.max(L[k].lim,L[D].lim),d,S;d=k;do d=B.parent(d),w.push(d);while(d&&(L[d].low>g||y>L[d].lim));for(S=d,d=D;d&&d!==S;)b.push(d),d=B.parent(d);return{lca:S,path:w.concat(b.reverse())}},j=function(B){var L,k=z(B);(L=B.graph().dummyChains)===null||L===void 0||L.forEach(function(D){var w,b,g=D,y=B.node(g),d=y.edgeObj;if(d)for(var S=F(B,k,d.v,d.w),_=S.path,E=S.lca,I=0,P=_[I],N=!0;g!==d.w;){if(y=B.node(g),N){for(;P!==E&&((w=B.node(P))===null||w===void 0?void 0:w.maxRank)<y.rank;)I++,P=_[I];P===E&&(N=!1)}if(!N){for(;I<_.length-1&&((b=B.node(_[I+1]))===null||b===void 0?void 0:b.minRank)<=y.rank;)I++;P=_[I]}B.setParent(g,P),g=B.successors(g)[0]}})};U.default=j},50075:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var X=function(Y,Z){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,it){J.__proto__=it}||function(J,it){for(var tt in it)Object.prototype.hasOwnProperty.call(it,tt)&&(J[tt]=it[tt])},X(Y,Z)};return function(Y,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Class extends value "+String(Z)+" is not a constructor or null");X(Y,Z);function J(){this.constructor=Y}Y.prototype=Z===null?Object.create(Z):(J.prototype=Z.prototype,new J)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.width=U.sep=U.positionX=U.balance=U.alignCoordinates=U.findSmallestWidthAlignment=U.buildBlockGraph=U.horizontalCompaction=U.verticalAlignment=U.hasConflict=U.addConflict=U.findOtherInnerSegmentNode=U.findType2Conflicts=U.findType1Conflicts=void 0;var j=z(99905),B=z(88560),L=z(95869),k=function(X){F(Y,X);function Y(){return X!==null&&X.apply(this,arguments)||this}return Y}(j.Graph),D=function(X,Y){var Z={},J=function(it,tt){var ut=0,vt=0,pt=it.length,Dt=tt==null?void 0:tt[(tt==null?void 0:tt.length)-1];return tt==null||tt.forEach(function(Ot,te){var Gt,K=(0,U.findOtherInnerSegmentNode)(X,Ot),p=K?X.node(K).order:pt;(K||Ot===Dt)&&((Gt=tt.slice(vt,te+1))===null||Gt===void 0||Gt.forEach(function(at){var ht;(ht=X.predecessors(at))===null||ht===void 0||ht.forEach(function(wt){var Mt,Ut=X.node(wt),Vt=Ut.order;(Vt<ut||p<Vt)&&!(Ut.dummy&&(!((Mt=X.node(at))===null||Mt===void 0)&&Mt.dummy))&&(0,U.addConflict)(Z,wt,at)})}),vt=te+1,ut=p)}),tt};return Y!=null&&Y.length&&Y.reduce(J),Z};U.findType1Conflicts=D;var w=function(X,Y){var Z={};function J(vt,pt,Dt,Ot,te){for(var Gt,K,p,at=pt;at<Dt;at++)p=vt[at],!((Gt=X.node(p))===null||Gt===void 0)&&Gt.dummy&&((K=X.predecessors(p))===null||K===void 0||K.forEach(function(ht){var wt=X.node(ht);wt.dummy&&(wt.order<Ot||wt.order>te)&&(0,U.addConflict)(Z,ht,p)}))}function it(vt){return JSON.stringify(vt.slice(1))}function tt(vt,pt){var Dt=it(vt);pt.get(Dt)||(J.apply(void 0,vt),pt.set(Dt,!0))}var ut=function(vt,pt){var Dt=-1,Ot,te=0,Gt=new Map;return pt==null||pt.forEach(function(K,p){var at;if(((at=X.node(K))===null||at===void 0?void 0:at.dummy)==="border"){var ht=X.predecessors(K)||[];ht.length&&(Ot=X.node(ht[0]).order,tt([pt,te,p,Dt,Ot],Gt),te=p,Dt=Ot)}tt([pt,te,pt.length,Ot,vt.length],Gt)}),pt};return Y!=null&&Y.length&&Y.reduce(ut),Z};U.findType2Conflicts=w;var b=function(X,Y){var Z,J;if(!((Z=X.node(Y))===null||Z===void 0)&&Z.dummy)return(J=X.predecessors(Y))===null||J===void 0?void 0:J.find(function(it){return X.node(it).dummy})};U.findOtherInnerSegmentNode=b;var g=function(X,Y,Z){var J=Y,it=Z;if(J>it){var tt=J;J=it,it=tt}var ut=X[J];ut||(X[J]=ut={}),ut[it]=!0};U.addConflict=g;var y=function(X,Y,Z){var J=Y,it=Z;if(J>it){var tt=Y;J=it,it=tt}return!!X[J]};U.hasConflict=y;var d=function(X,Y,Z,J){var it={},tt={},ut={};return Y==null||Y.forEach(function(vt){vt==null||vt.forEach(function(pt,Dt){it[pt]=pt,tt[pt]=pt,ut[pt]=Dt})}),Y==null||Y.forEach(function(vt){var pt=-1;vt==null||vt.forEach(function(Dt){var Ot=J(Dt);if(Ot.length){Ot=Ot.sort(function(at,ht){return ut[at]-ut[ht]});for(var te=(Ot.length-1)/2,Gt=Math.floor(te),K=Math.ceil(te);Gt<=K;++Gt){var p=Ot[Gt];tt[Dt]===Dt&&pt<ut[p]&&!(0,U.hasConflict)(Z,Dt,p)&&(tt[p]=Dt,tt[Dt]=it[Dt]=it[p],pt=ut[p])}}})}),{root:it,align:tt}};U.verticalAlignment=d;var S=function(X,Y,Z,J,it){var tt,ut={},vt=(0,U.buildBlockGraph)(X,Y,Z,it),pt=it?"borderLeft":"borderRight",Dt=function(Gt,K){for(var p=vt.nodes(),at=p.pop(),ht={};at;)ht[at]?Gt(at):(ht[at]=!0,p.push(at),p=p.concat(K(at))),at=p.pop()},Ot=function(Gt){ut[Gt]=(vt.inEdges(Gt)||[]).reduce(function(K,p){return Math.max(K,(ut[p.v]||0)+vt.edge(p))},0)},te=function(Gt){var K=(vt.outEdges(Gt)||[]).reduce(function(at,ht){return Math.min(at,(ut[ht.w]||0)-vt.edge(ht))},Number.POSITIVE_INFINITY),p=X.node(Gt);K!==Number.POSITIVE_INFINITY&&p.borderType!==pt&&(ut[Gt]=Math.max(ut[Gt],K))};return Dt(Ot,vt.predecessors.bind(vt)),Dt(te,vt.successors.bind(vt)),(tt=Object.values(J))===null||tt===void 0||tt.forEach(function(Gt){ut[Gt]=ut[Z[Gt]]}),ut};U.horizontalCompaction=S;var _=function(X,Y,Z,J){var it=new k,tt=X.graph(),ut=(0,U.sep)(tt.nodesep,tt.edgesep,J);return Y==null||Y.forEach(function(vt){var pt;vt==null||vt.forEach(function(Dt){var Ot=Z[Dt];if(it.setNode(Ot),pt){var te=Z[pt],Gt=it.edgeFromArgs(te,Ot);it.setEdge(te,Ot,Math.max(ut(X,Dt,pt),Gt||0))}pt=Dt})}),it};U.buildBlockGraph=_;var E=function(X,Y){return(0,L.minBy)(Object.values(Y),function(Z){var J,it=Number.NEGATIVE_INFINITY,tt=Number.POSITIVE_INFINITY;return(J=Object.keys(Z))===null||J===void 0||J.forEach(function(ut){var vt=Z[ut],pt=(0,U.width)(X,ut)/2;it=Math.max(vt+pt,it),tt=Math.min(vt-pt,tt)}),it-tt})};U.findSmallestWidthAlignment=E;function I(X,Y){var Z=Object.values(Y),J=(0,B.min)(Z),it=(0,B.max)(Z);["u","d"].forEach(function(tt){["l","r"].forEach(function(ut){var vt=tt+ut,pt=X[vt],Dt;if(pt!==Y){var Ot=Object.values(pt);Dt=ut==="l"?J-(0,B.min)(Ot):it-(0,B.max)(Ot),Dt&&(X[vt]={},Object.keys(pt).forEach(function(te){X[vt][te]=pt[te]+Dt}))}})})}U.alignCoordinates=I;var P=function(X,Y){var Z={};return Object.keys(X.ul).forEach(function(J){if(Y)Z[J]=X[Y.toLowerCase()][J];else{var it=Object.values(X).map(function(tt){return tt[J]});Z[J]=(it[0]+it[1])/2}}),Z};U.balance=P;var N=function(X){var Y=(0,L.buildLayerMatrix)(X),Z=Object.assign((0,U.findType1Conflicts)(X,Y),(0,U.findType2Conflicts)(X,Y)),J={},it;["u","d"].forEach(function(ut){it=ut==="u"?Y:Object.values(Y).reverse(),["l","r"].forEach(function(vt){vt==="r"&&(it=it.map(function(te){return Object.values(te).reverse()}));var pt=(ut==="u"?X.predecessors:X.successors).bind(X),Dt=(0,U.verticalAlignment)(X,it,Z,pt),Ot=(0,U.horizontalCompaction)(X,it,Dt.root,Dt.align,vt==="r");vt==="r"&&Object.keys(Ot).forEach(function(te){Ot[te]=-Ot[te]}),J[ut+vt]=Ot})});var tt=(0,U.findSmallestWidthAlignment)(X,J);return I(J,tt),(0,U.balance)(J,X.graph().align)};U.positionX=N;var H=function(X,Y,Z){return function(J,it,tt){var ut=J.node(it),vt=J.node(tt),pt=0,Dt;if(pt+=ut.width/2,ut.hasOwnProperty("labelpos"))switch((ut.labelpos||"").toLowerCase()){case"l":Dt=-ut.width/2;break;case"r":Dt=ut.width/2;break}if(Dt&&(pt+=Z?Dt:-Dt),Dt=0,pt+=(ut.dummy?Y:X)/2,pt+=(vt.dummy?Y:X)/2,pt+=vt.width/2,vt.labelpos)switch((vt.labelpos||"").toLowerCase()){case"l":Dt=vt.width/2;break;case"r":Dt=-vt.width/2;break}return Dt&&(pt+=Z?Dt:-Dt),Dt=0,pt}};U.sep=H;var nt=function(X,Y){return X.node(Y).width||0};U.width=nt},90829:function(xr,U,z){"use strict";var F=this&&this.__spreadArray||function(w,b,g){if(g||arguments.length===2)for(var y=0,d=b.length,S;y<d;y++)(S||!(y in b))&&(S||(S=Array.prototype.slice.call(b,0,y)),S[y]=b[y]);return w.concat(S||Array.prototype.slice.call(b))};Object.defineProperty(U,"__esModule",{value:!0});var j=z(95869),B=z(50075),L=function(w){var b=(0,j.buildLayerMatrix)(w),g=w.graph().ranksep,y=0;b==null||b.forEach(function(d){var S=d.map(function(E){return w.node(E).height}),_=Math.max.apply(Math,F(F([],S,!1),[0],!1));d==null||d.forEach(function(E){w.node(E).y=y+_/2}),y+=_+g})},k=function(w){var b=(0,j.buildLayerMatrix)(w),g=Object.assign((0,B.findType1Conflicts)(w,b),(0,B.findType2Conflicts)(w,b)),y={},d=[];["u","d"].forEach(function(_){d=_==="u"?b:Object.values(b).reverse(),["l","r"].forEach(function(E){E==="r"&&(d=d.map(function(H){return Object.values(H).reverse()}));var I=(_==="u"?w.predecessors:w.successors).bind(w),P=(0,B.verticalAlignment)(w,d,g,I),N=(0,B.horizontalCompaction)(w,d,P.root,P.align,E==="r");E==="r"&&Object.keys(N).forEach(function(H){return N[H]=-N[H]}),y[_+E]=N})});var S=(0,B.findSmallestWidthAlignment)(w,y);return S&&(0,B.alignCoordinates)(y,S),(0,B.balance)(y,w.graph().align)},D=function(w){var b,g=(0,j.asNonCompoundGraph)(w);L(g);var y=k(g);(b=Object.keys(y))===null||b===void 0||b.forEach(function(d){g.node(d).x=y[d]})};U.default=D},85003:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.feasibleTreeWithLayer=U.feasibleTree=void 0;var F=z(76783),j=z(95869),B=z(67858),L=function(y){var d=new B.Graph({directed:!1}),S=y.nodes()[0],_=y.nodeCount();d.setNode(S,{});for(var E,I;k(d,y)<_;)E=b(d,y),I=d.hasNode(E.v)?(0,F.slack)(y,E):-(0,F.slack)(y,E),g(d,y,I);return d};U.feasibleTree=L;var k=function(y,d){var S=function(_){d.nodeEdges(_).forEach(function(E){var I=E.v,P=_===I?E.w:I;!y.hasNode(P)&&!(0,F.slack)(d,E)&&(y.setNode(P,{}),y.setEdge(_,P,{}),S(P))})};return y.nodes().forEach(S),y.nodeCount()},D=function(y){var d=new B.Graph({directed:!1}),S=y.nodes()[0],_=y.nodes().filter(function(P){return!!y.node(P)}).length;d.setNode(S,{});for(var E,I;w(d,y)<_;)E=b(d,y),I=d.hasNode(E.v)?(0,F.slack)(y,E):-(0,F.slack)(y,E),g(d,y,I);return d};U.feasibleTreeWithLayer=D;var w=function(y,d){var S=function(_){var E;(E=d.nodeEdges(_))===null||E===void 0||E.forEach(function(I){var P=I.v,N=_===P?I.w:P;!y.hasNode(N)&&(d.node(N).layer!==void 0||!(0,F.slack)(d,I))&&(y.setNode(N,{}),y.setEdge(_,N,{}),S(N))})};return y.nodes().forEach(S),y.nodeCount()},b=function(y,d){return(0,j.minBy)(d.edges(),function(S){return y.hasNode(S.v)!==y.hasNode(S.w)?(0,F.slack)(d,S):1/0})},g=function(y,d,S){y.nodes().forEach(function(_){d.node(_).rank||(d.node(_).rank=0),d.node(_).rank+=S})};U.default={feasibleTree:L,feasibleTreeWithLayer:D}},68976:function(xr,U,z){"use strict";var F=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(U,"__esModule",{value:!0});var j=z(76783),B=z(85003),L=F(z(49562)),k=function(g){switch(g.graph().ranker){case"network-simplex":b(g);break;case"tight-tree":w(g);break;case"longest-path":D(g);break;default:w(g)}},D=j.longestPath,w=function(g){(0,j.longestPathWithLayer)(g),(0,B.feasibleTreeWithLayer)(g)},b=function(g){(0,L.default)(g)};U.default=k},49562:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.exchangeEdges=U.enterEdge=U.leaveEdge=U.initLowLimValues=U.calcCutValue=U.initCutValues=void 0;var F=z(85003),j=z(76783),B=z(95869),L=z(99905),k=L.algorithm.preorder,D=L.algorithm.postorder,w=function(nt){var X=(0,B.simplify)(nt);(0,j.longestPath)(X);var Y=(0,F.feasibleTree)(X);(0,U.initLowLimValues)(Y),(0,U.initCutValues)(Y,X);for(var Z,J;Z=(0,U.leaveEdge)(Y);)J=(0,U.enterEdge)(Y,X,Z),(0,U.exchangeEdges)(Y,X,Z,J)},b=function(nt,X){var Y=D(nt,nt.nodes());Y=Y==null?void 0:Y.slice(0,(Y==null?void 0:Y.length)-1),Y==null||Y.forEach(function(Z){g(nt,X,Z)})};U.initCutValues=b;var g=function(nt,X,Y){var Z=nt.node(Y),J=Z.parent;nt.edgeFromArgs(Y,J).cutvalue=(0,U.calcCutValue)(nt,X,Y)},y=function(nt,X,Y){var Z,J=nt.node(Y),it=J.parent,tt=!0,ut=X.edgeFromArgs(Y,it),vt=0;return ut||(tt=!1,ut=X.edgeFromArgs(it,Y)),vt=ut.weight,(Z=X.nodeEdges(Y))===null||Z===void 0||Z.forEach(function(pt){var Dt=pt.v===Y,Ot=Dt?pt.w:pt.v;if(Ot!==it){var te=Dt===tt,Gt=X.edge(pt).weight;if(vt+=te?Gt:-Gt,N(nt,Y,Ot)){var K=nt.edgeFromArgs(Y,Ot).cutvalue;vt+=te?-K:K}}}),vt};U.calcCutValue=y;var d=function(nt,X){X===void 0&&(X=nt.nodes()[0]),S(nt,{},1,X)};U.initLowLimValues=d;var S=function(nt,X,Y,Z,J){var it,tt=Y,ut=Y,vt=nt.node(Z);return X[Z]=!0,(it=nt.neighbors(Z))===null||it===void 0||it.forEach(function(pt){X[pt]||(ut=S(nt,X,ut,pt,Z))}),vt.low=tt,vt.lim=ut++,J?vt.parent=J:delete vt.parent,ut},_=function(nt){return nt.edges().find(function(X){return nt.edge(X).cutvalue<0})};U.leaveEdge=_;var E=function(nt,X,Y){var Z=Y.v,J=Y.w;X.hasEdge(Z,J)||(Z=Y.w,J=Y.v);var it=nt.node(Z),tt=nt.node(J),ut=it,vt=!1;it.lim>tt.lim&&(ut=tt,vt=!0);var pt=X.edges().filter(function(Dt){return vt===H(nt,nt.node(Dt.v),ut)&&vt!==H(nt,nt.node(Dt.w),ut)});return(0,B.minBy)(pt,function(Dt){return(0,j.slack)(X,Dt)})};U.enterEdge=E;var I=function(nt,X,Y,Z){var J=Y.v,it=Y.w;nt.removeEdge(J,it),nt.setEdge(Z.v,Z.w,{}),(0,U.initLowLimValues)(nt),(0,U.initCutValues)(nt,X),P(nt,X)};U.exchangeEdges=I;var P=function(nt,X){var Y=nt.nodes().find(function(J){var it;return!(!((it=X.node(J))===null||it===void 0)&&it.parent)}),Z=k(nt,Y);Z=Z==null?void 0:Z.slice(1),Z==null||Z.forEach(function(J){var it=nt.node(J).parent,tt=X.edgeFromArgs(J,it),ut=!1;tt||(tt=X.edgeFromArgs(it,J),ut=!0),X.node(J).rank=X.node(it).rank+(ut?tt.minlen:-tt.minlen)})},N=function(nt,X,Y){return nt.hasEdge(X,Y)},H=function(nt,X,Y){return Y.low<=X.lim&&X.lim<=Y.lim};U.default=w},76783:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.slack=U.longestPathWithLayer=U.longestPath=void 0;var z=function(B){var L,k={},D=function(w){var b,g=B.node(w);if(!g)return 0;if(k[w])return g.rank;k[w]=!0;var y;return(b=B.outEdges(w))===null||b===void 0||b.forEach(function(d){var S=D(d.w),_=B.edge(d).minlen,E=S-_;E&&(y===void 0||E<y)&&(y=E)}),y||(y=0),g.rank=y,y};(L=B.sources())===null||L===void 0||L.forEach(function(w){return D(w)})};U.longestPath=z;var F=function(B){var L,k={},D,w=function(y){var d,S=B.node(y);if(!S)return 0;if(k[y])return S.rank;k[y]=!0;var _;return(d=B.outEdges(y))===null||d===void 0||d.forEach(function(E){var I=w(E.w),P=B.edge(E).minlen,N=I-P;N&&(_===void 0||N<_)&&(_=N)}),_||(_=0),(D===void 0||_<D)&&(D=_),S.rank=_,_};(L=B.sources())===null||L===void 0||L.forEach(function(y){B.node(y)&&w(y)}),D===void 0&&(D=0);var b={},g=function(y,d){var S,_=B.node(y),E=isNaN(_.layer)?d:_.layer;(_.rank===void 0||_.rank<E)&&(_.rank=E),!b[y]&&(b[y]=!0,(S=B.outEdges(y))===null||S===void 0||S.map(function(I){g(I.w,E+B.edge(I).minlen)}))};B.nodes().forEach(function(y){var d=B.node(y);d&&(isNaN(d.layer)?d.rank-=D:g(y,d.layer))})};U.longestPathWithLayer=F;var j=function(B,L){return B.node(L.w).rank-B.node(L.v).rank-B.edge(L).minlen};U.slack=j,U.default={longestPath:z,longestPathWithLayer:F,slack:j}},95869:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.minBy=U.notime=U.time=U.partition=U.maxRank=U.addBorderNode=U.removeEmptyRanks=U.normalizeRanks=U.buildLayerMatrix=U.intersectRect=U.predecessorWeights=U.successorWeights=U.zipObject=U.asNonCompoundGraph=U.simplify=U.addDummyNode=void 0;var F=z(8273),j=z(67858),B=function(X,Y){return Number(X)-Number(Y)},L=function(X,Y,Z,J){var it;do it="".concat(J).concat(Math.random());while(X.hasNode(it));return Z.dummy=Y,X.setNode(it,Z),it};U.addDummyNode=L;var k=function(X){var Y=new j.Graph().setGraph(X.graph());return X.nodes().forEach(function(Z){Y.setNode(Z,X.node(Z))}),X.edges().forEach(function(Z){var J=Y.edgeFromArgs(Z.v,Z.w)||{weight:0,minlen:1},it=X.edge(Z);Y.setEdge(Z.v,Z.w,{weight:J.weight+it.weight,minlen:Math.max(J.minlen,it.minlen)})}),Y};U.simplify=k;var D=function(X){var Y=new j.Graph({multigraph:X.isMultigraph()}).setGraph(X.graph());return X.nodes().forEach(function(Z){var J;!((J=X.children(Z))===null||J===void 0)&&J.length||Y.setNode(Z,X.node(Z))}),X.edges().forEach(function(Z){Y.setEdgeObj(Z,X.edge(Z))}),Y};U.asNonCompoundGraph=D;var w=function(X,Y){return X==null?void 0:X.reduce(function(Z,J,it){return Z[J]=Y[it],Z},{})};U.zipObject=w;var b=function(X){var Y={};return X.nodes().forEach(function(Z){var J,it={};(J=X.outEdges(Z))===null||J===void 0||J.forEach(function(tt){var ut;it[tt.w]=(it[tt.w]||0)+(((ut=X.edge(tt))===null||ut===void 0?void 0:ut.weight)||0)}),Y[Z]=it}),Y};U.successorWeights=b;var g=function(X){var Y=X.nodes(),Z=Y.map(function(J){var it,tt={};return(it=X.inEdges(J))===null||it===void 0||it.forEach(function(ut){tt[ut.v]=(tt[ut.v]||0)+X.edge(ut).weight}),tt});return(0,U.zipObject)(Y,Z)};U.predecessorWeights=g;var y=function(X,Y){var Z=Number(X.x),J=Number(X.y),it=Number(Y.x)-Z,tt=Number(Y.y)-J,ut=Number(X.width)/2,vt=Number(X.height)/2;if(!it&&!tt)return{x:0,y:0};var pt,Dt;return Math.abs(tt)*ut>Math.abs(it)*vt?(tt<0&&(vt=-vt),pt=vt*it/tt,Dt=vt):(it<0&&(ut=-ut),pt=ut,Dt=ut*tt/it),{x:Z+pt,y:J+Dt}};U.intersectRect=y;var d=function(X){for(var Y=[],Z=(0,U.maxRank)(X)+1,J=0;J<Z;J++)Y.push([]);X.nodes().forEach(function(it){var tt=X.node(it);if(tt){var ut=tt.rank;ut!==void 0&&Y[ut]&&Y[ut].push(it)}});for(var J=0;J<Z;J++)Y[J]=Y[J].sort(function(tt,ut){var vt,pt;return B((vt=X.node(tt))===null||vt===void 0?void 0:vt.order,(pt=X.node(ut))===null||pt===void 0?void 0:pt.order)});return Y};U.buildLayerMatrix=d;var S=function(X){var Y=X.nodes().filter(function(J){var it;return((it=X.node(J))===null||it===void 0?void 0:it.rank)!==void 0}).map(function(J){return X.node(J).rank}),Z=Math.min.apply(Math,Y);X.nodes().forEach(function(J){var it=X.node(J);it.hasOwnProperty("rank")&&Z!==1/0&&(it.rank-=Z)})};U.normalizeRanks=S;var _=function(X){var Y=X.nodes(),Z=Y.filter(function(Dt){var Ot;return((Ot=X.node(Dt))===null||Ot===void 0?void 0:Ot.rank)!==void 0}).map(function(Dt){return X.node(Dt).rank}),J=Math.min.apply(Math,Z),it=[];Y.forEach(function(Dt){var Ot,te=(((Ot=X.node(Dt))===null||Ot===void 0?void 0:Ot.rank)||0)-J;it[te]||(it[te]=[]),it[te].push(Dt)});for(var tt=0,ut=X.graph().nodeRankFactor||0,vt=0;vt<it.length;vt++){var pt=it[vt];pt===void 0?vt%ut!==0&&(tt-=1):tt&&(pt==null||pt.forEach(function(Dt){var Ot=X.node(Dt);Ot&&(Ot.rank=Ot.rank||0,Ot.rank+=tt)}))}};U.removeEmptyRanks=_;var E=function(X,Y,Z,J){var it={width:0,height:0};return(0,F.isNumber)(Z)&&(0,F.isNumber)(J)&&(it.rank=Z,it.order=J),(0,U.addDummyNode)(X,"border",it,Y)};U.addBorderNode=E;var I=function(X){var Y;return X.nodes().forEach(function(Z){var J,it=(J=X.node(Z))===null||J===void 0?void 0:J.rank;it!==void 0&&(Y===void 0||it>Y)&&(Y=it)}),Y||(Y=0),Y};U.maxRank=I;var P=function(X,Y){var Z={lhs:[],rhs:[]};return X==null||X.forEach(function(J){Y(J)?Z.lhs.push(J):Z.rhs.push(J)}),Z};U.partition=P;var N=function(X,Y){var Z=Date.now();try{return Y()}finally{console.log("".concat(X," time: ").concat(Date.now()-Z,"ms"))}};U.time=N;var H=function(X,Y){return Y()};U.notime=H;var nt=function(X,Y){return X.reduce(function(Z,J){var it=Y(Z),tt=Y(J);return it>tt?J:Z})};U.minBy=nt},77620:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var b=function(g,y){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,S){d.__proto__=S}||function(d,S){for(var _ in S)Object.prototype.hasOwnProperty.call(S,_)&&(d[_]=S[_])},b(g,y)};return function(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");b(g,y);function d(){this.constructor=g}g.prototype=y===null?Object.create(y):(d.prototype=y.prototype,new d)}}(),j=this&&this.__assign||function(){return j=Object.assign||function(b){for(var g,y=1,d=arguments.length;y<d;y++){g=arguments[y];for(var S in g)Object.prototype.hasOwnProperty.call(g,S)&&(b[S]=g[S])}return b},j.apply(this,arguments)},B=this&&this.__spreadArray||function(b,g,y){if(y||arguments.length===2)for(var d=0,S=g.length,_;d<S;d++)(_||!(d in g))&&(_||(_=Array.prototype.slice.call(g,0,d)),_[d]=g[d]);return b.concat(_||Array.prototype.slice.call(g))};Object.defineProperty(U,"__esModule",{value:!0}),U.DagreCompoundLayout=void 0;var L=z(46253),k=z(31969),D=z(8273),w=function(b){F(g,b);function g(y){var d=b.call(this)||this;return d.rankdir="TB",d.nodesep=50,d.edgesep=5,d.ranksep=50,d.controlPoints=!0,d.anchorPoint=!0,d.nodes=[],d.edges=[],d.combos=[],d.onLayoutEnd=function(){},d.updateCfg(y),d}return g.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},g.prototype.init=function(y){var d=y.hiddenNodes||[],S=y.hiddenEdges||[],_=y.hiddenCombos||[];this.nodes=this.getDataByOrder((y.nodes||[]).concat(d)),this.edges=this.getDataByOrder((y.edges||[]).concat(S)),this.combos=(y.combos||[]).concat(_.map(function(E){return j(j({},E),{collapsed:!0})}))},g.prototype.execute=function(){var y=this,d=y.nodes,S=y.edges;if(d){var _=y.getLayoutConfig(),E=_.graphDef,I=_.graphOption,P=_.graphSettings,N=(0,k.buildGraph)(E,I,P),H=(0,k.flatGraph)(N,!0);return this.updatePosition(H),y.onLayoutEnd&&y.onLayoutEnd(),{nodes:d,edges:S}}},g.prototype.getNodePath=function(y){var d=this,S=d.nodes,_=d.combos,E=S.find(function(P){return P.id===y}),I=function(P,N){N===void 0&&(N=[]);var H=_.find(function(nt){return nt.id===P});return H?(N.unshift(P),H.parentId?I(H.parentId,N):N):N};return E&&E.comboId?I(E.comboId,[y]):[y]},g.prototype.getLayoutConfig=function(){var y,d,S,_=this,E=_.nodes,I=_.edges,P=_.combos,N=_.nodeSize,H=_.rankdir,nt=_.align,X=_.edgesep,Y=_.nodesep,Z=_.ranksep,J=_.settings,it=(P||[]).reduce(function(Vt,Me){var Wt=E.filter(function(he){return he.comboId===Me.id}).map(function(he){return he.id}),ae=(P||[]).filter(function(he){return he.parentId===Me.id}).map(function(he){return he.id});return(Wt.length||ae.length)&&(Vt[Me.id]=B(B([],Wt,!0),ae,!0)),Vt},{}),tt;N?(0,D.isArray)(N)?tt=function(){return N}:tt=function(){return[N,N]}:tt=function(Vt){return Vt&&Vt.size?(0,D.isArray)(Vt.size)?Vt.size:(0,D.isObject)(Vt.size)?[Vt.size.width||40,Vt.size.height||40]:[Vt.size,Vt.size]:[40,40]};var ut=function(Vt){return Vt&&Vt.size?(0,D.isArray)(Vt.size)?Vt.size:[Vt.size,Vt.size]:[80,40]},vt=ut(P==null?void 0:P[0]),pt=vt[0],Dt=vt[1],Ot=(d=(y=_.graphSettings)===null||y===void 0?void 0:y.subScene)===null||d===void 0?void 0:d.meta,te=((S=P.find(function(Vt){return!Vt.collapsed}))===null||S===void 0?void 0:S.padding)||[20,20,20,20],Gt=te[0],K=te[1],p=te[2],at=te[3],ht={compound:it,nodes:B([],(E||[]).map(function(Vt){var Me=tt(Vt),Wt=Me[0],ae=Me[1];return j(j({},Vt),{width:Wt,height:ae})}),!0),edges:B([],(I||[]).map(function(Vt){return j(j({},Vt),{v:Vt.source,w:Vt.target})}),!0)},wt={expanded:(P||[]).filter(function(Vt){return!Vt.collapsed}).map(function(Vt){return Vt.id})},Mt={graph:{meta:{align:nt,rankDir:H,nodeSep:Y,edgeSep:X,rankSep:Z}},subScene:{meta:{paddingTop:Gt||(Ot==null?void 0:Ot.paddingTop)||20,paddingRight:K||(Ot==null?void 0:Ot.paddingRight)||20,paddingBottom:p||(Ot==null?void 0:Ot.paddingBottom)||20,paddingLeft:at||(Ot==null?void 0:Ot.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:pt,height:Dt}}},Ut=(0,k.mergeConfig)(J,j({},(0,k.mergeConfig)(Mt,k.LAYOUT_CONFIG)));return _.graphSettings=Ut,{graphDef:ht,graphOption:wt,graphSettings:Ut}},g.prototype.updatePosition=function(y){var d=y.nodes,S=y.edges;this.updateNodePosition(d,S),this.updateEdgePosition(d,S)},g.prototype.getBegin=function(y,d){var S=this,_=S.begin,E=[0,0];if(_){var I=1/0,P=1/0;y.forEach(function(N){I>N.x&&(I=N.x),P>N.y&&(P=N.y)}),d.forEach(function(N){N.points.forEach(function(H){I>H.x&&(I=H.x),P>H.y&&(P=H.y)})}),E[0]=_[0]-I,E[1]=_[1]-P}return E},g.prototype.updateNodePosition=function(y,d){var S=this,_=S.combos,E=S.nodes,I=S.edges,P=S.anchorPoint,N=S.graphSettings,H=this.getBegin(y,d);y.forEach(function(nt){var X,Y=nt.x,Z=nt.y,J=nt.id,it=nt.type,tt=nt.coreBox;if(it===k.HierarchyNodeType.META&&J!==k.ROOT_NAME){var ut=_.findIndex(function(te){return te.id===J}),vt=(X=N==null?void 0:N.subScene)===null||X===void 0?void 0:X.meta;_[ut].offsetX=Y+H[0],_[ut].offsetY=Z+H[1],_[ut].fixSize=[tt.width,tt.height],_[ut].fixCollapseSize=[tt.width,tt.height],nt.expanded?_[ut].padding=[vt==null?void 0:vt.paddingTop,vt==null?void 0:vt.paddingRight,vt==null?void 0:vt.paddingBottom,vt==null?void 0:vt.paddingLeft]:_[ut].padding=[0,0,0,0]}else if(it===k.HierarchyNodeType.OP){var ut=E.findIndex(function(Gt){return Gt.id===J});if(E[ut].x=Y+H[0],E[ut].y=Z+H[1],P){var pt=[],Dt=d.filter(function(Gt){return Gt.v===J}),Ot=d.filter(function(Gt){return Gt.w===J});Dt.length>0&&Dt.forEach(function(Gt){var K=Gt.points[0],p=(K.x-Y)/nt.width+.5,at=(K.y-Z)/nt.height+.5;pt.push([p,at]),Gt.baseEdgeList.forEach(function(ht){var wt=I.find(function(Mt){return Mt.source===ht.v&&Mt.target===ht.w});wt&&(wt.sourceAnchor=pt.length-1)})}),Ot.length>0&&Ot.forEach(function(Gt){var K=Gt.points[Gt.points.length-1],p=(K.x-Y)/nt.width+.5,at=(K.y-Z)/nt.height+.5;pt.push([p,at]),Gt.baseEdgeList.forEach(function(ht){var wt=I.find(function(Mt){return Mt.source===ht.v&&Mt.target===ht.w});wt&&(wt.targetAnchor=pt.length-1)})}),E[ut].anchorPoints=pt.length>0?pt:E[ut].anchorPoints||[]}}})},g.prototype.updateEdgePosition=function(y,d){var S=this,_=S.combos,E=S.edges,I=S.controlPoints,P=this.getBegin(y,d);I&&(_.forEach(function(N){N.inEdges=[],N.outEdges=[]}),E.forEach(function(N){var H,nt,X,Y,Z=y.find(function(te){return te.id===N.source}),J=y.find(function(te){return te.id===N.target}),it=[],tt=[];if(Z&&J)tt=(0,k.getEdges)(Z==null?void 0:Z.id,J==null?void 0:J.id,y);else if(!Z||!J){var ut=S.getNodePath(N.source),vt=S.getNodePath(N.target),pt=ut.reverse().slice(Z?0:1).find(function(te){return y.find(function(Gt){return Gt.id===te})}),Dt=vt.reverse().slice(J?0:1).find(function(te){return y.find(function(Gt){return Gt.id===te})});Z=y.find(function(te){return te.id===pt}),J=y.find(function(te){return te.id===Dt}),tt=(0,k.getEdges)(Z==null?void 0:Z.id,J==null?void 0:J.id,y,{v:N.source,w:N.target})}if(it=tt.reduce(function(te,Gt){return B(B([],te,!0),Gt.points.map(function(K){return j(j({},K),{x:K.x+P[0],y:K.y+P[1]})}),!0)},[]),it=it.slice(1,-1),N.controlPoints=it,(J==null?void 0:J.type)===k.NodeType.META){var Ot=_.findIndex(function(te){return te.id===(J==null?void 0:J.id)});if(!_[Ot]||!((H=_[Ot].inEdges)===null||H===void 0)&&H.some(function(te){return te.source===Z.id&&te.target===J.id}))return;(nt=_[Ot].inEdges)===null||nt===void 0||nt.push({source:Z.id,target:J.id,controlPoints:it})}if((Z==null?void 0:Z.type)===k.NodeType.META){var Ot=_.findIndex(function(Gt){return Gt.id===(Z==null?void 0:Z.id)});if(!_[Ot]||!((X=_[Ot].outEdges)===null||X===void 0)&&X.some(function(Gt){return Gt.source===Z.id&&Gt.target===J.id}))return;(Y=_[Ot].outEdges)===null||Y===void 0||Y.push({source:Z.id,target:J.id,controlPoints:it})}}))},g.prototype.getType=function(){return"dagreCompound"},g.prototype.getDataByOrder=function(y){return y.every(function(d){return d.layoutOrder!==void 0})||y.forEach(function(d,S){d.layoutOrder=S}),y.sort(function(d,S){return d.layoutOrder-S.layoutOrder})},g}(L.Base);U.DagreCompoundLayout=w},29279:function(xr,U,z){"use strict";var F=this&&this.__assign||function(){return F=Object.assign||function(d){for(var S,_=1,E=arguments.length;_<E;_++){S=arguments[_];for(var I in S)Object.prototype.hasOwnProperty.call(S,I)&&(d[I]=S[I])}return d},F.apply(this,arguments)},j=this&&this.__createBinding||(Object.create?function(d,S,_,E){E===void 0&&(E=_);var I=Object.getOwnPropertyDescriptor(S,_);(!I||("get"in I?!S.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return S[_]}}),Object.defineProperty(d,E,I)}:function(d,S,_,E){E===void 0&&(E=_),d[E]=S[_]}),B=this&&this.__setModuleDefault||(Object.create?function(d,S){Object.defineProperty(d,"default",{enumerable:!0,value:S})}:function(d,S){d.default=S}),L=this&&this.__importStar||function(d){if(d&&d.__esModule)return d;var S={};if(d!=null)for(var _ in d)_!=="default"&&Object.prototype.hasOwnProperty.call(d,_)&&j(S,d,_);return B(S,d),S},k=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(U,"__esModule",{value:!0});var D=L(z(86880)),w=k(z(28563)),b=k(z(77280)),g=z(2);function y(d,S){var _=d.nodes,E=d.edges,I=S.width,P=S.height;if(!(_!=null&&_.length))return Promise.resolve();var N=[];_.forEach(function(tt){var ut=E.filter(function(pt){return pt.source===tt.id||pt.target===tt.id});if(ut.length>1){var vt=F({},tt);delete vt.size,N.push(vt)}});var H=[];E.forEach(function(tt){var ut=N.find(function(pt){return pt.id===tt.source}),vt=N.find(function(pt){return pt.id===tt.target});ut&&vt&&H.push(tt)});var nt=new g.DagreLayout({type:"dagre",ranksep:S.nodeMinGap,nodesep:S.nodeMinGap}),X=nt.layout({nodes:N,edges:H}).nodes;_.forEach(function(tt){var ut=(X||[]).find(function(vt){return vt.id===tt.id});tt.x=(ut==null?void 0:ut.x)||I/2,tt.y=(ut==null?void 0:ut.y)||P/2});var Y=JSON.parse(JSON.stringify(_)),Z=JSON.parse(JSON.stringify(E)),J=D.forceSimulation().nodes(Y).force("link",D.forceLink(Z).id(function(tt){return tt.id}).distance(function(tt){var ut=H.find(function(vt){return vt.source===tt.source&&vt.target===tt.target});return ut?30:20})).force("charge",D.forceManyBody()).force("center",D.forceCenter(I/2,P/2)).force("x",D.forceX(I/2)).force("y",D.forceY(P/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),it=new Promise(function(tt){J.on("end",function(){_.forEach(function(Gt){var K=Y.find(function(p){return p.id===Gt.id});K&&(Gt.x=K.x,Gt.y=K.y)});var ut=Math.min.apply(Math,_.map(function(Gt){return Gt.x})),vt=Math.max.apply(Math,_.map(function(Gt){return Gt.x})),pt=Math.min.apply(Math,_.map(function(Gt){return Gt.y})),Dt=Math.max.apply(Math,_.map(function(Gt){return Gt.y})),Ot=I/(vt-ut),te=P/(Dt-pt);_.forEach(function(Gt){Gt.x!==void 0&&Ot<1&&(Gt.x=(Gt.x-ut)*Ot),Gt.y!==void 0&&te<1&&(Gt.y=(Gt.y-pt)*te)}),_.forEach(function(Gt){Gt.sizeTemp=Gt.size,Gt.size=[10,10]}),(0,b.default)(_,E),_.forEach(function(Gt){Gt.size=Gt.sizeTemp||[],delete Gt.sizeTemp}),(0,w.default)({nodes:_,edges:E},S),tt()})});return it}U.default=y},28563:function(xr,U,z){"use strict";var F=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(U,"__esModule",{value:!0});var j=F(z(62120));function B(L,k){if(!L.nodes||L.nodes.length===0)return L;var D=k.width,w=k.height,b=k.nodeMinGap,g=1e4,y=1e4;L.nodes.forEach(function(Z){var J=Z.size[0]||50,it=Z.size[1]||50;g=Math.min(J,g),y=Math.min(it,y)});var d=new j.default;d.init(D,w,{CELL_H:y,CELL_W:g}),L.nodes.forEach(function(Z){var J=d.occupyNearest(Z);J&&(J.node={id:Z.id,size:Z.size},Z.x=J.x,Z.y=J.y,Z.dx=J.dx,Z.dy=J.dy)});for(var S=0;S<L.nodes.length;S++){var _=L.nodes[S],E=d.findGridByNodeId(_.id);if(!E)throw new Error("can not find node cell");var I=E.column,P=E.row;if(_.size[0]+b>g){for(var N=Math.ceil((_.size[0]+b)/g)-1,H=N,nt=0;nt<N;nt++){var X=d.additionColumn.indexOf(I+nt+1)>-1;if(X&&!d.cells[I+nt+1][P].node)H--;else break}d.insertColumn(I,H)}if(_.size[1]+b>y){for(var N=Math.ceil((_.size[1]+b)/y)-1,H=N,nt=0;nt<N;nt++){var X=d.additionRow.indexOf(P+nt+1)>-1;if(X&&!d.cells[I][P+nt+1].node)H--;else break}d.insertRow(P,H)}}for(var S=0;S<d.columnNum;S++)for(var Y=function(J){var it=d.cells[S][J];if(it.node){var tt=L.nodes.find(function(ut){var vt;return ut.id===((vt=it==null?void 0:it.node)===null||vt===void 0?void 0:vt.id)});tt&&(tt.x=it.x+tt.size[0]/2,tt.y=it.y+tt.size[1]/2)}},nt=0;nt<d.rowNum;nt++)Y(nt)}U.default=B},62120:function(xr,U){"use strict";var z=this&&this.__assign||function(){return z=Object.assign||function(j){for(var B,L=1,k=arguments.length;L<k;L++){B=arguments[L];for(var D in B)Object.prototype.hasOwnProperty.call(B,D)&&(j[D]=B[D])}return j},z.apply(this,arguments)};Object.defineProperty(U,"__esModule",{value:!0});var F=function(){function j(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return j.prototype.init=function(B,L,k){this.cells=[],this.CELL_W=k.CELL_W||j.DEFAULT_CELL_W,this.CELL_H=k.CELL_H||j.DEFAULT_CELL_H,this.columnNum=Math.ceil(B/this.CELL_W),this.rowNum=Math.ceil(L/this.CELL_H),j.MIN_DIST=Math.pow(B,2)+Math.pow(L,2);for(var D=0;D<this.columnNum;D++){for(var w=[],b=0;b<this.rowNum;b++){var g={dx:D,dy:b,x:D*this.CELL_W,y:b*this.CELL_H,occupied:!1};w.push(g)}this.cells.push(w)}},j.prototype.findGridByNodeId=function(B){for(var L,k,D=0;D<this.columnNum;D++)for(var w=0;w<this.rowNum;w++)if(this.cells[D][w].node&&((k=(L=this.cells[D][w])===null||L===void 0?void 0:L.node)===null||k===void 0?void 0:k.id)===B)return{column:D,row:w};return null},j.prototype.sqdist=function(B,L){return Math.pow(B.x-L.x,2)+Math.pow(B.y-L.y,2)},j.prototype.occupyNearest=function(B){for(var L=j.MIN_DIST,k,D=null,w=0;w<this.columnNum;w++)for(var b=0;b<this.rowNum;b++)!this.cells[w][b].occupied&&(k=this.sqdist(B,this.cells[w][b]))<L&&(L=k,D=this.cells[w][b]);return D&&(D.occupied=!0),D},j.prototype.insertColumn=function(B,L){if(!(L<=0)){for(var k=0;k<L;k++){this.cells[k+this.columnNum]=[];for(var D=0;D<this.rowNum;D++)this.cells[k+this.columnNum][D]={dx:k,dy:D,x:k*this.CELL_W,y:D*this.CELL_H,occupied:!1,node:null}}for(var k=this.columnNum-1;k>B;k--)for(var D=0;D<this.rowNum;D++)this.cells[k+L][D]=z(z({},this.cells[k][D]),{x:(k+L)*this.CELL_W,y:D*this.CELL_H}),this.cells[k][D]={x:k*this.CELL_W,y:D*this.CELL_H,occupied:!0,node:null};for(var D=0;D<this.additionColumn.length;D++)this.additionColumn[D]>=B&&(this.additionColumn[D]+=L);for(var k=0;k<L;k++)this.additionColumn.push(B+k+1);this.columnNum+=L}},j.prototype.insertRow=function(B,L){if(!(L<=0)){for(var k=0;k<L;k++)for(var D=0;D<this.columnNum;D++)this.cells[D][k+this.rowNum]={dx:D,dy:k,x:D*this.CELL_W,y:k*this.CELL_H,occupied:!1,node:null};for(var D=0;D<this.columnNum;D++)for(var k=this.rowNum-1;k>B;k--)this.cells[D][k+L]=z(z({},this.cells[D][k]),{dx:D,dy:k+L,x:D*this.CELL_W,y:(k+L)*this.CELL_H}),this.cells[D][k]={dx:D,dy:k,x:D*this.CELL_W,y:k*this.CELL_H,occupied:!1,node:null};for(var k=0;k<this.additionRow.length;k++)this.additionRow[k]>=B&&(this.additionRow[k]+=L);for(var D=0;D<L;D++)this.additionRow.push(B+D+1);this.rowNum+=L}},j.prototype.getNodes=function(){for(var B=[],L=0;L<this.columnNum;L++)for(var k=0;k<this.rowNum;k++)this.cells[L][k].node&&B.push(this.cells[L][k]);return B},j.MIN_DIST=50,j.DEFAULT_CELL_W=80,j.DEFAULT_CELL_H=80,j}();U.default=F},40311:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var D=function(w,b){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var d in y)Object.prototype.hasOwnProperty.call(y,d)&&(g[d]=y[d])},D(w,b)};return function(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");D(w,b);function g(){this.constructor=w}w.prototype=b===null?Object.create(b):(g.prototype=b.prototype,new g)}}(),j=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(U,"__esModule",{value:!0}),U.ERLayout=void 0;var B=z(46253),L=j(z(29279)),k=function(D){F(w,D);function w(b){var g=D.call(this)||this;return g.width=300,g.height=300,g.nodeMinGap=50,g.onLayoutEnd=function(){},b&&g.updateCfg(b),g}return w.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},w.prototype.execute=function(){var b=this,g=b.nodes,y=b.edges;return g==null||g.forEach(function(d){d.size||(d.size=[50,50])}),(0,L.default)({nodes:g,edges:y},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){b.onLayoutEnd&&b.onLayoutEnd()})},w.prototype.getType=function(){return"er"},w}(B.Base);U.ERLayout=k},77280:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var z=1200,F=800,j=1e7,B=10,L=3.141592653589793,k=1.5707963267948966,D=L*.375,w=L*.625,b=new Map,g=10,y=10,d=.8,S=.1,_=.5;function E(Y,Z,J){var it=Y.x-Y.size[0]/2,tt=Y.y-Y.size[1]/2,ut=Y.x+Y.size[0]/2,vt=Y.y+Y.size[1]/2,pt=Z.x-Z.size[0]/2,Dt=Z.y-Z.size[1]/2,Ot=Z.x+Z.size[0]/2,te=Z.y+Z.size[1]/2,Gt=Y.x,K=Y.y,p=Z.x,at=Z.y,ht=p-Gt,wt=Math.atan2(ht,at-K),Mt=0,Ut=0,Vt=0,Me=0;wt>k?(Ut=tt-te,Mt=pt-ut,Vt=parseFloat(Ut?(Ut/Math.cos(wt)).toFixed(2):Mt.toFixed(2)),Me=parseFloat(Mt?(Mt/Math.sin(wt)).toFixed(2):Ut.toFixed(2))):0<wt&&wt<=k?(Ut=Dt-vt,Mt=pt-ut,Ut>Mt?Vt=Me=parseFloat(Ut?(Ut/Math.cos(wt)).toFixed(2):Mt.toFixed(2)):Vt=Me=parseFloat(Mt?(Mt/Math.sin(wt)).toFixed(2):Ut.toFixed(2))):wt<-k?(Ut=tt-te,Mt=-(Ot-it),Ut>Mt?Vt=Me=parseFloat(Ut?(Ut/Math.cos(wt)).toFixed(2):Mt.toFixed(2)):Vt=Me=parseFloat(Mt?(Mt/Math.sin(wt)).toFixed(2):Ut.toFixed(2))):(Ut=Dt-vt,Math.abs(ht)>(ut-it)/2?Mt=it-Ot:Mt=ht,Ut>Mt?Vt=Me=parseFloat(Ut?(Ut/Math.cos(wt)).toFixed(2):Mt.toFixed(2)):Vt=Me=parseFloat(Mt&&wt!==0?(Mt/Math.sin(wt)).toFixed(2):Ut.toFixed(2)));var Wt=parseFloat(wt.toFixed(2)),ae=J;return J&&(ae=D<Wt&&Wt<w),{distance:Math.abs(Vt<Me?Vt:Me),isHoriz:ae}}function I(Y,Z){var J=b.get(Y.id)||[],it=J.find(function(se){return se.source===Z.id||se.target===Z.id}),tt=Y.size[0]*Y.size[1],ut=Z.size[0]*Z.size[1],vt=tt>ut?Z:Y,pt=tt>ut?Y:Z,Dt=vt.x-vt.size[0]/2,Ot=vt.y-vt.size[1]/2,te=vt.x+vt.size[0]/2,Gt=vt.y+vt.size[1]/2,K=pt.x-pt.size[0]/2,p=pt.y-pt.size[1]/2,at=pt.x+pt.size[0]/2,ht=pt.y+pt.size[1]/2,wt=vt.x,Mt=vt.y,Ut=pt.x,Vt=pt.y,Me=te>=K&&at>=Dt&&Gt>=p&&ht>=Ot,Wt=0,ae=0;if(Me){ae=Math.sqrt(Math.pow(Ut-wt,2)+Math.pow(Vt-Mt,2));var he=Dt>K?Dt:K,Se=Ot>p?Ot:p,xe=te<at?te:at,Bt=Gt<ht?Gt:ht,fe=xe-he,Le=Bt-Se,jt=fe*Le;ae===0&&(ae=1e-7),Wt=B*1/ae*100+jt,Wt*=j}else{var oe=!1,Te=E(vt,pt,oe);ae=Te.distance,oe=Te.isHoriz,ae<=B?ae!==0?it?Wt+=B+j*1/ae:Wt+=B+j*B/ae:Wt+=j:(Wt+=ae,it&&(Wt+=ae*ae))}return Wt}function P(Y){for(var Z=0,J=0;J<Y.length;J++){var it=Y[J];(it.x<0||it.y<0||it.x>z||it.y>F)&&(Z+=1e12);for(var tt=J+1;tt<Y.length;tt++)Z+=I(it,Y[tt])}return Z}function N(Y,Z,J,it){var tt=new Map;J.forEach(function(wt,Mt){tt.set(wt.id,wt)});var ut=it.filter(function(wt){return wt.source===Y.id||wt.target===Y.id})||[],vt=[];ut.forEach(function(wt){var Mt=wt.source===Y.id?wt.target:wt.source,Ut=tt.get(Mt);Ut&&vt.push(Ut)});for(var pt=!0,Dt=0;Dt<vt.length;Dt++){var Ot=vt[Dt],te=Math.atan((Y.y-Ot.y)/(Ot.x-Y.y))*180,Gt=Math.atan((Z.y-Ot.y)/(Ot.x-Z.y))*180,K=te<30||te>150,p=Gt<30||Gt>150,at=te>70&&te<110,ht=Gt>70&&Gt<110;if(K&&!p||te*Gt<0){pt=!1;break}else if(at&&!ht||te*Gt<0){pt=!1;break}else if((Ot.x-Y.x)*(Ot.x-Z.x)<0){pt=!1;break}else if((Ot.y-Y.y)*(Ot.y-Z.y)<0){pt=!1;break}}return pt}function H(Y,Z){for(var J=!1,it=1,tt=g*it,ut=y*it,vt=[tt,-tt,0,0],pt=[0,0,ut,-ut],Dt=0;Dt<Y.length;++Dt)for(var Ot=Y[Dt],te=nt(Ot,Y),Gt=0;Gt<vt.length;Gt++){var K=N(Ot,{x:Ot.x+vt[Gt],y:Ot.y+pt[Gt]},Y,Z);if(K){Ot.x+=vt[Gt],Ot.y+=pt[Gt];var p=nt(Ot,Y),at=Math.random();p<te||at<d&&at>S?(te=p,J=!0):(Ot.x-=vt[Gt],Ot.y-=pt[Gt])}}return d>S&&(d*=_),J?P(Y):0}function nt(Y,Z){var J=0;(Y.x<0||Y.y<0||Y.x+Y.size[0]+20>z||Y.y+Y.size[1]+20>F)&&(J+=1e12);for(var it=0;it<Z.length;++it)Y.id!==Z[it].id&&(J+=I(Y,Z[it]));return J}function X(Y,Z){if(Y.length===0)return{nodes:Y,edges:Z};Y.forEach(function(Ot){var te=Z.filter(function(Gt){return Gt.source===Ot.id||Gt.target===Ot.id});b.set(Ot,te)}),Y.sort(function(Ot,te){var Gt,K;return((Gt=b.get(Ot.id))===null||Gt===void 0?void 0:Gt.length)-((K=b.get(te.id))===null||K===void 0?void 0:K.length)});for(var J=P(Y),it=20,tt=1,ut=0,vt=50,pt=0;it>0&&(pt++,!(pt>=vt));){var Dt=H(Y,Z);Dt!==0&&(ut=Dt),tt=ut-J,J=ut,tt===0?--it:it=20}return Y.forEach(function(Ot){Ot.x=Ot.x-Ot.size[0]/2,Ot.y=Ot.y-Ot.size[1]/2}),{nodes:Y,edges:Z}}U.default=X},92681:function(xr,U,z){"use strict";var F=this&&this.__createBinding||(Object.create?function(w,b,g,y){y===void 0&&(y=g);var d=Object.getOwnPropertyDescriptor(b,g);(!d||("get"in d?!b.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return b[g]}}),Object.defineProperty(w,y,d)}:function(w,b,g,y){y===void 0&&(y=g),w[y]=b[g]}),j=this&&this.__setModuleDefault||(Object.create?function(w,b){Object.defineProperty(w,"default",{enumerable:!0,value:b})}:function(w,b){w.default=b}),B=this&&this.__importStar||function(w){if(w&&w.__esModule)return w;var b={};if(w!=null)for(var g in w)g!=="default"&&Object.prototype.hasOwnProperty.call(w,g)&&F(b,w,g);return j(b,w),b};Object.defineProperty(U,"__esModule",{value:!0});var L=B(z(86880)),k=z(8273);function D(){function w(Bt){return function(){return Bt}}var b=function(Bt){return Bt.cluster},g=w(1),y=w(-1),d=w(100),S=w(.1),_=[0,0],E=[],I={},P=[],N=100,H=100,nt={none:{x:0,y:0}},X=[],Y,Z="force",J=!0,it=.1;function tt(Bt){if(!J)return tt;Y.tick(),te();for(var fe=0,Le=E.length,jt=void 0,oe=Bt*it;fe<Le;++fe)jt=E[fe],jt.vx+=(nt[b(jt)].x-jt.x)*oe,jt.vy+=(nt[b(jt)].y-jt.y)*oe}function ut(){E&&vt()}function vt(){if(!(!E||!E.length)){if(b(E[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Bt=pt();Y=L.forceSimulation(Bt.nodes).force("x",L.forceX(N).strength(.1)).force("y",L.forceY(H).strength(.1)).force("collide",L.forceCollide(function(fe){return fe.r}).iterations(4)).force("charge",L.forceManyBody().strength(y)).force("links",L.forceLink(Bt.nodes.length?Bt.links:[]).distance(d).strength(S)),X=Y.nodes(),te()}}function pt(){var Bt=[],fe=[],Le={},jt=[],oe={},Te=[];return oe=Dt(E),Te=Ot(P),jt=Object.keys(oe),jt.forEach(function(se,Ie){var Pe=oe[se];Bt.push({id:se,size:Pe.count,r:Math.sqrt(Pe.sumforceNodeSize/Math.PI)}),Le[se]=Ie}),Te.forEach(function(se){var Ie=(0,k.getEdgeTerminal)(se,"source"),Pe=(0,k.getEdgeTerminal)(se,"target"),Lt=Le[Ie],Je=Le[Pe];Lt!==void 0&&Je!==void 0&&fe.push({source:Lt,target:Je,count:se.count})}),{nodes:Bt,links:fe}}function Dt(Bt){var fe={};return Bt.forEach(function(Le){var jt=b(Le);fe[jt]||(fe[jt]={count:0,sumforceNodeSize:0})}),Bt.forEach(function(Le){var jt=b(Le),oe=g(Le),Te=fe[jt];Te.count=Te.count+1,Te.sumforceNodeSize=Te.sumforceNodeSize+Math.PI*(oe*oe)*1.3,fe[jt]=Te}),fe}function Ot(Bt){var fe={},Le=[];Bt.forEach(function(oe){var Te=Gt(oe),se=0;fe[Te]!==void 0&&(se=fe[Te]),se+=1,fe[Te]=se});var jt=Object.entries(fe);return jt.forEach(function(oe){var Te=oe[0],se=oe[1],Ie=Te.split("~")[0],Pe=Te.split("~")[1];Ie!==void 0&&Pe!==void 0&&Le.push({source:Ie,target:Pe,count:se})}),Le}function te(){return nt={none:{x:0,y:0}},X.forEach(function(Bt){nt[Bt.id]={x:Bt.x-_[0],y:Bt.y-_[1]}}),nt}function Gt(Bt){var fe=(0,k.getEdgeTerminal)(Bt,"source"),Le=(0,k.getEdgeTerminal)(Bt,"target"),jt=b(I[fe]),oe=b(I[Le]);return jt<=oe?"".concat(jt,"~").concat(oe):"".concat(oe,"~").concat(jt)}function K(Bt){I={},Bt.forEach(function(fe){I[fe.id]=fe})}function p(Bt){return arguments.length?(Z=Bt,ut(),tt):Z}function at(Bt){return arguments.length?typeof Bt=="string"?(b=function(fe){return fe[Bt]},tt):(b=Bt,tt):b}function ht(Bt){return arguments.length?(J=Bt,tt):J}function wt(Bt){return arguments.length?(it=Bt,tt):it}function Mt(Bt){return arguments.length?(N=Bt,tt):N}function Ut(Bt){return arguments.length?(H=Bt,tt):H}function Vt(Bt){return arguments.length?(K(Bt||[]),E=Bt||[],tt):E}function Me(Bt){return arguments.length?(P=Bt||[],ut(),tt):P}function Wt(Bt){return arguments.length?(typeof Bt=="function"?g=Bt:g=w(+Bt),ut(),tt):g}function ae(Bt){return arguments.length?(typeof Bt=="function"?y=Bt:y=w(+Bt),ut(),tt):y}function he(Bt){return arguments.length?(typeof Bt=="function"?d=Bt:d=w(+Bt),ut(),tt):d}function Se(Bt){return arguments.length?(typeof Bt=="function"?S=Bt:S=w(+Bt),ut(),tt):S}function xe(Bt){return arguments.length?(_=Bt,tt):_}return tt.initialize=function(Bt){E=Bt,ut()},tt.template=p,tt.groupBy=at,tt.enableGrouping=ht,tt.strength=wt,tt.centerX=Mt,tt.centerY=Ut,tt.nodes=Vt,tt.links=Me,tt.forceNodeSize=Wt,tt.nodeSize=tt.forceNodeSize,tt.forceCharge=ae,tt.forceLinkDistance=he,tt.forceLinkStrength=Se,tt.offset=xe,tt.getFocis=te,tt}U.default=D},68553:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var E=function(I,P){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,H){N.__proto__=H}||function(N,H){for(var nt in H)Object.prototype.hasOwnProperty.call(H,nt)&&(N[nt]=H[nt])},E(I,P)};return function(I,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");E(I,P);function N(){this.constructor=I}I.prototype=P===null?Object.create(P):(N.prototype=P.prototype,new N)}}(),j=this&&this.__createBinding||(Object.create?function(E,I,P,N){N===void 0&&(N=P);var H=Object.getOwnPropertyDescriptor(I,P);(!H||("get"in H?!I.__esModule:H.writable||H.configurable))&&(H={enumerable:!0,get:function(){return I[P]}}),Object.defineProperty(E,N,H)}:function(E,I,P,N){N===void 0&&(N=P),E[N]=I[P]}),B=this&&this.__setModuleDefault||(Object.create?function(E,I){Object.defineProperty(E,"default",{enumerable:!0,value:I})}:function(E,I){E.default=I}),L=this&&this.__importStar||function(E){if(E&&E.__esModule)return E;var I={};if(E!=null)for(var P in E)P!=="default"&&Object.prototype.hasOwnProperty.call(E,P)&&j(I,E,P);return B(I,E),I},k=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(U,"__esModule",{value:!0}),U.ForceLayout=void 0;var D=L(z(86880)),w=k(z(92681)),b=z(8273),g=z(46253),y=z(24979),d=function(E){F(I,E);function I(P){var N=E.call(this)||this;return N.center=[0,0],N.nodeStrength=null,N.edgeStrength=null,N.preventOverlap=!1,N.clusterNodeStrength=null,N.clusterEdgeStrength=null,N.clusterEdgeDistance=null,N.clusterNodeSize=null,N.clusterFociStrength=null,N.linkDistance=50,N.alphaDecay=.028,N.alphaMin=.001,N.alpha=.3,N.collideStrength=1,N.workerEnabled=!1,N.tick=function(){},N.onLayoutEnd=function(){},N.ticking=void 0,P&&N.updateCfg(P),N}return I.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},I.prototype.init=function(P){var N=this;N.nodes=P.nodes||[];var H=P.edges||[];N.edges=H.map(function(nt){var X={},Y=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(nt).forEach(function(Z){Y.indexOf(Z)>-1||(X[Z]=nt[Z])}),X}),N.ticking=!1},I.prototype.execute=function(P){var N=this,H=N.nodes,nt=N.edges;if(!N.ticking){var X=N.forceSimulation,Y=N.alphaMin,Z=N.alphaDecay,J=N.alpha;if(X){if(P){if(N.clustering&&N.clusterForce&&(N.clusterForce.nodes(H),N.clusterForce.links(nt)),X.nodes(H),nt&&N.edgeForce)N.edgeForce.links(nt);else if(nt&&!N.edgeForce){var ut=D.forceLink().id(function(Ot){return Ot.id}).links(nt);N.edgeStrength&&ut.strength(N.edgeStrength),N.linkDistance&&ut.distance(N.linkDistance),N.edgeForce=ut,X.force("link",ut)}}N.preventOverlap&&N.overlapProcess(X),X.alpha(J).restart(),this.ticking=!0}else try{var it=D.forceManyBody();if(N.nodeStrength&&it.strength(N.nodeStrength),X=D.forceSimulation().nodes(H),N.clustering){var tt=(0,w.default)();tt.centerX(N.center[0]).centerY(N.center[1]).template("force").strength(N.clusterFociStrength),nt&&tt.links(nt),H&&tt.nodes(H),tt.forceLinkDistance(N.clusterEdgeDistance).forceLinkStrength(N.clusterEdgeStrength).forceCharge(N.clusterNodeStrength).forceNodeSize(N.clusterNodeSize),N.clusterForce=tt,X.force("group",tt)}if(X.force("center",D.forceCenter(N.center[0],N.center[1])).force("charge",it).alpha(J).alphaDecay(Z).alphaMin(Y),N.preventOverlap&&N.overlapProcess(X),nt){var ut=D.forceLink().id(function(Dt){return Dt.id}).links(nt);N.edgeStrength&&ut.strength(N.edgeStrength),N.linkDistance&&ut.distance(N.linkDistance),N.edgeForce=ut,X.force("link",ut)}if(N.workerEnabled&&!_()&&(N.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!N.workerEnabled)X.on("tick",function(){N.tick()}).on("end",function(){N.ticking=!1,N.onLayoutEnd&&N.onLayoutEnd()}),N.ticking=!0;else{X.stop();for(var vt=S(X),pt=1;pt<=vt;pt++)X.tick(),postMessage({nodes:H,currentTick:pt,totalTicks:vt,type:y.LAYOUT_MESSAGE.TICK},void 0);N.ticking=!1}N.forceSimulation=X,N.ticking=!0}catch(Dt){N.ticking=!1,console.warn(Dt)}}},I.prototype.overlapProcess=function(P){var N=this,H=N.nodeSize,nt=N.nodeSpacing,X,Y,Z=N.collideStrength;if((0,b.isNumber)(nt)?Y=function(){return nt}:(0,b.isFunction)(nt)?Y=nt:Y=function(){return 0},!H)X=function(ut){if(ut.size){if((0,b.isArray)(ut.size)){var vt=ut.size[0]>ut.size[1]?ut.size[0]:ut.size[1];return vt/2+Y(ut)}if((0,b.isObject)(ut.size)){var vt=ut.size.width>ut.size.height?ut.size.width:ut.size.height;return vt/2+Y(ut)}return ut.size/2+Y(ut)}return 10+Y(ut)};else if((0,b.isFunction)(H))X=function(ut){var vt=H(ut);return vt+Y(ut)};else if((0,b.isArray)(H)){var J=H[0]>H[1]?H[0]:H[1],it=J/2;X=function(ut){return it+Y(ut)}}else if((0,b.isNumber)(H)){var tt=H/2;X=function(ut){return tt+Y(ut)}}else X=function(){return 10};P.force("collisionForce",D.forceCollide(X).strength(Z))},I.prototype.updateCfg=function(P){var N=this;N.ticking&&(N.forceSimulation.stop(),N.ticking=!1),N.forceSimulation=null,Object.assign(N,P)},I.prototype.destroy=function(){var P=this;P.ticking&&(P.forceSimulation.stop(),P.ticking=!1),P.nodes=null,P.edges=null,P.destroyed=!0},I}(g.Base);U.ForceLayout=d;function S(E){var I=E.alphaMin(),P=E.alphaTarget(),N=E.alpha(),H=Math.log((I-P)/(N-P))/Math.log(1-E.alphaDecay()),nt=Math.ceil(H);return nt}function _(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}},64180:function(xr,U,z){"use strict";var F=this&&this.__createBinding||(Object.create?function(B,L,k,D){D===void 0&&(D=k);var w=Object.getOwnPropertyDescriptor(L,k);(!w||("get"in w?!L.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return L[k]}}),Object.defineProperty(B,D,w)}:function(B,L,k,D){D===void 0&&(D=k),B[D]=L[k]}),j=this&&this.__exportStar||function(B,L){for(var k in B)k!=="default"&&!Object.prototype.hasOwnProperty.call(L,k)&&F(L,B,k)};Object.defineProperty(U,"__esModule",{value:!0}),j(z(68553),U)},26961:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.forceNBody=void 0;var F=z(71829),j=.81,B=.1;function L(b,g,y,d,S){var _=y/d,E=b.map(function(P,N){var H=g[P.id],nt=H.data,X=H.x,Y=H.y,Z=H.size,J=nt.layout.force.nodeStrength;return{x:X,y:Y,size:Z,index:N,vx:0,vy:0,weight:_*J}}),I=(0,F.quadtree)(E,function(P){return P.x},function(P){return P.y}).visitAfter(k);return E.forEach(function(P){w(P,I)}),E.map(function(P,N){var H=g[b[N].id],nt=H.data.layout.force.mass,X=nt===void 0?1:nt;S[2*N]=P.vx/X,S[2*N+1]=P.vy/X}),S}U.forceNBody=L;function k(b){var g=0,y=0,d=0;if(b.length){for(var S=0;S<4;S++){var _=b[S];_&&_.weight&&(g+=_.weight,y+=_.x*_.weight,d+=_.y*_.weight)}b.x=y/g,b.y=d/g,b.weight=g}else{var _=b;b.x=_.data.x,b.y=_.data.y,b.weight=_.data.weight}}var D=function(b,g,y,d,S,_){var E=_.x-b.x||B,I=_.y-b.y||B,P=d-g,N=E*E+I*I,H=Math.sqrt(N)*N;if(P*P*j<N){var nt=b.weight/H;return _.vx+=E*nt,_.vy+=I*nt,!0}if(b.length)return!1;if(b.data!==_){var nt=b.data.weight/H;_.vx+=E*nt,_.vy+=I*nt}};function w(b,g){g.visit(function(y,d,S,_,E){return D(y,d,S,_,E,b)})}},38129:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var b=function(g,y){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,S){d.__proto__=S}||function(d,S){for(var _ in S)Object.prototype.hasOwnProperty.call(S,_)&&(d[_]=S[_])},b(g,y)};return function(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");b(g,y);function d(){this.constructor=g}g.prototype=y===null?Object.create(y):(d.prototype=y.prototype,new d)}}(),j=this&&this.__assign||function(){return j=Object.assign||function(b){for(var g,y=1,d=arguments.length;y<d;y++){g=arguments[y];for(var S in g)Object.prototype.hasOwnProperty.call(g,S)&&(b[S]=g[S])}return b},j.apply(this,arguments)};Object.defineProperty(U,"__esModule",{value:!0}),U.Force2Layout=void 0;var B=z(46253),L=z(8273),k=z(26961),D=function(b,g){var y;return b?(0,L.isNumber)(b)?y=function(d){return b}:y=b:y=function(d){return g||1},y},w=function(b){F(g,b);function g(y){var d=b.call(this)||this;d.maxIteration=1e3,d.workerEnabled=!1,d.edgeStrength=200,d.nodeStrength=1e3,d.coulombDisScale=.005,d.damping=.9,d.maxSpeed=500,d.minMovement=.4,d.interval=.02,d.factor=1,d.linkDistance=200,d.gravity=0,d.clusterNodeStrength=20,d.preventOverlap=!0,d.distanceThresholdMode="mean",d.tick=function(){},d.nodes=[],d.edges=[],d.width=300,d.height=300,d.nodeMap={},d.nodeIdxMap={},d.judgingDistance=0,d.centripetalOptions={leaf:2,single:2,others:1,center:function(_){return{x:d.width/2,y:d.height/2}}};var S=y.getMass;return d.propsGetMass=S,d.updateCfg(y),d}return g.prototype.getCentripetalOptions=function(){var y=this,d=y.leafCluster,S=y.clustering,_=y.nodeClusterBy,E=y.nodes,I=y.nodeMap,P=y.clusterNodeStrength,N=function(vt){return typeof P=="function"?P(vt):P},H={},nt;if(d){nt=this.getSameTypeLeafMap()||{};var X=Array.from(new Set(E==null?void 0:E.map(function(vt){return vt[_]})))||[];H={single:100,leaf:function(vt,pt,Dt){var Ot=nt[vt.id]||{},te=Ot.relativeLeafNodes,Gt=Ot.sameTypeLeafNodes;return(Gt==null?void 0:Gt.length)===(te==null?void 0:te.length)||(X==null?void 0:X.length)===1?1:N(vt)},others:1,center:function(vt,pt,Dt){var Ot,te=(((Ot=vt.data)===null||Ot===void 0?void 0:Ot.layout)||{}).degree;if(!te)return{x:100,y:100};var Gt;if(te===1){var K=(nt[vt.id]||{}).sameTypeLeafNodes,p=K===void 0?[]:K;p.length===1?Gt=void 0:p.length>1&&(Gt=(0,L.getAvgNodePosition)(p))}else Gt=void 0;return{x:Gt==null?void 0:Gt.x,y:Gt==null?void 0:Gt.y}}}}if(S){nt||(nt=this.getSameTypeLeafMap());var Y=Array.from(new Set(E.map(function(vt,pt){return vt[_]}))).filter(function(vt){return vt!==void 0}),Z={};Y.forEach(function(vt){var pt=E.filter(function(Dt){return Dt[_]===vt}).map(function(Dt){return I[Dt.id]});Z[vt]=(0,L.getAvgNodePosition)(pt)}),H={single:function(vt){return N(vt)},leaf:function(vt){return N(vt)},others:function(vt){return N(vt)},center:function(vt,pt,Dt){var Ot=Z[vt[_]];return{x:Ot==null?void 0:Ot.x,y:Ot==null?void 0:Ot.y}}}}this.centripetalOptions=j(j({},this.centripetalOptions),H);var J=this.centripetalOptions,it=J.leaf,tt=J.single,ut=J.others;it&&typeof it!="function"&&(this.centripetalOptions.leaf=function(){return it}),tt&&typeof tt!="function"&&(this.centripetalOptions.single=function(){return tt}),ut&&typeof ut!="function"&&(this.centripetalOptions.others=function(){return ut})},g.prototype.updateCfg=function(y){y&&Object.assign(this,y)},g.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},g.prototype.execute=function(){var y=this;y.stop();var d=y.nodes,S=y.edges,_=y.defSpringLen;if(y.judgingDistance=0,!d||d.length===0){y.onLayoutEnd([]);return}!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight),y.center||(y.center=[y.width/2,y.height/2]);var E=y.center;if(d.length===1){d[0].x=E[0],d[0].y=E[1],y.onLayoutEnd([j({},d[0])]);return}y.degreesMap=(0,L.getDegreeMap)(d,S),y.propsGetMass?y.getMass=y.propsGetMass:y.getMass=function(Y){var Z=1;(0,L.isNumber)(Y.mass)&&(Z=Y.mass);var J=y.degreesMap[Y.id].all;return!J||J<5?Z:J*5*Z};var I=y.nodeSize,P;if(y.preventOverlap){var N=y.nodeSpacing,H;(0,L.isNumber)(N)?H=function(){return N}:(0,L.isFunction)(N)?H=N:H=function(){return 0},I?(0,L.isArray)(I)?P=function(Y){return Math.max(I[0],I[1])+H(Y)}:P=function(Y){return I+H(Y)}:P=function(Y){return Y.size?(0,L.isArray)(Y.size)?Math.max(Y.size[0],Y.size[1])+H(Y):(0,L.isObject)(Y.size)?Math.max(Y.size.width,Y.size.height)+H(Y):Y.size+H(Y):10+H(Y)}}y.nodeSize=P,y.linkDistance=D(y.linkDistance,1),y.nodeStrength=D(y.nodeStrength,1),y.edgeStrength=D(y.edgeStrength,1);var nt={},X={};d.forEach(function(Y,Z){(0,L.isNumber)(Y.x)||(Y.x=Math.random()*y.width),(0,L.isNumber)(Y.y)||(Y.y=Math.random()*y.height);var J=y.degreesMap[Y.id];nt[Y.id]=j(j({},Y),{data:j(j({},Y.data),{size:y.nodeSize(Y)||30,layout:{inDegree:J.in,outDegree:J.out,degree:J.all,tDegree:J.in,sDegree:J.out,force:{mass:y.getMass(Y),nodeStrength:y.nodeStrength(Y,S)}}})}),X[Y.id]=Z}),y.nodeMap=nt,y.nodeIdxMap=X,y.edgeInfos=[],S==null||S.forEach(function(Y){var Z=nt[Y.source],J=nt[Y.target];!Z||!J?elf.edgeInfos.push({}):y.edgeInfos.push({edgeStrength:y.edgeStrength(Y),linkDistance:_?_(j(j({},Y),{source:Z,target:J}),Z,J):y.linkDistance(Y,Z,J)||1+(I(Z)+I(Z)||0)/2})}),this.getCentripetalOptions(),y.onLayoutEnd=y.onLayoutEnd||function(){},y.run()},g.prototype.run=function(){var y=this,d=y.maxIteration,S=y.nodes,_=y.edges,E=y.workerEnabled,I=y.minMovement,P=y.animate,N=y.nodeMap,H=y.height;if(y.currentMinY=0,y.currentMaxY=H,!!S){var nt=[];if(S.forEach(function(ut,vt){nt[2*vt]=0,nt[2*vt+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){var X={};_.forEach(function(ut){var vt=ut.source,pt=ut.target;X[vt]=X[vt]||[],X[vt].push(ut),X[pt]=X[pt]||[],X[pt].push(ut)}),this.relatedEdges=X}var Y=d,Z=!P;if(E||Z){for(var J=0,it=0;(y.judgingDistance>I||it<1)&&it<Y;it++)J=it,y.runOneStep(it,nt);y.onLayoutEnd(Object.values(N))}else{if(typeof window=="undefined")return;var tt=0;this.timeInterval=window.setInterval(function(){S&&(y.runOneStep(tt,nt),tt++,(tt>=Y||y.judgingDistance<I)&&(y.onLayoutEnd(Object.values(N)),window.clearInterval(y.timeInterval)))},0)}}},g.prototype.runOneStep=function(y,d){var S,_=this,E=_.nodes,I=_.edges,P=_.nodeMap,N=_.monitor,H=[];if(E!=null&&E.length){_.calRepulsive(H),I&&_.calAttractive(H),_.calGravity(H),_.attractToSide(H);var nt=_.interval;if(_.updateVelocity(H,d,nt),_.updatePosition(d,nt),(S=_.tick)===null||S===void 0||S.call(_),N){var X=this.calTotalEnergy(H);N({energy:X,nodes:E,edges:I,iterations:y})}}},g.prototype.calTotalEnergy=function(y){var d=this,S=d.nodes,_=d.nodeMap;if(!(S!=null&&S.length))return 0;var E=0;return S.forEach(function(I,P){var N=y[2*P],H=y[2*P+1],nt=N*N+H*H,X=_[I.id].data.layout.force.mass,Y=X===void 0?1:X;E+=Y*nt*.5}),E},g.prototype.calRepulsive=function(y){var d=this,S=d.nodes,_=d.nodeMap,E=d.factor,I=d.coulombDisScale,P=d.nodeSize;(0,k.forceNBody)(S,_,E,I*I,y)},g.prototype.calAttractive=function(y){var d=this,S=d.edges,_=d.nodeMap,E=d.nodeIdxMap,I=d.edgeInfos,P=d.nodeSize;S.forEach(function(N,H){var nt=(0,L.getEdgeTerminal)(N,"source"),X=(0,L.getEdgeTerminal)(N,"target"),Y=_[nt],Z=_[X];if(!(!Y||!Z)){var J=Z.x-Y.x,it=Z.y-Y.y;!J&&!it&&(J=Math.random()*.01,it=Math.random()*.01);var tt=Math.sqrt(J*J+it*it),ut=J/tt,vt=it/tt,pt=I[H]||{},Dt=pt.linkDistance,Ot=Dt===void 0?200:Dt,te=pt.edgeStrength,Gt=te===void 0?200:te,K=Ot-tt,p=K*Gt,at=Y.data.layout.force.mass||1,ht=Z.data.layout.force.mass||1,wt=1/at,Mt=1/ht,Ut=ut*p,Vt=vt*p,Me=2*E[nt],Wt=2*E[X];y[Me]-=Ut*wt,y[Me+1]-=Vt*wt,y[Wt]+=Ut*Mt,y[Wt+1]+=Vt*Mt}})},g.prototype.calGravity=function(y){var d,S=this,_=S.nodes,E=S.edges,I=E===void 0?[]:E,P=S.nodeMap,N=S.width,H=S.height,nt=S.center,X=S.gravity,Y=S.degreesMap,Z=S.centripetalOptions;if(_)for(var J=_.length,it=0;it<J;it++){var tt=2*it,ut=P[_[it].id],vt=ut.data.layout.force.mass,pt=vt===void 0?1:vt,Dt=0,Ot=0,te=X,Gt=Y[ut.id],K=Gt.in,p=Gt.out,at=Gt.all,ht=(d=S.getCenter)===null||d===void 0?void 0:d.call(S,ut,at);if(ht){var wt=ht[0],Mt=ht[1],Ut=ht[2];Dt=ut.x-wt,Ot=ut.y-Mt,te=Ut}else Dt=ut.x-nt[0],Ot=ut.y-nt[1];if(te&&(y[tt]-=te*Dt/pt,y[tt+1]-=te*Ot/pt),Z){var Vt=Z.leaf,Me=Z.single,Wt=Z.others,ae=Z.center,he=(ae==null?void 0:ae(ut,_,I,N,H))||{x:0,y:0,centerStrength:0},Se=he.x,xe=he.y,Bt=he.centerStrength;if(!(0,L.isNumber)(Se)||!(0,L.isNumber)(xe))continue;var fe=(ut.x-Se)/pt,Le=(ut.y-xe)/pt;if(Bt&&(y[tt]-=Bt*fe,y[tt+1]-=Bt*Le),at===0){var jt=Me(ut);if(!jt)continue;y[tt]-=jt*fe,y[tt+1]-=jt*Le;continue}if(K===0||p===0){var oe=Vt(ut,_,I);if(!oe)continue;y[tt]-=oe*fe,y[tt+1]-=oe*Le;continue}var Te=Wt(ut);if(!Te)continue;y[tt]-=Te*fe,y[tt+1]-=Te*Le}}},g.prototype.attractToSide=function(y){var d=this,S=d.defSideCoe,_=d.height,E=d.nodes,I=d.relatedEdges,P=d.currentMinY,N=P===void 0?0:P,H=d.currentMaxY,nt=H===void 0?this.height:H;!S||typeof S!="function"||!(E!=null&&E.length)||E.forEach(function(X,Y){var Z=S(X,I[X.id]||[]);if(Z!==0){var J=Z<0?N:nt,it=Math.abs(Z);y[2*Y+1]-=it*(X.y-J)}})},g.prototype.updateVelocity=function(y,d,S){var _=this,E=_.nodes,I=_.damping,P=_.maxSpeed;E!=null&&E.length&&E.forEach(function(N,H){var nt=(d[2*H]+y[2*H]*S)*I||.01,X=(d[2*H+1]+y[2*H+1]*S)*I||.01,Y=Math.sqrt(nt*nt+X*X);if(Y>P){var Z=P/Y;nt=Z*nt,X=Z*X}d[2*H]=nt,d[2*H+1]=X})},g.prototype.updatePosition=function(y,d){var S=this,_=S.nodes,E=S.distanceThresholdMode,I=S.nodeMap;if(!(_!=null&&_.length)){this.judgingDistance=0;return}var P=0;E==="max"?S.judgingDistance=-1/0:E==="min"&&(S.judgingDistance=1/0);var N=1/0,H=-1/0;_.forEach(function(nt,X){var Y=I[nt.id];if((0,L.isNumber)(nt.fx)&&(0,L.isNumber)(nt.fy)){nt.x=nt.fx,nt.y=nt.fy,Y.x=nt.x,Y.y=nt.y;return}var Z=y[2*X]*d,J=y[2*X+1]*d;nt.x+=Z,nt.y+=J,Y.x=nt.x,Y.y=nt.y,nt.y<N&&(N=nt.y),nt.y>H&&(H=nt.y);var it=Math.sqrt(Z*Z+J*J);switch(E){case"max":S.judgingDistance<it&&(S.judgingDistance=it);break;case"min":S.judgingDistance>it&&(S.judgingDistance=it);break;default:P=P+it;break}}),this.currentMinY=N,this.currentMaxY=H,(!E||E==="mean")&&(S.judgingDistance=P/_.length)},g.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},g.prototype.destroy=function(){var y=this;y.stop(),y.tick=null,y.nodes=null,y.edges=null,y.destroyed=!0},g.prototype.getType=function(){return"force2"},g.prototype.getSameTypeLeafMap=function(){var y=this,d=y.nodeClusterBy,S=y.nodes,_=y.edges,E=y.nodeMap,I=y.degreesMap;if(S!=null&&S.length){var P={};return S.forEach(function(N,H){var nt=I[N.id].all;nt===1&&(P[N.id]=(0,L.getCoreNodeAndRelativeLeafNodes)("leaf",N,_,d,I,E))}),P}},g}(B.Base);U.Force2Layout=w},20039:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var z=function(){function F(j){this.id=j.id||0,this.rx=j.rx,this.ry=j.ry,this.fx=0,this.fy=0,this.mass=j.mass,this.degree=j.degree,this.g=j.g||0}return F.prototype.distanceTo=function(j){var B=this.rx-j.rx,L=this.ry-j.ry;return Math.hypot(B,L)},F.prototype.setPos=function(j,B){this.rx=j,this.ry=B},F.prototype.resetForce=function(){this.fx=0,this.fy=0},F.prototype.addForce=function(j){var B=j.rx-this.rx,L=j.ry-this.ry,k=Math.hypot(B,L);k=k<1e-4?1e-4:k;var D=this.g*(this.degree+1)*(j.degree+1)/k;this.fx+=D*B/k,this.fy+=D*L/k},F.prototype.in=function(j){return j.contains(this.rx,this.ry)},F.prototype.add=function(j){var B=this.mass+j.mass,L=(this.rx*this.mass+j.rx*j.mass)/B,k=(this.ry*this.mass+j.ry*j.mass)/B,D=this.degree+j.degree,w={rx:L,ry:k,mass:B,degree:D};return new F(w)},F}();U.default=z},16919:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var g=function(y,d){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,_){S.__proto__=_}||function(S,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(S[E]=_[E])},g(y,d)};return function(y,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");g(y,d);function S(){this.constructor=y}y.prototype=d===null?Object.create(d):(S.prototype=d.prototype,new S)}}(),j=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(U,"__esModule",{value:!0}),U.ForceAtlas2Layout=void 0;var B=z(46253),L=z(8273),k=j(z(20039)),D=j(z(78150)),w=j(z(58979)),b=function(g){F(y,g);function y(d){var S=g.call(this)||this;return S.center=[0,0],S.width=300,S.height=300,S.nodes=[],S.edges=[],S.kr=5,S.kg=1,S.mode="normal",S.preventOverlap=!1,S.dissuadeHubs=!1,S.barnesHut=void 0,S.maxIteration=0,S.ks=.1,S.ksmax=10,S.tao=.1,S.onLayoutEnd=function(){},S.prune=void 0,S.updateCfg(d),S}return y.prototype.getDefaultCfg=function(){return{}},y.prototype.execute=function(){var d=this,S=d.nodes,_=d.onLayoutEnd,E=d.prune,I=d.maxIteration;!d.width&&typeof window!="undefined"&&(d.width=window.innerWidth),!d.height&&typeof window!="undefined"&&(d.height=window.innerHeight);for(var P=[],N=S.length,H=0;H<N;H+=1){var nt=S[H],X=10,Y=10;(0,L.isNumber)(nt.size)&&(X=nt.size,Y=nt.size),(0,L.isArray)(nt.size)?(isNaN(nt.size[0])||(X=nt.size[0]),isNaN(nt.size[1])||(Y=nt.size[1])):(0,L.isObject)(nt.size)&&(X=nt.size.width,Y=nt.size.height),d.getWidth&&!isNaN(d.getWidth(nt))&&(Y=d.getWidth(nt)),d.getHeight&&!isNaN(d.getHeight(nt))&&(X=d.getHeight(nt));var Z=Math.max(X,Y);P.push(Z)}d.barnesHut===void 0&&N>250&&(d.barnesHut=!0),d.prune===void 0&&N>100&&(d.prune=!0),this.maxIteration===0&&!d.prune?(I=250,N<=200&&N>100?I=1e3:N>200&&(I=1200),this.maxIteration=I):this.maxIteration===0&&E&&(I=100,N<=200&&N>100?I=500:N>200&&(I=950),this.maxIteration=I),d.kr||(d.kr=50,N>100&&N<=500?d.kr=20:N>500&&(d.kr=1)),d.kg||(d.kg=20,N>100&&N<=500?d.kg=10:N>500&&(d.kg=1)),this.nodes=d.updateNodesByForces(P),_()},y.prototype.updateNodesByForces=function(d){for(var S=this,_=S.edges,E=S.maxIteration,I=S.nodes,P=_.filter(function(Gt){var K=(0,L.getEdgeTerminal)(Gt,"source"),p=(0,L.getEdgeTerminal)(Gt,"target");return K!==p}),N=I.length,H=P.length,nt=[],X={},Y={},Z=[],J=0;J<N;J+=1)X[I[J].id]=J,nt[J]=0,(I[J].x===void 0||isNaN(I[J].x))&&(I[J].x=Math.random()*1e3),(I[J].y===void 0||isNaN(I[J].y))&&(I[J].y=Math.random()*1e3),Z.push({x:I[J].x,y:I[J].y});for(var J=0;J<H;J+=1){for(var it=void 0,tt=void 0,ut=0,vt=0,pt=0;pt<N;pt+=1){var Dt=(0,L.getEdgeTerminal)(P[J],"source"),Ot=(0,L.getEdgeTerminal)(P[J],"target");I[pt].id===Dt?(it=I[pt],ut=pt):I[pt].id===Ot&&(tt=I[pt],vt=pt),Y[J]={sourceIdx:ut,targetIdx:vt}}it&&(nt[X[it.id]]+=1),tt&&(nt[X[tt.id]]+=1)}var te=E;if(I=this.iterate(te,X,Y,H,nt,d),S.prune){for(var pt=0;pt<H;pt+=1)nt[Y[pt].sourceIdx]<=1?(I[Y[pt].sourceIdx].x=I[Y[pt].targetIdx].x,I[Y[pt].sourceIdx].y=I[Y[pt].targetIdx].y):nt[Y[pt].targetIdx]<=1&&(I[Y[pt].targetIdx].x=I[Y[pt].sourceIdx].x,I[Y[pt].targetIdx].y=I[Y[pt].sourceIdx].y);S.prune=!1,S.barnesHut=!1,te=100,I=this.iterate(te,X,Y,H,nt,d)}return I},y.prototype.iterate=function(d,S,_,E,I,P){for(var N=this,H=N.nodes,nt=N.kr,X=N.preventOverlap,Y=N.barnesHut,Z=H.length,J=0,it=100,tt=d,ut=50,vt=[],pt=[],Dt=[],Ot=0;Ot<Z;Ot+=1)if(vt[2*Ot]=0,vt[2*Ot+1]=0,Y){var te={id:Ot,rx:H[Ot].x,ry:H[Ot].y,mass:1,g:nt,degree:I[Ot]};Dt[Ot]=new k.default(te)}for(;tt>0;){for(var Ot=0;Ot<Z;Ot+=1)pt[2*Ot]=vt[2*Ot],pt[2*Ot+1]=vt[2*Ot+1],vt[2*Ot]=0,vt[2*Ot+1]=0;vt=this.getAttrForces(tt,ut,E,S,_,I,P,vt),Y&&(X&&tt>ut||!X)?vt=this.getOptRepGraForces(vt,Dt,I):vt=this.getRepGraForces(tt,ut,vt,it,P,I);var Gt=this.updatePos(vt,pt,J,I);H=Gt.nodes,J=Gt.sg,tt--,N.tick&&N.tick()}return H},y.prototype.getAttrForces=function(d,S,_,E,I,P,N,H){for(var nt=this,X=nt.nodes,Y=nt.preventOverlap,Z=nt.dissuadeHubs,J=nt.mode,it=nt.prune,tt=0;tt<_;tt+=1){var ut=X[I[tt].sourceIdx],vt=I[tt].sourceIdx,pt=X[I[tt].targetIdx],Dt=I[tt].targetIdx;if(!(it&&(P[vt]<=1||P[Dt]<=1))){var Ot=[pt.x-ut.x,pt.y-ut.y],te=Math.hypot(Ot[0],Ot[1]);te=te<1e-4?1e-4:te,Ot[0]=Ot[0]/te,Ot[1]=Ot[1]/te,Y&&d<S&&(te=te-N[vt]-N[Dt]);var Gt=te,K=Gt;J==="linlog"&&(Gt=Math.log(1+te),K=Gt),Z&&(Gt=te/P[vt],K=te/P[Dt]),Y&&d<S&&te<=0?(Gt=0,K=0):Y&&d<S&&te>0&&(Gt=te,K=te),H[2*E[ut.id]]+=Gt*Ot[0],H[2*E[pt.id]]-=K*Ot[0],H[2*E[ut.id]+1]+=Gt*Ot[1],H[2*E[pt.id]+1]-=K*Ot[1]}}return H},y.prototype.getRepGraForces=function(d,S,_,E,I,P){for(var N=this,H=N.nodes,nt=N.preventOverlap,X=N.kr,Y=N.kg,Z=N.center,J=N.prune,it=H.length,tt=0;tt<it;tt+=1){for(var ut=tt+1;ut<it;ut+=1)if(!(J&&(P[tt]<=1||P[ut]<=1))){var vt=[H[ut].x-H[tt].x,H[ut].y-H[tt].y],pt=Math.hypot(vt[0],vt[1]);pt=pt<1e-4?1e-4:pt,vt[0]=vt[0]/pt,vt[1]=vt[1]/pt,nt&&d<S&&(pt=pt-I[tt]-I[ut]);var Dt=X*(P[tt]+1)*(P[ut]+1)/pt;nt&&d<S&&pt<0?Dt=E*(P[tt]+1)*(P[ut]+1):nt&&d<S&&pt===0?Dt=0:nt&&d<S&&pt>0&&(Dt=X*(P[tt]+1)*(P[ut]+1)/pt),_[2*tt]-=Dt*vt[0],_[2*ut]+=Dt*vt[0],_[2*tt+1]-=Dt*vt[1],_[2*ut+1]+=Dt*vt[1]}var Ot=[H[tt].x-Z[0],H[tt].y-Z[1]],te=Math.hypot(Ot[0],Ot[1]);Ot[0]=Ot[0]/te,Ot[1]=Ot[1]/te;var Gt=Y*(P[tt]+1);_[2*tt]-=Gt*Ot[0],_[2*tt+1]-=Gt*Ot[1]}return _},y.prototype.getOptRepGraForces=function(d,S,_){for(var E=this,I=E.nodes,P=E.kg,N=E.center,H=E.prune,nt=I.length,X=9e10,Y=-9e10,Z=9e10,J=-9e10,it=0;it<nt;it+=1)H&&_[it]<=1||(S[it].setPos(I[it].x,I[it].y),I[it].x>=Y&&(Y=I[it].x),I[it].x<=X&&(X=I[it].x),I[it].y>=J&&(J=I[it].y),I[it].y<=Z&&(Z=I[it].y));for(var tt=Math.max(Y-X,J-Z),ut={xmid:(Y+X)/2,ymid:(J+Z)/2,length:tt,massCenter:N,mass:nt},vt=new D.default(ut),pt=new w.default(vt),it=0;it<nt;it+=1)H&&_[it]<=1||S[it].in(vt)&&pt.insert(S[it]);for(var it=0;it<nt;it+=1)if(!(H&&_[it]<=1)){S[it].resetForce(),pt.updateForce(S[it]),d[2*it]-=S[it].fx,d[2*it+1]-=S[it].fy;var Dt=[I[it].x-N[0],I[it].y-N[1]],Ot=Math.hypot(Dt[0],Dt[1]);Ot=Ot<1e-4?1e-4:Ot,Dt[0]=Dt[0]/Ot,Dt[1]=Dt[1]/Ot;var te=P*(_[it]+1);d[2*it]-=te*Dt[0],d[2*it+1]-=te*Dt[1]}return d},y.prototype.updatePos=function(d,S,_,E){for(var I=this,P=I.nodes,N=I.ks,H=I.tao,nt=I.prune,X=I.ksmax,Y=P.length,Z=[],J=[],it=0,tt=0,ut=0;ut<Y;ut+=1)if(!(nt&&E[ut]<=1)){var vt=[d[2*ut]-S[2*ut],d[2*ut+1]-S[2*ut+1]],pt=Math.hypot(vt[0],vt[1]),Dt=[d[2*ut]+S[2*ut],d[2*ut+1]+S[2*ut+1]],Ot=Math.hypot(Dt[0],Dt[1]);Z[ut]=pt,J[ut]=Ot/2,it+=(E[ut]+1)*Z[ut],tt+=(E[ut]+1)*J[ut]}var te=_;_=H*tt/it,te!==0&&(_=_>1.5*te?1.5*te:_);for(var ut=0;ut<Y;ut+=1)if(!(nt&&E[ut]<=1)&&!((0,L.isNumber)(P[ut].fx)&&(0,L.isNumber)(P[ut].fy))){var Gt=N*_/(1+_*Math.sqrt(Z[ut])),K=Math.hypot(d[2*ut],d[2*ut+1]);K=K<1e-4?1e-4:K;var p=X/K;Gt=Gt>p?p:Gt;var at=Gt*d[2*ut],ht=Gt*d[2*ut+1];P[ut].x+=at,P[ut].y+=ht}return{nodes:P,sg:_}},y}(B.Base);U.ForceAtlas2Layout=b},78150:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var z=function(){function F(j){this.xmid=j.xmid,this.ymid=j.ymid,this.length=j.length,this.massCenter=j.massCenter||[0,0],this.mass=j.mass||1}return F.prototype.getLength=function(){return this.length},F.prototype.contains=function(j,B){var L=this.length/2;return j<=this.xmid+L&&j>=this.xmid-L&&B<=this.ymid+L&&B>=this.ymid-L},F.prototype.NW=function(){var j=this.xmid-this.length/4,B=this.ymid+this.length/4,L=this.length/2,k={xmid:j,ymid:B,length:L},D=new F(k);return D},F.prototype.NE=function(){var j=this.xmid+this.length/4,B=this.ymid+this.length/4,L=this.length/2,k={xmid:j,ymid:B,length:L},D=new F(k);return D},F.prototype.SW=function(){var j=this.xmid-this.length/4,B=this.ymid-this.length/4,L=this.length/2,k={xmid:j,ymid:B,length:L},D=new F(k);return D},F.prototype.SE=function(){var j=this.xmid+this.length/4,B=this.ymid-this.length/4,L=this.length/2,k={xmid:j,ymid:B,length:L},D=new F(k);return D},F}();U.default=z},58979:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var z=function(){function F(j){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,j!=null&&(this.quad=j)}return F.prototype.insert=function(j){if(this.body==null){this.body=j;return}this._isExternal()?(this.quad&&(this.NW=new F(this.quad.NW()),this.NE=new F(this.quad.NE()),this.SW=new F(this.quad.SW()),this.SE=new F(this.quad.SE())),this._putBody(this.body),this._putBody(j),this.body=this.body.add(j)):(this.body=this.body.add(j),this._putBody(j))},F.prototype._putBody=function(j){this.quad&&(j.in(this.quad.NW())&&this.NW?this.NW.insert(j):j.in(this.quad.NE())&&this.NE?this.NE.insert(j):j.in(this.quad.SW())&&this.SW?this.SW.insert(j):j.in(this.quad.SE())&&this.SE&&this.SE.insert(j))},F.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},F.prototype.updateForce=function(j){if(!(this.body==null||j===this.body))if(this._isExternal())j.addForce(this.body);else{var B=this.quad?this.quad.getLength():0,L=this.body.distanceTo(j);B/L<this.theta?j.addForce(this.body):(this.NW&&this.NW.updateForce(j),this.NE&&this.NE.updateForce(j),this.SW&&this.SW.updateForce(j),this.SE&&this.SE.updateForce(j))}},F}();U.default=z},23826:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var D=function(w,b){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var d in y)Object.prototype.hasOwnProperty.call(y,d)&&(g[d]=y[d])},D(w,b)};return function(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");D(w,b);function g(){this.constructor=w}w.prototype=b===null?Object.create(b):(g.prototype=b.prototype,new g)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.FruchtermanLayout=void 0;var j=z(46253),B=z(8273),L=800,k=function(D){F(w,D);function w(b){var g=D.call(this)||this;return g.maxIteration=1e3,g.workerEnabled=!1,g.gravity=10,g.speed=5,g.clustering=!1,g.clusterGravity=10,g.nodes=[],g.edges=[],g.width=300,g.height=300,g.nodeMap={},g.nodeIdxMap={},g.onLayoutEnd=function(){},g.tick=function(){},g.animate=!0,g.updateCfg(b),g}return w.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},w.prototype.execute=function(){var b=this,g,y,d=this,S=d.nodes;if(d.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(d.timeInterval),!S||S.length===0){(g=d.onLayoutEnd)===null||g===void 0||g.call(d);return}!d.width&&typeof window!="undefined"&&(d.width=window.innerWidth),!d.height&&typeof window!="undefined"&&(d.height=window.innerHeight),d.center||(d.center=[d.width/2,d.height/2]);var _=d.center;if(S.length===1){S[0].x=_[0],S[0].y=_[1],(y=d.onLayoutEnd)===null||y===void 0||y.call(d);return}var E={},I={};return S.forEach(function(P,N){(0,B.isNumber)(P.x)||(P.x=Math.random()*b.width),(0,B.isNumber)(P.y)||(P.y=Math.random()*b.height),E[P.id]=P,I[P.id]=N}),d.nodeMap=E,d.nodeIdxMap=I,d.run()},w.prototype.run=function(){var b,g=this,y=g.nodes;if(y){var d=g.edges,S=g.maxIteration,_=g.workerEnabled,E=g.clustering,I=g.animate,P={};if(E&&y.forEach(function(nt){P[nt.cluster]===void 0&&(P[nt.cluster]={name:nt.cluster,cx:0,cy:0,count:0})}),_||!I){for(var N=0;N<S;N++)g.runOneStep(P);(b=g.onLayoutEnd)===null||b===void 0||b.call(g)}else{if(typeof window=="undefined")return;var H=0;this.timeInterval=window.setInterval(function(){var nt;g.runOneStep(P),H++,H>=S&&((nt=g.onLayoutEnd)===null||nt===void 0||nt.call(g),window.clearInterval(g.timeInterval))},0)}return{nodes:y,edges:d}}},w.prototype.runOneStep=function(b){var g,y=this,d=y.nodes;if(d){var S=y.edges,_=y.center,E=y.gravity,I=y.speed,P=y.clustering,N=y.height*y.width,H=Math.sqrt(N)/10,nt=N/(d.length+1),X=Math.sqrt(nt),Y=[];if(d.forEach(function(it,tt){Y[tt]={x:0,y:0}}),y.applyCalculate(d,S,Y,X,nt),P){for(var Z in b)b[Z].cx=0,b[Z].cy=0,b[Z].count=0;d.forEach(function(it){var tt=b[it.cluster];(0,B.isNumber)(it.x)&&(tt.cx+=it.x),(0,B.isNumber)(it.y)&&(tt.cy+=it.y),tt.count++});for(var Z in b)b[Z].cx/=b[Z].count,b[Z].cy/=b[Z].count;var J=y.clusterGravity||E;d.forEach(function(it,tt){if(!(!(0,B.isNumber)(it.x)||!(0,B.isNumber)(it.y))){var ut=b[it.cluster],vt=Math.sqrt((it.x-ut.cx)*(it.x-ut.cx)+(it.y-ut.cy)*(it.y-ut.cy)),pt=X*J;Y[tt].x-=pt*(it.x-ut.cx)/vt,Y[tt].y-=pt*(it.y-ut.cy)/vt}})}d.forEach(function(it,tt){if(!(!(0,B.isNumber)(it.x)||!(0,B.isNumber)(it.y))){var ut=.01*X*E;Y[tt].x-=ut*(it.x-_[0]),Y[tt].y-=ut*(it.y-_[1])}}),d.forEach(function(it,tt){if((0,B.isNumber)(it.fx)&&(0,B.isNumber)(it.fy)){it.x=it.fx,it.y=it.fy;return}if(!(!(0,B.isNumber)(it.x)||!(0,B.isNumber)(it.y))){var ut=Math.sqrt(Y[tt].x*Y[tt].x+Y[tt].y*Y[tt].y);if(ut>0){var vt=Math.min(H*(I/L),ut);it.x+=Y[tt].x/ut*vt,it.y+=Y[tt].y/ut*vt}}}),(g=y.tick)===null||g===void 0||g.call(y)}},w.prototype.applyCalculate=function(b,g,y,d,S){var _=this;_.calRepulsive(b,y,S),g&&_.calAttractive(g,y,d)},w.prototype.calRepulsive=function(b,g,y){b.forEach(function(d,S){g[S]={x:0,y:0},b.forEach(function(_,E){if(S!==E&&!(!(0,B.isNumber)(d.x)||!(0,B.isNumber)(_.x)||!(0,B.isNumber)(d.y)||!(0,B.isNumber)(_.y))){var I=d.x-_.x,P=d.y-_.y,N=I*I+P*P;if(N===0){N=1;var H=S>E?1:-1;I=.01*H,P=.01*H}var nt=y/N;g[S].x+=I*nt,g[S].y+=P*nt}})})},w.prototype.calAttractive=function(b,g,y){var d=this;b.forEach(function(S){var _=(0,B.getEdgeTerminal)(S,"source"),E=(0,B.getEdgeTerminal)(S,"target");if(!(!_||!E)){var I=d.nodeIdxMap[_],P=d.nodeIdxMap[E];if(I!==P){var N=d.nodeMap[_],H=d.nodeMap[E];if(!(!(0,B.isNumber)(H.x)||!(0,B.isNumber)(N.x)||!(0,B.isNumber)(H.y)||!(0,B.isNumber)(N.y))){var nt=H.x-N.x,X=H.y-N.y,Y=Math.sqrt(nt*nt+X*X),Z=Y*Y/y;g[P].x-=nt/Y*Z,g[P].y-=X/Y*Z,g[I].x+=nt/Y*Z,g[I].y+=X/Y*Z}}}})},w.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},w.prototype.destroy=function(){var b=this;b.stop(),b.tick=null,b.nodes=null,b.edges=null,b.destroyed=!0},w.prototype.getType=function(){return"fruchterman"},w}(j.Base);U.FruchtermanLayout=k},46260:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var D=function(w,b){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var d in y)Object.prototype.hasOwnProperty.call(y,d)&&(g[d]=y[d])},D(w,b)};return function(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");D(w,b);function g(){this.constructor=w}w.prototype=b===null?Object.create(b):(g.prototype=b.prototype,new g)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.GForceLayout=void 0;var j=z(46253),B=z(8273),L=function(D,w){var b;return D?(0,B.isNumber)(D)?b=function(g){return D}:b=D:b=function(g){return w||1},b},k=function(D){F(w,D);function w(b){var g=D.call(this)||this;return g.maxIteration=500,g.workerEnabled=!1,g.edgeStrength=200,g.nodeStrength=1e3,g.coulombDisScale=.005,g.damping=.9,g.maxSpeed=1e3,g.minMovement=.5,g.interval=.02,g.factor=1,g.linkDistance=1,g.gravity=10,g.preventOverlap=!0,g.collideStrength=1,g.tick=function(){},g.nodes=[],g.edges=[],g.width=300,g.height=300,g.nodeMap={},g.nodeIdxMap={},g.animate=!0,g.updateCfg(b),g}return w.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},w.prototype.execute=function(){var b,g,y=this,d=y.nodes;if(y.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(y.timeInterval),!d||d.length===0){(b=y.onLayoutEnd)===null||b===void 0||b.call(y);return}!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight),y.center||(y.center=[y.width/2,y.height/2]);var S=y.center;if(d.length===1){d[0].x=S[0],d[0].y=S[1],(g=y.onLayoutEnd)===null||g===void 0||g.call(y);return}var _={},E={};d.forEach(function(X,Y){(0,B.isNumber)(X.x)||(X.x=Math.random()*y.width),(0,B.isNumber)(X.y)||(X.y=Math.random()*y.height),_[X.id]=X,E[X.id]=Y}),y.nodeMap=_,y.nodeIdxMap=E,y.linkDistance=L(y.linkDistance,1),y.nodeStrength=L(y.nodeStrength,1),y.edgeStrength=L(y.edgeStrength,1);var I=y.nodeSize,P;if(y.preventOverlap){var N=y.nodeSpacing,H;(0,B.isNumber)(N)?H=function(){return N}:(0,B.isFunction)(N)?H=N:H=function(){return 0},I?(0,B.isArray)(I)?P=function(X){return Math.max(I[0],I[1])+H(X)}:P=function(X){return I+H(X)}:P=function(X){return X.size?(0,B.isArray)(X.size)?Math.max(X.size[0],X.size[1])+H(X):(0,B.isObject)(X.size)?Math.max(X.size.width,X.size.height)+H(X):X.size+H(X):10+H(X)}}y.nodeSize=P;var nt=y.edges;y.degrees=(0,B.getDegree)(d.length,y.nodeIdxMap,nt),y.getMass||(y.getMass=function(X){var Y=X.mass||y.degrees[y.nodeIdxMap[X.id]].all||1;return Y}),y.run()},w.prototype.run=function(){var b,g=this,y=g.maxIteration,d=g.nodes,S=g.workerEnabled,_=g.minMovement,E=g.animate;if(d)if(S||!E){for(var I=0;I<y;I++){var P=g.runOneStep(I);if(g.reachMoveThreshold(d,P,_))break}(b=g.onLayoutEnd)===null||b===void 0||b.call(g)}else{if(typeof window=="undefined")return;var N=0;this.timeInterval=window.setInterval(function(){var H,nt;if(d){var X=g.runOneStep(N)||[];g.reachMoveThreshold(d,X,_)&&((H=g.onLayoutEnd)===null||H===void 0||H.call(g),window.clearInterval(g.timeInterval)),N++,N>=y&&((nt=g.onLayoutEnd)===null||nt===void 0||nt.call(g),window.clearInterval(g.timeInterval))}},0)}},w.prototype.reachMoveThreshold=function(b,g,y){var d=0;return b.forEach(function(S,_){var E=S.x-g[_].x,I=S.y-g[_].y;d+=Math.sqrt(E*E+I*I)}),d/=b.length,d<y},w.prototype.runOneStep=function(b){var g,y=this,d=y.nodes,S=y.edges,_=[],E=[];if(d){d.forEach(function(N,H){_[2*H]=0,_[2*H+1]=0,E[2*H]=0,E[2*H+1]=0}),y.calRepulsive(_,d),S&&y.calAttractive(_,S),y.calGravity(_,d);var I=Math.max(.02,y.interval-b*.002);y.updateVelocity(_,E,I,d);var P=[];return d.forEach(function(N){P.push({x:N.x,y:N.y})}),y.updatePosition(E,I,d),(g=y.tick)===null||g===void 0||g.call(y),P}},w.prototype.calRepulsive=function(b,g){var y=this,d=y.getMass,S=y.factor,_=y.coulombDisScale,E=y.preventOverlap,I=y.collideStrength,P=I===void 0?1:I,N=y.nodeStrength,H=y.nodeSize;g.forEach(function(nt,X){var Y=d?d(nt):1;g.forEach(function(Z,J){if(!(X>=J)){var it=nt.x-Z.x,tt=nt.y-Z.y;it===0&&tt===0&&(it=Math.random()*.01,tt=Math.random()*.01);var ut=it*it+tt*tt,vt=Math.sqrt(ut),pt=(vt+.1)*_,Dt=it/vt,Ot=tt/vt,te=(N(nt)+N(Z))*.5*S/(pt*pt),Gt=d?d(Z):1;if(b[2*X]+=Dt*te,b[2*X+1]+=Ot*te,b[2*J]-=Dt*te,b[2*J+1]-=Ot*te,E&&(H(nt)+H(Z))/2>vt){var K=P*(N(nt)+N(Z))*.5/ut;b[2*X]+=Dt*K/Y,b[2*X+1]+=Ot*K/Y,b[2*J]-=Dt*K/Gt,b[2*J+1]-=Ot*K/Gt}}})})},w.prototype.calAttractive=function(b,g){var y=this,d=y.nodeMap,S=y.nodeIdxMap,_=y.linkDistance,E=y.edgeStrength,I=y.nodeSize,P=y.getMass;g.forEach(function(N,H){var nt=(0,B.getEdgeTerminal)(N,"source"),X=(0,B.getEdgeTerminal)(N,"target"),Y=d[nt],Z=d[X],J=Z.x-Y.x,it=Z.y-Y.y;J===0&&it===0&&(J=Math.random()*.01,it=Math.random()*.01);var tt=Math.sqrt(J*J+it*it),ut=J/tt,vt=it/tt,pt=_(N,Y,Z)||1+(I(Y)+I(Z)||0)/2,Dt=pt-tt,Ot=Dt*E(N),te=S[nt],Gt=S[X],K=P?P(Y):1,p=P?P(Z):1;b[2*te]-=ut*Ot/K,b[2*te+1]-=vt*Ot/K,b[2*Gt]+=ut*Ot/p,b[2*Gt+1]+=vt*Ot/p})},w.prototype.calGravity=function(b,g){for(var y=this,d=y.center,S=y.gravity,_=y.degrees,E=g.length,I=0;I<E;I++){var P=g[I],N=P.x-d[0],H=P.y-d[1],nt=S;if(y.getCenter){var X=y.getCenter(P,_[I].all);X&&(0,B.isNumber)(X[0])&&(0,B.isNumber)(X[1])&&(0,B.isNumber)(X[2])&&(N=P.x-X[0],H=P.y-X[1],nt=X[2])}nt&&(b[2*I]-=nt*N,b[2*I+1]-=nt*H)}},w.prototype.updateVelocity=function(b,g,y,d){var S=this,_=y*S.damping;d.forEach(function(E,I){var P=b[2*I]*_||.01,N=b[2*I+1]*_||.01,H=Math.sqrt(P*P+N*N);if(H>S.maxSpeed){var nt=S.maxSpeed/H;P=nt*P,N=nt*N}g[2*I]=P,g[2*I+1]=N})},w.prototype.updatePosition=function(b,g,y){y.forEach(function(d,S){if((0,B.isNumber)(d.fx)&&(0,B.isNumber)(d.fy)){d.x=d.fx,d.y=d.fy;return}var _=b[2*S]*g,E=b[2*S+1]*g;d.x+=_,d.y+=E})},w.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},w.prototype.destroy=function(){var b=this;b.stop(),b.tick=null,b.nodes=null,b.edges=null,b.destroyed=!0},w.prototype.getType=function(){return"gForce"},w}(j.Base);U.GForceLayout=k},81822:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var d=function(S,_){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,I){E.__proto__=I}||function(E,I){for(var P in I)Object.prototype.hasOwnProperty.call(I,P)&&(E[P]=I[P])},d(S,_)};return function(S,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");d(S,_);function E(){this.constructor=S}S.prototype=_===null?Object.create(_):(E.prototype=_.prototype,new E)}}(),j=this&&this.__awaiter||function(d,S,_,E){function I(P){return P instanceof _?P:new _(function(N){N(P)})}return new(_||(_=Promise))(function(P,N){function H(Y){try{X(E.next(Y))}catch(Z){N(Z)}}function nt(Y){try{X(E.throw(Y))}catch(Z){N(Z)}}function X(Y){Y.done?P(Y.value):I(Y.value).then(H,nt)}X((E=E.apply(d,S||[])).next())})},B=this&&this.__generator||function(d,S){var _={label:0,sent:function(){if(P[0]&1)throw P[1];return P[1]},trys:[],ops:[]},E,I,P,N;return N={next:H(0),throw:H(1),return:H(2)},typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function H(X){return function(Y){return nt([X,Y])}}function nt(X){if(E)throw new TypeError("Generator is already executing.");for(;N&&(N=0,X[0]&&(_=0)),_;)try{if(E=1,I&&(P=X[0]&2?I.return:X[0]?I.throw||((P=I.return)&&P.call(I),0):I.next)&&!(P=P.call(I,X[1])).done)return P;switch(I=0,P&&(X=[X[0]&2,P.value]),X[0]){case 0:case 1:P=X;break;case 4:return _.label++,{value:X[1],done:!1};case 5:_.label++,I=X[1],X=[0];continue;case 7:X=_.ops.pop(),_.trys.pop();continue;default:if(P=_.trys,!(P=P.length>0&&P[P.length-1])&&(X[0]===6||X[0]===2)){_=0;continue}if(X[0]===3&&(!P||X[1]>P[0]&&X[1]<P[3])){_.label=X[1];break}if(X[0]===6&&_.label<P[1]){_.label=P[1],P=X;break}if(P&&_.label<P[2]){_.label=P[2],_.ops.push(X);break}P[2]&&_.ops.pop(),_.trys.pop();continue}X=S.call(d,_)}catch(Y){X=[6,Y],I=0}finally{E=P=0}if(X[0]&5)throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}};Object.defineProperty(U,"__esModule",{value:!0}),U.FruchtermanGPULayout=void 0;var L=z(46253),k=z(8273),D=z(94502),w=z(38342),b=z(41713),g=z(24979),y=function(d){F(S,d);function S(_){var E=d.call(this)||this;return E.maxIteration=1e3,E.gravity=10,E.speed=1,E.clustering=!1,E.clusterField="cluster",E.clusterGravity=10,E.workerEnabled=!1,E.nodes=[],E.edges=[],E.width=300,E.height=300,E.nodeMap={},E.nodeIdxMap={},E.updateCfg(_),E}return S.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},S.prototype.execute=function(){return j(this,void 0,void 0,function(){var _,E,I,P,N,H=this;return B(this,function(nt){switch(nt.label){case 0:return _=this,E=_.nodes,!E||E.length===0?(_.onLayoutEnd&&_.onLayoutEnd(),[2]):(!_.width&&typeof window!="undefined"&&(_.width=window.innerWidth),!_.height&&typeof window!="undefined"&&(_.height=window.innerHeight),_.center||(_.center=[_.width/2,_.height/2]),I=_.center,E.length===1?(E[0].x=I[0],E[0].y=I[1],_.onLayoutEnd&&_.onLayoutEnd(),[2]):(P={},N={},E.forEach(function(X,Y){(0,k.isNumber)(X.x)||(X.x=Math.random()*H.width),(0,k.isNumber)(X.y)||(X.y=Math.random()*H.height),P[X.id]=X,N[X.id]=Y}),_.nodeMap=P,_.nodeIdxMap=N,[4,_.run()]));case 1:return nt.sent(),[2]}})})},S.prototype.executeWithWorker=function(_,E){return j(this,void 0,void 0,function(){var I,P,N,H,nt,X=this;return B(this,function(Y){switch(Y.label){case 0:return I=this,P=I.nodes,N=I.center,!P||P.length===0?[2]:P.length===1?(P[0].x=N[0],P[0].y=N[1],[2]):(H={},nt={},P.forEach(function(Z,J){(0,k.isNumber)(Z.x)||(Z.x=Math.random()*X.width),(0,k.isNumber)(Z.y)||(Z.y=Math.random()*X.height),H[Z.id]=Z,nt[Z.id]=J}),I.nodeMap=H,I.nodeIdxMap=nt,[4,I.run(_,E)]);case 1:return Y.sent(),[2]}})})},S.prototype.run=function(_,E){return j(this,void 0,void 0,function(){var I,P,N,H,nt,X,Y,Z,J,it,tt,ut,vt,pt,Dt,Ot,te,Gt,K,p,at,ht,wt,Mt,Ut,Vt,Me=this;return B(this,function(Wt){switch(Wt.label){case 0:for(I=this,P=I.nodes,N=I.edges,H=I.maxIteration,nt=I.center,X=I.height*I.width,Y=Math.sqrt(X)/10,Z=X/(P.length+1),J=Math.sqrt(Z),it=I.speed,tt=I.clustering,ut=(0,w.attributesToTextureData)([I.clusterField],P),vt=ut.array,pt=ut.count,P.forEach(function(ae,he){var Se=0,xe=0;(0,k.isNumber)(ae.fx)&&(0,k.isNumber)(ae.fy)&&(Se=ae.fx||.001,xe=ae.fy||.001),vt[4*he+1]=Se,vt[4*he+2]=xe}),Dt=P.length,Ot=(0,w.buildTextureData)(P,N),te=Ot.maxEdgePerVetex,Gt=Ot.array,K=I.workerEnabled,K?p=D.World.create({canvas:_,engineOptions:{supportCompute:!0}}):p=D.World.create({engineOptions:{supportCompute:!0}}),at=I.onLayoutEnd,ht=[],wt=0;wt<pt;wt++)ht.push(0,0,0,0);return Mt=p.createKernel(b.fruchtermanBundle).setDispatch([Dt,1,1]).setBinding({u_Data:Gt,u_K:J,u_K2:Z,u_Gravity:I.gravity,u_ClusterGravity:I.clusterGravity||I.gravity||1,u_Speed:it,u_MaxDisplace:Y,u_Clustering:tt?1:0,u_Center:nt,u_AttributeArray:vt,u_ClusterCenters:ht,MAX_EDGE_PER_VERTEX:te,VERTEX_COUNT:Dt}),tt&&(Ut=p.createKernel(b.clusterBundle).setDispatch([pt,1,1]).setBinding({u_Data:Gt,u_NodeAttributes:vt,u_ClusterCenters:ht,VERTEX_COUNT:Dt,CLUSTER_COUNT:pt})),Vt=function(){return j(Me,void 0,void 0,function(){var ae,he;return B(this,function(Se){switch(Se.label){case 0:ae=0,Se.label=1;case 1:return ae<H?[4,Mt.execute()]:[3,6];case 2:return Se.sent(),tt?(Ut.setBinding({u_Data:Mt}),[4,Ut.execute()]):[3,4];case 3:Se.sent(),Mt.setBinding({u_ClusterCenters:Ut}),Se.label=4;case 4:Mt.setBinding({u_MaxDisplace:Y*=.99}),Se.label=5;case 5:return ae++,[3,1];case 6:return[4,Mt.getOutput()];case 7:return he=Se.sent(),_?E.postMessage({type:g.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:he}):P.forEach(function(xe,Bt){var fe=he[4*Bt],Le=he[4*Bt+1];xe.x=fe,xe.y=Le}),at&&at(),[2]}})})},[4,Vt()];case 1:return Wt.sent(),[2]}})})},S.prototype.getType=function(){return"fruchterman-gpu"},S}(L.Base);U.FruchtermanGPULayout=y},41713:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.clusterBundle=U.clusterCode=U.fruchtermanBundle=U.fruchtermanCode=void 0,U.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,U.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',U.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,U.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},86043:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var S=function(_,E){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,P){I.__proto__=P}||function(I,P){for(var N in P)Object.prototype.hasOwnProperty.call(P,N)&&(I[N]=P[N])},S(_,E)};return function(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");S(_,E);function I(){this.constructor=_}_.prototype=E===null?Object.create(E):(I.prototype=E.prototype,new I)}}(),j=this&&this.__awaiter||function(S,_,E,I){function P(N){return N instanceof E?N:new E(function(H){H(N)})}return new(E||(E=Promise))(function(N,H){function nt(Z){try{Y(I.next(Z))}catch(J){H(J)}}function X(Z){try{Y(I.throw(Z))}catch(J){H(J)}}function Y(Z){Z.done?N(Z.value):P(Z.value).then(nt,X)}Y((I=I.apply(S,_||[])).next())})},B=this&&this.__generator||function(S,_){var E={label:0,sent:function(){if(N[0]&1)throw N[1];return N[1]},trys:[],ops:[]},I,P,N,H;return H={next:nt(0),throw:nt(1),return:nt(2)},typeof Symbol=="function"&&(H[Symbol.iterator]=function(){return this}),H;function nt(Y){return function(Z){return X([Y,Z])}}function X(Y){if(I)throw new TypeError("Generator is already executing.");for(;H&&(H=0,Y[0]&&(E=0)),E;)try{if(I=1,P&&(N=Y[0]&2?P.return:Y[0]?P.throw||((N=P.return)&&N.call(P),0):P.next)&&!(N=N.call(P,Y[1])).done)return N;switch(P=0,N&&(Y=[Y[0]&2,N.value]),Y[0]){case 0:case 1:N=Y;break;case 4:return E.label++,{value:Y[1],done:!1};case 5:E.label++,P=Y[1],Y=[0];continue;case 7:Y=E.ops.pop(),E.trys.pop();continue;default:if(N=E.trys,!(N=N.length>0&&N[N.length-1])&&(Y[0]===6||Y[0]===2)){E=0;continue}if(Y[0]===3&&(!N||Y[1]>N[0]&&Y[1]<N[3])){E.label=Y[1];break}if(Y[0]===6&&E.label<N[1]){E.label=N[1],N=Y;break}if(N&&E.label<N[2]){E.label=N[2],E.ops.push(Y);break}N[2]&&E.ops.pop(),E.trys.pop();continue}Y=_.call(S,E)}catch(Z){Y=[6,Z],P=0}finally{I=N=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(U,"__esModule",{value:!0}),U.GForceGPULayout=void 0;var L=z(46253),k=z(8273),D=z(94502),w=z(38342),b=z(64446),g=z(53733),y=z(24979),d=function(S){F(_,S);function _(E){var I=S.call(this)||this;return I.maxIteration=1e3,I.edgeStrength=200,I.nodeStrength=1e3,I.coulombDisScale=.005,I.damping=.9,I.maxSpeed=1e3,I.minMovement=.5,I.interval=.02,I.factor=1,I.linkDistance=1,I.gravity=10,I.workerEnabled=!1,I.nodes=[],I.edges=[],I.width=300,I.height=300,I.nodeMap={},I.nodeIdxMap={},I.updateCfg(E),I}return _.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},_.prototype.execute=function(){return j(this,void 0,void 0,function(){var E,I,P,N,H;return B(this,function(nt){switch(nt.label){case 0:return E=this,I=E.nodes,!I||I.length===0?(E.onLayoutEnd&&E.onLayoutEnd(),[2]):(!E.width&&typeof window!="undefined"&&(E.width=window.innerWidth),!E.height&&typeof window!="undefined"&&(E.height=window.innerHeight),E.center||(E.center=[E.width/2,E.height/2]),P=E.center,I.length===1?(I[0].x=P[0],I[0].y=P[1],E.onLayoutEnd&&E.onLayoutEnd(),[2]):(N={},H={},I.forEach(function(X,Y){(0,k.isNumber)(X.x)||(X.x=Math.random()*E.width),(0,k.isNumber)(X.y)||(X.y=Math.random()*E.height),N[X.id]=X,H[X.id]=Y}),E.nodeMap=N,E.nodeIdxMap=H,E.nodeStrength=(0,w.proccessToFunc)(E.nodeStrength,1),E.edgeStrength=(0,w.proccessToFunc)(E.edgeStrength,1),[4,E.run()]));case 1:return nt.sent(),[2]}})})},_.prototype.executeWithWorker=function(E,I){var P=this,N=P.nodes,H=P.center;if(!(!N||N.length===0)){if(N.length===1){N[0].x=H[0],N[0].y=H[1];return}var nt={},X={};N.forEach(function(Y,Z){(0,k.isNumber)(Y.x)||(Y.x=Math.random()*P.width),(0,k.isNumber)(Y.y)||(Y.y=Math.random()*P.height),nt[Y.id]=Y,X[Y.id]=Z}),P.nodeMap=nt,P.nodeIdxMap=X,P.nodeStrength=(0,w.proccessToFunc)(P.nodeStrength,1),P.edgeStrength=(0,w.proccessToFunc)(P.edgeStrength,1),P.run(E,I)}},_.prototype.run=function(E,I){return j(this,void 0,void 0,function(){var P,N,H,nt,X,Y,Z,J,it,tt,ut,vt,pt,Dt,Ot,te,Gt,K,p,at,ht,wt,Mt,Ut,Vt,Me,Wt,ae=this;return B(this,function(he){switch(he.label){case 0:for(P=this,N=P.nodes,H=P.edges,nt=P.maxIteration,!P.width&&typeof window!="undefined"&&(P.width=window.innerWidth),!P.height&&typeof window!="undefined"&&(P.height=window.innerHeight),X=N.length,P.linkDistance=(0,w.proccessToFunc)(P.linkDistance),P.edgeStrength=(0,w.proccessToFunc)(P.edgeStrength),Y=(0,w.buildTextureDataWithTwoEdgeAttr)(N,H,P.linkDistance,P.edgeStrength),Z=Y.maxEdgePerVetex,J=Y.array,P.degrees=(0,b.getDegree)(N.length,P.nodeIdxMap,H).map(function(Se){return Se.all}),it=[],tt=[],ut=[],vt=[],pt=[],Dt=[],Ot=[],P.getMass||(P.getMass=function(Se){return P.degrees[P.nodeIdxMap[Se.id]]||1}),te=P.gravity,Gt=P.center,N.forEach(function(Se,xe){it.push(P.getMass(Se)),tt.push(P.nodeStrength(Se)),P.degrees[xe]||(P.degrees[xe]=0);var Bt=[Gt[0],Gt[1],te];if(P.getCenter){var fe=P.getCenter(Se,P.degrees[xe]);fe&&(0,k.isNumber)(fe[0])&&(0,k.isNumber)(fe[1])&&(0,k.isNumber)(fe[2])&&(Bt=fe)}ut.push(Bt[0]),vt.push(Bt[1]),pt.push(Bt[2]),(0,k.isNumber)(Se.fx)&&(0,k.isNumber)(Se.fy)?(Dt.push(Se.fx||.001),Ot.push(Se.fy||.001)):(Dt.push(0),Ot.push(0))}),K=(0,w.arrayToTextureData)([it,P.degrees,tt,Dt]),p=(0,w.arrayToTextureData)([ut,vt,pt,Ot]),at=P.workerEnabled,at?ht=D.World.create({canvas:E,engineOptions:{supportCompute:!0}}):ht=D.World.create({engineOptions:{supportCompute:!0}}),wt=P.onLayoutEnd,Mt=[],J.forEach(function(Se){Mt.push(Se)}),Ut=0;Ut<4;Ut++)Mt.push(0);return Vt=ht.createKernel(g.gForceBundle).setDispatch([X,1,1]).setBinding({u_Data:J,u_damping:P.damping,u_maxSpeed:P.maxSpeed,u_minMovement:P.minMovement,u_coulombDisScale:P.coulombDisScale,u_factor:P.factor,u_NodeAttributeArray1:K,u_NodeAttributeArray2:p,MAX_EDGE_PER_VERTEX:Z,VERTEX_COUNT:X,u_AveMovement:Mt,u_interval:P.interval}),Me=ht.createKernel(g.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:J,VERTEX_COUNT:X,u_AveMovement:[0,0,0,0]}),Wt=function(){return j(ae,void 0,void 0,function(){var Se,xe,Bt;return B(this,function(fe){switch(fe.label){case 0:Se=0,fe.label=1;case 1:return Se<nt?[4,Vt.execute()]:[3,5];case 2:return fe.sent(),Me.setBinding({u_Data:Vt}),[4,Me.execute()];case 3:fe.sent(),xe=Math.max(.02,P.interval-Se*.002),Vt.setBinding({u_interval:xe,u_AveMovement:Me}),fe.label=4;case 4:return Se++,[3,1];case 5:return[4,Vt.getOutput()];case 6:return Bt=fe.sent(),E?I.postMessage({type:y.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Bt}):N.forEach(function(Le,jt){var oe=Bt[4*jt],Te=Bt[4*jt+1];Le.x=oe,Le.y=Te}),wt&&wt(),[2]}})})},[4,Wt()];case 1:return he.sent(),[2]}})})},_.prototype.getType=function(){return"gForce-gpu"},_}(L.Base);U.GForceGPULayout=d},53733:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.aveMovementBundle=U.aveMovementCode=U.gForceBundle=U.gForceCode=void 0,U.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,U.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',U.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,U.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},74294:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var k=function(D,w){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,g){b.__proto__=g}||function(b,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(b[y]=g[y])},k(D,w)};return function(D,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");k(D,w);function b(){this.constructor=D}D.prototype=w===null?Object.create(w):(b.prototype=w.prototype,new b)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.GridLayout=void 0;var j=z(8273),B=z(46253),L=function(k){F(D,k);function D(w){var b=k.call(this)||this;return b.begin=[0,0],b.preventOverlap=!0,b.preventOverlapPadding=10,b.condense=!1,b.sortBy="degree",b.nodes=[],b.edges=[],b.width=300,b.height=300,b.row=0,b.col=0,b.cellWidth=0,b.cellHeight=0,b.cellUsed={},b.id2manPos={},b.onLayoutEnd=function(){},b.updateCfg(w),b}return D.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},D.prototype.execute=function(){var w=this,b=w.nodes,g=w.edges,y=w.begin,d=b.length;if(d===0)return w.onLayoutEnd&&w.onLayoutEnd(),{nodes:b,edges:g};if(d===1)return b[0].x=y[0],b[0].y=y[1],w.onLayoutEnd&&w.onLayoutEnd(),{nodes:b,edges:g};var S=w.sortBy,_=w.width,E=w.height,I=w.condense,P=w.preventOverlapPadding,N=w.preventOverlap,H=w.nodeSpacing,nt=w.nodeSize,X=[];b.forEach(function(K){X.push(K)});var Y={};if(X.forEach(function(K,p){Y[K.id]=p}),(S==="degree"||!(0,j.isString)(S)||X[0][S]===void 0)&&(S="degree",(0,j.isNaN)(b[0].degree))){var Z=(0,j.getDegree)(X.length,Y,g);X.forEach(function(K,p){K.degree=Z[p].all})}X.sort(function(K,p){return p[S]-K[S]}),!_&&typeof window!="undefined"&&(_=window.innerWidth),!E&&typeof window!="undefined"&&(E=window.innerHeight);var J=w.rows,it=w.cols!=null?w.cols:w.columns;if(w.cells=d,J!=null&&it!=null?(w.rows=J,w.cols=it):J!=null&&it==null?(w.rows=J,w.cols=Math.ceil(w.cells/w.rows)):J==null&&it!=null?(w.cols=it,w.rows=Math.ceil(w.cells/w.cols)):(w.splits=Math.sqrt(w.cells*w.height/w.width),w.rows=Math.round(w.splits),w.cols=Math.round(w.width/w.height*w.splits)),w.rows=Math.max(w.rows,1),w.cols=Math.max(w.cols,1),w.cols*w.rows>w.cells){var tt=w.small(),ut=w.large();(tt-1)*ut>=w.cells?w.small(tt-1):(ut-1)*tt>=w.cells&&w.large(ut-1)}else for(;w.cols*w.rows<w.cells;){var tt=w.small(),ut=w.large();(ut+1)*tt>=w.cells?w.large(ut+1):w.small(tt+1)}if(w.cellWidth=_/w.cols,w.cellHeight=E/w.rows,I&&(w.cellWidth=0,w.cellHeight=0),N||H){var vt=(0,j.getFuncByUnknownType)(10,H),pt=(0,j.getFuncByUnknownType)(30,nt,!1);X.forEach(function(K){(!K.x||!K.y)&&(K.x=0,K.y=0);var p=pt(K)||30,at,ht;(0,j.isArray)(p)?(at=p[0],ht=p[1]):(at=p,ht=p);var wt=vt!==void 0?vt(K):P,Mt=at+wt,Ut=ht+wt;w.cellWidth=Math.max(w.cellWidth,Mt),w.cellHeight=Math.max(w.cellHeight,Ut)})}w.cellUsed={},w.row=0,w.col=0,w.id2manPos={};for(var Dt=0;Dt<X.length;Dt++){var Ot=X[Dt],te=void 0;if(w.position&&(te=w.position(Ot)),te&&(te.row!==void 0||te.col!==void 0)){var Gt={row:te.row,col:te.col};if(Gt.col===void 0)for(Gt.col=0;w.used(Gt.row,Gt.col);)Gt.col++;else if(Gt.row===void 0)for(Gt.row=0;w.used(Gt.row,Gt.col);)Gt.row++;w.id2manPos[Ot.id]=Gt,w.use(Gt.row,Gt.col)}w.getPos(Ot)}return w.onLayoutEnd&&w.onLayoutEnd(),{edges:g,nodes:X}},D.prototype.small=function(w){var b=this,g,y=b.rows||5,d=b.cols||5;if(w==null)g=Math.min(y,d);else{var S=Math.min(y,d);S===b.rows?b.rows=w:b.cols=w}return g},D.prototype.large=function(w){var b=this,g,y=b.rows||5,d=b.cols||5;if(w==null)g=Math.max(y,d);else{var S=Math.max(y,d);S===b.rows?b.rows=w:b.cols=w}return g},D.prototype.used=function(w,b){var g=this;return g.cellUsed["c-".concat(w,"-").concat(b)]||!1},D.prototype.use=function(w,b){var g=this;g.cellUsed["c-".concat(w,"-").concat(b)]=!0},D.prototype.moveToNextCell=function(){var w=this,b=w.cols||5;w.col++,w.col>=b&&(w.col=0,w.row++)},D.prototype.getPos=function(w){var b=this,g=b.begin,y=b.cellWidth,d=b.cellHeight,S,_,E=b.id2manPos[w.id];if(E)S=E.col*y+y/2+g[0],_=E.row*d+d/2+g[1];else{for(;b.used(b.row,b.col);)b.moveToNextCell();S=b.col*y+y/2+g[0],_=b.row*d+d/2+g[1],b.use(b.row,b.col),b.moveToNextCell()}w.x=S,w.y=_},D.prototype.getType=function(){return"grid"},D}(B.Base);U.GridLayout=L},64649:function(xr,U,z){"use strict";var F=this&&this.__createBinding||(Object.create?function(Z,J,it,tt){tt===void 0&&(tt=it);var ut=Object.getOwnPropertyDescriptor(J,it);(!ut||("get"in ut?!J.__esModule:ut.writable||ut.configurable))&&(ut={enumerable:!0,get:function(){return J[it]}}),Object.defineProperty(Z,tt,ut)}:function(Z,J,it,tt){tt===void 0&&(tt=it),Z[tt]=J[it]}),j=this&&this.__exportStar||function(Z,J){for(var it in Z)it!=="default"&&!Object.prototype.hasOwnProperty.call(J,it)&&F(J,Z,it)};Object.defineProperty(U,"__esModule",{value:!0}),U.ERLayout=U.ForceAtlas2Layout=U.ComboCombinedLayout=U.ComboForceLayout=U.GForceGPULayout=U.FruchtermanGPULayout=U.FruchtermanLayout=U.MDSLayout=U.ConcentricLayout=U.RadialLayout=U.DagreCompoundLayout=U.DagreLayout=U.CircularLayout=U.ForceLayout=U.Force2Layout=U.GForceLayout=U.RandomLayout=U.GridLayout=U.Layouts=U.Layout=void 0;var B=z(74294);Object.defineProperty(U,"GridLayout",{enumerable:!0,get:function(){return B.GridLayout}});var L=z(26729);Object.defineProperty(U,"RandomLayout",{enumerable:!0,get:function(){return L.RandomLayout}});var k=z(46260);Object.defineProperty(U,"GForceLayout",{enumerable:!0,get:function(){return k.GForceLayout}});var D=z(38129);Object.defineProperty(U,"Force2Layout",{enumerable:!0,get:function(){return D.Force2Layout}});var w=z(64180);Object.defineProperty(U,"ForceLayout",{enumerable:!0,get:function(){return w.ForceLayout}});var b=z(93959);Object.defineProperty(U,"CircularLayout",{enumerable:!0,get:function(){return b.CircularLayout}});var g=z(2);Object.defineProperty(U,"DagreLayout",{enumerable:!0,get:function(){return g.DagreLayout}});var y=z(77620);Object.defineProperty(U,"DagreCompoundLayout",{enumerable:!0,get:function(){return y.DagreCompoundLayout}});var d=z(90106);Object.defineProperty(U,"RadialLayout",{enumerable:!0,get:function(){return d.RadialLayout}});var S=z(98162);Object.defineProperty(U,"ConcentricLayout",{enumerable:!0,get:function(){return S.ConcentricLayout}});var _=z(98204);Object.defineProperty(U,"MDSLayout",{enumerable:!0,get:function(){return _.MDSLayout}});var E=z(23826);Object.defineProperty(U,"FruchtermanLayout",{enumerable:!0,get:function(){return E.FruchtermanLayout}});var I=z(81822);Object.defineProperty(U,"FruchtermanGPULayout",{enumerable:!0,get:function(){return I.FruchtermanGPULayout}});var P=z(86043);Object.defineProperty(U,"GForceGPULayout",{enumerable:!0,get:function(){return P.GForceGPULayout}});var N=z(48133);Object.defineProperty(U,"ComboForceLayout",{enumerable:!0,get:function(){return N.ComboForceLayout}});var H=z(6412);Object.defineProperty(U,"ComboCombinedLayout",{enumerable:!0,get:function(){return H.ComboCombinedLayout}});var nt=z(16919);Object.defineProperty(U,"ForceAtlas2Layout",{enumerable:!0,get:function(){return nt.ForceAtlas2Layout}});var X=z(40311);Object.defineProperty(U,"ERLayout",{enumerable:!0,get:function(){return X.ERLayout}});var Y=z(99745);Object.defineProperty(U,"Layout",{enumerable:!0,get:function(){return Y.Layout}}),Object.defineProperty(U,"Layouts",{enumerable:!0,get:function(){return Y.Layouts}}),j(z(2230),U)},99745:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.Layouts=U.Layout=void 0;var F=z(39464),j=z(74294),B=z(26729),L=z(38129),k=z(46260),D=z(64180),w=z(93959),b=z(2),g=z(90106),y=z(98162),d=z(98204),S=z(23826),_=z(81822),E=z(86043),I=z(48133),P=z(6412),N=z(16919),H=z(40311),nt=z(77620),X=z(8273),Y=function(){function Z(J){var it=(0,F.getLayoutByName)(J.type);this.layoutInstance=new it(J)}return Z.prototype.layout=function(J){return this.layoutInstance.layout(J)},Z.prototype.updateCfg=function(J){this.layoutInstance.updateCfg(J)},Z.prototype.init=function(J){this.correctLayers(J.nodes),this.layoutInstance.init(J)},Z.prototype.correctLayers=function(J){if(J!=null&&J.length){var it=1/0,tt=[];if(J.forEach(function(vt){(0,X.isString)(vt.layer)&&(vt.layer=parseInt(vt.layer,10)),!(vt.layer===void 0||isNaN(vt.layer))&&(tt.push(vt),vt.layer<it&&(it=vt.layer))}),it<=0){var ut=Math.abs(it)+1;tt.forEach(function(vt){return vt.layer+=ut})}}},Z.prototype.execute=function(){this.layoutInstance.execute()},Z.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},Z.prototype.destroy=function(){return this.layoutInstance.destroy()},Z}();U.Layout=Y,U.Layouts={force:D.ForceLayout,fruchterman:S.FruchtermanLayout,forceAtlas2:N.ForceAtlas2Layout,gForce:k.GForceLayout,force2:L.Force2Layout,dagre:b.DagreLayout,dagreCompound:nt.DagreCompoundLayout,circular:w.CircularLayout,radial:g.RadialLayout,concentric:y.ConcentricLayout,grid:j.GridLayout,mds:d.MDSLayout,comboForce:I.ComboForceLayout,comboCombined:P.ComboCombinedLayout,random:B.RandomLayout,"gForce-gpu":E.GForceGPULayout,"fruchterman-gpu":_.FruchtermanGPULayout,er:H.ERLayout}},98204:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var D=function(w,b){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var d in y)Object.prototype.hasOwnProperty.call(y,d)&&(g[d]=y[d])},D(w,b)};return function(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");D(w,b);function g(){this.constructor=w}w.prototype=b===null?Object.create(b):(g.prototype=b.prototype,new g)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.MDSLayout=void 0;var j=z(17521),B=z(8273),L=z(46253),k=function(D){F(w,D);function w(b){var g=D.call(this)||this;return g.center=[0,0],g.linkDistance=50,g.nodes=[],g.edges=[],g.onLayoutEnd=function(){},g.updateCfg(b),g}return w.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},w.prototype.execute=function(){var b=this,g=b.nodes,y=b.edges,d=y===void 0?[]:y,S=b.center;if(!g||g.length===0){b.onLayoutEnd&&b.onLayoutEnd();return}if(g.length===1){g[0].x=S[0],g[0].y=S[1],b.onLayoutEnd&&b.onLayoutEnd();return}var _=b.linkDistance,E=(0,B.getAdjMatrix)({nodes:g,edges:d},!1),I=(0,B.floydWarshall)(E);b.handleInfinity(I);var P=(0,B.scaleMatrix)(I,_);b.scaledDistances=P;var N=b.runMDS();return b.positions=N,N.forEach(function(H,nt){g[nt].x=H[0]+S[0],g[nt].y=H[1]+S[1]}),b.onLayoutEnd&&b.onLayoutEnd(),{nodes:g,edges:d}},w.prototype.runMDS=function(){var b=this,g=2,y=b.scaledDistances,d=j.Matrix.mul(j.Matrix.pow(y,2),-.5),S=d.mean("row"),_=d.mean("column"),E=d.mean();d.add(E).subRowVector(S).subColumnVector(_);var I=new j.SingularValueDecomposition(d),P=j.Matrix.sqrt(I.diagonalMatrix).diagonal();return I.leftSingularVectors.toJSON().map(function(N){return j.Matrix.mul([N],[P]).toJSON()[0].splice(0,g)})},w.prototype.handleInfinity=function(b){var g=-999999;b.forEach(function(y){y.forEach(function(d){d!==1/0&&g<d&&(g=d)})}),b.forEach(function(y,d){y.forEach(function(S,_){S===1/0&&(b[d][_]=g)})})},w.prototype.getType=function(){return"mds"},w}(L.Base);U.MDSLayout=k},90106:function(xr,U,z){"use strict";var F=this&&this.__createBinding||(Object.create?function(B,L,k,D){D===void 0&&(D=k);var w=Object.getOwnPropertyDescriptor(L,k);(!w||("get"in w?!L.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return L[k]}}),Object.defineProperty(B,D,w)}:function(B,L,k,D){D===void 0&&(D=k),B[D]=L[k]}),j=this&&this.__exportStar||function(B,L){for(var k in B)k!=="default"&&!Object.prototype.hasOwnProperty.call(L,k)&&F(L,B,k)};Object.defineProperty(U,"__esModule",{value:!0}),j(z(54652),U)},87e3:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var F=z(17521),j=function(){function B(L){this.distances=L.distances,this.dimension=L.dimension||2,this.linkDistance=L.linkDistance}return B.prototype.layout=function(){var L=this,k=L.dimension,D=L.distances,w=L.linkDistance;try{var b=F.Matrix.mul(F.Matrix.pow(D,2),-.5),g=b.mean("row"),y=b.mean("column"),d=b.mean();b.add(d).subRowVector(g).subColumnVector(y);var S=new F.SingularValueDecomposition(b),_=F.Matrix.sqrt(S.diagonalMatrix).diagonal();return S.leftSingularVectors.toJSON().map(function(H){return F.Matrix.mul([H],[_]).toJSON()[0].splice(0,k)})}catch(H){for(var E=[],I=0;I<D.length;I++){var P=Math.random()*w,N=Math.random()*w;E.push([P,N])}return E}},B}();U.default=j},54652:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var d=function(S,_){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,I){E.__proto__=I}||function(E,I){for(var P in I)Object.prototype.hasOwnProperty.call(I,P)&&(E[P]=I[P])},d(S,_)};return function(S,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");d(S,_);function E(){this.constructor=S}S.prototype=_===null?Object.create(_):(E.prototype=_.prototype,new E)}}(),j=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(U,"__esModule",{value:!0}),U.RadialLayout=void 0;var B=z(8273),L=z(46253),k=j(z(87e3)),D=j(z(78614));function w(d){for(var S=d.length,_=d[0].length,E=[],I=0;I<S;I++){for(var P=[],N=0;N<_;N++)d[I][N]!==0?P.push(1/(d[I][N]*d[I][N])):P.push(0);E.push(P)}return E}function b(d,S){var _=-1;return d.forEach(function(E,I){E.id===S&&(_=I)}),_}function g(d,S){return Math.sqrt((d[0]-S[0])*(d[0]-S[0])+(d[1]-S[1])*(d[1]-S[1]))}var y=function(d){F(S,d);function S(_){var E=d.call(this)||this;return E.maxIteration=1e3,E.focusNode=null,E.unitRadius=null,E.linkDistance=50,E.preventOverlap=!1,E.strictRadial=!0,E.maxPreventOverlapIteration=200,E.sortStrength=10,E.nodes=[],E.edges=[],E.updateCfg(_),E}return S.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},S.prototype.execute=function(){var _=this,E=_.nodes,I=_.edges||[];if(!E||E.length===0){_.onLayoutEnd&&_.onLayoutEnd();return}!_.width&&typeof window!="undefined"&&(_.width=window.innerWidth),!_.height&&typeof window!="undefined"&&(_.height=window.innerHeight),_.center||(_.center=[_.width/2,_.height/2]);var P=_.center;if(E.length===1){E[0].x=P[0],E[0].y=P[1],_.onLayoutEnd&&_.onLayoutEnd();return}var N=_.linkDistance,H=null;if((0,B.isString)(_.focusNode)){for(var nt=!1,X=0;X<E.length;X++)E[X].id===_.focusNode&&(H=E[X],_.focusNode=H,nt=!0,X=E.length);nt||(H=null)}else H=_.focusNode;H||(H=E[0],_.focusNode=H);var Y=b(E,H.id);Y<0&&(Y=0),_.focusIndex=Y;var Z=(0,B.getAdjMatrix)({nodes:E,edges:I},!1),J=(0,B.floydWarshall)(Z),it=_.maxToFocus(J,Y);_.handleInfinity(J,Y,it+1),_.distances=J;var tt=J[Y],ut=_.width||500,vt=_.height||500,pt=ut-P[0]>P[0]?P[0]:ut-P[0],Dt=vt-P[1]>P[1]?P[1]:vt-P[1];pt===0&&(pt=ut/2),Dt===0&&(Dt=vt/2);var Ot=Dt>pt?pt:Dt,te=Math.max.apply(Math,tt),Gt=[];tt.forEach(function(Se,xe){_.unitRadius||(_.unitRadius=Ot/te),Gt[xe]=Se*_.unitRadius}),_.radii=Gt;var K=_.eIdealDisMatrix();_.eIdealDistances=K;var p=w(K);_.weights=p;var at=new k.default({linkDistance:N,distances:K}),ht=at.layout();ht.forEach(function(Se){(0,B.isNaN)(Se[0])&&(Se[0]=Math.random()*N),(0,B.isNaN)(Se[1])&&(Se[1]=Math.random()*N)}),_.positions=ht,ht.forEach(function(Se,xe){E[xe].x=Se[0]+P[0],E[xe].y=Se[1]+P[1]}),ht.forEach(function(Se){Se[0]-=ht[Y][0],Se[1]-=ht[Y][1]}),_.run();var wt=_.preventOverlap,Mt=_.nodeSize,Ut,Vt=_.strictRadial;if(wt){var Me=_.nodeSpacing,Wt;(0,B.isNumber)(Me)?Wt=function(){return Me}:(0,B.isFunction)(Me)?Wt=Me:Wt=function(){return 0},Mt?(0,B.isArray)(Mt)?Ut=function(Se){var xe=Mt[0]>Mt[1]?Mt[0]:Mt[1];return xe+Wt(Se)}:Ut=function(Se){return Mt+Wt(Se)}:Ut=function(Se){if(Se.size){if((0,B.isArray)(Se.size)){var xe=Se.size[0]>Se.size[1]?Se.size[0]:Se.size[1];return xe+Wt(Se)}if((0,B.isObject)(Se.size)){var xe=Se.size.width>Se.size.height?Se.size.width:Se.size.height;return xe+Wt(Se)}return Se.size+Wt(Se)}return 10+Wt(Se)};var ae={nodes:E,nodeSizeFunc:Ut,adjMatrix:Z,positions:ht,radii:Gt,height:vt,width:ut,strictRadial:Vt,focusID:Y,iterations:_.maxPreventOverlapIteration||200,k:ht.length/4.5},he=new D.default(ae);ht=he.layout()}return ht.forEach(function(Se,xe){E[xe].x=Se[0]+P[0],E[xe].y=Se[1]+P[1]}),_.onLayoutEnd&&_.onLayoutEnd(),{nodes:E,edges:I}},S.prototype.run=function(){for(var _=this,E=_.maxIteration,I=_.positions||[],P=_.weights||[],N=_.eIdealDistances||[],H=_.radii||[],nt=0;nt<=E;nt++){var X=nt/E;_.oneIteration(X,I,H,N,P)}},S.prototype.oneIteration=function(_,E,I,P,N){var H=this,nt=1-_,X=H.focusIndex;E.forEach(function(Y,Z){var J=g(Y,[0,0]),it=J===0?0:1/J;if(Z!==X){var tt=0,ut=0,vt=0;E.forEach(function(Dt,Ot){if(Z!==Ot){var te=g(Y,Dt),Gt=te===0?0:1/te,K=P[Ot][Z];vt+=N[Z][Ot],tt+=N[Z][Ot]*(Dt[0]+K*(Y[0]-Dt[0])*Gt),ut+=N[Z][Ot]*(Dt[1]+K*(Y[1]-Dt[1])*Gt)}});var pt=I[Z]===0?0:1/I[Z];vt*=nt,vt+=_*pt*pt,tt*=nt,tt+=_*pt*Y[0]*it,Y[0]=tt/vt,ut*=nt,ut+=_*pt*Y[1]*it,Y[1]=ut/vt}})},S.prototype.eIdealDisMatrix=function(){var _=this,E=_.nodes;if(!E)return[];var I=_.distances,P=_.linkDistance,N=_.radii||[],H=_.unitRadius||50,nt=[];return I&&I.forEach(function(X,Y){var Z=[];X.forEach(function(J,it){if(Y===it)Z.push(0);else if(N[Y]===N[it])if(_.sortBy==="data")Z.push(J*(Math.abs(Y-it)*_.sortStrength)/(N[Y]/H));else if(_.sortBy){var tt=E[Y][_.sortBy]||0,ut=E[it][_.sortBy]||0;(0,B.isString)(tt)&&(tt=tt.charCodeAt(0)),(0,B.isString)(ut)&&(ut=ut.charCodeAt(0)),Z.push(J*(Math.abs(tt-ut)*_.sortStrength)/(N[Y]/H))}else Z.push(J*P/(N[Y]/H));else{var vt=(P+H)/2;Z.push(J*vt)}}),nt.push(Z)}),nt},S.prototype.handleInfinity=function(_,E,I){for(var P=_.length,N=0;N<P;N++)if(_[E][N]===1/0){_[E][N]=I,_[N][E]=I;for(var H=0;H<P;H++)_[N][H]!==1/0&&_[E][H]===1/0&&(_[E][H]=I+_[N][H],_[H][E]=I+_[N][H])}for(var N=0;N<P;N++)if(N!==E){for(var H=0;H<P;H++)if(_[N][H]===1/0){var nt=Math.abs(_[E][N]-_[E][H]);nt=nt===0?1:nt,_[N][H]=nt}}},S.prototype.maxToFocus=function(_,E){for(var I=0,P=0;P<_[E].length;P++)_[E][P]!==1/0&&(I=_[E][P]>I?_[E][P]:I);return I},S.prototype.getType=function(){return"radial"},S}(L.Base);U.RadialLayout=y},78614:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var z=800,F=function(){function j(B){this.disp=[],this.positions=B.positions,this.adjMatrix=B.adjMatrix,this.focusID=B.focusID,this.radii=B.radii,this.iterations=B.iterations||10,this.height=B.height||10,this.width=B.width||10,this.speed=B.speed||100,this.gravity=B.gravity||10,this.nodeSizeFunc=B.nodeSizeFunc,this.k=B.k||5,this.strictRadial=B.strictRadial,this.nodes=B.nodes}return j.prototype.layout=function(){var B=this,L=B.positions,k=[],D=B.iterations,w=B.width/10;B.maxDisplace=w,B.disp=k;for(var b=0;b<D;b++)L.forEach(function(g,y){k[y]={x:0,y:0}}),B.getRepulsion(),B.updatePositions();return L},j.prototype.getRepulsion=function(){var B=this,L=B.positions,k=B.nodes,D=B.disp,w=B.k,b=B.radii||[];L.forEach(function(g,y){D[y]={x:0,y:0},L.forEach(function(d,S){if(y!==S&&b[y]===b[S]){var _=g[0]-d[0],E=g[1]-d[1],I=Math.sqrt(_*_+E*E);if(I===0){I=1;var P=y>S?1:-1;_=.01*P,E=.01*P}if(I<B.nodeSizeFunc(k[y])/2+B.nodeSizeFunc(k[S])/2){var N=w*w/I;D[y].x+=_/I*N,D[y].y+=E/I*N}}})})},j.prototype.updatePositions=function(){var B=this,L=B.positions,k=B.disp,D=B.speed,w=B.strictRadial,b=B.focusID,g=B.maxDisplace||B.width/10;w&&k.forEach(function(d,S){var _=L[S][0]-L[b][0],E=L[S][1]-L[b][1],I=Math.sqrt(_*_+E*E),P=E/I,N=-_/I,H=Math.sqrt(d.x*d.x+d.y*d.y),nt=Math.acos((P*d.x+N*d.y)/H);nt>Math.PI/2&&(nt-=Math.PI/2,P*=-1,N*=-1);var X=Math.cos(nt)*H;d.x=P*X,d.y=N*X});var y=B.radii;L.forEach(function(d,S){if(S!==b){var _=Math.sqrt(k[S].x*k[S].x+k[S].y*k[S].y);if(_>0&&S!==b){var E=Math.min(g*(D/z),_);if(d[0]+=k[S].x/_*E,d[1]+=k[S].y/_*E,w){var I=d[0]-L[b][0],P=d[1]-L[b][1],N=Math.sqrt(I*I+P*P);I=I/N*y[S],P=P/N*y[S],d[0]=L[b][0]+I,d[1]=L[b][1]+P}}}})},j}();U.default=F},26729:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var L=function(k,D){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,b){w.__proto__=b}||function(w,b){for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&(w[g]=b[g])},L(k,D)};return function(k,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");L(k,D);function w(){this.constructor=k}k.prototype=D===null?Object.create(D):(w.prototype=D.prototype,new w)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.RandomLayout=void 0;var j=z(46253),B=function(L){F(k,L);function k(D){var w=L.call(this)||this;return w.center=[0,0],w.width=300,w.height=300,w.nodes=[],w.edges=[],w.onLayoutEnd=function(){},w.updateCfg(D),w}return k.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},k.prototype.execute=function(){var D=this,w=D.nodes,b=.9,g=D.center;return!D.width&&typeof window!="undefined"&&(D.width=window.innerWidth),!D.height&&typeof window!="undefined"&&(D.height=window.innerHeight),w&&w.forEach(function(y){y.x=(Math.random()-.5)*b*D.width+g[0],y.y=(Math.random()-.5)*b*D.height+g[1]}),D.onLayoutEnd&&D.onLayoutEnd(),{nodes:w,edges:this.edges}},k.prototype.getType=function(){return"random"},k}(j.Base);U.RandomLayout=B},2230:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0})},39464:function(xr,U,z){"use strict";var F=this&&this.__extends||function(){var b=function(g,y){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,S){d.__proto__=S}||function(d,S){for(var _ in S)Object.prototype.hasOwnProperty.call(S,_)&&(d[_]=S[_])},b(g,y)};return function(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");b(g,y);function d(){this.constructor=g}g.prototype=y===null?Object.create(y):(d.prototype=y.prototype,new d)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.getLayoutByName=U.unRegisterLayout=U.registerLayout=void 0;var j=z(46253),B=z(8273),L=new Map,k=function(b,g){if(L.get(b)&&console.warn("The layout with the name ".concat(b," exists already, it will be overridden")),(0,B.isObject)(g)){var y=function(d){F(S,d);function S(_){var E=this,I;E=d.call(this)||this;var P=E,N={},H=Object.assign({},P.getDefaultCfg(),((I=g.getDefaultCfg)===null||I===void 0?void 0:I.call(g))||{});return Object.assign(N,H,g,_),Object.keys(N).forEach(function(nt){var X=N[nt];P[nt]=X}),E}return S}(j.Base);L.set(b,y)}else L.set(b,g);return L.get(b)};U.registerLayout=k;var D=function(b){L.has(b)&&L.delete(b)};U.unRegisterLayout=D;var w=function(b){return L.has(b)?L.get(b):null};U.getLayoutByName=w},92272:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.isArray=void 0,U.isArray=Array.isArray},72612:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.getFuncByUnknownType=U.getFunc=U.isFunction=void 0;var F=z(8273),j=z(5049),B=function(D){return typeof D=="function"};U.isFunction=B;var L=function(D,w,b){var g;return b?g=b:(0,j.isNumber)(D)?g=function(){return D}:g=function(){return w},g};U.getFunc=L;var k=function(D,w,b){return b===void 0&&(b=!0),!w&&w!==0?function(g){return g.size?(0,F.isArray)(g.size)?g.size[0]>g.size[1]?g.size[0]:g.size[1]:(0,F.isObject)(g.size)?g.size.width>g.size.height?g.size.width:g.size.height:g.size:D}:(0,U.isFunction)(w)?w:(0,j.isNumber)(w)?function(){return w}:(0,F.isArray)(w)?function(){if(b){var g=Math.max.apply(Math,w);return isNaN(g)?D:g}return w}:(0,F.isObject)(w)?function(){if(b){var g=Math.max(w.width,w.height);return isNaN(g)?D:g}return[w.width,w.height]}:function(){return D}};U.getFuncByUnknownType=k},38342:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.arrayToTextureData=U.attributesToTextureData=U.buildTextureDataWithTwoEdgeAttr=U.buildTextureData=U.proccessToFunc=void 0;var F=z(8273),j=z(64446),B=function(b,g){var y;return b?(0,F.isNumber)(b)?y=function(){return b}:y=b:y=function(){return g||1},y};U.proccessToFunc=B;var L=function(b,g){var y=[],d=[],S={},_=0;for(_=0;_<b.length;_++){var E=b[_];S[E.id]=_,y.push(E.x),y.push(E.y),y.push(0),y.push(0),d.push([])}for(_=0;_<g.length;_++){var I=g[_],P=(0,j.getEdgeTerminal)(I,"source"),N=(0,j.getEdgeTerminal)(I,"target");!isNaN(S[P])&&!isNaN(S[N])&&(d[S[P]].push(S[N]),d[S[N]].push(S[P]))}var H=0;for(_=0;_<b.length;_++){var nt=y.length,X=d[_],Y=X.length;y[_*4+2]=nt,y[_*4+3]=Y,H=Math.max(H,Y);for(var Z=0;Z<Y;++Z){var J=X[Z];y.push(+J)}}for(;y.length%4!==0;)y.push(0);return{maxEdgePerVetex:H,array:new Float32Array(y)}};U.buildTextureData=L;var k=function(b,g,y,d){var S=[],_=[],E={},I=0;for(I=0;I<b.length;I++){var P=b[I];E[P.id]=I,S.push(P.x),S.push(P.y),S.push(0),S.push(0),_.push([])}for(I=0;I<g.length;I++){var N=g[I],H=(0,j.getEdgeTerminal)(N,"source"),nt=(0,j.getEdgeTerminal)(N,"target");_[E[H]].push(E[nt]),_[E[H]].push(y(N)),_[E[H]].push(d(N)),_[E[H]].push(0),_[E[nt]].push(E[H]),_[E[nt]].push(y(N)),_[E[nt]].push(d(N)),_[E[nt]].push(0)}var X=0;for(I=0;I<b.length;I++){var Y=S.length,Z=_[I],J=Z.length;S[I*4+2]=Y+1048576*J/4,S[I*4+3]=0,X=Math.max(X,J/4);for(var it=0;it<J;++it){var tt=Z[it];S.push(+tt)}}for(;S.length%4!==0;)S.push(0);return{maxEdgePerVetex:X,array:new Float32Array(S)}};U.buildTextureDataWithTwoEdgeAttr=k;var D=function(b,g){var y=[],d=b.length,S={};return g.forEach(function(_){b.forEach(function(E,I){if(S[_[E]]===void 0&&(S[_[E]]=Object.keys(S).length),y.push(S[_[E]]),I===d-1)for(;y.length%4!==0;)y.push(0)})}),{array:new Float32Array(y),count:Object.keys(S).length}};U.attributesToTextureData=D;var w=function(b){for(var g=[],y=b.length,d=b[0].length,S=function(E){b.forEach(function(I,P){if(g.push(I[E]),P===y-1)for(;g.length%4!==0;)g.push(0)})},_=0;_<d;_++)S(_);return new Float32Array(g)};U.arrayToTextureData=w},8273:function(xr,U,z){"use strict";var F=this&&this.__createBinding||(Object.create?function(B,L,k,D){D===void 0&&(D=k);var w=Object.getOwnPropertyDescriptor(L,k);(!w||("get"in w?!L.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return L[k]}}),Object.defineProperty(B,D,w)}:function(B,L,k,D){D===void 0&&(D=k),B[D]=L[k]}),j=this&&this.__exportStar||function(B,L){for(var k in B)k!=="default"&&!Object.prototype.hasOwnProperty.call(L,k)&&F(L,B,k)};Object.defineProperty(U,"__esModule",{value:!0}),j(z(42761),U),j(z(92272),U),j(z(5049),U),j(z(64446),U),j(z(98857),U),j(z(72612),U)},64446:function(xr,U,z){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.getCoreNodeAndRelativeLeafNodes=U.getAvgNodePosition=U.getLayoutBBox=U.traverseTreeUp=U.scaleMatrix=U.getAdjMatrix=U.floydWarshall=U.getDegreeMap=U.getDegree=U.getEdgeTerminal=void 0;var F=z(92272),j=z(5049),B=z(98857),L=function(H,nt){var X=H[nt];return(0,B.isObject)(X)?X.cell:X};U.getEdgeTerminal=L;var k=function(H,nt,X){for(var Y=[],Z=0;Z<H;Z++)Y[Z]={in:0,out:0,all:0};return X&&X.forEach(function(J){var it=(0,U.getEdgeTerminal)(J,"source"),tt=(0,U.getEdgeTerminal)(J,"target");it&&Y[nt[it]]&&(Y[nt[it]].out+=1,Y[nt[it]].all+=1),tt&&Y[nt[tt]]&&(Y[nt[tt]].in+=1,Y[nt[tt]].all+=1)}),Y};U.getDegree=k;var D=function(H,nt){var X={};return H.forEach(function(Y){X[Y.id]={in:0,out:0,all:0}}),nt&&nt.forEach(function(Y){var Z=(0,U.getEdgeTerminal)(Y,"source"),J=(0,U.getEdgeTerminal)(Y,"target");Z&&(X[Z].out+=1,X[Z].all+=1),J&&(X[J].in+=1,X[J].all+=1)}),X};U.getDegreeMap=D;var w=function(H){for(var nt=[],X=H.length,Y=0;Y<X;Y+=1){nt[Y]=[];for(var Z=0;Z<X;Z+=1)Y===Z?nt[Y][Z]=0:H[Y][Z]===0||!H[Y][Z]?nt[Y][Z]=1/0:nt[Y][Z]=H[Y][Z]}for(var J=0;J<X;J+=1)for(var Y=0;Y<X;Y+=1)for(var Z=0;Z<X;Z+=1)nt[Y][Z]>nt[Y][J]+nt[J][Z]&&(nt[Y][Z]=nt[Y][J]+nt[J][Z]);return nt};U.floydWarshall=w;var b=function(H,nt){var X=H.nodes,Y=H.edges,Z=[],J={};if(!X)throw new Error("invalid nodes data!");return X&&X.forEach(function(it,tt){J[it.id]=tt;var ut=[];Z.push(ut)}),Y==null||Y.forEach(function(it){var tt=(0,U.getEdgeTerminal)(it,"source"),ut=(0,U.getEdgeTerminal)(it,"target"),vt=J[tt],pt=J[ut];vt===void 0||pt===void 0||(Z[vt][pt]=1,nt||(Z[pt][vt]=1))}),Z};U.getAdjMatrix=b;var g=function(H,nt){var X=[];return H.forEach(function(Y){var Z=[];Y.forEach(function(J){Z.push(J*nt)}),X.push(Z)}),X};U.scaleMatrix=g;var y=function(H,nt){if(H&&H.children){for(var X=H.children.length-1;X>=0;X--)if(!y(H.children[X],nt))return}return!!nt(H)},d=function(H,nt){typeof nt=="function"&&y(H,nt)};U.traverseTreeUp=d;var S=function(H){var nt=1/0,X=1/0,Y=-1/0,Z=-1/0;return H.forEach(function(J){var it=J.size;(0,F.isArray)(it)?it.length===1&&(it=[it[0],it[0]]):(0,j.isNumber)(it)?it=[it,it]:(it===void 0||isNaN(it))&&(it=[30,30]);var tt=[it[0]/2,it[1]/2],ut=J.x-tt[0],vt=J.x+tt[0],pt=J.y-tt[1],Dt=J.y+tt[1];nt>ut&&(nt=ut),X>pt&&(X=pt),Y<vt&&(Y=vt),Z<Dt&&(Z=Dt)}),{minX:nt,minY:X,maxX:Y,maxY:Z}};U.getLayoutBBox=S;var _=function(H){var nt={x:0,y:0};H.forEach(function(Y){nt.x+=Y.x||0,nt.y+=Y.y||0});var X=H.length||1;return{x:nt.x/X,y:nt.y/X}};U.getAvgNodePosition=_;var E=function(H,nt,X){var Y,Z;return H==="source"?((Y=X==null?void 0:X.find(function(J){return J.target===nt.id}))===null||Y===void 0?void 0:Y.source)||{}:((Z=X==null?void 0:X.find(function(J){return J.source===nt.id}))===null||Z===void 0?void 0:Z.target)||{}},I=function(H,nt,X){var Y=[];switch(H){case"source":Y=X==null?void 0:X.filter(function(J){return J.source===nt.id}).map(function(J){return J.target});break;case"target":Y=X==null?void 0:X.filter(function(J){return J.target===nt.id}).map(function(J){return J.source});break;case"both":Y=X==null?void 0:X.filter(function(J){return J.source===nt.id}).map(function(J){return J.target}).concat(X==null?void 0:X.filter(function(J){return J.target===nt.id}).map(function(J){return J.source}));break;default:break}var Z=new Set(Y);return Array.from(Z)},P=function(H,nt,X,Y,Z){var J=X[nt]||"",it=(Y==null?void 0:Y.filter(function(tt){return tt[nt]===J}))||[];return H==="leaf"&&(it=it.filter(function(tt){var ut,vt;return((ut=Z[tt.id])===null||ut===void 0?void 0:ut.in)===0||((vt=Z[tt.id])===null||vt===void 0?void 0:vt.out)===0})),it},N=function(H,nt,X,Y,Z,J){var it=Z[nt.id],tt=it.in,ut=it.out,vt=nt,pt=[];tt===0?(vt=E("source",nt,X),pt=I("both",vt,X).map(function(Ot){return J[Ot]})):ut===0&&(vt=E("target",nt,X),pt=I("both",vt,X).map(function(Ot){return J[Ot]})),pt=pt.filter(function(Ot){return Z[Ot.id]&&(Z[Ot.id].in===0||Z[Ot.id].out===0)});var Dt=P(H,Y,nt,pt,Z);return{coreNode:vt,relativeLeafNodes:pt,sameTypeLeafNodes:Dt}};U.getCoreNodeAndRelativeLeafNodes=N},5049:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.toNumber=U.isNaN=U.isNumber=void 0;var z=function(B){return typeof B=="number"};U.isNumber=z;var F=function(B){return Number.isNaN(Number(B))};U.isNaN=F;var j=function(B){var L=parseFloat(B);return(0,U.isNaN)(L)?B:L};U.toNumber=j},98857:function(xr,U){"use strict";var z=this&&this.__assign||function(){return z=Object.assign||function(B){for(var L,k=1,D=arguments.length;k<D;k++){L=arguments[k];for(var w in L)Object.prototype.hasOwnProperty.call(L,w)&&(B[w]=L[w])}return B},z.apply(this,arguments)};Object.defineProperty(U,"__esModule",{value:!0}),U.clone=U.isObject=void 0;var F=function(B){return B!==null&&typeof B=="object"};U.isObject=F;var j=function(B){if(B===null)return B;if(B instanceof Date)return new Date(B.getTime());if(B instanceof Array){var L=[];return B.forEach(function(D){L.push(D)}),L.map(function(D){return(0,U.clone)(D)})}if(typeof B=="object"&&Object.keys(B).length){var k=z({},B);return Object.keys(k).forEach(function(D){k[D]=(0,U.clone)(k[D])}),k}return B};U.clone=j},42761:function(xr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.camelize=U.isString=void 0;var z=function(B){return typeof B=="string"};U.isString=z;var F=function(B){var L=Object.create(null);return function(k){var D=L[k];return D||(L[k]=B(k))}},j=/-(\w)/g;U.camelize=F(function(B){return B.replace(j,function(L,k){return k?k.toUpperCase():""})})},88560:function(xr,U,z){"use strict";z.r(U),z.d(U,{Cache:function(){return vf},angleTo:function(){return pt},arcToCubic:function(){return Lt},assign:function(){return _r},augment:function(){return yn},clamp:function(){return Es},clearAnimationFrame:function(){return Ar},clone:function(){return Tn},clonePath:function(){return Hr},contains:function(){return gt},createDOM:function(){return pf},debounce:function(){return wa},deepMix:function(){return _i},difference:function(){return A},direction:function(){return vt},distanceSquareRoot:function(){return Zn},each:function(){return jr},endsWith:function(){return Po},equalizeSegments:function(){return Nr},every:function(){return Xs},extend:function(){return Di},filter:function(){return W},find:function(){return re},findIndex:function(){return pe},firstValue:function(){return or},fixedBase:function(){return So},flatten:function(){return rn},flattenDeep:function(){return An},forIn:function(){return Ft},get:function(){return Zc},getDrawDirection:function(){return ya},getPathArea:function(){return Bn},getPathBBox:function(){return $n},getPathBBoxTotalLength:function(){return Da},getPointAtLength:function(){return q},getRange:function(){return Qa},getRotatedCurve:function(){return Hn},getTotalLength:function(){return Jn},getType:function(){return jo},getWrapBehavior:function(){return Ri},gradient:function(){return E},group:function(){return bs},groupBy:function(){return _o},groupToMap:function(){return Ti},has:function(){return me},hasKey:function(){return We},hasValue:function(){return En},head:function(){return Qs},identity:function(){return In},includes:function(){return gt},indexOf:function(){return zi},isArguments:function(){return ws},isArray:function(){return Ge},isArrayLike:function(){return hn},isBoolean:function(){return Oi},isDate:function(){return ju},isDecimal:function(){return ts},isElement:function(){return Oe},isEmpty:function(){return Ja},isEqual:function(){return _s},isEqualWith:function(){return vs},isError:function(){return Uf},isEven:function(){return Ro},isFinite:function(){return Au},isFunction:function(){return k},isInteger:function(){return Xo},isMatch:function(){return je},isNegative:function(){return Fo},isNil:function(){return _t},isNull:function(){return h},isNumber:function(){return yo},isNumberEqual:function(){return Fi},isObject:function(){return De},isObjectLike:function(){return Pr},isOdd:function(){return Na},isPlainObject:function(){return $t},isPointInPolygon:function(){return iu},isPointInStroke:function(){return nr},isPolygonsIntersect:function(){return lo},isPositive:function(){return rs},isPrototype:function(){return St},isRegExp:function(){return Ht},isString:function(){return Oa},isType:function(){return ee},isUndefined:function(){return le},keys:function(){return vn},last:function(){return ki},lowerCase:function(){return li},lowerFirst:function(){return qi},map:function(){return Wf},mapValues:function(){return Kc},max:function(){return la},maxBy:function(){return Gi},memoize:function(){return D},min:function(){return aa},minBy:function(){return mo},mix:function(){return _r},mod:function(){return Ao},modifyCSS:function(){return mu},noop:function(){return hf},normalizePath:function(){return se},number2color:function(){return cs},omit:function(){return qc},parseRadius:function(){return oo},path2Absolute:function(){return oe},path2Curve:function(){return Mn},path2String:function(){return te},pick:function(){return mc},pull:function(){return xi},pullAt:function(){return bo},reduce:function(){return Ia},remove:function(){return ms},requestAnimationFrame:function(){return He},reverseCurve:function(){return Cn},rgb2arr:function(){return F},set:function(){return $c},size:function(){return au},some:function(){return Ys},sortBy:function(){return Uo},startsWith:function(){return Ts},substitute:function(){return Mu},throttle:function(){return Yf},toArray:function(){return xc},toCSSGradient:function(){return nt},toDegree:function(){return ns},toInteger:function(){return Vo},toRGB:function(){return d},toRadian:function(){return hs},toString:function(){return Vn},transform:function(){return tt},union:function(){return Eo},uniq:function(){return Qo},uniqueId:function(){return nu},upperCase:function(){return Hs},upperFirst:function(){return Ua},values:function(){return Rr},valuesOfKey:function(){return Us},vertical:function(){return Dt},wrapBehavior:function(){return Os}});function F(ot){return[parseInt(ot.substr(1,2),16),parseInt(ot.substr(3,2),16),parseInt(ot.substr(5,2),16)]}function j(ot){var mt=Math.round(ot).toString(16);return mt.length===1?"0"+mt:mt}function B(ot){return"#"+j(ot[0])+j(ot[1])+j(ot[2])}function L(ot){var mt,Tt,Yt,ie=ot||1;function ze(dr,Yr){++mt>ie&&(Yt=Tt,Xe(1),++mt),Tt[dr]=Yr}function Xe(dr){mt=0,Tt=Object.create(null),dr||(Yt=Object.create(null))}return Xe(),{clear:Xe,has:function(dr){return Tt[dr]!==void 0||Yt[dr]!==void 0},get:function(dr){var Yr=Tt[dr];if(Yr!==void 0)return Yr;if((Yr=Yt[dr])!==void 0)return ze(dr,Yr),Yr},set:function(dr,Yr){Tt[dr]!==void 0?Tt[dr]=Yr:ze(dr,Yr)}}}var k=function(ot){return typeof ot=="function"},D=function(ot,mt,Tt){if(Tt===void 0&&(Tt=128),!k(ot))throw new TypeError("Expected a function");var Yt=function(){for(var ie=[],ze=0;ze<arguments.length;ze++)ie[ze]=arguments[ze];var Xe=mt?mt.apply(this,ie):ie[0],dr=Yt.cache;if(dr.has(Xe))return dr.get(Xe);var Yr=ot.apply(this,ie);return dr.set(Xe,Yr),Yr};return Yt.cache=L(Tt),Yt},w=/rgba?\(([\s.,0-9]+)\)/;function b(){var ot=document.createElement("i");return ot.title="Web Colour Picker",ot.style.display="none",document.body.appendChild(ot),ot}var g;function y(ot){if(ot[0]==="#"&&ot.length===7)return ot;g||(g=b()),g.style.color=ot;var mt=document.defaultView.getComputedStyle(g,"").getPropertyValue("color"),Tt=w.exec(mt),Yt=Tt[1].split(/\s*,\s*/).map(function(ie){return Number(ie)});return mt=B(Yt),mt}var d=D(y,function(ot){return ot},256);function S(ot,mt,Tt,Yt){return ot[Yt]+(mt[Yt]-ot[Yt])*Tt}function _(ot,mt){var Tt=isNaN(Number(mt))||mt<0?0:mt>1?1:Number(mt),Yt=ot.length-1,ie=Math.floor(Yt*Tt),ze=Yt*Tt-ie,Xe=ot[ie],dr=ie===Yt?Xe:ot[ie+1];return B([S(Xe,dr,ze,0),S(Xe,dr,ze,1),S(Xe,dr,ze,2)])}function E(ot){var mt=typeof ot=="string"?ot.split("-"):ot,Tt=mt.map(function(Yt){return F(Yt.indexOf("#")===-1?d(Yt):Yt)});return function(Yt){return _(Tt,Yt)}}var I=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,P=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,N=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function H(ot){return/^[r,R,L,l]{1}[\s]*\(/.test(ot)}function nt(ot){if(H(ot)){var mt,Tt=void 0;if(ot[0]==="l"){var Yt=I.exec(ot),ie=+Yt[1]+90;Tt=Yt[2],mt="linear-gradient("+ie+"deg, "}else if(ot[0]==="r"){mt="radial-gradient(";var Yt=P.exec(ot);Tt=Yt[4]}var ze=Tt.match(N);return ze.forEach(function(Xe,dr){var Yr=Xe.split(":");mt+=Yr[1]+" "+Number(Yr[0])*100+"%",dr!==ze.length-1&&(mt+=", ")}),mt+=")",mt}return ot}var X=z(35600);function Y(ot,mt,Tt){var Yt=[0,0,0,0,0,0,0,0,0];return X.fromTranslation(Yt,Tt),X.multiply(ot,Yt,mt)}function Z(ot,mt,Tt){var Yt=[0,0,0,0,0,0,0,0,0];return X.fromRotation(Yt,Tt),X.multiply(ot,Yt,mt)}function J(ot,mt,Tt){var Yt=[0,0,0,0,0,0,0,0,0];return X.fromScaling(Yt,Tt),X.multiply(ot,Yt,mt)}function it(ot,mt,Tt){return X.multiply(ot,Tt,mt)}function tt(ot,mt){for(var Tt=ot?[].concat(ot):[1,0,0,0,1,0,0,0,1],Yt=0,ie=mt.length;Yt<ie;Yt++){var ze=mt[Yt];switch(ze[0]){case"t":Y(Tt,Tt,[ze[1],ze[2]]);break;case"s":J(Tt,Tt,[ze[1],ze[2]]);break;case"r":Z(Tt,Tt,ze[1]);break;case"m":it(Tt,Tt,ze[1]);break;default:break}}return Tt}var ut=z(31437);function vt(ot,mt){return ot[0]*mt[1]-mt[0]*ot[1]}function pt(ot,mt,Tt){var Yt=ut.angle(ot,mt),ie=vt(ot,mt)>=0;return Tt?ie?Math.PI*2-Yt:Yt:ie?Yt:Math.PI*2-Yt}function Dt(ot,mt,Tt){return Tt?(ot[0]=mt[1],ot[1]=-1*mt[0]):(ot[0]=-1*mt[1],ot[1]=mt[0]),ot}function Ot(ot,mt){if(mt==="off")return[].concat(ot);var Tt=typeof mt=="number"&&mt>=1?Math.pow(10,mt):1;return ot.map(function(Yt){var ie=Yt.slice(1).map(Number).map(function(ze){return mt?Math.round(ze*Tt)/Tt:Math.round(ze)});return[Yt[0]].concat(ie)})}function te(ot,mt){return mt===void 0&&(mt="off"),Ot(ot,mt).map(function(Tt){return Tt[0]+Tt.slice(1).join(" ")}).join("")}var Gt=z(97582),K={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function p(ot,mt,Tt){if(ot[Tt].length>7){ot[Tt].shift();for(var Yt=ot[Tt],ie=Tt;Yt.length;)mt[Tt]="A",ot.splice(ie+=1,0,["C"].concat(Yt.splice(0,6)));ot.splice(Tt,1)}}var at={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function ht(ot){return Array.isArray(ot)&&ot.every(function(mt){var Tt=mt[0].toLowerCase();return at[Tt]===mt.length-1&&"achlmqstvz".includes(Tt)})}function wt(ot){return ht(ot)&&ot.every(function(mt){var Tt=mt[0];return Tt===Tt.toUpperCase()})}function Mt(ot){return wt(ot)&&ot.every(function(mt){var Tt=mt[0];return"ACLMQZ".includes(Tt)})}function Ut(ot){for(var mt=ot.pathValue[ot.segmentStart],Tt=mt.toLowerCase(),Yt=ot.data;Yt.length>=at[Tt]&&(Tt==="m"&&Yt.length>2?(ot.segments.push([mt].concat(Yt.splice(0,2))),Tt="l",mt=mt==="m"?"l":"L"):ot.segments.push([mt].concat(Yt.splice(0,at[Tt]))),!!at[Tt]););}function Vt(ot){var mt=ot.index,Tt=ot.pathValue,Yt=Tt.charCodeAt(mt);if(Yt===48){ot.param=0,ot.index+=1;return}if(Yt===49){ot.param=1,ot.index+=1;return}ot.err='[path-util]: invalid Arc flag "'+Tt[mt]+'", expecting 0 or 1 at index '+mt}function Me(ot){return ot>=48&&ot<=57||ot===43||ot===45||ot===46}function Wt(ot){return ot>=48&&ot<=57}function ae(ot){var mt=ot.max,Tt=ot.pathValue,Yt=ot.index,ie=Yt,ze=!1,Xe=!1,dr=!1,Yr=!1,tn;if(ie>=mt){ot.err="[path-util]: Invalid path value at index "+ie+', "pathValue" is missing param';return}if(tn=Tt.charCodeAt(ie),(tn===43||tn===45)&&(ie+=1,tn=Tt.charCodeAt(ie)),!Wt(tn)&&tn!==46){ot.err="[path-util]: Invalid path value at index "+ie+', "'+Tt[ie]+'" is not a number';return}if(tn!==46){if(ze=tn===48,ie+=1,tn=Tt.charCodeAt(ie),ze&&ie<mt&&tn&&Wt(tn)){ot.err="[path-util]: Invalid path value at index "+Yt+', "'+Tt[Yt]+'" illegal number';return}for(;ie<mt&&Wt(Tt.charCodeAt(ie));)ie+=1,Xe=!0;tn=Tt.charCodeAt(ie)}if(tn===46){for(Yr=!0,ie+=1;Wt(Tt.charCodeAt(ie));)ie+=1,dr=!0;tn=Tt.charCodeAt(ie)}if(tn===101||tn===69){if(Yr&&!Xe&&!dr){ot.err="[path-util]: Invalid path value at index "+ie+', "'+Tt[ie]+'" invalid float exponent';return}if(ie+=1,tn=Tt.charCodeAt(ie),(tn===43||tn===45)&&(ie+=1),ie<mt&&Wt(Tt.charCodeAt(ie)))for(;ie<mt&&Wt(Tt.charCodeAt(ie));)ie+=1;else{ot.err="[path-util]: Invalid path value at index "+ie+', "'+Tt[ie]+'" invalid integer exponent';return}}ot.index=ie,ot.param=+ot.pathValue.slice(Yt,ie)}function he(ot){var mt=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return ot===10||ot===13||ot===8232||ot===8233||ot===32||ot===9||ot===11||ot===12||ot===160||ot>=5760&&mt.includes(ot)}function Se(ot){for(var mt=ot.pathValue,Tt=ot.max;ot.index<Tt&&he(mt.charCodeAt(ot.index));)ot.index+=1}function xe(ot){switch(ot|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function Bt(ot){return(ot|32)===97}function fe(ot){var mt=ot.max,Tt=ot.pathValue,Yt=ot.index,ie=Tt.charCodeAt(Yt),ze=at[Tt[Yt].toLowerCase()];if(ot.segmentStart=Yt,!xe(ie)){ot.err='[path-util]: Invalid path value "'+Tt[Yt]+'" is not a path command';return}if(ot.index+=1,Se(ot),ot.data=[],!ze){Ut(ot);return}for(;;){for(var Xe=ze;Xe>0;Xe-=1){if(Bt(ie)&&(Xe===3||Xe===4)?Vt(ot):ae(ot),ot.err.length)return;ot.data.push(ot.param),Se(ot),ot.index<mt&&Tt.charCodeAt(ot.index)===44&&(ot.index+=1,Se(ot))}if(ot.index>=ot.max||!Me(Tt.charCodeAt(ot.index)))break}Ut(ot)}var Le=function(){function ot(mt){this.pathValue=mt,this.segments=[],this.max=mt.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return ot}();function jt(ot){if(ht(ot))return[].concat(ot);var mt=new Le(ot);for(Se(mt);mt.index<mt.max&&!mt.err.length;)fe(mt);return mt.err?mt.err:mt.segments}function oe(ot){if(wt(ot))return[].concat(ot);var mt=jt(ot),Tt=0,Yt=0,ie=0,ze=0;return mt.map(function(Xe){var dr=Xe.slice(1).map(Number),Yr=Xe[0],tn=Yr.toUpperCase();if(Yr==="M")return Tt=dr[0],Yt=dr[1],ie=Tt,ze=Yt,["M",Tt,Yt];var On;if(Yr!==tn)switch(tn){case"A":On=[tn,dr[0],dr[1],dr[2],dr[3],dr[4],dr[5]+Tt,dr[6]+Yt];break;case"V":On=[tn,dr[0]+Yt];break;case"H":On=[tn,dr[0]+Tt];break;default:{var Gn=dr.map(function(ua,ma){return ua+(ma%2?Yt:Tt)});On=[tn].concat(Gn)}}else On=[tn].concat(dr);var Sn=On.length;switch(tn){case"Z":Tt=ie,Yt=ze;break;case"H":Tt=On[1];break;case"V":Yt=On[1];break;default:Tt=On[Sn-2],Yt=On[Sn-1],tn==="M"&&(ie=Tt,ze=Yt)}return On})}function Te(ot,mt){var Tt=ot[0],Yt=mt.x1,ie=mt.y1,ze=mt.x2,Xe=mt.y2,dr=ot.slice(1).map(Number),Yr=ot;if("TQ".includes(Tt)||(mt.qx=null,mt.qy=null),Tt==="H")Yr=["L",ot[1],ie];else if(Tt==="V")Yr=["L",Yt,ot[1]];else if(Tt==="S"){var tn=Yt*2-ze,On=ie*2-Xe;mt.x1=tn,mt.y1=On,Yr=["C",tn,On].concat(dr)}else if(Tt==="T"){var Gn=Yt*2-mt.qx,Sn=ie*2-mt.qy;mt.qx=Gn,mt.qy=Sn,Yr=["Q",Gn,Sn].concat(dr)}else if(Tt==="Q"){var ua=dr[0],ma=dr[1];mt.qx=ua,mt.qy=ma}return Yr}function se(ot){if(Mt(ot))return[].concat(ot);for(var mt=oe(ot),Tt=(0,Gt.__assign)({},K),Yt=0;Yt<mt.length;Yt+=1){mt[Yt]=Te(mt[Yt],Tt);var ie=mt[Yt],ze=ie.length;Tt.x1=+ie[ze-2],Tt.y1=+ie[ze-1],Tt.x2=+ie[ze-4]||Tt.x1,Tt.y2=+ie[ze-3]||Tt.y1}return mt}function Ie(ot){return Mt(ot)&&ot.every(function(mt){var Tt=mt[0];return"MC".includes(Tt)})}function Pe(ot,mt,Tt){var Yt=ot*Math.cos(Tt)-mt*Math.sin(Tt),ie=ot*Math.sin(Tt)+mt*Math.cos(Tt);return{x:Yt,y:ie}}function Lt(ot,mt,Tt,Yt,ie,ze,Xe,dr,Yr,tn){var On=ot,Gn=mt,Sn=Tt,ua=Yt,ma=dr,va=Yr,fa=Math.PI*120/180,Ra=Math.PI/180*(+ie||0),Kn=[],ka,xa,Qn,Ba,si;if(tn)xa=tn[0],Qn=tn[1],Ba=tn[2],si=tn[3];else{ka=Pe(On,Gn,-Ra),On=ka.x,Gn=ka.y,ka=Pe(ma,va,-Ra),ma=ka.x,va=ka.y;var pi=(On-ma)/2,ri=(Gn-va)/2,$a=pi*pi/(Sn*Sn)+ri*ri/(ua*ua);$a>1&&($a=Math.sqrt($a),Sn*=$a,ua*=$a);var Si=Sn*Sn,Ui=ua*ua,Wi=(ze===Xe?-1:1)*Math.sqrt(Math.abs((Si*Ui-Si*ri*ri-Ui*pi*pi)/(Si*ri*ri+Ui*pi*pi)));Ba=Wi*Sn*ri/ua+(On+ma)/2,si=Wi*-ua*pi/Sn+(Gn+va)/2,xa=Math.asin(((Gn-si)/ua*Math.pow(10,9)>>0)/Math.pow(10,9)),Qn=Math.asin(((va-si)/ua*Math.pow(10,9)>>0)/Math.pow(10,9)),xa=On<Ba?Math.PI-xa:xa,Qn=ma<Ba?Math.PI-Qn:Qn,xa<0&&(xa=Math.PI*2+xa),Qn<0&&(Qn=Math.PI*2+Qn),Xe&&xa>Qn&&(xa-=Math.PI*2),!Xe&&Qn>xa&&(Qn-=Math.PI*2)}var Ps=Qn-xa;if(Math.abs(Ps)>fa){var wc=Qn,ou=ma,xu=va;Qn=xa+fa*(Xe&&Qn>xa?1:-1),ma=Ba+Sn*Math.cos(Qn),va=si+ua*Math.sin(Qn),Kn=Lt(ma,va,Sn,ua,ie,0,Xe,ou,xu,[Qn,wc,Ba,si])}Ps=Qn-xa;var Iu=Math.cos(xa),Hu=Math.sin(xa),ks=Math.cos(Qn),Ku=Math.sin(Qn),Ou=Math.tan(Ps/4),yf=4/3*Sn*Ou,Zu=4/3*ua*Ou,Lu=[On,Gn],ds=[On+yf*Hu,Gn-Zu*Iu],Ks=[ma+yf*Ku,va-Zu*ks],su=[ma,va];if(ds[0]=2*Lu[0]-ds[0],ds[1]=2*Lu[1]-ds[1],tn)return ds.concat(Ks,su,Kn);Kn=ds.concat(Ks,su,Kn);for(var Du=[],as=0,bu=Kn.length;as<bu;as+=1)Du[as]=as%2?Pe(Kn[as-1],Kn[as],Ra).y:Pe(Kn[as],Kn[as+1],Ra).x;return Du}function Je(ot,mt,Tt,Yt,ie,ze){var Xe=.3333333333333333,dr=2/3;return[Xe*ot+dr*Tt,Xe*mt+dr*Yt,Xe*ie+dr*Tt,Xe*ze+dr*Yt,ie,ze]}function Lr(ot,mt,Tt){var Yt=ot[0],ie=ot[1],ze=mt[0],Xe=mt[1];return[Yt+(ze-Yt)*Tt,ie+(Xe-ie)*Tt]}var Vr=function(ot,mt,Tt,Yt){var ie=.5,ze=Lr([ot,mt],[Tt,Yt],ie);return(0,Gt.__spreadArray)((0,Gt.__spreadArray)([],ze,!0),[Tt,Yt,Tt,Yt],!1)};function Xr(ot,mt){var Tt=ot[0],Yt=ot.slice(1).map(Number),ie=Yt[0],ze=Yt[1],Xe,dr=mt.x1,Yr=mt.y1,tn=mt.x,On=mt.y;switch("TQ".includes(Tt)||(mt.qx=null,mt.qy=null),Tt){case"M":return mt.x=ie,mt.y=ze,ot;case"A":return Xe=[dr,Yr].concat(Yt),["C"].concat(Lt(Xe[0],Xe[1],Xe[2],Xe[3],Xe[4],Xe[5],Xe[6],Xe[7],Xe[8],Xe[9]));case"Q":return mt.qx=ie,mt.qy=ze,Xe=[dr,Yr].concat(Yt),["C"].concat(Je(Xe[0],Xe[1],Xe[2],Xe[3],Xe[4],Xe[5]));case"L":return["C"].concat(Vr(dr,Yr,ie,ze));case"Z":return dr===tn&&Yr===On?["C",dr,Yr,tn,On,tn,On]:["C"].concat(Vr(dr,Yr,tn,On));default:}return ot}function Mn(ot,mt){if(mt===void 0&&(mt=!1),Ie(ot)){var Tt=[].concat(ot);return mt?[Tt,[]]:Tt}for(var Yt=se(ot),ie=(0,Gt.__assign)({},K),ze=[],Xe="",dr=Yt.length,Yr,tn,On=[],Gn=0;Gn<dr;Gn+=1){Yt[Gn]&&(Xe=Yt[Gn][0]),ze[Gn]=Xe;var Sn=Xr(Yt[Gn],ie);Yt[Gn]=Sn,p(Yt,ze,Gn),dr=Yt.length,Xe==="Z"&&On.push(Gn),Yr=Yt[Gn],tn=Yr.length,ie.x1=+Yr[tn-2],ie.y1=+Yr[tn-1],ie.x2=+Yr[tn-4]||ie.x1,ie.y2=+Yr[tn-3]||ie.y1}return mt?[Yt,On]:Yt}function Hr(ot){return ot.map(function(mt){return Array.isArray(mt)?[].concat(mt):mt})}function Cn(ot){var mt=ot.slice(1).map(function(Tt,Yt,ie){return Yt?ie[Yt-1].slice(-2).concat(Tt.slice(1)):ot[0].slice(1).concat(Tt.slice(1))}).map(function(Tt){return Tt.map(function(Yt,ie){return Tt[Tt.length-ie-2*(1-ie%2)]})}).reverse();return[["M"].concat(mt[0].slice(0,2))].concat(mt.map(function(Tt){return["C"].concat(Tt.slice(2))}))}function Zn(ot,mt){return Math.sqrt((ot[0]-mt[0])*(ot[0]-mt[0])+(ot[1]-mt[1])*(ot[1]-mt[1]))}function Un(ot,mt,Tt,Yt,ie){var ze=Zn([ot,mt],[Tt,Yt]),Xe={x:0,y:0};if(typeof ie=="number")if(ie<=0)Xe={x:ot,y:mt};else if(ie>=ze)Xe={x:Tt,y:Yt};else{var dr=Lr([ot,mt],[Tt,Yt],ie/ze),Yr=dr[0],tn=dr[1];Xe={x:Yr,y:tn}}return{length:ze,point:Xe,min:{x:Math.min(ot,Tt),y:Math.min(mt,Yt)},max:{x:Math.max(ot,Tt),y:Math.max(mt,Yt)}}}function mn(ot,mt){var Tt=ot.x,Yt=ot.y,ie=mt.x,ze=mt.y,Xe=Tt*ie+Yt*ze,dr=Math.sqrt((Math.pow(Tt,2)+Math.pow(Yt,2))*(Math.pow(ie,2)+Math.pow(ze,2))),Yr=Tt*ze-Yt*ie<0?-1:1,tn=Yr*Math.acos(Xe/dr);return tn}function rr(ot,mt,Tt,Yt,ie,ze,Xe,dr,Yr,tn){var On=Math.abs,Gn=Math.sin,Sn=Math.cos,ua=Math.sqrt,ma=Math.PI,va=On(Tt),fa=On(Yt),Ra=(ie%360+360)%360,Kn=Ra*(ma/180);if(ot===dr&&mt===Yr)return{x:ot,y:mt};if(va===0||fa===0)return Un(ot,mt,dr,Yr,tn).point;var ka=(ot-dr)/2,xa=(mt-Yr)/2,Qn={x:Sn(Kn)*ka+Gn(Kn)*xa,y:-Gn(Kn)*ka+Sn(Kn)*xa},Ba=Math.pow(Qn.x,2)/Math.pow(va,2)+Math.pow(Qn.y,2)/Math.pow(fa,2);Ba>1&&(va*=ua(Ba),fa*=ua(Ba));var si=Math.pow(va,2)*Math.pow(fa,2)-Math.pow(va,2)*Math.pow(Qn.y,2)-Math.pow(fa,2)*Math.pow(Qn.x,2),pi=Math.pow(va,2)*Math.pow(Qn.y,2)+Math.pow(fa,2)*Math.pow(Qn.x,2),ri=si/pi;ri=ri<0?0:ri;var $a=(ze!==Xe?1:-1)*ua(ri),Si={x:$a*(va*Qn.y/fa),y:$a*(-(fa*Qn.x)/va)},Ui={x:Sn(Kn)*Si.x-Gn(Kn)*Si.y+(ot+dr)/2,y:Gn(Kn)*Si.x+Sn(Kn)*Si.y+(mt+Yr)/2},Wi={x:(Qn.x-Si.x)/va,y:(Qn.y-Si.y)/fa},Ps=mn({x:1,y:0},Wi),wc={x:(-Qn.x-Si.x)/va,y:(-Qn.y-Si.y)/fa},ou=mn(Wi,wc);!Xe&&ou>0?ou-=2*ma:Xe&&ou<0&&(ou+=2*ma),ou%=2*ma;var xu=Ps+ou*tn,Iu=va*Sn(xu),Hu=fa*Gn(xu),ks={x:Sn(Kn)*Iu-Gn(Kn)*Hu+Ui.x,y:Gn(Kn)*Iu+Sn(Kn)*Hu+Ui.y};return ks}function sr(ot,mt,Tt,Yt,ie,ze,Xe,dr,Yr,tn,On){var Gn,Sn=On.bbox,ua=Sn===void 0?!0:Sn,ma=On.length,va=ma===void 0?!0:ma,fa=On.sampleSize,Ra=fa===void 0?30:fa,Kn=typeof tn=="number",ka=ot,xa=mt,Qn=0,Ba=[ka,xa,Qn],si=[ka,xa],pi=0,ri={x:0,y:0},$a=[{x:ka,y:xa}];Kn&&tn<=0&&(ri={x:ka,y:xa});for(var Si=0;Si<=Ra;Si+=1){if(pi=Si/Ra,Gn=rr(ot,mt,Tt,Yt,ie,ze,Xe,dr,Yr,pi),ka=Gn.x,xa=Gn.y,ua&&$a.push({x:ka,y:xa}),va&&(Qn+=Zn(si,[ka,xa])),si=[ka,xa],Kn&&Qn>=tn&&tn>Ba[2]){var Ui=(Qn-tn)/(Qn-Ba[2]);ri={x:si[0]*(1-Ui)+Ba[0]*Ui,y:si[1]*(1-Ui)+Ba[1]*Ui}}Ba=[ka,xa,Qn]}return Kn&&tn>=Qn&&(ri={x:dr,y:Yr}),{length:Qn,point:ri,min:{x:Math.min.apply(null,$a.map(function(Wi){return Wi.x})),y:Math.min.apply(null,$a.map(function(Wi){return Wi.y}))},max:{x:Math.max.apply(null,$a.map(function(Wi){return Wi.x})),y:Math.max.apply(null,$a.map(function(Wi){return Wi.y}))}}}function lr(ot,mt,Tt,Yt,ie,ze,Xe,dr,Yr){var tn=1-Yr;return{x:Math.pow(tn,3)*ot+3*Math.pow(tn,2)*Yr*Tt+3*tn*Math.pow(Yr,2)*ie+Math.pow(Yr,3)*Xe,y:Math.pow(tn,3)*mt+3*Math.pow(tn,2)*Yr*Yt+3*tn*Math.pow(Yr,2)*ze+Math.pow(Yr,3)*dr}}function zr(ot,mt,Tt,Yt,ie,ze,Xe,dr,Yr,tn){var On,Gn=tn.bbox,Sn=Gn===void 0?!0:Gn,ua=tn.length,ma=ua===void 0?!0:ua,va=tn.sampleSize,fa=va===void 0?10:va,Ra=typeof Yr=="number",Kn=ot,ka=mt,xa=0,Qn=[Kn,ka,xa],Ba=[Kn,ka],si=0,pi={x:0,y:0},ri=[{x:Kn,y:ka}];Ra&&Yr<=0&&(pi={x:Kn,y:ka});for(var $a=0;$a<=fa;$a+=1){if(si=$a/fa,On=lr(ot,mt,Tt,Yt,ie,ze,Xe,dr,si),Kn=On.x,ka=On.y,Sn&&ri.push({x:Kn,y:ka}),ma&&(xa+=Zn(Ba,[Kn,ka])),Ba=[Kn,ka],Ra&&xa>=Yr&&Yr>Qn[2]){var Si=(xa-Yr)/(xa-Qn[2]);pi={x:Ba[0]*(1-Si)+Qn[0]*Si,y:Ba[1]*(1-Si)+Qn[1]*Si}}Qn=[Kn,ka,xa]}return Ra&&Yr>=xa&&(pi={x:Xe,y:dr}),{length:xa,point:pi,min:{x:Math.min.apply(null,ri.map(function(Ui){return Ui.x})),y:Math.min.apply(null,ri.map(function(Ui){return Ui.y}))},max:{x:Math.max.apply(null,ri.map(function(Ui){return Ui.x})),y:Math.max.apply(null,ri.map(function(Ui){return Ui.y}))}}}function fn(ot,mt,Tt,Yt,ie,ze,Xe){var dr=1-Xe;return{x:Math.pow(dr,2)*ot+2*dr*Xe*Tt+Math.pow(Xe,2)*ie,y:Math.pow(dr,2)*mt+2*dr*Xe*Yt+Math.pow(Xe,2)*ze}}function wn(ot,mt,Tt,Yt,ie,ze,Xe,dr){var Yr,tn=dr.bbox,On=tn===void 0?!0:tn,Gn=dr.length,Sn=Gn===void 0?!0:Gn,ua=dr.sampleSize,ma=ua===void 0?10:ua,va=typeof Xe=="number",fa=ot,Ra=mt,Kn=0,ka=[fa,Ra,Kn],xa=[fa,Ra],Qn=0,Ba={x:0,y:0},si=[{x:fa,y:Ra}];va&&Xe<=0&&(Ba={x:fa,y:Ra});for(var pi=0;pi<=ma;pi+=1){if(Qn=pi/ma,Yr=fn(ot,mt,Tt,Yt,ie,ze,Qn),fa=Yr.x,Ra=Yr.y,On&&si.push({x:fa,y:Ra}),Sn&&(Kn+=Zn(xa,[fa,Ra])),xa=[fa,Ra],va&&Kn>=Xe&&Xe>ka[2]){var ri=(Kn-Xe)/(Kn-ka[2]);Ba={x:xa[0]*(1-ri)+ka[0]*ri,y:xa[1]*(1-ri)+ka[1]*ri}}ka=[fa,Ra,Kn]}return va&&Xe>=Kn&&(Ba={x:ie,y:ze}),{length:Kn,point:Ba,min:{x:Math.min.apply(null,si.map(function($a){return $a.x})),y:Math.min.apply(null,si.map(function($a){return $a.y}))},max:{x:Math.max.apply(null,si.map(function($a){return $a.x})),y:Math.max.apply(null,si.map(function($a){return $a.y}))}}}function ln(ot,mt,Tt){for(var Yt,ie,ze,Xe,dr,Yr,tn=se(ot),On=typeof mt=="number",Gn,Sn=[],ua,ma=0,va=0,fa=0,Ra=0,Kn,ka=[],xa=[],Qn=0,Ba={x:0,y:0},si=Ba,pi=Ba,ri=Ba,$a=0,Si=0,Ui=tn.length;Si<Ui;Si+=1)Kn=tn[Si],ua=Kn[0],Gn=ua==="M",Sn=Gn?Sn:[ma,va].concat(Kn.slice(1)),Gn?(fa=Kn[1],Ra=Kn[2],Ba={x:fa,y:Ra},si=Ba,Qn=0,On&&mt<.001&&(ri=Ba)):ua==="L"?(Yt=Un(Sn[0],Sn[1],Sn[2],Sn[3],(mt||0)-$a),Qn=Yt.length,Ba=Yt.min,si=Yt.max,pi=Yt.point):ua==="A"?(ie=sr(Sn[0],Sn[1],Sn[2],Sn[3],Sn[4],Sn[5],Sn[6],Sn[7],Sn[8],(mt||0)-$a,Tt||{}),Qn=ie.length,Ba=ie.min,si=ie.max,pi=ie.point):ua==="C"?(ze=zr(Sn[0],Sn[1],Sn[2],Sn[3],Sn[4],Sn[5],Sn[6],Sn[7],(mt||0)-$a,Tt||{}),Qn=ze.length,Ba=ze.min,si=ze.max,pi=ze.point):ua==="Q"?(Xe=wn(Sn[0],Sn[1],Sn[2],Sn[3],Sn[4],Sn[5],(mt||0)-$a,Tt||{}),Qn=Xe.length,Ba=Xe.min,si=Xe.max,pi=Xe.point):ua==="Z"&&(Sn=[ma,va,fa,Ra],dr=Un(Sn[0],Sn[1],Sn[2],Sn[3],(mt||0)-$a),Qn=dr.length,Ba=dr.min,si=dr.max,pi=dr.point),On&&$a<mt&&$a+Qn>=mt&&(ri=pi),xa.push(si),ka.push(Ba),$a+=Qn,Yr=ua!=="Z"?Kn.slice(-2):[fa,Ra],ma=Yr[0],va=Yr[1];return On&&mt>=$a&&(ri={x:ma,y:va}),{length:$a,point:ri,min:{x:Math.min.apply(null,ka.map(function(Wi){return Wi.x})),y:Math.min.apply(null,ka.map(function(Wi){return Wi.y}))},max:{x:Math.max.apply(null,xa.map(function(Wi){return Wi.x})),y:Math.max.apply(null,xa.map(function(Wi){return Wi.y}))}}}function $n(ot,mt){if(!ot)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var Tt=ln(ot,void 0,(0,Gt.__assign)((0,Gt.__assign)({},mt),{length:!1})),Yt=Tt.min,ie=Yt.x,ze=Yt.y,Xe=Tt.max,dr=Xe.x,Yr=Xe.y,tn=dr-ie,On=Yr-ze;return{width:tn,height:On,x:ie,y:ze,x2:dr,y2:Yr,cx:ie+tn/2,cy:ze+On/2,cz:Math.max(tn,On)+Math.min(tn,On)/2}}function Jn(ot,mt){return ln(ot,void 0,(0,Gt.__assign)((0,Gt.__assign)({},mt),{bbox:!1,length:!0})).length}function Da(ot,mt){if(!ot)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var Tt=ln(ot,void 0,(0,Gt.__assign)((0,Gt.__assign)({},mt),{bbox:!0,length:!0})),Yt=Tt.length,ie=Tt.min,ze=ie.x,Xe=ie.y,dr=Tt.max,Yr=dr.x,tn=dr.y,On=Yr-ze,Gn=tn-Xe;return{length:Yt,width:On,height:Gn,x:ze,y:Xe,x2:Yr,y2:tn,cx:ze+On/2,cy:Xe+Gn/2,cz:Math.max(On,Gn)+Math.min(On,Gn)/2}}function bn(ot){var mt=ot.length,Tt=mt-1;return ot.map(function(Yt,ie){return ot.map(function(ze,Xe){var dr=ie+Xe,Yr;return Xe===0||ot[dr]&&ot[dr][0]==="M"?(Yr=ot[dr],["M"].concat(Yr.slice(-2))):(dr>=mt&&(dr-=Tt),ot[dr])})})}function Hn(ot,mt){var Tt=ot.length-1,Yt=[],ie=0,ze=0,Xe=bn(ot);return Xe.forEach(function(dr,Yr){ot.slice(1).forEach(function(tn,On){ze+=Zn(ot[(Yr+On)%Tt].slice(-2),mt[On%Tt].slice(-2))}),Yt[Yr]=ze,ze=0}),ie=Yt.indexOf(Math.min.apply(null,Yt)),Xe[ie]}function Wn(ot,mt,Tt,Yt,ie,ze,Xe,dr){return 3*((dr-mt)*(Tt+ie)-(Xe-ot)*(Yt+ze)+Yt*(ot-ie)-Tt*(mt-ze)+dr*(ie+ot/3)-Xe*(ze+mt/3))/20}function Bn(ot){var mt=0,Tt=0,Yt=0;return Mn(ot).map(function(ie){var ze;switch(ie[0]){case"M":return mt=ie[1],Tt=ie[2],0;default:var Xe=ie.slice(1),dr=Xe[0],Yr=Xe[1],tn=Xe[2],On=Xe[3],Gn=Xe[4],Sn=Xe[5];return Yt=Wn(mt,Tt,dr,Yr,tn,On,Gn,Sn),ze=ie.slice(-2),mt=ze[0],Tt=ze[1],Yt}}).reduce(function(ie,ze){return ie+ze},0)}function ya(ot){return Bn(ot)>=0}function q(ot,mt,Tt){return ln(ot,mt,(0,Gt.__assign)((0,Gt.__assign)({},Tt),{bbox:!1,length:!0})).point}function Ve(ot,mt){var Tt=jt(ot);if(typeof Tt=="string")throw TypeError(Tt);var Yt=Tt.slice(),ie=Jn(Yt),ze=Yt.length-1,Xe=0,dr=0,Yr=Tt[0],tn=Yr.slice(-2),On=tn[0],Gn=tn[1],Sn={x:On,y:Gn};if(ze<=0||!mt||!Number.isFinite(mt))return{segment:Yr,index:0,length:dr,point:Sn,lengthAtSegment:Xe};if(mt>=ie)return Yt=Tt.slice(0,-1),Xe=Jn(Yt),dr=ie-Xe,{segment:Tt[ze],index:ze,length:dr,lengthAtSegment:Xe};for(var ua=[];ze>0;)Yr=Yt[ze],Yt=Yt.slice(0,-1),Xe=Jn(Yt),dr=ie-Xe,ie=Xe,ua.push({segment:Yr,index:ze,length:dr,lengthAtSegment:Xe}),ze-=1;return ua.find(function(ma){var va=ma.lengthAtSegment;return va<=mt})}function Ee(ot,mt){for(var Tt=jt(ot),Yt=se(Tt),ie=Jn(Tt),ze=function(Qn){var Ba=Qn.x-mt.x,si=Qn.y-mt.y;return Ba*Ba+si*si},Xe=8,dr,Yr=0,tn,On=0,Gn=1/0,Sn=0;Sn<=ie;Sn+=Xe)dr=q(Yt,Sn),Yr=ze(dr),Yr<Gn&&(tn=dr,On=Sn,Gn=Yr);Xe/=2;for(var ua,ma,va=0,fa=0,Ra=0,Kn=0;Xe>.5;)va=On-Xe,ua=q(Yt,va),Ra=ze(ua),fa=On+Xe,ma=q(Yt,fa),Kn=ze(ma),va>=0&&Ra<Gn?(tn=ua,On=va,Gn=Ra):fa<=ie&&Kn<Gn?(tn=ma,On=fa,Gn=Kn):Xe/=2;var ka=Ve(Tt,On),xa=Math.sqrt(Gn);return{closest:tn,distance:xa,segment:ka}}function nr(ot,mt){var Tt=Ee(ot,mt).distance;return Math.abs(Tt)<.001}function ar(ot,mt){mt===void 0&&(mt=.5);var Tt=ot.slice(0,2),Yt=ot.slice(2,4),ie=ot.slice(4,6),ze=ot.slice(6,8),Xe=Lr(Tt,Yt,mt),dr=Lr(Yt,ie,mt),Yr=Lr(ie,ze,mt),tn=Lr(Xe,dr,mt),On=Lr(dr,Yr,mt),Gn=Lr(tn,On,mt);return[["C"].concat(Xe,tn,Gn),["C"].concat(On,Yr,ze)]}function Ur(ot){return ot.map(function(mt,Tt,Yt){var ie=Tt&&Yt[Tt-1].slice(-2).concat(mt.slice(1)),ze=Tt?zr(ie[0],ie[1],ie[2],ie[3],ie[4],ie[5],ie[6],ie[7],ie[8],{bbox:!1}).length:0,Xe;return Tt?Xe=ze?ar(ie):[mt,mt]:Xe=[mt],{s:mt,ss:Xe,l:ze}})}function Nr(ot,mt,Tt){var Yt=Ur(ot),ie=Ur(mt),ze=Yt.length,Xe=ie.length,dr=Yt.filter(function(fa){return fa.l}).length,Yr=ie.filter(function(fa){return fa.l}).length,tn=Yt.filter(function(fa){return fa.l}).reduce(function(fa,Ra){var Kn=Ra.l;return fa+Kn},0)/dr||0,On=ie.filter(function(fa){return fa.l}).reduce(function(fa,Ra){var Kn=Ra.l;return fa+Kn},0)/Yr||0,Gn=Tt||Math.max(ze,Xe),Sn=[tn,On],ua=[Gn-ze,Gn-Xe],ma=0,va=[Yt,ie].map(function(fa,Ra){return fa.l===Gn?fa.map(function(Kn){return Kn.s}):fa.map(function(Kn,ka){return ma=ka&&ua[Ra]&&Kn.l>=Sn[Ra],ua[Ra]-=ma?1:0,ma?Kn.ss:[Kn.s]}).flat()});return va[0].length===va[1].length?va:Nr(va[0],va[1],Gn)}var gn=function(ot){return ot!==null&&typeof ot!="function"&&isFinite(ot.length)},hn=gn,pn=function(ot,mt){return hn(ot)?ot.indexOf(mt)>-1:!1},gt=pn,bt=function(ot,mt){if(!hn(ot))return ot;for(var Tt=[],Yt=0;Yt<ot.length;Yt++){var ie=ot[Yt];mt(ie,Yt)&&Tt.push(ie)}return Tt},W=bt,T=function(ot,mt){return mt===void 0&&(mt=[]),W(ot,function(Tt){return!gt(mt,Tt)})},A=T,et=function(ot){return ot==null},_t=et,Xt={}.toString,Rt=function(ot,mt){return Xt.call(ot)==="[object "+mt+"]"},ee=Rt,Ge=function(ot){return Array.isArray?Array.isArray(ot):ee(ot,"Array")},De=function(ot){var mt=typeof ot;return ot!==null&&mt==="object"||mt==="function"};function fr(ot,mt){if(ot){var Tt;if(Ge(ot))for(var Yt=0,ie=ot.length;Yt<ie&&(Tt=mt(ot[Yt],Yt),Tt!==!1);Yt++);else if(De(ot)){for(var ze in ot)if(ot.hasOwnProperty(ze)&&(Tt=mt(ot[ze],ze),Tt===!1))break}}}var jr=fr,Sr=Object.keys?function(ot){return Object.keys(ot)}:function(ot){var mt=[];return jr(ot,function(Tt,Yt){k(ot)&&Yt==="prototype"||mt.push(Yt)}),mt},vn=Sr;function Xn(ot,mt){var Tt=vn(mt),Yt=Tt.length;if(_t(ot))return!Yt;for(var ie=0;ie<Yt;ie+=1){var ze=Tt[ie];if(mt[ze]!==ot[ze]||!(ze in ot))return!1}return!0}var je=Xn,Er=function(ot){return typeof ot=="object"&&ot!==null},Pr=Er,Kr=function(ot){if(!Pr(ot)||!ee(ot,"Object"))return!1;if(Object.getPrototypeOf(ot)===null)return!0;for(var mt=ot;Object.getPrototypeOf(mt)!==null;)mt=Object.getPrototypeOf(mt);return Object.getPrototypeOf(ot)===mt},$t=Kr;function Pt(ot,mt){if(!Ge(ot))return null;var Tt;if(k(mt)&&(Tt=mt),$t(mt)&&(Tt=function(ie){return je(ie,mt)}),Tt){for(var Yt=0;Yt<ot.length;Yt+=1)if(Tt(ot[Yt]))return ot[Yt]}return null}var re=Pt;function be(ot,mt,Tt){Tt===void 0&&(Tt=0);for(var Yt=Tt;Yt<ot.length;Yt++)if(mt(ot[Yt],Yt))return Yt;return-1}var pe=be,ke=function(ot,mt){for(var Tt=null,Yt=0;Yt<ot.length;Yt++){var ie=ot[Yt],ze=ie[mt];if(!_t(ze)){Ge(ze)?Tt=ze[0]:Tt=ze;break}}return Tt},or=ke,cr=function(ot){if(!Ge(ot))return[];for(var mt=[],Tt=0;Tt<ot.length;Tt++)mt=mt.concat(ot[Tt]);return mt},rn=cr,Nn=function(ot,mt){if(mt===void 0&&(mt=[]),!Ge(ot))mt.push(ot);else for(var Tt=0;Tt<ot.length;Tt+=1)Nn(ot[Tt],mt);return mt},An=Nn,la=function(ot){if(Ge(ot))return ot.reduce(function(mt,Tt){return Math.max(mt,Tt)},ot[0])},aa=function(ot){if(Ge(ot))return ot.reduce(function(mt,Tt){return Math.min(mt,Tt)},ot[0])},Ca=function(ot){var mt=ot.filter(function(Xe){return!isNaN(Xe)});if(!mt.length)return{min:0,max:0};if(Ge(ot[0])){for(var Tt=[],Yt=0;Yt<ot.length;Yt++)Tt=Tt.concat(ot[Yt]);mt=Tt}var ie=la(mt),ze=aa(mt);return{min:ze,max:ie}},Qa=Ca,Za=Array.prototype,Xa=Za.splice,Bo=Za.indexOf,Ai=function(ot){for(var mt=[],Tt=1;Tt<arguments.length;Tt++)mt[Tt-1]=arguments[Tt];for(var Yt=0;Yt<mt.length;Yt++)for(var ie=mt[Yt],ze=-1;(ze=Bo.call(ot,ie))>-1;)Xa.call(ot,ze,1);return ot},xi=Ai,po=Array.prototype.splice,ro=function(mt,Tt){if(!hn(mt))return[];for(var Yt=mt?Tt.length:0,ie=Yt-1;Yt--;){var ze=void 0,Xe=Tt[Yt];(Yt===ie||Xe!==ze)&&(ze=Xe,po.call(mt,Xe,1))}return mt},bo=ro,$o=function(ot,mt,Tt){if(!Ge(ot)&&!$t(ot))return ot;var Yt=Tt;return jr(ot,function(ie,ze){Yt=mt(Yt,ie,ze)}),Yt},Ia=$o,zo=function(ot,mt){var Tt=[];if(!hn(ot))return Tt;for(var Yt=-1,ie=[],ze=ot.length;++Yt<ze;){var Xe=ot[Yt];mt(Xe,Yt,ot)&&(Tt.push(Xe),ie.push(Yt))}return bo(ot,ie),Tt},ms=zo,Oa=function(ot){return ee(ot,"String")};function qo(ot,mt){var Tt;if(k(mt))Tt=function(ie,ze){return mt(ie)-mt(ze)};else{var Yt=[];Oa(mt)?Yt.push(mt):Ge(mt)&&(Yt=mt),Tt=function(ie,ze){for(var Xe=0;Xe<Yt.length;Xe+=1){var dr=Yt[Xe];if(ie[dr]>ze[dr])return 1;if(ie[dr]<ze[dr])return-1}return 0}}return ot.sort(Tt),ot}var Uo=qo;function Qo(ot,mt){mt===void 0&&(mt=new Map);var Tt=[];if(Array.isArray(ot))for(var Yt=0,ie=ot.length;Yt<ie;Yt++){var ze=ot[Yt];mt.has(ze)||(Tt.push(ze),mt.set(ze,!0))}return Tt}var no=function(){for(var ot=[],mt=0;mt<arguments.length;mt++)ot[mt]=arguments[mt];return Qo([].concat.apply([],ot))},Eo=no,Us=function(ot,mt){for(var Tt=[],Yt={},ie=0;ie<ot.length;ie++){var ze=ot[ie],Xe=ze[mt];if(!_t(Xe)){Ge(Xe)||(Xe=[Xe]);for(var dr=0;dr<Xe.length;dr++){var Yr=Xe[dr];Yt[Yr]||(Tt.push(Yr),Yt[Yr]=!0)}}}return Tt};function Qs(ot){if(hn(ot))return ot[0]}function ki(ot){if(hn(ot)){var mt=ot;return mt[mt.length-1]}}function ao(ot,mt){return Ge(ot)||Oa(ot)?ot[0]===mt:!1}var Ts=ao;function Ws(ot,mt){return Ge(ot)||Oa(ot)?ot[ot.length-1]===mt:!1}var Po=Ws,wo=function(ot,mt){for(var Tt=0;Tt<ot.length;Tt++)if(!mt(ot[Tt],Tt))return!1;return!0},Xs=wo,xs=function(ot,mt){for(var Tt=0;Tt<ot.length;Tt++)if(mt(ot[Tt],Tt))return!0;return!1},Ys=xs,qn=Object.prototype.hasOwnProperty;function io(ot,mt){if(!mt||!Ge(ot))return{};for(var Tt={},Yt=k(mt)?mt:function(dr){return dr[mt]},ie,ze=0;ze<ot.length;ze++){var Xe=ot[ze];ie=Yt(Xe),qn.call(Tt,ie)?Tt[ie].push(Xe):Tt[ie]=[Xe]}return Tt}var _o=io;function Ti(ot,mt){if(!mt)return{0:ot};if(!k(mt)){var Tt=Ge(mt)?mt:mt.replace(/\s+/g,"").split("*");mt=function(Yt){for(var ie="_",ze=0,Xe=Tt.length;ze<Xe;ze++)ie+=Yt[Tt[ze]]&&Yt[Tt[ze]].toString();return ie}}return _o(ot,mt)}var bs=function(ot,mt){if(!mt)return[ot];var Tt=Ti(ot,mt),Yt=[];for(var ie in Tt)Yt.push(Tt[ie]);return Yt};function Is(ot,mt){return ot["_wrap_"+mt]}var Ri=Is;function fs(ot,mt){if(ot["_wrap_"+mt])return ot["_wrap_"+mt];var Tt=function(Yt){ot[mt](Yt)};return ot["_wrap_"+mt]=Tt,Tt}var Os=fs,Wo={};function xn(ot){var mt=Wo[ot];if(!mt){for(var Tt=ot.toString(16),Yt=Tt.length;Yt<6;Yt++)Tt="0"+Tt;mt="#"+Tt,Wo[ot]=mt}return mt}var cs=xn;function ko(ot){var mt=0,Tt=0,Yt=0,ie=0;return Ge(ot)?ot.length===1?mt=Tt=Yt=ie=ot[0]:ot.length===2?(mt=Yt=ot[0],Tt=ie=ot[1]):ot.length===3?(mt=ot[0],Tt=ie=ot[1],Yt=ot[2]):(mt=ot[0],Tt=ot[1],Yt=ot[2],ie=ot[3]):mt=Tt=Yt=ie=ot,{r1:mt,r2:Tt,r3:Yt,r4:ie}}var oo=ko,Jo=function(ot,mt,Tt){return ot<mt?mt:ot>Tt?Tt:ot},Es=Jo,Hi=function(ot,mt){var Tt=mt.toString(),Yt=Tt.indexOf(".");if(Yt===-1)return Math.round(ot);var ie=Tt.substr(Yt+1).length;return ie>20&&(ie=20),parseFloat(ot.toFixed(ie))},So=Hi,Ii=function(ot){return ee(ot,"Number")},yo=Ii,so=function(ot){return yo(ot)&&ot%1!==0},ts=so,es=function(ot){return yo(ot)&&ot%2===0},Ro=es,ls=Number.isInteger?Number.isInteger:function(ot){return yo(ot)&&ot%1===0},Xo=ls,Yo=function(ot){return yo(ot)&&ot<0},Fo=Yo,za=1e-5;function Fi(ot,mt,Tt){return Tt===void 0&&(Tt=za),Math.abs(ot-mt)<Tt}var uo=function(ot){return yo(ot)&&ot%2!==0},Na=uo,Mo=function(ot){return yo(ot)&&ot>0},rs=Mo,Gi=function(ot,mt){if(Ge(ot)){for(var Tt,Yt=-1/0,ie=0;ie<ot.length;ie++){var ze=ot[ie],Xe=k(mt)?mt(ze):ze[mt];Xe>Yt&&(Tt=ze,Yt=Xe)}return Tt}},mo=function(ot,mt){if(Ge(ot)){for(var Tt,Yt=1/0,ie=0;ie<ot.length;ie++){var ze=ot[ie],Xe=k(mt)?mt(ze):ze[mt];Xe<Yt&&(Tt=ze,Yt=Xe)}return Tt}},Co=function(ot,mt){return(ot%mt+mt)%mt},Ao=Co,Ls=180/Math.PI,Ds=function(ot){return Ls*ot},ns=Ds,Vo=parseInt,ru=Math.PI/180,Vs=function(ot){return ru*ot},hs=Vs,Ft=jr,me=function(ot,mt){return ot.hasOwnProperty(mt)},We=me,qe=Object.values?function(ot){return Object.values(ot)}:function(ot){var mt=[];return jr(ot,function(Tt,Yt){k(ot)&&Yt==="prototype"||mt.push(Tt)}),mt},Rr=qe,En=function(ot,mt){return gt(Rr(ot),mt)},Vn=function(ot){return _t(ot)?"":ot.toString()},ja=function(ot){return Vn(ot).toLowerCase()},li=ja,fo=function(ot){var mt=Vn(ot);return mt.charAt(0).toLowerCase()+mt.substring(1)},qi=fo;function js(ot,mt){return!ot||!mt?ot:ot.replace(/\\?\{([^{}]+)\}/g,function(Tt,Yt){return Tt.charAt(0)==="\\"?Tt.slice(1):mt[Yt]===void 0?"":mt[Yt]})}var Mu=js,gu=function(ot){return Vn(ot).toUpperCase()},Hs=gu,pu=function(ot){var mt=Vn(ot);return mt.charAt(0).toUpperCase()+mt.substring(1)},Ua=pu,Fn={}.toString,Vu=function(ot){return Fn.call(ot).replace(/^\[object /,"").replace(/]$/,"")},jo=Vu,Cu=function(ot){return ee(ot,"Arguments")},ws=Cu,Ki=function(ot){return ee(ot,"Boolean")},Oi=Ki,To=function(ot){return ee(ot,"Date")},ju=To,cf=function(ot){return ee(ot,"Error")},Uf=cf;function Au(ot){return yo(ot)&&isFinite(ot)}var Io=function(ot){return ot===null},h=Io,O=Object.prototype,dt=function(ot){var mt=ot&&ot.constructor,Tt=typeof mt=="function"&&mt.prototype||O;return ot===Tt},St=dt,kt=function(ot){return ee(ot,"RegExp")},Ht=kt,Zt=function(ot){return ot===void 0},le=Zt,ye=function(ot){return ot instanceof Element||ot instanceof Document},Oe=ye;function He(ot){var mt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Tt){return setTimeout(Tt,16)};return mt(ot)}function Ar(ot){var mt=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;mt(ot)}function Ir(ot,mt){for(var Tt in mt)mt.hasOwnProperty(Tt)&&Tt!=="constructor"&&mt[Tt]!==void 0&&(ot[Tt]=mt[Tt])}function _r(ot,mt,Tt,Yt){return mt&&Ir(ot,mt),Tt&&Ir(ot,Tt),Yt&&Ir(ot,Yt),ot}var Qr=function(){for(var ot=[],mt=0;mt<arguments.length;mt++)ot[mt]=arguments[mt];for(var Tt=ot[0],Yt=1;Yt<ot.length;Yt++){var ie=ot[Yt];k(ie)&&(ie=ie.prototype),_r(Tt.prototype,ie)}},yn=Qr,kr=function(ot){if(typeof ot!="object"||ot===null)return ot;var mt;if(Ge(ot)){mt=[];for(var Tt=0,Yt=ot.length;Tt<Yt;Tt++)typeof ot[Tt]=="object"&&ot[Tt]!=null?mt[Tt]=kr(ot[Tt]):mt[Tt]=ot[Tt]}else{mt={};for(var ie in ot)typeof ot[ie]=="object"&&ot[ie]!=null?mt[ie]=kr(ot[ie]):mt[ie]=ot[ie]}return mt},Tn=kr;function Ea(ot,mt,Tt){var Yt;return function(){var ie=this,ze=arguments,Xe=function(){Yt=null,Tt||ot.apply(ie,ze)},dr=Tt&&!Yt;clearTimeout(Yt),Yt=setTimeout(Xe,mt),dr&&ot.apply(ie,ze)}}var wa=Ea,ga=5;function ta(ot,mt){if(Object.hasOwn)return Object.hasOwn(ot,mt);if(ot==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(ot),mt)}function ha(ot,mt,Tt,Yt){Tt=Tt||0,Yt=Yt||ga;for(var ie in mt)if(ta(mt,ie)){var ze=mt[ie];ze!==null&&$t(ze)?($t(ot[ie])||(ot[ie]={}),Tt<Yt?ha(ot[ie],ze,Tt+1,Yt):ot[ie]=mt[ie]):Ge(ze)?(ot[ie]=[],ot[ie]=ot[ie].concat(ze)):ze!==void 0&&(ot[ie]=ze)}}var Bi=function(ot){for(var mt=[],Tt=1;Tt<arguments.length;Tt++)mt[Tt-1]=arguments[Tt];for(var Yt=0;Yt<mt.length;Yt+=1)ha(ot,mt[Yt]);return ot},_i=Bi,Li=function(ot,mt,Tt,Yt){k(mt)||(Tt=mt,mt=ot,ot=function(){});var ie=Object.create?function(Xe,dr){return Object.create(Xe,{constructor:{value:dr}})}:function(Xe,dr){function Yr(){}Yr.prototype=Xe;var tn=new Yr;return tn.constructor=dr,tn},ze=ie(mt.prototype,ot);return ot.prototype=_r(ze,ot.prototype),ot.superclass=ie(mt.prototype,mt),_r(ze,Tt),_r(ot,Yt),ot},Di=Li,Ni=function(ot,mt){if(!hn(ot))return-1;var Tt=Array.prototype.indexOf;if(Tt)return Tt.call(ot,mt);for(var Yt=-1,ie=0;ie<ot.length;ie++)if(ot[ie]===mt){Yt=ie;break}return Yt},zi=Ni,co=Object.prototype.hasOwnProperty;function Ha(ot){if(_t(ot))return!0;if(hn(ot))return!ot.length;var mt=jo(ot);if(mt==="Map"||mt==="Set")return!ot.size;if(St(ot))return!Object.keys(ot).length;for(var Tt in ot)if(co.call(ot,Tt))return!1;return!0}var Ja=Ha,Ns=function(ot,mt){if(ot===mt)return!0;if(!ot||!mt||Oa(ot)||Oa(mt))return!1;if(hn(ot)||hn(mt)){if(ot.length!==mt.length)return!1;for(var Tt=!0,Yt=0;Yt<ot.length&&(Tt=Ns(ot[Yt],mt[Yt]),!!Tt);Yt++);return Tt}if(Pr(ot)||Pr(mt)){var ie=Object.keys(ot),ze=Object.keys(mt);if(ie.length!==ze.length)return!1;for(var Tt=!0,Yt=0;Yt<ie.length&&(Tt=Ns(ot[ie[Yt]],mt[ie[Yt]]),!!Tt);Yt++);return Tt}return!1},_s=Ns,vs=function(ot,mt,Tt){return k(Tt)?!!Tt(ot,mt):_s(ot,mt)},yu=function(ot,mt){if(!hn(ot))return ot;for(var Tt=[],Yt=0;Yt<ot.length;Yt++){var ie=ot[Yt];Tt.push(mt(ie,Yt))}return Tt},Wf=yu,Hc=function(ot){return ot},Kc=function(ot,mt){mt===void 0&&(mt=Hc);var Tt={};return De(ot)&&!_t(ot)&&Object.keys(ot).forEach(function(Yt){Tt[Yt]=mt(ot[Yt],Yt)}),Tt},Zc=function(ot,mt,Tt){for(var Yt=0,ie=Oa(mt)?mt.split("."):mt;ot&&Yt<ie.length;)ot=ot[ie[Yt++]];return ot===void 0||Yt<ie.length?Tt:ot},$c=function(ot,mt,Tt){var Yt=ot,ie=Oa(mt)?mt.split("."):mt;return ie.forEach(function(ze,Xe){Xe<ie.length-1?(De(Yt[ze])||(Yt[ze]=yo(ie[Xe+1])?[]:{}),Yt=Yt[ze]):Yt[ze]=Tt}),ot},Xf=Object.prototype.hasOwnProperty,mc=function(ot,mt){if(ot===null||!$t(ot))return{};var Tt={};return jr(mt,function(Yt){Xf.call(ot,Yt)&&(Tt[Yt]=ot[Yt])}),Tt},qc=function(ot,mt){return Ia(ot,function(Tt,Yt,ie){return mt.includes(ie)||(Tt[ie]=Yt),Tt},{})},Yf=function(ot,mt,Tt){var Yt,ie,ze,Xe,dr=0;Tt||(Tt={});var Yr=function(){dr=Tt.leading===!1?0:Date.now(),Yt=null,Xe=ot.apply(ie,ze),Yt||(ie=ze=null)},tn=function(){var On=Date.now();!dr&&Tt.leading===!1&&(dr=On);var Gn=mt-(On-dr);return ie=this,ze=arguments,Gn<=0||Gn>mt?(Yt&&(clearTimeout(Yt),Yt=null),dr=On,Xe=ot.apply(ie,ze),Yt||(ie=ze=null)):!Yt&&Tt.trailing!==!1&&(Yt=setTimeout(Yr,Gn)),Xe};return tn.cancel=function(){clearTimeout(Yt),dr=0,Yt=ie=ze=null},tn},xc=function(ot){return hn(ot)?Array.prototype.slice.call(ot):[]},lf={},nu=function(ot){return ot=ot||"g",lf[ot]?lf[ot]+=1:lf[ot]=1,ot+lf[ot]},hf=function(){},In=function(ot){return ot};function au(ot){return _t(ot)?0:hn(ot)?ot.length:Object.keys(ot).length}var Ka=function(){function ot(){this.map={}}return ot.prototype.has=function(mt){return this.map[mt]!==void 0},ot.prototype.get=function(mt,Tt){var Yt=this.map[mt];return Yt===void 0?Tt:Yt},ot.prototype.set=function(mt,Tt){this.map[mt]=Tt},ot.prototype.clear=function(){this.map={}},ot.prototype.delete=function(mt){delete this.map[mt]},ot.prototype.size=function(){return Object.keys(this.map).length},ot}(),vf=Ka,df=1e-6;function Js(ot){return Math.abs(ot)<df?0:ot<0?-1:1}function Vf(ot,mt,Tt){return(Tt[0]-ot[0])*(mt[1]-ot[1])===(mt[0]-ot[0])*(Tt[1]-ot[1])&&Math.min(ot[0],mt[0])<=Tt[0]&&Tt[0]<=Math.max(ot[0],mt[0])&&Math.min(ot[1],mt[1])<=Tt[1]&&Tt[1]<=Math.max(ot[1],mt[1])}function iu(ot,mt,Tt){var Yt=!1,ie=ot.length;if(ie<=2)return!1;for(var ze=0;ze<ie;ze++){var Xe=ot[ze],dr=ot[(ze+1)%ie];if(Vf(Xe,dr,[mt,Tt]))return!0;Js(Xe[1]-Tt)>0!=Js(dr[1]-Tt)>0&&Js(mt-(Tt-Xe[1])*(Xe[0]-dr[0])/(Xe[1]-dr[1])-Xe[0])<0&&(Yt=!Yt)}return Yt}var gf=function(ot,mt,Tt){return ot>=mt&&ot<=Tt};function bc(ot,mt,Tt,Yt){var ie=.001,ze={x:Tt.x-ot.x,y:Tt.y-ot.y},Xe={x:mt.x-ot.x,y:mt.y-ot.y},dr={x:Yt.x-Tt.x,y:Yt.y-Tt.y},Yr=Xe.x*dr.y-Xe.y*dr.x,tn=Yr*Yr,On=Xe.x*Xe.x+Xe.y*Xe.y,Gn=dr.x*dr.x+dr.y*dr.y,Sn=null;if(tn>ie*On*Gn){var ua=(ze.x*dr.y-ze.y*dr.x)/Yr,ma=(ze.x*Xe.y-ze.y*Xe.x)/Yr;gf(ua,0,1)&&gf(ma,0,1)&&(Sn={x:ot.x+ua*Xe.x,y:ot.y+ua*Xe.y})}return Sn}function Tu(ot){for(var mt=[],Tt=ot.length,Yt=0;Yt<Tt-1;Yt++){var ie=ot[Yt],ze=ot[Yt+1];mt.push({from:{x:ie[0],y:ie[1]},to:{x:ze[0],y:ze[1]}})}if(mt.length>1){var Xe=ot[0],dr=ot[Tt-1];mt.push({from:{x:dr[0],y:dr[1]},to:{x:Xe[0],y:Xe[1]}})}return mt}function Ss(ot,mt){var Tt=!1;return ot.forEach(function(Yt){if(bc(Yt.from,Yt.to,mt.from,mt.to))return Tt=!0,!1}),Tt}function jf(ot){var mt=ot.map(function(Yt){return Yt[0]}),Tt=ot.map(function(Yt){return Yt[1]});return{minX:Math.min.apply(null,mt),maxX:Math.max.apply(null,mt),minY:Math.min.apply(null,Tt),maxY:Math.max.apply(null,Tt)}}function Ec(ot,mt){return!(mt.minX>ot.maxX||mt.maxX<ot.minX||mt.minY>ot.maxY||mt.maxY<ot.minY)}function lo(ot,mt){if(ot.length<2||mt.length<2)return!1;var Tt=jf(ot),Yt=jf(mt);if(!Ec(Tt,Yt))return!1;var ie=!1;if(mt.forEach(function(Yr){if(iu(ot,Yr[0],Yr[1]))return ie=!0,!1}),ie||(ot.forEach(function(Yr){if(iu(mt,Yr[0],Yr[1]))return ie=!0,!1}),ie))return!0;var ze=Tu(ot),Xe=Tu(mt),dr=!1;return Xe.forEach(function(Yr){if(Ss(ze,Yr))return dr=!0,!1}),dr}function pf(ot){var mt=document.createElement("div");mt.innerHTML=ot;var Tt=mt.childNodes[0];return Tt&&mt.contains(Tt)&&mt.removeChild(Tt),Tt}function mu(ot,mt){if(ot)return Object.keys(mt).forEach(function(Tt){ot.style[Tt]=mt[Tt]}),ot}},99905:function(xr,U,z){"use strict";z.r(U),z.d(U,{Graph:function(){return J},GraphWithEvent:function(){return wt},algorithm:function(){return F},comparision:function(){return B},essence:function(){return j},generate:function(){return L}});var F={};z.r(F),z.d(F,{components:function(){return Se},dfs:function(){return fe},dijkstra:function(){return Lr},dijkstraAll:function(){return Xr},findCycles:function(){return Zn},floydWarshall:function(){return pn},isAcyclic:function(){return Ve},postorder:function(){return nr},preorder:function(){return Ur},prim:function(){return ae},tarjan:function(){return Hr},topsort:function(){return ya}});var j={};z.r(j),z.d(j,{hasSelfLoop:function(){return Er},isGraph:function(){return vn},isNullGraph:function(){return je},isSimpleGraph:function(){return Xn}});var B={};z.r(B),z.d(B,{containAllSameEdges:function(){return _t},containAllSameNodes:function(){return et},containSameEdges:function(){return bt},containSameNodes:function(){return gt},getSameEdges:function(){return T},getSameNodes:function(){return W},isGraphComplement:function(){return Pr},isGraphContainsAnother:function(){return Rt},isGraphOptionSame:function(){return A},isGraphSame:function(){return Xt}});var L={};z.r(L),z.d(L,{getGraphComplement:function(){return Kr}});var k;(function($t){$t.DEFAULT_EDGE_NAME="\0",$t.GRAPH_NODE="\0",$t.EDGE_KEY_DELIM=""})(k||(k={}));function D($t,Pt){var re=$t.get(Pt)||0;$t.set(Pt,re+1)}function w($t,Pt){var re=$t.get(Pt);re!==void 0&&(re=re-1,re>0?$t.set(Pt,re):$t.delete(Pt))}function b($t,Pt,re,be){var pe=String(Pt),ke=String(re);if(!$t&&pe>ke){var or=pe;pe=ke,ke=or}return pe+k.EDGE_KEY_DELIM+ke+k.EDGE_KEY_DELIM+(be===void 0?k.DEFAULT_EDGE_NAME:be)}function g($t,Pt,re,be){var pe=String(Pt),ke=String(re),or={v:Pt,w:re};if(!$t&&pe>ke){var cr=or.v;or.v=or.w,or.w=cr}return be!==void 0&&(or.name=be),or}function y($t,Pt){return b($t,Pt.v,Pt.w,Pt.name)}function d($t){return typeof $t=="function"}var S=function(Pt){return Pt.nodes().map(function(re){var be=Pt.node(re),pe=Pt.parent(re),ke={id:re,value:be,parent:pe};return ke.value===void 0&&delete ke.value,ke.parent===void 0&&delete ke.parent,ke})},_=function(Pt){return Pt.edges().map(function(re){var be=Pt.edge(re),pe={v:re.v,w:re.w,value:be,name:re.name};return pe.name===void 0&&delete pe.name,pe.value===void 0&&delete pe.value,pe})},E=function(Pt){var re={options:{directed:Pt.isDirected(),multigraph:Pt.isMultigraph(),compound:Pt.isCompound()},nodes:S(Pt),edges:_(Pt),value:Pt.graph()};return re.value===void 0&&delete re.value,re},I=function(Pt){var re=new J(Pt.options);return Pt.value!==void 0&&re.setGraph(Pt.value),Pt.nodes.forEach(function(be){re.setNode(be.id,be.value),be.parent&&re.setParent(be.id,be.parent)}),Pt.edges.forEach(function(be){re.setEdge(be.v,be.w,be.value,be.name)}),re};function P($t,Pt){var re=Object.keys($t);if(Object.getOwnPropertySymbols){var be=Object.getOwnPropertySymbols($t);Pt&&(be=be.filter(function(pe){return Object.getOwnPropertyDescriptor($t,pe).enumerable})),re.push.apply(re,be)}return re}function N($t){for(var Pt=1;Pt<arguments.length;Pt++){var re=arguments[Pt]!=null?arguments[Pt]:{};Pt%2?P(Object(re),!0).forEach(function(be){H($t,be,re[be])}):Object.getOwnPropertyDescriptors?Object.defineProperties($t,Object.getOwnPropertyDescriptors(re)):P(Object(re)).forEach(function(be){Object.defineProperty($t,be,Object.getOwnPropertyDescriptor(re,be))})}return $t}function H($t,Pt,re){return Pt in $t?Object.defineProperty($t,Pt,{value:re,enumerable:!0,configurable:!0,writable:!0}):$t[Pt]=re,$t}function nt($t,Pt){if(!($t instanceof Pt))throw new TypeError("Cannot call a class as a function")}function X($t,Pt){for(var re=0;re<Pt.length;re++){var be=Pt[re];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty($t,be.key,be)}}function Y($t,Pt,re){return Pt&&X($t.prototype,Pt),re&&X($t,re),Object.defineProperty($t,"prototype",{writable:!1}),$t}var Z={compound:!1,multigraph:!1,directed:!0},J=function(){function $t(){var Pt=this,re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};nt(this,$t),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=k.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return Pt.directed},this.isMultigraph=function(){return Pt.multigraph},this.isCompound=function(){return Pt.compound},this.setGraph=function(pe){return Pt.label=pe,Pt},this.graph=function(){return Pt.label},this.setDefaultNodeLabel=function(pe){return d(pe)?Pt.defaultNodeLabelFn=pe:Pt.defaultNodeLabelFn=function(){return pe},Pt},this.nodeCount=function(){return Pt.nodeCountNum},this.node=function(pe){return Pt.nodesLabelMap.get(pe)},this.nodes=function(){return Array.from(Pt.nodesLabelMap.keys())},this.sources=function(){return Pt.nodes().filter(function(pe){var ke;return!(!((ke=Pt.inEdgesMap.get(pe))===null||ke===void 0)&&ke.size)})},this.sinks=function(){return Pt.nodes().filter(function(pe){var ke;return!(!((ke=Pt.outEdgesMap.get(pe))===null||ke===void 0)&&ke.size)})},this.setNodes=function(pe,ke){return pe.map(function(or){return Pt.setNode(or,ke)}),Pt},this.hasNode=function(pe){return Pt.nodesLabelMap.has(pe)},this.checkCompound=function(){if(!Pt.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(pe){if(Pt.isCompound()){var ke,or=(ke=Pt.parentMap)===null||ke===void 0?void 0:ke.get(pe);if(or!==Pt.GRAPH_NODE)return or}},this.removeFromParentsChildList=function(pe){var ke=Pt.parentMap.get(pe);Pt.childrenMap.get(ke).delete(pe)},this.setParent=function(pe,ke){var or,cr;Pt.checkCompound();for(var rn=ke===void 0?Pt.GRAPH_NODE:ke,Nn=Pt.parent(rn);Nn;){if(pe===Nn)throw new Error("Setting "+ke+" as parent of "+pe+" would create a cycle");Nn=Pt.parent(Nn)}ke&&Pt.setNode(ke),Pt.setNode(pe),Pt.removeFromParentsChildList(pe),(or=Pt.parentMap)===null||or===void 0||or.set(pe,rn);var An=Pt.childrenMap.get(rn);return An.set(pe,!0),(cr=Pt.childrenMap)===null||cr===void 0||cr.set(rn,An),Pt},this.children=function(pe){var ke=pe===void 0?Pt.GRAPH_NODE:pe;if(Pt.isCompound()){var or,cr=(or=Pt.childrenMap)===null||or===void 0?void 0:or.get(ke);return cr?Array.from(cr.keys()):void 0}if(ke===Pt.GRAPH_NODE)return Pt.nodes();if(pe&&Pt.hasNode(pe))return[]},this.predecessors=function(pe){var ke=Pt.predecessorsMap.get(pe);return ke?Array.from(ke.keys()):void 0},this.successors=function(pe){var ke=Pt.successorsMap.get(pe);return ke?Array.from(ke.keys()):void 0},this.neighbors=function(pe){var ke;if(Pt.hasNode(pe))return Array.from(new Set((ke=Pt.predecessors(pe))===null||ke===void 0?void 0:ke.concat(Pt.successors(pe))))},this.isLeaf=function(pe){var ke;if(Pt.isDirected()){var or;return!(!((or=Pt.successors(pe))===null||or===void 0)&&or.length)}return!(!((ke=Pt.neighbors(pe))===null||ke===void 0)&&ke.length)},this.filterNodes=function(pe){var ke=Pt.directed,or=Pt.multigraph,cr=Pt.compound,rn=new $t({directed:ke,multigraph:or,compound:cr});if(rn.setGraph(Pt.graph()),Pt.nodes().forEach(function(An){pe(An)&&rn.setNode(An,Pt.node(An))}),Pt.edges().forEach(function(An){rn.hasNode(An.v)&&rn.hasNode(An.w)&&rn.setEdgeObj(An,Pt.edge(An))}),cr){var Nn=function(la){for(var aa=Pt.parent(la);aa!==void 0&&!rn.hasNode(aa);)aa=Pt.parent(aa);return aa};rn.nodes().forEach(function(An){rn.setParent(An,Nn(An))})}return rn},this.setDefaultEdgeLabel=function(pe){return d(pe)?Pt.defaultEdgeLabelFn=pe:Pt.defaultEdgeLabelFn=function(){return pe},Pt},this.edgeCount=function(){return Pt.edgeCountNum},this.setEdgeObj=function(pe,ke){return Pt.setEdge(pe.v,pe.w,ke,pe.name)},this.setPath=function(pe,ke){return pe.reduce(function(or,cr){return Pt.setEdge(or,cr,ke),cr}),Pt},this.edgeFromArgs=function(pe,ke,or){return Pt.edge({v:pe,w:ke,name:or})},this.edge=function(pe){return Pt.edgesLabelsMap.get(y(Pt.isDirected(),pe))},this.hasEdge=function(pe,ke,or){return Pt.edgesLabelsMap.has(y(Pt.isDirected(),{v:pe,w:ke,name:or}))},this.removeEdgeObj=function(pe){var ke=pe.v,or=pe.w,cr=pe.name;return Pt.removeEdge(ke,or,cr)},this.edges=function(){return Array.from(Pt.edgesMap.values())},this.inEdges=function(pe,ke){var or=Pt.inEdgesMap.get(pe);if(or)return Array.from(or.values()).filter(function(cr){return!ke||cr.v===ke})},this.outEdges=function(pe,ke){var or=Pt.outEdgesMap.get(pe);if(or)return Array.from(or.values()).filter(function(cr){return!ke||cr.w===ke})},this.nodeEdges=function(pe,ke){var or;if(Pt.hasNode(pe))return(or=Pt.inEdges(pe,ke))===null||or===void 0?void 0:or.concat(Pt.outEdges(pe,ke))},this.toJSON=function(){return E(Pt)},this.nodeInDegree=function(pe){var ke=Pt.inEdgesMap.get(pe);return ke?ke.size:0},this.nodeOutDegree=function(pe){var ke=Pt.outEdgesMap.get(pe);return ke?ke.size:0},this.nodeDegree=function(pe){return Pt.nodeInDegree(pe)+Pt.nodeOutDegree(pe)},this.source=function(pe){return pe.v},this.target=function(pe){return pe.w};var be=N(N({},Z),re);this.compound=be.compound,this.directed=be.directed,this.multigraph=be.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return Y($t,[{key:"setNode",value:function(re,be){var pe=this.nodesLabelMap,ke=this.defaultNodeLabelFn,or=this.isCompound,cr=this.parentMap,rn=this.childrenMap,Nn=this.inEdgesMap,An=this.outEdgesMap,la=this.predecessorsMap,aa=this.successorsMap;if(pe.has(re))return be!==void 0&&pe.set(re,be),this;if(pe.set(re,be||ke(re)),or()){var Ca;cr==null||cr.set(re,this.GRAPH_NODE),rn==null||rn.set(re,new Map),rn!=null&&rn.has(this.GRAPH_NODE)||rn==null||rn.set(this.GRAPH_NODE,new Map),rn==null||(Ca=rn.get(this.GRAPH_NODE))===null||Ca===void 0||Ca.set(re,!0)}return[Nn,An,la,aa].forEach(function(Qa){return Qa.set(re,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(re){var be=this;if(this.hasNode(re)){var pe=function(Xa){be.removeEdge(Xa.v,Xa.w,Xa.name)},ke=this.inEdgesMap,or=this.outEdgesMap,cr=this.predecessorsMap,rn=this.successorsMap,Nn=this.nodesLabelMap;if(this.isCompound()){var An,la,aa;this.removeFromParentsChildList(re),(An=this.parentMap)===null||An===void 0||An.delete(re),(la=this.children(re))===null||la===void 0||la.forEach(function(Za){return be.setParent(Za)}),(aa=this.childrenMap)===null||aa===void 0||aa.delete(re)}var Ca=ke.get(re),Qa=or.get(re);Array.from(Ca.values()).forEach(function(Za){return pe(Za)}),Array.from(Qa.values()).forEach(function(Za){return pe(Za)}),Nn.delete(re),ke.delete(re),or.delete(re),cr.delete(re),rn.delete(re),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(re,be,pe,ke){var or,cr,rn=g(this.isDirected(),re,be,ke),Nn=y(this.isDirected(),rn),An=rn.v,la=rn.w;if(this.edgesLabelsMap.has(Nn))return this.edgesLabelsMap.set(Nn,pe),this;if(ke!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(An),this.setNode(la),this.edgesLabelsMap.set(Nn,pe||this.defaultEdgeLabelFn(An,la,ke)),Object.freeze(rn),this.edgesMap.set(Nn,rn);var aa=this.predecessorsMap.get(la),Ca=this.successorsMap.get(An);return D(aa,An),D(Ca,la),(or=this.inEdgesMap.get(la))===null||or===void 0||or.set(Nn,rn),(cr=this.outEdgesMap.get(An))===null||cr===void 0||cr.set(Nn,rn),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(re,be,pe){var ke=b(this.isDirected(),re,be,pe),or=this.edgesMap.get(ke);if(or){var cr=g(this.isDirected(),re,be,pe),rn=cr.v,Nn=cr.w;this.edgesLabelsMap.delete(ke),this.edgesMap.delete(ke);var An=this.predecessorsMap.get(Nn),la=this.successorsMap.get(rn);w(An,rn),w(la,Nn),this.inEdgesMap.get(Nn).delete(ke),this.outEdgesMap.get(rn).delete(ke),this.edgeCountNum-=1}return this}}]),$t}();J.fromJSON=I;function it($t){"@babel/helpers - typeof";return it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Pt){return typeof Pt}:function(Pt){return Pt&&typeof Symbol=="function"&&Pt.constructor===Symbol&&Pt!==Symbol.prototype?"symbol":typeof Pt},it($t)}function tt($t,Pt){if(!($t instanceof Pt))throw new TypeError("Cannot call a class as a function")}function ut($t,Pt){for(var re=0;re<Pt.length;re++){var be=Pt[re];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty($t,be.key,be)}}function vt($t,Pt,re){return Pt&&ut($t.prototype,Pt),re&&ut($t,re),Object.defineProperty($t,"prototype",{writable:!1}),$t}function pt(){return typeof Reflect!="undefined"&&Reflect.get?pt=Reflect.get:pt=function(Pt,re,be){var pe=Dt(Pt,re);if(pe){var ke=Object.getOwnPropertyDescriptor(pe,re);return ke.get?ke.get.call(arguments.length<3?Pt:be):ke.value}},pt.apply(this,arguments)}function Dt($t,Pt){for(;!Object.prototype.hasOwnProperty.call($t,Pt)&&($t=ht($t),$t!==null););return $t}function Ot($t,Pt){if(typeof Pt!="function"&&Pt!==null)throw new TypeError("Super expression must either be null or a function");$t.prototype=Object.create(Pt&&Pt.prototype,{constructor:{value:$t,writable:!0,configurable:!0}}),Object.defineProperty($t,"prototype",{writable:!1}),Pt&&te($t,Pt)}function te($t,Pt){return te=Object.setPrototypeOf||function(be,pe){return be.__proto__=pe,be},te($t,Pt)}function Gt($t){var Pt=at();return function(){var be=ht($t),pe;if(Pt){var ke=ht(this).constructor;pe=Reflect.construct(be,arguments,ke)}else pe=be.apply(this,arguments);return K(this,pe)}}function K($t,Pt){if(Pt&&(it(Pt)==="object"||typeof Pt=="function"))return Pt;if(Pt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p($t)}function p($t){if($t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t}function at(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch($t){return!1}}function ht($t){return ht=Object.setPrototypeOf?Object.getPrototypeOf:function(re){return re.__proto__||Object.getPrototypeOf(re)},ht($t)}var wt=function($t){Ot(re,$t);var Pt=Gt(re);function re(){var be;tt(this,re);for(var pe=arguments.length,ke=new Array(pe),or=0;or<pe;or++)ke[or]=arguments[or];return be=Pt.call.apply(Pt,[this].concat(ke)),be.eventPool={},be}return vt(re,[{key:"appendEvent",value:function(pe,ke){this.eventPool[pe]||(this.eventPool[pe]=[]),this.eventPool[pe].push(ke)}},{key:"removeEvent",value:function(pe,ke){if(this.eventPool[pe]){var or=this.eventPool[pe].indexOf(ke);or>-1&&this.eventPool[pe].splice(or,1)}}},{key:"emitEvent",value:function(pe){for(var ke=arguments.length,or=new Array(ke>1?ke-1:0),cr=1;cr<ke;cr++)or[cr-1]=arguments[cr];this.eventPool[pe]&&this.eventPool[pe].forEach(function(rn){rn.apply(void 0,or)})}},{key:"setNode",value:function(pe,ke){return pt(ht(re.prototype),"setNode",this).call(this,pe,ke),this.emitEvent("nodeAdd",pe,ke),this}},{key:"removeNode",value:function(pe){return pt(ht(re.prototype),"removeNode",this).call(this,pe),this.emitEvent("nodeRemove",pe),this}},{key:"setEdge",value:function(pe,ke,or,cr){return pt(ht(re.prototype),"setEdge",this).call(this,pe,ke,or,cr),this.emitEvent("edgeAdd",pe,ke,or,cr),this}},{key:"removeEdge",value:function(pe,ke,or){return pt(ht(re.prototype),"removeEdge",this).call(this,pe,ke,or),this.emitEvent("edgeRemove",pe,ke,or),this}}]),re}(J);function Mt($t,Pt){for(var re=0;re<Pt.length;re++){var be=Pt[re];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty($t,be.key,be)}}function Ut($t,Pt,re){return Pt&&Mt($t.prototype,Pt),re&&Mt($t,re),Object.defineProperty($t,"prototype",{writable:!1}),$t}function Vt($t,Pt){if(!($t instanceof Pt))throw new TypeError("Cannot call a class as a function")}var Me=Ut(function $t(){var Pt=this;Vt(this,$t),this.arr=[],this.keyIndice=new Map,this.size=function(){return Pt.arr.length},this.keys=function(){return Pt.arr.map(function(re){return re.key})},this.has=function(re){return Pt.keyIndice.has(re)},this.priority=function(re){var be=Pt.keyIndice.get(re);if(be!==void 0)return Pt.arr[be].priority},this.swap=function(re,be){var pe=Pt.arr,ke=Pt.keyIndice,or=[pe[re],pe[be]],cr=or[0],rn=or[1];pe[re]=rn,pe[be]=cr,ke.set(cr.key,be),ke.set(rn.key,re)},this.innerDecrease=function(re){for(var be=Pt.arr,pe=be[re].priority,ke,or=re;or!==0;){var cr;if(ke=or>>1,((cr=be[ke])===null||cr===void 0?void 0:cr.priority)<pe)break;Pt.swap(or,ke),or=ke}},this.heapify=function(re){var be=Pt.arr,pe=re<<1,ke=pe+1,or=re;pe<be.length&&(or=be[pe].priority<be[or].priority?pe:or,ke<be.length&&(or=be[ke].priority<be[or].priority?ke:or),or!==re&&(Pt.swap(re,or),Pt.heapify(or)))},this.min=function(){if(Pt.size()===0)throw new Error("Queue underflow");return Pt.arr[0].key},this.add=function(re,be){var pe=Pt.keyIndice,ke=Pt.arr;if(!pe.has(re)){var or=ke.length;return pe.set(re,or),ke.push({key:re,priority:be}),Pt.innerDecrease(or),!0}return!1},this.removeMin=function(){Pt.swap(0,Pt.arr.length-1);var re=Pt.arr.pop();return Pt.keyIndice.delete(re.key),Pt.heapify(0),re.key},this.decrease=function(re,be){if(!Pt.has(re))throw new Error("There's no key named ".concat(re));var pe=Pt.keyIndice.get(re);if(be>Pt.arr[pe].priority)throw new Error("New priority is greater than current priority.Key: ".concat(re," Old: + ").concat(Pt.arr[pe].priority," New: ").concat(be));Pt.arr[pe].priority=be,Pt.innerDecrease(pe)}}),Wt=function(Pt,re){var be=new J,pe=new Map,ke=new Me,or;function cr(An){var la=An.v===or?An.w:An.v,aa=ke.priority(la);if(aa!==void 0){var Ca=re(An);Ca<aa&&(pe.set(la,or),ke.decrease(la,Ca))}}if(Pt.nodeCount()===0)return be;Pt.nodes().forEach(function(An){ke.add(An,Number.POSITIVE_INFINITY),be.setNode(An)}),ke.decrease(Pt.nodes()[0],0);for(var rn=!1;ke.size()>0;){var Nn;if(or=ke.removeMin(),pe.has(or))be.setEdge(or,pe.get(or));else{if(rn)throw new Error("Input graph is not connected: "+Pt.graph());rn=!0}(Nn=Pt.nodeEdges(or))===null||Nn===void 0||Nn.forEach(cr)}return be},ae=Wt,he=function(Pt){var re=new Set,be=[],pe=Pt.nodes();return pe.forEach(function(ke){for(var or=[],cr=[ke];cr.length>0;){var rn=cr.pop();if(!re.has(rn)){var Nn,An;re.add(rn),or.push(rn),(Nn=Pt.successors(rn))===null||Nn===void 0||Nn.forEach(function(la){return cr.push(la)}),(An=Pt.predecessors(rn))===null||An===void 0||An.forEach(function(la){return cr.push(la)})}}or.length&&be.push(or)}),be},Se=he,xe=function $t(Pt,re,be,pe,ke,or){pe.includes(re)||(pe.push(re),be||or.push(re),ke(re).forEach(function(cr){return $t(Pt,cr,be,pe,ke,or)}),be&&or.push(re))},Bt=function(Pt,re,be){var pe=Array.isArray(re)?re:[re],ke=function(Nn){return Pt.isDirected()?Pt.successors(Nn):Pt.neighbors(Nn)},or=[],cr=[];return pe.forEach(function(rn){if(Pt.hasNode(rn))xe(Pt,rn,be==="post",cr,ke,or);else throw new Error("Graph does not have node: "+rn)}),or},fe=Bt;function Le($t,Pt){return Ie($t)||se($t,Pt)||oe($t,Pt)||jt()}function jt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oe($t,Pt){if($t){if(typeof $t=="string")return Te($t,Pt);var re=Object.prototype.toString.call($t).slice(8,-1);if(re==="Object"&&$t.constructor&&(re=$t.constructor.name),re==="Map"||re==="Set")return Array.from($t);if(re==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(re))return Te($t,Pt)}}function Te($t,Pt){(Pt==null||Pt>$t.length)&&(Pt=$t.length);for(var re=0,be=new Array(Pt);re<Pt;re++)be[re]=$t[re];return be}function se($t,Pt){var re=$t==null?null:typeof Symbol!="undefined"&&$t[Symbol.iterator]||$t["@@iterator"];if(re!=null){var be=[],pe=!0,ke=!1,or,cr;try{for(re=re.call($t);!(pe=(or=re.next()).done)&&(be.push(or.value),!(Pt&&be.length===Pt));pe=!0);}catch(rn){ke=!0,cr=rn}finally{try{!pe&&re.return!=null&&re.return()}finally{if(ke)throw cr}}return be}}function Ie($t){if(Array.isArray($t))return $t}var Pe=function(){return 1},Lt=function(Pt,re,be,pe){return Je(Pt,re,be||Pe,pe||function(ke){return Pt.outEdges(ke)})},Je=function(Pt,re,be,pe){var ke=new Map,or=new Me,cr,rn,Nn=function(aa){var Ca=aa.v!==cr?aa.v:aa.w,Qa=ke.get(Ca),Za=be(aa),Xa=rn.distance+Za;if(Za<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+aa+" Weight: "+Za);Xa<Qa.distance&&(Qa.distance=Xa,Qa.predecessor=cr,or.decrease(Ca,Xa))};for(Pt.nodes().forEach(function(la){var aa=la===re?0:Number.POSITIVE_INFINITY;ke.set(la,{distance:aa}),or.add(la,aa)});or.size()>0&&(cr=or.removeMin(),rn=ke.get(cr),!(rn&&rn.distance===Number.POSITIVE_INFINITY));)pe(cr).forEach(Nn);var An={};return Array.from(ke.entries()).forEach(function(la){var aa=Le(la,2),Ca=aa[0],Qa=aa[1];return An[String(Ca)]=Qa,An}),An},Lr=Lt,Vr=function(Pt,re,be){var pe={};return Pt.nodes().forEach(function(ke){return pe[String(ke)]=Lr(Pt,ke,re,be),pe}),pe},Xr=Vr,Mn=function(Pt){var re=0,be=[],pe=new Map,ke=[];function or(cr){var rn,Nn={onStack:!0,lowlink:re,index:re};if(pe.set(cr,Nn),re+=1,be.push(cr),(rn=Pt.successors(cr))===null||rn===void 0||rn.forEach(function(Ca){var Qa;if(pe.has(Ca)){if(!((Qa=pe.get(Ca))===null||Qa===void 0)&&Qa.onStack){var Xa=pe.get(Ca);Nn.lowlink=Math.min(Nn.lowlink,Xa.index)}}else{or(Ca);var Za=pe.get(Ca);Nn.lowlink=Math.min(Nn.lowlink,Za.lowlink)}}),Nn.lowlink===Nn.index){var An=[],la;do{la=be.pop();var aa=pe.get(la);aa.onStack=!1,An.push(la)}while(cr!==la);ke.push(An)}}return Pt.nodes().forEach(function(cr){pe.has(cr)||or(cr)}),ke},Hr=Mn,Cn=function(Pt){return Hr(Pt).filter(function(re){return re.length>1||re.length===1&&Pt.hasEdge(re[0],re[0])})},Zn=Cn;function Un($t){"@babel/helpers - typeof";return Un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Pt){return typeof Pt}:function(Pt){return Pt&&typeof Symbol=="function"&&Pt.constructor===Symbol&&Pt!==Symbol.prototype?"symbol":typeof Pt},Un($t)}function mn($t,Pt){for(var re=0;re<Pt.length;re++){var be=Pt[re];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty($t,be.key,be)}}function rr($t,Pt,re){return Pt&&mn($t.prototype,Pt),re&&mn($t,re),Object.defineProperty($t,"prototype",{writable:!1}),$t}function sr($t,Pt){if(!($t instanceof Pt))throw new TypeError("Cannot call a class as a function")}function lr($t,Pt){if(typeof Pt!="function"&&Pt!==null)throw new TypeError("Super expression must either be null or a function");$t.prototype=Object.create(Pt&&Pt.prototype,{constructor:{value:$t,writable:!0,configurable:!0}}),Object.defineProperty($t,"prototype",{writable:!1}),Pt&&bn($t,Pt)}function zr($t){var Pt=Jn();return function(){var be=Hn($t),pe;if(Pt){var ke=Hn(this).constructor;pe=Reflect.construct(be,arguments,ke)}else pe=be.apply(this,arguments);return fn(this,pe)}}function fn($t,Pt){if(Pt&&(Un(Pt)==="object"||typeof Pt=="function"))return Pt;if(Pt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wn($t)}function wn($t){if($t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t}function ln($t){var Pt=typeof Map=="function"?new Map:void 0;return ln=function(be){if(be===null||!Da(be))return be;if(typeof be!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Pt!="undefined"){if(Pt.has(be))return Pt.get(be);Pt.set(be,pe)}function pe(){return $n(be,arguments,Hn(this).constructor)}return pe.prototype=Object.create(be.prototype,{constructor:{value:pe,enumerable:!1,writable:!0,configurable:!0}}),bn(pe,be)},ln($t)}function $n($t,Pt,re){return Jn()?$n=Reflect.construct:$n=function(pe,ke,or){var cr=[null];cr.push.apply(cr,ke);var rn=Function.bind.apply(pe,cr),Nn=new rn;return or&&bn(Nn,or.prototype),Nn},$n.apply(null,arguments)}function Jn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch($t){return!1}}function Da($t){return Function.toString.call($t).indexOf("[native code]")!==-1}function bn($t,Pt){return bn=Object.setPrototypeOf||function(be,pe){return be.__proto__=pe,be},bn($t,Pt)}function Hn($t){return Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(re){return re.__proto__||Object.getPrototypeOf(re)},Hn($t)}var Wn=function($t){lr(re,$t);var Pt=zr(re);function re(){return sr(this,re),Pt.apply(this,arguments)}return rr(re)}(ln(Error));function Bn($t){var Pt=new Set,re=new Set,be=[];function pe(ke){if(re.has(ke))throw new Wn;if(!Pt.has(ke)){var or;re.add(ke),Pt.add(ke),(or=$t.predecessors(ke))===null||or===void 0||or.forEach(pe),re.delete(ke),be.push(ke)}}if($t.sinks().forEach(pe),Pt.size!==$t.nodeCount())throw new Wn;return be}var ya=Bn,q=function(Pt){try{ya(Pt)}catch(re){if(re instanceof Wn)return!1;throw re}return!0},Ve=q,Ee=function(Pt,re){return fe(Pt,re,"post")},nr=Ee,ar=function(Pt,re){return fe(Pt,re,"pre")},Ur=ar,Nr=function(){return 1};function gn($t,Pt,re){return hn($t,Pt||Nr,re||function(be){return $t.outEdges(be)})}function hn($t,Pt,re){var be={},pe=$t.nodes();return pe.forEach(function(ke){var or=String(ke);be[or]={},be[or][or]={distance:0},pe.forEach(function(cr){ke!==cr&&(be[or][String(cr)]={distance:Number.POSITIVE_INFINITY})}),re(ke).forEach(function(cr){var rn=cr.v===ke?cr.w:cr.v,Nn=Pt(cr);be[or][String(rn)]={distance:Nn,predecessor:ke}})}),pe.forEach(function(ke){var or=String(ke),cr=be[or];pe.forEach(function(rn){var Nn=String(rn),An=be[Nn];pe.forEach(function(la){var aa=String(la),Ca=An[or],Qa=cr[aa],Za=An[aa],Xa=Ca.distance+Qa.distance;Xa<Za.distance&&(Za.distance=Xa,Za.predecessor=Qa.predecessor)})})}),be}var pn=gn,gt=function(Pt,re){for(var be=Pt.nodes(),pe=0;pe<be.length;pe++){var ke=be[pe];if(re.hasNode(ke))return!0}return!1},bt=function(Pt,re){for(var be=Pt.edges(),pe=0;pe<be.length;pe++){var ke=be[pe];if(re.hasEdge(ke.v,ke.w,ke.name))return!0}return!1},W=function(Pt,re){var be=Pt.nodes(),pe=be.filter(function(ke){return re.hasNode(ke)});return pe},T=function(Pt,re){var be=Pt.edges(),pe=be.filter(function(ke){return re.hasEdge(ke.v,ke.w,ke.name)});return pe},A=function(Pt,re){return Pt.isCompound()===re.isCompound()&&Pt.isDirected()===re.isDirected()&&Pt.isMultigraph()===re.isMultigraph()},et=function(Pt,re){var be=W(Pt,re);return be.length===Pt.nodes().length},_t=function(Pt,re){var be=T(Pt,re);return be.length===Pt.edges().length},Xt=function(Pt,re){return A(Pt,re)&&Pt.nodeCount()===re.nodeCount()&&et(Pt,re)&&Pt.edgeCount()===re.edgeCount()&&_t(Pt,re)},Rt=function(Pt,re){return et(Pt,re)&&_t(Pt,re)};function ee($t,Pt){return Sr($t)||jr($t,Pt)||De($t,Pt)||Ge()}function Ge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function De($t,Pt){if($t){if(typeof $t=="string")return fr($t,Pt);var re=Object.prototype.toString.call($t).slice(8,-1);if(re==="Object"&&$t.constructor&&(re=$t.constructor.name),re==="Map"||re==="Set")return Array.from($t);if(re==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(re))return fr($t,Pt)}}function fr($t,Pt){(Pt==null||Pt>$t.length)&&(Pt=$t.length);for(var re=0,be=new Array(Pt);re<Pt;re++)be[re]=$t[re];return be}function jr($t,Pt){var re=$t==null?null:typeof Symbol!="undefined"&&$t[Symbol.iterator]||$t["@@iterator"];if(re!=null){var be=[],pe=!0,ke=!1,or,cr;try{for(re=re.call($t);!(pe=(or=re.next()).done)&&(be.push(or.value),!(Pt&&be.length===Pt));pe=!0);}catch(rn){ke=!0,cr=rn}finally{try{!pe&&re.return!=null&&re.return()}finally{if(ke)throw cr}}return be}}function Sr($t){if(Array.isArray($t))return $t}function vn($t){return $t instanceof J}function Xn($t){if($t.isMultigraph())return!1;for(var Pt=$t.edges(),re=new Map,be=0;be<Pt.length;be++){var pe=Pt[be];if(pe.v===pe.w)return!1;var ke=[pe.v,pe.w].sort(),or=ee(ke,2),cr=or[0],rn=or[1],Nn="".concat(cr,"-").concat(rn);if(re.has(Nn))return!1;re.set(Nn,!0)}return!0}function je($t){return $t.nodes().length===0}function Er($t){for(var Pt=$t.edges(),re=0;re<Pt.length;re++){var be=Pt[re];if(be.v===be.w)return!0}return!1}var Pr=function(Pt,re){if(!Xn(Pt)||!Xn(re)||!et(Pt,re)||bt(Pt,re))return!1;var be=Pt.nodeCount();return Pt.edgeCount()+re.edgeCount()===be*(be-1)/2},Kr=function(Pt){if(!Xn(Pt))return null;for(var re=Pt.nodeCount(),be=new J({compound:Pt.isCompound(),directed:Pt.isDirected(),multigraph:Pt.isMultigraph()}),pe=Pt.nodes(),ke=0;ke<re;ke++){var or=pe[ke];be.setNode(or,Pt.node(or));for(var cr=ke+1;cr<re;cr++){var rn=pe[cr];Pt.hasEdge(or,rn)||be.setEdge(or,rn)}}return be}},81746:function(xr){(function(z,F){xr.exports=F()})(typeof self!="undefined"?self:this,function(){return function(U){var z={};function F(j){if(z[j])return z[j].exports;var B=z[j]={i:j,l:!1,exports:{}};return U[j].call(B.exports,B,B.exports,F),B.l=!0,B.exports}return F.m=U,F.c=z,F.d=function(j,B,L){F.o(j,B)||Object.defineProperty(j,B,{configurable:!1,enumerable:!0,get:L})},F.n=function(j){var B=j&&j.__esModule?function(){return j.default}:function(){return j};return F.d(B,"a",B),B},F.o=function(j,B){return Object.prototype.hasOwnProperty.call(j,B)},F.p="",F(F.s=36)}([function(U,z,F){"use strict";var j=F(3);z.a=function(B){return Array.isArray?Array.isArray(B):Object(j.a)(B,"Array")}},function(U,z,F){"use strict";var j=function(B){return B!==null&&typeof B!="function"&&isFinite(B.length)};z.a=j},function(U,z,F){"use strict";var j=F(3);z.a=function(B){return Object(j.a)(B,"Function")}},function(U,z,F){"use strict";var j={}.toString,B=function(L,k){return j.call(L)==="[object "+k+"]"};z.a=B},function(U,z,F){"use strict";var j=F(3);z.a=function(B){return Object(j.a)(B,"String")}},function(U,z,F){"use strict";var j=F(3),B=function(L){return Object(j.a)(L,"Number")};z.a=B},function(U,z,F){var j=F(38),B=j.mix;function L(k,D,w,b){return b===void 0&&(b="height"),w==="center"?(k[b]+D[b])/2:k.height}U.exports={assign:B,getHeight:L}},function(U,z,F){"use strict";var j=function(B){return B==null};z.a=j},function(U,z,F){"use strict";var j=F(0),B=F(12);function L(k,D){if(k){var w;if(Object(j.a)(k))for(var b=0,g=k.length;b<g&&(w=D(k[b],b),w!==!1);b++);else if(Object(B.a)(k)){for(var y in k)if(k.hasOwnProperty(y)&&(w=D(k[y],y),w===!1))break}}}z.a=L},function(U,z,F){"use strict";var j=F(7);z.a=function(B){return Object(j.a)(B)?"":B.toString()}},function(U,z,F){"use strict";var j=F(14),B=F(3),L=function(k){if(!Object(j.a)(k)||!Object(B.a)(k,"Object"))return!1;if(Object.getPrototypeOf(k)===null)return!0;for(var D=k;Object.getPrototypeOf(D)!==null;)D=Object.getPrototypeOf(D);return Object.getPrototypeOf(k)===D};z.a=L},function(U,z,F){var j=F(18),B=function(){function L(D,w){w===void 0&&(w={});var b=this;b.options=w,b.rootNode=j(D,w)}var k=L.prototype;return k.execute=function(){throw new Error("please override this method")},L}();U.exports=B},function(U,z,F){"use strict";z.a=function(j){var B=typeof j;return j!==null&&B==="object"||B==="function"}},function(U,z,F){"use strict";var j=F(1),B=function(L,k){return Object(j.a)(L)?L.indexOf(k)>-1:!1};z.a=B},function(U,z,F){"use strict";var j=function(B){return typeof B=="object"&&B!==null};z.a=j},function(U,z,F){"use strict";var j=F(8),B=F(2),L=Object.values?function(k){return Object.values(k)}:function(k){var D=[];return Object(j.a)(k,function(w,b){Object(B.a)(k)&&b==="prototype"||D.push(w)}),D};z.a=L},function(U,z,F){"use strict";z.a=B;function j(L,k){for(var D in k)k.hasOwnProperty(D)&&D!=="constructor"&&k[D]!==void 0&&(L[D]=k[D])}function B(L,k,D,w){return k&&j(L,k),D&&j(L,D),w&&j(L,w),L}},function(U,z,F){var j=F(35),B=["LR","RL","TB","BT","H","V"],L=["LR","RL","H"],k=function(b){return L.indexOf(b)>-1},D=B[0];U.exports=function(w,b,g){var y=b.direction||D;if(b.isHorizontal=k(y),y&&B.indexOf(y)===-1)throw new TypeError("Invalid direction: "+y);if(y===B[0])g(w,b);else if(y===B[1])g(w,b),w.right2left();else if(y===B[2])g(w,b);else if(y===B[3])g(w,b),w.bottom2top();else if(y===B[4]||y===B[5]){var d=j(w,b),S=d.left,_=d.right;g(S,b),g(_,b),b.isHorizontal?S.right2left():S.bottom2top(),_.translate(S.x-_.x,S.y-_.y),w.x=S.x,w.y=_.y;var E=w.getBoundingBox();b.isHorizontal?E.top<0&&w.translate(0,-E.top):E.left<0&&w.translate(-E.left,0)}var I=b.fixedRoot;return I===void 0&&(I=!0),I&&w.translate(-(w.x+w.width/2+w.hgap),-(w.y+w.height/2+w.vgap)),w}},function(U,z,F){var j=F(6),B=18,L=B*2,k=B,D={getId:function(y){return y.id||y.name},getPreH:function(y){return y.preH||0},getPreV:function(y){return y.preV||0},getHGap:function(y){return y.hgap||k},getVGap:function(y){return y.vgap||k},getChildren:function(y){return y.children},getHeight:function(y){return y.height||L},getWidth:function(y){var d=y.label||" ";return y.width||d.split("").length*B}};function w(g,y){var d=this;if(d.vgap=d.hgap=0,g instanceof w)return g;d.data=g;var S=y.getHGap(g),_=y.getVGap(g);return d.preH=y.getPreH(g),d.preV=y.getPreV(g),d.width=y.getWidth(g),d.height=y.getHeight(g),d.width+=d.preH,d.height+=d.preV,d.id=y.getId(g),d.x=d.y=0,d.depth=0,d.children||(d.children=[]),d.addGap(S,_),d}j.assign(w.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(y,d){var S=this;S.hgap+=y,S.vgap+=d,S.width+=2*y,S.height+=2*d},eachNode:function(y){for(var d=this,S=[d],_;_=S.shift();)y(_),S=_.children.concat(S)},DFTraverse:function(y){this.eachNode(y)},BFTraverse:function(y){for(var d=this,S=[d],_;_=S.shift();)y(_),S=S.concat(_.children)},getBoundingBox:function(){var y={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(d){y.left=Math.min(y.left,d.x),y.top=Math.min(y.top,d.y),y.width=Math.max(y.width,d.x+d.width),y.height=Math.max(y.height,d.y+d.height)}),y},translate:function(y,d){y===void 0&&(y=0),d===void 0&&(d=0),this.eachNode(function(S){S.x+=y,S.y+=d,S.x+=S.preH,S.y+=S.preV})},right2left:function(){var y=this,d=y.getBoundingBox();y.eachNode(function(S){S.x=S.x-(S.x-d.left)*2-S.width}),y.translate(d.width,0)},bottom2top:function(){var y=this,d=y.getBoundingBox();y.eachNode(function(S){S.y=S.y-(S.y-d.top)*2-S.height}),y.translate(0,d.height)}});function b(g,y,d){y===void 0&&(y={}),y=j.assign({},D,y);var S=new w(g,y),_=[S],E;if(!d&&!g.collapsed){for(;E=_.shift();)if(!E.data.collapsed){var I=y.getChildren(E.data),P=I?I.length:0;if(E.children=new Array(P),I&&P)for(var N=0;N<P;N++){var H=new w(I[N],y);E.children[N]=H,_.push(H),H.parent=E,H.depth=E.depth+1}}}return S}U.exports=b},function(U,z,F){"use strict";var j=F(1),B=function(L,k){if(!Object(j.a)(L))return L;for(var D=[],w=0;w<L.length;w++){var b=L[w];k(b,w)&&D.push(b)}return D};z.a=B},function(U,z,F){"use strict";var j=F(7),B=F(21);function L(k,D){var w=Object(B.a)(D),b=w.length;if(Object(j.a)(k))return!b;for(var g=0;g<b;g+=1){var y=w[g];if(D[y]!==k[y]||!(y in k))return!1}return!0}z.a=L},function(U,z,F){"use strict";var j=F(8),B=F(2),L=Object.keys?function(k){return Object.keys(k)}:function(k){var D=[];return Object(j.a)(k,function(w,b){Object(B.a)(k)&&b==="prototype"||D.push(b)}),D};z.a=L},function(U,z,F){"use strict";var j=F(0);z.a=function(B){if(Object(j.a)(B))return B.reduce(function(L,k){return Math.max(L,k)},B[0])}},function(U,z,F){"use strict";var j=F(0);z.a=function(B){if(Object(j.a)(B))return B.reduce(function(L,k){return Math.min(L,k)},B[0])}},function(U,z,F){"use strict";var j=F(1),B=Array.prototype.splice,L=function(D,w){if(!Object(j.a)(D))return[];for(var b=D?w.length:0,g=b-1;b--;){var y=void 0,d=w[b];(b===g||d!==y)&&(y=d,B.call(D,d,1))}return D};z.a=L},function(U,z,F){"use strict";var j=F(8),B=F(0),L=F(10),k=function(D,w,b){if(!Object(B.a)(D)&&!Object(L.a)(D))return D;var g=b;return Object(j.a)(D,function(y,d){g=w(g,y,d)}),g};z.a=k},function(U,z,F){"use strict";z.a=j;function j(B,L){L===void 0&&(L=new Map);var k=[];if(Array.isArray(B))for(var D=0,w=B.length;D<w;D++){var b=B[D];L.has(b)||(k.push(b),L.set(b,!0))}return k}},function(U,z,F){"use strict";z.a=k;var j=F(0),B=F(2),L=F(28);function k(D,w){if(!w)return{0:D};if(!Object(B.a)(w)){var b=Object(j.a)(w)?w:w.replace(/\s+/g,"").split("*");w=function(g){for(var y="_",d=0,S=b.length;d<S;d++)y+=g[b[d]]&&g[b[d]].toString();return y}}return Object(L.a)(D,w)}},function(U,z,F){"use strict";var j=F(0),B=F(2),L=Object.prototype.hasOwnProperty;function k(D,w){if(!w||!Object(j.a)(D))return{};for(var b={},g=Object(B.a)(w)?w:function(_){return _[w]},y,d=0;d<D.length;d++){var S=D[d];y=g(S),L.call(b,y)?b[y].push(S):b[y]=[S]}return b}z.a=k},function(U,z,F){"use strict";z.a=function(j,B){return j.hasOwnProperty(B)}},function(U,z,F){"use strict";var j={}.toString,B=function(L){return j.call(L).replace(/^\[object /,"").replace(/]$/,"")};z.a=B},function(U,z,F){"use strict";var j=Object.prototype,B=function(L){var k=L&&L.constructor,D=typeof k=="function"&&k.prototype||j;return L===D};z.a=B},function(U,z,F){"use strict";var j=F(2);z.a=function(B,L){if(!Object(j.a)(B))throw new TypeError("Expected a function");var k=function(){for(var D=[],w=0;w<arguments.length;w++)D[w]=arguments[w];var b=L?L.apply(this,D):D[0],g=k.cache;if(g.has(b))return g.get(b);var y=B.apply(this,D);return g.set(b,y),y};return k.cache=new Map,k}},function(U,z,F){"use strict";var j=F(14),B=F(1),L=F(4),k=function(D,w){if(D===w)return!0;if(!D||!w||Object(L.a)(D)||Object(L.a)(w))return!1;if(Object(B.a)(D)||Object(B.a)(w)){if(D.length!==w.length)return!1;for(var b=!0,g=0;g<D.length&&(b=k(D[g],w[g]),!!b);g++);return b}if(Object(j.a)(D)||Object(j.a)(w)){var y=Object.keys(D),d=Object.keys(w);if(y.length!==d.length)return!1;for(var b=!0,g=0;g<y.length&&(b=k(D[y[g]],w[y[g]]),!!b);g++);return b}return!1};z.a=k},function(U,z,F){"use strict";var j=F(116),B=F(15),L=F(32),k=F(4),D;z.a=Object(L.a)(function(w,b){b===void 0&&(b={});var g=b.fontSize,y=b.fontFamily,d=b.fontWeight,S=b.fontStyle,_=b.fontVariant;return D||(D=document.createElement("canvas").getContext("2d")),D.font=[S,_,d,g+"px",y].join(" "),D.measureText(Object(k.a)(w)?w:"").width},function(w,b){return b===void 0&&(b={}),Object(j.a)([w],Object(B.a)(b)).join("")})},function(U,z,F){var j=F(18);U.exports=function(B,L){for(var k=j(B.data,L,!0),D=j(B.data,L,!0),w=B.children.length,b=Math.round(w/2),g=L.getSide||function(_,E){return E<b?"right":"left"},y=0;y<w;y++){var d=B.children[y],S=g(d,y);S==="right"?D.children.push(d):k.children.push(d)}return k.eachNode(function(_){_.isRoot()||(_.side="left")}),D.eachNode(function(_){_.isRoot()||(_.side="right")}),{left:k,right:D}}},function(U,z,F){var j={compactBox:F(37),dendrogram:F(120),indented:F(122),mindmap:F(124)};U.exports=j},function(U,z,F){function j(d,S){d.prototype=Object.create(S.prototype),d.prototype.constructor=d,B(d,S)}function B(d,S){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,I){return E.__proto__=I,E},B(d,S)}var L=F(11),k=F(119),D=F(17),w=F(6),b=function(d){j(S,d);function S(){return d.apply(this,arguments)||this}var _=S.prototype;return _.execute=function(){var I=this;return D(I.rootNode,I.options,k)},S}(L),g={};function y(d,S){return S=w.assign({},g,S),new b(d,S).execute()}U.exports=y},function(U,z,F){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var j=F(13);F.d(z,"contains",function(){return j.a}),F.d(z,"includes",function(){return j.a});var B=F(39);F.d(z,"difference",function(){return B.a});var L=F(40);F.d(z,"find",function(){return L.a});var k=F(41);F.d(z,"findIndex",function(){return k.a});var D=F(42);F.d(z,"firstValue",function(){return D.a});var w=F(43);F.d(z,"flatten",function(){return w.a});var b=F(44);F.d(z,"flattenDeep",function(){return b.a});var g=F(45);F.d(z,"getRange",function(){return g.a});var y=F(46);F.d(z,"pull",function(){return y.a});var d=F(24);F.d(z,"pullAt",function(){return d.a});var S=F(25);F.d(z,"reduce",function(){return S.a});var _=F(47);F.d(z,"remove",function(){return _.a});var E=F(48);F.d(z,"sortBy",function(){return E.a});var I=F(49);F.d(z,"union",function(){return I.a});var P=F(26);F.d(z,"uniq",function(){return P.a});var N=F(50);F.d(z,"valuesOfKey",function(){return N.a});var H=F(51);F.d(z,"head",function(){return H.a});var nt=F(52);F.d(z,"last",function(){return nt.a});var X=F(53);F.d(z,"startsWith",function(){return X.a});var Y=F(54);F.d(z,"endsWith",function(){return Y.a});var Z=F(19);F.d(z,"filter",function(){return Z.a});var J=F(55);F.d(z,"every",function(){return J.a});var it=F(56);F.d(z,"some",function(){return it.a});var tt=F(57);F.d(z,"group",function(){return tt.a});var ut=F(28);F.d(z,"groupBy",function(){return ut.a});var vt=F(27);F.d(z,"groupToMap",function(){return vt.a});var pt=F(58);F.d(z,"getWrapBehavior",function(){return pt.a});var Dt=F(59);F.d(z,"wrapBehavior",function(){return Dt.a});var Ot=F(60);F.d(z,"number2color",function(){return Ot.a});var te=F(61);F.d(z,"parseRadius",function(){return te.a});var Gt=F(62);F.d(z,"clamp",function(){return Gt.a});var K=F(63);F.d(z,"fixedBase",function(){return K.a});var p=F(64);F.d(z,"isDecimal",function(){return p.a});var at=F(65);F.d(z,"isEven",function(){return at.a});var ht=F(66);F.d(z,"isInteger",function(){return ht.a});var wt=F(67);F.d(z,"isNegative",function(){return wt.a});var Mt=F(68);F.d(z,"isNumberEqual",function(){return Mt.a});var Ut=F(69);F.d(z,"isOdd",function(){return Ut.a});var Vt=F(70);F.d(z,"isPositive",function(){return Vt.a});var Me=F(22);F.d(z,"max",function(){return Me.a});var Wt=F(71);F.d(z,"maxBy",function(){return Wt.a});var ae=F(23);F.d(z,"min",function(){return ae.a});var he=F(72);F.d(z,"minBy",function(){return he.a});var Se=F(73);F.d(z,"mod",function(){return Se.a});var xe=F(74);F.d(z,"toDegree",function(){return xe.a});var Bt=F(75);F.d(z,"toInteger",function(){return Bt.a});var fe=F(76);F.d(z,"toRadian",function(){return fe.a});var Le=F(77);F.d(z,"forIn",function(){return Le.a});var jt=F(29);F.d(z,"has",function(){return jt.a});var oe=F(78);F.d(z,"hasKey",function(){return oe.a});var Te=F(79);F.d(z,"hasValue",function(){return Te.a});var se=F(21);F.d(z,"keys",function(){return se.a});var Ie=F(20);F.d(z,"isMatch",function(){return Ie.a});var Pe=F(15);F.d(z,"values",function(){return Pe.a});var Lt=F(80);F.d(z,"lowerCase",function(){return Lt.a});var Je=F(81);F.d(z,"lowerFirst",function(){return Je.a});var Lr=F(82);F.d(z,"substitute",function(){return Lr.a});var Vr=F(83);F.d(z,"upperCase",function(){return Vr.a});var Xr=F(84);F.d(z,"upperFirst",function(){return Xr.a});var Mn=F(30);F.d(z,"getType",function(){return Mn.a});var Hr=F(85);F.d(z,"isArguments",function(){return Hr.a});var Cn=F(0);F.d(z,"isArray",function(){return Cn.a});var Zn=F(1);F.d(z,"isArrayLike",function(){return Zn.a});var Un=F(86);F.d(z,"isBoolean",function(){return Un.a});var mn=F(87);F.d(z,"isDate",function(){return mn.a});var rr=F(88);F.d(z,"isError",function(){return rr.a});var sr=F(2);F.d(z,"isFunction",function(){return sr.a});var lr=F(89);F.d(z,"isFinite",function(){return lr.a});var zr=F(7);F.d(z,"isNil",function(){return zr.a});var fn=F(90);F.d(z,"isNull",function(){return fn.a});var wn=F(5);F.d(z,"isNumber",function(){return wn.a});var ln=F(12);F.d(z,"isObject",function(){return ln.a});var $n=F(14);F.d(z,"isObjectLike",function(){return $n.a});var Jn=F(10);F.d(z,"isPlainObject",function(){return Jn.a});var Da=F(31);F.d(z,"isPrototype",function(){return Da.a});var bn=F(91);F.d(z,"isRegExp",function(){return bn.a});var Hn=F(4);F.d(z,"isString",function(){return Hn.a});var Wn=F(3);F.d(z,"isType",function(){return Wn.a});var Bn=F(92);F.d(z,"isUndefined",function(){return Bn.a});var ya=F(93);F.d(z,"isElement",function(){return ya.a});var q=F(94);F.d(z,"requestAnimationFrame",function(){return q.a});var Ve=F(95);F.d(z,"clearAnimationFrame",function(){return Ve.a});var Ee=F(96);F.d(z,"augment",function(){return Ee.a});var nr=F(97);F.d(z,"clone",function(){return nr.a});var ar=F(98);F.d(z,"debounce",function(){return ar.a});var Ur=F(32);F.d(z,"memoize",function(){return Ur.a});var Nr=F(99);F.d(z,"deepMix",function(){return Nr.a});var gn=F(8);F.d(z,"each",function(){return gn.a});var hn=F(100);F.d(z,"extend",function(){return hn.a});var pn=F(101);F.d(z,"indexOf",function(){return pn.a});var gt=F(102);F.d(z,"isEmpty",function(){return gt.a});var bt=F(33);F.d(z,"isEqual",function(){return bt.a});var W=F(103);F.d(z,"isEqualWith",function(){return W.a});var T=F(104);F.d(z,"map",function(){return T.a});var A=F(105);F.d(z,"mapValues",function(){return A.a});var et=F(16);F.d(z,"mix",function(){return et.a}),F.d(z,"assign",function(){return et.a});var _t=F(106);F.d(z,"get",function(){return _t.a});var Xt=F(107);F.d(z,"set",function(){return Xt.a});var Rt=F(108);F.d(z,"pick",function(){return Rt.a});var ee=F(109);F.d(z,"omit",function(){return ee.a});var Ge=F(110);F.d(z,"throttle",function(){return Ge.a});var De=F(111);F.d(z,"toArray",function(){return De.a});var fr=F(9);F.d(z,"toString",function(){return fr.a});var jr=F(112);F.d(z,"uniqueId",function(){return jr.a});var Sr=F(113);F.d(z,"noop",function(){return Sr.a});var vn=F(114);F.d(z,"identity",function(){return vn.a});var Xn=F(115);F.d(z,"size",function(){return Xn.a});var je=F(34);F.d(z,"measureTextWidth",function(){return je.a});var Er=F(117);F.d(z,"getEllipsisText",function(){return Er.a});var Pr=F(118);F.d(z,"Cache",function(){return Pr.a})},function(U,z,F){"use strict";var j=F(19),B=F(13),L=function(k,D){return D===void 0&&(D=[]),Object(j.a)(k,function(w){return!Object(B.a)(D,w)})};z.a=L},function(U,z,F){"use strict";var j=F(2),B=F(20),L=F(0),k=F(10);function D(w,b){if(!Object(L.a)(w))return null;var g;if(Object(j.a)(b)&&(g=b),Object(k.a)(b)&&(g=function(d){return Object(B.a)(d,b)}),g){for(var y=0;y<w.length;y+=1)if(g(w[y]))return w[y]}return null}z.a=D},function(U,z,F){"use strict";function j(B,L,k){k===void 0&&(k=0);for(var D=k;D<B.length;D++)if(L(B[D],D))return D;return-1}z.a=j},function(U,z,F){"use strict";var j=F(7),B=F(0),L=function(k,D){for(var w=null,b=0;b<k.length;b++){var g=k[b],y=g[D];if(!Object(j.a)(y)){Object(B.a)(y)?w=y[0]:w=y;break}}return w};z.a=L},function(U,z,F){"use strict";var j=F(0),B=function(L){if(!Object(j.a)(L))return[];for(var k=[],D=0;D<L.length;D++)k=k.concat(L[D]);return k};z.a=B},function(U,z,F){"use strict";var j=F(0),B=function(L,k){if(k===void 0&&(k=[]),!Object(j.a)(L))k.push(L);else for(var D=0;D<L.length;D+=1)B(L[D],k);return k};z.a=B},function(U,z,F){"use strict";var j=F(0),B=F(22),L=F(23),k=function(D){var w=D.filter(function(S){return!isNaN(S)});if(!w.length)return{min:0,max:0};if(Object(j.a)(D[0])){for(var b=[],g=0;g<D.length;g++)b=b.concat(D[g]);w=b}var y=Object(B.a)(w),d=Object(L.a)(w);return{min:d,max:y}};z.a=k},function(U,z,F){"use strict";var j=Array.prototype,B=j.splice,L=j.indexOf,k=function(D){for(var w=[],b=1;b<arguments.length;b++)w[b-1]=arguments[b];for(var g=0;g<w.length;g++)for(var y=w[g],d=-1;(d=L.call(D,y))>-1;)B.call(D,d,1);return D};z.a=k},function(U,z,F){"use strict";var j=F(1),B=F(24),L=function(k,D){var w=[];if(!Object(j.a)(k))return w;for(var b=-1,g=[],y=k.length;++b<y;){var d=k[b];D(d,b,k)&&(w.push(d),g.push(b))}return Object(B.a)(k,g),w};z.a=L},function(U,z,F){"use strict";var j=F(0),B=F(4),L=F(2);function k(D,w){var b;if(Object(L.a)(w))b=function(y,d){return w(y)-w(d)};else{var g=[];Object(B.a)(w)?g.push(w):Object(j.a)(w)&&(g=w),b=function(y,d){for(var S=0;S<g.length;S+=1){var _=g[S];if(y[_]>d[_])return 1;if(y[_]<d[_])return-1}return 0}}return D.sort(b),D}z.a=k},function(U,z,F){"use strict";var j=F(26),B=function(){for(var L=[],k=0;k<arguments.length;k++)L[k]=arguments[k];return Object(j.a)([].concat.apply([],L))};z.a=B},function(U,z,F){"use strict";var j=F(0),B=F(7);z.a=function(L,k){for(var D=[],w={},b=0;b<L.length;b++){var g=L[b],y=g[k];if(!Object(B.a)(y)){Object(j.a)(y)||(y=[y]);for(var d=0;d<y.length;d++){var S=y[d];w[S]||(D.push(S),w[S]=!0)}}}return D}},function(U,z,F){"use strict";z.a=B;var j=F(1);function B(L){if(Object(j.a)(L))return L[0]}},function(U,z,F){"use strict";z.a=B;var j=F(1);function B(L){if(Object(j.a)(L)){var k=L;return k[k.length-1]}}},function(U,z,F){"use strict";var j=F(0),B=F(4);function L(k,D){return Object(j.a)(k)||Object(B.a)(k)?k[0]===D:!1}z.a=L},function(U,z,F){"use strict";var j=F(0),B=F(4);function L(k,D){return Object(j.a)(k)||Object(B.a)(k)?k[k.length-1]===D:!1}z.a=L},function(U,z,F){"use strict";var j=function(B,L){for(var k=0;k<B.length;k++)if(!L(B[k],k))return!1;return!0};z.a=j},function(U,z,F){"use strict";var j=function(B,L){for(var k=0;k<B.length;k++)if(L(B[k],k))return!0;return!1};z.a=j},function(U,z,F){"use strict";var j=F(27);z.a=function(B,L){if(!L)return[B];var k=Object(j.a)(B,L),D=[];for(var w in k)D.push(k[w]);return D}},function(U,z,F){"use strict";function j(B,L){return B["_wrap_"+L]}z.a=j},function(U,z,F){"use strict";function j(B,L){if(B["_wrap_"+L])return B["_wrap_"+L];var k=function(D){B[L](D)};return B["_wrap_"+L]=k,k}z.a=j},function(U,z,F){"use strict";var j={};function B(L){var k=j[L];if(!k){for(var D=L.toString(16),w=D.length;w<6;w++)D="0"+D;k="#"+D,j[L]=k}return k}z.a=B},function(U,z,F){"use strict";var j=F(0);function B(L){var k=0,D=0,w=0,b=0;return Object(j.a)(L)?L.length===1?k=D=w=b=L[0]:L.length===2?(k=w=L[0],D=b=L[1]):L.length===3?(k=L[0],D=b=L[1],w=L[2]):(k=L[0],D=L[1],w=L[2],b=L[3]):k=D=w=b=L,{r1:k,r2:D,r3:w,r4:b}}z.a=B},function(U,z,F){"use strict";var j=function(B,L,k){return B<L?L:B>k?k:B};z.a=j},function(U,z,F){"use strict";var j=function(B,L){var k=L.toString(),D=k.indexOf(".");if(D===-1)return Math.round(B);var w=k.substr(D+1).length;return w>20&&(w=20),parseFloat(B.toFixed(w))};z.a=j},function(U,z,F){"use strict";var j=F(5),B=function(L){return Object(j.a)(L)&&L%1!==0};z.a=B},function(U,z,F){"use strict";var j=F(5),B=function(L){return Object(j.a)(L)&&L%2===0};z.a=B},function(U,z,F){"use strict";var j=F(5),B=Number.isInteger?Number.isInteger:function(L){return Object(j.a)(L)&&L%1===0};z.a=B},function(U,z,F){"use strict";var j=F(5),B=function(L){return Object(j.a)(L)&&L<0};z.a=B},function(U,z,F){"use strict";z.a=B;var j=1e-5;function B(L,k,D){return D===void 0&&(D=j),Math.abs(L-k)<D}},function(U,z,F){"use strict";var j=F(5),B=function(L){return Object(j.a)(L)&&L%2!==0};z.a=B},function(U,z,F){"use strict";var j=F(5),B=function(L){return Object(j.a)(L)&&L>0};z.a=B},function(U,z,F){"use strict";var j=F(0),B=F(2);z.a=function(L,k){if(Object(j.a)(L)){for(var D,w=-1/0,b=0;b<L.length;b++){var g=L[b],y=Object(B.a)(k)?k(g):g[k];y>w&&(D=g,w=y)}return D}}},function(U,z,F){"use strict";var j=F(0),B=F(2);z.a=function(L,k){if(Object(j.a)(L)){for(var D,w=1/0,b=0;b<L.length;b++){var g=L[b],y=Object(B.a)(k)?k(g):g[k];y<w&&(D=g,w=y)}return D}}},function(U,z,F){"use strict";var j=function(B,L){return(B%L+L)%L};z.a=j},function(U,z,F){"use strict";var j=180/Math.PI,B=function(L){return j*L};z.a=B},function(U,z,F){"use strict";z.a=parseInt},function(U,z,F){"use strict";var j=Math.PI/180,B=function(L){return j*L};z.a=B},function(U,z,F){"use strict";var j=F(8);z.a=j.a},function(U,z,F){"use strict";var j=F(29);z.a=j.a},function(U,z,F){"use strict";var j=F(13),B=F(15);z.a=function(L,k){return Object(j.a)(Object(B.a)(L),k)}},function(U,z,F){"use strict";var j=F(9),B=function(L){return Object(j.a)(L).toLowerCase()};z.a=B},function(U,z,F){"use strict";var j=F(9),B=function(L){var k=Object(j.a)(L);return k.charAt(0).toLowerCase()+k.substring(1)};z.a=B},function(U,z,F){"use strict";function j(B,L){return!B||!L?B:B.replace(/\\?\{([^{}]+)\}/g,function(k,D){return k.charAt(0)==="\\"?k.slice(1):L[D]===void 0?"":L[D]})}z.a=j},function(U,z,F){"use strict";var j=F(9),B=function(L){return Object(j.a)(L).toUpperCase()};z.a=B},function(U,z,F){"use strict";var j=F(9),B=function(L){var k=Object(j.a)(L);return k.charAt(0).toUpperCase()+k.substring(1)};z.a=B},function(U,z,F){"use strict";var j=F(3),B=function(L){return Object(j.a)(L,"Arguments")};z.a=B},function(U,z,F){"use strict";var j=F(3),B=function(L){return Object(j.a)(L,"Boolean")};z.a=B},function(U,z,F){"use strict";var j=F(3),B=function(L){return Object(j.a)(L,"Date")};z.a=B},function(U,z,F){"use strict";var j=F(3),B=function(L){return Object(j.a)(L,"Error")};z.a=B},function(U,z,F){"use strict";var j=F(5);z.a=function(B){return Object(j.a)(B)&&isFinite(B)}},function(U,z,F){"use strict";var j=function(B){return B===null};z.a=j},function(U,z,F){"use strict";var j=F(3),B=function(L){return Object(j.a)(L,"RegExp")};z.a=B},function(U,z,F){"use strict";var j=function(B){return B===void 0};z.a=j},function(U,z,F){"use strict";var j=function(B){return B instanceof Element||B instanceof HTMLDocument};z.a=j},function(U,z,F){"use strict";z.a=j;function j(B){var L=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(k){return setTimeout(k,16)};return L(B)}},function(U,z,F){"use strict";z.a=j;function j(B){var L=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;L(B)}},function(U,z,F){"use strict";var j=F(16),B=F(2),L=function(){for(var k=[],D=0;D<arguments.length;D++)k[D]=arguments[D];for(var w=k[0],b=1;b<k.length;b++){var g=k[b];Object(B.a)(g)&&(g=g.prototype),Object(j.a)(w.prototype,g)}};z.a=L},function(U,z,F){"use strict";var j=F(0),B=function(L){if(typeof L!="object"||L===null)return L;var k;if(Object(j.a)(L)){k=[];for(var D=0,w=L.length;D<w;D++)typeof L[D]=="object"&&L[D]!=null?k[D]=B(L[D]):k[D]=L[D]}else{k={};for(var b in L)typeof L[b]=="object"&&L[b]!=null?k[b]=B(L[b]):k[b]=L[b]}return k};z.a=B},function(U,z,F){"use strict";function j(B,L,k){var D;return function(){var w=this,b=arguments,g=function(){D=null,k||B.apply(w,b)},y=k&&!D;clearTimeout(D),D=setTimeout(g,L),y&&B.apply(w,b)}}z.a=j},function(U,z,F){"use strict";var j=F(0),B=F(10),L=5;function k(w,b,g,y){g=g||0,y=y||L;for(var d in b)if(b.hasOwnProperty(d)){var S=b[d];S!==null&&Object(B.a)(S)?(Object(B.a)(w[d])||(w[d]={}),g<y?k(w[d],S,g+1,y):w[d]=b[d]):Object(j.a)(S)?(w[d]=[],w[d]=w[d].concat(S)):S!==void 0&&(w[d]=S)}}var D=function(w){for(var b=[],g=1;g<arguments.length;g++)b[g-1]=arguments[g];for(var y=0;y<b.length;y+=1)k(w,b[y]);return w};z.a=D},function(U,z,F){"use strict";var j=F(16),B=F(2),L=function(k,D,w,b){Object(B.a)(D)||(w=D,D=k,k=function(){});var g=Object.create?function(d,S){return Object.create(d,{constructor:{value:S}})}:function(d,S){function _(){}_.prototype=d;var E=new _;return E.constructor=S,E},y=g(D.prototype,k);return k.prototype=Object(j.a)(y,k.prototype),k.superclass=g(D.prototype,D),Object(j.a)(y,w),Object(j.a)(k,b),k};z.a=L},function(U,z,F){"use strict";var j=F(1),B=function(L,k){if(!Object(j.a)(L))return-1;var D=Array.prototype.indexOf;if(D)return D.call(L,k);for(var w=-1,b=0;b<L.length;b++)if(L[b]===k){w=b;break}return w};z.a=B},function(U,z,F){"use strict";var j=F(7),B=F(1),L=F(30),k=F(31),D=Object.prototype.hasOwnProperty;function w(b){if(Object(j.a)(b))return!0;if(Object(B.a)(b))return!b.length;var g=Object(L.a)(b);if(g==="Map"||g==="Set")return!b.size;if(Object(k.a)(b))return!Object.keys(b).length;for(var y in b)if(D.call(b,y))return!1;return!0}z.a=w},function(U,z,F){"use strict";var j=F(2),B=F(33);z.a=function(L,k,D){return Object(j.a)(D)?!!D(L,k):Object(B.a)(L,k)}},function(U,z,F){"use strict";var j=F(1),B=function(L,k){if(!Object(j.a)(L))return L;for(var D=[],w=0;w<L.length;w++){var b=L[w];D.push(k(b,w))}return D};z.a=B},function(U,z,F){"use strict";var j=F(7),B=F(12),L=function(k){return k};z.a=function(k,D){D===void 0&&(D=L);var w={};return Object(B.a)(k)&&!Object(j.a)(k)&&Object.keys(k).forEach(function(b){w[b]=D(k[b],b)}),w}},function(U,z,F){"use strict";var j=F(4);z.a=function(B,L,k){for(var D=0,w=Object(j.a)(L)?L.split("."):L;B&&D<w.length;)B=B[w[D++]];return B===void 0||D<w.length?k:B}},function(U,z,F){"use strict";var j=F(12),B=F(4),L=F(5);z.a=function(k,D,w){var b=k,g=Object(B.a)(D)?D.split("."):D;return g.forEach(function(y,d){d<g.length-1?(Object(j.a)(b[y])||(b[y]=Object(L.a)(g[d+1])?[]:{}),b=b[y]):b[y]=w}),k}},function(U,z,F){"use strict";var j=F(8),B=F(10),L=Object.prototype.hasOwnProperty;z.a=function(k,D){if(k===null||!Object(B.a)(k))return{};var w={};return Object(j.a)(D,function(b){L.call(k,b)&&(w[b]=k[b])}),w}},function(U,z,F){"use strict";var j=F(25);z.a=function(B,L){return Object(j.a)(B,function(k,D,w){return L.includes(w)||(k[w]=D),k},{})}},function(U,z,F){"use strict";z.a=function(j,B,L){var k,D,w,b,g=0;L||(L={});var y=function(){g=L.leading===!1?0:Date.now(),k=null,b=j.apply(D,w),k||(D=w=null)},d=function(){var S=Date.now();!g&&L.leading===!1&&(g=S);var _=B-(S-g);return D=this,w=arguments,_<=0||_>B?(k&&(clearTimeout(k),k=null),g=S,b=j.apply(D,w),k||(D=w=null)):!k&&L.trailing!==!1&&(k=setTimeout(y,_)),b};return d.cancel=function(){clearTimeout(k),g=0,k=D=w=null},d}},function(U,z,F){"use strict";var j=F(1);z.a=function(B){return Object(j.a)(B)?Array.prototype.slice.call(B):[]}},function(U,z,F){"use strict";var j={};z.a=function(B){return B=B||"g",j[B]?j[B]+=1:j[B]=1,B+j[B]}},function(U,z,F){"use strict";z.a=function(){}},function(U,z,F){"use strict";z.a=function(j){return j}},function(U,z,F){"use strict";z.a=L;var j=F(7),B=F(1);function L(k){return Object(j.a)(k)?0:Object(B.a)(k)?k.length:Object.keys(k).length}},function(U,z,F){"use strict";z.a=X;var j=function(K,p){return j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(at,ht){at.__proto__=ht}||function(at,ht){for(var wt in ht)Object.prototype.hasOwnProperty.call(ht,wt)&&(at[wt]=ht[wt])},j(K,p)};function B(K,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");j(K,p);function at(){this.constructor=K}K.prototype=p===null?Object.create(p):(at.prototype=p.prototype,new at)}var L=function(){return L=Object.assign||function(p){for(var at,ht=1,wt=arguments.length;ht<wt;ht++){at=arguments[ht];for(var Mt in at)Object.prototype.hasOwnProperty.call(at,Mt)&&(p[Mt]=at[Mt])}return p},L.apply(this,arguments)};function k(K,p){var at={};for(var ht in K)Object.prototype.hasOwnProperty.call(K,ht)&&p.indexOf(ht)<0&&(at[ht]=K[ht]);if(K!=null&&typeof Object.getOwnPropertySymbols=="function")for(var wt=0,ht=Object.getOwnPropertySymbols(K);wt<ht.length;wt++)p.indexOf(ht[wt])<0&&Object.prototype.propertyIsEnumerable.call(K,ht[wt])&&(at[ht[wt]]=K[ht[wt]]);return at}function D(K,p,at,ht){var wt=arguments.length,Mt=wt<3?p:ht===null?ht=Object.getOwnPropertyDescriptor(p,at):ht,Ut;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Mt=Reflect.decorate(K,p,at,ht);else for(var Vt=K.length-1;Vt>=0;Vt--)(Ut=K[Vt])&&(Mt=(wt<3?Ut(Mt):wt>3?Ut(p,at,Mt):Ut(p,at))||Mt);return wt>3&&Mt&&Object.defineProperty(p,at,Mt),Mt}function w(K,p){return function(at,ht){p(at,ht,K)}}function b(K,p,at,ht,wt,Mt){function Ut(jt){if(jt!==void 0&&typeof jt!="function")throw new TypeError("Function expected");return jt}for(var Vt=ht.kind,Me=Vt==="getter"?"get":Vt==="setter"?"set":"value",Wt=!p&&K?ht.static?K:K.prototype:null,ae=p||(Wt?Object.getOwnPropertyDescriptor(Wt,ht.name):{}),he,Se=!1,xe=at.length-1;xe>=0;xe--){var Bt={};for(var fe in ht)Bt[fe]=fe==="access"?{}:ht[fe];for(var fe in ht.access)Bt.access[fe]=ht.access[fe];Bt.addInitializer=function(jt){if(Se)throw new TypeError("Cannot add initializers after decoration has completed");Mt.push(Ut(jt||null))};var Le=(0,at[xe])(Vt==="accessor"?{get:ae.get,set:ae.set}:ae[Me],Bt);if(Vt==="accessor"){if(Le===void 0)continue;if(Le===null||typeof Le!="object")throw new TypeError("Object expected");(he=Ut(Le.get))&&(ae.get=he),(he=Ut(Le.set))&&(ae.set=he),(he=Ut(Le.init))&&wt.push(he)}else(he=Ut(Le))&&(Vt==="field"?wt.push(he):ae[Me]=he)}Wt&&Object.defineProperty(Wt,ht.name,ae),Se=!0}function g(K,p,at){for(var ht=arguments.length>2,wt=0;wt<p.length;wt++)at=ht?p[wt].call(K,at):p[wt].call(K);return ht?at:void 0}function y(K){return typeof K=="symbol"?K:"".concat(K)}function d(K,p,at){return typeof p=="symbol"&&(p=p.description?"[".concat(p.description,"]"):""),Object.defineProperty(K,"name",{configurable:!0,value:at?"".concat(at," ",p):p})}function S(K,p){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(K,p)}function _(K,p,at,ht){function wt(Mt){return Mt instanceof at?Mt:new at(function(Ut){Ut(Mt)})}return new(at||(at=Promise))(function(Mt,Ut){function Vt(ae){try{Wt(ht.next(ae))}catch(he){Ut(he)}}function Me(ae){try{Wt(ht.throw(ae))}catch(he){Ut(he)}}function Wt(ae){ae.done?Mt(ae.value):wt(ae.value).then(Vt,Me)}Wt((ht=ht.apply(K,p||[])).next())})}function E(K,p){var at={label:0,sent:function(){if(Mt[0]&1)throw Mt[1];return Mt[1]},trys:[],ops:[]},ht,wt,Mt,Ut;return Ut={next:Vt(0),throw:Vt(1),return:Vt(2)},typeof Symbol=="function"&&(Ut[Symbol.iterator]=function(){return this}),Ut;function Vt(Wt){return function(ae){return Me([Wt,ae])}}function Me(Wt){if(ht)throw new TypeError("Generator is already executing.");for(;Ut&&(Ut=0,Wt[0]&&(at=0)),at;)try{if(ht=1,wt&&(Mt=Wt[0]&2?wt.return:Wt[0]?wt.throw||((Mt=wt.return)&&Mt.call(wt),0):wt.next)&&!(Mt=Mt.call(wt,Wt[1])).done)return Mt;switch(wt=0,Mt&&(Wt=[Wt[0]&2,Mt.value]),Wt[0]){case 0:case 1:Mt=Wt;break;case 4:return at.label++,{value:Wt[1],done:!1};case 5:at.label++,wt=Wt[1],Wt=[0];continue;case 7:Wt=at.ops.pop(),at.trys.pop();continue;default:if(Mt=at.trys,!(Mt=Mt.length>0&&Mt[Mt.length-1])&&(Wt[0]===6||Wt[0]===2)){at=0;continue}if(Wt[0]===3&&(!Mt||Wt[1]>Mt[0]&&Wt[1]<Mt[3])){at.label=Wt[1];break}if(Wt[0]===6&&at.label<Mt[1]){at.label=Mt[1],Mt=Wt;break}if(Mt&&at.label<Mt[2]){at.label=Mt[2],at.ops.push(Wt);break}Mt[2]&&at.ops.pop(),at.trys.pop();continue}Wt=p.call(K,at)}catch(ae){Wt=[6,ae],wt=0}finally{ht=Mt=0}if(Wt[0]&5)throw Wt[1];return{value:Wt[0]?Wt[1]:void 0,done:!0}}}var I=Object.create?function(K,p,at,ht){ht===void 0&&(ht=at);var wt=Object.getOwnPropertyDescriptor(p,at);(!wt||("get"in wt?!p.__esModule:wt.writable||wt.configurable))&&(wt={enumerable:!0,get:function(){return p[at]}}),Object.defineProperty(K,ht,wt)}:function(K,p,at,ht){ht===void 0&&(ht=at),K[ht]=p[at]};function P(K,p){for(var at in K)at!=="default"&&!Object.prototype.hasOwnProperty.call(p,at)&&I(p,K,at)}function N(K){var p=typeof Symbol=="function"&&Symbol.iterator,at=p&&K[p],ht=0;if(at)return at.call(K);if(K&&typeof K.length=="number")return{next:function(){return K&&ht>=K.length&&(K=void 0),{value:K&&K[ht++],done:!K}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(K,p){var at=typeof Symbol=="function"&&K[Symbol.iterator];if(!at)return K;var ht=at.call(K),wt,Mt=[],Ut;try{for(;(p===void 0||p-- >0)&&!(wt=ht.next()).done;)Mt.push(wt.value)}catch(Vt){Ut={error:Vt}}finally{try{wt&&!wt.done&&(at=ht.return)&&at.call(ht)}finally{if(Ut)throw Ut.error}}return Mt}function nt(){for(var K=[],p=0;p<arguments.length;p++)K=K.concat(H(arguments[p]));return K}function X(){for(var K=0,p=0,at=arguments.length;p<at;p++)K+=arguments[p].length;for(var ht=Array(K),wt=0,p=0;p<at;p++)for(var Mt=arguments[p],Ut=0,Vt=Mt.length;Ut<Vt;Ut++,wt++)ht[wt]=Mt[Ut];return ht}function Y(K,p,at){if(at||arguments.length===2)for(var ht=0,wt=p.length,Mt;ht<wt;ht++)(Mt||!(ht in p))&&(Mt||(Mt=Array.prototype.slice.call(p,0,ht)),Mt[ht]=p[ht]);return K.concat(Mt||Array.prototype.slice.call(p))}function Z(K){return this instanceof Z?(this.v=K,this):new Z(K)}function J(K,p,at){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ht=at.apply(K,p||[]),wt,Mt=[];return wt={},Ut("next"),Ut("throw"),Ut("return"),wt[Symbol.asyncIterator]=function(){return this},wt;function Ut(Se){ht[Se]&&(wt[Se]=function(xe){return new Promise(function(Bt,fe){Mt.push([Se,xe,Bt,fe])>1||Vt(Se,xe)})})}function Vt(Se,xe){try{Me(ht[Se](xe))}catch(Bt){he(Mt[0][3],Bt)}}function Me(Se){Se.value instanceof Z?Promise.resolve(Se.value.v).then(Wt,ae):he(Mt[0][2],Se)}function Wt(Se){Vt("next",Se)}function ae(Se){Vt("throw",Se)}function he(Se,xe){Se(xe),Mt.shift(),Mt.length&&Vt(Mt[0][0],Mt[0][1])}}function it(K){var p,at;return p={},ht("next"),ht("throw",function(wt){throw wt}),ht("return"),p[Symbol.iterator]=function(){return this},p;function ht(wt,Mt){p[wt]=K[wt]?function(Ut){return(at=!at)?{value:Z(K[wt](Ut)),done:!1}:Mt?Mt(Ut):Ut}:Mt}}function tt(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p=K[Symbol.asyncIterator],at;return p?p.call(K):(K=typeof N=="function"?N(K):K[Symbol.iterator](),at={},ht("next"),ht("throw"),ht("return"),at[Symbol.asyncIterator]=function(){return this},at);function ht(Mt){at[Mt]=K[Mt]&&function(Ut){return new Promise(function(Vt,Me){Ut=K[Mt](Ut),wt(Vt,Me,Ut.done,Ut.value)})}}function wt(Mt,Ut,Vt,Me){Promise.resolve(Me).then(function(Wt){Mt({value:Wt,done:Vt})},Ut)}}function ut(K,p){return Object.defineProperty?Object.defineProperty(K,"raw",{value:p}):K.raw=p,K}var vt=Object.create?function(K,p){Object.defineProperty(K,"default",{enumerable:!0,value:p})}:function(K,p){K.default=p};function pt(K){if(K&&K.__esModule)return K;var p={};if(K!=null)for(var at in K)at!=="default"&&Object.prototype.hasOwnProperty.call(K,at)&&I(p,K,at);return vt(p,K),p}function Dt(K){return K&&K.__esModule?K:{default:K}}function Ot(K,p,at,ht){if(at==="a"&&!ht)throw new TypeError("Private accessor was defined without a getter");if(typeof p=="function"?K!==p||!ht:!p.has(K))throw new TypeError("Cannot read private member from an object whose class did not declare it");return at==="m"?ht:at==="a"?ht.call(K):ht?ht.value:p.get(K)}function te(K,p,at,ht,wt){if(ht==="m")throw new TypeError("Private method is not writable");if(ht==="a"&&!wt)throw new TypeError("Private accessor was defined without a setter");if(typeof p=="function"?K!==p||!wt:!p.has(K))throw new TypeError("Cannot write private member to an object whose class did not declare it");return ht==="a"?wt.call(K,at):wt?wt.value=at:p.set(K,at),at}function Gt(K,p){if(p===null||typeof p!="object"&&typeof p!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof K=="function"?p===K:K.has(p)}},function(U,z,F){"use strict";var j=F(4),B=F(9),L=F(34);z.a=function(k,D,w,b){b===void 0&&(b="...");var g=16,y=Object(L.a)(b,w),d=Object(j.a)(k)?k:Object(B.a)(k),S=D,_=[],E,I;if(Object(L.a)(k,w)<=D)return k;for(;E=d.substr(0,g),I=Object(L.a)(E,w),!(I+y>S&&I>S);)if(_.push(E),S-=I,d=d.substr(g),!d)return _.join("");for(;E=d.substr(0,1),I=Object(L.a)(E,w),!(I+y>S);)if(_.push(E),S-=I,d=d.substr(1),!d)return _.join("");return""+_.join("")+b}},function(U,z,F){"use strict";var j=function(){function B(){this.map={}}return B.prototype.has=function(L){return this.map[L]!==void 0},B.prototype.get=function(L,k){var D=this.map[L];return D===void 0?k:D},B.prototype.set=function(L,k){this.map[L]=k},B.prototype.clear=function(){this.map={}},B.prototype.delete=function(L){delete this.map[L]},B.prototype.size=function(){return Object.keys(this.map).length},B}();z.a=j},function(U,z){function F(w,b,g,y){y===void 0&&(y=[]);var d=this;d.w=w||0,d.h=b||0,d.y=g||0,d.x=0,d.c=y||[],d.cs=y.length,d.prelim=0,d.mod=0,d.shift=0,d.change=0,d.tl=null,d.tr=null,d.el=null,d.er=null,d.msel=0,d.mser=0}F.fromNode=function(w,b){if(!w)return null;var g=[];return w.children.forEach(function(y){g.push(F.fromNode(y,b))}),b?new F(w.height,w.width,w.x,g):new F(w.width,w.height,w.y,g)};function j(w,b,g){g?w.y+=b:w.x+=b,w.children.forEach(function(y){j(y,b,g)})}function B(w,b){var g=b?w.y:w.x;return w.children.forEach(function(y){g=Math.min(B(y,b),g)}),g}function L(w,b){var g=B(w,b);j(w,-g,b)}function k(w,b,g){g?b.y=w.x:b.x=w.x,w.c.forEach(function(y,d){k(y,b.children[d],g)})}function D(w,b,g){g===void 0&&(g=0),b?(w.x=g,g+=w.width):(w.y=g,g+=w.height),w.children.forEach(function(y){D(y,b,g)})}U.exports=function(w,b){b===void 0&&(b={});var g=b.isHorizontal;function y(tt){if(tt.cs===0){d(tt);return}y(tt.c[0]);for(var ut=J(P(tt.c[0].el),0,null),vt=1;vt<tt.cs;++vt){y(tt.c[vt]);var pt=P(tt.c[vt].er);S(tt,vt,ut),ut=J(pt,vt,ut)}nt(tt),d(tt)}function d(tt){tt.cs===0?(tt.el=tt,tt.er=tt,tt.msel=tt.mser=0):(tt.el=tt.c[0].el,tt.msel=tt.c[0].msel,tt.er=tt.c[tt.cs-1].er,tt.mser=tt.c[tt.cs-1].mser)}function S(tt,ut,vt){for(var pt=tt.c[ut-1],Dt=pt.mod,Ot=tt.c[ut],te=Ot.mod;pt!==null&&Ot!==null;){P(pt)>vt.low&&(vt=vt.nxt);var Gt=Dt+pt.prelim+pt.w-(te+Ot.prelim);Gt>0&&(te+=Gt,_(tt,ut,vt.index,Gt));var K=P(pt),p=P(Ot);K<=p&&(pt=I(pt),pt!==null&&(Dt+=pt.mod)),K>=p&&(Ot=E(Ot),Ot!==null&&(te+=Ot.mod))}!pt&&Ot?N(tt,ut,Ot,te):pt&&!Ot&&H(tt,ut,pt,Dt)}function _(tt,ut,vt,pt){tt.c[ut].mod+=pt,tt.c[ut].msel+=pt,tt.c[ut].mser+=pt,Y(tt,ut,vt,pt)}function E(tt){return tt.cs===0?tt.tl:tt.c[0]}function I(tt){return tt.cs===0?tt.tr:tt.c[tt.cs-1]}function P(tt){return tt.y+tt.h}function N(tt,ut,vt,pt){var Dt=tt.c[0].el;Dt.tl=vt;var Ot=pt-vt.mod-tt.c[0].msel;Dt.mod+=Ot,Dt.prelim-=Ot,tt.c[0].el=tt.c[ut].el,tt.c[0].msel=tt.c[ut].msel}function H(tt,ut,vt,pt){var Dt=tt.c[ut].er;Dt.tr=vt;var Ot=pt-vt.mod-tt.c[ut].mser;Dt.mod+=Ot,Dt.prelim-=Ot,tt.c[ut].er=tt.c[ut-1].er,tt.c[ut].mser=tt.c[ut-1].mser}function nt(tt){tt.prelim=(tt.c[0].prelim+tt.c[0].mod+tt.c[tt.cs-1].mod+tt.c[tt.cs-1].prelim+tt.c[tt.cs-1].w)/2-tt.w/2}function X(tt,ut){ut+=tt.mod,tt.x=tt.prelim+ut,Z(tt);for(var vt=0;vt<tt.cs;vt++)X(tt.c[vt],ut)}function Y(tt,ut,vt,pt){if(vt!==ut-1){var Dt=ut-vt;tt.c[vt+1].shift+=pt/Dt,tt.c[ut].shift-=pt/Dt,tt.c[ut].change-=pt-pt/Dt}}function Z(tt){for(var ut=0,vt=0,pt=0;pt<tt.cs;pt++)ut+=tt.c[pt].shift,vt+=ut+tt.c[pt].change,tt.c[pt].mod+=vt}function J(tt,ut,vt){for(;vt!==null&&tt>=vt.low;)vt=vt.nxt;return{low:tt,index:ut,nxt:vt}}D(w,g);var it=F.fromNode(w,g);return y(it),X(it,0),k(it,w,g),L(w,g),w}},function(U,z,F){function j(d,S){d.prototype=Object.create(S.prototype),d.prototype.constructor=d,B(d,S)}function B(d,S){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,I){return E.__proto__=I,E},B(d,S)}var L=F(11),k=F(121),D=F(17),w=F(6),b=function(d){j(S,d);function S(){return d.apply(this,arguments)||this}var _=S.prototype;return _.execute=function(){var I=this;return I.rootNode.width=0,D(I.rootNode,I.options,k)},S}(L),g={};function y(d,S){return S=w.assign({},g,S),new b(d,S).execute()}U.exports=y},function(U,z,F){var j=F(6);function B(D,w){D===void 0&&(D=0),w===void 0&&(w=[]);var b=this;b.x=b.y=0,b.leftChild=b.rightChild=null,b.height=0,b.children=w}var L={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function k(D,w,b){b?(w.x=D.x,w.y=D.y):(w.x=D.y,w.y=D.x),D.children.forEach(function(g,y){k(g,w.children[y],b)})}U.exports=function(D,w){w===void 0&&(w={}),w=j.assign({},L,w);var b=0;function g(E){if(!E)return null;E.width=0,E.depth&&E.depth>b&&(b=E.depth);var I=E.children,P=I.length,N=new B(E.height,[]);return I.forEach(function(H,nt){var X=g(H);N.children.push(X),nt===0&&(N.leftChild=X),nt===P-1&&(N.rightChild=X)}),N.originNode=E,N.isLeaf=E.isLeaf(),N}function y(E){if(E.isLeaf||E.children.length===0)E.drawingDepth=b;else{var I=E.children.map(function(N){return y(N)}),P=Math.min.apply(null,I);E.drawingDepth=P-1}return E.drawingDepth}var d;function S(E){E.x=E.drawingDepth*w.rankSep,E.isLeaf?(E.y=0,d&&(E.y=d.y+d.height+w.nodeSep,E.originNode.parent!==d.originNode.parent&&(E.y+=w.subTreeSep)),d=E):(E.children.forEach(function(I){S(I)}),E.y=(E.leftChild.y+E.rightChild.y)/2)}var _=g(D);return y(_),S(_),k(_,D,w.isHorizontal),D}},function(U,z,F){function j(_,E){_.prototype=Object.create(E.prototype),_.prototype.constructor=_,B(_,E)}function B(_,E){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(P,N){return P.__proto__=N,P},B(_,E)}var L=F(11),k=F(123),D=F(35),w=F(6),b=["LR","RL","H"],g=b[0],y=function(_){j(E,_);function E(){return _.apply(this,arguments)||this}var I=E.prototype;return I.execute=function(){var N=this,H=N.options,nt=N.rootNode;H.isHorizontal=!0;var X=H.indent,Y=X===void 0?20:X,Z=H.dropCap,J=Z===void 0?!0:Z,it=H.direction,tt=it===void 0?g:it,ut=H.align;if(tt&&b.indexOf(tt)===-1)throw new TypeError("Invalid direction: "+tt);if(tt===b[0])k(nt,Y,J,ut);else if(tt===b[1])k(nt,Y,J,ut),nt.right2left();else if(tt===b[2]){var vt=D(nt,H),pt=vt.left,Dt=vt.right;k(pt,Y,J,ut),pt.right2left(),k(Dt,Y,J,ut);var Ot=pt.getBoundingBox();Dt.translate(Ot.width,0),nt.x=Dt.x-nt.width/2}return nt},E}(L),d={};function S(_,E){return E=w.assign({},d,E),new y(_,E).execute()}U.exports=S},function(U,z,F){var j=F(6);function B(L,k,D,w,b){var g=typeof D=="function"?D(L):D*L.depth;if(!w)try{if(L.id===L.parent.children[0].id){L.x+=g,L.y=k?k.y:0;return}}catch(S){}if(L.x+=g,k){if(L.y=k.y+j.getHeight(k,L,b),k.parent&&L.parent.id!==k.parent.id){var y=k.parent,d=y.y+j.getHeight(y,L,b);L.y=d>L.y?d:L.y}}else L.y=0}U.exports=function(L,k,D,w){var b=null;L.eachNode(function(g){B(g,b,k,D,w),b=g})}},function(U,z,F){function j(d,S){d.prototype=Object.create(S.prototype),d.prototype.constructor=d,B(d,S)}function B(d,S){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,I){return E.__proto__=I,E},B(d,S)}var L=F(11),k=F(125),D=F(17),w=F(6),b=function(d){j(S,d);function S(){return d.apply(this,arguments)||this}var _=S.prototype;return _.execute=function(){var I=this;return D(I.rootNode,I.options,k)},S}(L),g={};function y(d,S){return S=w.assign({},g,S),new b(d,S).execute()}U.exports=y},function(U,z,F){var j=F(6);function B(D,w){var b=0;return D.children.length?D.children.forEach(function(g){b+=B(g,w)}):b=D.height,D._subTreeSep=w.getSubTreeSep(D.data),D.totalHeight=Math.max(D.height,b)+2*D._subTreeSep,D.totalHeight}function L(D){var w=D.children,b=w.length;if(b){w.forEach(function(E){L(E)});var g=w[0],y=w[b-1],d=y.y-g.y+y.height,S=0;if(w.forEach(function(E){S+=E.totalHeight}),d>D.height)D.y=g.y+d/2-D.height/2;else if(w.length!==1||D.height>S){var _=D.y+(D.height-d)/2-g.y;w.forEach(function(E){E.translate(0,_)})}else D.y=(g.y+g.height/2+y.y+y.height/2)/2-D.height/2}}var k={getSubTreeSep:function(){return 0}};U.exports=function(D,w){w===void 0&&(w={}),w=j.assign({},k,w),D.parent={x:0,width:0,height:0,y:0},D.BFTraverse(function(b){b.x=b.parent.x+b.parent.width}),D.parent=null,B(D,w),D.startY=0,D.y=D.totalHeight/2-D.height/2,D.eachNode(function(b){var g=b.children,y=g.length;if(y){var d=g[0];if(d.startY=b.startY+b._subTreeSep,y===1)d.y=b.y+b.height/2-d.height/2;else{d.y=d.startY+d.totalHeight/2-d.height/2;for(var S=1;S<y;S++){var _=g[S];_.startY=g[S-1].startY+g[S-1].totalHeight,_.y=_.startY+_.totalHeight/2-_.height/2}}}}),L(D)}}])})},31278:function(xr,U,z){"use strict";var F;F={value:!0};var j=z(58204);function B(d,S,_){var E=[0,0,0,0,0,0,0,0,0];return j.mat3.fromTranslation(E,_),j.mat3.multiply(d,E,S)}F=B;function L(d,S,_){var E=[0,0,0,0,0,0,0,0,0];return j.mat3.fromRotation(E,_),j.mat3.multiply(d,E,S)}F=L;function k(d,S,_){var E=[0,0,0,0,0,0,0,0,0];return j.mat3.fromScaling(E,_),j.mat3.multiply(d,E,S)}F=k;function D(d,S,_){return j.mat3.multiply(d,_,S)}function w(d,S){for(var _=d?[].concat(d):[1,0,0,0,1,0,0,0,1],E=0,I=S.length;E<I;E++){var P=S[E];switch(P[0]){case"t":B(_,_,[P[1],P[2]]);break;case"s":k(_,_,[P[1],P[2]]);break;case"r":L(_,_,P[1]);break;case"m":D(_,_,P[1]);break;default:break}}return _}U.vs=w;function b(d,S){return d[0]*S[1]-S[0]*d[1]}F=b;function g(d,S,_){var E=j.vec2.angle(d,S),I=b(d,S)>=0;return _?I?Math.PI*2-E:E:I?E:Math.PI*2-E}F=g;function y(d,S,_){return _?(d[0]=S[1],d[1]=-1*S[0]):(d[0]=-1*S[1],d[1]=S[0]),d}F=y},13810:function(xr,U,z){"use strict";z.r(U),z.d(U,{Cache:function(){return hs},assign:function(){return io},augment:function(){return Ti},clamp:function(){return nr},clearAnimationFrame:function(){return Ys},clone:function(){return Is},contains:function(){return L},debounce:function(){return fs},deepMix:function(){return ko},difference:function(){return b},each:function(){return H},endsWith:function(){return Un},every:function(){return rr},extend:function(){return Jo},filter:function(){return D},find:function(){return pt},findIndex:function(){return Ot},firstValue:function(){return Gt},fixedBase:function(){return Ur},flatten:function(){return p},flattenDeep:function(){return ht},forIn:function(){return re},get:function(){return Fo},getEllipsisText:function(){return ru},getRange:function(){return Vt},getType:function(){return ro},getWrapBehavior:function(){return Da},group:function(){return $n},groupBy:function(){return wn},groupToMap:function(){return ln},has:function(){return be},hasKey:function(){return pe},hasValue:function(){return cr},head:function(){return Xr},identity:function(){return Ao},includes:function(){return L},indexOf:function(){return Hi},isArguments:function(){return $o},isArray:function(){return I},isArrayLike:function(){return j},isBoolean:function(){return zo},isDate:function(){return Oa},isDecimal:function(){return pn},isElement:function(){return Xs},isEmpty:function(){return yo},isEqual:function(){return ts},isEqualWith:function(){return es},isError:function(){return Uo},isEven:function(){return bt},isFinite:function(){return Qo},isFunction:function(){return S},isInteger:function(){return T},isMatch:function(){return Z},isNegative:function(){return et},isNil:function(){return E},isNull:function(){return Eo},isNumber:function(){return gn},isNumberEqual:function(){return Xt},isObject:function(){return P},isObjectLike:function(){return it},isOdd:function(){return ee},isPlainObject:function(){return ut},isPositive:function(){return De},isPrototype:function(){return ki},isRegExp:function(){return Ts},isString:function(){return se},isType:function(){return d},isUndefined:function(){return Po},keys:function(){return X},last:function(){return Mn},lowerCase:function(){return An},lowerFirst:function(){return aa},map:function(){return ls},mapValues:function(){return Yo},max:function(){return wt},maxBy:function(){return fr},measureTextWidth:function(){return Vo},memoize:function(){return Os},min:function(){return Mt},minBy:function(){return jr},mix:function(){return io},mod:function(){return vn},noop:function(){return Co},number2color:function(){return ya},omit:function(){return Na},parseRadius:function(){return Ve},pick:function(){return uo},pull:function(){return Se},pullAt:function(){return fe},reduce:function(){return jt},remove:function(){return Te},requestAnimationFrame:function(){return xs},set:function(){return za},size:function(){return Ls},some:function(){return lr},sortBy:function(){return Pe},startsWith:function(){return Cn},substitute:function(){return Qa},throttle:function(){return Mo},toArray:function(){return rs},toDegree:function(){return Er},toInteger:function(){return Pr},toRadian:function(){return Pt},toString:function(){return rn},union:function(){return Lr},uniq:function(){return Lt},uniqueId:function(){return mo},upperCase:function(){return Xa},upperFirst:function(){return Ai},values:function(){return or},valuesOfKey:function(){return Vr},wrapBehavior:function(){return Hn}});var F=function(Ft){return Ft!==null&&typeof Ft!="function"&&isFinite(Ft.length)},j=F,B=function(Ft,me){return j(Ft)?Ft.indexOf(me)>-1:!1},L=B,k=function(Ft,me){if(!j(Ft))return Ft;for(var We=[],qe=0;qe<Ft.length;qe++){var Rr=Ft[qe];me(Rr,qe)&&We.push(Rr)}return We},D=k,w=function(Ft,me){return me===void 0&&(me=[]),D(Ft,function(We){return!L(me,We)})},b=w,g={}.toString,y=function(Ft,me){return g.call(Ft)==="[object "+me+"]"},d=y,S=function(Ft){return d(Ft,"Function")},_=function(Ft){return Ft==null},E=_,I=function(Ft){return Array.isArray?Array.isArray(Ft):d(Ft,"Array")},P=function(Ft){var me=typeof Ft;return Ft!==null&&me==="object"||me==="function"};function N(Ft,me){if(Ft){var We;if(I(Ft))for(var qe=0,Rr=Ft.length;qe<Rr&&(We=me(Ft[qe],qe),We!==!1);qe++);else if(P(Ft)){for(var En in Ft)if(Ft.hasOwnProperty(En)&&(We=me(Ft[En],En),We===!1))break}}}var H=N,nt=Object.keys?function(Ft){return Object.keys(Ft)}:function(Ft){var me=[];return H(Ft,function(We,qe){S(Ft)&&qe==="prototype"||me.push(qe)}),me},X=nt;function Y(Ft,me){var We=X(me),qe=We.length;if(E(Ft))return!qe;for(var Rr=0;Rr<qe;Rr+=1){var En=We[Rr];if(me[En]!==Ft[En]||!(En in Ft))return!1}return!0}var Z=Y,J=function(Ft){return typeof Ft=="object"&&Ft!==null},it=J,tt=function(Ft){if(!it(Ft)||!d(Ft,"Object"))return!1;if(Object.getPrototypeOf(Ft)===null)return!0;for(var me=Ft;Object.getPrototypeOf(me)!==null;)me=Object.getPrototypeOf(me);return Object.getPrototypeOf(Ft)===me},ut=tt;function vt(Ft,me){if(!I(Ft))return null;var We;if(S(me)&&(We=me),ut(me)&&(We=function(Rr){return Z(Rr,me)}),We){for(var qe=0;qe<Ft.length;qe+=1)if(We(Ft[qe]))return Ft[qe]}return null}var pt=vt;function Dt(Ft,me,We){We===void 0&&(We=0);for(var qe=We;qe<Ft.length;qe++)if(me(Ft[qe],qe))return qe;return-1}var Ot=Dt,te=function(Ft,me){for(var We=null,qe=0;qe<Ft.length;qe++){var Rr=Ft[qe],En=Rr[me];if(!E(En)){I(En)?We=En[0]:We=En;break}}return We},Gt=te,K=function(Ft){if(!I(Ft))return[];for(var me=[],We=0;We<Ft.length;We++)me=me.concat(Ft[We]);return me},p=K,at=function(Ft,me){if(me===void 0&&(me=[]),!I(Ft))me.push(Ft);else for(var We=0;We<Ft.length;We+=1)at(Ft[We],me);return me},ht=at,wt=function(Ft){if(I(Ft))return Ft.reduce(function(me,We){return Math.max(me,We)},Ft[0])},Mt=function(Ft){if(I(Ft))return Ft.reduce(function(me,We){return Math.min(me,We)},Ft[0])},Ut=function(Ft){var me=Ft.filter(function(Vn){return!isNaN(Vn)});if(!me.length)return{min:0,max:0};if(I(Ft[0])){for(var We=[],qe=0;qe<Ft.length;qe++)We=We.concat(Ft[qe]);me=We}var Rr=wt(me),En=Mt(me);return{min:En,max:Rr}},Vt=Ut,Me=Array.prototype,Wt=Me.splice,ae=Me.indexOf,he=function(Ft){for(var me=[],We=1;We<arguments.length;We++)me[We-1]=arguments[We];for(var qe=0;qe<me.length;qe++)for(var Rr=me[qe],En=-1;(En=ae.call(Ft,Rr))>-1;)Wt.call(Ft,En,1);return Ft},Se=he,xe=Array.prototype.splice,Bt=function(me,We){if(!j(me))return[];for(var qe=me?We.length:0,Rr=qe-1;qe--;){var En=void 0,Vn=We[qe];(qe===Rr||Vn!==En)&&(En=Vn,xe.call(me,Vn,1))}return me},fe=Bt,Le=function(Ft,me,We){if(!I(Ft)&&!ut(Ft))return Ft;var qe=We;return H(Ft,function(Rr,En){qe=me(qe,Rr,En)}),qe},jt=Le,oe=function(Ft,me){var We=[];if(!j(Ft))return We;for(var qe=-1,Rr=[],En=Ft.length;++qe<En;){var Vn=Ft[qe];me(Vn,qe,Ft)&&(We.push(Vn),Rr.push(qe))}return fe(Ft,Rr),We},Te=oe,se=function(Ft){return d(Ft,"String")};function Ie(Ft,me){var We;if(S(me))We=function(Rr,En){return me(Rr)-me(En)};else{var qe=[];se(me)?qe.push(me):I(me)&&(qe=me),We=function(Rr,En){for(var Vn=0;Vn<qe.length;Vn+=1){var ja=qe[Vn];if(Rr[ja]>En[ja])return 1;if(Rr[ja]<En[ja])return-1}return 0}}return Ft.sort(We),Ft}var Pe=Ie;function Lt(Ft,me){me===void 0&&(me=new Map);var We=[];if(Array.isArray(Ft))for(var qe=0,Rr=Ft.length;qe<Rr;qe++){var En=Ft[qe];me.has(En)||(We.push(En),me.set(En,!0))}return We}var Je=function(){for(var Ft=[],me=0;me<arguments.length;me++)Ft[me]=arguments[me];return Lt([].concat.apply([],Ft))},Lr=Je,Vr=function(Ft,me){for(var We=[],qe={},Rr=0;Rr<Ft.length;Rr++){var En=Ft[Rr],Vn=En[me];if(!E(Vn)){I(Vn)||(Vn=[Vn]);for(var ja=0;ja<Vn.length;ja++){var li=Vn[ja];qe[li]||(We.push(li),qe[li]=!0)}}}return We};function Xr(Ft){if(j(Ft))return Ft[0]}function Mn(Ft){if(j(Ft)){var me=Ft;return me[me.length-1]}}function Hr(Ft,me){return I(Ft)||se(Ft)?Ft[0]===me:!1}var Cn=Hr;function Zn(Ft,me){return I(Ft)||se(Ft)?Ft[Ft.length-1]===me:!1}var Un=Zn,mn=function(Ft,me){for(var We=0;We<Ft.length;We++)if(!me(Ft[We],We))return!1;return!0},rr=mn,sr=function(Ft,me){for(var We=0;We<Ft.length;We++)if(me(Ft[We],We))return!0;return!1},lr=sr,zr=Object.prototype.hasOwnProperty;function fn(Ft,me){if(!me||!I(Ft))return{};for(var We={},qe=S(me)?me:function(ja){return ja[me]},Rr,En=0;En<Ft.length;En++){var Vn=Ft[En];Rr=qe(Vn),zr.call(We,Rr)?We[Rr].push(Vn):We[Rr]=[Vn]}return We}var wn=fn;function ln(Ft,me){if(!me)return{0:Ft};if(!S(me)){var We=I(me)?me:me.replace(/\s+/g,"").split("*");me=function(qe){for(var Rr="_",En=0,Vn=We.length;En<Vn;En++)Rr+=qe[We[En]]&&qe[We[En]].toString();return Rr}}return wn(Ft,me)}var $n=function(Ft,me){if(!me)return[Ft];var We=ln(Ft,me),qe=[];for(var Rr in We)qe.push(We[Rr]);return qe};function Jn(Ft,me){return Ft["_wrap_"+me]}var Da=Jn;function bn(Ft,me){if(Ft["_wrap_"+me])return Ft["_wrap_"+me];var We=function(qe){Ft[me](qe)};return Ft["_wrap_"+me]=We,We}var Hn=bn,Wn={};function Bn(Ft){var me=Wn[Ft];if(!me){for(var We=Ft.toString(16),qe=We.length;qe<6;qe++)We="0"+We;me="#"+We,Wn[Ft]=me}return me}var ya=Bn;function q(Ft){var me=0,We=0,qe=0,Rr=0;return I(Ft)?Ft.length===1?me=We=qe=Rr=Ft[0]:Ft.length===2?(me=qe=Ft[0],We=Rr=Ft[1]):Ft.length===3?(me=Ft[0],We=Rr=Ft[1],qe=Ft[2]):(me=Ft[0],We=Ft[1],qe=Ft[2],Rr=Ft[3]):me=We=qe=Rr=Ft,{r1:me,r2:We,r3:qe,r4:Rr}}var Ve=q,Ee=function(Ft,me,We){return Ft<me?me:Ft>We?We:Ft},nr=Ee,ar=function(Ft,me){var We=me.toString(),qe=We.indexOf(".");if(qe===-1)return Math.round(Ft);var Rr=We.substr(qe+1).length;return Rr>20&&(Rr=20),parseFloat(Ft.toFixed(Rr))},Ur=ar,Nr=function(Ft){return d(Ft,"Number")},gn=Nr,hn=function(Ft){return gn(Ft)&&Ft%1!==0},pn=hn,gt=function(Ft){return gn(Ft)&&Ft%2===0},bt=gt,W=Number.isInteger?Number.isInteger:function(Ft){return gn(Ft)&&Ft%1===0},T=W,A=function(Ft){return gn(Ft)&&Ft<0},et=A,_t=1e-5;function Xt(Ft,me,We){return We===void 0&&(We=_t),Math.abs(Ft-me)<We}var Rt=function(Ft){return gn(Ft)&&Ft%2!==0},ee=Rt,Ge=function(Ft){return gn(Ft)&&Ft>0},De=Ge,fr=function(Ft,me){if(I(Ft)){for(var We,qe=-1/0,Rr=0;Rr<Ft.length;Rr++){var En=Ft[Rr],Vn=S(me)?me(En):En[me];Vn>qe&&(We=En,qe=Vn)}return We}},jr=function(Ft,me){if(I(Ft)){for(var We,qe=1/0,Rr=0;Rr<Ft.length;Rr++){var En=Ft[Rr],Vn=S(me)?me(En):En[me];Vn<qe&&(We=En,qe=Vn)}return We}},Sr=function(Ft,me){return(Ft%me+me)%me},vn=Sr,Xn=180/Math.PI,je=function(Ft){return Xn*Ft},Er=je,Pr=parseInt,Kr=Math.PI/180,$t=function(Ft){return Kr*Ft},Pt=$t,re=H,be=function(Ft,me){return Ft.hasOwnProperty(me)},pe=be,ke=Object.values?function(Ft){return Object.values(Ft)}:function(Ft){var me=[];return H(Ft,function(We,qe){S(Ft)&&qe==="prototype"||me.push(We)}),me},or=ke,cr=function(Ft,me){return L(or(Ft),me)},rn=function(Ft){return E(Ft)?"":Ft.toString()},Nn=function(Ft){return rn(Ft).toLowerCase()},An=Nn,la=function(Ft){var me=rn(Ft);return me.charAt(0).toLowerCase()+me.substring(1)},aa=la;function Ca(Ft,me){return!Ft||!me?Ft:Ft.replace(/\\?\{([^{}]+)\}/g,function(We,qe){return We.charAt(0)==="\\"?We.slice(1):me[qe]===void 0?"":me[qe]})}var Qa=Ca,Za=function(Ft){return rn(Ft).toUpperCase()},Xa=Za,Bo=function(Ft){var me=rn(Ft);return me.charAt(0).toUpperCase()+me.substring(1)},Ai=Bo,xi={}.toString,po=function(Ft){return xi.call(Ft).replace(/^\[object /,"").replace(/]$/,"")},ro=po,bo=function(Ft){return d(Ft,"Arguments")},$o=bo,Ia=function(Ft){return d(Ft,"Boolean")},zo=Ia,ms=function(Ft){return d(Ft,"Date")},Oa=ms,qo=function(Ft){return d(Ft,"Error")},Uo=qo;function Qo(Ft){return gn(Ft)&&isFinite(Ft)}var no=function(Ft){return Ft===null},Eo=no,Us=Object.prototype,Qs=function(Ft){var me=Ft&&Ft.constructor,We=typeof me=="function"&&me.prototype||Us;return Ft===We},ki=Qs,ao=function(Ft){return d(Ft,"RegExp")},Ts=ao,Ws=function(Ft){return Ft===void 0},Po=Ws,wo=function(Ft){return Ft instanceof Element||Ft instanceof HTMLDocument},Xs=wo;function xs(Ft){var me=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(We){return setTimeout(We,16)};return me(Ft)}function Ys(Ft){var me=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;me(Ft)}function qn(Ft,me){for(var We in me)me.hasOwnProperty(We)&&We!=="constructor"&&me[We]!==void 0&&(Ft[We]=me[We])}function io(Ft,me,We,qe){return me&&qn(Ft,me),We&&qn(Ft,We),qe&&qn(Ft,qe),Ft}var _o=function(){for(var Ft=[],me=0;me<arguments.length;me++)Ft[me]=arguments[me];for(var We=Ft[0],qe=1;qe<Ft.length;qe++){var Rr=Ft[qe];S(Rr)&&(Rr=Rr.prototype),io(We.prototype,Rr)}},Ti=_o,bs=function(Ft){if(typeof Ft!="object"||Ft===null)return Ft;var me;if(I(Ft)){me=[];for(var We=0,qe=Ft.length;We<qe;We++)typeof Ft[We]=="object"&&Ft[We]!=null?me[We]=bs(Ft[We]):me[We]=Ft[We]}else{me={};for(var Rr in Ft)typeof Ft[Rr]=="object"&&Ft[Rr]!=null?me[Rr]=bs(Ft[Rr]):me[Rr]=Ft[Rr]}return me},Is=bs;function Ri(Ft,me,We){var qe;return function(){var Rr=this,En=arguments,Vn=function(){qe=null,We||Ft.apply(Rr,En)},ja=We&&!qe;clearTimeout(qe),qe=setTimeout(Vn,me),ja&&Ft.apply(Rr,En)}}var fs=Ri,Os=function(Ft,me){if(!S(Ft))throw new TypeError("Expected a function");var We=function(){for(var qe=[],Rr=0;Rr<arguments.length;Rr++)qe[Rr]=arguments[Rr];var En=me?me.apply(this,qe):qe[0],Vn=We.cache;if(Vn.has(En))return Vn.get(En);var ja=Ft.apply(this,qe);return Vn.set(En,ja),ja};return We.cache=new Map,We},Wo=5;function xn(Ft,me,We,qe){We=We||0,qe=qe||Wo;for(var Rr in me)if(me.hasOwnProperty(Rr)){var En=me[Rr];En!==null&&ut(En)?(ut(Ft[Rr])||(Ft[Rr]={}),We<qe?xn(Ft[Rr],En,We+1,qe):Ft[Rr]=me[Rr]):I(En)?(Ft[Rr]=[],Ft[Rr]=Ft[Rr].concat(En)):En!==void 0&&(Ft[Rr]=En)}}var cs=function(Ft){for(var me=[],We=1;We<arguments.length;We++)me[We-1]=arguments[We];for(var qe=0;qe<me.length;qe+=1)xn(Ft,me[qe]);return Ft},ko=cs,oo=function(Ft,me,We,qe){S(me)||(We=me,me=Ft,Ft=function(){});var Rr=Object.create?function(Vn,ja){return Object.create(Vn,{constructor:{value:ja}})}:function(Vn,ja){function li(){}li.prototype=Vn;var fo=new li;return fo.constructor=ja,fo},En=Rr(me.prototype,Ft);return Ft.prototype=io(En,Ft.prototype),Ft.superclass=Rr(me.prototype,me),io(En,We),io(Ft,qe),Ft},Jo=oo,Es=function(Ft,me){if(!j(Ft))return-1;var We=Array.prototype.indexOf;if(We)return We.call(Ft,me);for(var qe=-1,Rr=0;Rr<Ft.length;Rr++)if(Ft[Rr]===me){qe=Rr;break}return qe},Hi=Es,So=Object.prototype.hasOwnProperty;function Ii(Ft){if(E(Ft))return!0;if(j(Ft))return!Ft.length;var me=ro(Ft);if(me==="Map"||me==="Set")return!Ft.size;if(ki(Ft))return!Object.keys(Ft).length;for(var We in Ft)if(So.call(Ft,We))return!1;return!0}var yo=Ii,so=function(Ft,me){if(Ft===me)return!0;if(!Ft||!me||se(Ft)||se(me))return!1;if(j(Ft)||j(me)){if(Ft.length!==me.length)return!1;for(var We=!0,qe=0;qe<Ft.length&&(We=so(Ft[qe],me[qe]),!!We);qe++);return We}if(it(Ft)||it(me)){var Rr=Object.keys(Ft),En=Object.keys(me);if(Rr.length!==En.length)return!1;for(var We=!0,qe=0;qe<Rr.length&&(We=so(Ft[Rr[qe]],me[Rr[qe]]),!!We);qe++);return We}return!1},ts=so,es=function(Ft,me,We){return S(We)?!!We(Ft,me):ts(Ft,me)},Ro=function(Ft,me){if(!j(Ft))return Ft;for(var We=[],qe=0;qe<Ft.length;qe++){var Rr=Ft[qe];We.push(me(Rr,qe))}return We},ls=Ro,Xo=function(Ft){return Ft},Yo=function(Ft,me){me===void 0&&(me=Xo);var We={};return P(Ft)&&!E(Ft)&&Object.keys(Ft).forEach(function(qe){We[qe]=me(Ft[qe],qe)}),We},Fo=function(Ft,me,We){for(var qe=0,Rr=se(me)?me.split("."):me;Ft&&qe<Rr.length;)Ft=Ft[Rr[qe++]];return Ft===void 0||qe<Rr.length?We:Ft},za=function(Ft,me,We){var qe=Ft,Rr=se(me)?me.split("."):me;return Rr.forEach(function(En,Vn){Vn<Rr.length-1?(P(qe[En])||(qe[En]=gn(Rr[Vn+1])?[]:{}),qe=qe[En]):qe[En]=We}),Ft},Fi=Object.prototype.hasOwnProperty,uo=function(Ft,me){if(Ft===null||!ut(Ft))return{};var We={};return H(me,function(qe){Fi.call(Ft,qe)&&(We[qe]=Ft[qe])}),We},Na=function(Ft,me){return jt(Ft,function(We,qe,Rr){return me.includes(Rr)||(We[Rr]=qe),We},{})},Mo=function(Ft,me,We){var qe,Rr,En,Vn,ja=0;We||(We={});var li=function(){ja=We.leading===!1?0:Date.now(),qe=null,Vn=Ft.apply(Rr,En),qe||(Rr=En=null)},fo=function(){var qi=Date.now();!ja&&We.leading===!1&&(ja=qi);var js=me-(qi-ja);return Rr=this,En=arguments,js<=0||js>me?(qe&&(clearTimeout(qe),qe=null),ja=qi,Vn=Ft.apply(Rr,En),qe||(Rr=En=null)):!qe&&We.trailing!==!1&&(qe=setTimeout(li,js)),Vn};return fo.cancel=function(){clearTimeout(qe),ja=0,qe=Rr=En=null},fo},rs=function(Ft){return j(Ft)?Array.prototype.slice.call(Ft):[]},Gi={},mo=function(Ft){return Ft=Ft||"g",Gi[Ft]?Gi[Ft]+=1:Gi[Ft]=1,Ft+Gi[Ft]},Co=function(){},Ao=function(Ft){return Ft};function Ls(Ft){return E(Ft)?0:j(Ft)?Ft.length:Object.keys(Ft).length}var Ds=z(97582),ns,Vo=Os(function(Ft,me){me===void 0&&(me={});var We=me.fontSize,qe=me.fontFamily,Rr=me.fontWeight,En=me.fontStyle,Vn=me.fontVariant;return ns||(ns=document.createElement("canvas").getContext("2d")),ns.font=[En,Vn,Rr,We+"px",qe].join(" "),ns.measureText(se(Ft)?Ft:"").width},function(Ft,me){return me===void 0&&(me={}),(0,Ds.__spreadArrays)([Ft],or(me)).join("")}),ru=function(Ft,me,We,qe){qe===void 0&&(qe="...");var Rr=16,En=Vo(qe,We),Vn=se(Ft)?Ft:rn(Ft),ja=me,li=[],fo,qi;if(Vo(Ft,We)<=me)return Ft;for(;fo=Vn.substr(0,Rr),qi=Vo(fo,We),!(qi+En>ja&&qi>ja);)if(li.push(fo),ja-=qi,Vn=Vn.substr(Rr),!Vn)return li.join("");for(;fo=Vn.substr(0,1),qi=Vo(fo,We),!(qi+En>ja);)if(li.push(fo),ja-=qi,Vn=Vn.substr(1),!Vn)return li.join("");return""+li.join("")+qe},Vs=function(){function Ft(){this.map={}}return Ft.prototype.has=function(me){return this.map[me]!==void 0},Ft.prototype.get=function(me,We){var qe=this.map[me];return qe===void 0?We:qe},Ft.prototype.set=function(me,We){this.map[me]=We},Ft.prototype.clear=function(){this.map={}},Ft.prototype.delete=function(me){delete this.map[me]},Ft.prototype.size=function(){return Object.keys(this.map).length},Ft}(),hs=Vs},17521:function(xr,U,z){"use strict";z.r(U),z.d(U,{AbstractMatrix:function(){return Pe},CHO:function(){return hn},CholeskyDecomposition:function(){return hn},EVD:function(){return Ee},EigenvalueDecomposition:function(){return Ee},LU:function(){return fn},LuDecomposition:function(){return fn},Matrix:function(){return Je},MatrixColumnSelectionView:function(){return Xr},MatrixColumnView:function(){return Vr},MatrixFlipColumnView:function(){return Mn},MatrixFlipRowView:function(){return Hr},MatrixRowSelectionView:function(){return Zn},MatrixRowView:function(){return Cn},MatrixSelectionView:function(){return Un},MatrixSubView:function(){return mn},MatrixTransposeView:function(){return rr},NIPALS:function(){return pn},Nipals:function(){return pn},QR:function(){return ln},QrDecomposition:function(){return ln},SVD:function(){return $n},SingularValueDecomposition:function(){return $n},WrapperMatrix1D:function(){return sr},WrapperMatrix2D:function(){return lr},correlation:function(){return Ve},covariance:function(){return q},default:function(){return Je},determinant:function(){return bn},inverse:function(){return Jn},linearDependencies:function(){return Bn},pseudoInverse:function(){return ya},solve:function(){return Da},wrap:function(){return zr}});var F=z(73408),j=z.n(F),B=z(25098),L=z.n(B),k=z(31996),D=z.n(k),w=z(26037),b=z.n(w),g=z(52677),y=z.n(g),d=z(12444),S=z.n(d),_=z(72004),E=z.n(_);const I=Object.prototype.toString;function P(gt){const bt=I.call(gt);return bt.endsWith("Array]")&&!bt.includes("Big")}function N(gt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!P(gt))throw new TypeError("input must be an array");if(gt.length===0)throw new TypeError("input must not be empty");var W=bt.fromIndex,T=W===void 0?0:W,A=bt.toIndex,et=A===void 0?gt.length:A;if(T<0||T>=gt.length||!Number.isInteger(T))throw new Error("fromIndex must be a positive integer smaller than length");if(et<=T||et>gt.length||!Number.isInteger(et))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var _t=gt[T],Xt=T+1;Xt<et;Xt++)gt[Xt]>_t&&(_t=gt[Xt]);return _t}function H(gt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!P(gt))throw new TypeError("input must be an array");if(gt.length===0)throw new TypeError("input must not be empty");var W=bt.fromIndex,T=W===void 0?0:W,A=bt.toIndex,et=A===void 0?gt.length:A;if(T<0||T>=gt.length||!Number.isInteger(T))throw new Error("fromIndex must be a positive integer smaller than length");if(et<=T||et>gt.length||!Number.isInteger(et))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var _t=gt[T],Xt=T+1;Xt<et;Xt++)gt[Xt]<_t&&(_t=gt[Xt]);return _t}function nt(gt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(P(gt)){if(gt.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var W;if(bt.output!==void 0){if(!P(bt.output))throw new TypeError("output option must be an array if specified");W=bt.output}else W=new Array(gt.length);var T=H(gt),A=N(gt);if(T===A)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var et=bt.min,_t=et===void 0?bt.autoMinMax?T:0:et,Xt=bt.max,Rt=Xt===void 0?bt.autoMinMax?A:1:Xt;if(_t>=Rt)throw new RangeError("min option must be smaller than max option");for(var ee=(Rt-_t)/(A-T),Ge=0;Ge<gt.length;Ge++)W[Ge]=(gt[Ge]-T)*ee+_t;return W}var X=" ".repeat(2),Y=" ".repeat(4);function Z(){return J(this)}function J(gt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=bt.maxRows,T=W===void 0?15:W,A=bt.maxColumns,et=A===void 0?10:A,_t=bt.maxNumSize,Xt=_t===void 0?8:_t;return"".concat(gt.constructor.name,` {
`).concat(X,`[
`).concat(Y).concat(it(gt,T,et,Xt),`
`).concat(X,`]
`).concat(X,"rows: ").concat(gt.rows,`
`).concat(X,"columns: ").concat(gt.columns,`
}`)}function it(gt,bt,W,T){for(var A=gt.rows,et=gt.columns,_t=Math.min(A,bt),Xt=Math.min(et,W),Rt=[],ee=0;ee<_t;ee++){for(var Ge=[],De=0;De<Xt;De++)Ge.push(tt(gt.get(ee,De),T));Rt.push("".concat(Ge.join(" ")))}return Xt!==et&&(Rt[Rt.length-1]+=" ... ".concat(et-W," more columns")),_t!==A&&Rt.push("... ".concat(A-bt," more rows")),Rt.join(`
`.concat(Y))}function tt(gt,bt){var W=String(gt);if(W.length<=bt)return W.padEnd(bt," ");var T=gt.toPrecision(bt-2);if(T.length<=bt)return T;var A=gt.toExponential(bt-2),et=A.indexOf("e"),_t=A.slice(et);return A.slice(0,bt-_t.length)+_t}function ut(gt,bt){gt.prototype.add=function(T){return typeof T=="number"?this.addS(T):this.addM(T)},gt.prototype.addS=function(T){for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)+T);return this},gt.prototype.addM=function(T){if(T=bt.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)+T.get(A,et));return this},gt.add=function(T,A){var et=new bt(T);return et.add(A)},gt.prototype.sub=function(T){return typeof T=="number"?this.subS(T):this.subM(T)},gt.prototype.subS=function(T){for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)-T);return this},gt.prototype.subM=function(T){if(T=bt.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)-T.get(A,et));return this},gt.sub=function(T,A){var et=new bt(T);return et.sub(A)},gt.prototype.subtract=gt.prototype.sub,gt.prototype.subtractS=gt.prototype.subS,gt.prototype.subtractM=gt.prototype.subM,gt.subtract=gt.sub,gt.prototype.mul=function(T){return typeof T=="number"?this.mulS(T):this.mulM(T)},gt.prototype.mulS=function(T){for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)*T);return this},gt.prototype.mulM=function(T){if(T=bt.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)*T.get(A,et));return this},gt.mul=function(T,A){var et=new bt(T);return et.mul(A)},gt.prototype.multiply=gt.prototype.mul,gt.prototype.multiplyS=gt.prototype.mulS,gt.prototype.multiplyM=gt.prototype.mulM,gt.multiply=gt.mul,gt.prototype.div=function(T){return typeof T=="number"?this.divS(T):this.divM(T)},gt.prototype.divS=function(T){for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)/T);return this},gt.prototype.divM=function(T){if(T=bt.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)/T.get(A,et));return this},gt.div=function(T,A){var et=new bt(T);return et.div(A)},gt.prototype.divide=gt.prototype.div,gt.prototype.divideS=gt.prototype.divS,gt.prototype.divideM=gt.prototype.divM,gt.divide=gt.div,gt.prototype.mod=function(T){return typeof T=="number"?this.modS(T):this.modM(T)},gt.prototype.modS=function(T){for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)%T);return this},gt.prototype.modM=function(T){if(T=bt.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)%T.get(A,et));return this},gt.mod=function(T,A){var et=new bt(T);return et.mod(A)},gt.prototype.modulus=gt.prototype.mod,gt.prototype.modulusS=gt.prototype.modS,gt.prototype.modulusM=gt.prototype.modM,gt.modulus=gt.mod,gt.prototype.and=function(T){return typeof T=="number"?this.andS(T):this.andM(T)},gt.prototype.andS=function(T){for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)&T);return this},gt.prototype.andM=function(T){if(T=bt.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)&T.get(A,et));return this},gt.and=function(T,A){var et=new bt(T);return et.and(A)},gt.prototype.or=function(T){return typeof T=="number"?this.orS(T):this.orM(T)},gt.prototype.orS=function(T){for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)|T);return this},gt.prototype.orM=function(T){if(T=bt.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)|T.get(A,et));return this},gt.or=function(T,A){var et=new bt(T);return et.or(A)},gt.prototype.xor=function(T){return typeof T=="number"?this.xorS(T):this.xorM(T)},gt.prototype.xorS=function(T){for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)^T);return this},gt.prototype.xorM=function(T){if(T=bt.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)^T.get(A,et));return this},gt.xor=function(T,A){var et=new bt(T);return et.xor(A)},gt.prototype.leftShift=function(T){return typeof T=="number"?this.leftShiftS(T):this.leftShiftM(T)},gt.prototype.leftShiftS=function(T){for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)<<T);return this},gt.prototype.leftShiftM=function(T){if(T=bt.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)<<T.get(A,et));return this},gt.leftShift=function(T,A){var et=new bt(T);return et.leftShift(A)},gt.prototype.signPropagatingRightShift=function(T){return typeof T=="number"?this.signPropagatingRightShiftS(T):this.signPropagatingRightShiftM(T)},gt.prototype.signPropagatingRightShiftS=function(T){for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)>>T);return this},gt.prototype.signPropagatingRightShiftM=function(T){if(T=bt.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)>>T.get(A,et));return this},gt.signPropagatingRightShift=function(T,A){var et=new bt(T);return et.signPropagatingRightShift(A)},gt.prototype.rightShift=function(T){return typeof T=="number"?this.rightShiftS(T):this.rightShiftM(T)},gt.prototype.rightShiftS=function(T){for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)>>>T);return this},gt.prototype.rightShiftM=function(T){if(T=bt.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,this.get(A,et)>>>T.get(A,et));return this},gt.rightShift=function(T,A){var et=new bt(T);return et.rightShift(A)},gt.prototype.zeroFillRightShift=gt.prototype.rightShift,gt.prototype.zeroFillRightShiftS=gt.prototype.rightShiftS,gt.prototype.zeroFillRightShiftM=gt.prototype.rightShiftM,gt.zeroFillRightShift=gt.rightShift,gt.prototype.not=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,~this.get(T,A));return this},gt.not=function(T){var A=new bt(T);return A.not()},gt.prototype.abs=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.abs(this.get(T,A)));return this},gt.abs=function(T){var A=new bt(T);return A.abs()},gt.prototype.acos=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.acos(this.get(T,A)));return this},gt.acos=function(T){var A=new bt(T);return A.acos()},gt.prototype.acosh=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.acosh(this.get(T,A)));return this},gt.acosh=function(T){var A=new bt(T);return A.acosh()},gt.prototype.asin=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.asin(this.get(T,A)));return this},gt.asin=function(T){var A=new bt(T);return A.asin()},gt.prototype.asinh=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.asinh(this.get(T,A)));return this},gt.asinh=function(T){var A=new bt(T);return A.asinh()},gt.prototype.atan=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.atan(this.get(T,A)));return this},gt.atan=function(T){var A=new bt(T);return A.atan()},gt.prototype.atanh=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.atanh(this.get(T,A)));return this},gt.atanh=function(T){var A=new bt(T);return A.atanh()},gt.prototype.cbrt=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.cbrt(this.get(T,A)));return this},gt.cbrt=function(T){var A=new bt(T);return A.cbrt()},gt.prototype.ceil=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.ceil(this.get(T,A)));return this},gt.ceil=function(T){var A=new bt(T);return A.ceil()},gt.prototype.clz32=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.clz32(this.get(T,A)));return this},gt.clz32=function(T){var A=new bt(T);return A.clz32()},gt.prototype.cos=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.cos(this.get(T,A)));return this},gt.cos=function(T){var A=new bt(T);return A.cos()},gt.prototype.cosh=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.cosh(this.get(T,A)));return this},gt.cosh=function(T){var A=new bt(T);return A.cosh()},gt.prototype.exp=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.exp(this.get(T,A)));return this},gt.exp=function(T){var A=new bt(T);return A.exp()},gt.prototype.expm1=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.expm1(this.get(T,A)));return this},gt.expm1=function(T){var A=new bt(T);return A.expm1()},gt.prototype.floor=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.floor(this.get(T,A)));return this},gt.floor=function(T){var A=new bt(T);return A.floor()},gt.prototype.fround=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.fround(this.get(T,A)));return this},gt.fround=function(T){var A=new bt(T);return A.fround()},gt.prototype.log=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.log(this.get(T,A)));return this},gt.log=function(T){var A=new bt(T);return A.log()},gt.prototype.log1p=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.log1p(this.get(T,A)));return this},gt.log1p=function(T){var A=new bt(T);return A.log1p()},gt.prototype.log10=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.log10(this.get(T,A)));return this},gt.log10=function(T){var A=new bt(T);return A.log10()},gt.prototype.log2=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.log2(this.get(T,A)));return this},gt.log2=function(T){var A=new bt(T);return A.log2()},gt.prototype.round=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.round(this.get(T,A)));return this},gt.round=function(T){var A=new bt(T);return A.round()},gt.prototype.sign=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.sign(this.get(T,A)));return this},gt.sign=function(T){var A=new bt(T);return A.sign()},gt.prototype.sin=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.sin(this.get(T,A)));return this},gt.sin=function(T){var A=new bt(T);return A.sin()},gt.prototype.sinh=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.sinh(this.get(T,A)));return this},gt.sinh=function(T){var A=new bt(T);return A.sinh()},gt.prototype.sqrt=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.sqrt(this.get(T,A)));return this},gt.sqrt=function(T){var A=new bt(T);return A.sqrt()},gt.prototype.tan=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.tan(this.get(T,A)));return this},gt.tan=function(T){var A=new bt(T);return A.tan()},gt.prototype.tanh=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.tanh(this.get(T,A)));return this},gt.tanh=function(T){var A=new bt(T);return A.tanh()},gt.prototype.trunc=function(){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,Math.trunc(this.get(T,A)));return this},gt.trunc=function(T){var A=new bt(T);return A.trunc()},gt.pow=function(T,A){var et=new bt(T);return et.pow(A)},gt.prototype.pow=function(T){return typeof T=="number"?this.powS(T):this.powM(T)},gt.prototype.powS=function(T){for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,Math.pow(this.get(A,et),T));return this},gt.prototype.powM=function(T){if(T=bt.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.set(A,et,Math.pow(this.get(A,et),T.get(A,et)));return this}}function vt(gt,bt,W){var T=W?gt.rows:gt.rows-1;if(bt<0||bt>T)throw new RangeError("Row index out of range")}function pt(gt,bt,W){var T=W?gt.columns:gt.columns-1;if(bt<0||bt>T)throw new RangeError("Column index out of range")}function Dt(gt,bt){if(bt.to1DArray&&(bt=bt.to1DArray()),bt.length!==gt.columns)throw new RangeError("vector size must be the same as the number of columns");return bt}function Ot(gt,bt){if(bt.to1DArray&&(bt=bt.to1DArray()),bt.length!==gt.rows)throw new RangeError("vector size must be the same as the number of rows");return bt}function te(gt,bt,W){return{row:Gt(gt,bt),column:K(gt,W)}}function Gt(gt,bt){if(y()(bt)!=="object")throw new TypeError("unexpected type for row indices");var W=bt.some(function(T){return T<0||T>=gt.rows});if(W)throw new RangeError("row indices are out of range");return Array.isArray(bt)||(bt=Array.from(bt)),bt}function K(gt,bt){if(y()(bt)!=="object")throw new TypeError("unexpected type for column indices");var W=bt.some(function(T){return T<0||T>=gt.columns});if(W)throw new RangeError("column indices are out of range");return Array.isArray(bt)||(bt=Array.from(bt)),bt}function p(gt,bt,W,T,A){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(ht("startRow",bt),ht("endRow",W),ht("startColumn",T),ht("endColumn",A),bt>W||T>A||bt<0||bt>=gt.rows||W<0||W>=gt.rows||T<0||T>=gt.columns||A<0||A>=gt.columns)throw new RangeError("Submatrix indices are out of range")}function at(gt){for(var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,W=[],T=0;T<gt;T++)W.push(bt);return W}function ht(gt,bt){if(typeof bt!="number")throw new TypeError("".concat(gt," must be a number"))}function wt(gt){for(var bt=at(gt.rows),W=0;W<gt.rows;++W)for(var T=0;T<gt.columns;++T)bt[W]+=gt.get(W,T);return bt}function Mt(gt){for(var bt=at(gt.columns),W=0;W<gt.rows;++W)for(var T=0;T<gt.columns;++T)bt[T]+=gt.get(W,T);return bt}function Ut(gt){for(var bt=0,W=0;W<gt.rows;W++)for(var T=0;T<gt.columns;T++)bt+=gt.get(W,T);return bt}function Vt(gt){for(var bt=at(gt.rows,1),W=0;W<gt.rows;++W)for(var T=0;T<gt.columns;++T)bt[W]*=gt.get(W,T);return bt}function Me(gt){for(var bt=at(gt.columns,1),W=0;W<gt.rows;++W)for(var T=0;T<gt.columns;++T)bt[T]*=gt.get(W,T);return bt}function Wt(gt){for(var bt=1,W=0;W<gt.rows;W++)for(var T=0;T<gt.columns;T++)bt*=gt.get(W,T);return bt}function ae(gt,bt,W){for(var T=gt.rows,A=gt.columns,et=[],_t=0;_t<T;_t++){for(var Xt=0,Rt=0,ee=0,Ge=0;Ge<A;Ge++)ee=gt.get(_t,Ge)-W[_t],Xt+=ee,Rt+=ee*ee;bt?et.push((Rt-Xt*Xt/A)/(A-1)):et.push((Rt-Xt*Xt/A)/A)}return et}function he(gt,bt,W){for(var T=gt.rows,A=gt.columns,et=[],_t=0;_t<A;_t++){for(var Xt=0,Rt=0,ee=0,Ge=0;Ge<T;Ge++)ee=gt.get(Ge,_t)-W[_t],Xt+=ee,Rt+=ee*ee;bt?et.push((Rt-Xt*Xt/T)/(T-1)):et.push((Rt-Xt*Xt/T)/T)}return et}function Se(gt,bt,W){for(var T=gt.rows,A=gt.columns,et=T*A,_t=0,Xt=0,Rt=0,ee=0;ee<T;ee++)for(var Ge=0;Ge<A;Ge++)Rt=gt.get(ee,Ge)-W,_t+=Rt,Xt+=Rt*Rt;return bt?(Xt-_t*_t/et)/(et-1):(Xt-_t*_t/et)/et}function xe(gt,bt){for(var W=0;W<gt.rows;W++)for(var T=0;T<gt.columns;T++)gt.set(W,T,gt.get(W,T)-bt[W])}function Bt(gt,bt){for(var W=0;W<gt.rows;W++)for(var T=0;T<gt.columns;T++)gt.set(W,T,gt.get(W,T)-bt[T])}function fe(gt,bt){for(var W=0;W<gt.rows;W++)for(var T=0;T<gt.columns;T++)gt.set(W,T,gt.get(W,T)-bt)}function Le(gt){for(var bt=[],W=0;W<gt.rows;W++){for(var T=0,A=0;A<gt.columns;A++)T+=Math.pow(gt.get(W,A),2)/(gt.columns-1);bt.push(Math.sqrt(T))}return bt}function jt(gt,bt){for(var W=0;W<gt.rows;W++)for(var T=0;T<gt.columns;T++)gt.set(W,T,gt.get(W,T)/bt[W])}function oe(gt){for(var bt=[],W=0;W<gt.columns;W++){for(var T=0,A=0;A<gt.rows;A++)T+=Math.pow(gt.get(A,W),2)/(gt.rows-1);bt.push(Math.sqrt(T))}return bt}function Te(gt,bt){for(var W=0;W<gt.rows;W++)for(var T=0;T<gt.columns;T++)gt.set(W,T,gt.get(W,T)/bt[T])}function se(gt){for(var bt=gt.size-1,W=0,T=0;T<gt.columns;T++)for(var A=0;A<gt.rows;A++)W+=Math.pow(gt.get(A,T),2)/bt;return Math.sqrt(W)}function Ie(gt,bt){for(var W=0;W<gt.rows;W++)for(var T=0;T<gt.columns;T++)gt.set(W,T,gt.get(W,T)/bt)}var Pe=function(){function gt(){S()(this,gt)}return E()(gt,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(W){if(typeof W!="function")throw new TypeError("callback must be a function");for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)W.call(this,T,A);return this}},{key:"to1DArray",value:function(){for(var W=[],T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)W.push(this.get(T,A));return W}},{key:"to2DArray",value:function(){for(var W=[],T=0;T<this.rows;T++){W.push([]);for(var A=0;A<this.columns;A++)W[T].push(this.get(T,A))}return W}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var W=0;W<this.rows;W++)for(var T=0;T<=W;T++)if(this.get(W,T)!==this.get(T,W))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var W=0,T=0,A=-1,et=!0,_t=!1;W<this.rows&&et;){for(T=0,_t=!1;T<this.columns&&_t===!1;)this.get(W,T)===0?T++:this.get(W,T)===1&&T>A?(_t=!0,A=T):(et=!1,_t=!0);W++}return et}},{key:"isReducedEchelonForm",value:function(){for(var W=0,T=0,A=-1,et=!0,_t=!1;W<this.rows&&et;){for(T=0,_t=!1;T<this.columns&&_t===!1;)this.get(W,T)===0?T++:this.get(W,T)===1&&T>A?(_t=!0,A=T):(et=!1,_t=!0);for(var Xt=T+1;Xt<this.rows;Xt++)this.get(W,Xt)!==0&&(et=!1);W++}return et}},{key:"echelonForm",value:function(){for(var W=this.clone(),T=0,A=0;T<W.rows&&A<W.columns;){for(var et=T,_t=T;_t<W.rows;_t++)W.get(_t,A)>W.get(et,A)&&(et=_t);if(W.get(et,A)===0)A++;else{W.swapRows(T,et);for(var Xt=W.get(T,A),Rt=A;Rt<W.columns;Rt++)W.set(T,Rt,W.get(T,Rt)/Xt);for(var ee=T+1;ee<W.rows;ee++){var Ge=W.get(ee,A)/W.get(T,A);W.set(ee,A,0);for(var De=A+1;De<W.columns;De++)W.set(ee,De,W.get(ee,De)-W.get(T,De)*Ge)}T++,A++}}return W}},{key:"reducedEchelonForm",value:function(){for(var W=this.echelonForm(),T=W.columns,A=W.rows,et=A-1;et>=0;)if(W.maxRow(et)===0)et--;else{for(var _t=0,Xt=!1;_t<A&&Xt===!1;)W.get(et,_t)===1?Xt=!0:_t++;for(var Rt=0;Rt<et;Rt++)for(var ee=W.get(Rt,_t),Ge=_t;Ge<T;Ge++){var De=W.get(Rt,Ge)-ee*W.get(et,Ge);W.set(Rt,Ge,De)}et--}return W}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(y()(W)!=="object")throw new TypeError("options must be an object");var T=W.rows,A=T===void 0?1:T,et=W.columns,_t=et===void 0?1:et;if(!Number.isInteger(A)||A<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(_t)||_t<=0)throw new TypeError("columns must be a positive integer");for(var Xt=new Je(this.rows*A,this.columns*_t),Rt=0;Rt<A;Rt++)for(var ee=0;ee<_t;ee++)Xt.setSubMatrix(this,this.rows*Rt,this.columns*ee);return Xt}},{key:"fill",value:function(W){for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,W);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(W){vt(this,W);for(var T=[],A=0;A<this.columns;A++)T.push(this.get(W,A));return T}},{key:"getRowVector",value:function(W){return Je.rowVector(this.getRow(W))}},{key:"setRow",value:function(W,T){vt(this,W),T=Dt(this,T);for(var A=0;A<this.columns;A++)this.set(W,A,T[A]);return this}},{key:"swapRows",value:function(W,T){vt(this,W),vt(this,T);for(var A=0;A<this.columns;A++){var et=this.get(W,A);this.set(W,A,this.get(T,A)),this.set(T,A,et)}return this}},{key:"getColumn",value:function(W){pt(this,W);for(var T=[],A=0;A<this.rows;A++)T.push(this.get(A,W));return T}},{key:"getColumnVector",value:function(W){return Je.columnVector(this.getColumn(W))}},{key:"setColumn",value:function(W,T){pt(this,W),T=Ot(this,T);for(var A=0;A<this.rows;A++)this.set(A,W,T[A]);return this}},{key:"swapColumns",value:function(W,T){pt(this,W),pt(this,T);for(var A=0;A<this.rows;A++){var et=this.get(A,W);this.set(A,W,this.get(A,T)),this.set(A,T,et)}return this}},{key:"addRowVector",value:function(W){W=Dt(this,W);for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,this.get(T,A)+W[A]);return this}},{key:"subRowVector",value:function(W){W=Dt(this,W);for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,this.get(T,A)-W[A]);return this}},{key:"mulRowVector",value:function(W){W=Dt(this,W);for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,this.get(T,A)*W[A]);return this}},{key:"divRowVector",value:function(W){W=Dt(this,W);for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,this.get(T,A)/W[A]);return this}},{key:"addColumnVector",value:function(W){W=Ot(this,W);for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,this.get(T,A)+W[T]);return this}},{key:"subColumnVector",value:function(W){W=Ot(this,W);for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,this.get(T,A)-W[T]);return this}},{key:"mulColumnVector",value:function(W){W=Ot(this,W);for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,this.get(T,A)*W[T]);return this}},{key:"divColumnVector",value:function(W){W=Ot(this,W);for(var T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.set(T,A,this.get(T,A)/W[T]);return this}},{key:"mulRow",value:function(W,T){vt(this,W);for(var A=0;A<this.columns;A++)this.set(W,A,this.get(W,A)*T);return this}},{key:"mulColumn",value:function(W,T){pt(this,W);for(var A=0;A<this.rows;A++)this.set(A,W,this.get(A,W)*T);return this}},{key:"max",value:function(){for(var W=this.get(0,0),T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.get(T,A)>W&&(W=this.get(T,A));return W}},{key:"maxIndex",value:function(){for(var W=this.get(0,0),T=[0,0],A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.get(A,et)>W&&(W=this.get(A,et),T[0]=A,T[1]=et);return T}},{key:"min",value:function(){for(var W=this.get(0,0),T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)this.get(T,A)<W&&(W=this.get(T,A));return W}},{key:"minIndex",value:function(){for(var W=this.get(0,0),T=[0,0],A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)this.get(A,et)<W&&(W=this.get(A,et),T[0]=A,T[1]=et);return T}},{key:"maxRow",value:function(W){vt(this,W);for(var T=this.get(W,0),A=1;A<this.columns;A++)this.get(W,A)>T&&(T=this.get(W,A));return T}},{key:"maxRowIndex",value:function(W){vt(this,W);for(var T=this.get(W,0),A=[W,0],et=1;et<this.columns;et++)this.get(W,et)>T&&(T=this.get(W,et),A[1]=et);return A}},{key:"minRow",value:function(W){vt(this,W);for(var T=this.get(W,0),A=1;A<this.columns;A++)this.get(W,A)<T&&(T=this.get(W,A));return T}},{key:"minRowIndex",value:function(W){vt(this,W);for(var T=this.get(W,0),A=[W,0],et=1;et<this.columns;et++)this.get(W,et)<T&&(T=this.get(W,et),A[1]=et);return A}},{key:"maxColumn",value:function(W){pt(this,W);for(var T=this.get(0,W),A=1;A<this.rows;A++)this.get(A,W)>T&&(T=this.get(A,W));return T}},{key:"maxColumnIndex",value:function(W){pt(this,W);for(var T=this.get(0,W),A=[0,W],et=1;et<this.rows;et++)this.get(et,W)>T&&(T=this.get(et,W),A[0]=et);return A}},{key:"minColumn",value:function(W){pt(this,W);for(var T=this.get(0,W),A=1;A<this.rows;A++)this.get(A,W)<T&&(T=this.get(A,W));return T}},{key:"minColumnIndex",value:function(W){pt(this,W);for(var T=this.get(0,W),A=[0,W],et=1;et<this.rows;et++)this.get(et,W)<T&&(T=this.get(et,W),A[0]=et);return A}},{key:"diag",value:function(){for(var W=Math.min(this.rows,this.columns),T=[],A=0;A<W;A++)T.push(this.get(A,A));return T}},{key:"norm",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",T=0;if(W==="max")return this.max();if(W==="frobenius"){for(var A=0;A<this.rows;A++)for(var et=0;et<this.columns;et++)T=T+this.get(A,et)*this.get(A,et);return Math.sqrt(T)}else throw new RangeError("unknown norm type: ".concat(W))}},{key:"cumulativeSum",value:function(){for(var W=0,T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)W+=this.get(T,A),this.set(T,A,W);return this}},{key:"dot",value:function(W){gt.isMatrix(W)&&(W=W.to1DArray());var T=this.to1DArray();if(T.length!==W.length)throw new RangeError("vectors do not have the same size");for(var A=0,et=0;et<T.length;et++)A+=T[et]*W[et];return A}},{key:"mmul",value:function(W){W=Je.checkMatrix(W);for(var T=this.rows,A=this.columns,et=W.columns,_t=new Je(T,et),Xt=new Float64Array(A),Rt=0;Rt<et;Rt++){for(var ee=0;ee<A;ee++)Xt[ee]=W.get(ee,Rt);for(var Ge=0;Ge<T;Ge++){for(var De=0,fr=0;fr<A;fr++)De+=this.get(Ge,fr)*Xt[fr];_t.set(Ge,Rt,De)}}return _t}},{key:"strassen2x2",value:function(W){W=Je.checkMatrix(W);var T=new Je(2,2),A=this.get(0,0),et=W.get(0,0),_t=this.get(0,1),Xt=W.get(0,1),Rt=this.get(1,0),ee=W.get(1,0),Ge=this.get(1,1),De=W.get(1,1),fr=(A+Ge)*(et+De),jr=(Rt+Ge)*et,Sr=A*(Xt-De),vn=Ge*(ee-et),Xn=(A+_t)*De,je=(Rt-A)*(et+Xt),Er=(_t-Ge)*(ee+De),Pr=fr+vn-Xn+Er,Kr=Sr+Xn,$t=jr+vn,Pt=fr-jr+Sr+je;return T.set(0,0,Pr),T.set(0,1,Kr),T.set(1,0,$t),T.set(1,1,Pt),T}},{key:"strassen3x3",value:function(W){W=Je.checkMatrix(W);var T=new Je(3,3),A=this.get(0,0),et=this.get(0,1),_t=this.get(0,2),Xt=this.get(1,0),Rt=this.get(1,1),ee=this.get(1,2),Ge=this.get(2,0),De=this.get(2,1),fr=this.get(2,2),jr=W.get(0,0),Sr=W.get(0,1),vn=W.get(0,2),Xn=W.get(1,0),je=W.get(1,1),Er=W.get(1,2),Pr=W.get(2,0),Kr=W.get(2,1),$t=W.get(2,2),Pt=(A+et+_t-Xt-Rt-De-fr)*je,re=(A-Xt)*(-Sr+je),be=Rt*(-jr+Sr+Xn-je-Er-Pr+$t),pe=(-A+Xt+Rt)*(jr-Sr+je),ke=(Xt+Rt)*(-jr+Sr),or=A*jr,cr=(-A+Ge+De)*(jr-vn+Er),rn=(-A+Ge)*(vn-Er),Nn=(Ge+De)*(-jr+vn),An=(A+et+_t-Rt-ee-Ge-De)*Er,la=De*(-jr+vn+Xn-je-Er-Pr+Kr),aa=(-_t+De+fr)*(je+Pr-Kr),Ca=(_t-fr)*(je-Kr),Qa=_t*Pr,Za=(De+fr)*(-Pr+Kr),Xa=(-_t+Rt+ee)*(Er+Pr-$t),Bo=(_t-ee)*(Er-$t),Ai=(Rt+ee)*(-Pr+$t),xi=et*Xn,po=ee*Kr,ro=Xt*vn,bo=Ge*Sr,$o=fr*$t,Ia=or+Qa+xi,zo=Pt+pe+ke+or+aa+Qa+Za,ms=or+cr+Nn+An+Qa+Xa+Ai,Oa=re+be+pe+or+Qa+Xa+Bo,qo=re+pe+ke+or+po,Uo=Qa+Xa+Bo+Ai+ro,Qo=or+cr+rn+la+aa+Ca+Qa,no=aa+Ca+Qa+Za+bo,Eo=or+cr+rn+Nn+$o;return T.set(0,0,Ia),T.set(0,1,zo),T.set(0,2,ms),T.set(1,0,Oa),T.set(1,1,qo),T.set(1,2,Uo),T.set(2,0,Qo),T.set(2,1,no),T.set(2,2,Eo),T}},{key:"mmulStrassen",value:function(W){W=Je.checkMatrix(W);var T=this.clone(),A=T.rows,et=T.columns,_t=W.rows,Xt=W.columns;et!==_t&&console.warn("Multiplying ".concat(A," x ").concat(et," and ").concat(_t," x ").concat(Xt," matrix: dimensions do not match."));function Rt(fr,jr,Sr){var vn=fr.rows,Xn=fr.columns;if(vn===jr&&Xn===Sr)return fr;var je=gt.zeros(jr,Sr);return je=je.setSubMatrix(fr,0,0),je}var ee=Math.max(A,_t),Ge=Math.max(et,Xt);T=Rt(T,ee,Ge),W=Rt(W,ee,Ge);function De(fr,jr,Sr,vn){if(Sr<=512||vn<=512)return fr.mmul(jr);Sr%2===1&&vn%2===1?(fr=Rt(fr,Sr+1,vn+1),jr=Rt(jr,Sr+1,vn+1)):Sr%2===1?(fr=Rt(fr,Sr+1,vn),jr=Rt(jr,Sr+1,vn)):vn%2===1&&(fr=Rt(fr,Sr,vn+1),jr=Rt(jr,Sr,vn+1));var Xn=parseInt(fr.rows/2,10),je=parseInt(fr.columns/2,10),Er=fr.subMatrix(0,Xn-1,0,je-1),Pr=jr.subMatrix(0,Xn-1,0,je-1),Kr=fr.subMatrix(0,Xn-1,je,fr.columns-1),$t=jr.subMatrix(0,Xn-1,je,jr.columns-1),Pt=fr.subMatrix(Xn,fr.rows-1,0,je-1),re=jr.subMatrix(Xn,jr.rows-1,0,je-1),be=fr.subMatrix(Xn,fr.rows-1,je,fr.columns-1),pe=jr.subMatrix(Xn,jr.rows-1,je,jr.columns-1),ke=De(gt.add(Er,be),gt.add(Pr,pe),Xn,je),or=De(gt.add(Pt,be),Pr,Xn,je),cr=De(Er,gt.sub($t,pe),Xn,je),rn=De(be,gt.sub(re,Pr),Xn,je),Nn=De(gt.add(Er,Kr),pe,Xn,je),An=De(gt.sub(Pt,Er),gt.add(Pr,$t),Xn,je),la=De(gt.sub(Kr,be),gt.add(re,pe),Xn,je),aa=gt.add(ke,rn);aa.sub(Nn),aa.add(la);var Ca=gt.add(cr,Nn),Qa=gt.add(or,rn),Za=gt.sub(ke,or);Za.add(cr),Za.add(An);var Xa=gt.zeros(2*aa.rows,2*aa.columns);return Xa=Xa.setSubMatrix(aa,0,0),Xa=Xa.setSubMatrix(Ca,aa.rows,0),Xa=Xa.setSubMatrix(Qa,0,aa.columns),Xa=Xa.setSubMatrix(Za,aa.rows,aa.columns),Xa.subMatrix(0,Sr-1,0,vn-1)}return De(T,W,ee,Ge)}},{key:"scaleRows",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(y()(W)!=="object")throw new TypeError("options must be an object");var T=W.min,A=T===void 0?0:T,et=W.max,_t=et===void 0?1:et;if(!Number.isFinite(A))throw new TypeError("min must be a number");if(!Number.isFinite(_t))throw new TypeError("max must be a number");if(A>=_t)throw new RangeError("min must be smaller than max");for(var Xt=new Je(this.rows,this.columns),Rt=0;Rt<this.rows;Rt++){var ee=this.getRow(Rt);nt(ee,{min:A,max:_t,output:ee}),Xt.setRow(Rt,ee)}return Xt}},{key:"scaleColumns",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(y()(W)!=="object")throw new TypeError("options must be an object");var T=W.min,A=T===void 0?0:T,et=W.max,_t=et===void 0?1:et;if(!Number.isFinite(A))throw new TypeError("min must be a number");if(!Number.isFinite(_t))throw new TypeError("max must be a number");if(A>=_t)throw new RangeError("min must be smaller than max");for(var Xt=new Je(this.rows,this.columns),Rt=0;Rt<this.columns;Rt++){var ee=this.getColumn(Rt);nt(ee,{min:A,max:_t,output:ee}),Xt.setColumn(Rt,ee)}return Xt}},{key:"flipRows",value:function(){for(var W=Math.ceil(this.columns/2),T=0;T<this.rows;T++)for(var A=0;A<W;A++){var et=this.get(T,A),_t=this.get(T,this.columns-1-A);this.set(T,A,_t),this.set(T,this.columns-1-A,et)}return this}},{key:"flipColumns",value:function(){for(var W=Math.ceil(this.rows/2),T=0;T<this.columns;T++)for(var A=0;A<W;A++){var et=this.get(A,T),_t=this.get(this.rows-1-A,T);this.set(A,T,_t),this.set(this.rows-1-A,T,et)}return this}},{key:"kroneckerProduct",value:function(W){W=Je.checkMatrix(W);for(var T=this.rows,A=this.columns,et=W.rows,_t=W.columns,Xt=new Je(T*et,A*_t),Rt=0;Rt<T;Rt++)for(var ee=0;ee<A;ee++)for(var Ge=0;Ge<et;Ge++)for(var De=0;De<_t;De++)Xt.set(et*Rt+Ge,_t*ee+De,this.get(Rt,ee)*W.get(Ge,De));return Xt}},{key:"transpose",value:function(){for(var W=new Je(this.columns,this.rows),T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)W.set(A,T,this.get(T,A));return W}},{key:"sortRows",value:function(){for(var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Lt,T=0;T<this.rows;T++)this.setRow(T,this.getRow(T).sort(W));return this}},{key:"sortColumns",value:function(){for(var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Lt,T=0;T<this.columns;T++)this.setColumn(T,this.getColumn(T).sort(W));return this}},{key:"subMatrix",value:function(W,T,A,et){p(this,W,T,A,et);for(var _t=new Je(T-W+1,et-A+1),Xt=W;Xt<=T;Xt++)for(var Rt=A;Rt<=et;Rt++)_t.set(Xt-W,Rt-A,this.get(Xt,Rt));return _t}},{key:"subMatrixRow",value:function(W,T,A){if(T===void 0&&(T=0),A===void 0&&(A=this.columns-1),T>A||T<0||T>=this.columns||A<0||A>=this.columns)throw new RangeError("Argument out of range");for(var et=new Je(W.length,A-T+1),_t=0;_t<W.length;_t++)for(var Xt=T;Xt<=A;Xt++){if(W[_t]<0||W[_t]>=this.rows)throw new RangeError("Row index out of range: ".concat(W[_t]));et.set(_t,Xt-T,this.get(W[_t],Xt))}return et}},{key:"subMatrixColumn",value:function(W,T,A){if(T===void 0&&(T=0),A===void 0&&(A=this.rows-1),T>A||T<0||T>=this.rows||A<0||A>=this.rows)throw new RangeError("Argument out of range");for(var et=new Je(A-T+1,W.length),_t=0;_t<W.length;_t++)for(var Xt=T;Xt<=A;Xt++){if(W[_t]<0||W[_t]>=this.columns)throw new RangeError("Column index out of range: ".concat(W[_t]));et.set(Xt-T,_t,this.get(Xt,W[_t]))}return et}},{key:"setSubMatrix",value:function(W,T,A){W=Je.checkMatrix(W);var et=T+W.rows-1,_t=A+W.columns-1;p(this,T,et,A,_t);for(var Xt=0;Xt<W.rows;Xt++)for(var Rt=0;Rt<W.columns;Rt++)this.set(T+Xt,A+Rt,W.get(Xt,Rt));return this}},{key:"selection",value:function(W,T){for(var A=te(this,W,T),et=new Je(W.length,T.length),_t=0;_t<A.row.length;_t++)for(var Xt=A.row[_t],Rt=0;Rt<A.column.length;Rt++){var ee=A.column[Rt];et.set(_t,Rt,this.get(Xt,ee))}return et}},{key:"trace",value:function(){for(var W=Math.min(this.rows,this.columns),T=0,A=0;A<W;A++)T+=this.get(A,A);return T}},{key:"clone",value:function(){for(var W=new Je(this.rows,this.columns),T=0;T<this.rows;T++)for(var A=0;A<this.columns;A++)W.set(T,A,this.get(T,A));return W}},{key:"sum",value:function(W){switch(W){case"row":return wt(this);case"column":return Mt(this);case void 0:return Ut(this);default:throw new Error("invalid option: ".concat(W))}}},{key:"product",value:function(W){switch(W){case"row":return Vt(this);case"column":return Me(this);case void 0:return Wt(this);default:throw new Error("invalid option: ".concat(W))}}},{key:"mean",value:function(W){var T=this.sum(W);switch(W){case"row":{for(var A=0;A<this.rows;A++)T[A]/=this.columns;return T}case"column":{for(var et=0;et<this.columns;et++)T[et]/=this.rows;return T}case void 0:return T/this.size;default:throw new Error("invalid option: ".concat(W))}}},{key:"variance",value:function(W){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(y()(W)==="object"&&(T=W,W=void 0),y()(T)!=="object")throw new TypeError("options must be an object");var A=T,et=A.unbiased,_t=et===void 0?!0:et,Xt=A.mean,Rt=Xt===void 0?this.mean(W):Xt;if(typeof _t!="boolean")throw new TypeError("unbiased must be a boolean");switch(W){case"row":{if(!Array.isArray(Rt))throw new TypeError("mean must be an array");return ae(this,_t,Rt)}case"column":{if(!Array.isArray(Rt))throw new TypeError("mean must be an array");return he(this,_t,Rt)}case void 0:{if(typeof Rt!="number")throw new TypeError("mean must be a number");return Se(this,_t,Rt)}default:throw new Error("invalid option: ".concat(W))}}},{key:"standardDeviation",value:function(W,T){y()(W)==="object"&&(T=W,W=void 0);var A=this.variance(W,T);if(W===void 0)return Math.sqrt(A);for(var et=0;et<A.length;et++)A[et]=Math.sqrt(A[et]);return A}},{key:"center",value:function(W){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(y()(W)==="object"&&(T=W,W=void 0),y()(T)!=="object")throw new TypeError("options must be an object");var A=T,et=A.center,_t=et===void 0?this.mean(W):et;switch(W){case"row":{if(!Array.isArray(_t))throw new TypeError("center must be an array");return xe(this,_t),this}case"column":{if(!Array.isArray(_t))throw new TypeError("center must be an array");return Bt(this,_t),this}case void 0:{if(typeof _t!="number")throw new TypeError("center must be a number");return fe(this,_t),this}default:throw new Error("invalid option: ".concat(W))}}},{key:"scale",value:function(W){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(y()(W)==="object"&&(T=W,W=void 0),y()(T)!=="object")throw new TypeError("options must be an object");var A=T.scale;switch(W){case"row":{if(A===void 0)A=Le(this);else if(!Array.isArray(A))throw new TypeError("scale must be an array");return jt(this,A),this}case"column":{if(A===void 0)A=oe(this);else if(!Array.isArray(A))throw new TypeError("scale must be an array");return Te(this,A),this}case void 0:{if(A===void 0)A=se(this);else if(typeof A!="number")throw new TypeError("scale must be a number");return Ie(this,A),this}default:throw new Error("invalid option: ".concat(W))}}},{key:"toString",value:function(W){return J(this,W)}}],[{key:"from1DArray",value:function(W,T,A){var et=W*T;if(et!==A.length)throw new RangeError("data length does not match given dimensions");for(var _t=new Je(W,T),Xt=0;Xt<W;Xt++)for(var Rt=0;Rt<T;Rt++)_t.set(Xt,Rt,A[Xt*T+Rt]);return _t}},{key:"rowVector",value:function(W){for(var T=new Je(1,W.length),A=0;A<W.length;A++)T.set(0,A,W[A]);return T}},{key:"columnVector",value:function(W){for(var T=new Je(W.length,1),A=0;A<W.length;A++)T.set(A,0,W[A]);return T}},{key:"zeros",value:function(W,T){return new Je(W,T)}},{key:"ones",value:function(W,T){return new Je(W,T).fill(1)}},{key:"rand",value:function(W,T){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(y()(A)!=="object")throw new TypeError("options must be an object");for(var et=A.random,_t=et===void 0?Math.random:et,Xt=new Je(W,T),Rt=0;Rt<W;Rt++)for(var ee=0;ee<T;ee++)Xt.set(Rt,ee,_t());return Xt}},{key:"randInt",value:function(W,T){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(y()(A)!=="object")throw new TypeError("options must be an object");var et=A.min,_t=et===void 0?0:et,Xt=A.max,Rt=Xt===void 0?1e3:Xt,ee=A.random,Ge=ee===void 0?Math.random:ee;if(!Number.isInteger(_t))throw new TypeError("min must be an integer");if(!Number.isInteger(Rt))throw new TypeError("max must be an integer");if(_t>=Rt)throw new RangeError("min must be smaller than max");for(var De=Rt-_t,fr=new Je(W,T),jr=0;jr<W;jr++)for(var Sr=0;Sr<T;Sr++){var vn=_t+Math.round(Ge()*De);fr.set(jr,Sr,vn)}return fr}},{key:"eye",value:function(W,T,A){T===void 0&&(T=W),A===void 0&&(A=1);for(var et=Math.min(W,T),_t=this.zeros(W,T),Xt=0;Xt<et;Xt++)_t.set(Xt,Xt,A);return _t}},{key:"diag",value:function(W,T,A){var et=W.length;T===void 0&&(T=et),A===void 0&&(A=T);for(var _t=Math.min(et,T,A),Xt=this.zeros(T,A),Rt=0;Rt<_t;Rt++)Xt.set(Rt,Rt,W[Rt]);return Xt}},{key:"min",value:function(W,T){W=this.checkMatrix(W),T=this.checkMatrix(T);for(var A=W.rows,et=W.columns,_t=new Je(A,et),Xt=0;Xt<A;Xt++)for(var Rt=0;Rt<et;Rt++)_t.set(Xt,Rt,Math.min(W.get(Xt,Rt),T.get(Xt,Rt)));return _t}},{key:"max",value:function(W,T){W=this.checkMatrix(W),T=this.checkMatrix(T);for(var A=W.rows,et=W.columns,_t=new this(A,et),Xt=0;Xt<A;Xt++)for(var Rt=0;Rt<et;Rt++)_t.set(Xt,Rt,Math.max(W.get(Xt,Rt),T.get(Xt,Rt)));return _t}},{key:"checkMatrix",value:function(W){return gt.isMatrix(W)?W:new Je(W)}},{key:"isMatrix",value:function(W){return W!=null&&W.klass==="Matrix"}}]),gt}();Pe.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Pe.prototype[Symbol.for("nodejs.util.inspect.custom")]=Z);function Lt(gt,bt){return gt-bt}Pe.random=Pe.rand,Pe.randomInt=Pe.randInt,Pe.diagonal=Pe.diag,Pe.prototype.diagonal=Pe.prototype.diag,Pe.identity=Pe.eye,Pe.prototype.negate=Pe.prototype.neg,Pe.prototype.tensorProduct=Pe.prototype.kroneckerProduct;var Je=function(gt){D()(W,gt);var bt=b()(W);function W(T,A){var et;if(S()(this,W),et=bt.call(this),W.isMatrix(T))return j()(et,T.clone());if(Number.isInteger(T)&&T>0)if(et.data=[],Number.isInteger(A)&&A>0)for(var _t=0;_t<T;_t++)et.data.push(new Float64Array(A));else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(T)){var Xt=T;if(T=Xt.length,A=Xt[0].length,typeof A!="number"||A===0)throw new TypeError("Data must be a 2D array with at least one element");et.data=[];for(var Rt=0;Rt<T;Rt++){if(Xt[Rt].length!==A)throw new RangeError("Inconsistent array dimensions");et.data.push(Float64Array.from(Xt[Rt]))}}else throw new TypeError("First argument must be a positive number or an array");return et.rows=T,et.columns=A,j()(et,L()(et))}return E()(W,[{key:"set",value:function(A,et,_t){return this.data[A][et]=_t,this}},{key:"get",value:function(A,et){return this.data[A][et]}},{key:"removeRow",value:function(A){if(vt(this,A),this.rows===1)throw new RangeError("A matrix cannot have less than one row");return this.data.splice(A,1),this.rows-=1,this}},{key:"addRow",value:function(A,et){return et===void 0&&(et=A,A=this.rows),vt(this,A,!0),et=Float64Array.from(Dt(this,et,!0)),this.data.splice(A,0,et),this.rows+=1,this}},{key:"removeColumn",value:function(A){if(pt(this,A),this.columns===1)throw new RangeError("A matrix cannot have less than one column");for(var et=0;et<this.rows;et++){for(var _t=new Float64Array(this.columns-1),Xt=0;Xt<A;Xt++)_t[Xt]=this.data[et][Xt];for(var Rt=A+1;Rt<this.columns;Rt++)_t[Rt-1]=this.data[et][Rt];this.data[et]=_t}return this.columns-=1,this}},{key:"addColumn",value:function(A,et){typeof et=="undefined"&&(et=A,A=this.columns),pt(this,A,!0),et=Ot(this,et);for(var _t=0;_t<this.rows;_t++){for(var Xt=new Float64Array(this.columns+1),Rt=0;Rt<A;Rt++)Xt[Rt]=this.data[_t][Rt];for(Xt[Rt++]=et[_t];Rt<this.columns+1;Rt++)Xt[Rt]=this.data[_t][Rt-1];this.data[_t]=Xt}return this.columns+=1,this}}]),W}(Pe);ut(Pe,Je);var Lr=function(gt){D()(W,gt);var bt=b()(W);function W(T,A,et){var _t;return S()(this,W),_t=bt.call(this),_t.matrix=T,_t.rows=A,_t.columns=et,_t}return E()(W)}(Pe),Vr=function(gt){D()(W,gt);var bt=b()(W);function W(T,A){var et;return S()(this,W),pt(T,A),et=bt.call(this,T,T.rows,1),et.column=A,et}return E()(W,[{key:"set",value:function(A,et,_t){return this.matrix.set(A,this.column,_t),this}},{key:"get",value:function(A){return this.matrix.get(A,this.column)}}]),W}(Lr),Xr=function(gt){D()(W,gt);var bt=b()(W);function W(T,A){var et;return S()(this,W),A=K(T,A),et=bt.call(this,T,T.rows,A.length),et.columnIndices=A,et}return E()(W,[{key:"set",value:function(A,et,_t){return this.matrix.set(A,this.columnIndices[et],_t),this}},{key:"get",value:function(A,et){return this.matrix.get(A,this.columnIndices[et])}}]),W}(Lr),Mn=function(gt){D()(W,gt);var bt=b()(W);function W(T){return S()(this,W),bt.call(this,T,T.rows,T.columns)}return E()(W,[{key:"set",value:function(A,et,_t){return this.matrix.set(A,this.columns-et-1,_t),this}},{key:"get",value:function(A,et){return this.matrix.get(A,this.columns-et-1)}}]),W}(Lr),Hr=function(gt){D()(W,gt);var bt=b()(W);function W(T){return S()(this,W),bt.call(this,T,T.rows,T.columns)}return E()(W,[{key:"set",value:function(A,et,_t){return this.matrix.set(this.rows-A-1,et,_t),this}},{key:"get",value:function(A,et){return this.matrix.get(this.rows-A-1,et)}}]),W}(Lr),Cn=function(gt){D()(W,gt);var bt=b()(W);function W(T,A){var et;return S()(this,W),vt(T,A),et=bt.call(this,T,1,T.columns),et.row=A,et}return E()(W,[{key:"set",value:function(A,et,_t){return this.matrix.set(this.row,et,_t),this}},{key:"get",value:function(A,et){return this.matrix.get(this.row,et)}}]),W}(Lr),Zn=function(gt){D()(W,gt);var bt=b()(W);function W(T,A){var et;return S()(this,W),A=Gt(T,A),et=bt.call(this,T,A.length,T.columns),et.rowIndices=A,et}return E()(W,[{key:"set",value:function(A,et,_t){return this.matrix.set(this.rowIndices[A],et,_t),this}},{key:"get",value:function(A,et){return this.matrix.get(this.rowIndices[A],et)}}]),W}(Lr),Un=function(gt){D()(W,gt);var bt=b()(W);function W(T,A,et){var _t;S()(this,W);var Xt=te(T,A,et);return _t=bt.call(this,T,Xt.row.length,Xt.column.length),_t.rowIndices=Xt.row,_t.columnIndices=Xt.column,_t}return E()(W,[{key:"set",value:function(A,et,_t){return this.matrix.set(this.rowIndices[A],this.columnIndices[et],_t),this}},{key:"get",value:function(A,et){return this.matrix.get(this.rowIndices[A],this.columnIndices[et])}}]),W}(Lr),mn=function(gt){D()(W,gt);var bt=b()(W);function W(T,A,et,_t,Xt){var Rt;return S()(this,W),p(T,A,et,_t,Xt),Rt=bt.call(this,T,et-A+1,Xt-_t+1),Rt.startRow=A,Rt.startColumn=_t,Rt}return E()(W,[{key:"set",value:function(A,et,_t){return this.matrix.set(this.startRow+A,this.startColumn+et,_t),this}},{key:"get",value:function(A,et){return this.matrix.get(this.startRow+A,this.startColumn+et)}}]),W}(Lr),rr=function(gt){D()(W,gt);var bt=b()(W);function W(T){return S()(this,W),bt.call(this,T,T.columns,T.rows)}return E()(W,[{key:"set",value:function(A,et,_t){return this.matrix.set(et,A,_t),this}},{key:"get",value:function(A,et){return this.matrix.get(et,A)}}]),W}(Lr),sr=function(gt){D()(W,gt);var bt=b()(W);function W(T){var A,et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};S()(this,W);var _t=et.rows,Xt=_t===void 0?1:_t;if(T.length%Xt!==0)throw new Error("the data length is not divisible by the number of rows");return A=bt.call(this),A.rows=Xt,A.columns=T.length/Xt,A.data=T,A}return E()(W,[{key:"set",value:function(A,et,_t){var Xt=this._calculateIndex(A,et);return this.data[Xt]=_t,this}},{key:"get",value:function(A,et){var _t=this._calculateIndex(A,et);return this.data[_t]}},{key:"_calculateIndex",value:function(A,et){return A*this.columns+et}}]),W}(Pe),lr=function(gt){D()(W,gt);var bt=b()(W);function W(T){var A;return S()(this,W),A=bt.call(this),A.data=T,A.rows=T.length,A.columns=T[0].length,A}return E()(W,[{key:"set",value:function(A,et,_t){return this.data[A][et]=_t,this}},{key:"get",value:function(A,et){return this.data[A][et]}}]),W}(Pe);function zr(gt,bt){if(Array.isArray(gt))return gt[0]&&Array.isArray(gt[0])?new lr(gt):new sr(gt,bt);throw new Error("the argument is not an array")}var fn=function(){function gt(bt){S()(this,gt),bt=lr.checkMatrix(bt);var W=bt.clone(),T=W.rows,A=W.columns,et=new Float64Array(T),_t=1,Xt,Rt,ee,Ge,De,fr,jr,Sr,vn;for(Xt=0;Xt<T;Xt++)et[Xt]=Xt;for(Sr=new Float64Array(T),Rt=0;Rt<A;Rt++){for(Xt=0;Xt<T;Xt++)Sr[Xt]=W.get(Xt,Rt);for(Xt=0;Xt<T;Xt++){for(vn=Math.min(Xt,Rt),De=0,ee=0;ee<vn;ee++)De+=W.get(Xt,ee)*Sr[ee];Sr[Xt]-=De,W.set(Xt,Rt,Sr[Xt])}for(Ge=Rt,Xt=Rt+1;Xt<T;Xt++)Math.abs(Sr[Xt])>Math.abs(Sr[Ge])&&(Ge=Xt);if(Ge!==Rt){for(ee=0;ee<A;ee++)fr=W.get(Ge,ee),W.set(Ge,ee,W.get(Rt,ee)),W.set(Rt,ee,fr);jr=et[Ge],et[Ge]=et[Rt],et[Rt]=jr,_t=-_t}if(Rt<T&&W.get(Rt,Rt)!==0)for(Xt=Rt+1;Xt<T;Xt++)W.set(Xt,Rt,W.get(Xt,Rt)/W.get(Rt,Rt))}this.LU=W,this.pivotVector=et,this.pivotSign=_t}return E()(gt,[{key:"isSingular",value:function(){for(var W=this.LU,T=W.columns,A=0;A<T;A++)if(W.get(A,A)===0)return!0;return!1}},{key:"solve",value:function(W){W=Je.checkMatrix(W);var T=this.LU,A=T.rows;if(A!==W.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var et=W.columns,_t=W.subMatrixRow(this.pivotVector,0,et-1),Xt=T.columns,Rt,ee,Ge;for(Ge=0;Ge<Xt;Ge++)for(Rt=Ge+1;Rt<Xt;Rt++)for(ee=0;ee<et;ee++)_t.set(Rt,ee,_t.get(Rt,ee)-_t.get(Ge,ee)*T.get(Rt,Ge));for(Ge=Xt-1;Ge>=0;Ge--){for(ee=0;ee<et;ee++)_t.set(Ge,ee,_t.get(Ge,ee)/T.get(Ge,Ge));for(Rt=0;Rt<Ge;Rt++)for(ee=0;ee<et;ee++)_t.set(Rt,ee,_t.get(Rt,ee)-_t.get(Ge,ee)*T.get(Rt,Ge))}return _t}},{key:"determinant",get:function(){var W=this.LU;if(!W.isSquare())throw new Error("Matrix must be square");for(var T=this.pivotSign,A=W.columns,et=0;et<A;et++)T*=W.get(et,et);return T}},{key:"lowerTriangularMatrix",get:function(){for(var W=this.LU,T=W.rows,A=W.columns,et=new Je(T,A),_t=0;_t<T;_t++)for(var Xt=0;Xt<A;Xt++)_t>Xt?et.set(_t,Xt,W.get(_t,Xt)):_t===Xt?et.set(_t,Xt,1):et.set(_t,Xt,0);return et}},{key:"upperTriangularMatrix",get:function(){for(var W=this.LU,T=W.rows,A=W.columns,et=new Je(T,A),_t=0;_t<T;_t++)for(var Xt=0;Xt<A;Xt++)_t<=Xt?et.set(_t,Xt,W.get(_t,Xt)):et.set(_t,Xt,0);return et}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),gt}();function wn(gt,bt){var W=0;return Math.abs(gt)>Math.abs(bt)?(W=bt/gt,Math.abs(gt)*Math.sqrt(1+W*W)):bt!==0?(W=gt/bt,Math.abs(bt)*Math.sqrt(1+W*W)):0}var ln=function(){function gt(bt){S()(this,gt),bt=lr.checkMatrix(bt);var W=bt.clone(),T=bt.rows,A=bt.columns,et=new Float64Array(A),_t,Xt,Rt,ee;for(Rt=0;Rt<A;Rt++){var Ge=0;for(_t=Rt;_t<T;_t++)Ge=wn(Ge,W.get(_t,Rt));if(Ge!==0){for(W.get(Rt,Rt)<0&&(Ge=-Ge),_t=Rt;_t<T;_t++)W.set(_t,Rt,W.get(_t,Rt)/Ge);for(W.set(Rt,Rt,W.get(Rt,Rt)+1),Xt=Rt+1;Xt<A;Xt++){for(ee=0,_t=Rt;_t<T;_t++)ee+=W.get(_t,Rt)*W.get(_t,Xt);for(ee=-ee/W.get(Rt,Rt),_t=Rt;_t<T;_t++)W.set(_t,Xt,W.get(_t,Xt)+ee*W.get(_t,Rt))}}et[Rt]=-Ge}this.QR=W,this.Rdiag=et}return E()(gt,[{key:"solve",value:function(W){W=Je.checkMatrix(W);var T=this.QR,A=T.rows;if(W.rows!==A)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var et=W.columns,_t=W.clone(),Xt=T.columns,Rt,ee,Ge,De;for(Ge=0;Ge<Xt;Ge++)for(ee=0;ee<et;ee++){for(De=0,Rt=Ge;Rt<A;Rt++)De+=T.get(Rt,Ge)*_t.get(Rt,ee);for(De=-De/T.get(Ge,Ge),Rt=Ge;Rt<A;Rt++)_t.set(Rt,ee,_t.get(Rt,ee)+De*T.get(Rt,Ge))}for(Ge=Xt-1;Ge>=0;Ge--){for(ee=0;ee<et;ee++)_t.set(Ge,ee,_t.get(Ge,ee)/this.Rdiag[Ge]);for(Rt=0;Rt<Ge;Rt++)for(ee=0;ee<et;ee++)_t.set(Rt,ee,_t.get(Rt,ee)-_t.get(Ge,ee)*T.get(Rt,Ge))}return _t.subMatrix(0,Xt-1,0,et-1)}},{key:"isFullRank",value:function(){for(var W=this.QR.columns,T=0;T<W;T++)if(this.Rdiag[T]===0)return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var W=this.QR,T=W.columns,A=new Je(T,T),et,_t;for(et=0;et<T;et++)for(_t=0;_t<T;_t++)et<_t?A.set(et,_t,W.get(et,_t)):et===_t?A.set(et,_t,this.Rdiag[et]):A.set(et,_t,0);return A}},{key:"orthogonalMatrix",get:function(){var W=this.QR,T=W.rows,A=W.columns,et=new Je(T,A),_t,Xt,Rt,ee;for(Rt=A-1;Rt>=0;Rt--){for(_t=0;_t<T;_t++)et.set(_t,Rt,0);for(et.set(Rt,Rt,1),Xt=Rt;Xt<A;Xt++)if(W.get(Rt,Rt)!==0){for(ee=0,_t=Rt;_t<T;_t++)ee+=W.get(_t,Rt)*et.get(_t,Xt);for(ee=-ee/W.get(Rt,Rt),_t=Rt;_t<T;_t++)et.set(_t,Xt,et.get(_t,Xt)+ee*W.get(_t,Rt))}}return et}}]),gt}(),$n=function(){function gt(bt){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};S()(this,gt),bt=lr.checkMatrix(bt);var T=bt.rows,A=bt.columns,et=W.computeLeftSingularVectors,_t=et===void 0?!0:et,Xt=W.computeRightSingularVectors,Rt=Xt===void 0?!0:Xt,ee=W.autoTranspose,Ge=ee===void 0?!1:ee,De=!!_t,fr=!!Rt,jr=!1,Sr;if(T<A)if(!Ge)Sr=bt.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{Sr=bt.transpose(),T=Sr.rows,A=Sr.columns,jr=!0;var vn=De;De=fr,fr=vn}else Sr=bt.clone();for(var Xn=Math.min(T,A),je=Math.min(T+1,A),Er=new Float64Array(je),Pr=new Je(T,Xn),Kr=new Je(A,A),$t=new Float64Array(A),Pt=new Float64Array(T),re=new Float64Array(je),be=0;be<je;be++)re[be]=be;for(var pe=Math.min(T-1,A),ke=Math.max(0,Math.min(A-2,T)),or=Math.max(pe,ke),cr=0;cr<or;cr++){if(cr<pe){Er[cr]=0;for(var rn=cr;rn<T;rn++)Er[cr]=wn(Er[cr],Sr.get(rn,cr));if(Er[cr]!==0){Sr.get(cr,cr)<0&&(Er[cr]=-Er[cr]);for(var Nn=cr;Nn<T;Nn++)Sr.set(Nn,cr,Sr.get(Nn,cr)/Er[cr]);Sr.set(cr,cr,Sr.get(cr,cr)+1)}Er[cr]=-Er[cr]}for(var An=cr+1;An<A;An++){if(cr<pe&&Er[cr]!==0){for(var la=0,aa=cr;aa<T;aa++)la+=Sr.get(aa,cr)*Sr.get(aa,An);la=-la/Sr.get(cr,cr);for(var Ca=cr;Ca<T;Ca++)Sr.set(Ca,An,Sr.get(Ca,An)+la*Sr.get(Ca,cr))}$t[An]=Sr.get(cr,An)}if(De&&cr<pe)for(var Qa=cr;Qa<T;Qa++)Pr.set(Qa,cr,Sr.get(Qa,cr));if(cr<ke){$t[cr]=0;for(var Za=cr+1;Za<A;Za++)$t[cr]=wn($t[cr],$t[Za]);if($t[cr]!==0){$t[cr+1]<0&&($t[cr]=0-$t[cr]);for(var Xa=cr+1;Xa<A;Xa++)$t[Xa]/=$t[cr];$t[cr+1]+=1}if($t[cr]=-$t[cr],cr+1<T&&$t[cr]!==0){for(var Bo=cr+1;Bo<T;Bo++)Pt[Bo]=0;for(var Ai=cr+1;Ai<T;Ai++)for(var xi=cr+1;xi<A;xi++)Pt[Ai]+=$t[xi]*Sr.get(Ai,xi);for(var po=cr+1;po<A;po++)for(var ro=-$t[po]/$t[cr+1],bo=cr+1;bo<T;bo++)Sr.set(bo,po,Sr.get(bo,po)+ro*Pt[bo])}if(fr)for(var $o=cr+1;$o<A;$o++)Kr.set($o,cr,$t[$o])}}var Ia=Math.min(A,T+1);if(pe<A&&(Er[pe]=Sr.get(pe,pe)),T<Ia&&(Er[Ia-1]=0),ke+1<Ia&&($t[ke]=Sr.get(ke,Ia-1)),$t[Ia-1]=0,De){for(var zo=pe;zo<Xn;zo++){for(var ms=0;ms<T;ms++)Pr.set(ms,zo,0);Pr.set(zo,zo,1)}for(var Oa=pe-1;Oa>=0;Oa--)if(Er[Oa]!==0){for(var qo=Oa+1;qo<Xn;qo++){for(var Uo=0,Qo=Oa;Qo<T;Qo++)Uo+=Pr.get(Qo,Oa)*Pr.get(Qo,qo);Uo=-Uo/Pr.get(Oa,Oa);for(var no=Oa;no<T;no++)Pr.set(no,qo,Pr.get(no,qo)+Uo*Pr.get(no,Oa))}for(var Eo=Oa;Eo<T;Eo++)Pr.set(Eo,Oa,-Pr.get(Eo,Oa));Pr.set(Oa,Oa,1+Pr.get(Oa,Oa));for(var Us=0;Us<Oa-1;Us++)Pr.set(Us,Oa,0)}else{for(var Qs=0;Qs<T;Qs++)Pr.set(Qs,Oa,0);Pr.set(Oa,Oa,1)}}if(fr)for(var ki=A-1;ki>=0;ki--){if(ki<ke&&$t[ki]!==0)for(var ao=ki+1;ao<A;ao++){for(var Ts=0,Ws=ki+1;Ws<A;Ws++)Ts+=Kr.get(Ws,ki)*Kr.get(Ws,ao);Ts=-Ts/Kr.get(ki+1,ki);for(var Po=ki+1;Po<A;Po++)Kr.set(Po,ao,Kr.get(Po,ao)+Ts*Kr.get(Po,ki))}for(var wo=0;wo<A;wo++)Kr.set(wo,ki,0);Kr.set(ki,ki,1)}for(var Xs=Ia-1,xs=0,Ys=Number.EPSILON;Ia>0;){var qn=void 0,io=void 0;for(qn=Ia-2;qn>=-1&&qn!==-1;qn--){var _o=Number.MIN_VALUE+Ys*Math.abs(Er[qn]+Math.abs(Er[qn+1]));if(Math.abs($t[qn])<=_o||Number.isNaN($t[qn])){$t[qn]=0;break}}if(qn===Ia-2)io=4;else{var Ti=void 0;for(Ti=Ia-1;Ti>=qn&&Ti!==qn;Ti--){var bs=(Ti!==Ia?Math.abs($t[Ti]):0)+(Ti!==qn+1?Math.abs($t[Ti-1]):0);if(Math.abs(Er[Ti])<=Ys*bs){Er[Ti]=0;break}}Ti===qn?io=3:Ti===Ia-1?io=1:(io=2,qn=Ti)}switch(qn++,io){case 1:{var Is=$t[Ia-2];$t[Ia-2]=0;for(var Ri=Ia-2;Ri>=qn;Ri--){var fs=wn(Er[Ri],Is),Os=Er[Ri]/fs,Wo=Is/fs;if(Er[Ri]=fs,Ri!==qn&&(Is=-Wo*$t[Ri-1],$t[Ri-1]=Os*$t[Ri-1]),fr)for(var xn=0;xn<A;xn++)fs=Os*Kr.get(xn,Ri)+Wo*Kr.get(xn,Ia-1),Kr.set(xn,Ia-1,-Wo*Kr.get(xn,Ri)+Os*Kr.get(xn,Ia-1)),Kr.set(xn,Ri,fs)}break}case 2:{var cs=$t[qn-1];$t[qn-1]=0;for(var ko=qn;ko<Ia;ko++){var oo=wn(Er[ko],cs),Jo=Er[ko]/oo,Es=cs/oo;if(Er[ko]=oo,cs=-Es*$t[ko],$t[ko]=Jo*$t[ko],De)for(var Hi=0;Hi<T;Hi++)oo=Jo*Pr.get(Hi,ko)+Es*Pr.get(Hi,qn-1),Pr.set(Hi,qn-1,-Es*Pr.get(Hi,ko)+Jo*Pr.get(Hi,qn-1)),Pr.set(Hi,ko,oo)}break}case 3:{var So=Math.max(Math.abs(Er[Ia-1]),Math.abs(Er[Ia-2]),Math.abs($t[Ia-2]),Math.abs(Er[qn]),Math.abs($t[qn])),Ii=Er[Ia-1]/So,yo=Er[Ia-2]/So,so=$t[Ia-2]/So,ts=Er[qn]/So,es=$t[qn]/So,Ro=((yo+Ii)*(yo-Ii)+so*so)/2,ls=Ii*so*(Ii*so),Xo=0;(Ro!==0||ls!==0)&&(Ro<0?Xo=0-Math.sqrt(Ro*Ro+ls):Xo=Math.sqrt(Ro*Ro+ls),Xo=ls/(Ro+Xo));for(var Yo=(ts+Ii)*(ts-Ii)+Xo,Fo=ts*es,za=qn;za<Ia-1;za++){var Fi=wn(Yo,Fo);Fi===0&&(Fi=Number.MIN_VALUE);var uo=Yo/Fi,Na=Fo/Fi;if(za!==qn&&($t[za-1]=Fi),Yo=uo*Er[za]+Na*$t[za],$t[za]=uo*$t[za]-Na*Er[za],Fo=Na*Er[za+1],Er[za+1]=uo*Er[za+1],fr)for(var Mo=0;Mo<A;Mo++)Fi=uo*Kr.get(Mo,za)+Na*Kr.get(Mo,za+1),Kr.set(Mo,za+1,-Na*Kr.get(Mo,za)+uo*Kr.get(Mo,za+1)),Kr.set(Mo,za,Fi);if(Fi=wn(Yo,Fo),Fi===0&&(Fi=Number.MIN_VALUE),uo=Yo/Fi,Na=Fo/Fi,Er[za]=Fi,Yo=uo*$t[za]+Na*Er[za+1],Er[za+1]=-Na*$t[za]+uo*Er[za+1],Fo=Na*$t[za+1],$t[za+1]=uo*$t[za+1],De&&za<T-1)for(var rs=0;rs<T;rs++)Fi=uo*Pr.get(rs,za)+Na*Pr.get(rs,za+1),Pr.set(rs,za+1,-Na*Pr.get(rs,za)+uo*Pr.get(rs,za+1)),Pr.set(rs,za,Fi)}$t[Ia-2]=Yo,xs=xs+1;break}case 4:{if(Er[qn]<=0&&(Er[qn]=Er[qn]<0?-Er[qn]:0,fr))for(var Gi=0;Gi<=Xs;Gi++)Kr.set(Gi,qn,-Kr.get(Gi,qn));for(;qn<Xs&&!(Er[qn]>=Er[qn+1]);){var mo=Er[qn];if(Er[qn]=Er[qn+1],Er[qn+1]=mo,fr&&qn<A-1)for(var Co=0;Co<A;Co++)mo=Kr.get(Co,qn+1),Kr.set(Co,qn+1,Kr.get(Co,qn)),Kr.set(Co,qn,mo);if(De&&qn<T-1)for(var Ao=0;Ao<T;Ao++)mo=Pr.get(Ao,qn+1),Pr.set(Ao,qn+1,Pr.get(Ao,qn)),Pr.set(Ao,qn,mo);qn++}xs=0,Ia--;break}}}if(jr){var Ls=Kr;Kr=Pr,Pr=Ls}this.m=T,this.n=A,this.s=Er,this.U=Pr,this.V=Kr}return E()(gt,[{key:"solve",value:function(W){for(var T=W,A=this.threshold,et=this.s.length,_t=Je.zeros(et,et),Xt=0;Xt<et;Xt++)Math.abs(this.s[Xt])<=A?_t.set(Xt,Xt,0):_t.set(Xt,Xt,1/this.s[Xt]);for(var Rt=this.U,ee=this.rightSingularVectors,Ge=ee.mmul(_t),De=ee.rows,fr=Rt.rows,jr=Je.zeros(De,fr),Sr=0;Sr<De;Sr++)for(var vn=0;vn<fr;vn++){for(var Xn=0,je=0;je<et;je++)Xn+=Ge.get(Sr,je)*Rt.get(vn,je);jr.set(Sr,vn,Xn)}return jr.mmul(T)}},{key:"solveForDiagonal",value:function(W){return this.solve(Je.diag(W))}},{key:"inverse",value:function(){for(var W=this.V,T=this.threshold,A=W.rows,et=W.columns,_t=new Je(A,this.s.length),Xt=0;Xt<A;Xt++)for(var Rt=0;Rt<et;Rt++)Math.abs(this.s[Rt])>T&&_t.set(Xt,Rt,W.get(Xt,Rt)/this.s[Rt]);for(var ee=this.U,Ge=ee.rows,De=ee.columns,fr=new Je(A,Ge),jr=0;jr<A;jr++)for(var Sr=0;Sr<Ge;Sr++){for(var vn=0,Xn=0;Xn<De;Xn++)vn+=_t.get(jr,Xn)*ee.get(Sr,Xn);fr.set(jr,Sr,vn)}return fr}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var W=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,T=0,A=this.s,et=0,_t=A.length;et<_t;et++)A[et]>W&&T++;return T}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Je.diag(this.s)}}]),gt}();function Jn(gt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return gt=lr.checkMatrix(gt),bt?new $n(gt).inverse():Da(gt,Je.eye(gt.rows))}function Da(gt,bt){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return gt=lr.checkMatrix(gt),bt=lr.checkMatrix(bt),W?new $n(gt).solve(bt):gt.isSquare()?new fn(gt).solve(bt):new ln(gt).solve(bt)}function bn(gt){if(gt=Je.checkMatrix(gt),gt.isSquare()){var bt,W,T,A;if(gt.columns===2)return bt=gt.get(0,0),W=gt.get(0,1),T=gt.get(1,0),A=gt.get(1,1),bt*A-W*T;if(gt.columns===3){var et,_t,Xt;return et=new Un(gt,[1,2],[1,2]),_t=new Un(gt,[1,2],[0,2]),Xt=new Un(gt,[1,2],[0,1]),bt=gt.get(0,0),W=gt.get(0,1),T=gt.get(0,2),bt*bn(et)-W*bn(_t)+T*bn(Xt)}else return new fn(gt).determinant}else throw Error("determinant can only be calculated for a square matrix")}function Hn(gt,bt){for(var W=[],T=0;T<gt;T++)T!==bt&&W.push(T);return W}function Wn(gt,bt,W){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-9,A=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-9;if(gt>A)return new Array(bt.rows+1).fill(0);for(var et=bt.addRow(W,[0]),_t=0;_t<et.rows;_t++)Math.abs(et.get(_t,0))<T&&et.set(_t,0,0);return et.to1DArray()}function Bn(gt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=bt.thresholdValue,T=W===void 0?1e-9:W,A=bt.thresholdError,et=A===void 0?1e-9:A;gt=Je.checkMatrix(gt);for(var _t=gt.rows,Xt=new Je(_t,_t),Rt=0;Rt<_t;Rt++){var ee=Je.columnVector(gt.getRow(Rt)),Ge=gt.subMatrixRow(Hn(_t,Rt)).transpose(),De=new $n(Ge),fr=De.solve(ee),jr=Je.sub(ee,Ge.mmul(fr)).abs().max();Xt.setRow(Rt,Wn(jr,fr,Rt,T,et))}return Xt}function ya(gt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.EPSILON;gt=Je.checkMatrix(gt);for(var W=new $n(gt,{autoTranspose:!0}),T=W.leftSingularVectors,A=W.rightSingularVectors,et=W.diagonal,_t=0;_t<et.length;_t++)Math.abs(et[_t])>bt?et[_t]=1/et[_t]:et[_t]=0;return A.mmul(Je.diag(et).mmul(T.transpose()))}function q(gt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gt,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};gt=new Je(gt);var T=!1;if(y()(bt)==="object"&&!Je.isMatrix(bt)&&!Array.isArray(bt)?(W=bt,bt=gt,T=!0):bt=new Je(bt),gt.rows!==bt.rows)throw new TypeError("Both matrices must have the same number of rows");var A=W,et=A.center,_t=et===void 0?!0:et;_t&&(gt=gt.center("column"),T||(bt=bt.center("column")));for(var Xt=gt.transpose().mmul(bt),Rt=0;Rt<Xt.rows;Rt++)for(var ee=0;ee<Xt.columns;ee++)Xt.set(Rt,ee,Xt.get(Rt,ee)*(1/(gt.rows-1)));return Xt}function Ve(gt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gt,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};gt=new Je(gt);var T=!1;if(y()(bt)==="object"&&!Je.isMatrix(bt)&&!Array.isArray(bt)?(W=bt,bt=gt,T=!0):bt=new Je(bt),gt.rows!==bt.rows)throw new TypeError("Both matrices must have the same number of rows");var A=W,et=A.center,_t=et===void 0?!0:et,Xt=A.scale,Rt=Xt===void 0?!0:Xt;_t&&(gt.center("column"),T||bt.center("column")),Rt&&(gt.scale("column"),T||bt.scale("column"));for(var ee=gt.standardDeviation("column",{unbiased:!0}),Ge=T?ee:bt.standardDeviation("column",{unbiased:!0}),De=gt.transpose().mmul(bt),fr=0;fr<De.rows;fr++)for(var jr=0;jr<De.columns;jr++)De.set(fr,jr,De.get(fr,jr)*(1/(ee[fr]*Ge[jr]))*(1/(gt.rows-1)));return De}var Ee=function(){function gt(bt){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};S()(this,gt);var T=W.assumeSymmetric,A=T===void 0?!1:T;if(bt=lr.checkMatrix(bt),!bt.isSquare())throw new Error("Matrix is not a square matrix");var et=bt.columns,_t=new Je(et,et),Xt=new Float64Array(et),Rt=new Float64Array(et),ee=bt,Ge,De,fr=!1;if(A?fr=!0:fr=bt.isSymmetric(),fr){for(Ge=0;Ge<et;Ge++)for(De=0;De<et;De++)_t.set(Ge,De,ee.get(Ge,De));nr(et,Rt,Xt,_t),ar(et,Rt,Xt,_t)}else{var jr=new Je(et,et),Sr=new Float64Array(et);for(De=0;De<et;De++)for(Ge=0;Ge<et;Ge++)jr.set(Ge,De,ee.get(Ge,De));Ur(et,jr,Sr,_t),Nr(et,Rt,Xt,_t,jr)}this.n=et,this.e=Rt,this.d=Xt,this.V=_t}return E()(gt,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var W=this.n,T=this.e,A=this.d,et=new Je(W,W),_t,Xt;for(_t=0;_t<W;_t++){for(Xt=0;Xt<W;Xt++)et.set(_t,Xt,0);et.set(_t,_t,A[_t]),T[_t]>0?et.set(_t,_t+1,T[_t]):T[_t]<0&&et.set(_t,_t-1,T[_t])}return et}}]),gt}();function nr(gt,bt,W,T){var A,et,_t,Xt,Rt,ee,Ge,De;for(Rt=0;Rt<gt;Rt++)W[Rt]=T.get(gt-1,Rt);for(Xt=gt-1;Xt>0;Xt--){for(De=0,_t=0,ee=0;ee<Xt;ee++)De=De+Math.abs(W[ee]);if(De===0)for(bt[Xt]=W[Xt-1],Rt=0;Rt<Xt;Rt++)W[Rt]=T.get(Xt-1,Rt),T.set(Xt,Rt,0),T.set(Rt,Xt,0);else{for(ee=0;ee<Xt;ee++)W[ee]/=De,_t+=W[ee]*W[ee];for(A=W[Xt-1],et=Math.sqrt(_t),A>0&&(et=-et),bt[Xt]=De*et,_t=_t-A*et,W[Xt-1]=A-et,Rt=0;Rt<Xt;Rt++)bt[Rt]=0;for(Rt=0;Rt<Xt;Rt++){for(A=W[Rt],T.set(Rt,Xt,A),et=bt[Rt]+T.get(Rt,Rt)*A,ee=Rt+1;ee<=Xt-1;ee++)et+=T.get(ee,Rt)*W[ee],bt[ee]+=T.get(ee,Rt)*A;bt[Rt]=et}for(A=0,Rt=0;Rt<Xt;Rt++)bt[Rt]/=_t,A+=bt[Rt]*W[Rt];for(Ge=A/(_t+_t),Rt=0;Rt<Xt;Rt++)bt[Rt]-=Ge*W[Rt];for(Rt=0;Rt<Xt;Rt++){for(A=W[Rt],et=bt[Rt],ee=Rt;ee<=Xt-1;ee++)T.set(ee,Rt,T.get(ee,Rt)-(A*bt[ee]+et*W[ee]));W[Rt]=T.get(Xt-1,Rt),T.set(Xt,Rt,0)}}W[Xt]=_t}for(Xt=0;Xt<gt-1;Xt++){if(T.set(gt-1,Xt,T.get(Xt,Xt)),T.set(Xt,Xt,1),_t=W[Xt+1],_t!==0){for(ee=0;ee<=Xt;ee++)W[ee]=T.get(ee,Xt+1)/_t;for(Rt=0;Rt<=Xt;Rt++){for(et=0,ee=0;ee<=Xt;ee++)et+=T.get(ee,Xt+1)*T.get(ee,Rt);for(ee=0;ee<=Xt;ee++)T.set(ee,Rt,T.get(ee,Rt)-et*W[ee])}}for(ee=0;ee<=Xt;ee++)T.set(ee,Xt+1,0)}for(Rt=0;Rt<gt;Rt++)W[Rt]=T.get(gt-1,Rt),T.set(gt-1,Rt,0);T.set(gt-1,gt-1,1),bt[0]=0}function ar(gt,bt,W,T){var A,et,_t,Xt,Rt,ee,Ge,De,fr,jr,Sr,vn,Xn,je,Er,Pr,Kr;for(_t=1;_t<gt;_t++)bt[_t-1]=bt[_t];bt[gt-1]=0;var $t=0,Pt=0,re=Number.EPSILON;for(ee=0;ee<gt;ee++){for(Pt=Math.max(Pt,Math.abs(W[ee])+Math.abs(bt[ee])),Ge=ee;Ge<gt&&!(Math.abs(bt[Ge])<=re*Pt);)Ge++;if(Ge>ee){Kr=0;do{for(Kr=Kr+1,A=W[ee],De=(W[ee+1]-A)/(2*bt[ee]),fr=wn(De,1),De<0&&(fr=-fr),W[ee]=bt[ee]/(De+fr),W[ee+1]=bt[ee]*(De+fr),jr=W[ee+1],et=A-W[ee],_t=ee+2;_t<gt;_t++)W[_t]-=et;for($t=$t+et,De=W[Ge],Sr=1,vn=Sr,Xn=Sr,je=bt[ee+1],Er=0,Pr=0,_t=Ge-1;_t>=ee;_t--)for(Xn=vn,vn=Sr,Pr=Er,A=Sr*bt[_t],et=Sr*De,fr=wn(De,bt[_t]),bt[_t+1]=Er*fr,Er=bt[_t]/fr,Sr=De/fr,De=Sr*W[_t]-Er*A,W[_t+1]=et+Er*(Sr*A+Er*W[_t]),Rt=0;Rt<gt;Rt++)et=T.get(Rt,_t+1),T.set(Rt,_t+1,Er*T.get(Rt,_t)+Sr*et),T.set(Rt,_t,Sr*T.get(Rt,_t)-Er*et);De=-Er*Pr*Xn*je*bt[ee]/jr,bt[ee]=Er*De,W[ee]=Sr*De}while(Math.abs(bt[ee])>re*Pt)}W[ee]=W[ee]+$t,bt[ee]=0}for(_t=0;_t<gt-1;_t++){for(Rt=_t,De=W[_t],Xt=_t+1;Xt<gt;Xt++)W[Xt]<De&&(Rt=Xt,De=W[Xt]);if(Rt!==_t)for(W[Rt]=W[_t],W[_t]=De,Xt=0;Xt<gt;Xt++)De=T.get(Xt,_t),T.set(Xt,_t,T.get(Xt,Rt)),T.set(Xt,Rt,De)}}function Ur(gt,bt,W,T){var A=0,et=gt-1,_t,Xt,Rt,ee,Ge,De,fr;for(De=A+1;De<=et-1;De++){for(fr=0,ee=De;ee<=et;ee++)fr=fr+Math.abs(bt.get(ee,De-1));if(fr!==0){for(Rt=0,ee=et;ee>=De;ee--)W[ee]=bt.get(ee,De-1)/fr,Rt+=W[ee]*W[ee];for(Xt=Math.sqrt(Rt),W[De]>0&&(Xt=-Xt),Rt=Rt-W[De]*Xt,W[De]=W[De]-Xt,Ge=De;Ge<gt;Ge++){for(_t=0,ee=et;ee>=De;ee--)_t+=W[ee]*bt.get(ee,Ge);for(_t=_t/Rt,ee=De;ee<=et;ee++)bt.set(ee,Ge,bt.get(ee,Ge)-_t*W[ee])}for(ee=0;ee<=et;ee++){for(_t=0,Ge=et;Ge>=De;Ge--)_t+=W[Ge]*bt.get(ee,Ge);for(_t=_t/Rt,Ge=De;Ge<=et;Ge++)bt.set(ee,Ge,bt.get(ee,Ge)-_t*W[Ge])}W[De]=fr*W[De],bt.set(De,De-1,fr*Xt)}}for(ee=0;ee<gt;ee++)for(Ge=0;Ge<gt;Ge++)T.set(ee,Ge,ee===Ge?1:0);for(De=et-1;De>=A+1;De--)if(bt.get(De,De-1)!==0){for(ee=De+1;ee<=et;ee++)W[ee]=bt.get(ee,De-1);for(Ge=De;Ge<=et;Ge++){for(Xt=0,ee=De;ee<=et;ee++)Xt+=W[ee]*T.get(ee,Ge);for(Xt=Xt/W[De]/bt.get(De,De-1),ee=De;ee<=et;ee++)T.set(ee,Ge,T.get(ee,Ge)+Xt*W[ee])}}}function Nr(gt,bt,W,T,A){var et=gt-1,_t=0,Xt=gt-1,Rt=Number.EPSILON,ee=0,Ge=0,De=0,fr=0,jr=0,Sr=0,vn=0,Xn=0,je,Er,Pr,Kr,$t,Pt,re,be,pe,ke,or,cr,rn,Nn,An;for(je=0;je<gt;je++)for((je<_t||je>Xt)&&(W[je]=A.get(je,je),bt[je]=0),Er=Math.max(je-1,0);Er<gt;Er++)Ge=Ge+Math.abs(A.get(je,Er));for(;et>=_t;){for(Kr=et;Kr>_t&&(Sr=Math.abs(A.get(Kr-1,Kr-1))+Math.abs(A.get(Kr,Kr)),Sr===0&&(Sr=Ge),!(Math.abs(A.get(Kr,Kr-1))<Rt*Sr));)Kr--;if(Kr===et)A.set(et,et,A.get(et,et)+ee),W[et]=A.get(et,et),bt[et]=0,et--,Xn=0;else if(Kr===et-1){if(re=A.get(et,et-1)*A.get(et-1,et),De=(A.get(et-1,et-1)-A.get(et,et))/2,fr=De*De+re,vn=Math.sqrt(Math.abs(fr)),A.set(et,et,A.get(et,et)+ee),A.set(et-1,et-1,A.get(et-1,et-1)+ee),be=A.get(et,et),fr>=0){for(vn=De>=0?De+vn:De-vn,W[et-1]=be+vn,W[et]=W[et-1],vn!==0&&(W[et]=be-re/vn),bt[et-1]=0,bt[et]=0,be=A.get(et,et-1),Sr=Math.abs(be)+Math.abs(vn),De=be/Sr,fr=vn/Sr,jr=Math.sqrt(De*De+fr*fr),De=De/jr,fr=fr/jr,Er=et-1;Er<gt;Er++)vn=A.get(et-1,Er),A.set(et-1,Er,fr*vn+De*A.get(et,Er)),A.set(et,Er,fr*A.get(et,Er)-De*vn);for(je=0;je<=et;je++)vn=A.get(je,et-1),A.set(je,et-1,fr*vn+De*A.get(je,et)),A.set(je,et,fr*A.get(je,et)-De*vn);for(je=_t;je<=Xt;je++)vn=T.get(je,et-1),T.set(je,et-1,fr*vn+De*T.get(je,et)),T.set(je,et,fr*T.get(je,et)-De*vn)}else W[et-1]=be+De,W[et]=be+De,bt[et-1]=vn,bt[et]=-vn;et=et-2,Xn=0}else{if(be=A.get(et,et),pe=0,re=0,Kr<et&&(pe=A.get(et-1,et-1),re=A.get(et,et-1)*A.get(et-1,et)),Xn===10){for(ee+=be,je=_t;je<=et;je++)A.set(je,je,A.get(je,je)-be);Sr=Math.abs(A.get(et,et-1))+Math.abs(A.get(et-1,et-2)),be=pe=.75*Sr,re=-.4375*Sr*Sr}if(Xn===30&&(Sr=(pe-be)/2,Sr=Sr*Sr+re,Sr>0)){for(Sr=Math.sqrt(Sr),pe<be&&(Sr=-Sr),Sr=be-re/((pe-be)/2+Sr),je=_t;je<=et;je++)A.set(je,je,A.get(je,je)-Sr);ee+=Sr,be=pe=re=.964}for(Xn=Xn+1,$t=et-2;$t>=Kr&&(vn=A.get($t,$t),jr=be-vn,Sr=pe-vn,De=(jr*Sr-re)/A.get($t+1,$t)+A.get($t,$t+1),fr=A.get($t+1,$t+1)-vn-jr-Sr,jr=A.get($t+2,$t+1),Sr=Math.abs(De)+Math.abs(fr)+Math.abs(jr),De=De/Sr,fr=fr/Sr,jr=jr/Sr,!($t===Kr||Math.abs(A.get($t,$t-1))*(Math.abs(fr)+Math.abs(jr))<Rt*(Math.abs(De)*(Math.abs(A.get($t-1,$t-1))+Math.abs(vn)+Math.abs(A.get($t+1,$t+1))))));)$t--;for(je=$t+2;je<=et;je++)A.set(je,je-2,0),je>$t+2&&A.set(je,je-3,0);for(Pr=$t;Pr<=et-1&&(Nn=Pr!==et-1,Pr!==$t&&(De=A.get(Pr,Pr-1),fr=A.get(Pr+1,Pr-1),jr=Nn?A.get(Pr+2,Pr-1):0,be=Math.abs(De)+Math.abs(fr)+Math.abs(jr),be!==0&&(De=De/be,fr=fr/be,jr=jr/be)),be!==0);Pr++)if(Sr=Math.sqrt(De*De+fr*fr+jr*jr),De<0&&(Sr=-Sr),Sr!==0){for(Pr!==$t?A.set(Pr,Pr-1,-Sr*be):Kr!==$t&&A.set(Pr,Pr-1,-A.get(Pr,Pr-1)),De=De+Sr,be=De/Sr,pe=fr/Sr,vn=jr/Sr,fr=fr/De,jr=jr/De,Er=Pr;Er<gt;Er++)De=A.get(Pr,Er)+fr*A.get(Pr+1,Er),Nn&&(De=De+jr*A.get(Pr+2,Er),A.set(Pr+2,Er,A.get(Pr+2,Er)-De*vn)),A.set(Pr,Er,A.get(Pr,Er)-De*be),A.set(Pr+1,Er,A.get(Pr+1,Er)-De*pe);for(je=0;je<=Math.min(et,Pr+3);je++)De=be*A.get(je,Pr)+pe*A.get(je,Pr+1),Nn&&(De=De+vn*A.get(je,Pr+2),A.set(je,Pr+2,A.get(je,Pr+2)-De*jr)),A.set(je,Pr,A.get(je,Pr)-De),A.set(je,Pr+1,A.get(je,Pr+1)-De*fr);for(je=_t;je<=Xt;je++)De=be*T.get(je,Pr)+pe*T.get(je,Pr+1),Nn&&(De=De+vn*T.get(je,Pr+2),T.set(je,Pr+2,T.get(je,Pr+2)-De*jr)),T.set(je,Pr,T.get(je,Pr)-De),T.set(je,Pr+1,T.get(je,Pr+1)-De*fr)}}}if(Ge!==0){for(et=gt-1;et>=0;et--)if(De=W[et],fr=bt[et],fr===0)for(Kr=et,A.set(et,et,1),je=et-1;je>=0;je--){for(re=A.get(je,je)-De,jr=0,Er=Kr;Er<=et;Er++)jr=jr+A.get(je,Er)*A.get(Er,et);if(bt[je]<0)vn=re,Sr=jr;else if(Kr=je,bt[je]===0?A.set(je,et,re!==0?-jr/re:-jr/(Rt*Ge)):(be=A.get(je,je+1),pe=A.get(je+1,je),fr=(W[je]-De)*(W[je]-De)+bt[je]*bt[je],Pt=(be*Sr-vn*jr)/fr,A.set(je,et,Pt),A.set(je+1,et,Math.abs(be)>Math.abs(vn)?(-jr-re*Pt)/be:(-Sr-pe*Pt)/vn)),Pt=Math.abs(A.get(je,et)),Rt*Pt*Pt>1)for(Er=je;Er<=et;Er++)A.set(Er,et,A.get(Er,et)/Pt)}else if(fr<0)for(Kr=et-1,Math.abs(A.get(et,et-1))>Math.abs(A.get(et-1,et))?(A.set(et-1,et-1,fr/A.get(et,et-1)),A.set(et-1,et,-(A.get(et,et)-De)/A.get(et,et-1))):(An=gn(0,-A.get(et-1,et),A.get(et-1,et-1)-De,fr),A.set(et-1,et-1,An[0]),A.set(et-1,et,An[1])),A.set(et,et-1,0),A.set(et,et,1),je=et-2;je>=0;je--){for(ke=0,or=0,Er=Kr;Er<=et;Er++)ke=ke+A.get(je,Er)*A.get(Er,et-1),or=or+A.get(je,Er)*A.get(Er,et);if(re=A.get(je,je)-De,bt[je]<0)vn=re,jr=ke,Sr=or;else if(Kr=je,bt[je]===0?(An=gn(-ke,-or,re,fr),A.set(je,et-1,An[0]),A.set(je,et,An[1])):(be=A.get(je,je+1),pe=A.get(je+1,je),cr=(W[je]-De)*(W[je]-De)+bt[je]*bt[je]-fr*fr,rn=(W[je]-De)*2*fr,cr===0&&rn===0&&(cr=Rt*Ge*(Math.abs(re)+Math.abs(fr)+Math.abs(be)+Math.abs(pe)+Math.abs(vn))),An=gn(be*jr-vn*ke+fr*or,be*Sr-vn*or-fr*ke,cr,rn),A.set(je,et-1,An[0]),A.set(je,et,An[1]),Math.abs(be)>Math.abs(vn)+Math.abs(fr)?(A.set(je+1,et-1,(-ke-re*A.get(je,et-1)+fr*A.get(je,et))/be),A.set(je+1,et,(-or-re*A.get(je,et)-fr*A.get(je,et-1))/be)):(An=gn(-jr-pe*A.get(je,et-1),-Sr-pe*A.get(je,et),vn,fr),A.set(je+1,et-1,An[0]),A.set(je+1,et,An[1]))),Pt=Math.max(Math.abs(A.get(je,et-1)),Math.abs(A.get(je,et))),Rt*Pt*Pt>1)for(Er=je;Er<=et;Er++)A.set(Er,et-1,A.get(Er,et-1)/Pt),A.set(Er,et,A.get(Er,et)/Pt)}for(je=0;je<gt;je++)if(je<_t||je>Xt)for(Er=je;Er<gt;Er++)T.set(je,Er,A.get(je,Er));for(Er=gt-1;Er>=_t;Er--)for(je=_t;je<=Xt;je++){for(vn=0,Pr=_t;Pr<=Math.min(Er,Xt);Pr++)vn=vn+T.get(je,Pr)*A.get(Pr,Er);T.set(je,Er,vn)}}}function gn(gt,bt,W,T){var A,et;return Math.abs(W)>Math.abs(T)?(A=T/W,et=W+A*T,[(gt+A*bt)/et,(bt-A*gt)/et]):(A=W/T,et=T+A*W,[(A*gt+bt)/et,(A*bt-gt)/et])}var hn=function(){function gt(bt){if(S()(this,gt),bt=lr.checkMatrix(bt),!bt.isSymmetric())throw new Error("Matrix is not symmetric");var W=bt,T=W.rows,A=new Je(T,T),et=!0,_t,Xt,Rt;for(Xt=0;Xt<T;Xt++){var ee=0;for(Rt=0;Rt<Xt;Rt++){var Ge=0;for(_t=0;_t<Rt;_t++)Ge+=A.get(Rt,_t)*A.get(Xt,_t);Ge=(W.get(Xt,Rt)-Ge)/A.get(Rt,Rt),A.set(Xt,Rt,Ge),ee=ee+Ge*Ge}for(ee=W.get(Xt,Xt)-ee,et&=ee>0,A.set(Xt,Xt,Math.sqrt(Math.max(ee,0))),Rt=Xt+1;Rt<T;Rt++)A.set(Xt,Rt,0)}this.L=A,this.positiveDefinite=!!et}return E()(gt,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(W){W=lr.checkMatrix(W);var T=this.L,A=T.rows;if(W.rows!==A)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");var et=W.columns,_t=W.clone(),Xt,Rt,ee;for(ee=0;ee<A;ee++)for(Rt=0;Rt<et;Rt++){for(Xt=0;Xt<ee;Xt++)_t.set(ee,Rt,_t.get(ee,Rt)-_t.get(Xt,Rt)*T.get(ee,Xt));_t.set(ee,Rt,_t.get(ee,Rt)/T.get(ee,ee))}for(ee=A-1;ee>=0;ee--)for(Rt=0;Rt<et;Rt++){for(Xt=ee+1;Xt<A;Xt++)_t.set(ee,Rt,_t.get(ee,Rt)-_t.get(Xt,Rt)*T.get(Xt,ee));_t.set(ee,Rt,_t.get(ee,Rt)/T.get(ee,ee))}return _t}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),gt}(),pn=E()(function gt(bt){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};S()(this,gt),bt=lr.checkMatrix(bt);var T=W.Y,A=W.scaleScores,et=A===void 0?!1:A,_t=W.maxIterations,Xt=_t===void 0?1e3:_t,Rt=W.terminationCriteria,ee=Rt===void 0?1e-10:Rt,Ge;if(T){if(Array.isArray(T)&&typeof T[0]=="number"?T=Je.columnVector(T):T=lr.checkMatrix(T),!T.isColumnVector()||T.rows!==bt.rows)throw new Error("Y must be a column vector of length X.rows");Ge=T}else Ge=bt.getColumnVector(0);for(var De=1,fr,jr,Sr,vn,Xn=0;Xn<Xt&&De>ee;Xn++)Sr=bt.transpose().mmul(Ge).div(Ge.transpose().mmul(Ge).get(0,0)),Sr=Sr.div(Sr.norm()),fr=bt.mmul(Sr).div(Sr.transpose().mmul(Sr).get(0,0)),Xn>0&&(De=fr.clone().sub(vn).pow(2).sum()),vn=fr.clone(),T?(jr=T.transpose().mmul(fr).div(fr.transpose().mmul(fr).get(0,0)),jr=jr.div(jr.norm()),Ge=T.mmul(jr).div(jr.transpose().mmul(jr).get(0,0))):Ge=fr;if(T){var je=bt.transpose().mmul(fr).div(fr.transpose().mmul(fr).get(0,0));je=je.div(je.norm());var Er=bt.clone().sub(fr.clone().mmul(je.transpose())),Pr=Ge.transpose().mmul(fr).div(fr.transpose().mmul(fr).get(0,0)),Kr=T.clone().sub(fr.clone().mulS(Pr.get(0,0)).mmul(jr.transpose()));this.t=fr,this.p=je.transpose(),this.w=Sr.transpose(),this.q=jr,this.u=Ge,this.s=fr.transpose().mmul(fr),this.xResidual=Er,this.yResidual=Kr,this.betas=Pr}else this.w=Sr.transpose(),this.s=fr.transpose().mmul(fr).sqrt(),et?this.t=fr.clone().div(this.s.get(0,0)):this.t=fr,this.xResidual=bt.sub(fr.mmul(Sr.transpose()))})},86880:function(xr,U,z){"use strict";z.r(U),z.d(U,{forceCenter:function(){return F},forceCollide:function(){return w},forceLink:function(){return S},forceManyBody:function(){return Le},forceRadial:function(){return jt},forceSimulation:function(){return fe},forceX:function(){return oe},forceY:function(){return Te}});function F(se,Ie){var Pe,Lt=1;se==null&&(se=0),Ie==null&&(Ie=0);function Je(){var Lr,Vr=Pe.length,Xr,Mn=0,Hr=0;for(Lr=0;Lr<Vr;++Lr)Xr=Pe[Lr],Mn+=Xr.x,Hr+=Xr.y;for(Mn=(Mn/Vr-se)*Lt,Hr=(Hr/Vr-Ie)*Lt,Lr=0;Lr<Vr;++Lr)Xr=Pe[Lr],Xr.x-=Mn,Xr.y-=Hr}return Je.initialize=function(Lr){Pe=Lr},Je.x=function(Lr){return arguments.length?(se=+Lr,Je):se},Je.y=function(Lr){return arguments.length?(Ie=+Lr,Je):Ie},Je.strength=function(Lr){return arguments.length?(Lt=+Lr,Je):Lt},Je}var j=z(47148);function B(se){return function(){return se}}function L(se){return(se()-.5)*1e-6}function k(se){return se.x+se.vx}function D(se){return se.y+se.vy}function w(se){var Ie,Pe,Lt,Je=1,Lr=1;typeof se!="function"&&(se=B(se==null?1:+se));function Vr(){for(var Hr,Cn=Ie.length,Zn,Un,mn,rr,sr,lr,zr=0;zr<Lr;++zr)for(Zn=(0,j.Z)(Ie,k,D).visitAfter(Xr),Hr=0;Hr<Cn;++Hr)Un=Ie[Hr],sr=Pe[Un.index],lr=sr*sr,mn=Un.x+Un.vx,rr=Un.y+Un.vy,Zn.visit(fn);function fn(wn,ln,$n,Jn,Da){var bn=wn.data,Hn=wn.r,Wn=sr+Hn;if(bn){if(bn.index>Un.index){var Bn=mn-bn.x-bn.vx,ya=rr-bn.y-bn.vy,q=Bn*Bn+ya*ya;q<Wn*Wn&&(Bn===0&&(Bn=L(Lt),q+=Bn*Bn),ya===0&&(ya=L(Lt),q+=ya*ya),q=(Wn-(q=Math.sqrt(q)))/q*Je,Un.vx+=(Bn*=q)*(Wn=(Hn*=Hn)/(lr+Hn)),Un.vy+=(ya*=q)*Wn,bn.vx-=Bn*(Wn=1-Wn),bn.vy-=ya*Wn)}return}return ln>mn+Wn||Jn<mn-Wn||$n>rr+Wn||Da<rr-Wn}}function Xr(Hr){if(Hr.data)return Hr.r=Pe[Hr.data.index];for(var Cn=Hr.r=0;Cn<4;++Cn)Hr[Cn]&&Hr[Cn].r>Hr.r&&(Hr.r=Hr[Cn].r)}function Mn(){if(Ie){var Hr,Cn=Ie.length,Zn;for(Pe=new Array(Cn),Hr=0;Hr<Cn;++Hr)Zn=Ie[Hr],Pe[Zn.index]=+se(Zn,Hr,Ie)}}return Vr.initialize=function(Hr,Cn){Ie=Hr,Lt=Cn,Mn()},Vr.iterations=function(Hr){return arguments.length?(Lr=+Hr,Vr):Lr},Vr.strength=function(Hr){return arguments.length?(Je=+Hr,Vr):Je},Vr.radius=function(Hr){return arguments.length?(se=typeof Hr=="function"?Hr:B(+Hr),Mn(),Vr):se},Vr}var b=z(52677),g=z.n(b);function y(se){return se.index}function d(se,Ie){var Pe=se.get(Ie);if(!Pe)throw new Error("node not found: "+Ie);return Pe}function S(se){var Ie=y,Pe=Zn,Lt,Je=B(30),Lr,Vr,Xr,Mn,Hr,Cn=1;se==null&&(se=[]);function Zn(lr){return 1/Math.min(Xr[lr.source.index],Xr[lr.target.index])}function Un(lr){for(var zr=0,fn=se.length;zr<Cn;++zr)for(var wn=0,ln,$n,Jn,Da,bn,Hn,Wn;wn<fn;++wn)ln=se[wn],$n=ln.source,Jn=ln.target,Da=Jn.x+Jn.vx-$n.x-$n.vx||L(Hr),bn=Jn.y+Jn.vy-$n.y-$n.vy||L(Hr),Hn=Math.sqrt(Da*Da+bn*bn),Hn=(Hn-Lr[wn])/Hn*lr*Lt[wn],Da*=Hn,bn*=Hn,Jn.vx-=Da*(Wn=Mn[wn]),Jn.vy-=bn*Wn,$n.vx+=Da*(Wn=1-Wn),$n.vy+=bn*Wn}function mn(){if(Vr){var lr,zr=Vr.length,fn=se.length,wn=new Map(Vr.map(function($n,Jn){return[Ie($n,Jn,Vr),$n]})),ln;for(lr=0,Xr=new Array(zr);lr<fn;++lr)ln=se[lr],ln.index=lr,g()(ln.source)!=="object"&&(ln.source=d(wn,ln.source)),g()(ln.target)!=="object"&&(ln.target=d(wn,ln.target)),Xr[ln.source.index]=(Xr[ln.source.index]||0)+1,Xr[ln.target.index]=(Xr[ln.target.index]||0)+1;for(lr=0,Mn=new Array(fn);lr<fn;++lr)ln=se[lr],Mn[lr]=Xr[ln.source.index]/(Xr[ln.source.index]+Xr[ln.target.index]);Lt=new Array(fn),rr(),Lr=new Array(fn),sr()}}function rr(){if(Vr)for(var lr=0,zr=se.length;lr<zr;++lr)Lt[lr]=+Pe(se[lr],lr,se)}function sr(){if(Vr)for(var lr=0,zr=se.length;lr<zr;++lr)Lr[lr]=+Je(se[lr],lr,se)}return Un.initialize=function(lr,zr){Vr=lr,Hr=zr,mn()},Un.links=function(lr){return arguments.length?(se=lr,mn(),Un):se},Un.id=function(lr){return arguments.length?(Ie=lr,Un):Ie},Un.iterations=function(lr){return arguments.length?(Cn=+lr,Un):Cn},Un.strength=function(lr){return arguments.length?(Pe=typeof lr=="function"?lr:B(+lr),rr(),Un):Pe},Un.distance=function(lr){return arguments.length?(Je=typeof lr=="function"?lr:B(+lr),sr(),Un):Je},Un}var _={value:function(){}};function E(){for(var se=0,Ie=arguments.length,Pe={},Lt;se<Ie;++se){if(!(Lt=arguments[se]+"")||Lt in Pe||/[\s.]/.test(Lt))throw new Error("illegal type: "+Lt);Pe[Lt]=[]}return new I(Pe)}function I(se){this._=se}function P(se,Ie){return se.trim().split(/^|\s+/).map(function(Pe){var Lt="",Je=Pe.indexOf(".");if(Je>=0&&(Lt=Pe.slice(Je+1),Pe=Pe.slice(0,Je)),Pe&&!Ie.hasOwnProperty(Pe))throw new Error("unknown type: "+Pe);return{type:Pe,name:Lt}})}I.prototype=E.prototype={constructor:I,on:function(Ie,Pe){var Lt=this._,Je=P(Ie+"",Lt),Lr,Vr=-1,Xr=Je.length;if(arguments.length<2){for(;++Vr<Xr;)if((Lr=(Ie=Je[Vr]).type)&&(Lr=N(Lt[Lr],Ie.name)))return Lr;return}if(Pe!=null&&typeof Pe!="function")throw new Error("invalid callback: "+Pe);for(;++Vr<Xr;)if(Lr=(Ie=Je[Vr]).type)Lt[Lr]=H(Lt[Lr],Ie.name,Pe);else if(Pe==null)for(Lr in Lt)Lt[Lr]=H(Lt[Lr],Ie.name,null);return this},copy:function(){var Ie={},Pe=this._;for(var Lt in Pe)Ie[Lt]=Pe[Lt].slice();return new I(Ie)},call:function(Ie,Pe){if((Lr=arguments.length-2)>0)for(var Lt=new Array(Lr),Je=0,Lr,Vr;Je<Lr;++Je)Lt[Je]=arguments[Je+2];if(!this._.hasOwnProperty(Ie))throw new Error("unknown type: "+Ie);for(Vr=this._[Ie],Je=0,Lr=Vr.length;Je<Lr;++Je)Vr[Je].value.apply(Pe,Lt)},apply:function(Ie,Pe,Lt){if(!this._.hasOwnProperty(Ie))throw new Error("unknown type: "+Ie);for(var Je=this._[Ie],Lr=0,Vr=Je.length;Lr<Vr;++Lr)Je[Lr].value.apply(Pe,Lt)}};function N(se,Ie){for(var Pe=0,Lt=se.length,Je;Pe<Lt;++Pe)if((Je=se[Pe]).name===Ie)return Je.value}function H(se,Ie,Pe){for(var Lt=0,Je=se.length;Lt<Je;++Lt)if(se[Lt].name===Ie){se[Lt]=_,se=se.slice(0,Lt).concat(se.slice(Lt+1));break}return Pe!=null&&se.push({name:Ie,value:Pe}),se}var nt=E,X=0,Y=0,Z=0,J=1e3,it,tt,ut=0,vt=0,pt=0,Dt=typeof performance=="object"&&performance.now?performance:Date,Ot=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(se){setTimeout(se,17)};function te(){return vt||(Ot(Gt),vt=Dt.now()+pt)}function Gt(){vt=0}function K(){this._call=this._time=this._next=null}K.prototype=p.prototype={constructor:K,restart:function(se,Ie,Pe){if(typeof se!="function")throw new TypeError("callback is not a function");Pe=(Pe==null?te():+Pe)+(Ie==null?0:+Ie),!this._next&&tt!==this&&(tt?tt._next=this:it=this,tt=this),this._call=se,this._time=Pe,Ut()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ut())}};function p(se,Ie,Pe){var Lt=new K;return Lt.restart(se,Ie,Pe),Lt}function at(){te(),++X;for(var se=it,Ie;se;)(Ie=vt-se._time)>=0&&se._call.call(null,Ie),se=se._next;--X}function ht(){vt=(ut=Dt.now())+pt,X=Y=0;try{at()}finally{X=0,Mt(),vt=0}}function wt(){var se=Dt.now(),Ie=se-ut;Ie>J&&(pt-=Ie,ut=se)}function Mt(){for(var se,Ie=it,Pe,Lt=1/0;Ie;)Ie._call?(Lt>Ie._time&&(Lt=Ie._time),se=Ie,Ie=Ie._next):(Pe=Ie._next,Ie._next=null,Ie=se?se._next=Pe:it=Pe);tt=se,Ut(Lt)}function Ut(se){if(!X){Y&&(Y=clearTimeout(Y));var Ie=se-vt;Ie>24?(se<1/0&&(Y=setTimeout(ht,se-Dt.now()-pt)),Z&&(Z=clearInterval(Z))):(Z||(ut=Dt.now(),Z=setInterval(wt,J)),X=1,Ot(ht))}}var Vt=1664525,Me=1013904223,Wt=4294967296;function ae(){var se=1;return function(){return(se=(Vt*se+Me)%Wt)/Wt}}function he(se){return se.x}function Se(se){return se.y}var xe=10,Bt=Math.PI*(3-Math.sqrt(5));function fe(se){var Ie,Pe=1,Lt=.001,Je=1-Math.pow(Lt,1/300),Lr=0,Vr=.6,Xr=new Map,Mn=p(Zn),Hr=nt("tick","end"),Cn=ae();se==null&&(se=[]);function Zn(){Un(),Hr.call("tick",Ie),Pe<Lt&&(Mn.stop(),Hr.call("end",Ie))}function Un(sr){var lr,zr=se.length,fn;sr===void 0&&(sr=1);for(var wn=0;wn<sr;++wn)for(Pe+=(Lr-Pe)*Je,Xr.forEach(function(ln){ln(Pe)}),lr=0;lr<zr;++lr)fn=se[lr],fn.fx==null?fn.x+=fn.vx*=Vr:(fn.x=fn.fx,fn.vx=0),fn.fy==null?fn.y+=fn.vy*=Vr:(fn.y=fn.fy,fn.vy=0);return Ie}function mn(){for(var sr=0,lr=se.length,zr;sr<lr;++sr){if(zr=se[sr],zr.index=sr,zr.fx!=null&&(zr.x=zr.fx),zr.fy!=null&&(zr.y=zr.fy),isNaN(zr.x)||isNaN(zr.y)){var fn=xe*Math.sqrt(.5+sr),wn=sr*Bt;zr.x=fn*Math.cos(wn),zr.y=fn*Math.sin(wn)}(isNaN(zr.vx)||isNaN(zr.vy))&&(zr.vx=zr.vy=0)}}function rr(sr){return sr.initialize&&sr.initialize(se,Cn),sr}return mn(),Ie={tick:Un,restart:function(){return Mn.restart(Zn),Ie},stop:function(){return Mn.stop(),Ie},nodes:function(lr){return arguments.length?(se=lr,mn(),Xr.forEach(rr),Ie):se},alpha:function(lr){return arguments.length?(Pe=+lr,Ie):Pe},alphaMin:function(lr){return arguments.length?(Lt=+lr,Ie):Lt},alphaDecay:function(lr){return arguments.length?(Je=+lr,Ie):+Je},alphaTarget:function(lr){return arguments.length?(Lr=+lr,Ie):Lr},velocityDecay:function(lr){return arguments.length?(Vr=1-lr,Ie):1-Vr},randomSource:function(lr){return arguments.length?(Cn=lr,Xr.forEach(rr),Ie):Cn},force:function(lr,zr){return arguments.length>1?(zr==null?Xr.delete(lr):Xr.set(lr,rr(zr)),Ie):Xr.get(lr)},find:function(lr,zr,fn){var wn=0,ln=se.length,$n,Jn,Da,bn,Hn;for(fn==null?fn=1/0:fn*=fn,wn=0;wn<ln;++wn)bn=se[wn],$n=lr-bn.x,Jn=zr-bn.y,Da=$n*$n+Jn*Jn,Da<fn&&(Hn=bn,fn=Da);return Hn},on:function(lr,zr){return arguments.length>1?(Hr.on(lr,zr),Ie):Hr.on(lr)}}}function Le(){var se,Ie,Pe,Lt,Je=B(-30),Lr,Vr=1,Xr=1/0,Mn=.81;function Hr(mn){var rr,sr=se.length,lr=(0,j.Z)(se,he,Se).visitAfter(Zn);for(Lt=mn,rr=0;rr<sr;++rr)Ie=se[rr],lr.visit(Un)}function Cn(){if(se){var mn,rr=se.length,sr;for(Lr=new Array(rr),mn=0;mn<rr;++mn)sr=se[mn],Lr[sr.index]=+Je(sr,mn,se)}}function Zn(mn){var rr=0,sr,lr,zr=0,fn,wn,ln;if(mn.length){for(fn=wn=ln=0;ln<4;++ln)(sr=mn[ln])&&(lr=Math.abs(sr.value))&&(rr+=sr.value,zr+=lr,fn+=lr*sr.x,wn+=lr*sr.y);mn.x=fn/zr,mn.y=wn/zr}else{sr=mn,sr.x=sr.data.x,sr.y=sr.data.y;do rr+=Lr[sr.data.index];while(sr=sr.next)}mn.value=rr}function Un(mn,rr,sr,lr){if(!mn.value)return!0;var zr=mn.x-Ie.x,fn=mn.y-Ie.y,wn=lr-rr,ln=zr*zr+fn*fn;if(wn*wn/Mn<ln)return ln<Xr&&(zr===0&&(zr=L(Pe),ln+=zr*zr),fn===0&&(fn=L(Pe),ln+=fn*fn),ln<Vr&&(ln=Math.sqrt(Vr*ln)),Ie.vx+=zr*mn.value*Lt/ln,Ie.vy+=fn*mn.value*Lt/ln),!0;if(mn.length||ln>=Xr)return;(mn.data!==Ie||mn.next)&&(zr===0&&(zr=L(Pe),ln+=zr*zr),fn===0&&(fn=L(Pe),ln+=fn*fn),ln<Vr&&(ln=Math.sqrt(Vr*ln)));do mn.data!==Ie&&(wn=Lr[mn.data.index]*Lt/ln,Ie.vx+=zr*wn,Ie.vy+=fn*wn);while(mn=mn.next)}return Hr.initialize=function(mn,rr){se=mn,Pe=rr,Cn()},Hr.strength=function(mn){return arguments.length?(Je=typeof mn=="function"?mn:B(+mn),Cn(),Hr):Je},Hr.distanceMin=function(mn){return arguments.length?(Vr=mn*mn,Hr):Math.sqrt(Vr)},Hr.distanceMax=function(mn){return arguments.length?(Xr=mn*mn,Hr):Math.sqrt(Xr)},Hr.theta=function(mn){return arguments.length?(Mn=mn*mn,Hr):Math.sqrt(Mn)},Hr}function jt(se,Ie,Pe){var Lt,Je=B(.1),Lr,Vr;typeof se!="function"&&(se=B(+se)),Ie==null&&(Ie=0),Pe==null&&(Pe=0);function Xr(Hr){for(var Cn=0,Zn=Lt.length;Cn<Zn;++Cn){var Un=Lt[Cn],mn=Un.x-Ie||1e-6,rr=Un.y-Pe||1e-6,sr=Math.sqrt(mn*mn+rr*rr),lr=(Vr[Cn]-sr)*Lr[Cn]*Hr/sr;Un.vx+=mn*lr,Un.vy+=rr*lr}}function Mn(){if(Lt){var Hr,Cn=Lt.length;for(Lr=new Array(Cn),Vr=new Array(Cn),Hr=0;Hr<Cn;++Hr)Vr[Hr]=+se(Lt[Hr],Hr,Lt),Lr[Hr]=isNaN(Vr[Hr])?0:+Je(Lt[Hr],Hr,Lt)}}return Xr.initialize=function(Hr){Lt=Hr,Mn()},Xr.strength=function(Hr){return arguments.length?(Je=typeof Hr=="function"?Hr:B(+Hr),Mn(),Xr):Je},Xr.radius=function(Hr){return arguments.length?(se=typeof Hr=="function"?Hr:B(+Hr),Mn(),Xr):se},Xr.x=function(Hr){return arguments.length?(Ie=+Hr,Xr):Ie},Xr.y=function(Hr){return arguments.length?(Pe=+Hr,Xr):Pe},Xr}function oe(se){var Ie=B(.1),Pe,Lt,Je;typeof se!="function"&&(se=B(se==null?0:+se));function Lr(Xr){for(var Mn=0,Hr=Pe.length,Cn;Mn<Hr;++Mn)Cn=Pe[Mn],Cn.vx+=(Je[Mn]-Cn.x)*Lt[Mn]*Xr}function Vr(){if(Pe){var Xr,Mn=Pe.length;for(Lt=new Array(Mn),Je=new Array(Mn),Xr=0;Xr<Mn;++Xr)Lt[Xr]=isNaN(Je[Xr]=+se(Pe[Xr],Xr,Pe))?0:+Ie(Pe[Xr],Xr,Pe)}}return Lr.initialize=function(Xr){Pe=Xr,Vr()},Lr.strength=function(Xr){return arguments.length?(Ie=typeof Xr=="function"?Xr:B(+Xr),Vr(),Lr):Ie},Lr.x=function(Xr){return arguments.length?(se=typeof Xr=="function"?Xr:B(+Xr),Vr(),Lr):se},Lr}function Te(se){var Ie=B(.1),Pe,Lt,Je;typeof se!="function"&&(se=B(se==null?0:+se));function Lr(Xr){for(var Mn=0,Hr=Pe.length,Cn;Mn<Hr;++Mn)Cn=Pe[Mn],Cn.vy+=(Je[Mn]-Cn.y)*Lt[Mn]*Xr}function Vr(){if(Pe){var Xr,Mn=Pe.length;for(Lt=new Array(Mn),Je=new Array(Mn),Xr=0;Xr<Mn;++Xr)Lt[Xr]=isNaN(Je[Xr]=+se(Pe[Xr],Xr,Pe))?0:+Ie(Pe[Xr],Xr,Pe)}}return Lr.initialize=function(Xr){Pe=Xr,Vr()},Lr.strength=function(Xr){return arguments.length?(Ie=typeof Xr=="function"?Xr:B(+Xr),Vr(),Lr):Ie},Lr.y=function(Xr){return arguments.length?(se=typeof Xr=="function"?Xr:B(+Xr),Vr(),Lr):se},Lr}},48168:function(xr,U,z){var F=z(39092),j={};for(var B in F)F.hasOwnProperty(B)&&(j[F[B]]=B);var L=xr.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var k in L)if(L.hasOwnProperty(k)){if(!("channels"in L[k]))throw new Error("missing channels property: "+k);if(!("labels"in L[k]))throw new Error("missing channel labels property: "+k);if(L[k].labels.length!==L[k].channels)throw new Error("channel and label counts mismatch: "+k);var D=L[k].channels,w=L[k].labels;delete L[k].channels,delete L[k].labels,Object.defineProperty(L[k],"channels",{value:D}),Object.defineProperty(L[k],"labels",{value:w})}L.rgb.hsl=function(g){var y=g[0]/255,d=g[1]/255,S=g[2]/255,_=Math.min(y,d,S),E=Math.max(y,d,S),I=E-_,P,N,H;return E===_?P=0:y===E?P=(d-S)/I:d===E?P=2+(S-y)/I:S===E&&(P=4+(y-d)/I),P=Math.min(P*60,360),P<0&&(P+=360),H=(_+E)/2,E===_?N=0:H<=.5?N=I/(E+_):N=I/(2-E-_),[P,N*100,H*100]},L.rgb.hsv=function(g){var y,d,S,_,E,I=g[0]/255,P=g[1]/255,N=g[2]/255,H=Math.max(I,P,N),nt=H-Math.min(I,P,N),X=function(Y){return(H-Y)/6/nt+1/2};return nt===0?_=E=0:(E=nt/H,y=X(I),d=X(P),S=X(N),I===H?_=S-d:P===H?_=1/3+y-S:N===H&&(_=2/3+d-y),_<0?_+=1:_>1&&(_-=1)),[_*360,E*100,H*100]},L.rgb.hwb=function(g){var y=g[0],d=g[1],S=g[2],_=L.rgb.hsl(g)[0],E=1/255*Math.min(y,Math.min(d,S));return S=1-1/255*Math.max(y,Math.max(d,S)),[_,E*100,S*100]},L.rgb.cmyk=function(g){var y=g[0]/255,d=g[1]/255,S=g[2]/255,_,E,I,P;return P=Math.min(1-y,1-d,1-S),_=(1-y-P)/(1-P)||0,E=(1-d-P)/(1-P)||0,I=(1-S-P)/(1-P)||0,[_*100,E*100,I*100,P*100]};function b(g,y){return Math.pow(g[0]-y[0],2)+Math.pow(g[1]-y[1],2)+Math.pow(g[2]-y[2],2)}L.rgb.keyword=function(g){var y=j[g];if(y)return y;var d=1/0,S;for(var _ in F)if(F.hasOwnProperty(_)){var E=F[_],I=b(g,E);I<d&&(d=I,S=_)}return S},L.keyword.rgb=function(g){return F[g]},L.rgb.xyz=function(g){var y=g[0]/255,d=g[1]/255,S=g[2]/255;y=y>.04045?Math.pow((y+.055)/1.055,2.4):y/12.92,d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92,S=S>.04045?Math.pow((S+.055)/1.055,2.4):S/12.92;var _=y*.4124+d*.3576+S*.1805,E=y*.2126+d*.7152+S*.0722,I=y*.0193+d*.1192+S*.9505;return[_*100,E*100,I*100]},L.rgb.lab=function(g){var y=L.rgb.xyz(g),d=y[0],S=y[1],_=y[2],E,I,P;return d/=95.047,S/=100,_/=108.883,d=d>.008856?Math.pow(d,1/3):7.787*d+16/116,S=S>.008856?Math.pow(S,1/3):7.787*S+16/116,_=_>.008856?Math.pow(_,1/3):7.787*_+16/116,E=116*S-16,I=500*(d-S),P=200*(S-_),[E,I,P]},L.hsl.rgb=function(g){var y=g[0]/360,d=g[1]/100,S=g[2]/100,_,E,I,P,N;if(d===0)return N=S*255,[N,N,N];S<.5?E=S*(1+d):E=S+d-S*d,_=2*S-E,P=[0,0,0];for(var H=0;H<3;H++)I=y+1/3*-(H-1),I<0&&I++,I>1&&I--,6*I<1?N=_+(E-_)*6*I:2*I<1?N=E:3*I<2?N=_+(E-_)*(2/3-I)*6:N=_,P[H]=N*255;return P},L.hsl.hsv=function(g){var y=g[0],d=g[1]/100,S=g[2]/100,_=d,E=Math.max(S,.01),I,P;return S*=2,d*=S<=1?S:2-S,_*=E<=1?E:2-E,P=(S+d)/2,I=S===0?2*_/(E+_):2*d/(S+d),[y,I*100,P*100]},L.hsv.rgb=function(g){var y=g[0]/60,d=g[1]/100,S=g[2]/100,_=Math.floor(y)%6,E=y-Math.floor(y),I=255*S*(1-d),P=255*S*(1-d*E),N=255*S*(1-d*(1-E));switch(S*=255,_){case 0:return[S,N,I];case 1:return[P,S,I];case 2:return[I,S,N];case 3:return[I,P,S];case 4:return[N,I,S];case 5:return[S,I,P]}},L.hsv.hsl=function(g){var y=g[0],d=g[1]/100,S=g[2]/100,_=Math.max(S,.01),E,I,P;return P=(2-d)*S,E=(2-d)*_,I=d*_,I/=E<=1?E:2-E,I=I||0,P/=2,[y,I*100,P*100]},L.hwb.rgb=function(g){var y=g[0]/360,d=g[1]/100,S=g[2]/100,_=d+S,E,I,P,N;_>1&&(d/=_,S/=_),E=Math.floor(6*y),I=1-S,P=6*y-E,E&1&&(P=1-P),N=d+P*(I-d);var H,nt,X;switch(E){default:case 6:case 0:H=I,nt=N,X=d;break;case 1:H=N,nt=I,X=d;break;case 2:H=d,nt=I,X=N;break;case 3:H=d,nt=N,X=I;break;case 4:H=N,nt=d,X=I;break;case 5:H=I,nt=d,X=N;break}return[H*255,nt*255,X*255]},L.cmyk.rgb=function(g){var y=g[0]/100,d=g[1]/100,S=g[2]/100,_=g[3]/100,E,I,P;return E=1-Math.min(1,y*(1-_)+_),I=1-Math.min(1,d*(1-_)+_),P=1-Math.min(1,S*(1-_)+_),[E*255,I*255,P*255]},L.xyz.rgb=function(g){var y=g[0]/100,d=g[1]/100,S=g[2]/100,_,E,I;return _=y*3.2406+d*-1.5372+S*-.4986,E=y*-.9689+d*1.8758+S*.0415,I=y*.0557+d*-.204+S*1.057,_=_>.0031308?1.055*Math.pow(_,1/2.4)-.055:_*12.92,E=E>.0031308?1.055*Math.pow(E,1/2.4)-.055:E*12.92,I=I>.0031308?1.055*Math.pow(I,1/2.4)-.055:I*12.92,_=Math.min(Math.max(0,_),1),E=Math.min(Math.max(0,E),1),I=Math.min(Math.max(0,I),1),[_*255,E*255,I*255]},L.xyz.lab=function(g){var y=g[0],d=g[1],S=g[2],_,E,I;return y/=95.047,d/=100,S/=108.883,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,d=d>.008856?Math.pow(d,1/3):7.787*d+16/116,S=S>.008856?Math.pow(S,1/3):7.787*S+16/116,_=116*d-16,E=500*(y-d),I=200*(d-S),[_,E,I]},L.lab.xyz=function(g){var y=g[0],d=g[1],S=g[2],_,E,I;E=(y+16)/116,_=d/500+E,I=E-S/200;var P=Math.pow(E,3),N=Math.pow(_,3),H=Math.pow(I,3);return E=P>.008856?P:(E-16/116)/7.787,_=N>.008856?N:(_-16/116)/7.787,I=H>.008856?H:(I-16/116)/7.787,_*=95.047,E*=100,I*=108.883,[_,E,I]},L.lab.lch=function(g){var y=g[0],d=g[1],S=g[2],_,E,I;return _=Math.atan2(S,d),E=_*360/2/Math.PI,E<0&&(E+=360),I=Math.sqrt(d*d+S*S),[y,I,E]},L.lch.lab=function(g){var y=g[0],d=g[1],S=g[2],_,E,I;return I=S/360*2*Math.PI,_=d*Math.cos(I),E=d*Math.sin(I),[y,_,E]},L.rgb.ansi16=function(g){var y=g[0],d=g[1],S=g[2],_=1 in arguments?arguments[1]:L.rgb.hsv(g)[2];if(_=Math.round(_/50),_===0)return 30;var E=30+(Math.round(S/255)<<2|Math.round(d/255)<<1|Math.round(y/255));return _===2&&(E+=60),E},L.hsv.ansi16=function(g){return L.rgb.ansi16(L.hsv.rgb(g),g[2])},L.rgb.ansi256=function(g){var y=g[0],d=g[1],S=g[2];if(y===d&&d===S)return y<8?16:y>248?231:Math.round((y-8)/247*24)+232;var _=16+36*Math.round(y/255*5)+6*Math.round(d/255*5)+Math.round(S/255*5);return _},L.ansi16.rgb=function(g){var y=g%10;if(y===0||y===7)return g>50&&(y+=3.5),y=y/10.5*255,[y,y,y];var d=(~~(g>50)+1)*.5,S=(y&1)*d*255,_=(y>>1&1)*d*255,E=(y>>2&1)*d*255;return[S,_,E]},L.ansi256.rgb=function(g){if(g>=232){var y=(g-232)*10+8;return[y,y,y]}g-=16;var d,S=Math.floor(g/36)/5*255,_=Math.floor((d=g%36)/6)/5*255,E=d%6/5*255;return[S,_,E]},L.rgb.hex=function(g){var y=((Math.round(g[0])&255)<<16)+((Math.round(g[1])&255)<<8)+(Math.round(g[2])&255),d=y.toString(16).toUpperCase();return"000000".substring(d.length)+d},L.hex.rgb=function(g){var y=g.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!y)return[0,0,0];var d=y[0];y[0].length===3&&(d=d.split("").map(function(P){return P+P}).join(""));var S=parseInt(d,16),_=S>>16&255,E=S>>8&255,I=S&255;return[_,E,I]},L.rgb.hcg=function(g){var y=g[0]/255,d=g[1]/255,S=g[2]/255,_=Math.max(Math.max(y,d),S),E=Math.min(Math.min(y,d),S),I=_-E,P,N;return I<1?P=E/(1-I):P=0,I<=0?N=0:_===y?N=(d-S)/I%6:_===d?N=2+(S-y)/I:N=4+(y-d)/I+4,N/=6,N%=1,[N*360,I*100,P*100]},L.hsl.hcg=function(g){var y=g[1]/100,d=g[2]/100,S=1,_=0;return d<.5?S=2*y*d:S=2*y*(1-d),S<1&&(_=(d-.5*S)/(1-S)),[g[0],S*100,_*100]},L.hsv.hcg=function(g){var y=g[1]/100,d=g[2]/100,S=y*d,_=0;return S<1&&(_=(d-S)/(1-S)),[g[0],S*100,_*100]},L.hcg.rgb=function(g){var y=g[0]/360,d=g[1]/100,S=g[2]/100;if(d===0)return[S*255,S*255,S*255];var _=[0,0,0],E=y%1*6,I=E%1,P=1-I,N=0;switch(Math.floor(E)){case 0:_[0]=1,_[1]=I,_[2]=0;break;case 1:_[0]=P,_[1]=1,_[2]=0;break;case 2:_[0]=0,_[1]=1,_[2]=I;break;case 3:_[0]=0,_[1]=P,_[2]=1;break;case 4:_[0]=I,_[1]=0,_[2]=1;break;default:_[0]=1,_[1]=0,_[2]=P}return N=(1-d)*S,[(d*_[0]+N)*255,(d*_[1]+N)*255,(d*_[2]+N)*255]},L.hcg.hsv=function(g){var y=g[1]/100,d=g[2]/100,S=y+d*(1-y),_=0;return S>0&&(_=y/S),[g[0],_*100,S*100]},L.hcg.hsl=function(g){var y=g[1]/100,d=g[2]/100,S=d*(1-y)+.5*y,_=0;return S>0&&S<.5?_=y/(2*S):S>=.5&&S<1&&(_=y/(2*(1-S))),[g[0],_*100,S*100]},L.hcg.hwb=function(g){var y=g[1]/100,d=g[2]/100,S=y+d*(1-y);return[g[0],(S-y)*100,(1-S)*100]},L.hwb.hcg=function(g){var y=g[1]/100,d=g[2]/100,S=1-d,_=S-y,E=0;return _<1&&(E=(S-_)/(1-_)),[g[0],_*100,E*100]},L.apple.rgb=function(g){return[g[0]/65535*255,g[1]/65535*255,g[2]/65535*255]},L.rgb.apple=function(g){return[g[0]/255*65535,g[1]/255*65535,g[2]/255*65535]},L.gray.rgb=function(g){return[g[0]/100*255,g[0]/100*255,g[0]/100*255]},L.gray.hsl=L.gray.hsv=function(g){return[0,0,g[0]]},L.gray.hwb=function(g){return[0,100,g[0]]},L.gray.cmyk=function(g){return[0,0,0,g[0]]},L.gray.lab=function(g){return[g[0],0,0]},L.gray.hex=function(g){var y=Math.round(g[0]/100*255)&255,d=(y<<16)+(y<<8)+y,S=d.toString(16).toUpperCase();return"000000".substring(S.length)+S},L.rgb.gray=function(g){var y=(g[0]+g[1]+g[2])/3;return[y/255*100]}},12085:function(xr,U,z){var F=z(48168),j=z(4111),B={},L=Object.keys(F);function k(w){var b=function(g){return g==null?g:(arguments.length>1&&(g=Array.prototype.slice.call(arguments)),w(g))};return"conversion"in w&&(b.conversion=w.conversion),b}function D(w){var b=function(g){if(g==null)return g;arguments.length>1&&(g=Array.prototype.slice.call(arguments));var y=w(g);if(typeof y=="object")for(var d=y.length,S=0;S<d;S++)y[S]=Math.round(y[S]);return y};return"conversion"in w&&(b.conversion=w.conversion),b}L.forEach(function(w){B[w]={},Object.defineProperty(B[w],"channels",{value:F[w].channels}),Object.defineProperty(B[w],"labels",{value:F[w].labels});var b=j(w),g=Object.keys(b);g.forEach(function(y){var d=b[y];B[w][y]=D(d),B[w][y].raw=k(d)})}),xr.exports=B},39092:function(xr){"use strict";xr.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},4111:function(xr,U,z){var F=z(48168);function j(){for(var D={},w=Object.keys(F),b=w.length,g=0;g<b;g++)D[w[g]]={distance:-1,parent:null};return D}function B(D){var w=j(),b=[D];for(w[D].distance=0;b.length;)for(var g=b.pop(),y=Object.keys(F[g]),d=y.length,S=0;S<d;S++){var _=y[S],E=w[_];E.distance===-1&&(E.distance=w[g].distance+1,E.parent=g,b.unshift(_))}return w}function L(D,w){return function(b){return w(D(b))}}function k(D,w){for(var b=[w[D].parent,D],g=F[w[D].parent][D],y=w[D].parent;w[y].parent;)b.unshift(w[y].parent),g=L(F[w[y].parent][y],g),y=w[y].parent;return g.conversion=b,g}xr.exports=function(D){for(var w=B(D),b={},g=Object.keys(w),y=g.length,d=0;d<y;d++){var S=g[d],_=w[S];_.parent!==null&&(b[S]=k(S,w))}return b}},8874:function(xr){"use strict";xr.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(xr,U,z){var F=z(8874),j=z(86851),B=Object.hasOwnProperty,L=Object.create(null);for(var k in F)B.call(F,k)&&(L[F[k]]=k);var D=xr.exports={to:{},get:{}};D.get=function(g){var y=g.substring(0,3).toLowerCase(),d,S;switch(y){case"hsl":d=D.get.hsl(g),S="hsl";break;case"hwb":d=D.get.hwb(g),S="hwb";break;default:d=D.get.rgb(g),S="rgb";break}return d?{model:S,value:d}:null},D.get.rgb=function(g){if(!g)return null;var y=/^#([a-f0-9]{3,4})$/i,d=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,S=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,_=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,E=/^(\w+)$/,I=[0,0,0,1],P,N,H;if(P=g.match(d)){for(H=P[2],P=P[1],N=0;N<3;N++){var nt=N*2;I[N]=parseInt(P.slice(nt,nt+2),16)}H&&(I[3]=parseInt(H,16)/255)}else if(P=g.match(y)){for(P=P[1],H=P[3],N=0;N<3;N++)I[N]=parseInt(P[N]+P[N],16);H&&(I[3]=parseInt(H+H,16)/255)}else if(P=g.match(S)){for(N=0;N<3;N++)I[N]=parseInt(P[N+1],0);P[4]&&(P[5]?I[3]=parseFloat(P[4])*.01:I[3]=parseFloat(P[4]))}else if(P=g.match(_)){for(N=0;N<3;N++)I[N]=Math.round(parseFloat(P[N+1])*2.55);P[4]&&(P[5]?I[3]=parseFloat(P[4])*.01:I[3]=parseFloat(P[4]))}else return(P=g.match(E))?P[1]==="transparent"?[0,0,0,0]:B.call(F,P[1])?(I=F[P[1]],I[3]=1,I):null:null;for(N=0;N<3;N++)I[N]=w(I[N],0,255);return I[3]=w(I[3],0,1),I},D.get.hsl=function(g){if(!g)return null;var y=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,d=g.match(y);if(d){var S=parseFloat(d[4]),_=(parseFloat(d[1])%360+360)%360,E=w(parseFloat(d[2]),0,100),I=w(parseFloat(d[3]),0,100),P=w(isNaN(S)?1:S,0,1);return[_,E,I,P]}return null},D.get.hwb=function(g){if(!g)return null;var y=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,d=g.match(y);if(d){var S=parseFloat(d[4]),_=(parseFloat(d[1])%360+360)%360,E=w(parseFloat(d[2]),0,100),I=w(parseFloat(d[3]),0,100),P=w(isNaN(S)?1:S,0,1);return[_,E,I,P]}return null},D.to.hex=function(){var g=j(arguments);return"#"+b(g[0])+b(g[1])+b(g[2])+(g[3]<1?b(Math.round(g[3]*255)):"")},D.to.rgb=function(){var g=j(arguments);return g.length<4||g[3]===1?"rgb("+Math.round(g[0])+", "+Math.round(g[1])+", "+Math.round(g[2])+")":"rgba("+Math.round(g[0])+", "+Math.round(g[1])+", "+Math.round(g[2])+", "+g[3]+")"},D.to.rgb.percent=function(){var g=j(arguments),y=Math.round(g[0]/255*100),d=Math.round(g[1]/255*100),S=Math.round(g[2]/255*100);return g.length<4||g[3]===1?"rgb("+y+"%, "+d+"%, "+S+"%)":"rgba("+y+"%, "+d+"%, "+S+"%, "+g[3]+")"},D.to.hsl=function(){var g=j(arguments);return g.length<4||g[3]===1?"hsl("+g[0]+", "+g[1]+"%, "+g[2]+"%)":"hsla("+g[0]+", "+g[1]+"%, "+g[2]+"%, "+g[3]+")"},D.to.hwb=function(){var g=j(arguments),y="";return g.length>=4&&g[3]!==1&&(y=", "+g[3]),"hwb("+g[0]+", "+g[1]+"%, "+g[2]+"%"+y+")"},D.to.keyword=function(g){return L[g.slice(0,3)]};function w(g,y,d){return Math.min(Math.max(y,g),d)}function b(g){var y=Math.round(g).toString(16).toUpperCase();return y.length<2?"0"+y:y}},6767:function(xr,U,z){"use strict";var F=z(19818),j=z(12085),B=[].slice,L=["keyword","gray","hex"],k={};Object.keys(j).forEach(function(E){k[B.call(j[E].labels).sort().join("")]=E});var D={};function w(E,I){if(!(this instanceof w))return new w(E,I);if(I&&I in L&&(I=null),I&&!(I in j))throw new Error("Unknown model: "+I);var P,N;if(E==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(E instanceof w)this.model=E.model,this.color=E.color.slice(),this.valpha=E.valpha;else if(typeof E=="string"){var H=F.get(E);if(H===null)throw new Error("Unable to parse color from string: "+E);this.model=H.model,N=j[this.model].channels,this.color=H.value.slice(0,N),this.valpha=typeof H.value[N]=="number"?H.value[N]:1}else if(E.length){this.model=I||"rgb",N=j[this.model].channels;var nt=B.call(E,0,N);this.color=_(nt,N),this.valpha=typeof E[N]=="number"?E[N]:1}else if(typeof E=="number")E&=16777215,this.model="rgb",this.color=[E>>16&255,E>>8&255,E&255],this.valpha=1;else{this.valpha=1;var X=Object.keys(E);"alpha"in E&&(X.splice(X.indexOf("alpha"),1),this.valpha=typeof E.alpha=="number"?E.alpha:0);var Y=X.sort().join("");if(!(Y in k))throw new Error("Unable to parse color from object: "+JSON.stringify(E));this.model=k[Y];var Z=j[this.model].labels,J=[];for(P=0;P<Z.length;P++)J.push(E[Z[P]]);this.color=_(J)}if(D[this.model])for(N=j[this.model].channels,P=0;P<N;P++){var it=D[this.model][P];it&&(this.color[P]=it(this.color[P]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}w.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(E){var I=this.model in F.to?this:this.rgb();I=I.round(typeof E=="number"?E:1);var P=I.valpha===1?I.color:I.color.concat(this.valpha);return F.to[I.model](P)},percentString:function(E){var I=this.rgb().round(typeof E=="number"?E:1),P=I.valpha===1?I.color:I.color.concat(this.valpha);return F.to.rgb.percent(P)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var E={},I=j[this.model].channels,P=j[this.model].labels,N=0;N<I;N++)E[P[N]]=this.color[N];return this.valpha!==1&&(E.alpha=this.valpha),E},unitArray:function(){var E=this.rgb().color;return E[0]/=255,E[1]/=255,E[2]/=255,this.valpha!==1&&E.push(this.valpha),E},unitObject:function(){var E=this.rgb().object();return E.r/=255,E.g/=255,E.b/=255,this.valpha!==1&&(E.alpha=this.valpha),E},round:function(E){return E=Math.max(E||0,0),new w(this.color.map(g(E)).concat(this.valpha),this.model)},alpha:function(E){return arguments.length?new w(this.color.concat(Math.max(0,Math.min(1,E))),this.model):this.valpha},red:y("rgb",0,d(255)),green:y("rgb",1,d(255)),blue:y("rgb",2,d(255)),hue:y(["hsl","hsv","hsl","hwb","hcg"],0,function(E){return(E%360+360)%360}),saturationl:y("hsl",1,d(100)),lightness:y("hsl",2,d(100)),saturationv:y("hsv",1,d(100)),value:y("hsv",2,d(100)),chroma:y("hcg",1,d(100)),gray:y("hcg",2,d(100)),white:y("hwb",1,d(100)),wblack:y("hwb",2,d(100)),cyan:y("cmyk",0,d(100)),magenta:y("cmyk",1,d(100)),yellow:y("cmyk",2,d(100)),black:y("cmyk",3,d(100)),x:y("xyz",0,d(100)),y:y("xyz",1,d(100)),z:y("xyz",2,d(100)),l:y("lab",0,d(100)),a:y("lab",1),b:y("lab",2),keyword:function(E){return arguments.length?new w(E):j[this.model].keyword(this.color)},hex:function(E){return arguments.length?new w(E):F.to.hex(this.rgb().round().color)},rgbNumber:function(){var E=this.rgb().color;return(E[0]&255)<<16|(E[1]&255)<<8|E[2]&255},luminosity:function(){for(var E=this.rgb().color,I=[],P=0;P<E.length;P++){var N=E[P]/255;I[P]=N<=.03928?N/12.92:Math.pow((N+.055)/1.055,2.4)}return .2126*I[0]+.7152*I[1]+.0722*I[2]},contrast:function(E){var I=this.luminosity(),P=E.luminosity();return I>P?(I+.05)/(P+.05):(P+.05)/(I+.05)},level:function(E){var I=this.contrast(E);return I>=7.1?"AAA":I>=4.5?"AA":""},isDark:function(){var E=this.rgb().color,I=(E[0]*299+E[1]*587+E[2]*114)/1e3;return I<128},isLight:function(){return!this.isDark()},negate:function(){for(var E=this.rgb(),I=0;I<3;I++)E.color[I]=255-E.color[I];return E},lighten:function(E){var I=this.hsl();return I.color[2]+=I.color[2]*E,I},darken:function(E){var I=this.hsl();return I.color[2]-=I.color[2]*E,I},saturate:function(E){var I=this.hsl();return I.color[1]+=I.color[1]*E,I},desaturate:function(E){var I=this.hsl();return I.color[1]-=I.color[1]*E,I},whiten:function(E){var I=this.hwb();return I.color[1]+=I.color[1]*E,I},blacken:function(E){var I=this.hwb();return I.color[2]+=I.color[2]*E,I},grayscale:function(){var E=this.rgb().color,I=E[0]*.3+E[1]*.59+E[2]*.11;return w.rgb(I,I,I)},fade:function(E){return this.alpha(this.valpha-this.valpha*E)},opaquer:function(E){return this.alpha(this.valpha+this.valpha*E)},rotate:function(E){var I=this.hsl(),P=I.color[0];return P=(P+E)%360,P=P<0?360+P:P,I.color[0]=P,I},mix:function(E,I){if(!E||!E.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof E);var P=E.rgb(),N=this.rgb(),H=I===void 0?.5:I,nt=2*H-1,X=P.alpha()-N.alpha(),Y=((nt*X===-1?nt:(nt+X)/(1+nt*X))+1)/2,Z=1-Y;return w.rgb(Y*P.red()+Z*N.red(),Y*P.green()+Z*N.green(),Y*P.blue()+Z*N.blue(),P.alpha()*H+N.alpha()*(1-H))}},Object.keys(j).forEach(function(E){if(L.indexOf(E)===-1){var I=j[E].channels;w.prototype[E]=function(){if(this.model===E)return new w(this);if(arguments.length)return new w(arguments,E);var P=typeof arguments[I]=="number"?I:this.valpha;return new w(S(j[this.model][E].raw(this.color)).concat(P),E)},w[E]=function(P){return typeof P=="number"&&(P=_(B.call(arguments),I)),new w(P,E)}}});function b(E,I){return Number(E.toFixed(I))}function g(E){return function(I){return b(I,E)}}function y(E,I,P){return E=Array.isArray(E)?E:[E],E.forEach(function(N){(D[N]||(D[N]=[]))[I]=P}),E=E[0],function(N){var H;return arguments.length?(P&&(N=P(N)),H=this[E](),H.color[I]=N,H):(H=this[E]().color[I],P&&(H=P(H)),H)}}function d(E){return function(I){return Math.max(0,Math.min(E,I))}}function S(E){return Array.isArray(E)?E:[E]}function _(E,I){for(var P=0;P<I;P++)typeof E[P]!="number"&&(E[P]=0);return E}xr.exports=w},71829:function(xr,U,z){"use strict";z.r(U),z.d(U,{quadtree:function(){return F.Z}});var F=z(47148)},47148:function(xr,U,z){"use strict";z.d(U,{Z:function(){return nt}});function F(J){const it=+this._x.call(null,J),tt=+this._y.call(null,J);return j(this.cover(it,tt),it,tt,J)}function j(J,it,tt,ut){if(isNaN(it)||isNaN(tt))return J;var vt,pt=J._root,Dt={data:ut},Ot=J._x0,te=J._y0,Gt=J._x1,K=J._y1,p,at,ht,wt,Mt,Ut,Vt,Me;if(!pt)return J._root=Dt,J;for(;pt.length;)if((Mt=it>=(p=(Ot+Gt)/2))?Ot=p:Gt=p,(Ut=tt>=(at=(te+K)/2))?te=at:K=at,vt=pt,!(pt=pt[Vt=Ut<<1|Mt]))return vt[Vt]=Dt,J;if(ht=+J._x.call(null,pt.data),wt=+J._y.call(null,pt.data),it===ht&&tt===wt)return Dt.next=pt,vt?vt[Vt]=Dt:J._root=Dt,J;do vt=vt?vt[Vt]=new Array(4):J._root=new Array(4),(Mt=it>=(p=(Ot+Gt)/2))?Ot=p:Gt=p,(Ut=tt>=(at=(te+K)/2))?te=at:K=at;while((Vt=Ut<<1|Mt)===(Me=(wt>=at)<<1|ht>=p));return vt[Me]=pt,vt[Vt]=Dt,J}function B(J){var it,tt,ut=J.length,vt,pt,Dt=new Array(ut),Ot=new Array(ut),te=1/0,Gt=1/0,K=-1/0,p=-1/0;for(tt=0;tt<ut;++tt)isNaN(vt=+this._x.call(null,it=J[tt]))||isNaN(pt=+this._y.call(null,it))||(Dt[tt]=vt,Ot[tt]=pt,vt<te&&(te=vt),vt>K&&(K=vt),pt<Gt&&(Gt=pt),pt>p&&(p=pt));if(te>K||Gt>p)return this;for(this.cover(te,Gt).cover(K,p),tt=0;tt<ut;++tt)j(this,Dt[tt],Ot[tt],J[tt]);return this}function L(J,it){if(isNaN(J=+J)||isNaN(it=+it))return this;var tt=this._x0,ut=this._y0,vt=this._x1,pt=this._y1;if(isNaN(tt))vt=(tt=Math.floor(J))+1,pt=(ut=Math.floor(it))+1;else{for(var Dt=vt-tt||1,Ot=this._root,te,Gt;tt>J||J>=vt||ut>it||it>=pt;)switch(Gt=(it<ut)<<1|J<tt,te=new Array(4),te[Gt]=Ot,Ot=te,Dt*=2,Gt){case 0:vt=tt+Dt,pt=ut+Dt;break;case 1:tt=vt-Dt,pt=ut+Dt;break;case 2:vt=tt+Dt,ut=pt-Dt;break;case 3:tt=vt-Dt,ut=pt-Dt;break}this._root&&this._root.length&&(this._root=Ot)}return this._x0=tt,this._y0=ut,this._x1=vt,this._y1=pt,this}function k(){var J=[];return this.visit(function(it){if(!it.length)do J.push(it.data);while(it=it.next)}),J}function D(J){return arguments.length?this.cover(+J[0][0],+J[0][1]).cover(+J[1][0],+J[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function w(J,it,tt,ut,vt){this.node=J,this.x0=it,this.y0=tt,this.x1=ut,this.y1=vt}function b(J,it,tt){var ut,vt=this._x0,pt=this._y0,Dt,Ot,te,Gt,K=this._x1,p=this._y1,at=[],ht=this._root,wt,Mt;for(ht&&at.push(new w(ht,vt,pt,K,p)),tt==null?tt=1/0:(vt=J-tt,pt=it-tt,K=J+tt,p=it+tt,tt*=tt);wt=at.pop();)if(!(!(ht=wt.node)||(Dt=wt.x0)>K||(Ot=wt.y0)>p||(te=wt.x1)<vt||(Gt=wt.y1)<pt))if(ht.length){var Ut=(Dt+te)/2,Vt=(Ot+Gt)/2;at.push(new w(ht[3],Ut,Vt,te,Gt),new w(ht[2],Dt,Vt,Ut,Gt),new w(ht[1],Ut,Ot,te,Vt),new w(ht[0],Dt,Ot,Ut,Vt)),(Mt=(it>=Vt)<<1|J>=Ut)&&(wt=at[at.length-1],at[at.length-1]=at[at.length-1-Mt],at[at.length-1-Mt]=wt)}else{var Me=J-+this._x.call(null,ht.data),Wt=it-+this._y.call(null,ht.data),ae=Me*Me+Wt*Wt;if(ae<tt){var he=Math.sqrt(tt=ae);vt=J-he,pt=it-he,K=J+he,p=it+he,ut=ht.data}}return ut}function g(J){if(isNaN(K=+this._x.call(null,J))||isNaN(p=+this._y.call(null,J)))return this;var it,tt=this._root,ut,vt,pt,Dt=this._x0,Ot=this._y0,te=this._x1,Gt=this._y1,K,p,at,ht,wt,Mt,Ut,Vt;if(!tt)return this;if(tt.length)for(;;){if((wt=K>=(at=(Dt+te)/2))?Dt=at:te=at,(Mt=p>=(ht=(Ot+Gt)/2))?Ot=ht:Gt=ht,it=tt,!(tt=tt[Ut=Mt<<1|wt]))return this;if(!tt.length)break;(it[Ut+1&3]||it[Ut+2&3]||it[Ut+3&3])&&(ut=it,Vt=Ut)}for(;tt.data!==J;)if(vt=tt,!(tt=tt.next))return this;return(pt=tt.next)&&delete tt.next,vt?(pt?vt.next=pt:delete vt.next,this):it?(pt?it[Ut]=pt:delete it[Ut],(tt=it[0]||it[1]||it[2]||it[3])&&tt===(it[3]||it[2]||it[1]||it[0])&&!tt.length&&(ut?ut[Vt]=tt:this._root=tt),this):(this._root=pt,this)}function y(J){for(var it=0,tt=J.length;it<tt;++it)this.remove(J[it]);return this}function d(){return this._root}function S(){var J=0;return this.visit(function(it){if(!it.length)do++J;while(it=it.next)}),J}function _(J){var it=[],tt,ut=this._root,vt,pt,Dt,Ot,te;for(ut&&it.push(new w(ut,this._x0,this._y0,this._x1,this._y1));tt=it.pop();)if(!J(ut=tt.node,pt=tt.x0,Dt=tt.y0,Ot=tt.x1,te=tt.y1)&&ut.length){var Gt=(pt+Ot)/2,K=(Dt+te)/2;(vt=ut[3])&&it.push(new w(vt,Gt,K,Ot,te)),(vt=ut[2])&&it.push(new w(vt,pt,K,Gt,te)),(vt=ut[1])&&it.push(new w(vt,Gt,Dt,Ot,K)),(vt=ut[0])&&it.push(new w(vt,pt,Dt,Gt,K))}return this}function E(J){var it=[],tt=[],ut;for(this._root&&it.push(new w(this._root,this._x0,this._y0,this._x1,this._y1));ut=it.pop();){var vt=ut.node;if(vt.length){var pt,Dt=ut.x0,Ot=ut.y0,te=ut.x1,Gt=ut.y1,K=(Dt+te)/2,p=(Ot+Gt)/2;(pt=vt[0])&&it.push(new w(pt,Dt,Ot,K,p)),(pt=vt[1])&&it.push(new w(pt,K,Ot,te,p)),(pt=vt[2])&&it.push(new w(pt,Dt,p,K,Gt)),(pt=vt[3])&&it.push(new w(pt,K,p,te,Gt))}tt.push(ut)}for(;ut=tt.pop();)J(ut.node,ut.x0,ut.y0,ut.x1,ut.y1);return this}function I(J){return J[0]}function P(J){return arguments.length?(this._x=J,this):this._x}function N(J){return J[1]}function H(J){return arguments.length?(this._y=J,this):this._y}function nt(J,it,tt){var ut=new X(it==null?I:it,tt==null?N:tt,NaN,NaN,NaN,NaN);return J==null?ut:ut.addAll(J)}function X(J,it,tt,ut,vt,pt){this._x=J,this._y=it,this._x0=tt,this._y0=ut,this._x1=vt,this._y1=pt,this._root=void 0}function Y(J){for(var it={data:J.data},tt=it;J=J.next;)tt=tt.next={data:J.data};return it}var Z=nt.prototype=X.prototype;Z.copy=function(){var J=new X(this._x,this._y,this._x0,this._y0,this._x1,this._y1),it=this._root,tt,ut;if(!it)return J;if(!it.length)return J._root=Y(it),J;for(tt=[{source:it,target:J._root=new Array(4)}];it=tt.pop();)for(var vt=0;vt<4;++vt)(ut=it.source[vt])&&(ut.length?tt.push({source:ut,target:it.target[vt]=new Array(4)}):it.target[vt]=Y(ut));return J},Z.add=F,Z.addAll=B,Z.cover=L,Z.data=k,Z.extent=D,Z.find=b,Z.remove=g,Z.removeAll=y,Z.root=d,Z.size=S,Z.visit=_,Z.visitAfter=E,Z.x=P,Z.y=H},31969:function(xr,U,z){"use strict";z.r(U),z.d(U,{BRIDGE_GRAPH_NAME:function(){return k},GraphType:function(){return b},HierarchyNodeType:function(){return g},InclusionType:function(){return w},LAYOUT_CONFIG:function(){return F},NodeType:function(){return D},ROOT_NAME:function(){return L},buildGraph:function(){return Tr},flatGraph:function(){return Zr},getEdges:function(){return en},mergeConfig:function(){return j}});const F={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function j(v={},M=F){var G,$,ft,ct;const yt=JSON.parse(JSON.stringify(M)),Et=((G=v==null?void 0:v.graph)===null||G===void 0?void 0:G.meta)||{},It=(($=v==null?void 0:v.subScene)===null||$===void 0?void 0:$.meta)||{},zt=((ft=v==null?void 0:v.nodeSize)===null||ft===void 0?void 0:ft.meta)||{},Qt=((ct=v==null?void 0:v.nodeSize)===null||ct===void 0?void 0:ct.node)||{},qt=yt.nodeSize.bridge;return{graph:{meta:Object.assign(yt.graph.meta,Et)},subScene:{meta:Object.assign(yt.subScene.meta,It)},nodeSize:{meta:Object.assign(yt.nodeSize.meta,zt),node:Object.assign(yt.nodeSize.node,Qt),bridge:qt}}}function B(v){return`\u25EC${v}\u25EC`}const L=B("ROOT"),k=B("BRIDGE_GRAPH");var D,w,b,g;(function(v){v[v.META=0]="META",v[v.NODE=1]="NODE",v[v.BRIDGE=2]="BRIDGE"})(D||(D={})),function(v){v[v.INCLUDE=0]="INCLUDE",v[v.EXCLUDE=1]="EXCLUDE",v[v.UNSPECIFIED=2]="UNSPECIFIED"}(w||(w={})),function(v){v[v.META=0]="META",v[v.CORE=1]="CORE",v[v.BRIDGE=2]="BRIDGE"}(b||(b={})),function(v){v[v.META=0]="META",v[v.OP=1]="OP",v[v.SERIES=2]="SERIES"}(g||(g={}));var y=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof z.g!="undefined"?z.g:typeof self!="undefined"?self:{};function d(v,M){return v(M={exports:{}},M.exports),M.exports}var S=function(){this.__data__=[],this.size=0},_=function(v,M){return v===M||v!=v&&M!=M},E=function(v,M){for(var G=v.length;G--;)if(_(v[G][0],M))return G;return-1},I=Array.prototype.splice,P=function(v){var M=this.__data__,G=E(M,v);return!(G<0)&&(G==M.length-1?M.pop():I.call(M,G,1),--this.size,!0)},N=function(v){var M=this.__data__,G=E(M,v);return G<0?void 0:M[G][1]},H=function(v){return E(this.__data__,v)>-1},nt=function(v,M){var G=this.__data__,$=E(G,v);return $<0?(++this.size,G.push([v,M])):G[$][1]=M,this};function X(v){var M=-1,G=v==null?0:v.length;for(this.clear();++M<G;){var $=v[M];this.set($[0],$[1])}}X.prototype.clear=S,X.prototype.delete=P,X.prototype.get=N,X.prototype.has=H,X.prototype.set=nt;var Y=X,Z=function(){this.__data__=new Y,this.size=0},J=function(v){var M=this.__data__,G=M.delete(v);return this.size=M.size,G},it=function(v){return this.__data__.get(v)},tt=function(v){return this.__data__.has(v)},ut=typeof y=="object"&&y&&y.Object===Object&&y,vt=typeof self=="object"&&self&&self.Object===Object&&self,pt=ut||vt||Function("return this")(),Dt=pt.Symbol,Ot=Object.prototype,te=Ot.hasOwnProperty,Gt=Ot.toString,K=Dt?Dt.toStringTag:void 0,p=function(v){var M=te.call(v,K),G=v[K];try{v[K]=void 0;var $=!0}catch(ct){}var ft=Gt.call(v);return $&&(M?v[K]=G:delete v[K]),ft},at=Object.prototype.toString,ht=function(v){return at.call(v)},wt=Dt?Dt.toStringTag:void 0,Mt=function(v){return v==null?v===void 0?"[object Undefined]":"[object Null]":wt&&wt in Object(v)?p(v):ht(v)},Ut=function(v){var M=typeof v;return v!=null&&(M=="object"||M=="function")},Vt,Me=function(v){if(!Ut(v))return!1;var M=Mt(v);return M=="[object Function]"||M=="[object GeneratorFunction]"||M=="[object AsyncFunction]"||M=="[object Proxy]"},Wt=pt["__core-js_shared__"],ae=(Vt=/[^.]+$/.exec(Wt&&Wt.keys&&Wt.keys.IE_PROTO||""))?"Symbol(src)_1."+Vt:"",he=function(v){return!!ae&&ae in v},Se=Function.prototype.toString,xe=function(v){if(v!=null){try{return Se.call(v)}catch(M){}try{return v+""}catch(M){}}return""},Bt=/^\[object .+?Constructor\]$/,fe=Function.prototype,Le=Object.prototype,jt=fe.toString,oe=Le.hasOwnProperty,Te=RegExp("^"+jt.call(oe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),se=function(v){return!(!Ut(v)||he(v))&&(Me(v)?Te:Bt).test(xe(v))},Ie=function(v,M){return v==null?void 0:v[M]},Pe=function(v,M){var G=Ie(v,M);return se(G)?G:void 0},Lt=Pe(pt,"Map"),Je=Pe(Object,"create"),Lr=function(){this.__data__=Je?Je(null):{},this.size=0},Vr=function(v){var M=this.has(v)&&delete this.__data__[v];return this.size-=M?1:0,M},Xr=Object.prototype.hasOwnProperty,Mn=function(v){var M=this.__data__;if(Je){var G=M[v];return G==="__lodash_hash_undefined__"?void 0:G}return Xr.call(M,v)?M[v]:void 0},Hr=Object.prototype.hasOwnProperty,Cn=function(v){var M=this.__data__;return Je?M[v]!==void 0:Hr.call(M,v)},Zn=function(v,M){var G=this.__data__;return this.size+=this.has(v)?0:1,G[v]=Je&&M===void 0?"__lodash_hash_undefined__":M,this};function Un(v){var M=-1,G=v==null?0:v.length;for(this.clear();++M<G;){var $=v[M];this.set($[0],$[1])}}Un.prototype.clear=Lr,Un.prototype.delete=Vr,Un.prototype.get=Mn,Un.prototype.has=Cn,Un.prototype.set=Zn;var mn=Un,rr=function(){this.size=0,this.__data__={hash:new mn,map:new(Lt||Y),string:new mn}},sr=function(v){var M=typeof v;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?v!=="__proto__":v===null},lr=function(v,M){var G=v.__data__;return sr(M)?G[typeof M=="string"?"string":"hash"]:G.map},zr=function(v){var M=lr(this,v).delete(v);return this.size-=M?1:0,M},fn=function(v){return lr(this,v).get(v)},wn=function(v){return lr(this,v).has(v)},ln=function(v,M){var G=lr(this,v),$=G.size;return G.set(v,M),this.size+=G.size==$?0:1,this};function $n(v){var M=-1,G=v==null?0:v.length;for(this.clear();++M<G;){var $=v[M];this.set($[0],$[1])}}$n.prototype.clear=rr,$n.prototype.delete=zr,$n.prototype.get=fn,$n.prototype.has=wn,$n.prototype.set=ln;var Jn=$n,Da=function(v,M){var G=this.__data__;if(G instanceof Y){var $=G.__data__;if(!Lt||$.length<199)return $.push([v,M]),this.size=++G.size,this;G=this.__data__=new Jn($)}return G.set(v,M),this.size=G.size,this};function bn(v){var M=this.__data__=new Y(v);this.size=M.size}bn.prototype.clear=Z,bn.prototype.delete=J,bn.prototype.get=it,bn.prototype.has=tt,bn.prototype.set=Da;var Hn=bn,Wn=function(v,M){for(var G=-1,$=v==null?0:v.length;++G<$&&M(v[G],G,v)!==!1;);return v},Bn=function(){try{var v=Pe(Object,"defineProperty");return v({},"",{}),v}catch(M){}}(),ya=function(v,M,G){M=="__proto__"&&Bn?Bn(v,M,{configurable:!0,enumerable:!0,value:G,writable:!0}):v[M]=G},q=Object.prototype.hasOwnProperty,Ve=function(v,M,G){var $=v[M];q.call(v,M)&&_($,G)&&(G!==void 0||M in v)||ya(v,M,G)},Ee=function(v,M,G,$){var ft=!G;G||(G={});for(var ct=-1,yt=M.length;++ct<yt;){var Et=M[ct],It=$?$(G[Et],v[Et],Et,G,v):void 0;It===void 0&&(It=v[Et]),ft?ya(G,Et,It):Ve(G,Et,It)}return G},nr=function(v,M){for(var G=-1,$=Array(v);++G<v;)$[G]=M(G);return $},ar=function(v){return v!=null&&typeof v=="object"},Ur=function(v){return ar(v)&&Mt(v)=="[object Arguments]"},Nr=Object.prototype,gn=Nr.hasOwnProperty,hn=Nr.propertyIsEnumerable,pn=Ur(function(){return arguments}())?Ur:function(v){return ar(v)&&gn.call(v,"callee")&&!hn.call(v,"callee")},gt=Array.isArray,bt=function(){return!1},W=d(function(v,M){var G=M&&!M.nodeType&&M,$=G&&v&&!v.nodeType&&v,ft=$&&$.exports===G?pt.Buffer:void 0,ct=(ft?ft.isBuffer:void 0)||bt;v.exports=ct}),T=/^(?:0|[1-9]\d*)$/,A=function(v,M){var G=typeof v;return!!(M=M==null?9007199254740991:M)&&(G=="number"||G!="symbol"&&T.test(v))&&v>-1&&v%1==0&&v<M},et=function(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=9007199254740991},_t={};_t["[object Float32Array]"]=_t["[object Float64Array]"]=_t["[object Int8Array]"]=_t["[object Int16Array]"]=_t["[object Int32Array]"]=_t["[object Uint8Array]"]=_t["[object Uint8ClampedArray]"]=_t["[object Uint16Array]"]=_t["[object Uint32Array]"]=!0,_t["[object Arguments]"]=_t["[object Array]"]=_t["[object ArrayBuffer]"]=_t["[object Boolean]"]=_t["[object DataView]"]=_t["[object Date]"]=_t["[object Error]"]=_t["[object Function]"]=_t["[object Map]"]=_t["[object Number]"]=_t["[object Object]"]=_t["[object RegExp]"]=_t["[object Set]"]=_t["[object String]"]=_t["[object WeakMap]"]=!1;var Xt=function(v){return ar(v)&&et(v.length)&&!!_t[Mt(v)]},Rt=function(v){return function(M){return v(M)}},ee=d(function(v,M){var G=M&&!M.nodeType&&M,$=G&&v&&!v.nodeType&&v,ft=$&&$.exports===G&&ut.process,ct=function(){try{var yt=$&&$.require&&$.require("util").types;return yt||ft&&ft.binding&&ft.binding("util")}catch(Et){}}();v.exports=ct}),Ge=ee&&ee.isTypedArray,De=Ge?Rt(Ge):Xt,fr=Object.prototype.hasOwnProperty,jr=function(v,M){var G=gt(v),$=!G&&pn(v),ft=!G&&!$&&W(v),ct=!G&&!$&&!ft&&De(v),yt=G||$||ft||ct,Et=yt?nr(v.length,String):[],It=Et.length;for(var zt in v)!M&&!fr.call(v,zt)||yt&&(zt=="length"||ft&&(zt=="offset"||zt=="parent")||ct&&(zt=="buffer"||zt=="byteLength"||zt=="byteOffset")||A(zt,It))||Et.push(zt);return Et},Sr=Object.prototype,vn=function(v){var M=v&&v.constructor;return v===(typeof M=="function"&&M.prototype||Sr)},Xn=function(v,M){return function(G){return v(M(G))}},je=Xn(Object.keys,Object),Er=Object.prototype.hasOwnProperty,Pr=function(v){if(!vn(v))return je(v);var M=[];for(var G in Object(v))Er.call(v,G)&&G!="constructor"&&M.push(G);return M},Kr=function(v){return v!=null&&et(v.length)&&!Me(v)},$t=function(v){return Kr(v)?jr(v):Pr(v)},Pt=function(v,M){return v&&Ee(M,$t(M),v)},re=function(v){var M=[];if(v!=null)for(var G in Object(v))M.push(G);return M},be=Object.prototype.hasOwnProperty,pe=function(v){if(!Ut(v))return re(v);var M=vn(v),G=[];for(var $ in v)($!="constructor"||!M&&be.call(v,$))&&G.push($);return G},ke=function(v){return Kr(v)?jr(v,!0):pe(v)},or=function(v,M){return v&&Ee(M,ke(M),v)},cr=d(function(v,M){var G=M&&!M.nodeType&&M,$=G&&v&&!v.nodeType&&v,ft=$&&$.exports===G?pt.Buffer:void 0,ct=ft?ft.allocUnsafe:void 0;v.exports=function(yt,Et){if(Et)return yt.slice();var It=yt.length,zt=ct?ct(It):new yt.constructor(It);return yt.copy(zt),zt}}),rn=function(v,M){var G=-1,$=v.length;for(M||(M=Array($));++G<$;)M[G]=v[G];return M},Nn=function(v,M){for(var G=-1,$=v==null?0:v.length,ft=0,ct=[];++G<$;){var yt=v[G];M(yt,G,v)&&(ct[ft++]=yt)}return ct},An=function(){return[]},la=Object.prototype.propertyIsEnumerable,aa=Object.getOwnPropertySymbols,Ca=aa?function(v){return v==null?[]:(v=Object(v),Nn(aa(v),function(M){return la.call(v,M)}))}:An,Qa=function(v,M){return Ee(v,Ca(v),M)},Za=function(v,M){for(var G=-1,$=M.length,ft=v.length;++G<$;)v[ft+G]=M[G];return v},Xa=Xn(Object.getPrototypeOf,Object),Bo=Object.getOwnPropertySymbols?function(v){for(var M=[];v;)Za(M,Ca(v)),v=Xa(v);return M}:An,Ai=function(v,M){return Ee(v,Bo(v),M)},xi=function(v,M,G){var $=M(v);return gt(v)?$:Za($,G(v))},po=function(v){return xi(v,$t,Ca)},ro=function(v){return xi(v,ke,Bo)},bo=Pe(pt,"DataView"),$o=Pe(pt,"Promise"),Ia=Pe(pt,"Set"),zo=Pe(pt,"WeakMap"),ms=xe(bo),Oa=xe(Lt),qo=xe($o),Uo=xe(Ia),Qo=xe(zo),no=Mt;(bo&&no(new bo(new ArrayBuffer(1)))!="[object DataView]"||Lt&&no(new Lt)!="[object Map]"||$o&&no($o.resolve())!="[object Promise]"||Ia&&no(new Ia)!="[object Set]"||zo&&no(new zo)!="[object WeakMap]")&&(no=function(v){var M=Mt(v),G=M=="[object Object]"?v.constructor:void 0,$=G?xe(G):"";if($)switch($){case ms:return"[object DataView]";case Oa:return"[object Map]";case qo:return"[object Promise]";case Uo:return"[object Set]";case Qo:return"[object WeakMap]"}return M});var Eo=no,Us=Object.prototype.hasOwnProperty,Qs=function(v){var M=v.length,G=new v.constructor(M);return M&&typeof v[0]=="string"&&Us.call(v,"index")&&(G.index=v.index,G.input=v.input),G},ki=pt.Uint8Array,ao=function(v){var M=new v.constructor(v.byteLength);return new ki(M).set(new ki(v)),M},Ts=function(v,M){var G=M?ao(v.buffer):v.buffer;return new v.constructor(G,v.byteOffset,v.byteLength)},Ws=/\w*$/,Po=function(v){var M=new v.constructor(v.source,Ws.exec(v));return M.lastIndex=v.lastIndex,M},wo=Dt?Dt.prototype:void 0,Xs=wo?wo.valueOf:void 0,xs=function(v){return Xs?Object(Xs.call(v)):{}},Ys=function(v,M){var G=M?ao(v.buffer):v.buffer;return new v.constructor(G,v.byteOffset,v.length)},qn=function(v,M,G){var $=v.constructor;switch(M){case"[object ArrayBuffer]":return ao(v);case"[object Boolean]":case"[object Date]":return new $(+v);case"[object DataView]":return Ts(v,G);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ys(v,G);case"[object Map]":return new $;case"[object Number]":case"[object String]":return new $(v);case"[object RegExp]":return Po(v);case"[object Set]":return new $;case"[object Symbol]":return xs(v)}},io=Object.create,_o=function(){function v(){}return function(M){if(!Ut(M))return{};if(io)return io(M);v.prototype=M;var G=new v;return v.prototype=void 0,G}}(),Ti=function(v){return typeof v.constructor!="function"||vn(v)?{}:_o(Xa(v))},bs=function(v){return ar(v)&&Eo(v)=="[object Map]"},Is=ee&&ee.isMap,Ri=Is?Rt(Is):bs,fs=function(v){return ar(v)&&Eo(v)=="[object Set]"},Os=ee&&ee.isSet,Wo=Os?Rt(Os):fs,xn={};xn["[object Arguments]"]=xn["[object Array]"]=xn["[object ArrayBuffer]"]=xn["[object DataView]"]=xn["[object Boolean]"]=xn["[object Date]"]=xn["[object Float32Array]"]=xn["[object Float64Array]"]=xn["[object Int8Array]"]=xn["[object Int16Array]"]=xn["[object Int32Array]"]=xn["[object Map]"]=xn["[object Number]"]=xn["[object Object]"]=xn["[object RegExp]"]=xn["[object Set]"]=xn["[object String]"]=xn["[object Symbol]"]=xn["[object Uint8Array]"]=xn["[object Uint8ClampedArray]"]=xn["[object Uint16Array]"]=xn["[object Uint32Array]"]=!0,xn["[object Error]"]=xn["[object Function]"]=xn["[object WeakMap]"]=!1;var cs=function v(M,G,$,ft,ct,yt){var Et,It=1&G,zt=2&G,Qt=4&G;if($&&(Et=ct?$(M,ft,ct,yt):$(M)),Et!==void 0)return Et;if(!Ut(M))return M;var qt=gt(M);if(qt){if(Et=Qs(M),!It)return rn(M,Et)}else{var _e=Eo(M),Ye=_e=="[object Function]"||_e=="[object GeneratorFunction]";if(W(M))return cr(M,It);if(_e=="[object Object]"||_e=="[object Arguments]"||Ye&&!ct){if(Et=zt||Ye?{}:Ti(M),!It)return zt?Ai(M,or(Et,M)):Qa(M,Pt(Et,M))}else{if(!xn[_e])return ct?M:{};Et=qn(M,_e,It)}}yt||(yt=new Hn);var Cr=yt.get(M);if(Cr)return Cr;yt.set(M,Et),Wo(M)?M.forEach(function(er){Et.add(v(er,G,$,er,M,yt))}):Ri(M)&&M.forEach(function(er,tr){Et.set(tr,v(er,G,$,tr,M,yt))});var $e=qt?void 0:(Qt?zt?ro:po:zt?ke:$t)(M);return Wn($e||M,function(er,tr){$e&&(er=M[tr=er]),Ve(Et,tr,v(er,G,$,tr,M,yt))}),Et},ko=function(v){return cs(v,4)},oo=function(v){return function(){return v}},Jo=function(v){return function(M,G,$){for(var ft=-1,ct=Object(M),yt=$(M),Et=yt.length;Et--;){var It=yt[v?Et:++ft];if(G(ct[It],It,ct)===!1)break}return M}}(),Es=function(v,M){return v&&Jo(v,M,$t)},Hi=function(v,M){return function(G,$){if(G==null)return G;if(!Kr(G))return v(G,$);for(var ft=G.length,ct=M?ft:-1,yt=Object(G);(M?ct--:++ct<ft)&&$(yt[ct],ct,yt)!==!1;);return G}}(Es),So=function(v){return v},Ii=function(v){return typeof v=="function"?v:So},yo=function(v,M){return(gt(v)?Wn:Hi)(v,Ii(M))},so=yo,ts=function(v,M){var G=[];return Hi(v,function($,ft,ct){M($,ft,ct)&&G.push($)}),G},es=function(v){return this.__data__.set(v,"__lodash_hash_undefined__"),this},Ro=function(v){return this.__data__.has(v)};function ls(v){var M=-1,G=v==null?0:v.length;for(this.__data__=new Jn;++M<G;)this.add(v[M])}ls.prototype.add=ls.prototype.push=es,ls.prototype.has=Ro;var Xo=ls,Yo=function(v,M){for(var G=-1,$=v==null?0:v.length;++G<$;)if(M(v[G],G,v))return!0;return!1},Fo=function(v,M){return v.has(M)},za=function(v,M,G,$,ft,ct){var yt=1&G,Et=v.length,It=M.length;if(Et!=It&&!(yt&&It>Et))return!1;var zt=ct.get(v),Qt=ct.get(M);if(zt&&Qt)return zt==M&&Qt==v;var qt=-1,_e=!0,Ye=2&G?new Xo:void 0;for(ct.set(v,M),ct.set(M,v);++qt<Et;){var Cr=v[qt],$e=M[qt];if($)var er=yt?$($e,Cr,qt,M,v,ct):$(Cr,$e,qt,v,M,ct);if(er!==void 0){if(er)continue;_e=!1;break}if(Ye){if(!Yo(M,function(tr,$r){if(!Fo(Ye,$r)&&(Cr===tr||ft(Cr,tr,G,$,ct)))return Ye.push($r)})){_e=!1;break}}else if(Cr!==$e&&!ft(Cr,$e,G,$,ct)){_e=!1;break}}return ct.delete(v),ct.delete(M),_e},Fi=function(v){var M=-1,G=Array(v.size);return v.forEach(function($,ft){G[++M]=[ft,$]}),G},uo=function(v){var M=-1,G=Array(v.size);return v.forEach(function($){G[++M]=$}),G},Na=Dt?Dt.prototype:void 0,Mo=Na?Na.valueOf:void 0,rs=function(v,M,G,$,ft,ct,yt){switch(G){case"[object DataView]":if(v.byteLength!=M.byteLength||v.byteOffset!=M.byteOffset)return!1;v=v.buffer,M=M.buffer;case"[object ArrayBuffer]":return!(v.byteLength!=M.byteLength||!ct(new ki(v),new ki(M)));case"[object Boolean]":case"[object Date]":case"[object Number]":return _(+v,+M);case"[object Error]":return v.name==M.name&&v.message==M.message;case"[object RegExp]":case"[object String]":return v==M+"";case"[object Map]":var Et=Fi;case"[object Set]":var It=1&$;if(Et||(Et=uo),v.size!=M.size&&!It)return!1;var zt=yt.get(v);if(zt)return zt==M;$|=2,yt.set(v,M);var Qt=za(Et(v),Et(M),$,ft,ct,yt);return yt.delete(v),Qt;case"[object Symbol]":if(Mo)return Mo.call(v)==Mo.call(M)}return!1},Gi=Object.prototype.hasOwnProperty,mo=function(v,M,G,$,ft,ct){var yt=1&G,Et=po(v),It=Et.length;if(It!=po(M).length&&!yt)return!1;for(var zt=It;zt--;){var Qt=Et[zt];if(!(yt?Qt in M:Gi.call(M,Qt)))return!1}var qt=ct.get(v),_e=ct.get(M);if(qt&&_e)return qt==M&&_e==v;var Ye=!0;ct.set(v,M),ct.set(M,v);for(var Cr=yt;++zt<It;){var $e=v[Qt=Et[zt]],er=M[Qt];if($)var tr=yt?$(er,$e,Qt,M,v,ct):$($e,er,Qt,v,M,ct);if(!(tr===void 0?$e===er||ft($e,er,G,$,ct):tr)){Ye=!1;break}Cr||(Cr=Qt=="constructor")}if(Ye&&!Cr){var $r=v.constructor,_n=M.constructor;$r==_n||!("constructor"in v)||!("constructor"in M)||typeof $r=="function"&&$r instanceof $r&&typeof _n=="function"&&_n instanceof _n||(Ye=!1)}return ct.delete(v),ct.delete(M),Ye},Co=Object.prototype.hasOwnProperty,Ao=function(v,M,G,$,ft,ct){var yt=gt(v),Et=gt(M),It=yt?"[object Array]":Eo(v),zt=Et?"[object Array]":Eo(M),Qt=(It=It=="[object Arguments]"?"[object Object]":It)=="[object Object]",qt=(zt=zt=="[object Arguments]"?"[object Object]":zt)=="[object Object]",_e=It==zt;if(_e&&W(v)){if(!W(M))return!1;yt=!0,Qt=!1}if(_e&&!Qt)return ct||(ct=new Hn),yt||De(v)?za(v,M,G,$,ft,ct):rs(v,M,It,G,$,ft,ct);if(!(1&G)){var Ye=Qt&&Co.call(v,"__wrapped__"),Cr=qt&&Co.call(M,"__wrapped__");if(Ye||Cr){var $e=Ye?v.value():v,er=Cr?M.value():M;return ct||(ct=new Hn),ft($e,er,G,$,ct)}}return!!_e&&(ct||(ct=new Hn),mo(v,M,G,$,ft,ct))},Ls=function v(M,G,$,ft,ct){return M===G||(M==null||G==null||!ar(M)&&!ar(G)?M!=M&&G!=G:Ao(M,G,$,ft,v,ct))},Ds=function(v,M,G,$){var ft=G.length,ct=ft,yt=!$;if(v==null)return!ct;for(v=Object(v);ft--;){var Et=G[ft];if(yt&&Et[2]?Et[1]!==v[Et[0]]:!(Et[0]in v))return!1}for(;++ft<ct;){var It=(Et=G[ft])[0],zt=v[It],Qt=Et[1];if(yt&&Et[2]){if(zt===void 0&&!(It in v))return!1}else{var qt=new Hn;if($)var _e=$(zt,Qt,It,v,M,qt);if(!(_e===void 0?Ls(Qt,zt,3,$,qt):_e))return!1}}return!0},ns=function(v){return v==v&&!Ut(v)},Vo=function(v){for(var M=$t(v),G=M.length;G--;){var $=M[G],ft=v[$];M[G]=[$,ft,ns(ft)]}return M},ru=function(v,M){return function(G){return G!=null&&G[v]===M&&(M!==void 0||v in Object(G))}},Vs=function(v){var M=Vo(v);return M.length==1&&M[0][2]?ru(M[0][0],M[0][1]):function(G){return G===v||Ds(G,v,M)}},hs=function(v){return typeof v=="symbol"||ar(v)&&Mt(v)=="[object Symbol]"},Ft=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,me=/^\w*$/,We=function(v,M){if(gt(v))return!1;var G=typeof v;return!(G!="number"&&G!="symbol"&&G!="boolean"&&v!=null&&!hs(v))||me.test(v)||!Ft.test(v)||M!=null&&v in Object(M)};function qe(v,M){if(typeof v!="function"||M!=null&&typeof M!="function")throw new TypeError("Expected a function");var G=function(){var $=arguments,ft=M?M.apply(this,$):$[0],ct=G.cache;if(ct.has(ft))return ct.get(ft);var yt=v.apply(this,$);return G.cache=ct.set(ft,yt)||ct,yt};return G.cache=new(qe.Cache||Jn),G}qe.Cache=Jn;var Rr=qe,En=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vn=/\\(\\)?/g,ja=function(v){var M=Rr(v,function($){return G.size===500&&G.clear(),$}),G=M.cache;return M}(function(v){var M=[];return v.charCodeAt(0)===46&&M.push(""),v.replace(En,function(G,$,ft,ct){M.push(ft?ct.replace(Vn,"$1"):$||G)}),M}),li=function(v,M){for(var G=-1,$=v==null?0:v.length,ft=Array($);++G<$;)ft[G]=M(v[G],G,v);return ft},fo=Dt?Dt.prototype:void 0,qi=fo?fo.toString:void 0,js=function v(M){if(typeof M=="string")return M;if(gt(M))return li(M,v)+"";if(hs(M))return qi?qi.call(M):"";var G=M+"";return G=="0"&&1/M==-1/0?"-0":G},Mu=function(v){return v==null?"":js(v)},gu=function(v,M){return gt(v)?v:We(v,M)?[v]:ja(Mu(v))},Hs=function(v){if(typeof v=="string"||hs(v))return v;var M=v+"";return M=="0"&&1/v==-1/0?"-0":M},pu=function(v,M){for(var G=0,$=(M=gu(M,v)).length;v!=null&&G<$;)v=v[Hs(M[G++])];return G&&G==$?v:void 0},Ua=function(v,M,G){var $=v==null?void 0:pu(v,M);return $===void 0?G:$},Fn=function(v,M){return v!=null&&M in Object(v)},Vu=function(v,M,G){for(var $=-1,ft=(M=gu(M,v)).length,ct=!1;++$<ft;){var yt=Hs(M[$]);if(!(ct=v!=null&&G(v,yt)))break;v=v[yt]}return ct||++$!=ft?ct:!!(ft=v==null?0:v.length)&&et(ft)&&A(yt,ft)&&(gt(v)||pn(v))},jo=function(v,M){return v!=null&&Vu(v,M,Fn)},Cu=function(v,M){return We(v)&&ns(M)?ru(Hs(v),M):function(G){var $=Ua(G,v);return $===void 0&&$===M?jo(G,v):Ls(M,$,3)}},ws=function(v){return function(M){return M==null?void 0:M[v]}},Ki=function(v){return function(M){return pu(M,v)}},Oi=function(v){return We(v)?ws(Hs(v)):Ki(v)},To=function(v){return typeof v=="function"?v:v==null?So:typeof v=="object"?gt(v)?Cu(v[0],v[1]):Vs(v):Oi(v)},ju=function(v,M){return(gt(v)?Nn:ts)(v,To(M))},cf=Object.prototype.hasOwnProperty,Uf=function(v,M){return v!=null&&cf.call(v,M)},Au=function(v,M){return v!=null&&Vu(v,M,Uf)},Io=Object.prototype.hasOwnProperty,h=function(v){if(v==null)return!0;if(Kr(v)&&(gt(v)||typeof v=="string"||typeof v.splice=="function"||W(v)||De(v)||pn(v)))return!v.length;var M=Eo(v);if(M=="[object Map]"||M=="[object Set]")return!v.size;if(vn(v))return!Pr(v).length;for(var G in v)if(Io.call(v,G))return!1;return!0},O=function(v){return v===void 0},dt=function(v,M){var G=-1,$=Kr(v)?Array(v.length):[];return Hi(v,function(ft,ct,yt){$[++G]=M(ft,ct,yt)}),$},St=function(v,M){return(gt(v)?li:dt)(v,To(M))},kt=function(v,M,G,$){var ft=-1,ct=v==null?0:v.length;for($&&ct&&(G=v[++ft]);++ft<ct;)G=M(G,v[ft],ft,v);return G},Ht=function(v,M,G,$,ft){return ft(v,function(ct,yt,Et){G=$?($=!1,ct):M(G,ct,yt,Et)}),G},Zt=function(v,M,G){var $=gt(v)?kt:Ht,ft=arguments.length<3;return $(v,To(M),G,ft,Hi)},le=function(v){return typeof v=="string"||!gt(v)&&ar(v)&&Mt(v)=="[object String]"},ye=ws("length"),Oe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),He=function(v){return Oe.test(v)},Ar="[\\ud800-\\udfff]",Ir="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",_r="\\ud83c[\\udffb-\\udfff]",Qr="[^\\ud800-\\udfff]",yn="(?:\\ud83c[\\udde6-\\uddff]){2}",kr="[\\ud800-\\udbff][\\udc00-\\udfff]",Tn="(?:"+Ir+"|"+_r+")?",Ea="[\\ufe0e\\ufe0f]?"+Tn+("(?:\\u200d(?:"+[Qr,yn,kr].join("|")+")[\\ufe0e\\ufe0f]?"+Tn+")*"),wa="(?:"+[Qr+Ir+"?",Ir,yn,kr,Ar].join("|")+")",ga=RegExp(_r+"(?="+_r+")|"+wa+Ea,"g"),ta=function(v){for(var M=ga.lastIndex=0;ga.test(v);)++M;return M},ha=function(v){return He(v)?ta(v):ye(v)},Bi=function(v){if(v==null)return 0;if(Kr(v))return le(v)?ha(v):v.length;var M=Eo(v);return M=="[object Map]"||M=="[object Set]"?v.size:Pr(v).length},_i=function(v,M,G){var $=gt(v),ft=$||W(v)||De(v);if(M=To(M),G==null){var ct=v&&v.constructor;G=ft?$?new ct:[]:Ut(v)&&Me(ct)?_o(Xa(v)):{}}return(ft?Wn:Es)(v,function(yt,Et,It){return M(G,yt,Et,It)}),G},Li=Dt?Dt.isConcatSpreadable:void 0,Di=function(v){return gt(v)||pn(v)||!!(Li&&v&&v[Li])},Ni=function v(M,G,$,ft,ct){var yt=-1,Et=M.length;for($||($=Di),ct||(ct=[]);++yt<Et;){var It=M[yt];G>0&&$(It)?G>1?v(It,G-1,$,ft,ct):Za(ct,It):ft||(ct[ct.length]=It)}return ct},zi=function(v,M,G){switch(G.length){case 0:return v.call(M);case 1:return v.call(M,G[0]);case 2:return v.call(M,G[0],G[1]);case 3:return v.call(M,G[0],G[1],G[2])}return v.apply(M,G)},co=Math.max,Ha=function(v,M,G){return M=co(M===void 0?v.length-1:M,0),function(){for(var $=arguments,ft=-1,ct=co($.length-M,0),yt=Array(ct);++ft<ct;)yt[ft]=$[M+ft];ft=-1;for(var Et=Array(M+1);++ft<M;)Et[ft]=$[ft];return Et[M]=G(yt),zi(v,this,Et)}},Ja=Bn?function(v,M){return Bn(v,"toString",{configurable:!0,enumerable:!1,value:oo(M),writable:!0})}:So,Ns=Date.now,_s=function(v){var M=0,G=0;return function(){var $=Ns(),ft=16-($-G);if(G=$,ft>0){if(++M>=800)return arguments[0]}else M=0;return v.apply(void 0,arguments)}}(Ja),vs=function(v,M){return _s(Ha(v,M,So),v+"")},yu=function(v,M,G,$){for(var ft=v.length,ct=G+($?1:-1);$?ct--:++ct<ft;)if(M(v[ct],ct,v))return ct;return-1},Wf=function(v){return v!=v},Hc=function(v,M,G){for(var $=G-1,ft=v.length;++$<ft;)if(v[$]===M)return $;return-1},Kc=function(v,M,G){return M==M?Hc(v,M,G):yu(v,Wf,G)},Zc=function(v,M){return!!(v!=null&&v.length)&&Kc(v,M,0)>-1},$c=function(v,M,G){for(var $=-1,ft=v==null?0:v.length;++$<ft;)if(G(M,v[$]))return!0;return!1},Xf=function(){},mc=Ia&&1/uo(new Ia([,-0]))[1]==1/0?function(v){return new Ia(v)}:Xf,qc=function(v,M,G){var $=-1,ft=Zc,ct=v.length,yt=!0,Et=[],It=Et;if(G)yt=!1,ft=$c;else if(ct>=200){var zt=M?null:mc(v);if(zt)return uo(zt);yt=!1,ft=Fo,It=new Xo}else It=M?[]:Et;t:for(;++$<ct;){var Qt=v[$],qt=M?M(Qt):Qt;if(Qt=G||Qt!==0?Qt:0,yt&&qt==qt){for(var _e=It.length;_e--;)if(It[_e]===qt)continue t;M&&It.push(qt),Et.push(Qt)}else ft(It,qt,G)||(It!==Et&&It.push(qt),Et.push(Qt))}return Et},Yf=function(v){return ar(v)&&Kr(v)},xc=vs(function(v){return qc(Ni(v,1,Yf,!0))}),lf=function(v,M){return li(M,function(G){return v[G]})},nu,hf=function(v){return v==null?[]:lf(v,$t(v))};try{nu={clone:ko,constant:oo,each:so,filter:ju,has:Au,isArray:gt,isEmpty:h,isFunction:Me,isUndefined:O,keys:$t,map:St,reduce:Zt,size:Bi,transform:_i,union:xc,values:hf}}catch(v){}nu||(nu=window._);var In=nu,au=Ka;function Ka(v){this._isDirected=!In.has(v,"directed")||v.directed,this._isMultigraph=!!In.has(v,"multigraph")&&v.multigraph,this._isCompound=!!In.has(v,"compound")&&v.compound,this._label=void 0,this._defaultNodeLabelFn=In.constant(void 0),this._defaultEdgeLabelFn=In.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function vf(v,M){v[M]?v[M]++:v[M]=1}function df(v,M){--v[M]||delete v[M]}function Js(v,M,G,$){var ft=""+M,ct=""+G;if(!v&&ft>ct){var yt=ft;ft=ct,ct=yt}return ft+""+ct+""+(In.isUndefined($)?"\0":$)}function Vf(v,M,G,$){var ft=""+M,ct=""+G;if(!v&&ft>ct){var yt=ft;ft=ct,ct=yt}var Et={v:ft,w:ct};return $&&(Et.name=$),Et}function iu(v,M){return Js(v,M.v,M.w,M.name)}Ka.prototype._nodeCount=0,Ka.prototype._edgeCount=0,Ka.prototype.isDirected=function(){return this._isDirected},Ka.prototype.isMultigraph=function(){return this._isMultigraph},Ka.prototype.isCompound=function(){return this._isCompound},Ka.prototype.setGraph=function(v){return this._label=v,this},Ka.prototype.graph=function(){return this._label},Ka.prototype.setDefaultNodeLabel=function(v){return In.isFunction(v)||(v=In.constant(v)),this._defaultNodeLabelFn=v,this},Ka.prototype.nodeCount=function(){return this._nodeCount},Ka.prototype.nodes=function(){return In.keys(this._nodes)},Ka.prototype.sources=function(){var v=this;return In.filter(this.nodes(),function(M){return In.isEmpty(v._in[M])})},Ka.prototype.sinks=function(){var v=this;return In.filter(this.nodes(),function(M){return In.isEmpty(v._out[M])})},Ka.prototype.setNodes=function(v,M){var G=arguments,$=this;return In.each(v,function(ft){G.length>1?$.setNode(ft,M):$.setNode(ft)}),this},Ka.prototype.setNode=function(v,M){return In.has(this._nodes,v)?(arguments.length>1&&(this._nodes[v]=M),this):(this._nodes[v]=arguments.length>1?M:this._defaultNodeLabelFn(v),this._isCompound&&(this._parent[v]="\0",this._children[v]={},this._children["\0"][v]=!0),this._in[v]={},this._preds[v]={},this._out[v]={},this._sucs[v]={},++this._nodeCount,this)},Ka.prototype.node=function(v){return this._nodes[v]},Ka.prototype.hasNode=function(v){return In.has(this._nodes,v)},Ka.prototype.removeNode=function(v){var M=this;if(In.has(this._nodes,v)){var G=function($){M.removeEdge(M._edgeObjs[$])};delete this._nodes[v],this._isCompound&&(this._removeFromParentsChildList(v),delete this._parent[v],In.each(this.children(v),function($){M.setParent($)}),delete this._children[v]),In.each(In.keys(this._in[v]),G),delete this._in[v],delete this._preds[v],In.each(In.keys(this._out[v]),G),delete this._out[v],delete this._sucs[v],--this._nodeCount}return this},Ka.prototype.setParent=function(v,M){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(In.isUndefined(M))M="\0";else{for(var G=M+="";!In.isUndefined(G);G=this.parent(G))if(G===v)throw new Error("Setting "+M+" as parent of "+v+" would create a cycle");this.setNode(M)}return this.setNode(v),this._removeFromParentsChildList(v),this._parent[v]=M,this._children[M][v]=!0,this},Ka.prototype._removeFromParentsChildList=function(v){delete this._children[this._parent[v]][v]},Ka.prototype.parent=function(v){if(this._isCompound){var M=this._parent[v];if(M!=="\0")return M}},Ka.prototype.children=function(v){if(In.isUndefined(v)&&(v="\0"),this._isCompound){var M=this._children[v];if(M)return In.keys(M)}else{if(v==="\0")return this.nodes();if(this.hasNode(v))return[]}},Ka.prototype.predecessors=function(v){var M=this._preds[v];if(M)return In.keys(M)},Ka.prototype.successors=function(v){var M=this._sucs[v];if(M)return In.keys(M)},Ka.prototype.neighbors=function(v){var M=this.predecessors(v);if(M)return In.union(M,this.successors(v))},Ka.prototype.isLeaf=function(v){return(this.isDirected()?this.successors(v):this.neighbors(v)).length===0},Ka.prototype.filterNodes=function(v){var M=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});M.setGraph(this.graph());var G=this;In.each(this._nodes,function(ct,yt){v(yt)&&M.setNode(yt,ct)}),In.each(this._edgeObjs,function(ct){M.hasNode(ct.v)&&M.hasNode(ct.w)&&M.setEdge(ct,G.edge(ct))});var $={};function ft(ct){var yt=G.parent(ct);return yt===void 0||M.hasNode(yt)?($[ct]=yt,yt):yt in $?$[yt]:ft(yt)}return this._isCompound&&In.each(M.nodes(),function(ct){M.setParent(ct,ft(ct))}),M},Ka.prototype.setDefaultEdgeLabel=function(v){return In.isFunction(v)||(v=In.constant(v)),this._defaultEdgeLabelFn=v,this},Ka.prototype.edgeCount=function(){return this._edgeCount},Ka.prototype.edges=function(){return In.values(this._edgeObjs)},Ka.prototype.setPath=function(v,M){var G=this,$=arguments;return In.reduce(v,function(ft,ct){return $.length>1?G.setEdge(ft,ct,M):G.setEdge(ft,ct),ct}),this},Ka.prototype.setEdge=function(){var v,M,G,$,ft=!1,ct=arguments[0];typeof ct=="object"&&ct!==null&&"v"in ct?(v=ct.v,M=ct.w,G=ct.name,arguments.length===2&&($=arguments[1],ft=!0)):(v=ct,M=arguments[1],G=arguments[3],arguments.length>2&&($=arguments[2],ft=!0)),v=""+v,M=""+M,In.isUndefined(G)||(G=""+G);var yt=Js(this._isDirected,v,M,G);if(In.has(this._edgeLabels,yt))return ft&&(this._edgeLabels[yt]=$),this;if(!In.isUndefined(G)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(v),this.setNode(M),this._edgeLabels[yt]=ft?$:this._defaultEdgeLabelFn(v,M,G);var Et=Vf(this._isDirected,v,M,G);return v=Et.v,M=Et.w,Object.freeze(Et),this._edgeObjs[yt]=Et,vf(this._preds[M],v),vf(this._sucs[v],M),this._in[M][yt]=Et,this._out[v][yt]=Et,this._edgeCount++,this},Ka.prototype.edge=function(v,M,G){var $=arguments.length===1?iu(this._isDirected,arguments[0]):Js(this._isDirected,v,M,G);return this._edgeLabels[$]},Ka.prototype.hasEdge=function(v,M,G){var $=arguments.length===1?iu(this._isDirected,arguments[0]):Js(this._isDirected,v,M,G);return In.has(this._edgeLabels,$)},Ka.prototype.removeEdge=function(v,M,G){var $=arguments.length===1?iu(this._isDirected,arguments[0]):Js(this._isDirected,v,M,G),ft=this._edgeObjs[$];return ft&&(v=ft.v,M=ft.w,delete this._edgeLabels[$],delete this._edgeObjs[$],df(this._preds[M],v),df(this._sucs[v],M),delete this._in[M][$],delete this._out[v][$],this._edgeCount--),this},Ka.prototype.inEdges=function(v,M){var G=this._in[v];if(G){var $=In.values(G);return M?In.filter($,function(ft){return ft.v===M}):$}},Ka.prototype.outEdges=function(v,M){var G=this._out[v];if(G){var $=In.values(G);return M?In.filter($,function(ft){return ft.w===M}):$}},Ka.prototype.nodeEdges=function(v,M){var G=this.inEdges(v,M);if(G)return G.concat(this.outEdges(v,M))};var gf={Graph:au,version:"2.1.8"},bc={write:function(v){var M={options:{directed:v.isDirected(),multigraph:v.isMultigraph(),compound:v.isCompound()},nodes:Tu(v),edges:Ss(v)};return In.isUndefined(v.graph())||(M.value=In.clone(v.graph())),M},read:function(v){var M=new au(v.options).setGraph(v.value);return In.each(v.nodes,function(G){M.setNode(G.v,G.value),G.parent&&M.setParent(G.v,G.parent)}),In.each(v.edges,function(G){M.setEdge({v:G.v,w:G.w,name:G.name},G.value)}),M}};function Tu(v){return In.map(v.nodes(),function(M){var G=v.node(M),$=v.parent(M),ft={v:M};return In.isUndefined(G)||(ft.value=G),In.isUndefined($)||(ft.parent=$),ft})}function Ss(v){return In.map(v.edges(),function(M){var G=v.edge(M),$={v:M.v,w:M.w};return In.isUndefined(M.name)||($.name=M.name),In.isUndefined(G)||($.value=G),$})}var jf=function(v){var M,G={},$=[];function ft(ct){In.has(G,ct)||(G[ct]=!0,M.push(ct),In.each(v.successors(ct),ft),In.each(v.predecessors(ct),ft))}return In.each(v.nodes(),function(ct){M=[],ft(ct),M.length&&$.push(M)}),$},Ec=lo;function lo(){this._arr=[],this._keyIndices={}}lo.prototype.size=function(){return this._arr.length},lo.prototype.keys=function(){return this._arr.map(function(v){return v.key})},lo.prototype.has=function(v){return In.has(this._keyIndices,v)},lo.prototype.priority=function(v){var M=this._keyIndices[v];if(M!==void 0)return this._arr[M].priority},lo.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},lo.prototype.add=function(v,M){var G=this._keyIndices;if(v=String(v),!In.has(G,v)){var $=this._arr,ft=$.length;return G[v]=ft,$.push({key:v,priority:M}),this._decrease(ft),!0}return!1},lo.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var v=this._arr.pop();return delete this._keyIndices[v.key],this._heapify(0),v.key},lo.prototype.decrease=function(v,M){var G=this._keyIndices[v];if(M>this._arr[G].priority)throw new Error("New priority is greater than current priority. Key: "+v+" Old: "+this._arr[G].priority+" New: "+M);this._arr[G].priority=M,this._decrease(G)},lo.prototype._heapify=function(v){var M=this._arr,G=2*v,$=G+1,ft=v;G<M.length&&(ft=M[G].priority<M[ft].priority?G:ft,$<M.length&&(ft=M[$].priority<M[ft].priority?$:ft),ft!==v&&(this._swap(v,ft),this._heapify(ft)))},lo.prototype._decrease=function(v){for(var M,G=this._arr,$=G[v].priority;v!==0&&!(G[M=v>>1].priority<$);)this._swap(v,M),v=M},lo.prototype._swap=function(v,M){var G=this._arr,$=this._keyIndices,ft=G[v],ct=G[M];G[v]=ct,G[M]=ft,$[ct.key]=v,$[ft.key]=M};var pf=function(v,M,G,$){return function(ft,ct,yt,Et){var It,zt,Qt={},qt=new Ec,_e=function(Ye){var Cr=Ye.v!==It?Ye.v:Ye.w,$e=Qt[Cr],er=yt(Ye),tr=zt.distance+er;if(er<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+Ye+" Weight: "+er);tr<$e.distance&&($e.distance=tr,$e.predecessor=It,qt.decrease(Cr,tr))};for(ft.nodes().forEach(function(Ye){var Cr=Ye===ct?0:Number.POSITIVE_INFINITY;Qt[Ye]={distance:Cr},qt.add(Ye,Cr)});qt.size()>0&&(It=qt.removeMin(),(zt=Qt[It]).distance!==Number.POSITIVE_INFINITY);)Et(It).forEach(_e);return Qt}(v,String(M),G||mu,$||function(ft){return v.outEdges(ft)})},mu=In.constant(1),ot=function(v,M,G){return In.transform(v.nodes(),function($,ft){$[ft]=pf(v,ft,M,G)},{})},mt=function(v){var M=0,G=[],$={},ft=[];function ct(yt){var Et=$[yt]={onStack:!0,lowlink:M,index:M++};if(G.push(yt),v.successors(yt).forEach(function(Qt){In.has($,Qt)?$[Qt].onStack&&(Et.lowlink=Math.min(Et.lowlink,$[Qt].index)):(ct(Qt),Et.lowlink=Math.min(Et.lowlink,$[Qt].lowlink))}),Et.lowlink===Et.index){var It,zt=[];do It=G.pop(),$[It].onStack=!1,zt.push(It);while(yt!==It);ft.push(zt)}}return v.nodes().forEach(function(yt){In.has($,yt)||ct(yt)}),ft},Tt=function(v){return In.filter(mt(v),function(M){return M.length>1||M.length===1&&v.hasEdge(M[0],M[0])})},Yt=function(v,M,G){return function($,ft,ct){var yt={},Et=$.nodes();return Et.forEach(function(It){yt[It]={},yt[It][It]={distance:0},Et.forEach(function(zt){It!==zt&&(yt[It][zt]={distance:Number.POSITIVE_INFINITY})}),ct(It).forEach(function(zt){var Qt=zt.v===It?zt.w:zt.v,qt=ft(zt);yt[It][Qt]={distance:qt,predecessor:It}})}),Et.forEach(function(It){var zt=yt[It];Et.forEach(function(Qt){var qt=yt[Qt];Et.forEach(function(_e){var Ye=qt[It],Cr=zt[_e],$e=qt[_e],er=Ye.distance+Cr.distance;er<$e.distance&&($e.distance=er,$e.predecessor=Cr.predecessor)})})}),yt}(v,M||ie,G||function($){return v.outEdges($)})},ie=In.constant(1),ze=Xe;function Xe(v){var M={},G={},$=[];if(In.each(v.sinks(),function ft(ct){if(In.has(G,ct))throw new dr;In.has(M,ct)||(G[ct]=!0,M[ct]=!0,In.each(v.predecessors(ct),ft),delete G[ct],$.push(ct))}),In.size(M)!==v.nodeCount())throw new dr;return $}function dr(){}Xe.CycleException=dr,dr.prototype=new Error;var Yr=function(v,M,G){In.isArray(M)||(M=[M]);var $=(v.isDirected()?v.successors:v.neighbors).bind(v),ft=[],ct={};return In.each(M,function(yt){if(!v.hasNode(yt))throw new Error("Graph does not have node: "+yt);tn(v,yt,G==="post",ct,$,ft)}),ft};function tn(v,M,G,$,ft,ct){In.has($,M)||($[M]=!0,G||ct.push(M),In.each(ft(M),function(yt){tn(v,yt,G,$,ft,ct)}),G&&ct.push(M))}var On,Gn={Graph:gf.Graph,json:bc,alg:{components:jf,dijkstra:pf,dijkstraAll:ot,findCycles:Tt,floydWarshall:Yt,isAcyclic:function(v){try{ze(v)}catch(M){if(M instanceof ze.CycleException)return!1;throw M}return!0},postorder:function(v,M){return Yr(v,M,"post")},preorder:function(v,M){return Yr(v,M,"pre")},prim:function(v,M){var G,$=new au,ft={},ct=new Ec;function yt(It){var zt=It.v===G?It.w:It.v,Qt=ct.priority(zt);if(Qt!==void 0){var qt=M(It);qt<Qt&&(ft[zt]=G,ct.decrease(zt,qt))}}if(v.nodeCount()===0)return $;In.each(v.nodes(),function(It){ct.add(It,Number.POSITIVE_INFINITY),$.setNode(It)}),ct.decrease(v.nodes()[0],0);for(var Et=!1;ct.size()>0;){if(G=ct.removeMin(),In.has(ft,G))$.setEdge(G,ft[G]);else{if(Et)throw new Error("Input graph is not connected: "+v);Et=!0}v.nodeEdges(G).forEach(yt)}return $},tarjan:mt,topsort:ze},version:gf.version};try{On=Gn}catch(v){}On||(On=window.graphlib);var Sn=On,ua=function(v){return cs(v,5)},ma=function(v,M,G){if(!Ut(G))return!1;var $=typeof M;return!!($=="number"?Kr(G)&&A(M,G.length):$=="string"&&M in G)&&_(G[M],v)},va=Object.prototype,fa=va.hasOwnProperty,Ra=vs(function(v,M){v=Object(v);var G=-1,$=M.length,ft=$>2?M[2]:void 0;for(ft&&ma(M[0],M[1],ft)&&($=1);++G<$;)for(var ct=M[G],yt=ke(ct),Et=-1,It=yt.length;++Et<It;){var zt=yt[Et],Qt=v[zt];(Qt===void 0||_(Qt,va[zt])&&!fa.call(v,zt))&&(v[zt]=ct[zt])}return v}),Kn=function(v){return function(M,G,$){var ft=Object(M);if(!Kr(M)){var ct=To(G);M=$t(M),G=function(Et){return ct(ft[Et],Et,ft)}}var yt=v(M,G,$);return yt>-1?ft[ct?M[yt]:yt]:void 0}},ka=/^\s+|\s+$/g,xa=/^[-+]0x[0-9a-f]+$/i,Qn=/^0b[01]+$/i,Ba=/^0o[0-7]+$/i,si=parseInt,pi=function(v){if(typeof v=="number")return v;if(hs(v))return NaN;if(Ut(v)){var M=typeof v.valueOf=="function"?v.valueOf():v;v=Ut(M)?M+"":M}if(typeof v!="string")return v===0?v:+v;v=v.replace(ka,"");var G=Qn.test(v);return G||Ba.test(v)?si(v.slice(2),G?2:8):xa.test(v)?NaN:+v},ri=function(v){return v?(v=pi(v))===1/0||v===-1/0?17976931348623157e292*(v<0?-1:1):v==v?v:0:v===0?v:0},$a=function(v){var M=ri(v),G=M%1;return M==M?G?M-G:M:0},Si=Math.max,Ui=Kn(function(v,M,G){var $=v==null?0:v.length;if(!$)return-1;var ft=G==null?0:$a(G);return ft<0&&(ft=Si($+ft,0)),yu(v,To(M),ft)}),Wi=function(v){return v!=null&&v.length?Ni(v,1):[]},Ps=function(v,M){return v==null?v:Jo(v,Ii(M),ke)},wc=function(v){var M=v==null?0:v.length;return M?v[M-1]:void 0},ou=function(v,M){var G={};return M=To(M),Es(v,function($,ft,ct){ya(G,ft,M($,ft,ct))}),G},xu=function(v,M,G){for(var $=-1,ft=v.length;++$<ft;){var ct=v[$],yt=M(ct);if(yt!=null&&(Et===void 0?yt==yt&&!hs(yt):G(yt,Et)))var Et=yt,It=ct}return It},Iu=function(v,M){return v>M},Hu=function(v){return v&&v.length?xu(v,So,Iu):void 0},ks=function(v,M,G){(G!==void 0&&!_(v[M],G)||G===void 0&&!(M in v))&&ya(v,M,G)},Ku=Function.prototype,Ou=Object.prototype,yf=Ku.toString,Zu=Ou.hasOwnProperty,Lu=yf.call(Object),ds=function(v){if(!ar(v)||Mt(v)!="[object Object]")return!1;var M=Xa(v);if(M===null)return!0;var G=Zu.call(M,"constructor")&&M.constructor;return typeof G=="function"&&G instanceof G&&yf.call(G)==Lu},Ks=function(v,M){if((M!=="constructor"||typeof v[M]!="function")&&M!="__proto__")return v[M]},su=function(v){return Ee(v,ke(v))},Du=function(v,M,G,$,ft,ct,yt){var Et=Ks(v,G),It=Ks(M,G),zt=yt.get(It);if(zt)ks(v,G,zt);else{var Qt=ct?ct(Et,It,G+"",v,M,yt):void 0,qt=Qt===void 0;if(qt){var _e=gt(It),Ye=!_e&&W(It),Cr=!_e&&!Ye&&De(It);Qt=It,_e||Ye||Cr?gt(Et)?Qt=Et:Yf(Et)?Qt=rn(Et):Ye?(qt=!1,Qt=cr(It,!0)):Cr?(qt=!1,Qt=Ys(It,!0)):Qt=[]:ds(It)||pn(It)?(Qt=Et,pn(Et)?Qt=su(Et):Ut(Et)&&!Me(Et)||(Qt=Ti(It))):qt=!1}qt&&(yt.set(It,Qt),ft(Qt,It,$,ct,yt),yt.delete(It)),ks(v,G,Qt)}},as=function v(M,G,$,ft,ct){M!==G&&Jo(G,function(yt,Et){if(ct||(ct=new Hn),Ut(yt))Du(M,G,Et,$,v,ft,ct);else{var It=ft?ft(Ks(M,Et),yt,Et+"",M,G,ct):void 0;It===void 0&&(It=yt),ks(M,Et,It)}},ke)},bu=function(v){return vs(function(M,G){var $=-1,ft=G.length,ct=ft>1?G[ft-1]:void 0,yt=ft>2?G[2]:void 0;for(ct=v.length>3&&typeof ct=="function"?(ft--,ct):void 0,yt&&ma(G[0],G[1],yt)&&(ct=ft<3?void 0:ct,ft=1),M=Object(M);++$<ft;){var Et=G[$];Et&&v(M,Et,$,ct)}return M})}(function(v,M,G){as(v,M,G)}),Pl=function(v,M){return v<M},Nu=function(v){return v&&v.length?xu(v,So,Pl):void 0},Qc=function(v,M){return v&&v.length?xu(v,To(M),Pl):void 0},mf=function(){return pt.Date.now()},_c=function(v,M,G,$){if(!Ut(v))return v;for(var ft=-1,ct=(M=gu(M,v)).length,yt=ct-1,Et=v;Et!=null&&++ft<ct;){var It=Hs(M[ft]),zt=G;if(It==="__proto__"||It==="constructor"||It==="prototype")return v;if(ft!=yt){var Qt=Et[It];(zt=$?$(Qt,It,Et):void 0)===void 0&&(zt=Ut(Qt)?Qt:A(M[ft+1])?[]:{})}Ve(Et,It,zt),Et=Et[It]}return v},Jc=function(v,M,G){for(var $=-1,ft=M.length,ct={};++$<ft;){var yt=M[$],Et=pu(v,yt);G(Et,yt)&&_c(ct,gu(yt,v),Et)}return ct},tl=function(v,M){return Jc(v,M,function(G,$){return jo(v,$)})},Hf=function(v){return _s(Ha(v,void 0,Wi),v+"")}(function(v,M){return v==null?{}:tl(v,M)}),Kf=Math.ceil,xf=Math.max,el=function(v,M,G,$){for(var ft=-1,ct=xf(Kf((M-v)/(G||1)),0),yt=Array(ct);ct--;)yt[$?ct:++ft]=v,v+=G;return yt},bf=function(v){return function(M,G,$){return $&&typeof $!="number"&&ma(M,G,$)&&(G=$=void 0),M=ri(M),G===void 0?(G=M,M=0):G=ri(G),$=$===void 0?M<G?1:-1:ri($),el(M,G,$,v)}}(),Ef=function(v,M){var G=v.length;for(v.sort(M);G--;)v[G]=v[G].value;return v},Zf=function(v,M){if(v!==M){var G=v!==void 0,$=v===null,ft=v==v,ct=hs(v),yt=M!==void 0,Et=M===null,It=M==M,zt=hs(M);if(!Et&&!zt&&!ct&&v>M||ct&&yt&&It&&!Et&&!zt||$&&yt&&It||!G&&It||!ft)return 1;if(!$&&!ct&&!zt&&v<M||zt&&G&&ft&&!$&&!ct||Et&&G&&ft||!yt&&ft||!It)return-1}return 0},$u=function(v,M,G){for(var $=-1,ft=v.criteria,ct=M.criteria,yt=ft.length,Et=G.length;++$<yt;){var It=Zf(ft[$],ct[$]);if(It)return $>=Et?It:It*(G[$]=="desc"?-1:1)}return v.index-M.index},qu=function(v,M,G){M=M.length?li(M,function(ct){return gt(ct)?function(yt){return pu(yt,ct.length===1?ct[0]:ct)}:ct}):[So];var $=-1;M=li(M,Rt(To));var ft=dt(v,function(ct,yt,Et){return{criteria:li(M,function(It){return It(ct)}),index:++$,value:ct}});return Ef(ft,function(ct,yt){return $u(ct,yt,G)})},Zs=vs(function(v,M){if(v==null)return[];var G=M.length;return G>1&&ma(v,M[0],M[1])?M=[]:G>2&&ma(M[0],M[1],M[2])&&(M=[M[0]]),qu(v,Ni(M,1),[])}),kl=0,Rl=function(v){var M=++kl;return Mu(v)+M},Bl=function(v,M,G){for(var $=-1,ft=v.length,ct=M.length,yt={};++$<ft;){var Et=$<ct?M[$]:void 0;G(yt,v[$],Et)}return yt},$f,rl=function(v,M){return Bl(v||[],M||[],Ve)};try{$f={cloneDeep:ua,constant:oo,defaults:Ra,each:so,filter:ju,find:Ui,flatten:Wi,forEach:yo,forIn:Ps,has:Au,isUndefined:O,last:wc,map:St,mapValues:ou,max:Hu,merge:bu,min:Nu,minBy:Qc,now:mf,pick:Hf,range:bf,reduce:Zt,sortBy:Zs,uniqueId:Rl,values:hf,zipObject:rl}}catch(v){}$f||($f=window._);var Re=$f,Fl=Qu;function Qu(){var v={};v._next=v._prev=v,this._sentinel=v}function qf(v){v._prev._next=v._next,v._next._prev=v._prev,delete v._next,delete v._prev}function Gl(v,M){if(v!=="_next"&&v!=="_prev")return M}Qu.prototype.dequeue=function(){var v=this._sentinel,M=v._prev;if(M!==v)return qf(M),M},Qu.prototype.enqueue=function(v){var M=this._sentinel;v._prev&&v._next&&qf(v),v._next=M._next,M._next._prev=v,M._next=v,v._prev=M},Qu.prototype.toString=function(){for(var v=[],M=this._sentinel,G=M._prev;G!==M;)v.push(JSON.stringify(G,Gl)),G=G._prev;return"["+v.join(", ")+"]"};var nl=Sn.Graph,al=function(v,M){if(v.nodeCount()<=1)return[];var G=function(ft,ct){var yt=new nl,Et=0,It=0;Re.forEach(ft.nodes(),function(qt){yt.setNode(qt,{v:qt,in:0,out:0})}),Re.forEach(ft.edges(),function(qt){var _e=yt.edge(qt.v,qt.w)||0,Ye=ct(qt),Cr=_e+Ye;yt.setEdge(qt.v,qt.w,Cr),It=Math.max(It,yt.node(qt.v).out+=Ye),Et=Math.max(Et,yt.node(qt.w).in+=Ye)});var zt=Re.range(It+Et+3).map(function(){return new Fl}),Qt=Et+1;return Re.forEach(yt.nodes(),function(qt){Ju(zt,Qt,yt.node(qt))}),{graph:yt,buckets:zt,zeroIdx:Qt}}(v,M||wf),$=function(ft,ct,yt){for(var Et,It=[],zt=ct[ct.length-1],Qt=ct[0];ft.nodeCount();){for(;Et=Qt.dequeue();)_f(ft,ct,yt,Et);for(;Et=zt.dequeue();)_f(ft,ct,yt,Et);if(ft.nodeCount()){for(var qt=ct.length-2;qt>0;--qt)if(Et=ct[qt].dequeue()){It=It.concat(_f(ft,ct,yt,Et,!0));break}}}return It}(G.graph,G.buckets,G.zeroIdx);return Re.flatten(Re.map($,function(ft){return v.outEdges(ft.v,ft.w)}),!0)},wf=Re.constant(1);function _f(v,M,G,$,ft){var ct=ft?[]:void 0;return Re.forEach(v.inEdges($.v),function(yt){var Et=v.edge(yt),It=v.node(yt.v);ft&&ct.push({v:yt.v,w:yt.w}),It.out-=Et,Ju(M,G,It)}),Re.forEach(v.outEdges($.v),function(yt){var Et=v.edge(yt),It=yt.w,zt=v.node(It);zt.in-=Et,Ju(M,G,zt)}),v.removeNode($.v),ct}function Ju(v,M,G){G.out?G.in?v[G.out-G.in+M].enqueue(G):v[v.length-1].enqueue(G):v[0].enqueue(G)}var il={run:function(v){var M=v.graph().acyclicer==="greedy"?al(v,function(G){return function($){return G.edge($).weight}}(v)):function(G){var $=[],ft={},ct={};function yt(Et){Re.has(ct,Et)||(ct[Et]=!0,ft[Et]=!0,Re.forEach(G.outEdges(Et),function(It){Re.has(ft,It.w)?$.push(It):yt(It.w)}),delete ft[Et])}return Re.forEach(G.nodes(),yt),$}(v);Re.forEach(M,function(G){var $=v.edge(G);v.removeEdge(G),$.forwardName=G.name,$.reversed=!0,v.setEdge(G.w,G.v,$,Re.uniqueId("rev"))})},undo:function(v){Re.forEach(v.edges(),function(M){var G=v.edge(M);if(G.reversed){v.removeEdge(M);var $=G.forwardName;delete G.reversed,delete G.forwardName,v.setEdge(M.w,M.v,G,$)}})}},tf=Sn.Graph,hi={addDummyNode:ef,simplify:function(v){var M=new tf().setGraph(v.graph());return Re.forEach(v.nodes(),function(G){M.setNode(G,v.node(G))}),Re.forEach(v.edges(),function(G){var $=M.edge(G.v,G.w)||{weight:0,minlen:1},ft=v.edge(G);M.setEdge(G.v,G.w,{weight:$.weight+ft.weight,minlen:Math.max($.minlen,ft.minlen)})}),M},asNonCompoundGraph:function(v){var M=new tf({multigraph:v.isMultigraph()}).setGraph(v.graph());return Re.forEach(v.nodes(),function(G){v.children(G).length||M.setNode(G,v.node(G))}),Re.forEach(v.edges(),function(G){M.setEdge(G,v.edge(G))}),M},successorWeights:function(v){var M=Re.map(v.nodes(),function(G){var $={};return Re.forEach(v.outEdges(G),function(ft){$[ft.w]=($[ft.w]||0)+v.edge(ft).weight}),$});return Re.zipObject(v.nodes(),M)},predecessorWeights:function(v){var M=Re.map(v.nodes(),function(G){var $={};return Re.forEach(v.inEdges(G),function(ft){$[ft.v]=($[ft.v]||0)+v.edge(ft).weight}),$});return Re.zipObject(v.nodes(),M)},intersectRect:function(v,M){var G,$,ft=v.x,ct=v.y,yt=M.x-ft,Et=M.y-ct,It=v.width/2,zt=v.height/2;if(!yt&&!Et)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(Et)*It>Math.abs(yt)*zt?(Et<0&&(zt=-zt),G=zt*yt/Et,$=zt):(yt<0&&(It=-It),G=It,$=It*Et/yt),{x:ft+G,y:ct+$}},buildLayerMatrix:function(v){var M=Re.map(Re.range(ol(v)+1),function(){return[]});return Re.forEach(v.nodes(),function(G){var $=v.node(G),ft=$.rank;Re.isUndefined(ft)||(M[ft][$.order]=G)}),M},normalizeRanks:function(v){var M=Re.min(Re.map(v.nodes(),function(G){return v.node(G).rank}));Re.forEach(v.nodes(),function(G){var $=v.node(G);Re.has($,"rank")&&($.rank-=M)})},removeEmptyRanks:function(v){var M=Re.min(Re.map(v.nodes(),function(ct){return v.node(ct).rank})),G=[];Re.forEach(v.nodes(),function(ct){var yt=v.node(ct).rank-M;G[yt]||(G[yt]=[]),G[yt].push(ct)});var $=0,ft=v.graph().nodeRankFactor;Re.forEach(G,function(ct,yt){Re.isUndefined(ct)&&yt%ft!=0?--$:$&&Re.forEach(ct,function(Et){v.node(Et).rank+=$})})},addBorderNode:function(v,M,G,$){var ft={width:0,height:0};return arguments.length>=4&&(ft.rank=G,ft.order=$),ef(v,"border",ft,M)},maxRank:ol,partition:function(v,M){var G={lhs:[],rhs:[]};return Re.forEach(v,function($){M($)?G.lhs.push($):G.rhs.push($)}),G},time:function(v,M){var G=Re.now();try{return M()}finally{console.log(v+" time: "+(Re.now()-G)+"ms")}},notime:function(v,M){return M()}};function ef(v,M,G,$){var ft;do ft=Re.uniqueId($);while(v.hasNode(ft));return G.dummy=M,v.setNode(ft,G),ft}function ol(v){return Re.max(Re.map(v.nodes(),function(M){var G=v.node(M).rank;if(!Re.isUndefined(G))return G}))}var Sf={run:function(v){v.graph().dummyChains=[],Re.forEach(v.edges(),function(M){(function(G,$){var ft,ct,yt,Et=$.v,It=G.node(Et).rank,zt=$.w,Qt=G.node(zt).rank,qt=$.name,_e=G.edge($),Ye=_e.labelRank;if(Qt!==It+1){for(G.removeEdge($),yt=0,++It;It<Qt;++yt,++It)_e.points=[],ct={width:0,height:0,edgeLabel:_e,edgeObj:$,rank:It},ft=hi.addDummyNode(G,"edge",ct,"_d"),It===Ye&&(ct.width=_e.width,ct.height=_e.height,ct.dummy="edge-label",ct.labelpos=_e.labelpos),G.setEdge(Et,ft,{weight:_e.weight},qt),yt===0&&G.graph().dummyChains.push(ft),Et=ft;G.setEdge(Et,zt,{weight:_e.weight},qt)}})(v,M)})},undo:function(v){Re.forEach(v.graph().dummyChains,function(M){var G,$=v.node(M),ft=$.edgeLabel;for(v.setEdge($.edgeObj,ft);$.dummy;)G=v.successors(M)[0],v.removeNode(M),ft.points.push({x:$.x,y:$.y}),$.dummy==="edge-label"&&(ft.x=$.x,ft.y=$.y,ft.width=$.width,ft.height=$.height),M=G,$=v.node(M)})}},Rs=function(v){var M={};Re.forEach(v.sources(),function G($){var ft=v.node($);if(Re.has(M,$))return ft.rank;M[$]=!0;var ct=Re.min(Re.map(v.outEdges($),function(yt){return G(yt.w)-v.edge(yt).minlen}));return ct!==Number.POSITIVE_INFINITY&&ct!=null||(ct=0),ft.rank=ct})},$s=function(v,M){return v.node(M.w).rank-v.node(M.v).rank-v.edge(M).minlen},Bs=Sn.Graph,Eu=$s,rf=function(v){var M,G,$=new Bs({directed:!1}),ft=v.nodes()[0],ct=v.nodeCount();for($.setNode(ft,{});nf($,v)<ct;)M=Ho($,v),G=$.hasNode(M.v)?Eu(v,M):-Eu(v,M),Pu($,v,G);return $};function nf(v,M){return Re.forEach(v.nodes(),function G($){Re.forEach(M.nodeEdges($),function(ft){var ct=ft.v,yt=$===ct?ft.w:ct;v.hasNode(yt)||Eu(M,ft)||(v.setNode(yt,{}),v.setEdge($,yt,{}),G(yt))})}),v.nodeCount()}function Ho(v,M){return Re.minBy(M.edges(),function(G){if(v.hasNode(G.v)!==v.hasNode(G.w))return Eu(M,G)})}function Pu(v,M,G){Re.forEach(v.nodes(),function($){M.node($).rank+=G})}var af=$s,Mf=Rs,Cf=Sn.alg.preorder,sl=Sn.alg.postorder,ul=hi.simplify,ku=Fs;function Fs(v){v=ul(v),Mf(v);var M,G=rf(v);for(Sc(G),fl(G,v);M=Cc(G);)Af(G,v,M,cl(G,v,M))}function fl(v,M){var G=sl(v,v.nodes());G=G.slice(0,G.length-1),Re.forEach(G,function($){(function(ft,ct,yt){var Et=ft.node(yt).parent;ft.edge(yt,Et).cutvalue=hh(ft,ct,yt)})(v,M,$)})}function hh(v,M,G){var $=v.node(G).parent,ft=!0,ct=M.edge(G,$),yt=0;return ct||(ft=!1,ct=M.edge($,G)),yt=ct.weight,Re.forEach(M.nodeEdges(G),function(Et){var It,zt,Qt=Et.v===G,qt=Qt?Et.w:Et.v;if(qt!==$){var _e=Qt===ft,Ye=M.edge(Et).weight;if(yt+=_e?Ye:-Ye,It=G,zt=qt,v.hasEdge(It,zt)){var Cr=v.edge(G,qt).cutvalue;yt+=_e?-Cr:Cr}}}),yt}function Sc(v,M){arguments.length<2&&(M=v.nodes()[0]),Mc(v,{},1,M)}function Mc(v,M,G,$,ft){var ct=G,yt=v.node($);return M[$]=!0,Re.forEach(v.neighbors($),function(Et){Re.has(M,Et)||(G=Mc(v,M,G,Et,$))}),yt.low=ct,yt.lim=G++,ft?yt.parent=ft:delete yt.parent,G}function Cc(v){return Re.find(v.edges(),function(M){return v.edge(M).cutvalue<0})}function cl(v,M,G){var $=G.v,ft=G.w;M.hasEdge($,ft)||($=G.w,ft=G.v);var ct=v.node($),yt=v.node(ft),Et=ct,It=!1;ct.lim>yt.lim&&(Et=yt,It=!0);var zt=Re.filter(M.edges(),function(Qt){return It===vh(v,v.node(Qt.v),Et)&&It!==vh(v,v.node(Qt.w),Et)});return Re.minBy(zt,function(Qt){return af(M,Qt)})}function Af(v,M,G,$){var ft=G.v,ct=G.w;v.removeEdge(ft,ct),v.setEdge($.v,$.w,{}),Sc(v),fl(v,M),function(yt,Et){var It=Re.find(yt.nodes(),function(Qt){return!Et.node(Qt).parent}),zt=Cf(yt,It);zt=zt.slice(1),Re.forEach(zt,function(Qt){var qt=yt.node(Qt).parent,_e=Et.edge(Qt,qt),Ye=!1;_e||(_e=Et.edge(qt,Qt),Ye=!0),Et.node(Qt).rank=Et.node(qt).rank+(Ye?_e.minlen:-_e.minlen)})}(v,M)}function vh(v,M,G){return G.low<=M.lim&&M.lim<=G.lim}Fs.initLowLimValues=Sc,Fs.initCutValues=fl,Fs.calcCutValue=hh,Fs.leaveEdge=Cc,Fs.enterEdge=cl,Fs.exchangeEdges=Af;var ll=Rs,zl=function(v){switch(v.graph().ranker){case"network-simplex":hl(v);break;case"tight-tree":(function(M){ll(M),rf(M)})(v);break;case"longest-path":Ul(v);break;default:hl(v)}},Ul=ll;function hl(v){ku(v)}var dh=function(v){var M=function(G){var $={},ft=0;function ct(yt){var Et=ft;Re.forEach(G.children(yt),ct),$[yt]={low:Et,lim:ft++}}return Re.forEach(G.children(),ct),$}(v);Re.forEach(v.graph().dummyChains,function(G){for(var $=v.node(G),ft=$.edgeObj,ct=function(qt,_e,Ye,Cr){var $e,er,tr=[],$r=[],_n=Math.min(_e[Ye].low,_e[Cr].low),on=Math.max(_e[Ye].lim,_e[Cr].lim);$e=Ye;do $e=qt.parent($e),tr.push($e);while($e&&(_e[$e].low>_n||on>_e[$e].lim));for(er=$e,$e=Cr;($e=qt.parent($e))!==er;)$r.push($e);return{path:tr.concat($r.reverse()),lca:er}}(v,M,ft.v,ft.w),yt=ct.path,Et=ct.lca,It=0,zt=yt[It],Qt=!0;G!==ft.w;){if($=v.node(G),Qt){for(;(zt=yt[It])!==Et&&v.node(zt).maxRank<$.rank;)It++;zt===Et&&(Qt=!1)}if(!Qt){for(;It<yt.length-1&&v.node(zt=yt[It+1]).minRank<=$.rank;)It++;zt=yt[It]}v.setParent(G,zt),G=v.successors(G)[0]}})},Ac={run:function(v){var M=hi.addDummyNode(v,"root",{},"_root"),G=function(yt){var Et={};function It(zt,Qt){var qt=yt.children(zt);qt&&qt.length&&Re.forEach(qt,function(_e){It(_e,Qt+1)}),Et[zt]=Qt}return Re.forEach(yt.children(),function(zt){It(zt,1)}),Et}(v),$=Re.max(Re.values(G))-1,ft=2*$+1;v.graph().nestingRoot=M,Re.forEach(v.edges(),function(yt){v.edge(yt).minlen*=ft});var ct=function(yt){return Re.reduce(yt.edges(),function(Et,It){return Et+yt.edge(It).weight},0)}(v)+1;Re.forEach(v.children(),function(yt){Wl(v,M,ft,ct,$,G,yt)}),v.graph().nodeRankFactor=ft},cleanup:function(v){var M=v.graph();v.removeNode(M.nestingRoot),delete M.nestingRoot,Re.forEach(v.edges(),function(G){v.edge(G).nestingEdge&&v.removeEdge(G)})}};function Wl(v,M,G,$,ft,ct,yt){var Et=v.children(yt);if(Et.length){var It=hi.addBorderNode(v,"_bt"),zt=hi.addBorderNode(v,"_bb"),Qt=v.node(yt);v.setParent(It,yt),Qt.borderTop=It,v.setParent(zt,yt),Qt.borderBottom=zt,Re.forEach(Et,function(qt){Wl(v,M,G,$,ft,ct,qt);var _e=v.node(qt),Ye=_e.borderTop?_e.borderTop:qt,Cr=_e.borderBottom?_e.borderBottom:qt,$e=_e.borderTop?$:2*$,er=Ye!==Cr?1:ft-ct[yt]+1;v.setEdge(It,Ye,{weight:$e,minlen:er,nestingEdge:!0}),v.setEdge(Cr,zt,{weight:$e,minlen:er,nestingEdge:!0})}),v.parent(yt)||v.setEdge(M,It,{weight:0,minlen:ft+ct[yt]})}else yt!==M&&v.setEdge(M,yt,{weight:0,minlen:G})}var vl=function(v){Re.forEach(v.children(),function M(G){var $=v.children(G),ft=v.node(G);if($.length&&Re.forEach($,M),Re.has(ft,"minRank")){ft.borderLeft=[],ft.borderRight=[];for(var ct=ft.minRank,yt=ft.maxRank+1;ct<yt;++ct)Tc(v,"borderLeft","_bl",G,ft,ct),Tc(v,"borderRight","_br",G,ft,ct)}})};function Tc(v,M,G,$,ft,ct){var yt={width:0,height:0,rank:ct,borderType:M},Et=ft[M][ct-1],It=hi.addDummyNode(v,"border",yt,G);ft[M][ct]=It,v.setParent(It,$),Et&&v.setEdge(Et,It,{weight:1})}var Xl={adjust:function(v){var M=v.graph().rankdir.toLowerCase();M!=="lr"&&M!=="rl"||Yl(v)},undo:function(v){var M=v.graph().rankdir.toLowerCase();M!=="bt"&&M!=="rl"||function(G){Re.forEach(G.nodes(),function($){Tf(G.node($))}),Re.forEach(G.edges(),function($){var ft=G.edge($);Re.forEach(ft.points,Tf),Re.has(ft,"y")&&Tf(ft)})}(v),M!=="lr"&&M!=="rl"||(function(G){Re.forEach(G.nodes(),function($){Qf(G.node($))}),Re.forEach(G.edges(),function($){var ft=G.edge($);Re.forEach(ft.points,Qf),Re.has(ft,"x")&&Qf(ft)})}(v),Yl(v))}};function Yl(v){Re.forEach(v.nodes(),function(M){Vl(v.node(M))}),Re.forEach(v.edges(),function(M){Vl(v.edge(M))})}function Vl(v){var M=v.width;v.width=v.height,v.height=M}function Tf(v){v.y=-v.y}function Qf(v){var M=v.x;v.x=v.y,v.y=M}var Ic=function(v){var M={},G=Re.filter(v.nodes(),function(Et){return!v.children(Et).length}),$=Re.max(Re.map(G,function(Et){return v.node(Et).rank})),ft=Re.map(Re.range($+1),function(){return[]});function ct(Et){if(!Re.has(M,Et)){M[Et]=!0;var It=v.node(Et);ft[It.rank].push(Et),Re.forEach(v.successors(Et),ct)}}var yt=Re.sortBy(G,function(Et){return v.node(Et).rank});return Re.forEach(yt,ct),ft},Oc=function(v,M){for(var G=0,$=1;$<M.length;++$)G+=Jf(v,M[$-1],M[$]);return G};function Jf(v,M,G){for(var $=Re.zipObject(G,Re.map(G,function(zt,Qt){return Qt})),ft=Re.flatten(Re.map(M,function(zt){return Re.sortBy(Re.map(v.outEdges(zt),function(Qt){return{pos:$[Qt.w],weight:v.edge(Qt).weight}}),"pos")}),!0),ct=1;ct<G.length;)ct<<=1;var yt=2*ct-1;ct-=1;var Et=Re.map(new Array(yt),function(){return 0}),It=0;return Re.forEach(ft.forEach(function(zt){var Qt=zt.pos+ct;Et[Qt]+=zt.weight;for(var qt=0;Qt>0;)Qt%2&&(qt+=Et[Qt+1]),Et[Qt=Qt-1>>1]+=zt.weight;It+=zt.weight*qt})),It}var dl=function(v,M){return Re.map(M,function(G){var $=v.inEdges(G);if($.length){var ft=Re.reduce($,function(ct,yt){var Et=v.edge(yt),It=v.node(yt.v);return{sum:ct.sum+Et.weight*It.order,weight:ct.weight+Et.weight}},{sum:0,weight:0});return{v:G,barycenter:ft.sum/ft.weight,weight:ft.weight}}return{v:G}})},Lc=function(v,M){var G={};return Re.forEach(v,function($,ft){var ct=G[$.v]={indegree:0,in:[],out:[],vs:[$.v],i:ft};Re.isUndefined($.barycenter)||(ct.barycenter=$.barycenter,ct.weight=$.weight)}),Re.forEach(M.edges(),function($){var ft=G[$.v],ct=G[$.w];Re.isUndefined(ft)||Re.isUndefined(ct)||(ct.indegree++,ft.out.push(G[$.w]))}),function($){var ft=[];function ct(It){return function(zt){zt.merged||(Re.isUndefined(zt.barycenter)||Re.isUndefined(It.barycenter)||zt.barycenter>=It.barycenter)&&function(Qt,qt){var _e=0,Ye=0;Qt.weight&&(_e+=Qt.barycenter*Qt.weight,Ye+=Qt.weight),qt.weight&&(_e+=qt.barycenter*qt.weight,Ye+=qt.weight),Qt.vs=qt.vs.concat(Qt.vs),Qt.barycenter=_e/Ye,Qt.weight=Ye,Qt.i=Math.min(qt.i,Qt.i),qt.merged=!0}(It,zt)}}function yt(It){return function(zt){zt.in.push(It),--zt.indegree==0&&$.push(zt)}}for(;$.length;){var Et=$.pop();ft.push(Et),Re.forEach(Et.in.reverse(),ct(Et)),Re.forEach(Et.out,yt(Et))}return Re.map(Re.filter(ft,function(It){return!It.merged}),function(It){return Re.pick(It,["vs","i","barycenter","weight"])})}(Re.filter(G,function($){return!$.indegree}))},tc=function(v,M){var G=hi.partition(v,function(qt){return Re.has(qt,"barycenter")}),$=G.lhs,ft=Re.sortBy(G.rhs,function(qt){return-qt.i}),ct=[],yt=0,Et=0,It=0;$.sort((zt=!!M,function(qt,_e){return qt.barycenter<_e.barycenter?-1:qt.barycenter>_e.barycenter?1:zt?_e.i-qt.i:qt.i-_e.i})),It=of(ct,ft,It),Re.forEach($,function(qt){It+=qt.vs.length,ct.push(qt.vs),yt+=qt.barycenter*qt.weight,Et+=qt.weight,It=of(ct,ft,It)});var zt,Qt={vs:Re.flatten(ct,!0)};return Et&&(Qt.barycenter=yt/Et,Qt.weight=Et),Qt};function of(v,M,G){for(var $;M.length&&($=Re.last(M)).i<=G;)M.pop(),v.push($.vs),G++;return G}var gl=function v(M,G,$,ft){var ct=M.children(G),yt=M.node(G),Et=yt?yt.borderLeft:void 0,It=yt?yt.borderRight:void 0,zt={};Et&&(ct=Re.filter(ct,function($e){return $e!==Et&&$e!==It}));var Qt=dl(M,ct);Re.forEach(Qt,function($e){if(M.children($e.v).length){var er=v(M,$e.v,$,ft);zt[$e.v]=er,Re.has(er,"barycenter")&&(tr=$e,$r=er,Re.isUndefined(tr.barycenter)?(tr.barycenter=$r.barycenter,tr.weight=$r.weight):(tr.barycenter=(tr.barycenter*tr.weight+$r.barycenter*$r.weight)/(tr.weight+$r.weight),tr.weight+=$r.weight))}var tr,$r});var qt=Lc(Qt,$);(function($e,er){Re.forEach($e,function(tr){tr.vs=Re.flatten(tr.vs.map(function($r){return er[$r]?er[$r].vs:$r}),!0)})})(qt,zt);var _e=tc(qt,ft);if(Et&&(_e.vs=Re.flatten([Et,_e.vs,It],!0),M.predecessors(Et).length)){var Ye=M.node(M.predecessors(Et)[0]),Cr=M.node(M.predecessors(It)[0]);Re.has(_e,"barycenter")||(_e.barycenter=0,_e.weight=0),_e.barycenter=(_e.barycenter*_e.weight+Ye.order+Cr.order)/(_e.weight+2),_e.weight+=2}return _e},Dc=Sn.Graph,ec=function(v,M,G){var $=function(ct){for(var yt;ct.hasNode(yt=Re.uniqueId("_root")););return yt}(v),ft=new Dc({compound:!0}).setGraph({root:$}).setDefaultNodeLabel(function(ct){return v.node(ct)});return Re.forEach(v.nodes(),function(ct){var yt=v.node(ct),Et=v.parent(ct);(yt.rank===M||yt.minRank<=M&&M<=yt.maxRank)&&(ft.setNode(ct),ft.setParent(ct,Et||$),Re.forEach(v[G](ct),function(It){var zt=It.v===ct?It.w:It.v,Qt=ft.edge(zt,ct),qt=Re.isUndefined(Qt)?0:Qt.weight;ft.setEdge(zt,ct,{weight:v.edge(It).weight+qt})}),Re.has(yt,"minRank")&&ft.setNode(ct,{borderLeft:yt.borderLeft[M],borderRight:yt.borderRight[M]}))}),ft},rc=function(v,M,G){var $,ft={};Re.forEach(G,function(ct){for(var yt,Et,It=v.parent(ct);It;){if((yt=v.parent(It))?(Et=ft[yt],ft[yt]=It):(Et=$,$=It),Et&&Et!==It)return void M.setEdge(Et,It);It=yt}})},If=Sn.Graph,nc=function(v){var M=hi.maxRank(v),G=Of(v,Re.range(1,M+1),"inEdges"),$=Of(v,Re.range(M-1,-1,-1),"outEdges"),ft=Ic(v);Gs(v,ft);for(var ct,yt=Number.POSITIVE_INFINITY,Et=0,It=0;It<4;++Et,++It){Lf(Et%2?G:$,Et%4>=2),ft=hi.buildLayerMatrix(v);var zt=Oc(v,ft);zt<yt&&(It=0,ct=Re.cloneDeep(ft),yt=zt)}Gs(v,ct)};function Of(v,M,G){return Re.map(M,function($){return ec(v,$,G)})}function Lf(v,M){var G=new If;Re.forEach(v,function($){var ft=$.graph().root,ct=gl($,ft,G,M);Re.forEach(ct.vs,function(yt,Et){$.node(yt).order=Et}),rc($,G,ct.vs)})}function Gs(v,M){Re.forEach(M,function(G){Re.forEach(G,function($,ft){v.node($).order=ft})})}var jl=Sn.Graph,ac=function(v){var M,G=hi.buildLayerMatrix(v),$=Re.merge(Ru(v,G),Hl(v,G)),ft={};Re.forEach(["u","d"],function(yt){M=yt==="u"?G:Re.values(G).reverse(),Re.forEach(["l","r"],function(Et){Et==="r"&&(M=Re.map(M,function(qt){return Re.values(qt).reverse()}));var It=(yt==="u"?v.predecessors:v.successors).bind(v),zt=pl(v,M,$,It),Qt=gh(v,M,zt.root,zt.align,Et==="r");Et==="r"&&(Qt=Re.mapValues(Qt,function(qt){return-qt})),ft[yt+Et]=Qt})});var ct=Bu(v,ft);return Zl(ft,ct),$l(ft,v.graph().align)};function Ru(v,M){var G={};return Re.reduce(M,function($,ft){var ct=0,yt=0,Et=$.length,It=Re.last(ft);return Re.forEach(ft,function(zt,Qt){var qt=function(Ye,Cr){if(Ye.node(Cr).dummy)return Re.find(Ye.predecessors(Cr),function($e){return Ye.node($e).dummy})}(v,zt),_e=qt?v.node(qt).order:Et;(qt||zt===It)&&(Re.forEach(ft.slice(yt,Qt+1),function(Ye){Re.forEach(v.predecessors(Ye),function(Cr){var $e=v.node(Cr),er=$e.order;!(er<ct||_e<er)||$e.dummy&&v.node(Ye).dummy||Nc(G,Cr,Ye)})}),yt=Qt+1,ct=_e)}),ft}),G}function Hl(v,M){var G={};function $(ft,ct,yt,Et,It){var zt;Re.forEach(Re.range(ct,yt),function(Qt){zt=ft[Qt],v.node(zt).dummy&&Re.forEach(v.predecessors(zt),function(qt){var _e=v.node(qt);_e.dummy&&(_e.order<Et||_e.order>It)&&Nc(G,qt,zt)})})}return Re.reduce(M,function(ft,ct){var yt,Et=-1,It=0;return Re.forEach(ct,function(zt,Qt){if(v.node(zt).dummy==="border"){var qt=v.predecessors(zt);qt.length&&(yt=v.node(qt[0]).order,$(ct,It,Qt,Et,yt),It=Qt,Et=yt)}$(ct,It,ct.length,yt,ft.length)}),ct}),G}function Nc(v,M,G){if(M>G){var $=M;M=G,G=$}var ft=v[M];ft||(v[M]=ft={}),ft[G]=!0}function Kl(v,M,G){if(M>G){var $=M;M=G,G=$}return Re.has(v[M],G)}function pl(v,M,G,$){var ft={},ct={},yt={};return Re.forEach(M,function(Et){Re.forEach(Et,function(It,zt){ft[It]=It,ct[It]=It,yt[It]=zt})}),Re.forEach(M,function(Et){var It=-1;Re.forEach(Et,function(zt){var Qt=$(zt);if(Qt.length)for(var qt=((Qt=Re.sortBy(Qt,function($e){return yt[$e]})).length-1)/2,_e=Math.floor(qt),Ye=Math.ceil(qt);_e<=Ye;++_e){var Cr=Qt[_e];ct[zt]===zt&&It<yt[Cr]&&!Kl(G,zt,Cr)&&(ct[Cr]=zt,ct[zt]=ft[zt]=ft[Cr],It=yt[Cr])}})}),{root:ft,align:ct}}function gh(v,M,G,$,ft){var ct={},yt=function(zt,Qt,qt,_e){var Ye=new jl,Cr=zt.graph(),$e=function(er,tr,$r){return function(_n,on,Yn){var kn,ea=_n.node(on),da=_n.node(Yn),ia=0;if(ia+=ea.width/2,Re.has(ea,"labelpos"))switch(ea.labelpos.toLowerCase()){case"l":kn=-ea.width/2;break;case"r":kn=ea.width/2}if(kn&&(ia+=$r?kn:-kn),kn=0,ia+=(ea.dummy?tr:er)/2,ia+=(da.dummy?tr:er)/2,ia+=da.width/2,Re.has(da,"labelpos"))switch(da.labelpos.toLowerCase()){case"l":kn=da.width/2;break;case"r":kn=-da.width/2}return kn&&(ia+=$r?kn:-kn),kn=0,ia}}(Cr.nodesep,Cr.edgesep,_e);return Re.forEach(Qt,function(er){var tr;Re.forEach(er,function($r){var _n=qt[$r];if(Ye.setNode(_n),tr){var on=qt[tr],Yn=Ye.edge(on,_n);Ye.setEdge(on,_n,Math.max($e(zt,$r,tr),Yn||0))}tr=$r})}),Ye}(v,M,G,ft),Et=ft?"borderLeft":"borderRight";function It(zt,Qt){for(var qt=yt.nodes(),_e=qt.pop(),Ye={};_e;)Ye[_e]?zt(_e):(Ye[_e]=!0,qt.push(_e),qt=qt.concat(Qt(_e))),_e=qt.pop()}return It(function(zt){ct[zt]=yt.inEdges(zt).reduce(function(Qt,qt){return Math.max(Qt,ct[qt.v]+yt.edge(qt))},0)},yt.predecessors.bind(yt)),It(function(zt){var Qt=yt.outEdges(zt).reduce(function(_e,Ye){return Math.min(_e,ct[Ye.w]-yt.edge(Ye))},Number.POSITIVE_INFINITY),qt=v.node(zt);Qt!==Number.POSITIVE_INFINITY&&qt.borderType!==Et&&(ct[zt]=Math.max(ct[zt],Qt))},yt.successors.bind(yt)),Re.forEach($,function(zt){ct[zt]=ct[G[zt]]}),ct}function Bu(v,M){return Re.minBy(Re.values(M),function(G){var $=Number.NEGATIVE_INFINITY,ft=Number.POSITIVE_INFINITY;return Re.forIn(G,function(ct,yt){var Et=function(It,zt){return It.node(zt).width}(v,yt)/2;$=Math.max(ct+Et,$),ft=Math.min(ct-Et,ft)}),$-ft})}function Zl(v,M){var G=Re.values(M),$=Re.min(G),ft=Re.max(G);Re.forEach(["u","d"],function(ct){Re.forEach(["l","r"],function(yt){var Et,It=ct+yt,zt=v[It];if(zt!==M){var Qt=Re.values(zt);(Et=yt==="l"?$-Re.min(Qt):ft-Re.max(Qt))&&(v[It]=Re.mapValues(zt,function(qt){return qt+Et}))}})})}function $l(v,M){return Re.mapValues(v.ul,function(G,$){if(M)return v[M.toLowerCase()][$];var ft=Re.sortBy(Re.map(v,$));return(ft[1]+ft[2])/2})}var ql=ac,ph=function(v){(function(M){var G=hi.buildLayerMatrix(M),$=M.graph().ranksep,ft=0;Re.forEach(G,function(ct){var yt=Re.max(Re.map(ct,function(Et){return M.node(Et).height}));Re.forEach(ct,function(Et){M.node(Et).y=ft+yt/2}),ft+=yt+$})})(v=hi.asNonCompoundGraph(v)),Re.forEach(ql(v),function(M,G){v.node(G).x=M})},Ql=hi.normalizeRanks,yh=hi.removeEmptyRanks,Oo=hi,Jl=Sn.Graph,uu=function(v,M){var G=M&&M.debugTiming?Oo.time:Oo.notime;G("layout",function(){var $=G("  buildLayoutGraph",function(){return function(ft){var ct=new Jl({multigraph:!0,compound:!0}),yt=ic(ft.graph());return ct.setGraph(Re.merge({},Pc,is(yt,Fu),Re.pick(yt,yl))),Re.forEach(ft.nodes(),function(Et){var It=ic(ft.node(Et));ct.setNode(Et,Re.defaults(is(It,kc),ml)),ct.setParent(Et,ft.parent(Et))}),Re.forEach(ft.edges(),function(Et){var It=ic(ft.edge(Et));ct.setEdge(Et,Re.merge({},fu,is(It,Lo),Re.pick(It,Zi)))}),ct}(v)});G("  runLayout",function(){(function(ft,ct){ct("    makeSpaceForEdgeLabels",function(){(function(yt){var Et=yt.graph();Et.ranksep/=2,Re.forEach(yt.edges(),function(It){var zt=yt.edge(It);zt.minlen*=2,zt.labelpos.toLowerCase()!=="c"&&(Et.rankdir==="TB"||Et.rankdir==="BT"?zt.width+=zt.labeloffset:zt.height+=zt.labeloffset)})})(ft)}),ct("    removeSelfEdges",function(){(function(yt){Re.forEach(yt.edges(),function(Et){if(Et.v===Et.w){var It=yt.node(Et.v);It.selfEdges||(It.selfEdges=[]),It.selfEdges.push({e:Et,label:yt.edge(Et)}),yt.removeEdge(Et)}})})(ft)}),ct("    acyclic",function(){il.run(ft)}),ct("    nestingGraph.run",function(){Ac.run(ft)}),ct("    rank",function(){zl(Oo.asNonCompoundGraph(ft))}),ct("    injectEdgeLabelProxies",function(){(function(yt){Re.forEach(yt.edges(),function(Et){var It=yt.edge(Et);if(It.width&&It.height){var zt=yt.node(Et.v),Qt={rank:(yt.node(Et.w).rank-zt.rank)/2+zt.rank,e:Et};Oo.addDummyNode(yt,"edge-proxy",Qt,"_ep")}})})(ft)}),ct("    removeEmptyRanks",function(){yh(ft)}),ct("    nestingGraph.cleanup",function(){Ac.cleanup(ft)}),ct("    normalizeRanks",function(){Ql(ft)}),ct("    assignRankMinMax",function(){(function(yt){var Et=0;Re.forEach(yt.nodes(),function(It){var zt=yt.node(It);zt.borderTop&&(zt.minRank=yt.node(zt.borderTop).rank,zt.maxRank=yt.node(zt.borderBottom).rank,Et=Re.max(Et,zt.maxRank))}),yt.graph().maxRank=Et})(ft)}),ct("    removeEdgeLabelProxies",function(){(function(yt){Re.forEach(yt.nodes(),function(Et){var It=yt.node(Et);It.dummy==="edge-proxy"&&(yt.edge(It.e).labelRank=It.rank,yt.removeNode(Et))})})(ft)}),ct("    normalize.run",function(){Sf.run(ft)}),ct("    parentDummyChains",function(){dh(ft)}),ct("    addBorderSegments",function(){vl(ft)}),ct("    order",function(){nc(ft)}),ct("    insertSelfEdges",function(){(function(yt){var Et=Oo.buildLayerMatrix(yt);Re.forEach(Et,function(It){var zt=0;Re.forEach(It,function(Qt,qt){var _e=yt.node(Qt);_e.order=qt+zt,Re.forEach(_e.selfEdges,function(Ye){Oo.addDummyNode(yt,"selfedge",{width:Ye.label.width,height:Ye.label.height,rank:_e.rank,order:qt+ ++zt,e:Ye.e,label:Ye.label},"_se")}),delete _e.selfEdges})})})(ft)}),ct("    adjustCoordinateSystem",function(){Xl.adjust(ft)}),ct("    position",function(){ph(ft)}),ct("    positionSelfEdges",function(){(function(yt){Re.forEach(yt.nodes(),function(Et){var It=yt.node(Et);if(It.dummy==="selfedge"){var zt=yt.node(It.e.v),Qt=zt.x+zt.width/2,qt=zt.y,_e=It.x-Qt,Ye=zt.height/2;yt.setEdge(It.e,It.label),yt.removeNode(Et),It.label.points=[{x:Qt+2*_e/3,y:qt-Ye},{x:Qt+5*_e/6,y:qt-Ye},{x:Qt+_e,y:qt},{x:Qt+5*_e/6,y:qt+Ye},{x:Qt+2*_e/3,y:qt+Ye}],It.label.x=It.x,It.label.y=It.y}})})(ft)}),ct("    removeBorderNodes",function(){(function(yt){Re.forEach(yt.nodes(),function(Et){if(yt.children(Et).length){var It=yt.node(Et),zt=yt.node(It.borderTop),Qt=yt.node(It.borderBottom),qt=yt.node(Re.last(It.borderLeft)),_e=yt.node(Re.last(It.borderRight));It.width=Math.abs(_e.x-qt.x),It.height=Math.abs(Qt.y-zt.y),It.x=qt.x+It.width/2,It.y=zt.y+It.height/2}}),Re.forEach(yt.nodes(),function(Et){yt.node(Et).dummy==="border"&&yt.removeNode(Et)})})(ft)}),ct("    normalize.undo",function(){Sf.undo(ft)}),ct("    fixupEdgeLabelCoords",function(){(function(yt){Re.forEach(yt.edges(),function(Et){var It=yt.edge(Et);if(Re.has(It,"x"))switch(It.labelpos!=="l"&&It.labelpos!=="r"||(It.width-=It.labeloffset),It.labelpos){case"l":It.x-=It.width/2+It.labeloffset;break;case"r":It.x+=It.width/2+It.labeloffset}})})(ft)}),ct("    undoCoordinateSystem",function(){Xl.undo(ft)}),ct("    translateGraph",function(){(function(yt){var Et=Number.POSITIVE_INFINITY,It=0,zt=Number.POSITIVE_INFINITY,Qt=0,qt=yt.graph(),_e=qt.marginx||0,Ye=qt.marginy||0;function Cr($e){var er=$e.x,tr=$e.y,$r=$e.width,_n=$e.height;Et=Math.min(Et,er-$r/2),It=Math.max(It,er+$r/2),zt=Math.min(zt,tr-_n/2),Qt=Math.max(Qt,tr+_n/2)}Re.forEach(yt.nodes(),function($e){Cr(yt.node($e))}),Re.forEach(yt.edges(),function($e){var er=yt.edge($e);Re.has(er,"x")&&Cr(er)}),Et-=_e,zt-=Ye,Re.forEach(yt.nodes(),function($e){var er=yt.node($e);er.x-=Et,er.y-=zt}),Re.forEach(yt.edges(),function($e){var er=yt.edge($e);Re.forEach(er.points,function(tr){tr.x-=Et,tr.y-=zt}),Re.has(er,"x")&&(er.x-=Et),Re.has(er,"y")&&(er.y-=zt)}),qt.width=It-Et+_e,qt.height=Qt-zt+Ye})(ft)}),ct("    assignNodeIntersects",function(){(function(yt){Re.forEach(yt.edges(),function(Et){var It,zt,Qt=yt.edge(Et),qt=yt.node(Et.v),_e=yt.node(Et.w);Qt.points?(It=Qt.points[0],zt=Qt.points[Qt.points.length-1]):(Qt.points=[],It=_e,zt=qt),Qt.points.unshift(Oo.intersectRect(qt,It)),Qt.points.push(Oo.intersectRect(_e,zt))})})(ft)}),ct("    reversePoints",function(){(function(yt){Re.forEach(yt.edges(),function(Et){var It=yt.edge(Et);It.reversed&&It.points.reverse()})})(ft)}),ct("    acyclic.undo",function(){il.undo(ft)})})($,G)}),G("  updateInputGraph",function(){(function(ft,ct){Re.forEach(ft.nodes(),function(yt){var Et=ft.node(yt),It=ct.node(yt);Et&&(Et.x=It.x,Et.y=It.y,ct.children(yt).length&&(Et.width=It.width,Et.height=It.height))}),Re.forEach(ft.edges(),function(yt){var Et=ft.edge(yt),It=ct.edge(yt);Et.points=It.points,Re.has(It,"x")&&(Et.x=It.x,Et.y=It.y)}),ft.graph().width=ct.graph().width,ft.graph().height=ct.graph().height})(v,$)})})},Fu=["nodesep","edgesep","ranksep","marginx","marginy"],Pc={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},yl=["acyclicer","ranker","rankdir","align"],kc=["width","height"],ml={width:0,height:0},Lo=["minlen","weight","width","height","labeloffset"],fu={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Zi=["labelpos"];function is(v,M){return Re.mapValues(Re.pick(v,M),Number)}function ic(v){var M={};return Re.forEach(v,function(G,$){M[$.toLowerCase()]=G}),M}var mh=Sn.Graph,xl={graphlib:Sn,layout:uu,debug:{debugOrdering:function(v){var M=hi.buildLayerMatrix(v),G=new mh({compound:!0,multigraph:!0}).setGraph({});return Re.forEach(v.nodes(),function($){G.setNode($,{label:$}),G.setParent($,"layer"+v.node($).rank)}),Re.forEach(v.edges(),function($){G.setEdge($.v,$.w,{},$.name)}),Re.forEach(M,function($,ft){var ct="layer"+ft;G.setNode(ct,{rank:"same"}),Re.reduce($,function(yt,Et){return G.setEdge(yt,Et,{style:"invis"}),Et})}),G}},util:{time:hi.time,notime:hi.notime},version:"0.8.5"},xh=xl.graphlib,Jh=xl.layout;class th{constructor(M){this.cardinality=1,this.include=w.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=D.NODE,this.name=M.name,this.attr=M.attr||{},this.inputs=M.inputs,this.path=M.path||[],this.width=M.width,this.height=M.height}}class bh{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function eh(v){const M=new bh;return v.nodes.map(G=>new th(G)).forEach(G=>{M.nodes[G.name]=G,G.inputs.forEach($=>{(function(ft,ct,yt){yt.name!==ct.name&&ft.edges.push(Object.assign(Object.assign({},yt.attr),{v:yt.name,w:ct.name}))})(M,G,$)})}),M}class Eh{constructor(M,G={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=w.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=D.META,this.path=[],this.name=M,this.metaGraph=Rc(M,b.META,G)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(M=>this.metaGraph.node(M))}leaves(){let M,G=[],$=[this];for(;$.length;){let ft=$.shift();ft.isGroupNode?(M=ft.metaGraph,M.nodes().forEach(ct=>$.push(M.node(ct)))):G.push(ft.name)}return G}}class wh{constructor(M,G){this.v=M,this.w=G,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(M,G){this.baseEdgeList.push(M)}}function rh(v,M={}){return new Eh(v,M)}function bl(v,M){return new wh(v,M)}function Rc(v,M,G){const $=G||{},ft=new xh.Graph($);return ft.setGraph({name:v,rankdir:$.rankdir,type:M,align:$.align}),ft}class El{constructor(M={}){this.graphOptions=M,this.index={},this.graphOptions.compound=!0,this.root=rh(L,this.graphOptions),this.index[L]=this.root}getNodeMap(){return this.index}node(M){return this.index[M]}setNode(M,G){this.index[M]=G}getBridgeGraph(M){const G=this.index[M];if(!G)throw Error("Could not find node in hierarchy: "+M);if(!("metaGraph"in G))return null;const $=G;if($.bridgeGraph)return $.bridgeGraph;const ft=Rc(k,b.BRIDGE,this.graphOptions);if($.bridgeGraph=ft,!G.parentNode||!("metaGraph"in G.parentNode))return ft;const ct=G.parentNode;return[ct.metaGraph,this.getBridgeGraph(ct.name)].forEach(yt=>{yt.edges().filter(Et=>Et.v===M||Et.w===M).forEach(Et=>{const It=Et.w===M;yt.edge(Et).baseEdgeList.forEach(zt=>{const[Qt,qt]=It?[zt.w,Et.v]:[zt.v,Et.w],_e=this.getChildName(M,Qt),Ye={v:It?qt:_e,w:It?_e:qt};let Cr=ft.edge(Ye);Cr||(Cr=bl(Ye.v,Ye.w),Cr.inbound=It,ft.setEdge(Ye.v,Ye.w,Cr)),Cr.addBaseEdge(zt,this)})})}),ft}getChildName(M,G){let $=this.index[G];for(;$;){if($.parentNode&&$.parentNode.name===M)return $.name;$=$.parentNode}throw Error("Could not find immediate child for descendant: "+G)}getPredecessors(M){const G=this.index[M];if(!G)throw Error("Could not find node with name: "+M);return this.getOneWayEdges(G,!0)}getSuccessors(M){const G=this.index[M];if(!G)throw Error("Could not find node with name: "+M);return this.getOneWayEdges(G,!1)}getOneWayEdges(M,G){const $=[];if(!M.parentNode||!M.parentNode.isGroupNode)return $;const ft=M.parentNode,ct=ft.metaGraph,yt=this.getBridgeGraph(ft.name);return wl(ct,M,G,$),wl(yt,M,G,$),$}}function _h(v,M){const{rankDirection:G,align:$}=M,ft=new El({rankdir:G,align:$});return function(ct,yt){Object.keys(yt.nodes).forEach(Et=>{const It=yt.nodes[Et],zt=It.path;let Qt=ct.root;Qt.depth=Math.max(zt.length,Qt.depth);for(let qt=0;qt<zt.length&&(Qt.depth=Math.max(Qt.depth,zt.length-qt),Qt.cardinality+=It.cardinality,qt!==zt.length-1);qt++){const _e=zt[qt];let Ye=ct.node(_e);Ye||(Ye=rh(_e,ct.graphOptions),Ye.path=It.path.slice(0,qt+1),Ye.parentNode=Qt,ct.setNode(_e,Ye),Qt.metaGraph.setNode(_e,Ye)),Qt=Ye}ct.setNode(It.name,It),It.parentNode=Qt,Qt.metaGraph.setNode(It.name,It)})}(ft,v),function(ct,yt){const Et=ct.getNodeMap();let It=[],zt=[];const Qt=(qt,_e)=>{let Ye=0;for(;qt;)_e[Ye++]=qt.name,qt=qt.parentNode;return Ye-1};yt.edges.forEach(qt=>{It=[],zt=[];let _e=Qt(yt.nodes[qt.v],It),Ye=Qt(yt.nodes[qt.w],zt);for(;It[_e]===zt[Ye];)if(_e--,Ye--,_e<0||Ye<0)throw Error("No difference found between ancestor paths.");const Cr=Et[It[_e+1]],$e=It[_e],er=zt[Ye];let tr=Cr.metaGraph.edge($e,er);tr||(tr=bl($e,er),Cr.metaGraph.setEdge($e,er,tr)),tr.addBaseEdge(qt,ct)})}(ft,v),ft}function wl(v,M,G,$){(G?v.inEdges(M.name):v.outEdges(M.name)).forEach(ft=>{const ct=v.edge(ft);$.push(ct)})}class Sh{constructor(M){this.hierarchy=M,this.index={},this.hasSubHierarchy={},this.root=new ne(this.hierarchy.root,this.hierarchy.graphOptions),this.index[M.root.name]=this.root,this.buildSubHierarchy(M.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(M){if(M in this.hasSubHierarchy)return;this.hasSubHierarchy[M]=!0;const G=this.index[M];if(G.node.type!==D.META)return;const $=G,ft=$.node.metaGraph,ct=$.coreGraph;ft.nodes().forEach(Qt=>{const qt=this.getOrCreateRenderNodeByName(Qt);ct.setNode(Qt,qt)}),ft.edges().forEach(Qt=>{const qt=ft.edge(Qt),_e=new xt(qt);ct.setEdge(Qt.v,Qt.w,_e)});const yt=$.node.parentNode;if(!yt)return;const Et=this.getRenderNodeByName(yt.name),It=(Qt,...qt)=>qt.concat([Qt?"IN":"OUT"]).join("~~"),zt=this.hierarchy.getBridgeGraph(M);zt.edges().forEach(Qt=>{const qt=zt.edge(Qt),_e=!!ft.node(Qt.w),[Ye,Cr]=_e?[Qt.w,Qt.v]:[Qt.v,Qt.w],$e=Yn=>{const kn=_e?{v:Yn,w:M}:{v:M,w:Yn};return Et.coreGraph.edge(kn)};let er=$e(Cr);er||(er=$e(It(_e,Cr,yt.name)));const tr=It(_e,M),$r=It(_e,Cr,M);let _n=ct.node($r);if(!_n){let Yn=ct.node(tr);if(!Yn){const ea={name:tr,type:D.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:w.UNSPECIFIED,inbound:_e,attr:{}};Yn=new oc(ea),this.index[tr]=Yn,ct.setNode(tr,Yn)}const kn={name:$r,type:D.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:w.UNSPECIFIED,inbound:_e,attr:{}};_n=new oc(kn),this.index[$r]=_n,ct.setNode($r,_n),ct.setParent($r,tr),Yn.node.cardinality++}const on=new xt(qt);on.adjoiningMetaEdge=er,_e?ct.setEdge($r,Ye,on):ct.setEdge(Ye,$r,on)})}getOrCreateRenderNodeByName(M){if(!M)return null;if(M in this.index)return this.index[M];const G=this.getNodeByName(M);return G?(this.index[M]=G.isGroupNode?new ne(G,this.hierarchy.graphOptions):new oc(G),this.index[M]):null}getRenderNodeByName(M){return this.index[M]}getNodeByName(M){return this.hierarchy.node(M)}}class oc{constructor(M){this.node=M,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=M.width||0,this.height=M.height||0,this.displayName=M.name,this.attr=M.attr}}class xt{constructor(M){this.metaEdge=M,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class ne extends oc{constructor(M,G){super(M);const $=M.metaGraph.graph();G.compound=!0,this.coreGraph=Rc($.name,b.CORE,G)}}function Ce(v,M){v.node.isGroupNode&&function(G,$){const ft=j($);G.coreGraph.nodes().map(ct=>G.coreGraph.node(ct)).forEach(ct=>{var yt,Et,It,zt,Qt,qt;const{height:_e,width:Ye}=ct;switch(ct.node.type){case D.NODE:Object.assign(ct,ft.nodeSize.node),ct.height=_e||ft.nodeSize.node.height,ct.width=Ye||ft.nodeSize.node.width;break;case D.BRIDGE:Object.assign(ct,ft.nodeSize.bridge);break;case D.META:ct.expanded?Ce(ct,$):(Object.assign(ct,ft.nodeSize.meta),ct.height=ft.nodeSize.meta.height,ct.width=ft.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+ct.node.type)}if(!ct.expanded){const Cr=ct.attr;(function($e,er=!1){if($e.coreBox.width=$e.width,$e.coreBox.height=$e.height,!er){const tr=`${$e.displayName}`.length,$r=3;$e.width=Math.max($e.coreBox.width,tr*$r)}})(ct,$&&(ct.node.type===0&&!!(!((Et=(yt=$==null?void 0:$.nodeSize)===null||yt===void 0?void 0:yt.meta)===null||Et===void 0)&&Et.width)||ct.node.type===1&&(!!(!((zt=(It=$==null?void 0:$.nodeSize)===null||It===void 0?void 0:It.node)===null||zt===void 0)&&zt.width)||!!Cr.width)||ct.node.type===2&&!!(!((qt=(Qt=$==null?void 0:$.nodeSize)===null||Qt===void 0?void 0:Qt.bridge)===null||qt===void 0)&&qt.width)))}})}(v,M),v.node.type===D.META&&function(G,$){const ft=j($),ct=ft.subScene.meta;Object.assign(G,ct);const{nodeSep:yt,rankSep:Et,edgeSep:It,align:zt}=ft.graph.meta,Qt={nodesep:yt,ranksep:Et,edgesep:It,align:zt};Object.assign(G.coreBox,function(Ye,Cr){const{ranksep:$e,nodesep:er,edgesep:tr,align:$r}=Cr;Object.assign(Ye.graph(),{ranksep:$e,nodesep:er,edgesep:tr,align:$r});const _n=[];if(Ye.nodes().forEach(da=>{Ye.node(da).node.type!==D.BRIDGE&&_n.push(da)}),!_n.length)return{width:0,height:0};Jh(Ye);let on=1/0,Yn=1/0,kn=-1/0,ea=-1/0;return _n.forEach(da=>{const ia=Ye.node(da),bi=.5*ia.width,ba=ia.x-bi,$i=ia.x+bi;on=ba<on?ba:on,kn=$i>kn?$i:kn;const yi=.5*ia.height,Ya=ia.y-yi,Xi=ia.y+yi;Yn=Ya<Yn?Ya:Yn,ea=Xi>ea?Xi:ea}),Ye.edges().forEach(da=>{const ia=Ye.edge(da),bi=Ye.node(ia.metaEdge.v),ba=Ye.node(ia.metaEdge.w);if(ia.points.length===3&&function(Ya){let Xi=yr(Ya[0],Ya[1]);for(let Yi=1;Yi<Ya.length-1;Yi++){const xo=yr(Ya[Yi],Ya[Yi+1]);if(Math.abs(xo-Xi)>1)return!1;Xi=xo}return!0}(ia.points)){if(bi!=null){const Ya=bi.expanded?bi.x:Br(bi);ia.points[0].x=Ya}if(ba!=null){const Ya=ba.expanded?ba.x:Br(ba);ia.points[2].x=Ya}ia.points=[ia.points[0],ia.points[1]]}const $i=ia.points[ia.points.length-2];ba!=null&&(ia.points[ia.points.length-1]=pr($i,ba));const yi=ia.points[1];bi!=null&&(ia.points[0]=pr(yi,bi)),ia.points.forEach(Ya=>{on=Ya.x<on?Ya.x:on,kn=Ya.x>kn?Ya.x:kn,Yn=Ya.y<Yn?Ya.y:Yn,ea=Ya.y>ea?Ya.y:ea})}),Ye.nodes().forEach(da=>{const ia=Ye.node(da);ia.x-=on,ia.y-=Yn}),Ye.edges().forEach(da=>{Ye.edge(da).points.forEach(ia=>{ia.x-=on,ia.y-=Yn})}),{width:kn-on,height:ea-Yn}}(G.coreGraph,Qt));let qt=0;G.coreGraph.nodeCount()>0&&qt++;const _e=qt<=1?0:qt;G.coreBox.width+=_e+_e,G.coreBox.height=ct.labelHeight+G.coreBox.height,G.width=G.coreBox.width+ct.paddingLeft+ct.paddingRight,G.height=G.paddingTop+G.coreBox.height+G.paddingBottom}(v,M)}function yr(v,M){const G=M.x-v.x,$=M.y-v.y;return 180*Math.atan($/G)/Math.PI}function Br(v){return v.expanded?v.x:v.x-v.width/2+0+v.coreBox.width/2}function pr(v,M){const G=M.expanded?M.x:Br(M),$=M.y,ft=v.x-G,ct=v.y-$;let yt,Et,It=M.expanded?M.width:M.coreBox.width,zt=M.expanded?M.height:M.coreBox.height;return Math.abs(ct)*It/2>Math.abs(ft)*zt/2?(ct<0&&(zt=-zt),yt=ct===0?0:zt/2*ft/ct,Et=zt/2):(ft<0&&(It=-It),yt=It/2,Et=ft===0?0:It/2*ct/ft),{x:G+yt,y:$+Et}}function Tr(v,M,G){var $,ft,ct,yt;const Et=v.nodes.filter((qt,_e,Ye)=>Ye.findIndex(Cr=>Cr.id===qt.id)!==_e).map(qt=>qt.id);if(Et.length)throw new Error(`Duplicated ids found: ${Et.join(", ")}`);const It=function(qt){const _e={nodes:[]},Ye=qt.compound,Cr=Object.keys(Ye||{}),$e=new Map,er=($r,_n=[])=>{if($e.has($r))return $e.get($r);for(let on=0;on<Cr.length;on++){let Yn=Cr[on];if(Ye&&Ye[Yn].indexOf($r)!==-1)return _n.unshift(Yn),er(Yn,_n)}return _n.length===0&&$e.set($r,_n),_n},tr=$r=>qt.edges.filter(_n=>_n.w===$r).map(_n=>({name:_n.v}));return qt.nodes.forEach($r=>{const _n=$r.id,on=[...er(_n),_n];let Yn=tr(_n);_e.nodes.push({name:_n,path:on,inputs:Yn,width:$r.width,height:$r.height,attr:Object.assign({},$r)})}),_e}(v),zt=function(qt,_e){const Ye=($e,er)=>{for(let tr of er.values())if(tr.includes($e))return!0;return!1},Cr=($e,er=[])=>{if(Object.keys($e).length===0)return[...new Set(er)];const tr=new Map(Object.keys($e).map(_n=>[_n,$e[_n]])),$r={};for(let[_n,on]of tr)Ye(_n,tr)?$r[_n]=on:er=er.concat(_n,on);return Cr($r,er)};return Cr(qt).filter($e=>_e.includes($e))}(v.compound||{},(M==null?void 0:M.expanded)||[]),Qt=function(qt,_e){return function(Ye){return new Sh(Ye)}(_h(eh(qt),_e))}(It,{rankDirection:((ft=($=G==null?void 0:G.graph)===null||$===void 0?void 0:$.meta)===null||ft===void 0?void 0:ft.rankDir)||(M==null?void 0:M.rankDirection)||F.graph.meta.rankDir,align:((yt=(ct=G==null?void 0:G.graph)===null||ct===void 0?void 0:ct.meta)===null||yt===void 0?void 0:yt.align)||F.graph.meta.align});return function(qt,_e){_e.forEach(Ye=>{const Cr=qt.getRenderInfoNodes().find(tr=>tr.displayName===Ye);let $e=Cr&&Cr.node&&Cr.node.name||"";const er=qt.getRenderNodeByName($e);if(!er)throw new Error(`No nodes found: ${$e}`);er.expanded=!0,qt.buildSubHierarchy($e)})}(Qt,zt),Ce(Qt.root,G),an(Qt.root)}function Zr(v,M=!1){const G=JSON.parse(JSON.stringify(v)),$={nodes:[G],edges:[...G.edges]};return G.nodes.forEach(function ft(ct){(ct.type===0||ct.type===1)&&$.nodes.push(ct),ct.type===0&&($.edges=$.edges.concat(ct.edges)),Array.isArray(ct.nodes)&&ct.nodes.forEach(ft)}),M&&$.nodes.forEach(ft=>{const ct=$.nodes.find(yt=>yt.id===ft.parentNodeName);if(ct){const yt=ct.x-ct.width/2+ct.paddingLeft,Et=ct.y-ct.height/2+ct.labelHeight+ct.paddingTop;ct.id!==L&&(ft.x+=yt,ft.y+=Et),ft.type===0&&ft.edges.forEach(It=>{It.points.forEach(zt=>{zt.x+=ft.x-ft.width/2+ft.paddingLeft,zt.y+=ft.y-ft.height/2+ft.labelHeight+ft.paddingTop})})}}),$}function en(v,M,G,$){var ft,ct;let yt=[];const Et=((ft=G.find(qt=>qt.id===v))===null||ft===void 0?void 0:ft.path)||[],It=((ct=G.find(qt=>qt.id===M))===null||ct===void 0?void 0:ct.path)||[],zt=[L,...Et].slice(0,Et.length).reverse(),Qt=[L,...It].slice(0,It.length);return zt.forEach(qt=>{const _e=G.find(Ye=>Ye.id===qt);yt=yt.concat(_e.edges.filter(Ye=>Ye.baseEdgeList.some(Cr=>Cr.v===(($==null?void 0:$.v)||v)&&Cr.w===(($==null?void 0:$.w)||M))))}),Qt.filter(qt=>!zt.includes(qt)).forEach(qt=>{const _e=G.find(Ye=>Ye.id===qt);yt=yt.concat(_e.edges.filter(Ye=>Ye.baseEdgeList.some(Cr=>Cr.v===(($==null?void 0:$.v)||v)&&Cr.w===(($==null?void 0:$.w)||M))))}),yt}function an(v){const M=v.coreGraph.nodes().map($=>v.coreGraph.node($));return Object.assign(Object.assign({},Jr(v)),{expanded:v.expanded,nodes:v.expanded?(G=M,G.map($=>$.node.type===D.META?an($):Jr($))):[],edges:v.expanded?dn(v):[]});var G}function Jr(v){return{id:v.node.name,name:v.node.name,type:v.node.type,cardinality:v.node.cardinality,attr:v.attr,parentNodeName:v.node.parentNode?v.node.parentNode.name:null,coreBox:Object.assign({},v.coreBox),x:v.x,y:v.y,width:v.width,height:v.height,radius:v.radius,labelHeight:v.labelHeight,labelOffset:v.labelOffset,outboxWidth:v.outboxWidth,paddingLeft:v.paddingLeft,paddingTop:v.paddingTop,paddingRight:v.paddingRight,paddingBottom:v.paddingBottom,path:v.node.path}}function dn(v){return v.coreGraph.edges().map(M=>({renderInfoEdge:v.coreGraph.edge(M),edge:M})).filter(({renderInfoEdge:M})=>M.metaEdge).map(({edge:M,renderInfoEdge:G})=>{const $=function(ft,ct){const yt=ct.points.map(Et=>Object.assign({},Et));if(ct.adjoiningMetaEdge){const Et=ct.adjoiningMetaEdge.points,It=ct.metaEdge.inbound,zt=It?Et[Et.length-1]:Et[0],Qt=yt[It?0:yt.length-1],qt=ft.x-ft.width/2,_e=ft.y-ft.height/2,Ye=zt.x-qt,Cr=zt.y-_e,$e=-ft.paddingLeft,er=-(ft.paddingTop+ft.labelHeight);Qt.x=Ye+$e,Qt.y=Cr+er}return yt}(v,G);return{adjoiningEdge:G.adjoiningMetaEdge?{w:G.adjoiningMetaEdge.metaEdge.w,v:G.adjoiningMetaEdge.metaEdge.v}:null,inbound:G.metaEdge.inbound,w:M.w,v:M.v,points:$,weight:G.weight,baseEdgeList:G.metaEdge.baseEdgeList,parentNodeName:v.node.name}})}},49685:function(xr,U,z){"use strict";z.r(U),z.d(U,{ARRAY_TYPE:function(){return j},EPSILON:function(){return F},RANDOM:function(){return B},equals:function(){return w},setMatrixArrayType:function(){return L},toRadian:function(){return D}});var F=1e-6,j=typeof Float32Array!="undefined"?Float32Array:Array,B=Math.random;function L(b){j=b}var k=Math.PI/180;function D(b){return b*k}function w(b,g){return Math.abs(b-g)<=F*Math.max(1,Math.abs(b),Math.abs(g))}Math.hypot||(Math.hypot=function(){for(var b=0,g=arguments.length;g--;)b+=arguments[g]*arguments[g];return Math.sqrt(b)})},58204:function(xr,U,z){"use strict";z.r(U),z.d(U,{glMatrix:function(){return w},mat2:function(){return F},mat2d:function(){return j},mat3:function(){return Vr},mat4:function(){return B},quat:function(){return k},quat2:function(){return D},vec2:function(){return Io},vec3:function(){return Pr},vec4:function(){return L}});var F={};z.r(F),z.d(F,{LDU:function(){return tt},add:function(){return ut},adjoint:function(){return P},clone:function(){return g},copy:function(){return y},create:function(){return b},determinant:function(){return N},equals:function(){return Dt},exactEquals:function(){return pt},frob:function(){return it},fromRotation:function(){return Y},fromScaling:function(){return Z},fromValues:function(){return S},identity:function(){return d},invert:function(){return I},mul:function(){return Gt},multiply:function(){return H},multiplyScalar:function(){return Ot},multiplyScalarAndAdd:function(){return te},rotate:function(){return nt},scale:function(){return X},set:function(){return _},str:function(){return J},sub:function(){return K},subtract:function(){return vt},transpose:function(){return E}});var j={};z.r(j),z.d(j,{add:function(){return oe},clone:function(){return at},copy:function(){return ht},create:function(){return p},determinant:function(){return Me},equals:function(){return Lt},exactEquals:function(){return Pe},frob:function(){return jt},fromRotation:function(){return xe},fromScaling:function(){return Bt},fromTranslation:function(){return fe},fromValues:function(){return Mt},identity:function(){return wt},invert:function(){return Vt},mul:function(){return Je},multiply:function(){return Wt},multiplyScalar:function(){return se},multiplyScalarAndAdd:function(){return Ie},rotate:function(){return ae},scale:function(){return he},set:function(){return Ut},str:function(){return Le},sub:function(){return Lr},subtract:function(){return Te},translate:function(){return Se}});var B={};z.r(B),z.d(B,{add:function(){return De},adjoint:function(){return sr},clone:function(){return Mn},copy:function(){return Hr},create:function(){return Xr},determinant:function(){return lr},equals:function(){return Xn},exactEquals:function(){return vn},frob:function(){return Ge},fromQuat:function(){return hn},fromQuat2:function(){return Ee},fromRotation:function(){return Wn},fromRotationTranslation:function(){return Ve},fromRotationTranslationScale:function(){return Nr},fromRotationTranslationScaleOrigin:function(){return gn},fromScaling:function(){return Hn},fromTranslation:function(){return bn},fromValues:function(){return Cn},fromXRotation:function(){return Bn},fromYRotation:function(){return ya},fromZRotation:function(){return q},frustum:function(){return pn},getRotation:function(){return Ur},getScaling:function(){return ar},getTranslation:function(){return nr},identity:function(){return Un},invert:function(){return rr},lookAt:function(){return Xt},mul:function(){return je},multiply:function(){return zr},multiplyScalar:function(){return jr},multiplyScalarAndAdd:function(){return Sr},ortho:function(){return et},orthoNO:function(){return A},orthoZO:function(){return _t},perspective:function(){return bt},perspectiveFromFieldOfView:function(){return T},perspectiveNO:function(){return gt},perspectiveZO:function(){return W},rotate:function(){return ln},rotateX:function(){return $n},rotateY:function(){return Jn},rotateZ:function(){return Da},scale:function(){return wn},set:function(){return Zn},str:function(){return ee},sub:function(){return Er},subtract:function(){return fr},targetTo:function(){return Rt},translate:function(){return fn},transpose:function(){return mn}});var L={};z.r(L),z.d(L,{add:function(){return pe},ceil:function(){return rn},clone:function(){return $t},copy:function(){return re},create:function(){return Kr},cross:function(){return $o},dist:function(){return ki},distance:function(){return Za},div:function(){return Qs},divide:function(){return cr},dot:function(){return bo},equals:function(){return no},exactEquals:function(){return Qo},floor:function(){return Nn},forEach:function(){return Po},fromValues:function(){return Pt},inverse:function(){return po},len:function(){return Ts},length:function(){return Bo},lerp:function(){return Ia},max:function(){return la},min:function(){return An},mul:function(){return Us},multiply:function(){return or},negate:function(){return xi},normalize:function(){return ro},random:function(){return zo},round:function(){return aa},scale:function(){return Ca},scaleAndAdd:function(){return Qa},set:function(){return be},sqrDist:function(){return ao},sqrLen:function(){return Ws},squaredDistance:function(){return Xa},squaredLength:function(){return Ai},str:function(){return Uo},sub:function(){return Eo},subtract:function(){return ke},transformMat4:function(){return ms},transformQuat:function(){return Oa},zero:function(){return qo}});var k={};z.r(k),z.d(k,{add:function(){return so},calculateW:function(){return Is},clone:function(){return Hi},conjugate:function(){return ko},copy:function(){return Ii},create:function(){return wo},dot:function(){return Ro},equals:function(){return Na},exactEquals:function(){return uo},exp:function(){return Ri},fromEuler:function(){return Jo},fromMat3:function(){return oo},fromValues:function(){return So},getAngle:function(){return qn},getAxisAngle:function(){return Ys},identity:function(){return Xs},invert:function(){return cs},len:function(){return Yo},length:function(){return Xo},lerp:function(){return ls},ln:function(){return fs},mul:function(){return ts},multiply:function(){return io},normalize:function(){return Fi},pow:function(){return Os},random:function(){return xn},rotateX:function(){return _o},rotateY:function(){return Ti},rotateZ:function(){return bs},rotationTo:function(){return Mo},scale:function(){return es},set:function(){return yo},setAxes:function(){return Gi},setAxisAngle:function(){return xs},slerp:function(){return Wo},sqlerp:function(){return rs},sqrLen:function(){return za},squaredLength:function(){return Fo},str:function(){return Es}});var D={};z.r(D),z.d(D,{add:function(){return gu},clone:function(){return Co},conjugate:function(){return Cu},copy:function(){return Vs},create:function(){return mo},dot:function(){return Fn},equals:function(){return Au},exactEquals:function(){return Uf},fromMat4:function(){return ru},fromRotation:function(){return Vo},fromRotationTranslation:function(){return Ds},fromRotationTranslationValues:function(){return Ls},fromTranslation:function(){return ns},fromValues:function(){return Ao},getDual:function(){return We},getReal:function(){return me},getTranslation:function(){return En},identity:function(){return hs},invert:function(){return jo},len:function(){return Ki},length:function(){return ws},lerp:function(){return Vu},mul:function(){return pu},multiply:function(){return Hs},normalize:function(){return ju},rotateAroundAxis:function(){return Mu},rotateByQuatAppend:function(){return qi},rotateByQuatPrepend:function(){return js},rotateX:function(){return ja},rotateY:function(){return li},rotateZ:function(){return fo},scale:function(){return Ua},set:function(){return Ft},setDual:function(){return Rr},setReal:function(){return qe},sqrLen:function(){return To},squaredLength:function(){return Oi},str:function(){return cf},translate:function(){return Vn}});var w=z(49685);function b(){var h=new w.ARRAY_TYPE(4);return w.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h}function g(h){var O=new w.ARRAY_TYPE(4);return O[0]=h[0],O[1]=h[1],O[2]=h[2],O[3]=h[3],O}function y(h,O){return h[0]=O[0],h[1]=O[1],h[2]=O[2],h[3]=O[3],h}function d(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h}function S(h,O,dt,St){var kt=new w.ARRAY_TYPE(4);return kt[0]=h,kt[1]=O,kt[2]=dt,kt[3]=St,kt}function _(h,O,dt,St,kt){return h[0]=O,h[1]=dt,h[2]=St,h[3]=kt,h}function E(h,O){if(h===O){var dt=O[1];h[1]=O[2],h[2]=dt}else h[0]=O[0],h[1]=O[2],h[2]=O[1],h[3]=O[3];return h}function I(h,O){var dt=O[0],St=O[1],kt=O[2],Ht=O[3],Zt=dt*Ht-kt*St;return Zt?(Zt=1/Zt,h[0]=Ht*Zt,h[1]=-St*Zt,h[2]=-kt*Zt,h[3]=dt*Zt,h):null}function P(h,O){var dt=O[0];return h[0]=O[3],h[1]=-O[1],h[2]=-O[2],h[3]=dt,h}function N(h){return h[0]*h[3]-h[2]*h[1]}function H(h,O,dt){var St=O[0],kt=O[1],Ht=O[2],Zt=O[3],le=dt[0],ye=dt[1],Oe=dt[2],He=dt[3];return h[0]=St*le+Ht*ye,h[1]=kt*le+Zt*ye,h[2]=St*Oe+Ht*He,h[3]=kt*Oe+Zt*He,h}function nt(h,O,dt){var St=O[0],kt=O[1],Ht=O[2],Zt=O[3],le=Math.sin(dt),ye=Math.cos(dt);return h[0]=St*ye+Ht*le,h[1]=kt*ye+Zt*le,h[2]=St*-le+Ht*ye,h[3]=kt*-le+Zt*ye,h}function X(h,O,dt){var St=O[0],kt=O[1],Ht=O[2],Zt=O[3],le=dt[0],ye=dt[1];return h[0]=St*le,h[1]=kt*le,h[2]=Ht*ye,h[3]=Zt*ye,h}function Y(h,O){var dt=Math.sin(O),St=Math.cos(O);return h[0]=St,h[1]=dt,h[2]=-dt,h[3]=St,h}function Z(h,O){return h[0]=O[0],h[1]=0,h[2]=0,h[3]=O[1],h}function J(h){return"mat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function it(h){return Math.hypot(h[0],h[1],h[2],h[3])}function tt(h,O,dt,St){return h[2]=St[2]/St[0],dt[0]=St[0],dt[1]=St[1],dt[3]=St[3]-h[2]*dt[1],[h,O,dt]}function ut(h,O,dt){return h[0]=O[0]+dt[0],h[1]=O[1]+dt[1],h[2]=O[2]+dt[2],h[3]=O[3]+dt[3],h}function vt(h,O,dt){return h[0]=O[0]-dt[0],h[1]=O[1]-dt[1],h[2]=O[2]-dt[2],h[3]=O[3]-dt[3],h}function pt(h,O){return h[0]===O[0]&&h[1]===O[1]&&h[2]===O[2]&&h[3]===O[3]}function Dt(h,O){var dt=h[0],St=h[1],kt=h[2],Ht=h[3],Zt=O[0],le=O[1],ye=O[2],Oe=O[3];return Math.abs(dt-Zt)<=w.EPSILON*Math.max(1,Math.abs(dt),Math.abs(Zt))&&Math.abs(St-le)<=w.EPSILON*Math.max(1,Math.abs(St),Math.abs(le))&&Math.abs(kt-ye)<=w.EPSILON*Math.max(1,Math.abs(kt),Math.abs(ye))&&Math.abs(Ht-Oe)<=w.EPSILON*Math.max(1,Math.abs(Ht),Math.abs(Oe))}function Ot(h,O,dt){return h[0]=O[0]*dt,h[1]=O[1]*dt,h[2]=O[2]*dt,h[3]=O[3]*dt,h}function te(h,O,dt,St){return h[0]=O[0]+dt[0]*St,h[1]=O[1]+dt[1]*St,h[2]=O[2]+dt[2]*St,h[3]=O[3]+dt[3]*St,h}var Gt=H,K=vt;function p(){var h=new w.ARRAY_TYPE(6);return w.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[4]=0,h[5]=0),h[0]=1,h[3]=1,h}function at(h){var O=new w.ARRAY_TYPE(6);return O[0]=h[0],O[1]=h[1],O[2]=h[2],O[3]=h[3],O[4]=h[4],O[5]=h[5],O}function ht(h,O){return h[0]=O[0],h[1]=O[1],h[2]=O[2],h[3]=O[3],h[4]=O[4],h[5]=O[5],h}function wt(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h}function Mt(h,O,dt,St,kt,Ht){var Zt=new w.ARRAY_TYPE(6);return Zt[0]=h,Zt[1]=O,Zt[2]=dt,Zt[3]=St,Zt[4]=kt,Zt[5]=Ht,Zt}function Ut(h,O,dt,St,kt,Ht,Zt){return h[0]=O,h[1]=dt,h[2]=St,h[3]=kt,h[4]=Ht,h[5]=Zt,h}function Vt(h,O){var dt=O[0],St=O[1],kt=O[2],Ht=O[3],Zt=O[4],le=O[5],ye=dt*Ht-St*kt;return ye?(ye=1/ye,h[0]=Ht*ye,h[1]=-St*ye,h[2]=-kt*ye,h[3]=dt*ye,h[4]=(kt*le-Ht*Zt)*ye,h[5]=(St*Zt-dt*le)*ye,h):null}function Me(h){return h[0]*h[3]-h[1]*h[2]}function Wt(h,O,dt){var St=O[0],kt=O[1],Ht=O[2],Zt=O[3],le=O[4],ye=O[5],Oe=dt[0],He=dt[1],Ar=dt[2],Ir=dt[3],_r=dt[4],Qr=dt[5];return h[0]=St*Oe+Ht*He,h[1]=kt*Oe+Zt*He,h[2]=St*Ar+Ht*Ir,h[3]=kt*Ar+Zt*Ir,h[4]=St*_r+Ht*Qr+le,h[5]=kt*_r+Zt*Qr+ye,h}function ae(h,O,dt){var St=O[0],kt=O[1],Ht=O[2],Zt=O[3],le=O[4],ye=O[5],Oe=Math.sin(dt),He=Math.cos(dt);return h[0]=St*He+Ht*Oe,h[1]=kt*He+Zt*Oe,h[2]=St*-Oe+Ht*He,h[3]=kt*-Oe+Zt*He,h[4]=le,h[5]=ye,h}function he(h,O,dt){var St=O[0],kt=O[1],Ht=O[2],Zt=O[3],le=O[4],ye=O[5],Oe=dt[0],He=dt[1];return h[0]=St*Oe,h[1]=kt*Oe,h[2]=Ht*He,h[3]=Zt*He,h[4]=le,h[5]=ye,h}function Se(h,O,dt){var St=O[0],kt=O[1],Ht=O[2],Zt=O[3],le=O[4],ye=O[5],Oe=dt[0],He=dt[1];return h[0]=St,h[1]=kt,h[2]=Ht,h[3]=Zt,h[4]=St*Oe+Ht*He+le,h[5]=kt*Oe+Zt*He+ye,h}function xe(h,O){var dt=Math.sin(O),St=Math.cos(O);return h[0]=St,h[1]=dt,h[2]=-dt,h[3]=St,h[4]=0,h[5]=0,h}function Bt(h,O){return h[0]=O[0],h[1]=0,h[2]=0,h[3]=O[1],h[4]=0,h[5]=0,h}function fe(h,O){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=O[0],h[5]=O[1],h}function Le(h){return"mat2d("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+")"}function jt(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],1)}function oe(h,O,dt){return h[0]=O[0]+dt[0],h[1]=O[1]+dt[1],h[2]=O[2]+dt[2],h[3]=O[3]+dt[3],h[4]=O[4]+dt[4],h[5]=O[5]+dt[5],h}function Te(h,O,dt){return h[0]=O[0]-dt[0],h[1]=O[1]-dt[1],h[2]=O[2]-dt[2],h[3]=O[3]-dt[3],h[4]=O[4]-dt[4],h[5]=O[5]-dt[5],h}function se(h,O,dt){return h[0]=O[0]*dt,h[1]=O[1]*dt,h[2]=O[2]*dt,h[3]=O[3]*dt,h[4]=O[4]*dt,h[5]=O[5]*dt,h}function Ie(h,O,dt,St){return h[0]=O[0]+dt[0]*St,h[1]=O[1]+dt[1]*St,h[2]=O[2]+dt[2]*St,h[3]=O[3]+dt[3]*St,h[4]=O[4]+dt[4]*St,h[5]=O[5]+dt[5]*St,h}function Pe(h,O){return h[0]===O[0]&&h[1]===O[1]&&h[2]===O[2]&&h[3]===O[3]&&h[4]===O[4]&&h[5]===O[5]}function Lt(h,O){var dt=h[0],St=h[1],kt=h[2],Ht=h[3],Zt=h[4],le=h[5],ye=O[0],Oe=O[1],He=O[2],Ar=O[3],Ir=O[4],_r=O[5];return Math.abs(dt-ye)<=w.EPSILON*Math.max(1,Math.abs(dt),Math.abs(ye))&&Math.abs(St-Oe)<=w.EPSILON*Math.max(1,Math.abs(St),Math.abs(Oe))&&Math.abs(kt-He)<=w.EPSILON*Math.max(1,Math.abs(kt),Math.abs(He))&&Math.abs(Ht-Ar)<=w.EPSILON*Math.max(1,Math.abs(Ht),Math.abs(Ar))&&Math.abs(Zt-Ir)<=w.EPSILON*Math.max(1,Math.abs(Zt),Math.abs(Ir))&&Math.abs(le-_r)<=w.EPSILON*Math.max(1,Math.abs(le),Math.abs(_r))}var Je=Wt,Lr=Te,Vr=z(35600);function Xr(){var h=new w.ARRAY_TYPE(16);return w.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h}function Mn(h){var O=new w.ARRAY_TYPE(16);return O[0]=h[0],O[1]=h[1],O[2]=h[2],O[3]=h[3],O[4]=h[4],O[5]=h[5],O[6]=h[6],O[7]=h[7],O[8]=h[8],O[9]=h[9],O[10]=h[10],O[11]=h[11],O[12]=h[12],O[13]=h[13],O[14]=h[14],O[15]=h[15],O}function Hr(h,O){return h[0]=O[0],h[1]=O[1],h[2]=O[2],h[3]=O[3],h[4]=O[4],h[5]=O[5],h[6]=O[6],h[7]=O[7],h[8]=O[8],h[9]=O[9],h[10]=O[10],h[11]=O[11],h[12]=O[12],h[13]=O[13],h[14]=O[14],h[15]=O[15],h}function Cn(h,O,dt,St,kt,Ht,Zt,le,ye,Oe,He,Ar,Ir,_r,Qr,yn){var kr=new w.ARRAY_TYPE(16);return kr[0]=h,kr[1]=O,kr[2]=dt,kr[3]=St,kr[4]=kt,kr[5]=Ht,kr[6]=Zt,kr[7]=le,kr[8]=ye,kr[9]=Oe,kr[10]=He,kr[11]=Ar,kr[12]=Ir,kr[13]=_r,kr[14]=Qr,kr[15]=yn,kr}function Zn(h,O,dt,St,kt,Ht,Zt,le,ye,Oe,He,Ar,Ir,_r,Qr,yn,kr){return h[0]=O,h[1]=dt,h[2]=St,h[3]=kt,h[4]=Ht,h[5]=Zt,h[6]=le,h[7]=ye,h[8]=Oe,h[9]=He,h[10]=Ar,h[11]=Ir,h[12]=_r,h[13]=Qr,h[14]=yn,h[15]=kr,h}function Un(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function mn(h,O){if(h===O){var dt=O[1],St=O[2],kt=O[3],Ht=O[6],Zt=O[7],le=O[11];h[1]=O[4],h[2]=O[8],h[3]=O[12],h[4]=dt,h[6]=O[9],h[7]=O[13],h[8]=St,h[9]=Ht,h[11]=O[14],h[12]=kt,h[13]=Zt,h[14]=le}else h[0]=O[0],h[1]=O[4],h[2]=O[8],h[3]=O[12],h[4]=O[1],h[5]=O[5],h[6]=O[9],h[7]=O[13],h[8]=O[2],h[9]=O[6],h[10]=O[10],h[11]=O[14],h[12]=O[3],h[13]=O[7],h[14]=O[11],h[15]=O[15];return h}function rr(h,O){var dt=O[0],St=O[1],kt=O[2],Ht=O[3],Zt=O[4],le=O[5],ye=O[6],Oe=O[7],He=O[8],Ar=O[9],Ir=O[10],_r=O[11],Qr=O[12],yn=O[13],kr=O[14],Tn=O[15],Ea=dt*le-St*Zt,wa=dt*ye-kt*Zt,ga=dt*Oe-Ht*Zt,ta=St*ye-kt*le,ha=St*Oe-Ht*le,Bi=kt*Oe-Ht*ye,_i=He*yn-Ar*Qr,Li=He*kr-Ir*Qr,Di=He*Tn-_r*Qr,Ni=Ar*kr-Ir*yn,zi=Ar*Tn-_r*yn,co=Ir*Tn-_r*kr,Ha=Ea*co-wa*zi+ga*Ni+ta*Di-ha*Li+Bi*_i;return Ha?(Ha=1/Ha,h[0]=(le*co-ye*zi+Oe*Ni)*Ha,h[1]=(kt*zi-St*co-Ht*Ni)*Ha,h[2]=(yn*Bi-kr*ha+Tn*ta)*Ha,h[3]=(Ir*ha-Ar*Bi-_r*ta)*Ha,h[4]=(ye*Di-Zt*co-Oe*Li)*Ha,h[5]=(dt*co-kt*Di+Ht*Li)*Ha,h[6]=(kr*ga-Qr*Bi-Tn*wa)*Ha,h[7]=(He*Bi-Ir*ga+_r*wa)*Ha,h[8]=(Zt*zi-le*Di+Oe*_i)*Ha,h[9]=(St*Di-dt*zi-Ht*_i)*Ha,h[10]=(Qr*ha-yn*ga+Tn*Ea)*Ha,h[11]=(Ar*ga-He*ha-_r*Ea)*Ha,h[12]=(le*Li-Zt*Ni-ye*_i)*Ha,h[13]=(dt*Ni-St*Li+kt*_i)*Ha,h[14]=(yn*wa-Qr*ta-kr*Ea)*Ha,h[15]=(He*ta-Ar*wa+Ir*Ea)*Ha,h):null}function sr(h,O){var dt=O[0],St=O[1],kt=O[2],Ht=O[3],Zt=O[4],le=O[5],ye=O[6],Oe=O[7],He=O[8],Ar=O[9],Ir=O[10],_r=O[11],Qr=O[12],yn=O[13],kr=O[14],Tn=O[15];return h[0]=le*(Ir*Tn-_r*kr)-Ar*(ye*Tn-Oe*kr)+yn*(ye*_r-Oe*Ir),h[1]=-(St*(Ir*Tn-_r*kr)-Ar*(kt*Tn-Ht*kr)+yn*(kt*_r-Ht*Ir)),h[2]=St*(ye*Tn-Oe*kr)-le*(kt*Tn-Ht*kr)+yn*(kt*Oe-Ht*ye),h[3]=-(St*(ye*_r-Oe*Ir)-le*(kt*_r-Ht*Ir)+Ar*(kt*Oe-Ht*ye)),h[4]=-(Zt*(Ir*Tn-_r*kr)-He*(ye*Tn-Oe*kr)+Qr*(ye*_r-Oe*Ir)),h[5]=dt*(Ir*Tn-_r*kr)-He*(kt*Tn-Ht*kr)+Qr*(kt*_r-Ht*Ir),h[6]=-(dt*(ye*Tn-Oe*kr)-Zt*(kt*Tn-Ht*kr)+Qr*(kt*Oe-Ht*ye)),h[7]=dt*(ye*_r-Oe*Ir)-Zt*(kt*_r-Ht*Ir)+He*(kt*Oe-Ht*ye),h[8]=Zt*(Ar*Tn-_r*yn)-He*(le*Tn-Oe*yn)+Qr*(le*_r-Oe*Ar),h[9]=-(dt*(Ar*Tn-_r*yn)-He*(St*Tn-Ht*yn)+Qr*(St*_r-Ht*Ar)),h[10]=dt*(le*Tn-Oe*yn)-Zt*(St*Tn-Ht*yn)+Qr*(St*Oe-Ht*le),h[11]=-(dt*(le*_r-Oe*Ar)-Zt*(St*_r-Ht*Ar)+He*(St*Oe-Ht*le)),h[12]=-(Zt*(Ar*kr-Ir*yn)-He*(le*kr-ye*yn)+Qr*(le*Ir-ye*Ar)),h[13]=dt*(Ar*kr-Ir*yn)-He*(St*kr-kt*yn)+Qr*(St*Ir-kt*Ar),h[14]=-(dt*(le*kr-ye*yn)-Zt*(St*kr-kt*yn)+Qr*(St*ye-kt*le)),h[15]=dt*(le*Ir-ye*Ar)-Zt*(St*Ir-kt*Ar)+He*(St*ye-kt*le),h}function lr(h){var O=h[0],dt=h[1],St=h[2],kt=h[3],Ht=h[4],Zt=h[5],le=h[6],ye=h[7],Oe=h[8],He=h[9],Ar=h[10],Ir=h[11],_r=h[12],Qr=h[13],yn=h[14],kr=h[15],Tn=O*Zt-dt*Ht,Ea=O*le-St*Ht,wa=O*ye-kt*Ht,ga=dt*le-St*Zt,ta=dt*ye-kt*Zt,ha=St*ye-kt*le,Bi=Oe*Qr-He*_r,_i=Oe*yn-Ar*_r,Li=Oe*kr-Ir*_r,Di=He*yn-Ar*Qr,Ni=He*kr-Ir*Qr,zi=Ar*kr-Ir*yn;return Tn*zi-Ea*Ni+wa*Di+ga*Li-ta*_i+ha*Bi}function zr(h,O,dt){var St=O[0],kt=O[1],Ht=O[2],Zt=O[3],le=O[4],ye=O[5],Oe=O[6],He=O[7],Ar=O[8],Ir=O[9],_r=O[10],Qr=O[11],yn=O[12],kr=O[13],Tn=O[14],Ea=O[15],wa=dt[0],ga=dt[1],ta=dt[2],ha=dt[3];return h[0]=wa*St+ga*le+ta*Ar+ha*yn,h[1]=wa*kt+ga*ye+ta*Ir+ha*kr,h[2]=wa*Ht+ga*Oe+ta*_r+ha*Tn,h[3]=wa*Zt+ga*He+ta*Qr+ha*Ea,wa=dt[4],ga=dt[5],ta=dt[6],ha=dt[7],h[4]=wa*St+ga*le+ta*Ar+ha*yn,h[5]=wa*kt+ga*ye+ta*Ir+ha*kr,h[6]=wa*Ht+ga*Oe+ta*_r+ha*Tn,h[7]=wa*Zt+ga*He+ta*Qr+ha*Ea,wa=dt[8],ga=dt[9],ta=dt[10],ha=dt[11],h[8]=wa*St+ga*le+ta*Ar+ha*yn,h[9]=wa*kt+ga*ye+ta*Ir+ha*kr,h[10]=wa*Ht+ga*Oe+ta*_r+ha*Tn,h[11]=wa*Zt+ga*He+ta*Qr+ha*Ea,wa=dt[12],ga=dt[13],ta=dt[14],ha=dt[15],h[12]=wa*St+ga*le+ta*Ar+ha*yn,h[13]=wa*kt+ga*ye+ta*Ir+ha*kr,h[14]=wa*Ht+ga*Oe+ta*_r+ha*Tn,h[15]=wa*Zt+ga*He+ta*Qr+ha*Ea,h}function fn(h,O,dt){var St=dt[0],kt=dt[1],Ht=dt[2],Zt,le,ye,Oe,He,Ar,Ir,_r,Qr,yn,kr,Tn;return O===h?(h[12]=O[0]*St+O[4]*kt+O[8]*Ht+O[12],h[13]=O[1]*St+O[5]*kt+O[9]*Ht+O[13],h[14]=O[2]*St+O[6]*kt+O[10]*Ht+O[14],h[15]=O[3]*St+O[7]*kt+O[11]*Ht+O[15]):(Zt=O[0],le=O[1],ye=O[2],Oe=O[3],He=O[4],Ar=O[5],Ir=O[6],_r=O[7],Qr=O[8],yn=O[9],kr=O[10],Tn=O[11],h[0]=Zt,h[1]=le,h[2]=ye,h[3]=Oe,h[4]=He,h[5]=Ar,h[6]=Ir,h[7]=_r,h[8]=Qr,h[9]=yn,h[10]=kr,h[11]=Tn,h[12]=Zt*St+He*kt+Qr*Ht+O[12],h[13]=le*St+Ar*kt+yn*Ht+O[13],h[14]=ye*St+Ir*kt+kr*Ht+O[14],h[15]=Oe*St+_r*kt+Tn*Ht+O[15]),h}function wn(h,O,dt){var St=dt[0],kt=dt[1],Ht=dt[2];return h[0]=O[0]*St,h[1]=O[1]*St,h[2]=O[2]*St,h[3]=O[3]*St,h[4]=O[4]*kt,h[5]=O[5]*kt,h[6]=O[6]*kt,h[7]=O[7]*kt,h[8]=O[8]*Ht,h[9]=O[9]*Ht,h[10]=O[10]*Ht,h[11]=O[11]*Ht,h[12]=O[12],h[13]=O[13],h[14]=O[14],h[15]=O[15],h}function ln(h,O,dt,St){var kt=St[0],Ht=St[1],Zt=St[2],le=Math.hypot(kt,Ht,Zt),ye,Oe,He,Ar,Ir,_r,Qr,yn,kr,Tn,Ea,wa,ga,ta,ha,Bi,_i,Li,Di,Ni,zi,co,Ha,Ja;return le<w.EPSILON?null:(le=1/le,kt*=le,Ht*=le,Zt*=le,ye=Math.sin(dt),Oe=Math.cos(dt),He=1-Oe,Ar=O[0],Ir=O[1],_r=O[2],Qr=O[3],yn=O[4],kr=O[5],Tn=O[6],Ea=O[7],wa=O[8],ga=O[9],ta=O[10],ha=O[11],Bi=kt*kt*He+Oe,_i=Ht*kt*He+Zt*ye,Li=Zt*kt*He-Ht*ye,Di=kt*Ht*He-Zt*ye,Ni=Ht*Ht*He+Oe,zi=Zt*Ht*He+kt*ye,co=kt*Zt*He+Ht*ye,Ha=Ht*Zt*He-kt*ye,Ja=Zt*Zt*He+Oe,h[0]=Ar*Bi+yn*_i+wa*Li,h[1]=Ir*Bi+kr*_i+ga*Li,h[2]=_r*Bi+Tn*_i+ta*Li,h[3]=Qr*Bi+Ea*_i+ha*Li,h[4]=Ar*Di+yn*Ni+wa*zi,h[5]=Ir*Di+kr*Ni+ga*zi,h[6]=_r*Di+Tn*Ni+ta*zi,h[7]=Qr*Di+Ea*Ni+ha*zi,h[8]=Ar*co+yn*Ha+wa*Ja,h[9]=Ir*co+kr*Ha+ga*Ja,h[10]=_r*co+Tn*Ha+ta*Ja,h[11]=Qr*co+Ea*Ha+ha*Ja,O!==h&&(h[12]=O[12],h[13]=O[13],h[14]=O[14],h[15]=O[15]),h)}function $n(h,O,dt){var St=Math.sin(dt),kt=Math.cos(dt),Ht=O[4],Zt=O[5],le=O[6],ye=O[7],Oe=O[8],He=O[9],Ar=O[10],Ir=O[11];return O!==h&&(h[0]=O[0],h[1]=O[1],h[2]=O[2],h[3]=O[3],h[12]=O[12],h[13]=O[13],h[14]=O[14],h[15]=O[15]),h[4]=Ht*kt+Oe*St,h[5]=Zt*kt+He*St,h[6]=le*kt+Ar*St,h[7]=ye*kt+Ir*St,h[8]=Oe*kt-Ht*St,h[9]=He*kt-Zt*St,h[10]=Ar*kt-le*St,h[11]=Ir*kt-ye*St,h}function Jn(h,O,dt){var St=Math.sin(dt),kt=Math.cos(dt),Ht=O[0],Zt=O[1],le=O[2],ye=O[3],Oe=O[8],He=O[9],Ar=O[10],Ir=O[11];return O!==h&&(h[4]=O[4],h[5]=O[5],h[6]=O[6],h[7]=O[7],h[12]=O[12],h[13]=O[13],h[14]=O[14],h[15]=O[15]),h[0]=Ht*kt-Oe*St,h[1]=Zt*kt-He*St,h[2]=le*kt-Ar*St,h[3]=ye*kt-Ir*St,h[8]=Ht*St+Oe*kt,h[9]=Zt*St+He*kt,h[10]=le*St+Ar*kt,h[11]=ye*St+Ir*kt,h}function Da(h,O,dt){var St=Math.sin(dt),kt=Math.cos(dt),Ht=O[0],Zt=O[1],le=O[2],ye=O[3],Oe=O[4],He=O[5],Ar=O[6],Ir=O[7];return O!==h&&(h[8]=O[8],h[9]=O[9],h[10]=O[10],h[11]=O[11],h[12]=O[12],h[13]=O[13],h[14]=O[14],h[15]=O[15]),h[0]=Ht*kt+Oe*St,h[1]=Zt*kt+He*St,h[2]=le*kt+Ar*St,h[3]=ye*kt+Ir*St,h[4]=Oe*kt-Ht*St,h[5]=He*kt-Zt*St,h[6]=Ar*kt-le*St,h[7]=Ir*kt-ye*St,h}function bn(h,O){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=O[0],h[13]=O[1],h[14]=O[2],h[15]=1,h}function Hn(h,O){return h[0]=O[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=O[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=O[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Wn(h,O,dt){var St=dt[0],kt=dt[1],Ht=dt[2],Zt=Math.hypot(St,kt,Ht),le,ye,Oe;return Zt<w.EPSILON?null:(Zt=1/Zt,St*=Zt,kt*=Zt,Ht*=Zt,le=Math.sin(O),ye=Math.cos(O),Oe=1-ye,h[0]=St*St*Oe+ye,h[1]=kt*St*Oe+Ht*le,h[2]=Ht*St*Oe-kt*le,h[3]=0,h[4]=St*kt*Oe-Ht*le,h[5]=kt*kt*Oe+ye,h[6]=Ht*kt*Oe+St*le,h[7]=0,h[8]=St*Ht*Oe+kt*le,h[9]=kt*Ht*Oe-St*le,h[10]=Ht*Ht*Oe+ye,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h)}function Bn(h,O){var dt=Math.sin(O),St=Math.cos(O);return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=St,h[6]=dt,h[7]=0,h[8]=0,h[9]=-dt,h[10]=St,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function ya(h,O){var dt=Math.sin(O),St=Math.cos(O);return h[0]=St,h[1]=0,h[2]=-dt,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=dt,h[9]=0,h[10]=St,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function q(h,O){var dt=Math.sin(O),St=Math.cos(O);return h[0]=St,h[1]=dt,h[2]=0,h[3]=0,h[4]=-dt,h[5]=St,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Ve(h,O,dt){var St=O[0],kt=O[1],Ht=O[2],Zt=O[3],le=St+St,ye=kt+kt,Oe=Ht+Ht,He=St*le,Ar=St*ye,Ir=St*Oe,_r=kt*ye,Qr=kt*Oe,yn=Ht*Oe,kr=Zt*le,Tn=Zt*ye,Ea=Zt*Oe;return h[0]=1-(_r+yn),h[1]=Ar+Ea,h[2]=Ir-Tn,h[3]=0,h[4]=Ar-Ea,h[5]=1-(He+yn),h[6]=Qr+kr,h[7]=0,h[8]=Ir+Tn,h[9]=Qr-kr,h[10]=1-(He+_r),h[11]=0,h[12]=dt[0],h[13]=dt[1],h[14]=dt[2],h[15]=1,h}function Ee(h,O){var dt=new w.ARRAY_TYPE(3),St=-O[0],kt=-O[1],Ht=-O[2],Zt=O[3],le=O[4],ye=O[5],Oe=O[6],He=O[7],Ar=St*St+kt*kt+Ht*Ht+Zt*Zt;return Ar>0?(dt[0]=(le*Zt+He*St+ye*Ht-Oe*kt)*2/Ar,dt[1]=(ye*Zt+He*kt+Oe*St-le*Ht)*2/Ar,dt[2]=(Oe*Zt+He*Ht+le*kt-ye*St)*2/Ar):(dt[0]=(le*Zt+He*St+ye*Ht-Oe*kt)*2,dt[1]=(ye*Zt+He*kt+Oe*St-le*Ht)*2,dt[2]=(Oe*Zt+He*Ht+le*kt-ye*St)*2),Ve(h,O,dt),h}function nr(h,O){return h[0]=O[12],h[1]=O[13],h[2]=O[14],h}function ar(h,O){var dt=O[0],St=O[1],kt=O[2],Ht=O[4],Zt=O[5],le=O[6],ye=O[8],Oe=O[9],He=O[10];return h[0]=Math.hypot(dt,St,kt),h[1]=Math.hypot(Ht,Zt,le),h[2]=Math.hypot(ye,Oe,He),h}function Ur(h,O){var dt=new w.ARRAY_TYPE(3);ar(dt,O);var St=1/dt[0],kt=1/dt[1],Ht=1/dt[2],Zt=O[0]*St,le=O[1]*kt,ye=O[2]*Ht,Oe=O[4]*St,He=O[5]*kt,Ar=O[6]*Ht,Ir=O[8]*St,_r=O[9]*kt,Qr=O[10]*Ht,yn=Zt+He+Qr,kr=0;return yn>0?(kr=Math.sqrt(yn+1)*2,h[3]=.25*kr,h[0]=(Ar-_r)/kr,h[1]=(Ir-ye)/kr,h[2]=(le-Oe)/kr):Zt>He&&Zt>Qr?(kr=Math.sqrt(1+Zt-He-Qr)*2,h[3]=(Ar-_r)/kr,h[0]=.25*kr,h[1]=(le+Oe)/kr,h[2]=(Ir+ye)/kr):He>Qr?(kr=Math.sqrt(1+He-Zt-Qr)*2,h[3]=(Ir-ye)/kr,h[0]=(le+Oe)/kr,h[1]=.25*kr,h[2]=(Ar+_r)/kr):(kr=Math.sqrt(1+Qr-Zt-He)*2,h[3]=(le-Oe)/kr,h[0]=(Ir+ye)/kr,h[1]=(Ar+_r)/kr,h[2]=.25*kr),h}function Nr(h,O,dt,St){var kt=O[0],Ht=O[1],Zt=O[2],le=O[3],ye=kt+kt,Oe=Ht+Ht,He=Zt+Zt,Ar=kt*ye,Ir=kt*Oe,_r=kt*He,Qr=Ht*Oe,yn=Ht*He,kr=Zt*He,Tn=le*ye,Ea=le*Oe,wa=le*He,ga=St[0],ta=St[1],ha=St[2];return h[0]=(1-(Qr+kr))*ga,h[1]=(Ir+wa)*ga,h[2]=(_r-Ea)*ga,h[3]=0,h[4]=(Ir-wa)*ta,h[5]=(1-(Ar+kr))*ta,h[6]=(yn+Tn)*ta,h[7]=0,h[8]=(_r+Ea)*ha,h[9]=(yn-Tn)*ha,h[10]=(1-(Ar+Qr))*ha,h[11]=0,h[12]=dt[0],h[13]=dt[1],h[14]=dt[2],h[15]=1,h}function gn(h,O,dt,St,kt){var Ht=O[0],Zt=O[1],le=O[2],ye=O[3],Oe=Ht+Ht,He=Zt+Zt,Ar=le+le,Ir=Ht*Oe,_r=Ht*He,Qr=Ht*Ar,yn=Zt*He,kr=Zt*Ar,Tn=le*Ar,Ea=ye*Oe,wa=ye*He,ga=ye*Ar,ta=St[0],ha=St[1],Bi=St[2],_i=kt[0],Li=kt[1],Di=kt[2],Ni=(1-(yn+Tn))*ta,zi=(_r+ga)*ta,co=(Qr-wa)*ta,Ha=(_r-ga)*ha,Ja=(1-(Ir+Tn))*ha,Ns=(kr+Ea)*ha,_s=(Qr+wa)*Bi,vs=(kr-Ea)*Bi,yu=(1-(Ir+yn))*Bi;return h[0]=Ni,h[1]=zi,h[2]=co,h[3]=0,h[4]=Ha,h[5]=Ja,h[6]=Ns,h[7]=0,h[8]=_s,h[9]=vs,h[10]=yu,h[11]=0,h[12]=dt[0]+_i-(Ni*_i+Ha*Li+_s*Di),h[13]=dt[1]+Li-(zi*_i+Ja*Li+vs*Di),h[14]=dt[2]+Di-(co*_i+Ns*Li+yu*Di),h[15]=1,h}function hn(h,O){var dt=O[0],St=O[1],kt=O[2],Ht=O[3],Zt=dt+dt,le=St+St,ye=kt+kt,Oe=dt*Zt,He=St*Zt,Ar=St*le,Ir=kt*Zt,_r=kt*le,Qr=kt*ye,yn=Ht*Zt,kr=Ht*le,Tn=Ht*ye;return h[0]=1-Ar-Qr,h[1]=He+Tn,h[2]=Ir-kr,h[3]=0,h[4]=He-Tn,h[5]=1-Oe-Qr,h[6]=_r+yn,h[7]=0,h[8]=Ir+kr,h[9]=_r-yn,h[10]=1-Oe-Ar,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function pn(h,O,dt,St,kt,Ht,Zt){var le=1/(dt-O),ye=1/(kt-St),Oe=1/(Ht-Zt);return h[0]=Ht*2*le,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Ht*2*ye,h[6]=0,h[7]=0,h[8]=(dt+O)*le,h[9]=(kt+St)*ye,h[10]=(Zt+Ht)*Oe,h[11]=-1,h[12]=0,h[13]=0,h[14]=Zt*Ht*2*Oe,h[15]=0,h}function gt(h,O,dt,St,kt){var Ht=1/Math.tan(O/2),Zt;return h[0]=Ht/dt,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Ht,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,kt!=null&&kt!==1/0?(Zt=1/(St-kt),h[10]=(kt+St)*Zt,h[14]=2*kt*St*Zt):(h[10]=-1,h[14]=-2*St),h}var bt=gt;function W(h,O,dt,St,kt){var Ht=1/Math.tan(O/2),Zt;return h[0]=Ht/dt,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Ht,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,kt!=null&&kt!==1/0?(Zt=1/(St-kt),h[10]=kt*Zt,h[14]=kt*St*Zt):(h[10]=-1,h[14]=-St),h}function T(h,O,dt,St){var kt=Math.tan(O.upDegrees*Math.PI/180),Ht=Math.tan(O.downDegrees*Math.PI/180),Zt=Math.tan(O.leftDegrees*Math.PI/180),le=Math.tan(O.rightDegrees*Math.PI/180),ye=2/(Zt+le),Oe=2/(kt+Ht);return h[0]=ye,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Oe,h[6]=0,h[7]=0,h[8]=-((Zt-le)*ye*.5),h[9]=(kt-Ht)*Oe*.5,h[10]=St/(dt-St),h[11]=-1,h[12]=0,h[13]=0,h[14]=St*dt/(dt-St),h[15]=0,h}function A(h,O,dt,St,kt,Ht,Zt){var le=1/(O-dt),ye=1/(St-kt),Oe=1/(Ht-Zt);return h[0]=-2*le,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*ye,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*Oe,h[11]=0,h[12]=(O+dt)*le,h[13]=(kt+St)*ye,h[14]=(Zt+Ht)*Oe,h[15]=1,h}var et=A;function _t(h,O,dt,St,kt,Ht,Zt){var le=1/(O-dt),ye=1/(St-kt),Oe=1/(Ht-Zt);return h[0]=-2*le,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*ye,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=Oe,h[11]=0,h[12]=(O+dt)*le,h[13]=(kt+St)*ye,h[14]=Ht*Oe,h[15]=1,h}function Xt(h,O,dt,St){var kt,Ht,Zt,le,ye,Oe,He,Ar,Ir,_r,Qr=O[0],yn=O[1],kr=O[2],Tn=St[0],Ea=St[1],wa=St[2],ga=dt[0],ta=dt[1],ha=dt[2];return Math.abs(Qr-ga)<w.EPSILON&&Math.abs(yn-ta)<w.EPSILON&&Math.abs(kr-ha)<w.EPSILON?Un(h):(He=Qr-ga,Ar=yn-ta,Ir=kr-ha,_r=1/Math.hypot(He,Ar,Ir),He*=_r,Ar*=_r,Ir*=_r,kt=Ea*Ir-wa*Ar,Ht=wa*He-Tn*Ir,Zt=Tn*Ar-Ea*He,_r=Math.hypot(kt,Ht,Zt),_r?(_r=1/_r,kt*=_r,Ht*=_r,Zt*=_r):(kt=0,Ht=0,Zt=0),le=Ar*Zt-Ir*Ht,ye=Ir*kt-He*Zt,Oe=He*Ht-Ar*kt,_r=Math.hypot(le,ye,Oe),_r?(_r=1/_r,le*=_r,ye*=_r,Oe*=_r):(le=0,ye=0,Oe=0),h[0]=kt,h[1]=le,h[2]=He,h[3]=0,h[4]=Ht,h[5]=ye,h[6]=Ar,h[7]=0,h[8]=Zt,h[9]=Oe,h[10]=Ir,h[11]=0,h[12]=-(kt*Qr+Ht*yn+Zt*kr),h[13]=-(le*Qr+ye*yn+Oe*kr),h[14]=-(He*Qr+Ar*yn+Ir*kr),h[15]=1,h)}function Rt(h,O,dt,St){var kt=O[0],Ht=O[1],Zt=O[2],le=St[0],ye=St[1],Oe=St[2],He=kt-dt[0],Ar=Ht-dt[1],Ir=Zt-dt[2],_r=He*He+Ar*Ar+Ir*Ir;_r>0&&(_r=1/Math.sqrt(_r),He*=_r,Ar*=_r,Ir*=_r);var Qr=ye*Ir-Oe*Ar,yn=Oe*He-le*Ir,kr=le*Ar-ye*He;return _r=Qr*Qr+yn*yn+kr*kr,_r>0&&(_r=1/Math.sqrt(_r),Qr*=_r,yn*=_r,kr*=_r),h[0]=Qr,h[1]=yn,h[2]=kr,h[3]=0,h[4]=Ar*kr-Ir*yn,h[5]=Ir*Qr-He*kr,h[6]=He*yn-Ar*Qr,h[7]=0,h[8]=He,h[9]=Ar,h[10]=Ir,h[11]=0,h[12]=kt,h[13]=Ht,h[14]=Zt,h[15]=1,h}function ee(h){return"mat4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+", "+h[9]+", "+h[10]+", "+h[11]+", "+h[12]+", "+h[13]+", "+h[14]+", "+h[15]+")"}function Ge(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15])}function De(h,O,dt){return h[0]=O[0]+dt[0],h[1]=O[1]+dt[1],h[2]=O[2]+dt[2],h[3]=O[3]+dt[3],h[4]=O[4]+dt[4],h[5]=O[5]+dt[5],h[6]=O[6]+dt[6],h[7]=O[7]+dt[7],h[8]=O[8]+dt[8],h[9]=O[9]+dt[9],h[10]=O[10]+dt[10],h[11]=O[11]+dt[11],h[12]=O[12]+dt[12],h[13]=O[13]+dt[13],h[14]=O[14]+dt[14],h[15]=O[15]+dt[15],h}function fr(h,O,dt){return h[0]=O[0]-dt[0],h[1]=O[1]-dt[1],h[2]=O[2]-dt[2],h[3]=O[3]-dt[3],h[4]=O[4]-dt[4],h[5]=O[5]-dt[5],h[6]=O[6]-dt[6],h[7]=O[7]-dt[7],h[8]=O[8]-dt[8],h[9]=O[9]-dt[9],h[10]=O[10]-dt[10],h[11]=O[11]-dt[11],h[12]=O[12]-dt[12],h[13]=O[13]-dt[13],h[14]=O[14]-dt[14],h[15]=O[15]-dt[15],h}function jr(h,O,dt){return h[0]=O[0]*dt,h[1]=O[1]*dt,h[2]=O[2]*dt,h[3]=O[3]*dt,h[4]=O[4]*dt,h[5]=O[5]*dt,h[6]=O[6]*dt,h[7]=O[7]*dt,h[8]=O[8]*dt,h[9]=O[9]*dt,h[10]=O[10]*dt,h[11]=O[11]*dt,h[12]=O[12]*dt,h[13]=O[13]*dt,h[14]=O[14]*dt,h[15]=O[15]*dt,h}function Sr(h,O,dt,St){return h[0]=O[0]+dt[0]*St,h[1]=O[1]+dt[1]*St,h[2]=O[2]+dt[2]*St,h[3]=O[3]+dt[3]*St,h[4]=O[4]+dt[4]*St,h[5]=O[5]+dt[5]*St,h[6]=O[6]+dt[6]*St,h[7]=O[7]+dt[7]*St,h[8]=O[8]+dt[8]*St,h[9]=O[9]+dt[9]*St,h[10]=O[10]+dt[10]*St,h[11]=O[11]+dt[11]*St,h[12]=O[12]+dt[12]*St,h[13]=O[13]+dt[13]*St,h[14]=O[14]+dt[14]*St,h[15]=O[15]+dt[15]*St,h}function vn(h,O){return h[0]===O[0]&&h[1]===O[1]&&h[2]===O[2]&&h[3]===O[3]&&h[4]===O[4]&&h[5]===O[5]&&h[6]===O[6]&&h[7]===O[7]&&h[8]===O[8]&&h[9]===O[9]&&h[10]===O[10]&&h[11]===O[11]&&h[12]===O[12]&&h[13]===O[13]&&h[14]===O[14]&&h[15]===O[15]}function Xn(h,O){var dt=h[0],St=h[1],kt=h[2],Ht=h[3],Zt=h[4],le=h[5],ye=h[6],Oe=h[7],He=h[8],Ar=h[9],Ir=h[10],_r=h[11],Qr=h[12],yn=h[13],kr=h[14],Tn=h[15],Ea=O[0],wa=O[1],ga=O[2],ta=O[3],ha=O[4],Bi=O[5],_i=O[6],Li=O[7],Di=O[8],Ni=O[9],zi=O[10],co=O[11],Ha=O[12],Ja=O[13],Ns=O[14],_s=O[15];return Math.abs(dt-Ea)<=w.EPSILON*Math.max(1,Math.abs(dt),Math.abs(Ea))&&Math.abs(St-wa)<=w.EPSILON*Math.max(1,Math.abs(St),Math.abs(wa))&&Math.abs(kt-ga)<=w.EPSILON*Math.max(1,Math.abs(kt),Math.abs(ga))&&Math.abs(Ht-ta)<=w.EPSILON*Math.max(1,Math.abs(Ht),Math.abs(ta))&&Math.abs(Zt-ha)<=w.EPSILON*Math.max(1,Math.abs(Zt),Math.abs(ha))&&Math.abs(le-Bi)<=w.EPSILON*Math.max(1,Math.abs(le),Math.abs(Bi))&&Math.abs(ye-_i)<=w.EPSILON*Math.max(1,Math.abs(ye),Math.abs(_i))&&Math.abs(Oe-Li)<=w.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(Li))&&Math.abs(He-Di)<=w.EPSILON*Math.max(1,Math.abs(He),Math.abs(Di))&&Math.abs(Ar-Ni)<=w.EPSILON*Math.max(1,Math.abs(Ar),Math.abs(Ni))&&Math.abs(Ir-zi)<=w.EPSILON*Math.max(1,Math.abs(Ir),Math.abs(zi))&&Math.abs(_r-co)<=w.EPSILON*Math.max(1,Math.abs(_r),Math.abs(co))&&Math.abs(Qr-Ha)<=w.EPSILON*Math.max(1,Math.abs(Qr),Math.abs(Ha))&&Math.abs(yn-Ja)<=w.EPSILON*Math.max(1,Math.abs(yn),Math.abs(Ja))&&Math.abs(kr-Ns)<=w.EPSILON*Math.max(1,Math.abs(kr),Math.abs(Ns))&&Math.abs(Tn-_s)<=w.EPSILON*Math.max(1,Math.abs(Tn),Math.abs(_s))}var je=zr,Er=fr,Pr=z(77160);function Kr(){var h=new w.ARRAY_TYPE(4);return w.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[3]=0),h}function $t(h){var O=new w.ARRAY_TYPE(4);return O[0]=h[0],O[1]=h[1],O[2]=h[2],O[3]=h[3],O}function Pt(h,O,dt,St){var kt=new w.ARRAY_TYPE(4);return kt[0]=h,kt[1]=O,kt[2]=dt,kt[3]=St,kt}function re(h,O){return h[0]=O[0],h[1]=O[1],h[2]=O[2],h[3]=O[3],h}function be(h,O,dt,St,kt){return h[0]=O,h[1]=dt,h[2]=St,h[3]=kt,h}function pe(h,O,dt){return h[0]=O[0]+dt[0],h[1]=O[1]+dt[1],h[2]=O[2]+dt[2],h[3]=O[3]+dt[3],h}function ke(h,O,dt){return h[0]=O[0]-dt[0],h[1]=O[1]-dt[1],h[2]=O[2]-dt[2],h[3]=O[3]-dt[3],h}function or(h,O,dt){return h[0]=O[0]*dt[0],h[1]=O[1]*dt[1],h[2]=O[2]*dt[2],h[3]=O[3]*dt[3],h}function cr(h,O,dt){return h[0]=O[0]/dt[0],h[1]=O[1]/dt[1],h[2]=O[2]/dt[2],h[3]=O[3]/dt[3],h}function rn(h,O){return h[0]=Math.ceil(O[0]),h[1]=Math.ceil(O[1]),h[2]=Math.ceil(O[2]),h[3]=Math.ceil(O[3]),h}function Nn(h,O){return h[0]=Math.floor(O[0]),h[1]=Math.floor(O[1]),h[2]=Math.floor(O[2]),h[3]=Math.floor(O[3]),h}function An(h,O,dt){return h[0]=Math.min(O[0],dt[0]),h[1]=Math.min(O[1],dt[1]),h[2]=Math.min(O[2],dt[2]),h[3]=Math.min(O[3],dt[3]),h}function la(h,O,dt){return h[0]=Math.max(O[0],dt[0]),h[1]=Math.max(O[1],dt[1]),h[2]=Math.max(O[2],dt[2]),h[3]=Math.max(O[3],dt[3]),h}function aa(h,O){return h[0]=Math.round(O[0]),h[1]=Math.round(O[1]),h[2]=Math.round(O[2]),h[3]=Math.round(O[3]),h}function Ca(h,O,dt){return h[0]=O[0]*dt,h[1]=O[1]*dt,h[2]=O[2]*dt,h[3]=O[3]*dt,h}function Qa(h,O,dt,St){return h[0]=O[0]+dt[0]*St,h[1]=O[1]+dt[1]*St,h[2]=O[2]+dt[2]*St,h[3]=O[3]+dt[3]*St,h}function Za(h,O){var dt=O[0]-h[0],St=O[1]-h[1],kt=O[2]-h[2],Ht=O[3]-h[3];return Math.hypot(dt,St,kt,Ht)}function Xa(h,O){var dt=O[0]-h[0],St=O[1]-h[1],kt=O[2]-h[2],Ht=O[3]-h[3];return dt*dt+St*St+kt*kt+Ht*Ht}function Bo(h){var O=h[0],dt=h[1],St=h[2],kt=h[3];return Math.hypot(O,dt,St,kt)}function Ai(h){var O=h[0],dt=h[1],St=h[2],kt=h[3];return O*O+dt*dt+St*St+kt*kt}function xi(h,O){return h[0]=-O[0],h[1]=-O[1],h[2]=-O[2],h[3]=-O[3],h}function po(h,O){return h[0]=1/O[0],h[1]=1/O[1],h[2]=1/O[2],h[3]=1/O[3],h}function ro(h,O){var dt=O[0],St=O[1],kt=O[2],Ht=O[3],Zt=dt*dt+St*St+kt*kt+Ht*Ht;return Zt>0&&(Zt=1/Math.sqrt(Zt)),h[0]=dt*Zt,h[1]=St*Zt,h[2]=kt*Zt,h[3]=Ht*Zt,h}function bo(h,O){return h[0]*O[0]+h[1]*O[1]+h[2]*O[2]+h[3]*O[3]}function $o(h,O,dt,St){var kt=dt[0]*St[1]-dt[1]*St[0],Ht=dt[0]*St[2]-dt[2]*St[0],Zt=dt[0]*St[3]-dt[3]*St[0],le=dt[1]*St[2]-dt[2]*St[1],ye=dt[1]*St[3]-dt[3]*St[1],Oe=dt[2]*St[3]-dt[3]*St[2],He=O[0],Ar=O[1],Ir=O[2],_r=O[3];return h[0]=Ar*Oe-Ir*ye+_r*le,h[1]=-(He*Oe)+Ir*Zt-_r*Ht,h[2]=He*ye-Ar*Zt+_r*kt,h[3]=-(He*le)+Ar*Ht-Ir*kt,h}function Ia(h,O,dt,St){var kt=O[0],Ht=O[1],Zt=O[2],le=O[3];return h[0]=kt+St*(dt[0]-kt),h[1]=Ht+St*(dt[1]-Ht),h[2]=Zt+St*(dt[2]-Zt),h[3]=le+St*(dt[3]-le),h}function zo(h,O){O=O||1;var dt,St,kt,Ht,Zt,le;do dt=w.RANDOM()*2-1,St=w.RANDOM()*2-1,Zt=dt*dt+St*St;while(Zt>=1);do kt=w.RANDOM()*2-1,Ht=w.RANDOM()*2-1,le=kt*kt+Ht*Ht;while(le>=1);var ye=Math.sqrt((1-Zt)/le);return h[0]=O*dt,h[1]=O*St,h[2]=O*kt*ye,h[3]=O*Ht*ye,h}function ms(h,O,dt){var St=O[0],kt=O[1],Ht=O[2],Zt=O[3];return h[0]=dt[0]*St+dt[4]*kt+dt[8]*Ht+dt[12]*Zt,h[1]=dt[1]*St+dt[5]*kt+dt[9]*Ht+dt[13]*Zt,h[2]=dt[2]*St+dt[6]*kt+dt[10]*Ht+dt[14]*Zt,h[3]=dt[3]*St+dt[7]*kt+dt[11]*Ht+dt[15]*Zt,h}function Oa(h,O,dt){var St=O[0],kt=O[1],Ht=O[2],Zt=dt[0],le=dt[1],ye=dt[2],Oe=dt[3],He=Oe*St+le*Ht-ye*kt,Ar=Oe*kt+ye*St-Zt*Ht,Ir=Oe*Ht+Zt*kt-le*St,_r=-Zt*St-le*kt-ye*Ht;return h[0]=He*Oe+_r*-Zt+Ar*-ye-Ir*-le,h[1]=Ar*Oe+_r*-le+Ir*-Zt-He*-ye,h[2]=Ir*Oe+_r*-ye+He*-le-Ar*-Zt,h[3]=O[3],h}function qo(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h}function Uo(h){return"vec4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function Qo(h,O){return h[0]===O[0]&&h[1]===O[1]&&h[2]===O[2]&&h[3]===O[3]}function no(h,O){var dt=h[0],St=h[1],kt=h[2],Ht=h[3],Zt=O[0],le=O[1],ye=O[2],Oe=O[3];return Math.abs(dt-Zt)<=w.EPSILON*Math.max(1,Math.abs(dt),Math.abs(Zt))&&Math.abs(St-le)<=w.EPSILON*Math.max(1,Math.abs(St),Math.abs(le))&&Math.abs(kt-ye)<=w.EPSILON*Math.max(1,Math.abs(kt),Math.abs(ye))&&Math.abs(Ht-Oe)<=w.EPSILON*Math.max(1,Math.abs(Ht),Math.abs(Oe))}var Eo=ke,Us=or,Qs=cr,ki=Za,ao=Xa,Ts=Bo,Ws=Ai,Po=function(){var h=Kr();return function(O,dt,St,kt,Ht,Zt){var le,ye;for(dt||(dt=4),St||(St=0),kt?ye=Math.min(kt*dt+St,O.length):ye=O.length,le=St;le<ye;le+=dt)h[0]=O[le],h[1]=O[le+1],h[2]=O[le+2],h[3]=O[le+3],Ht(h,h,Zt),O[le]=h[0],O[le+1]=h[1],O[le+2]=h[2],O[le+3]=h[3];return O}}();function wo(){var h=new w.ARRAY_TYPE(4);return w.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function Xs(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h}function xs(h,O,dt){dt=dt*.5;var St=Math.sin(dt);return h[0]=St*O[0],h[1]=St*O[1],h[2]=St*O[2],h[3]=Math.cos(dt),h}function Ys(h,O){var dt=Math.acos(O[3])*2,St=Math.sin(dt/2);return St>w.EPSILON?(h[0]=O[0]/St,h[1]=O[1]/St,h[2]=O[2]/St):(h[0]=1,h[1]=0,h[2]=0),dt}function qn(h,O){var dt=Ro(h,O);return Math.acos(2*dt*dt-1)}function io(h,O,dt){var St=O[0],kt=O[1],Ht=O[2],Zt=O[3],le=dt[0],ye=dt[1],Oe=dt[2],He=dt[3];return h[0]=St*He+Zt*le+kt*Oe-Ht*ye,h[1]=kt*He+Zt*ye+Ht*le-St*Oe,h[2]=Ht*He+Zt*Oe+St*ye-kt*le,h[3]=Zt*He-St*le-kt*ye-Ht*Oe,h}function _o(h,O,dt){dt*=.5;var St=O[0],kt=O[1],Ht=O[2],Zt=O[3],le=Math.sin(dt),ye=Math.cos(dt);return h[0]=St*ye+Zt*le,h[1]=kt*ye+Ht*le,h[2]=Ht*ye-kt*le,h[3]=Zt*ye-St*le,h}function Ti(h,O,dt){dt*=.5;var St=O[0],kt=O[1],Ht=O[2],Zt=O[3],le=Math.sin(dt),ye=Math.cos(dt);return h[0]=St*ye-Ht*le,h[1]=kt*ye+Zt*le,h[2]=Ht*ye+St*le,h[3]=Zt*ye-kt*le,h}function bs(h,O,dt){dt*=.5;var St=O[0],kt=O[1],Ht=O[2],Zt=O[3],le=Math.sin(dt),ye=Math.cos(dt);return h[0]=St*ye+kt*le,h[1]=kt*ye-St*le,h[2]=Ht*ye+Zt*le,h[3]=Zt*ye-Ht*le,h}function Is(h,O){var dt=O[0],St=O[1],kt=O[2];return h[0]=dt,h[1]=St,h[2]=kt,h[3]=Math.sqrt(Math.abs(1-dt*dt-St*St-kt*kt)),h}function Ri(h,O){var dt=O[0],St=O[1],kt=O[2],Ht=O[3],Zt=Math.sqrt(dt*dt+St*St+kt*kt),le=Math.exp(Ht),ye=Zt>0?le*Math.sin(Zt)/Zt:0;return h[0]=dt*ye,h[1]=St*ye,h[2]=kt*ye,h[3]=le*Math.cos(Zt),h}function fs(h,O){var dt=O[0],St=O[1],kt=O[2],Ht=O[3],Zt=Math.sqrt(dt*dt+St*St+kt*kt),le=Zt>0?Math.atan2(Zt,Ht)/Zt:0;return h[0]=dt*le,h[1]=St*le,h[2]=kt*le,h[3]=.5*Math.log(dt*dt+St*St+kt*kt+Ht*Ht),h}function Os(h,O,dt){return fs(h,O),es(h,h,dt),Ri(h,h),h}function Wo(h,O,dt,St){var kt=O[0],Ht=O[1],Zt=O[2],le=O[3],ye=dt[0],Oe=dt[1],He=dt[2],Ar=dt[3],Ir,_r,Qr,yn,kr;return _r=kt*ye+Ht*Oe+Zt*He+le*Ar,_r<0&&(_r=-_r,ye=-ye,Oe=-Oe,He=-He,Ar=-Ar),1-_r>w.EPSILON?(Ir=Math.acos(_r),Qr=Math.sin(Ir),yn=Math.sin((1-St)*Ir)/Qr,kr=Math.sin(St*Ir)/Qr):(yn=1-St,kr=St),h[0]=yn*kt+kr*ye,h[1]=yn*Ht+kr*Oe,h[2]=yn*Zt+kr*He,h[3]=yn*le+kr*Ar,h}function xn(h){var O=w.RANDOM(),dt=w.RANDOM(),St=w.RANDOM(),kt=Math.sqrt(1-O),Ht=Math.sqrt(O);return h[0]=kt*Math.sin(2*Math.PI*dt),h[1]=kt*Math.cos(2*Math.PI*dt),h[2]=Ht*Math.sin(2*Math.PI*St),h[3]=Ht*Math.cos(2*Math.PI*St),h}function cs(h,O){var dt=O[0],St=O[1],kt=O[2],Ht=O[3],Zt=dt*dt+St*St+kt*kt+Ht*Ht,le=Zt?1/Zt:0;return h[0]=-dt*le,h[1]=-St*le,h[2]=-kt*le,h[3]=Ht*le,h}function ko(h,O){return h[0]=-O[0],h[1]=-O[1],h[2]=-O[2],h[3]=O[3],h}function oo(h,O){var dt=O[0]+O[4]+O[8],St;if(dt>0)St=Math.sqrt(dt+1),h[3]=.5*St,St=.5/St,h[0]=(O[5]-O[7])*St,h[1]=(O[6]-O[2])*St,h[2]=(O[1]-O[3])*St;else{var kt=0;O[4]>O[0]&&(kt=1),O[8]>O[kt*3+kt]&&(kt=2);var Ht=(kt+1)%3,Zt=(kt+2)%3;St=Math.sqrt(O[kt*3+kt]-O[Ht*3+Ht]-O[Zt*3+Zt]+1),h[kt]=.5*St,St=.5/St,h[3]=(O[Ht*3+Zt]-O[Zt*3+Ht])*St,h[Ht]=(O[Ht*3+kt]+O[kt*3+Ht])*St,h[Zt]=(O[Zt*3+kt]+O[kt*3+Zt])*St}return h}function Jo(h,O,dt,St){var kt=.5*Math.PI/180;O*=kt,dt*=kt,St*=kt;var Ht=Math.sin(O),Zt=Math.cos(O),le=Math.sin(dt),ye=Math.cos(dt),Oe=Math.sin(St),He=Math.cos(St);return h[0]=Ht*ye*He-Zt*le*Oe,h[1]=Zt*le*He+Ht*ye*Oe,h[2]=Zt*ye*Oe-Ht*le*He,h[3]=Zt*ye*He+Ht*le*Oe,h}function Es(h){return"quat("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}var Hi=$t,So=Pt,Ii=re,yo=be,so=pe,ts=io,es=Ca,Ro=bo,ls=Ia,Xo=Bo,Yo=Xo,Fo=Ai,za=Fo,Fi=ro,uo=Qo,Na=no,Mo=function(){var h=Pr.create(),O=Pr.fromValues(1,0,0),dt=Pr.fromValues(0,1,0);return function(St,kt,Ht){var Zt=Pr.dot(kt,Ht);return Zt<-.999999?(Pr.cross(h,O,kt),Pr.len(h)<1e-6&&Pr.cross(h,dt,kt),Pr.normalize(h,h),xs(St,h,Math.PI),St):Zt>.999999?(St[0]=0,St[1]=0,St[2]=0,St[3]=1,St):(Pr.cross(h,kt,Ht),St[0]=h[0],St[1]=h[1],St[2]=h[2],St[3]=1+Zt,Fi(St,St))}}(),rs=function(){var h=wo(),O=wo();return function(dt,St,kt,Ht,Zt,le){return Wo(h,St,Zt,le),Wo(O,kt,Ht,le),Wo(dt,h,O,2*le*(1-le)),dt}}(),Gi=function(){var h=Vr.create();return function(O,dt,St,kt){return h[0]=St[0],h[3]=St[1],h[6]=St[2],h[1]=kt[0],h[4]=kt[1],h[7]=kt[2],h[2]=-dt[0],h[5]=-dt[1],h[8]=-dt[2],Fi(O,oo(O,h))}}();function mo(){var h=new w.ARRAY_TYPE(8);return w.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[4]=0,h[5]=0,h[6]=0,h[7]=0),h[3]=1,h}function Co(h){var O=new w.ARRAY_TYPE(8);return O[0]=h[0],O[1]=h[1],O[2]=h[2],O[3]=h[3],O[4]=h[4],O[5]=h[5],O[6]=h[6],O[7]=h[7],O}function Ao(h,O,dt,St,kt,Ht,Zt,le){var ye=new w.ARRAY_TYPE(8);return ye[0]=h,ye[1]=O,ye[2]=dt,ye[3]=St,ye[4]=kt,ye[5]=Ht,ye[6]=Zt,ye[7]=le,ye}function Ls(h,O,dt,St,kt,Ht,Zt){var le=new w.ARRAY_TYPE(8);le[0]=h,le[1]=O,le[2]=dt,le[3]=St;var ye=kt*.5,Oe=Ht*.5,He=Zt*.5;return le[4]=ye*St+Oe*dt-He*O,le[5]=Oe*St+He*h-ye*dt,le[6]=He*St+ye*O-Oe*h,le[7]=-ye*h-Oe*O-He*dt,le}function Ds(h,O,dt){var St=dt[0]*.5,kt=dt[1]*.5,Ht=dt[2]*.5,Zt=O[0],le=O[1],ye=O[2],Oe=O[3];return h[0]=Zt,h[1]=le,h[2]=ye,h[3]=Oe,h[4]=St*Oe+kt*ye-Ht*le,h[5]=kt*Oe+Ht*Zt-St*ye,h[6]=Ht*Oe+St*le-kt*Zt,h[7]=-St*Zt-kt*le-Ht*ye,h}function ns(h,O){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=O[0]*.5,h[5]=O[1]*.5,h[6]=O[2]*.5,h[7]=0,h}function Vo(h,O){return h[0]=O[0],h[1]=O[1],h[2]=O[2],h[3]=O[3],h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function ru(h,O){var dt=wo();Ur(dt,O);var St=new w.ARRAY_TYPE(3);return nr(St,O),Ds(h,dt,St),h}function Vs(h,O){return h[0]=O[0],h[1]=O[1],h[2]=O[2],h[3]=O[3],h[4]=O[4],h[5]=O[5],h[6]=O[6],h[7]=O[7],h}function hs(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function Ft(h,O,dt,St,kt,Ht,Zt,le,ye){return h[0]=O,h[1]=dt,h[2]=St,h[3]=kt,h[4]=Ht,h[5]=Zt,h[6]=le,h[7]=ye,h}var me=Ii;function We(h,O){return h[0]=O[4],h[1]=O[5],h[2]=O[6],h[3]=O[7],h}var qe=Ii;function Rr(h,O){return h[4]=O[0],h[5]=O[1],h[6]=O[2],h[7]=O[3],h}function En(h,O){var dt=O[4],St=O[5],kt=O[6],Ht=O[7],Zt=-O[0],le=-O[1],ye=-O[2],Oe=O[3];return h[0]=(dt*Oe+Ht*Zt+St*ye-kt*le)*2,h[1]=(St*Oe+Ht*le+kt*Zt-dt*ye)*2,h[2]=(kt*Oe+Ht*ye+dt*le-St*Zt)*2,h}function Vn(h,O,dt){var St=O[0],kt=O[1],Ht=O[2],Zt=O[3],le=dt[0]*.5,ye=dt[1]*.5,Oe=dt[2]*.5,He=O[4],Ar=O[5],Ir=O[6],_r=O[7];return h[0]=St,h[1]=kt,h[2]=Ht,h[3]=Zt,h[4]=Zt*le+kt*Oe-Ht*ye+He,h[5]=Zt*ye+Ht*le-St*Oe+Ar,h[6]=Zt*Oe+St*ye-kt*le+Ir,h[7]=-St*le-kt*ye-Ht*Oe+_r,h}function ja(h,O,dt){var St=-O[0],kt=-O[1],Ht=-O[2],Zt=O[3],le=O[4],ye=O[5],Oe=O[6],He=O[7],Ar=le*Zt+He*St+ye*Ht-Oe*kt,Ir=ye*Zt+He*kt+Oe*St-le*Ht,_r=Oe*Zt+He*Ht+le*kt-ye*St,Qr=He*Zt-le*St-ye*kt-Oe*Ht;return _o(h,O,dt),St=h[0],kt=h[1],Ht=h[2],Zt=h[3],h[4]=Ar*Zt+Qr*St+Ir*Ht-_r*kt,h[5]=Ir*Zt+Qr*kt+_r*St-Ar*Ht,h[6]=_r*Zt+Qr*Ht+Ar*kt-Ir*St,h[7]=Qr*Zt-Ar*St-Ir*kt-_r*Ht,h}function li(h,O,dt){var St=-O[0],kt=-O[1],Ht=-O[2],Zt=O[3],le=O[4],ye=O[5],Oe=O[6],He=O[7],Ar=le*Zt+He*St+ye*Ht-Oe*kt,Ir=ye*Zt+He*kt+Oe*St-le*Ht,_r=Oe*Zt+He*Ht+le*kt-ye*St,Qr=He*Zt-le*St-ye*kt-Oe*Ht;return Ti(h,O,dt),St=h[0],kt=h[1],Ht=h[2],Zt=h[3],h[4]=Ar*Zt+Qr*St+Ir*Ht-_r*kt,h[5]=Ir*Zt+Qr*kt+_r*St-Ar*Ht,h[6]=_r*Zt+Qr*Ht+Ar*kt-Ir*St,h[7]=Qr*Zt-Ar*St-Ir*kt-_r*Ht,h}function fo(h,O,dt){var St=-O[0],kt=-O[1],Ht=-O[2],Zt=O[3],le=O[4],ye=O[5],Oe=O[6],He=O[7],Ar=le*Zt+He*St+ye*Ht-Oe*kt,Ir=ye*Zt+He*kt+Oe*St-le*Ht,_r=Oe*Zt+He*Ht+le*kt-ye*St,Qr=He*Zt-le*St-ye*kt-Oe*Ht;return bs(h,O,dt),St=h[0],kt=h[1],Ht=h[2],Zt=h[3],h[4]=Ar*Zt+Qr*St+Ir*Ht-_r*kt,h[5]=Ir*Zt+Qr*kt+_r*St-Ar*Ht,h[6]=_r*Zt+Qr*Ht+Ar*kt-Ir*St,h[7]=Qr*Zt-Ar*St-Ir*kt-_r*Ht,h}function qi(h,O,dt){var St=dt[0],kt=dt[1],Ht=dt[2],Zt=dt[3],le=O[0],ye=O[1],Oe=O[2],He=O[3];return h[0]=le*Zt+He*St+ye*Ht-Oe*kt,h[1]=ye*Zt+He*kt+Oe*St-le*Ht,h[2]=Oe*Zt+He*Ht+le*kt-ye*St,h[3]=He*Zt-le*St-ye*kt-Oe*Ht,le=O[4],ye=O[5],Oe=O[6],He=O[7],h[4]=le*Zt+He*St+ye*Ht-Oe*kt,h[5]=ye*Zt+He*kt+Oe*St-le*Ht,h[6]=Oe*Zt+He*Ht+le*kt-ye*St,h[7]=He*Zt-le*St-ye*kt-Oe*Ht,h}function js(h,O,dt){var St=O[0],kt=O[1],Ht=O[2],Zt=O[3],le=dt[0],ye=dt[1],Oe=dt[2],He=dt[3];return h[0]=St*He+Zt*le+kt*Oe-Ht*ye,h[1]=kt*He+Zt*ye+Ht*le-St*Oe,h[2]=Ht*He+Zt*Oe+St*ye-kt*le,h[3]=Zt*He-St*le-kt*ye-Ht*Oe,le=dt[4],ye=dt[5],Oe=dt[6],He=dt[7],h[4]=St*He+Zt*le+kt*Oe-Ht*ye,h[5]=kt*He+Zt*ye+Ht*le-St*Oe,h[6]=Ht*He+Zt*Oe+St*ye-kt*le,h[7]=Zt*He-St*le-kt*ye-Ht*Oe,h}function Mu(h,O,dt,St){if(Math.abs(St)<w.EPSILON)return Vs(h,O);var kt=Math.hypot(dt[0],dt[1],dt[2]);St=St*.5;var Ht=Math.sin(St),Zt=Ht*dt[0]/kt,le=Ht*dt[1]/kt,ye=Ht*dt[2]/kt,Oe=Math.cos(St),He=O[0],Ar=O[1],Ir=O[2],_r=O[3];h[0]=He*Oe+_r*Zt+Ar*ye-Ir*le,h[1]=Ar*Oe+_r*le+Ir*Zt-He*ye,h[2]=Ir*Oe+_r*ye+He*le-Ar*Zt,h[3]=_r*Oe-He*Zt-Ar*le-Ir*ye;var Qr=O[4],yn=O[5],kr=O[6],Tn=O[7];return h[4]=Qr*Oe+Tn*Zt+yn*ye-kr*le,h[5]=yn*Oe+Tn*le+kr*Zt-Qr*ye,h[6]=kr*Oe+Tn*ye+Qr*le-yn*Zt,h[7]=Tn*Oe-Qr*Zt-yn*le-kr*ye,h}function gu(h,O,dt){return h[0]=O[0]+dt[0],h[1]=O[1]+dt[1],h[2]=O[2]+dt[2],h[3]=O[3]+dt[3],h[4]=O[4]+dt[4],h[5]=O[5]+dt[5],h[6]=O[6]+dt[6],h[7]=O[7]+dt[7],h}function Hs(h,O,dt){var St=O[0],kt=O[1],Ht=O[2],Zt=O[3],le=dt[4],ye=dt[5],Oe=dt[6],He=dt[7],Ar=O[4],Ir=O[5],_r=O[6],Qr=O[7],yn=dt[0],kr=dt[1],Tn=dt[2],Ea=dt[3];return h[0]=St*Ea+Zt*yn+kt*Tn-Ht*kr,h[1]=kt*Ea+Zt*kr+Ht*yn-St*Tn,h[2]=Ht*Ea+Zt*Tn+St*kr-kt*yn,h[3]=Zt*Ea-St*yn-kt*kr-Ht*Tn,h[4]=St*He+Zt*le+kt*Oe-Ht*ye+Ar*Ea+Qr*yn+Ir*Tn-_r*kr,h[5]=kt*He+Zt*ye+Ht*le-St*Oe+Ir*Ea+Qr*kr+_r*yn-Ar*Tn,h[6]=Ht*He+Zt*Oe+St*ye-kt*le+_r*Ea+Qr*Tn+Ar*kr-Ir*yn,h[7]=Zt*He-St*le-kt*ye-Ht*Oe+Qr*Ea-Ar*yn-Ir*kr-_r*Tn,h}var pu=Hs;function Ua(h,O,dt){return h[0]=O[0]*dt,h[1]=O[1]*dt,h[2]=O[2]*dt,h[3]=O[3]*dt,h[4]=O[4]*dt,h[5]=O[5]*dt,h[6]=O[6]*dt,h[7]=O[7]*dt,h}var Fn=Ro;function Vu(h,O,dt,St){var kt=1-St;return Fn(O,dt)<0&&(St=-St),h[0]=O[0]*kt+dt[0]*St,h[1]=O[1]*kt+dt[1]*St,h[2]=O[2]*kt+dt[2]*St,h[3]=O[3]*kt+dt[3]*St,h[4]=O[4]*kt+dt[4]*St,h[5]=O[5]*kt+dt[5]*St,h[6]=O[6]*kt+dt[6]*St,h[7]=O[7]*kt+dt[7]*St,h}function jo(h,O){var dt=Oi(O);return h[0]=-O[0]/dt,h[1]=-O[1]/dt,h[2]=-O[2]/dt,h[3]=O[3]/dt,h[4]=-O[4]/dt,h[5]=-O[5]/dt,h[6]=-O[6]/dt,h[7]=O[7]/dt,h}function Cu(h,O){return h[0]=-O[0],h[1]=-O[1],h[2]=-O[2],h[3]=O[3],h[4]=-O[4],h[5]=-O[5],h[6]=-O[6],h[7]=O[7],h}var ws=Xo,Ki=ws,Oi=Fo,To=Oi;function ju(h,O){var dt=Oi(O);if(dt>0){dt=Math.sqrt(dt);var St=O[0]/dt,kt=O[1]/dt,Ht=O[2]/dt,Zt=O[3]/dt,le=O[4],ye=O[5],Oe=O[6],He=O[7],Ar=St*le+kt*ye+Ht*Oe+Zt*He;h[0]=St,h[1]=kt,h[2]=Ht,h[3]=Zt,h[4]=(le-St*Ar)/dt,h[5]=(ye-kt*Ar)/dt,h[6]=(Oe-Ht*Ar)/dt,h[7]=(He-Zt*Ar)/dt}return h}function cf(h){return"quat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+")"}function Uf(h,O){return h[0]===O[0]&&h[1]===O[1]&&h[2]===O[2]&&h[3]===O[3]&&h[4]===O[4]&&h[5]===O[5]&&h[6]===O[6]&&h[7]===O[7]}function Au(h,O){var dt=h[0],St=h[1],kt=h[2],Ht=h[3],Zt=h[4],le=h[5],ye=h[6],Oe=h[7],He=O[0],Ar=O[1],Ir=O[2],_r=O[3],Qr=O[4],yn=O[5],kr=O[6],Tn=O[7];return Math.abs(dt-He)<=w.EPSILON*Math.max(1,Math.abs(dt),Math.abs(He))&&Math.abs(St-Ar)<=w.EPSILON*Math.max(1,Math.abs(St),Math.abs(Ar))&&Math.abs(kt-Ir)<=w.EPSILON*Math.max(1,Math.abs(kt),Math.abs(Ir))&&Math.abs(Ht-_r)<=w.EPSILON*Math.max(1,Math.abs(Ht),Math.abs(_r))&&Math.abs(Zt-Qr)<=w.EPSILON*Math.max(1,Math.abs(Zt),Math.abs(Qr))&&Math.abs(le-yn)<=w.EPSILON*Math.max(1,Math.abs(le),Math.abs(yn))&&Math.abs(ye-kr)<=w.EPSILON*Math.max(1,Math.abs(ye),Math.abs(kr))&&Math.abs(Oe-Tn)<=w.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(Tn))}var Io=z(31437)},35600:function(xr,U,z){"use strict";z.r(U),z.d(U,{add:function(){return ut},adjoint:function(){return d},clone:function(){return L},copy:function(){return k},create:function(){return j},determinant:function(){return S},equals:function(){return te},exactEquals:function(){return Ot},frob:function(){return tt},fromMat2d:function(){return X},fromMat4:function(){return B},fromQuat:function(){return Y},fromRotation:function(){return H},fromScaling:function(){return nt},fromTranslation:function(){return N},fromValues:function(){return D},identity:function(){return b},invert:function(){return y},mul:function(){return Gt},multiply:function(){return _},multiplyScalar:function(){return pt},multiplyScalarAndAdd:function(){return Dt},normalFromMat4:function(){return Z},projection:function(){return J},rotate:function(){return I},scale:function(){return P},set:function(){return w},str:function(){return it},sub:function(){return K},subtract:function(){return vt},translate:function(){return E},transpose:function(){return g}});var F=z(49685);function j(){var p=new F.ARRAY_TYPE(9);return F.ARRAY_TYPE!=Float32Array&&(p[1]=0,p[2]=0,p[3]=0,p[5]=0,p[6]=0,p[7]=0),p[0]=1,p[4]=1,p[8]=1,p}function B(p,at){return p[0]=at[0],p[1]=at[1],p[2]=at[2],p[3]=at[4],p[4]=at[5],p[5]=at[6],p[6]=at[8],p[7]=at[9],p[8]=at[10],p}function L(p){var at=new F.ARRAY_TYPE(9);return at[0]=p[0],at[1]=p[1],at[2]=p[2],at[3]=p[3],at[4]=p[4],at[5]=p[5],at[6]=p[6],at[7]=p[7],at[8]=p[8],at}function k(p,at){return p[0]=at[0],p[1]=at[1],p[2]=at[2],p[3]=at[3],p[4]=at[4],p[5]=at[5],p[6]=at[6],p[7]=at[7],p[8]=at[8],p}function D(p,at,ht,wt,Mt,Ut,Vt,Me,Wt){var ae=new F.ARRAY_TYPE(9);return ae[0]=p,ae[1]=at,ae[2]=ht,ae[3]=wt,ae[4]=Mt,ae[5]=Ut,ae[6]=Vt,ae[7]=Me,ae[8]=Wt,ae}function w(p,at,ht,wt,Mt,Ut,Vt,Me,Wt,ae){return p[0]=at,p[1]=ht,p[2]=wt,p[3]=Mt,p[4]=Ut,p[5]=Vt,p[6]=Me,p[7]=Wt,p[8]=ae,p}function b(p){return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=1,p[5]=0,p[6]=0,p[7]=0,p[8]=1,p}function g(p,at){if(p===at){var ht=at[1],wt=at[2],Mt=at[5];p[1]=at[3],p[2]=at[6],p[3]=ht,p[5]=at[7],p[6]=wt,p[7]=Mt}else p[0]=at[0],p[1]=at[3],p[2]=at[6],p[3]=at[1],p[4]=at[4],p[5]=at[7],p[6]=at[2],p[7]=at[5],p[8]=at[8];return p}function y(p,at){var ht=at[0],wt=at[1],Mt=at[2],Ut=at[3],Vt=at[4],Me=at[5],Wt=at[6],ae=at[7],he=at[8],Se=he*Vt-Me*ae,xe=-he*Ut+Me*Wt,Bt=ae*Ut-Vt*Wt,fe=ht*Se+wt*xe+Mt*Bt;return fe?(fe=1/fe,p[0]=Se*fe,p[1]=(-he*wt+Mt*ae)*fe,p[2]=(Me*wt-Mt*Vt)*fe,p[3]=xe*fe,p[4]=(he*ht-Mt*Wt)*fe,p[5]=(-Me*ht+Mt*Ut)*fe,p[6]=Bt*fe,p[7]=(-ae*ht+wt*Wt)*fe,p[8]=(Vt*ht-wt*Ut)*fe,p):null}function d(p,at){var ht=at[0],wt=at[1],Mt=at[2],Ut=at[3],Vt=at[4],Me=at[5],Wt=at[6],ae=at[7],he=at[8];return p[0]=Vt*he-Me*ae,p[1]=Mt*ae-wt*he,p[2]=wt*Me-Mt*Vt,p[3]=Me*Wt-Ut*he,p[4]=ht*he-Mt*Wt,p[5]=Mt*Ut-ht*Me,p[6]=Ut*ae-Vt*Wt,p[7]=wt*Wt-ht*ae,p[8]=ht*Vt-wt*Ut,p}function S(p){var at=p[0],ht=p[1],wt=p[2],Mt=p[3],Ut=p[4],Vt=p[5],Me=p[6],Wt=p[7],ae=p[8];return at*(ae*Ut-Vt*Wt)+ht*(-ae*Mt+Vt*Me)+wt*(Wt*Mt-Ut*Me)}function _(p,at,ht){var wt=at[0],Mt=at[1],Ut=at[2],Vt=at[3],Me=at[4],Wt=at[5],ae=at[6],he=at[7],Se=at[8],xe=ht[0],Bt=ht[1],fe=ht[2],Le=ht[3],jt=ht[4],oe=ht[5],Te=ht[6],se=ht[7],Ie=ht[8];return p[0]=xe*wt+Bt*Vt+fe*ae,p[1]=xe*Mt+Bt*Me+fe*he,p[2]=xe*Ut+Bt*Wt+fe*Se,p[3]=Le*wt+jt*Vt+oe*ae,p[4]=Le*Mt+jt*Me+oe*he,p[5]=Le*Ut+jt*Wt+oe*Se,p[6]=Te*wt+se*Vt+Ie*ae,p[7]=Te*Mt+se*Me+Ie*he,p[8]=Te*Ut+se*Wt+Ie*Se,p}function E(p,at,ht){var wt=at[0],Mt=at[1],Ut=at[2],Vt=at[3],Me=at[4],Wt=at[5],ae=at[6],he=at[7],Se=at[8],xe=ht[0],Bt=ht[1];return p[0]=wt,p[1]=Mt,p[2]=Ut,p[3]=Vt,p[4]=Me,p[5]=Wt,p[6]=xe*wt+Bt*Vt+ae,p[7]=xe*Mt+Bt*Me+he,p[8]=xe*Ut+Bt*Wt+Se,p}function I(p,at,ht){var wt=at[0],Mt=at[1],Ut=at[2],Vt=at[3],Me=at[4],Wt=at[5],ae=at[6],he=at[7],Se=at[8],xe=Math.sin(ht),Bt=Math.cos(ht);return p[0]=Bt*wt+xe*Vt,p[1]=Bt*Mt+xe*Me,p[2]=Bt*Ut+xe*Wt,p[3]=Bt*Vt-xe*wt,p[4]=Bt*Me-xe*Mt,p[5]=Bt*Wt-xe*Ut,p[6]=ae,p[7]=he,p[8]=Se,p}function P(p,at,ht){var wt=ht[0],Mt=ht[1];return p[0]=wt*at[0],p[1]=wt*at[1],p[2]=wt*at[2],p[3]=Mt*at[3],p[4]=Mt*at[4],p[5]=Mt*at[5],p[6]=at[6],p[7]=at[7],p[8]=at[8],p}function N(p,at){return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=1,p[5]=0,p[6]=at[0],p[7]=at[1],p[8]=1,p}function H(p,at){var ht=Math.sin(at),wt=Math.cos(at);return p[0]=wt,p[1]=ht,p[2]=0,p[3]=-ht,p[4]=wt,p[5]=0,p[6]=0,p[7]=0,p[8]=1,p}function nt(p,at){return p[0]=at[0],p[1]=0,p[2]=0,p[3]=0,p[4]=at[1],p[5]=0,p[6]=0,p[7]=0,p[8]=1,p}function X(p,at){return p[0]=at[0],p[1]=at[1],p[2]=0,p[3]=at[2],p[4]=at[3],p[5]=0,p[6]=at[4],p[7]=at[5],p[8]=1,p}function Y(p,at){var ht=at[0],wt=at[1],Mt=at[2],Ut=at[3],Vt=ht+ht,Me=wt+wt,Wt=Mt+Mt,ae=ht*Vt,he=wt*Vt,Se=wt*Me,xe=Mt*Vt,Bt=Mt*Me,fe=Mt*Wt,Le=Ut*Vt,jt=Ut*Me,oe=Ut*Wt;return p[0]=1-Se-fe,p[3]=he-oe,p[6]=xe+jt,p[1]=he+oe,p[4]=1-ae-fe,p[7]=Bt-Le,p[2]=xe-jt,p[5]=Bt+Le,p[8]=1-ae-Se,p}function Z(p,at){var ht=at[0],wt=at[1],Mt=at[2],Ut=at[3],Vt=at[4],Me=at[5],Wt=at[6],ae=at[7],he=at[8],Se=at[9],xe=at[10],Bt=at[11],fe=at[12],Le=at[13],jt=at[14],oe=at[15],Te=ht*Me-wt*Vt,se=ht*Wt-Mt*Vt,Ie=ht*ae-Ut*Vt,Pe=wt*Wt-Mt*Me,Lt=wt*ae-Ut*Me,Je=Mt*ae-Ut*Wt,Lr=he*Le-Se*fe,Vr=he*jt-xe*fe,Xr=he*oe-Bt*fe,Mn=Se*jt-xe*Le,Hr=Se*oe-Bt*Le,Cn=xe*oe-Bt*jt,Zn=Te*Cn-se*Hr+Ie*Mn+Pe*Xr-Lt*Vr+Je*Lr;return Zn?(Zn=1/Zn,p[0]=(Me*Cn-Wt*Hr+ae*Mn)*Zn,p[1]=(Wt*Xr-Vt*Cn-ae*Vr)*Zn,p[2]=(Vt*Hr-Me*Xr+ae*Lr)*Zn,p[3]=(Mt*Hr-wt*Cn-Ut*Mn)*Zn,p[4]=(ht*Cn-Mt*Xr+Ut*Vr)*Zn,p[5]=(wt*Xr-ht*Hr-Ut*Lr)*Zn,p[6]=(Le*Je-jt*Lt+oe*Pe)*Zn,p[7]=(jt*Ie-fe*Je-oe*se)*Zn,p[8]=(fe*Lt-Le*Ie+oe*Te)*Zn,p):null}function J(p,at,ht){return p[0]=2/at,p[1]=0,p[2]=0,p[3]=0,p[4]=-2/ht,p[5]=0,p[6]=-1,p[7]=1,p[8]=1,p}function it(p){return"mat3("+p[0]+", "+p[1]+", "+p[2]+", "+p[3]+", "+p[4]+", "+p[5]+", "+p[6]+", "+p[7]+", "+p[8]+")"}function tt(p){return Math.hypot(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8])}function ut(p,at,ht){return p[0]=at[0]+ht[0],p[1]=at[1]+ht[1],p[2]=at[2]+ht[2],p[3]=at[3]+ht[3],p[4]=at[4]+ht[4],p[5]=at[5]+ht[5],p[6]=at[6]+ht[6],p[7]=at[7]+ht[7],p[8]=at[8]+ht[8],p}function vt(p,at,ht){return p[0]=at[0]-ht[0],p[1]=at[1]-ht[1],p[2]=at[2]-ht[2],p[3]=at[3]-ht[3],p[4]=at[4]-ht[4],p[5]=at[5]-ht[5],p[6]=at[6]-ht[6],p[7]=at[7]-ht[7],p[8]=at[8]-ht[8],p}function pt(p,at,ht){return p[0]=at[0]*ht,p[1]=at[1]*ht,p[2]=at[2]*ht,p[3]=at[3]*ht,p[4]=at[4]*ht,p[5]=at[5]*ht,p[6]=at[6]*ht,p[7]=at[7]*ht,p[8]=at[8]*ht,p}function Dt(p,at,ht,wt){return p[0]=at[0]+ht[0]*wt,p[1]=at[1]+ht[1]*wt,p[2]=at[2]+ht[2]*wt,p[3]=at[3]+ht[3]*wt,p[4]=at[4]+ht[4]*wt,p[5]=at[5]+ht[5]*wt,p[6]=at[6]+ht[6]*wt,p[7]=at[7]+ht[7]*wt,p[8]=at[8]+ht[8]*wt,p}function Ot(p,at){return p[0]===at[0]&&p[1]===at[1]&&p[2]===at[2]&&p[3]===at[3]&&p[4]===at[4]&&p[5]===at[5]&&p[6]===at[6]&&p[7]===at[7]&&p[8]===at[8]}function te(p,at){var ht=p[0],wt=p[1],Mt=p[2],Ut=p[3],Vt=p[4],Me=p[5],Wt=p[6],ae=p[7],he=p[8],Se=at[0],xe=at[1],Bt=at[2],fe=at[3],Le=at[4],jt=at[5],oe=at[6],Te=at[7],se=at[8];return Math.abs(ht-Se)<=F.EPSILON*Math.max(1,Math.abs(ht),Math.abs(Se))&&Math.abs(wt-xe)<=F.EPSILON*Math.max(1,Math.abs(wt),Math.abs(xe))&&Math.abs(Mt-Bt)<=F.EPSILON*Math.max(1,Math.abs(Mt),Math.abs(Bt))&&Math.abs(Ut-fe)<=F.EPSILON*Math.max(1,Math.abs(Ut),Math.abs(fe))&&Math.abs(Vt-Le)<=F.EPSILON*Math.max(1,Math.abs(Vt),Math.abs(Le))&&Math.abs(Me-jt)<=F.EPSILON*Math.max(1,Math.abs(Me),Math.abs(jt))&&Math.abs(Wt-oe)<=F.EPSILON*Math.max(1,Math.abs(Wt),Math.abs(oe))&&Math.abs(ae-Te)<=F.EPSILON*Math.max(1,Math.abs(ae),Math.abs(Te))&&Math.abs(he-se)<=F.EPSILON*Math.max(1,Math.abs(he),Math.abs(se))}var Gt=_,K=vt},31437:function(xr,U,z){"use strict";z.r(U),z.d(U,{add:function(){return w},angle:function(){return p},ceil:function(){return d},clone:function(){return B},copy:function(){return k},create:function(){return j},cross:function(){return ut},dist:function(){return ae},distance:function(){return H},div:function(){return Wt},divide:function(){return y},dot:function(){return tt},equals:function(){return Mt},exactEquals:function(){return wt},floor:function(){return S},forEach:function(){return xe},fromValues:function(){return L},inverse:function(){return J},len:function(){return Ut},length:function(){return X},lerp:function(){return vt},max:function(){return E},min:function(){return _},mul:function(){return Me},multiply:function(){return g},negate:function(){return Z},normalize:function(){return it},random:function(){return pt},rotate:function(){return K},round:function(){return I},scale:function(){return P},scaleAndAdd:function(){return N},set:function(){return D},sqrDist:function(){return he},sqrLen:function(){return Se},squaredDistance:function(){return nt},squaredLength:function(){return Y},str:function(){return ht},sub:function(){return Vt},subtract:function(){return b},transformMat2:function(){return Dt},transformMat2d:function(){return Ot},transformMat3:function(){return te},transformMat4:function(){return Gt},zero:function(){return at}});var F=z(49685);function j(){var Bt=new F.ARRAY_TYPE(2);return F.ARRAY_TYPE!=Float32Array&&(Bt[0]=0,Bt[1]=0),Bt}function B(Bt){var fe=new F.ARRAY_TYPE(2);return fe[0]=Bt[0],fe[1]=Bt[1],fe}function L(Bt,fe){var Le=new F.ARRAY_TYPE(2);return Le[0]=Bt,Le[1]=fe,Le}function k(Bt,fe){return Bt[0]=fe[0],Bt[1]=fe[1],Bt}function D(Bt,fe,Le){return Bt[0]=fe,Bt[1]=Le,Bt}function w(Bt,fe,Le){return Bt[0]=fe[0]+Le[0],Bt[1]=fe[1]+Le[1],Bt}function b(Bt,fe,Le){return Bt[0]=fe[0]-Le[0],Bt[1]=fe[1]-Le[1],Bt}function g(Bt,fe,Le){return Bt[0]=fe[0]*Le[0],Bt[1]=fe[1]*Le[1],Bt}function y(Bt,fe,Le){return Bt[0]=fe[0]/Le[0],Bt[1]=fe[1]/Le[1],Bt}function d(Bt,fe){return Bt[0]=Math.ceil(fe[0]),Bt[1]=Math.ceil(fe[1]),Bt}function S(Bt,fe){return Bt[0]=Math.floor(fe[0]),Bt[1]=Math.floor(fe[1]),Bt}function _(Bt,fe,Le){return Bt[0]=Math.min(fe[0],Le[0]),Bt[1]=Math.min(fe[1],Le[1]),Bt}function E(Bt,fe,Le){return Bt[0]=Math.max(fe[0],Le[0]),Bt[1]=Math.max(fe[1],Le[1]),Bt}function I(Bt,fe){return Bt[0]=Math.round(fe[0]),Bt[1]=Math.round(fe[1]),Bt}function P(Bt,fe,Le){return Bt[0]=fe[0]*Le,Bt[1]=fe[1]*Le,Bt}function N(Bt,fe,Le,jt){return Bt[0]=fe[0]+Le[0]*jt,Bt[1]=fe[1]+Le[1]*jt,Bt}function H(Bt,fe){var Le=fe[0]-Bt[0],jt=fe[1]-Bt[1];return Math.hypot(Le,jt)}function nt(Bt,fe){var Le=fe[0]-Bt[0],jt=fe[1]-Bt[1];return Le*Le+jt*jt}function X(Bt){var fe=Bt[0],Le=Bt[1];return Math.hypot(fe,Le)}function Y(Bt){var fe=Bt[0],Le=Bt[1];return fe*fe+Le*Le}function Z(Bt,fe){return Bt[0]=-fe[0],Bt[1]=-fe[1],Bt}function J(Bt,fe){return Bt[0]=1/fe[0],Bt[1]=1/fe[1],Bt}function it(Bt,fe){var Le=fe[0],jt=fe[1],oe=Le*Le+jt*jt;return oe>0&&(oe=1/Math.sqrt(oe)),Bt[0]=fe[0]*oe,Bt[1]=fe[1]*oe,Bt}function tt(Bt,fe){return Bt[0]*fe[0]+Bt[1]*fe[1]}function ut(Bt,fe,Le){var jt=fe[0]*Le[1]-fe[1]*Le[0];return Bt[0]=Bt[1]=0,Bt[2]=jt,Bt}function vt(Bt,fe,Le,jt){var oe=fe[0],Te=fe[1];return Bt[0]=oe+jt*(Le[0]-oe),Bt[1]=Te+jt*(Le[1]-Te),Bt}function pt(Bt,fe){fe=fe||1;var Le=F.RANDOM()*2*Math.PI;return Bt[0]=Math.cos(Le)*fe,Bt[1]=Math.sin(Le)*fe,Bt}function Dt(Bt,fe,Le){var jt=fe[0],oe=fe[1];return Bt[0]=Le[0]*jt+Le[2]*oe,Bt[1]=Le[1]*jt+Le[3]*oe,Bt}function Ot(Bt,fe,Le){var jt=fe[0],oe=fe[1];return Bt[0]=Le[0]*jt+Le[2]*oe+Le[4],Bt[1]=Le[1]*jt+Le[3]*oe+Le[5],Bt}function te(Bt,fe,Le){var jt=fe[0],oe=fe[1];return Bt[0]=Le[0]*jt+Le[3]*oe+Le[6],Bt[1]=Le[1]*jt+Le[4]*oe+Le[7],Bt}function Gt(Bt,fe,Le){var jt=fe[0],oe=fe[1];return Bt[0]=Le[0]*jt+Le[4]*oe+Le[12],Bt[1]=Le[1]*jt+Le[5]*oe+Le[13],Bt}function K(Bt,fe,Le,jt){var oe=fe[0]-Le[0],Te=fe[1]-Le[1],se=Math.sin(jt),Ie=Math.cos(jt);return Bt[0]=oe*Ie-Te*se+Le[0],Bt[1]=oe*se+Te*Ie+Le[1],Bt}function p(Bt,fe){var Le=Bt[0],jt=Bt[1],oe=fe[0],Te=fe[1],se=Math.sqrt(Le*Le+jt*jt)*Math.sqrt(oe*oe+Te*Te),Ie=se&&(Le*oe+jt*Te)/se;return Math.acos(Math.min(Math.max(Ie,-1),1))}function at(Bt){return Bt[0]=0,Bt[1]=0,Bt}function ht(Bt){return"vec2("+Bt[0]+", "+Bt[1]+")"}function wt(Bt,fe){return Bt[0]===fe[0]&&Bt[1]===fe[1]}function Mt(Bt,fe){var Le=Bt[0],jt=Bt[1],oe=fe[0],Te=fe[1];return Math.abs(Le-oe)<=F.EPSILON*Math.max(1,Math.abs(Le),Math.abs(oe))&&Math.abs(jt-Te)<=F.EPSILON*Math.max(1,Math.abs(jt),Math.abs(Te))}var Ut=X,Vt=b,Me=g,Wt=y,ae=H,he=nt,Se=Y,xe=function(){var Bt=j();return function(fe,Le,jt,oe,Te,se){var Ie,Pe;for(Le||(Le=2),jt||(jt=0),oe?Pe=Math.min(oe*Le+jt,fe.length):Pe=fe.length,Ie=jt;Ie<Pe;Ie+=Le)Bt[0]=fe[Ie],Bt[1]=fe[Ie+1],Te(Bt,Bt,se),fe[Ie]=Bt[0],fe[Ie+1]=Bt[1];return fe}}()},77160:function(xr,U,z){"use strict";z.r(U),z.d(U,{add:function(){return b},angle:function(){return wt},bezier:function(){return Dt},ceil:function(){return S},clone:function(){return B},copy:function(){return D},create:function(){return j},cross:function(){return ut},dist:function(){return Se},distance:function(){return nt},div:function(){return he},divide:function(){return d},dot:function(){return tt},equals:function(){return Me},exactEquals:function(){return Vt},floor:function(){return _},forEach:function(){return Le},fromValues:function(){return k},hermite:function(){return pt},inverse:function(){return J},len:function(){return Bt},length:function(){return L},lerp:function(){return vt},max:function(){return I},min:function(){return E},mul:function(){return ae},multiply:function(){return y},negate:function(){return Z},normalize:function(){return it},random:function(){return Ot},rotateX:function(){return p},rotateY:function(){return at},rotateZ:function(){return ht},round:function(){return P},scale:function(){return N},scaleAndAdd:function(){return H},set:function(){return w},sqrDist:function(){return xe},sqrLen:function(){return fe},squaredDistance:function(){return X},squaredLength:function(){return Y},str:function(){return Ut},sub:function(){return Wt},subtract:function(){return g},transformMat3:function(){return Gt},transformMat4:function(){return te},transformQuat:function(){return K},zero:function(){return Mt}});var F=z(49685);function j(){var jt=new F.ARRAY_TYPE(3);return F.ARRAY_TYPE!=Float32Array&&(jt[0]=0,jt[1]=0,jt[2]=0),jt}function B(jt){var oe=new F.ARRAY_TYPE(3);return oe[0]=jt[0],oe[1]=jt[1],oe[2]=jt[2],oe}function L(jt){var oe=jt[0],Te=jt[1],se=jt[2];return Math.hypot(oe,Te,se)}function k(jt,oe,Te){var se=new F.ARRAY_TYPE(3);return se[0]=jt,se[1]=oe,se[2]=Te,se}function D(jt,oe){return jt[0]=oe[0],jt[1]=oe[1],jt[2]=oe[2],jt}function w(jt,oe,Te,se){return jt[0]=oe,jt[1]=Te,jt[2]=se,jt}function b(jt,oe,Te){return jt[0]=oe[0]+Te[0],jt[1]=oe[1]+Te[1],jt[2]=oe[2]+Te[2],jt}function g(jt,oe,Te){return jt[0]=oe[0]-Te[0],jt[1]=oe[1]-Te[1],jt[2]=oe[2]-Te[2],jt}function y(jt,oe,Te){return jt[0]=oe[0]*Te[0],jt[1]=oe[1]*Te[1],jt[2]=oe[2]*Te[2],jt}function d(jt,oe,Te){return jt[0]=oe[0]/Te[0],jt[1]=oe[1]/Te[1],jt[2]=oe[2]/Te[2],jt}function S(jt,oe){return jt[0]=Math.ceil(oe[0]),jt[1]=Math.ceil(oe[1]),jt[2]=Math.ceil(oe[2]),jt}function _(jt,oe){return jt[0]=Math.floor(oe[0]),jt[1]=Math.floor(oe[1]),jt[2]=Math.floor(oe[2]),jt}function E(jt,oe,Te){return jt[0]=Math.min(oe[0],Te[0]),jt[1]=Math.min(oe[1],Te[1]),jt[2]=Math.min(oe[2],Te[2]),jt}function I(jt,oe,Te){return jt[0]=Math.max(oe[0],Te[0]),jt[1]=Math.max(oe[1],Te[1]),jt[2]=Math.max(oe[2],Te[2]),jt}function P(jt,oe){return jt[0]=Math.round(oe[0]),jt[1]=Math.round(oe[1]),jt[2]=Math.round(oe[2]),jt}function N(jt,oe,Te){return jt[0]=oe[0]*Te,jt[1]=oe[1]*Te,jt[2]=oe[2]*Te,jt}function H(jt,oe,Te,se){return jt[0]=oe[0]+Te[0]*se,jt[1]=oe[1]+Te[1]*se,jt[2]=oe[2]+Te[2]*se,jt}function nt(jt,oe){var Te=oe[0]-jt[0],se=oe[1]-jt[1],Ie=oe[2]-jt[2];return Math.hypot(Te,se,Ie)}function X(jt,oe){var Te=oe[0]-jt[0],se=oe[1]-jt[1],Ie=oe[2]-jt[2];return Te*Te+se*se+Ie*Ie}function Y(jt){var oe=jt[0],Te=jt[1],se=jt[2];return oe*oe+Te*Te+se*se}function Z(jt,oe){return jt[0]=-oe[0],jt[1]=-oe[1],jt[2]=-oe[2],jt}function J(jt,oe){return jt[0]=1/oe[0],jt[1]=1/oe[1],jt[2]=1/oe[2],jt}function it(jt,oe){var Te=oe[0],se=oe[1],Ie=oe[2],Pe=Te*Te+se*se+Ie*Ie;return Pe>0&&(Pe=1/Math.sqrt(Pe)),jt[0]=oe[0]*Pe,jt[1]=oe[1]*Pe,jt[2]=oe[2]*Pe,jt}function tt(jt,oe){return jt[0]*oe[0]+jt[1]*oe[1]+jt[2]*oe[2]}function ut(jt,oe,Te){var se=oe[0],Ie=oe[1],Pe=oe[2],Lt=Te[0],Je=Te[1],Lr=Te[2];return jt[0]=Ie*Lr-Pe*Je,jt[1]=Pe*Lt-se*Lr,jt[2]=se*Je-Ie*Lt,jt}function vt(jt,oe,Te,se){var Ie=oe[0],Pe=oe[1],Lt=oe[2];return jt[0]=Ie+se*(Te[0]-Ie),jt[1]=Pe+se*(Te[1]-Pe),jt[2]=Lt+se*(Te[2]-Lt),jt}function pt(jt,oe,Te,se,Ie,Pe){var Lt=Pe*Pe,Je=Lt*(2*Pe-3)+1,Lr=Lt*(Pe-2)+Pe,Vr=Lt*(Pe-1),Xr=Lt*(3-2*Pe);return jt[0]=oe[0]*Je+Te[0]*Lr+se[0]*Vr+Ie[0]*Xr,jt[1]=oe[1]*Je+Te[1]*Lr+se[1]*Vr+Ie[1]*Xr,jt[2]=oe[2]*Je+Te[2]*Lr+se[2]*Vr+Ie[2]*Xr,jt}function Dt(jt,oe,Te,se,Ie,Pe){var Lt=1-Pe,Je=Lt*Lt,Lr=Pe*Pe,Vr=Je*Lt,Xr=3*Pe*Je,Mn=3*Lr*Lt,Hr=Lr*Pe;return jt[0]=oe[0]*Vr+Te[0]*Xr+se[0]*Mn+Ie[0]*Hr,jt[1]=oe[1]*Vr+Te[1]*Xr+se[1]*Mn+Ie[1]*Hr,jt[2]=oe[2]*Vr+Te[2]*Xr+se[2]*Mn+Ie[2]*Hr,jt}function Ot(jt,oe){oe=oe||1;var Te=F.RANDOM()*2*Math.PI,se=F.RANDOM()*2-1,Ie=Math.sqrt(1-se*se)*oe;return jt[0]=Math.cos(Te)*Ie,jt[1]=Math.sin(Te)*Ie,jt[2]=se*oe,jt}function te(jt,oe,Te){var se=oe[0],Ie=oe[1],Pe=oe[2],Lt=Te[3]*se+Te[7]*Ie+Te[11]*Pe+Te[15];return Lt=Lt||1,jt[0]=(Te[0]*se+Te[4]*Ie+Te[8]*Pe+Te[12])/Lt,jt[1]=(Te[1]*se+Te[5]*Ie+Te[9]*Pe+Te[13])/Lt,jt[2]=(Te[2]*se+Te[6]*Ie+Te[10]*Pe+Te[14])/Lt,jt}function Gt(jt,oe,Te){var se=oe[0],Ie=oe[1],Pe=oe[2];return jt[0]=se*Te[0]+Ie*Te[3]+Pe*Te[6],jt[1]=se*Te[1]+Ie*Te[4]+Pe*Te[7],jt[2]=se*Te[2]+Ie*Te[5]+Pe*Te[8],jt}function K(jt,oe,Te){var se=Te[0],Ie=Te[1],Pe=Te[2],Lt=Te[3],Je=oe[0],Lr=oe[1],Vr=oe[2],Xr=Ie*Vr-Pe*Lr,Mn=Pe*Je-se*Vr,Hr=se*Lr-Ie*Je,Cn=Ie*Hr-Pe*Mn,Zn=Pe*Xr-se*Hr,Un=se*Mn-Ie*Xr,mn=Lt*2;return Xr*=mn,Mn*=mn,Hr*=mn,Cn*=2,Zn*=2,Un*=2,jt[0]=Je+Xr+Cn,jt[1]=Lr+Mn+Zn,jt[2]=Vr+Hr+Un,jt}function p(jt,oe,Te,se){var Ie=[],Pe=[];return Ie[0]=oe[0]-Te[0],Ie[1]=oe[1]-Te[1],Ie[2]=oe[2]-Te[2],Pe[0]=Ie[0],Pe[1]=Ie[1]*Math.cos(se)-Ie[2]*Math.sin(se),Pe[2]=Ie[1]*Math.sin(se)+Ie[2]*Math.cos(se),jt[0]=Pe[0]+Te[0],jt[1]=Pe[1]+Te[1],jt[2]=Pe[2]+Te[2],jt}function at(jt,oe,Te,se){var Ie=[],Pe=[];return Ie[0]=oe[0]-Te[0],Ie[1]=oe[1]-Te[1],Ie[2]=oe[2]-Te[2],Pe[0]=Ie[2]*Math.sin(se)+Ie[0]*Math.cos(se),Pe[1]=Ie[1],Pe[2]=Ie[2]*Math.cos(se)-Ie[0]*Math.sin(se),jt[0]=Pe[0]+Te[0],jt[1]=Pe[1]+Te[1],jt[2]=Pe[2]+Te[2],jt}function ht(jt,oe,Te,se){var Ie=[],Pe=[];return Ie[0]=oe[0]-Te[0],Ie[1]=oe[1]-Te[1],Ie[2]=oe[2]-Te[2],Pe[0]=Ie[0]*Math.cos(se)-Ie[1]*Math.sin(se),Pe[1]=Ie[0]*Math.sin(se)+Ie[1]*Math.cos(se),Pe[2]=Ie[2],jt[0]=Pe[0]+Te[0],jt[1]=Pe[1]+Te[1],jt[2]=Pe[2]+Te[2],jt}function wt(jt,oe){var Te=jt[0],se=jt[1],Ie=jt[2],Pe=oe[0],Lt=oe[1],Je=oe[2],Lr=Math.sqrt(Te*Te+se*se+Ie*Ie),Vr=Math.sqrt(Pe*Pe+Lt*Lt+Je*Je),Xr=Lr*Vr,Mn=Xr&&tt(jt,oe)/Xr;return Math.acos(Math.min(Math.max(Mn,-1),1))}function Mt(jt){return jt[0]=0,jt[1]=0,jt[2]=0,jt}function Ut(jt){return"vec3("+jt[0]+", "+jt[1]+", "+jt[2]+")"}function Vt(jt,oe){return jt[0]===oe[0]&&jt[1]===oe[1]&&jt[2]===oe[2]}function Me(jt,oe){var Te=jt[0],se=jt[1],Ie=jt[2],Pe=oe[0],Lt=oe[1],Je=oe[2];return Math.abs(Te-Pe)<=F.EPSILON*Math.max(1,Math.abs(Te),Math.abs(Pe))&&Math.abs(se-Lt)<=F.EPSILON*Math.max(1,Math.abs(se),Math.abs(Lt))&&Math.abs(Ie-Je)<=F.EPSILON*Math.max(1,Math.abs(Ie),Math.abs(Je))}var Wt=g,ae=y,he=d,Se=nt,xe=X,Bt=L,fe=Y,Le=function(){var jt=j();return function(oe,Te,se,Ie,Pe,Lt){var Je,Lr;for(Te||(Te=3),se||(se=0),Ie?Lr=Math.min(Ie*Te+se,oe.length):Lr=oe.length,Je=se;Je<Lr;Je+=Te)jt[0]=oe[Je],jt[1]=oe[Je+1],jt[2]=oe[Je+2],Pe(jt,jt,Lt),oe[Je]=jt[0],oe[Je+1]=jt[1],oe[Je+2]=jt[2];return oe}}()},38186:function(xr){var U=[],z=[],F="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function j(L,k){if(k=k||{},L===void 0)throw new Error(F);var D=k.prepend===!0?"prepend":"append",w=k.container!==void 0?k.container:document.querySelector("head"),b=U.indexOf(w);b===-1&&(b=U.push(w)-1,z[b]={});var g;return z[b]!==void 0&&z[b][D]!==void 0?g=z[b][D]:(g=z[b][D]=B(),D==="prepend"?w.insertBefore(g,w.childNodes[0]):w.appendChild(g)),L.charCodeAt(0)===65279&&(L=L.substr(1,L.length)),g.styleSheet?g.styleSheet.cssText+=L:g.textContent+=L,g}function B(){var L=document.createElement("style");return L.setAttribute("type","text/css"),L}xr.exports=j,xr.exports.insertCss=j},81763:function(xr,U,z){var F=z(44239),j=z(37005),B="[object Number]";function L(k){return typeof k=="number"||j(k)&&F(k)==B}xr.exports=L},81550:function(xr){(function(U,z){xr.exports=z()})(this,function(){"use strict";var U=function(xt){return xt instanceof Uint8Array||xt instanceof Uint16Array||xt instanceof Uint32Array||xt instanceof Int8Array||xt instanceof Int16Array||xt instanceof Int32Array||xt instanceof Float32Array||xt instanceof Float64Array||xt instanceof Uint8ClampedArray},z=function(xt,ne){for(var Ce=Object.keys(ne),yr=0;yr<Ce.length;++yr)xt[Ce[yr]]=ne[Ce[yr]];return xt},F=`
`;function j(xt){return typeof atob!="undefined"?atob(xt):"base64:"+xt}function B(xt){var ne=new Error("(regl) "+xt);throw console.error(ne),ne}function L(xt,ne){xt||B(ne)}function k(xt){return xt?": "+xt:""}function D(xt,ne,Ce){xt in ne||B("unknown parameter ("+xt+")"+k(Ce)+". possible values: "+Object.keys(ne).join())}function w(xt,ne){U(xt)||B("invalid parameter type"+k(ne)+". must be a typed array")}function b(xt,ne){switch(ne){case"number":return typeof xt=="number";case"object":return typeof xt=="object";case"string":return typeof xt=="string";case"boolean":return typeof xt=="boolean";case"function":return typeof xt=="function";case"undefined":return typeof xt=="undefined";case"symbol":return typeof xt=="symbol"}}function g(xt,ne,Ce){b(xt,ne)||B("invalid parameter type"+k(Ce)+". expected "+ne+", got "+typeof xt)}function y(xt,ne){xt>=0&&(xt|0)===xt||B("invalid parameter type, ("+xt+")"+k(ne)+". must be a nonnegative integer")}function d(xt,ne,Ce){ne.indexOf(xt)<0&&B("invalid value"+k(Ce)+". must be one of: "+ne)}var S=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function _(xt){Object.keys(xt).forEach(function(ne){S.indexOf(ne)<0&&B('invalid regl constructor argument "'+ne+'". must be one of '+S)})}function E(xt,ne){for(xt=xt+"";xt.length<ne;)xt=" "+xt;return xt}function I(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function P(xt,ne){this.number=xt,this.line=ne,this.errors=[]}function N(xt,ne,Ce){this.file=xt,this.line=ne,this.message=Ce}function H(){var xt=new Error,ne=(xt.stack||xt).toString(),Ce=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(ne);if(Ce)return Ce[1];var yr=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(ne);return yr?yr[1]:"unknown"}function nt(){var xt=new Error,ne=(xt.stack||xt).toString(),Ce=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(ne);if(Ce)return Ce[1];var yr=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(ne);return yr?yr[1]:"unknown"}function X(xt,ne){var Ce=xt.split(`
`),yr=1,Br=0,pr={unknown:new I,0:new I};pr.unknown.name=pr[0].name=ne||H(),pr.unknown.lines.push(new P(0,""));for(var Tr=0;Tr<Ce.length;++Tr){var Zr=Ce[Tr],en=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Zr);if(en)switch(en[1]){case"line":var an=/(\d+)(\s+\d+)?/.exec(en[2]);an&&(yr=an[1]|0,an[2]&&(Br=an[2]|0,Br in pr||(pr[Br]=new I)));break;case"define":var Jr=/SHADER_NAME(_B64)?\s+(.*)$/.exec(en[2]);Jr&&(pr[Br].name=Jr[1]?j(Jr[2]):Jr[2]);break}pr[Br].lines.push(new P(yr++,Zr))}return Object.keys(pr).forEach(function(dn){var v=pr[dn];v.lines.forEach(function(M){v.index[M.number]=M})}),pr}function Y(xt){var ne=[];return xt.split(`
`).forEach(function(Ce){if(!(Ce.length<5)){var yr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Ce);yr?ne.push(new N(yr[1]|0,yr[2]|0,yr[3].trim())):Ce.length>0&&ne.push(new N("unknown",0,Ce))}}),ne}function Z(xt,ne){ne.forEach(function(Ce){var yr=xt[Ce.file];if(yr){var Br=yr.index[Ce.line];if(Br){Br.errors.push(Ce),yr.hasErrors=!0;return}}xt.unknown.hasErrors=!0,xt.unknown.lines[0].errors.push(Ce)})}function J(xt,ne,Ce,yr,Br){if(!xt.getShaderParameter(ne,xt.COMPILE_STATUS)){var pr=xt.getShaderInfoLog(ne),Tr=yr===xt.FRAGMENT_SHADER?"fragment":"vertex";Ot(Ce,"string",Tr+" shader source must be a string",Br);var Zr=X(Ce,Br),en=Y(pr);Z(Zr,en),Object.keys(Zr).forEach(function(an){var Jr=Zr[an];if(!Jr.hasErrors)return;var dn=[""],v=[""];function M(G,$){dn.push(G),v.push($||"")}M("file number "+an+": "+Jr.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Jr.lines.forEach(function(G){if(G.errors.length>0){M(E(G.number,4)+"|  ","background-color:yellow; font-weight:bold"),M(G.line+F,"color:red; background-color:yellow; font-weight:bold");var $=0;G.errors.forEach(function(ft){var ct=ft.message,yt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(ct);if(yt){var Et=yt[1];switch(ct=yt[2],Et){case"assign":Et="=";break}$=Math.max(G.line.indexOf(Et,$),0)}else $=0;M(E("| ",6)),M(E("^^^",$+3)+F,"font-weight:bold"),M(E("| ",6)),M(ct+F,"font-weight:bold")}),M(E("| ",6)+F)}else M(E(G.number,4)+"|  "),M(G.line+F,"color:red")}),typeof document!="undefined"&&!window.chrome?(v[0]=dn.join("%c"),console.log.apply(console,v)):console.log(dn.join(""))}),L.raise("Error compiling "+Tr+" shader, "+Zr[0].name)}}function it(xt,ne,Ce,yr,Br){if(!xt.getProgramParameter(ne,xt.LINK_STATUS)){var pr=xt.getProgramInfoLog(ne),Tr=X(Ce,Br),Zr=X(yr,Br),en='Error linking program with vertex shader, "'+Zr[0].name+'", and fragment shader "'+Tr[0].name+'"';typeof document!="undefined"?console.log("%c"+en+F+"%c"+pr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(en+F+pr),L.raise(en)}}function tt(xt){xt._commandRef=H()}function ut(xt,ne,Ce,yr){tt(xt);function Br(en){return en?yr.id(en):0}xt._fragId=Br(xt.static.frag),xt._vertId=Br(xt.static.vert);function pr(en,an){Object.keys(an).forEach(function(Jr){en[yr.id(Jr)]=!0})}var Tr=xt._uniformSet={};pr(Tr,ne.static),pr(Tr,ne.dynamic);var Zr=xt._attributeSet={};pr(Zr,Ce.static),pr(Zr,Ce.dynamic),xt._hasCount="count"in xt.static||"count"in xt.dynamic||"elements"in xt.static||"elements"in xt.dynamic}function vt(xt,ne){var Ce=nt();B(xt+" in command "+(ne||H())+(Ce==="unknown"?"":" called from "+Ce))}function pt(xt,ne,Ce){xt||vt(ne,Ce||H())}function Dt(xt,ne,Ce,yr){xt in ne||vt("unknown parameter ("+xt+")"+k(Ce)+". possible values: "+Object.keys(ne).join(),yr||H())}function Ot(xt,ne,Ce,yr){b(xt,ne)||vt("invalid parameter type"+k(Ce)+". expected "+ne+", got "+typeof xt,yr||H())}function te(xt){xt()}function Gt(xt,ne,Ce){xt.texture?d(xt.texture._texture.internalformat,ne,"unsupported texture format for attachment"):d(xt.renderbuffer._renderbuffer.format,Ce,"unsupported renderbuffer format for attachment")}var K=33071,p=9728,at=9984,ht=9985,wt=9986,Mt=9987,Ut=5120,Vt=5121,Me=5122,Wt=5123,ae=5124,he=5125,Se=5126,xe=32819,Bt=32820,fe=33635,Le=34042,jt=36193,oe={};oe[Ut]=oe[Vt]=1,oe[Me]=oe[Wt]=oe[jt]=oe[fe]=oe[xe]=oe[Bt]=2,oe[ae]=oe[he]=oe[Se]=oe[Le]=4;function Te(xt,ne){return xt===Bt||xt===xe||xt===fe?2:xt===Le?4:oe[xt]*ne}function se(xt){return!(xt&xt-1)&&!!xt}function Ie(xt,ne,Ce){var yr,Br=ne.width,pr=ne.height,Tr=ne.channels;L(Br>0&&Br<=Ce.maxTextureSize&&pr>0&&pr<=Ce.maxTextureSize,"invalid texture shape"),(xt.wrapS!==K||xt.wrapT!==K)&&L(se(Br)&&se(pr),"incompatible wrap mode for texture, both width and height must be power of 2"),ne.mipmask===1?Br!==1&&pr!==1&&L(xt.minFilter!==at&&xt.minFilter!==wt&&xt.minFilter!==ht&&xt.minFilter!==Mt,"min filter requires mipmap"):(L(se(Br)&&se(pr),"texture must be a square power of 2 to support mipmapping"),L(ne.mipmask===(Br<<1)-1,"missing or incomplete mipmap data")),ne.type===Se&&(Ce.extensions.indexOf("oes_texture_float_linear")<0&&L(xt.minFilter===p&&xt.magFilter===p,"filter not supported, must enable oes_texture_float_linear"),L(!xt.genMipmaps,"mipmap generation not supported with float textures"));var Zr=ne.images;for(yr=0;yr<16;++yr)if(Zr[yr]){var en=Br>>yr,an=pr>>yr;L(ne.mipmask&1<<yr,"missing mipmap data");var Jr=Zr[yr];if(L(Jr.width===en&&Jr.height===an,"invalid shape for mip images"),L(Jr.format===ne.format&&Jr.internalformat===ne.internalformat&&Jr.type===ne.type,"incompatible type for mip image"),!Jr.compressed)if(Jr.data){var dn=Math.ceil(Te(Jr.type,Tr)*en/Jr.unpackAlignment)*Jr.unpackAlignment;L(Jr.data.byteLength===dn*an,"invalid data for image, buffer size is inconsistent with image format")}else Jr.element||Jr.copy}else xt.genMipmaps||L((ne.mipmask&1<<yr)===0,"extra mipmap data");ne.compressed&&L(!xt.genMipmaps,"mipmap generation for compressed images not supported")}function Pe(xt,ne,Ce,yr){var Br=xt.width,pr=xt.height,Tr=xt.channels;L(Br>0&&Br<=yr.maxTextureSize&&pr>0&&pr<=yr.maxTextureSize,"invalid texture shape"),L(Br===pr,"cube map must be square"),L(ne.wrapS===K&&ne.wrapT===K,"wrap mode not supported by cube map");for(var Zr=0;Zr<Ce.length;++Zr){var en=Ce[Zr];L(en.width===Br&&en.height===pr,"inconsistent cube map face shape"),ne.genMipmaps&&(L(!en.compressed,"can not generate mipmap for compressed textures"),L(en.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var an=en.images,Jr=0;Jr<16;++Jr){var dn=an[Jr];if(dn){var v=Br>>Jr,M=pr>>Jr;L(en.mipmask&1<<Jr,"missing mipmap data"),L(dn.width===v&&dn.height===M,"invalid shape for mip images"),L(dn.format===xt.format&&dn.internalformat===xt.internalformat&&dn.type===xt.type,"incompatible type for mip image"),dn.compressed||(dn.data?L(dn.data.byteLength===v*M*Math.max(Te(dn.type,Tr),dn.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):dn.element||dn.copy)}}}}var Lt=z(L,{optional:te,raise:B,commandRaise:vt,command:pt,parameter:D,commandParameter:Dt,constructor:_,type:g,commandType:Ot,isTypedArray:w,nni:y,oneOf:d,shaderError:J,linkError:it,callSite:nt,saveCommandRef:tt,saveDrawInfo:ut,framebufferFormat:Gt,guessCommand:H,texture2D:Ie,textureCube:Pe}),Je=0,Lr=0,Vr=5,Xr=6;function Mn(xt,ne){this.id=Je++,this.type=xt,this.data=ne}function Hr(xt){return xt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Cn(xt){if(xt.length===0)return[];var ne=xt.charAt(0),Ce=xt.charAt(xt.length-1);if(xt.length>1&&ne===Ce&&(ne==='"'||ne==="'"))return['"'+Hr(xt.substr(1,xt.length-2))+'"'];var yr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(xt);if(yr)return Cn(xt.substr(0,yr.index)).concat(Cn(yr[1])).concat(Cn(xt.substr(yr.index+yr[0].length)));var Br=xt.split(".");if(Br.length===1)return['"'+Hr(xt)+'"'];for(var pr=[],Tr=0;Tr<Br.length;++Tr)pr=pr.concat(Cn(Br[Tr]));return pr}function Zn(xt){return"["+Cn(xt).join("][")+"]"}function Un(xt,ne){return new Mn(xt,Zn(ne+""))}function mn(xt){return typeof xt=="function"&&!xt._reglType||xt instanceof Mn}function rr(xt,ne){if(typeof xt=="function")return new Mn(Lr,xt);if(typeof xt=="number"||typeof xt=="boolean")return new Mn(Vr,xt);if(Array.isArray(xt))return new Mn(Xr,xt.map((Ce,yr)=>rr(Ce,ne+"["+yr+"]")));if(xt instanceof Mn)return xt;Lt(!1,"invalid option type in uniform "+ne)}var sr={DynamicVariable:Mn,define:Un,isDynamic:mn,unbox:rr,accessor:Zn},lr={next:typeof requestAnimationFrame=="function"?function(xt){return requestAnimationFrame(xt)}:function(xt){return setTimeout(xt,16)},cancel:typeof cancelAnimationFrame=="function"?function(xt){return cancelAnimationFrame(xt)}:clearTimeout},zr=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function fn(){var xt={"":0},ne=[""];return{id:function(Ce){var yr=xt[Ce];return yr||(yr=xt[Ce]=ne.length,ne.push(Ce),yr)},str:function(Ce){return ne[Ce]}}}function wn(xt,ne,Ce){var yr=document.createElement("canvas");z(yr.style,{border:0,margin:0,padding:0,top:0,left:0}),xt.appendChild(yr),xt===document.body&&(yr.style.position="absolute",z(xt.style,{margin:0,padding:0}));function Br(){var Zr=window.innerWidth,en=window.innerHeight;if(xt!==document.body){var an=xt.getBoundingClientRect();Zr=an.right-an.left,en=an.bottom-an.top}yr.width=Ce*Zr,yr.height=Ce*en,z(yr.style,{width:Zr+"px",height:en+"px"})}var pr;xt!==document.body&&typeof ResizeObserver=="function"?(pr=new ResizeObserver(function(){setTimeout(Br)}),pr.observe(xt)):window.addEventListener("resize",Br,!1);function Tr(){pr?pr.disconnect():window.removeEventListener("resize",Br),xt.removeChild(yr)}return Br(),{canvas:yr,onDestroy:Tr}}function ln(xt,ne){function Ce(yr){try{return xt.getContext(yr,ne)}catch(Br){return null}}return Ce("webgl")||Ce("experimental-webgl")||Ce("webgl-experimental")}function $n(xt){return typeof xt.nodeName=="string"&&typeof xt.appendChild=="function"&&typeof xt.getBoundingClientRect=="function"}function Jn(xt){return typeof xt.drawArrays=="function"||typeof xt.drawElements=="function"}function Da(xt){return typeof xt=="string"?xt.split():(Lt(Array.isArray(xt),"invalid extension array"),xt)}function bn(xt){return typeof xt=="string"?(Lt(typeof document!="undefined","not supported outside of DOM"),document.querySelector(xt)):xt}function Hn(xt){var ne=xt||{},Ce,yr,Br,pr,Tr={},Zr=[],en=[],an=typeof window=="undefined"?1:window.devicePixelRatio,Jr=!1,dn=function(G){G&&Lt.raise(G)},v=function(){};if(typeof ne=="string"?(Lt(typeof document!="undefined","selector queries only supported in DOM enviroments"),Ce=document.querySelector(ne),Lt(Ce,"invalid query string for element")):typeof ne=="object"?$n(ne)?Ce=ne:Jn(ne)?(pr=ne,Br=pr.canvas):(Lt.constructor(ne),"gl"in ne?pr=ne.gl:"canvas"in ne?Br=bn(ne.canvas):"container"in ne&&(yr=bn(ne.container)),"attributes"in ne&&(Tr=ne.attributes,Lt.type(Tr,"object","invalid context attributes")),"extensions"in ne&&(Zr=Da(ne.extensions)),"optionalExtensions"in ne&&(en=Da(ne.optionalExtensions)),"onDone"in ne&&(Lt.type(ne.onDone,"function","invalid or missing onDone callback"),dn=ne.onDone),"profile"in ne&&(Jr=!!ne.profile),"pixelRatio"in ne&&(an=+ne.pixelRatio,Lt(an>0,"invalid pixel ratio"))):Lt.raise("invalid arguments to regl"),Ce&&(Ce.nodeName.toLowerCase()==="canvas"?Br=Ce:yr=Ce),!pr){if(!Br){Lt(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var M=wn(yr||document.body,dn,an);if(!M)return null;Br=M.canvas,v=M.onDestroy}Tr.premultipliedAlpha===void 0&&(Tr.premultipliedAlpha=!0),pr=ln(Br,Tr)}return pr?{gl:pr,canvas:Br,container:yr,extensions:Zr,optionalExtensions:en,pixelRatio:an,profile:Jr,onDone:dn,onDestroy:v}:(v(),dn("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Wn(xt,ne){var Ce={};function yr(Tr){Lt.type(Tr,"string","extension name must be string");var Zr=Tr.toLowerCase(),en;try{en=Ce[Zr]=xt.getExtension(Zr)}catch(an){}return!!en}for(var Br=0;Br<ne.extensions.length;++Br){var pr=ne.extensions[Br];if(!yr(pr))return ne.onDestroy(),ne.onDone('"'+pr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ne.optionalExtensions.forEach(yr),{extensions:Ce,restore:function(){Object.keys(Ce).forEach(function(Tr){if(Ce[Tr]&&!yr(Tr))throw new Error("(regl): error restoring extension "+Tr)})}}}function Bn(xt,ne){for(var Ce=Array(xt),yr=0;yr<xt;++yr)Ce[yr]=ne(yr);return Ce}var ya=5120,q=5121,Ve=5122,Ee=5123,nr=5124,ar=5125,Ur=5126;function Nr(xt){for(var ne=16;ne<=1<<28;ne*=16)if(xt<=ne)return ne;return 0}function gn(xt){var ne,Ce;return ne=(xt>65535)<<4,xt>>>=ne,Ce=(xt>255)<<3,xt>>>=Ce,ne|=Ce,Ce=(xt>15)<<2,xt>>>=Ce,ne|=Ce,Ce=(xt>3)<<1,xt>>>=Ce,ne|=Ce,ne|xt>>1}function hn(){var xt=Bn(8,function(){return[]});function ne(pr){var Tr=Nr(pr),Zr=xt[gn(Tr)>>2];return Zr.length>0?Zr.pop():new ArrayBuffer(Tr)}function Ce(pr){xt[gn(pr.byteLength)>>2].push(pr)}function yr(pr,Tr){var Zr=null;switch(pr){case ya:Zr=new Int8Array(ne(Tr),0,Tr);break;case q:Zr=new Uint8Array(ne(Tr),0,Tr);break;case Ve:Zr=new Int16Array(ne(2*Tr),0,Tr);break;case Ee:Zr=new Uint16Array(ne(2*Tr),0,Tr);break;case nr:Zr=new Int32Array(ne(4*Tr),0,Tr);break;case ar:Zr=new Uint32Array(ne(4*Tr),0,Tr);break;case Ur:Zr=new Float32Array(ne(4*Tr),0,Tr);break;default:return null}return Zr.length!==Tr?Zr.subarray(0,Tr):Zr}function Br(pr){Ce(pr.buffer)}return{alloc:ne,free:Ce,allocType:yr,freeType:Br}}var pn=hn();pn.zero=hn();var gt=3408,bt=3410,W=3411,T=3412,A=3413,et=3414,_t=3415,Xt=33901,Rt=33902,ee=3379,Ge=3386,De=34921,fr=36347,jr=36348,Sr=35661,vn=35660,Xn=34930,je=36349,Er=34076,Pr=34024,Kr=7936,$t=7937,Pt=7938,re=35724,be=34047,pe=36063,ke=34852,or=3553,cr=34067,rn=34069,Nn=33984,An=6408,la=5126,aa=5121,Ca=36160,Qa=36053,Za=36064,Xa=16384,Bo=function(xt,ne){var Ce=1;ne.ext_texture_filter_anisotropic&&(Ce=xt.getParameter(be));var yr=1,Br=1;ne.webgl_draw_buffers&&(yr=xt.getParameter(ke),Br=xt.getParameter(pe));var pr=!!ne.oes_texture_float;if(pr){var Tr=xt.createTexture();xt.bindTexture(or,Tr),xt.texImage2D(or,0,An,1,1,0,An,la,null);var Zr=xt.createFramebuffer();if(xt.bindFramebuffer(Ca,Zr),xt.framebufferTexture2D(Ca,Za,or,Tr,0),xt.bindTexture(or,null),xt.checkFramebufferStatus(Ca)!==Qa)pr=!1;else{xt.viewport(0,0,1,1),xt.clearColor(1,0,0,1),xt.clear(Xa);var en=pn.allocType(la,4);xt.readPixels(0,0,1,1,An,la,en),xt.getError()?pr=!1:(xt.deleteFramebuffer(Zr),xt.deleteTexture(Tr),pr=en[0]===1),pn.freeType(en)}}var an=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Jr=!0;if(!an){var dn=xt.createTexture(),v=pn.allocType(aa,36);xt.activeTexture(Nn),xt.bindTexture(cr,dn),xt.texImage2D(rn,0,An,3,3,0,An,aa,v),pn.freeType(v),xt.bindTexture(cr,null),xt.deleteTexture(dn),Jr=!xt.getError()}return{colorBits:[xt.getParameter(bt),xt.getParameter(W),xt.getParameter(T),xt.getParameter(A)],depthBits:xt.getParameter(et),stencilBits:xt.getParameter(_t),subpixelBits:xt.getParameter(gt),extensions:Object.keys(ne).filter(function(M){return!!ne[M]}),maxAnisotropic:Ce,maxDrawbuffers:yr,maxColorAttachments:Br,pointSizeDims:xt.getParameter(Xt),lineWidthDims:xt.getParameter(Rt),maxViewportDims:xt.getParameter(Ge),maxCombinedTextureUnits:xt.getParameter(Sr),maxCubeMapSize:xt.getParameter(Er),maxRenderbufferSize:xt.getParameter(Pr),maxTextureUnits:xt.getParameter(Xn),maxTextureSize:xt.getParameter(ee),maxAttributes:xt.getParameter(De),maxVertexUniforms:xt.getParameter(fr),maxVertexTextureUnits:xt.getParameter(vn),maxVaryingVectors:xt.getParameter(jr),maxFragmentUniforms:xt.getParameter(je),glsl:xt.getParameter(re),renderer:xt.getParameter($t),vendor:xt.getParameter(Kr),version:xt.getParameter(Pt),readFloat:pr,npotTextureCube:Jr}};function Ai(xt){return!!xt&&typeof xt=="object"&&Array.isArray(xt.shape)&&Array.isArray(xt.stride)&&typeof xt.offset=="number"&&xt.shape.length===xt.stride.length&&(Array.isArray(xt.data)||U(xt.data))}var xi=function(xt){return Object.keys(xt).map(function(ne){return xt[ne]})},po={shape:ms,flatten:zo};function ro(xt,ne,Ce){for(var yr=0;yr<ne;++yr)Ce[yr]=xt[yr]}function bo(xt,ne,Ce,yr){for(var Br=0,pr=0;pr<ne;++pr)for(var Tr=xt[pr],Zr=0;Zr<Ce;++Zr)yr[Br++]=Tr[Zr]}function $o(xt,ne,Ce,yr,Br,pr){for(var Tr=pr,Zr=0;Zr<ne;++Zr)for(var en=xt[Zr],an=0;an<Ce;++an)for(var Jr=en[an],dn=0;dn<yr;++dn)Br[Tr++]=Jr[dn]}function Ia(xt,ne,Ce,yr,Br){for(var pr=1,Tr=Ce+1;Tr<ne.length;++Tr)pr*=ne[Tr];var Zr=ne[Ce];if(ne.length-Ce===4){var en=ne[Ce+1],an=ne[Ce+2],Jr=ne[Ce+3];for(Tr=0;Tr<Zr;++Tr)$o(xt[Tr],en,an,Jr,yr,Br),Br+=pr}else for(Tr=0;Tr<Zr;++Tr)Ia(xt[Tr],ne,Ce+1,yr,Br),Br+=pr}function zo(xt,ne,Ce,yr){var Br=1;if(ne.length)for(var pr=0;pr<ne.length;++pr)Br*=ne[pr];else Br=0;var Tr=yr||pn.allocType(Ce,Br);switch(ne.length){case 0:break;case 1:ro(xt,ne[0],Tr);break;case 2:bo(xt,ne[0],ne[1],Tr);break;case 3:$o(xt,ne[0],ne[1],ne[2],Tr,0);break;default:Ia(xt,ne,0,Tr,0)}return Tr}function ms(xt){for(var ne=[],Ce=xt;Ce.length;Ce=Ce[0])ne.push(Ce.length);return ne}var Oa={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},qo=5120,Uo=5122,Qo=5124,no=5121,Eo=5123,Us=5125,Qs=5126,ki=5126,ao={int8:qo,int16:Uo,int32:Qo,uint8:no,uint16:Eo,uint32:Us,float:Qs,float32:ki},Ts=35048,Ws=35040,Po={dynamic:Ts,stream:Ws,static:35044},wo=po.flatten,Xs=po.shape,xs=35044,Ys=35040,qn=5121,io=5126,_o=[];_o[5120]=1,_o[5122]=2,_o[5124]=4,_o[5121]=1,_o[5123]=2,_o[5125]=4,_o[5126]=4;function Ti(xt){return Oa[Object.prototype.toString.call(xt)]|0}function bs(xt,ne){for(var Ce=0;Ce<ne.length;++Ce)xt[Ce]=ne[Ce]}function Is(xt,ne,Ce,yr,Br,pr,Tr){for(var Zr=0,en=0;en<Ce;++en)for(var an=0;an<yr;++an)xt[Zr++]=ne[Br*en+pr*an+Tr]}function Ri(xt,ne,Ce,yr){var Br=0,pr={};function Tr($){this.id=Br++,this.buffer=xt.createBuffer(),this.type=$,this.usage=xs,this.byteLength=0,this.dimension=1,this.dtype=qn,this.persistentData=null,Ce.profile&&(this.stats={size:0})}Tr.prototype.bind=function(){xt.bindBuffer(this.type,this.buffer)},Tr.prototype.destroy=function(){v(this)};var Zr=[];function en($,ft){var ct=Zr.pop();return ct||(ct=new Tr($)),ct.bind(),dn(ct,ft,Ys,0,1,!1),ct}function an($){Zr.push($)}function Jr($,ft,ct){$.byteLength=ft.byteLength,xt.bufferData($.type,ft,ct)}function dn($,ft,ct,yt,Et,It){var zt;if($.usage=ct,Array.isArray(ft)){if($.dtype=yt||io,ft.length>0){var Qt;if(Array.isArray(ft[0])){zt=Xs(ft);for(var qt=1,_e=1;_e<zt.length;++_e)qt*=zt[_e];$.dimension=qt,Qt=wo(ft,zt,$.dtype),Jr($,Qt,ct),It?$.persistentData=Qt:pn.freeType(Qt)}else if(typeof ft[0]=="number"){$.dimension=Et;var Ye=pn.allocType($.dtype,ft.length);bs(Ye,ft),Jr($,Ye,ct),It?$.persistentData=Ye:pn.freeType(Ye)}else U(ft[0])?($.dimension=ft[0].length,$.dtype=yt||Ti(ft[0])||io,Qt=wo(ft,[ft.length,ft[0].length],$.dtype),Jr($,Qt,ct),It?$.persistentData=Qt:pn.freeType(Qt)):Lt.raise("invalid buffer data")}}else if(U(ft))$.dtype=yt||Ti(ft),$.dimension=Et,Jr($,ft,ct),It&&($.persistentData=new Uint8Array(new Uint8Array(ft.buffer)));else if(Ai(ft)){zt=ft.shape;var Cr=ft.stride,$e=ft.offset,er=0,tr=0,$r=0,_n=0;zt.length===1?(er=zt[0],tr=1,$r=Cr[0],_n=0):zt.length===2?(er=zt[0],tr=zt[1],$r=Cr[0],_n=Cr[1]):Lt.raise("invalid shape"),$.dtype=yt||Ti(ft.data)||io,$.dimension=tr;var on=pn.allocType($.dtype,er*tr);Is(on,ft.data,er,tr,$r,_n,$e),Jr($,on,ct),It?$.persistentData=on:pn.freeType(on)}else ft instanceof ArrayBuffer?($.dtype=qn,$.dimension=Et,Jr($,ft,ct),It&&($.persistentData=new Uint8Array(new Uint8Array(ft)))):Lt.raise("invalid buffer data")}function v($){ne.bufferCount--,yr($);var ft=$.buffer;Lt(ft,"buffer must not be deleted already"),xt.deleteBuffer(ft),$.buffer=null,delete pr[$.id]}function M($,ft,ct,yt){ne.bufferCount++;var Et=new Tr(ft);pr[Et.id]=Et;function It(qt){var _e=xs,Ye=null,Cr=0,$e=0,er=1;return Array.isArray(qt)||U(qt)||Ai(qt)||qt instanceof ArrayBuffer?Ye=qt:typeof qt=="number"?Cr=qt|0:qt&&(Lt.type(qt,"object","buffer arguments must be an object, a number or an array"),"data"in qt&&(Lt(Ye===null||Array.isArray(Ye)||U(Ye)||Ai(Ye),"invalid data for buffer"),Ye=qt.data),"usage"in qt&&(Lt.parameter(qt.usage,Po,"invalid buffer usage"),_e=Po[qt.usage]),"type"in qt&&(Lt.parameter(qt.type,ao,"invalid buffer type"),$e=ao[qt.type]),"dimension"in qt&&(Lt.type(qt.dimension,"number","invalid dimension"),er=qt.dimension|0),"length"in qt&&(Lt.nni(Cr,"buffer length must be a nonnegative integer"),Cr=qt.length|0)),Et.bind(),Ye?dn(Et,Ye,_e,$e,er,yt):(Cr&&xt.bufferData(Et.type,Cr,_e),Et.dtype=$e||qn,Et.usage=_e,Et.dimension=er,Et.byteLength=Cr),Ce.profile&&(Et.stats.size=Et.byteLength*_o[Et.dtype]),It}function zt(qt,_e){Lt(_e+qt.byteLength<=Et.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+qt.byteLength+" starting from offset "+_e+" to a buffer of size "+Et.byteLength),xt.bufferSubData(Et.type,_e,qt)}function Qt(qt,_e){var Ye=(_e||0)|0,Cr;if(Et.bind(),U(qt)||qt instanceof ArrayBuffer)zt(qt,Ye);else if(Array.isArray(qt)){if(qt.length>0)if(typeof qt[0]=="number"){var $e=pn.allocType(Et.dtype,qt.length);bs($e,qt),zt($e,Ye),pn.freeType($e)}else if(Array.isArray(qt[0])||U(qt[0])){Cr=Xs(qt);var er=wo(qt,Cr,Et.dtype);zt(er,Ye),pn.freeType(er)}else Lt.raise("invalid buffer data")}else if(Ai(qt)){Cr=qt.shape;var tr=qt.stride,$r=0,_n=0,on=0,Yn=0;Cr.length===1?($r=Cr[0],_n=1,on=tr[0],Yn=0):Cr.length===2?($r=Cr[0],_n=Cr[1],on=tr[0],Yn=tr[1]):Lt.raise("invalid shape");var kn=Array.isArray(qt.data)?Et.dtype:Ti(qt.data),ea=pn.allocType(kn,$r*_n);Is(ea,qt.data,$r,_n,on,Yn,qt.offset),zt(ea,Ye),pn.freeType(ea)}else Lt.raise("invalid data for buffer subdata");return It}return ct||It($),It._reglType="buffer",It._buffer=Et,It.subdata=Qt,Ce.profile&&(It.stats=Et.stats),It.destroy=function(){v(Et)},It}function G(){xi(pr).forEach(function($){$.buffer=xt.createBuffer(),xt.bindBuffer($.type,$.buffer),xt.bufferData($.type,$.persistentData||$.byteLength,$.usage)})}return Ce.profile&&(ne.getTotalBufferSize=function(){var $=0;return Object.keys(pr).forEach(function(ft){$+=pr[ft].stats.size}),$}),{create:M,createStream:en,destroyStream:an,clear:function(){xi(pr).forEach(v),Zr.forEach(v)},getBuffer:function($){return $&&$._buffer instanceof Tr?$._buffer:null},restore:G,_initBuffer:dn}}var fs=0,Os=0,Wo=1,xn=1,cs=4,ko=4,oo={points:fs,point:Os,lines:Wo,line:xn,triangles:cs,triangle:ko,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Jo=0,Es=1,Hi=4,So=5120,Ii=5121,yo=5122,so=5123,ts=5124,es=5125,Ro=34963,ls=35040,Xo=35044;function Yo(xt,ne,Ce,yr){var Br={},pr=0,Tr={uint8:Ii,uint16:so};ne.oes_element_index_uint&&(Tr.uint32=es);function Zr(G){this.id=pr++,Br[this.id]=this,this.buffer=G,this.primType=Hi,this.vertCount=0,this.type=0}Zr.prototype.bind=function(){this.buffer.bind()};var en=[];function an(G){var $=en.pop();return $||($=new Zr(Ce.create(null,Ro,!0,!1)._buffer)),dn($,G,ls,-1,-1,0,0),$}function Jr(G){en.push(G)}function dn(G,$,ft,ct,yt,Et,It){G.buffer.bind();var zt;if($){var Qt=It;!It&&(!U($)||Ai($)&&!U($.data))&&(Qt=ne.oes_element_index_uint?es:so),Ce._initBuffer(G.buffer,$,ft,Qt,3)}else xt.bufferData(Ro,Et,ft),G.buffer.dtype=zt||Ii,G.buffer.usage=ft,G.buffer.dimension=3,G.buffer.byteLength=Et;if(zt=It,!It){switch(G.buffer.dtype){case Ii:case So:zt=Ii;break;case so:case yo:zt=so;break;case es:case ts:zt=es;break;default:Lt.raise("unsupported type for element array")}G.buffer.dtype=zt}G.type=zt,Lt(zt!==es||!!ne.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var qt=yt;qt<0&&(qt=G.buffer.byteLength,zt===so?qt>>=1:zt===es&&(qt>>=2)),G.vertCount=qt;var _e=ct;if(ct<0){_e=Hi;var Ye=G.buffer.dimension;Ye===1&&(_e=Jo),Ye===2&&(_e=Es),Ye===3&&(_e=Hi)}G.primType=_e}function v(G){yr.elementsCount--,Lt(G.buffer!==null,"must not double destroy elements"),delete Br[G.id],G.buffer.destroy(),G.buffer=null}function M(G,$){var ft=Ce.create(null,Ro,!0),ct=new Zr(ft._buffer);yr.elementsCount++;function yt(Et){if(!Et)ft(),ct.primType=Hi,ct.vertCount=0,ct.type=Ii;else if(typeof Et=="number")ft(Et),ct.primType=Hi,ct.vertCount=Et|0,ct.type=Ii;else{var It=null,zt=Xo,Qt=-1,qt=-1,_e=0,Ye=0;Array.isArray(Et)||U(Et)||Ai(Et)?It=Et:(Lt.type(Et,"object","invalid arguments for elements"),"data"in Et&&(It=Et.data,Lt(Array.isArray(It)||U(It)||Ai(It),"invalid data for element buffer")),"usage"in Et&&(Lt.parameter(Et.usage,Po,"invalid element buffer usage"),zt=Po[Et.usage]),"primitive"in Et&&(Lt.parameter(Et.primitive,oo,"invalid element buffer primitive"),Qt=oo[Et.primitive]),"count"in Et&&(Lt(typeof Et.count=="number"&&Et.count>=0,"invalid vertex count for elements"),qt=Et.count|0),"type"in Et&&(Lt.parameter(Et.type,Tr,"invalid buffer type"),Ye=Tr[Et.type]),"length"in Et?_e=Et.length|0:(_e=qt,Ye===so||Ye===yo?_e*=2:(Ye===es||Ye===ts)&&(_e*=4))),dn(ct,It,zt,Qt,qt,_e,Ye)}return yt}return yt(G),yt._reglType="elements",yt._elements=ct,yt.subdata=function(Et,It){return ft.subdata(Et,It),yt},yt.destroy=function(){v(ct)},yt}return{create:M,createStream:an,destroyStream:Jr,getElements:function(G){return typeof G=="function"&&G._elements instanceof Zr?G._elements:null},clear:function(){xi(Br).forEach(v)}}}var Fo=new Float32Array(1),za=new Uint32Array(Fo.buffer),Fi=5123;function uo(xt){for(var ne=pn.allocType(Fi,xt.length),Ce=0;Ce<xt.length;++Ce)if(isNaN(xt[Ce]))ne[Ce]=65535;else if(xt[Ce]===1/0)ne[Ce]=31744;else if(xt[Ce]===-1/0)ne[Ce]=64512;else{Fo[0]=xt[Ce];var yr=za[0],Br=yr>>>31<<15,pr=(yr<<1>>>24)-127,Tr=yr>>13&1024-1;if(pr<-24)ne[Ce]=Br;else if(pr<-14){var Zr=-14-pr;ne[Ce]=Br+(Tr+1024>>Zr)}else pr>15?ne[Ce]=Br+31744:ne[Ce]=Br+(pr+15<<10)+Tr}return ne}function Na(xt){return Array.isArray(xt)||U(xt)}var Mo=function(xt){return!(xt&xt-1)&&!!xt},rs=34467,Gi=3553,mo=34067,Co=34069,Ao=6408,Ls=6406,Ds=6407,ns=6409,Vo=6410,ru=32854,Vs=32855,hs=36194,Ft=32819,me=32820,We=33635,qe=34042,Rr=6402,En=34041,Vn=35904,ja=35906,li=36193,fo=33776,qi=33777,js=33778,Mu=33779,gu=35986,Hs=35987,pu=34798,Ua=35840,Fn=35841,Vu=35842,jo=35843,Cu=36196,ws=5121,Ki=5123,Oi=5125,To=5126,ju=10242,cf=10243,Uf=10497,Au=33071,Io=33648,h=10240,O=10241,dt=9728,St=9729,kt=9984,Ht=9985,Zt=9986,le=9987,ye=33170,Oe=4352,He=4353,Ar=4354,Ir=34046,_r=3317,Qr=37440,yn=37441,kr=37443,Tn=37444,Ea=33984,wa=[kt,Zt,Ht,le],ga=[0,ns,Vo,Ds,Ao],ta={};ta[ns]=ta[Ls]=ta[Rr]=1,ta[En]=ta[Vo]=2,ta[Ds]=ta[Vn]=3,ta[Ao]=ta[ja]=4;function ha(xt){return"[object "+xt+"]"}var Bi=ha("HTMLCanvasElement"),_i=ha("OffscreenCanvas"),Li=ha("CanvasRenderingContext2D"),Di=ha("ImageBitmap"),Ni=ha("HTMLImageElement"),zi=ha("HTMLVideoElement"),co=Object.keys(Oa).concat([Bi,_i,Li,Di,Ni,zi]),Ha=[];Ha[ws]=1,Ha[To]=4,Ha[li]=2,Ha[Ki]=2,Ha[Oi]=4;var Ja=[];Ja[ru]=2,Ja[Vs]=2,Ja[hs]=2,Ja[En]=4,Ja[fo]=.5,Ja[qi]=.5,Ja[js]=1,Ja[Mu]=1,Ja[gu]=.5,Ja[Hs]=1,Ja[pu]=1,Ja[Ua]=.5,Ja[Fn]=.25,Ja[Vu]=.5,Ja[jo]=.25,Ja[Cu]=.5;function Ns(xt){return Array.isArray(xt)&&(xt.length===0||typeof xt[0]=="number")}function _s(xt){if(!Array.isArray(xt))return!1;var ne=xt.length;return!(ne===0||!Na(xt[0]))}function vs(xt){return Object.prototype.toString.call(xt)}function yu(xt){return vs(xt)===Bi}function Wf(xt){return vs(xt)===_i}function Hc(xt){return vs(xt)===Li}function Kc(xt){return vs(xt)===Di}function Zc(xt){return vs(xt)===Ni}function $c(xt){return vs(xt)===zi}function Xf(xt){if(!xt)return!1;var ne=vs(xt);return co.indexOf(ne)>=0?!0:Ns(xt)||_s(xt)||Ai(xt)}function mc(xt){return Oa[Object.prototype.toString.call(xt)]|0}function qc(xt,ne){var Ce=ne.length;switch(xt.type){case ws:case Ki:case Oi:case To:var yr=pn.allocType(xt.type,Ce);yr.set(ne),xt.data=yr;break;case li:xt.data=uo(ne);break;default:Lt.raise("unsupported texture type, must specify a typed array")}}function Yf(xt,ne){return pn.allocType(xt.type===li?To:xt.type,ne)}function xc(xt,ne){xt.type===li?(xt.data=uo(ne),pn.freeType(ne)):xt.data=ne}function lf(xt,ne,Ce,yr,Br,pr){for(var Tr=xt.width,Zr=xt.height,en=xt.channels,an=Tr*Zr*en,Jr=Yf(xt,an),dn=0,v=0;v<Zr;++v)for(var M=0;M<Tr;++M)for(var G=0;G<en;++G)Jr[dn++]=ne[Ce*M+yr*v+Br*G+pr];xc(xt,Jr)}function nu(xt,ne,Ce,yr,Br,pr){var Tr;if(typeof Ja[xt]!="undefined"?Tr=Ja[xt]:Tr=ta[xt]*Ha[ne],pr&&(Tr*=6),Br){for(var Zr=0,en=Ce;en>=1;)Zr+=Tr*en*en,en/=2;return Zr}else return Tr*Ce*yr}function hf(xt,ne,Ce,yr,Br,pr,Tr){var Zr={"don't care":Oe,"dont care":Oe,nice:Ar,fast:He},en={repeat:Uf,clamp:Au,mirror:Io},an={nearest:dt,linear:St},Jr=z({mipmap:le,"nearest mipmap nearest":kt,"linear mipmap nearest":Ht,"nearest mipmap linear":Zt,"linear mipmap linear":le},an),dn={none:0,browser:Tn},v={uint8:ws,rgba4:Ft,rgb565:We,"rgb5 a1":me},M={alpha:Ls,luminance:ns,"luminance alpha":Vo,rgb:Ds,rgba:Ao,rgba4:ru,"rgb5 a1":Vs,rgb565:hs},G={};ne.ext_srgb&&(M.srgb=Vn,M.srgba=ja),ne.oes_texture_float&&(v.float32=v.float=To),ne.oes_texture_half_float&&(v.float16=v["half float"]=li),ne.webgl_depth_texture&&(z(M,{depth:Rr,"depth stencil":En}),z(v,{uint16:Ki,uint32:Oi,"depth stencil":qe})),ne.webgl_compressed_texture_s3tc&&z(G,{"rgb s3tc dxt1":fo,"rgba s3tc dxt1":qi,"rgba s3tc dxt3":js,"rgba s3tc dxt5":Mu}),ne.webgl_compressed_texture_atc&&z(G,{"rgb atc":gu,"rgba atc explicit alpha":Hs,"rgba atc interpolated alpha":pu}),ne.webgl_compressed_texture_pvrtc&&z(G,{"rgb pvrtc 4bppv1":Ua,"rgb pvrtc 2bppv1":Fn,"rgba pvrtc 4bppv1":Vu,"rgba pvrtc 2bppv1":jo}),ne.webgl_compressed_texture_etc1&&(G["rgb etc1"]=Cu);var $=Array.prototype.slice.call(xt.getParameter(rs));Object.keys(G).forEach(function(we){var br=G[we];$.indexOf(br)>=0&&(M[we]=br)});var ft=Object.keys(M);Ce.textureFormats=ft;var ct=[];Object.keys(M).forEach(function(we){var br=M[we];ct[br]=we});var yt=[];Object.keys(v).forEach(function(we){var br=v[we];yt[br]=we});var Et=[];Object.keys(an).forEach(function(we){var br=an[we];Et[br]=we});var It=[];Object.keys(Jr).forEach(function(we){var br=Jr[we];It[br]=we});var zt=[];Object.keys(en).forEach(function(we){var br=en[we];zt[br]=we});var Qt=ft.reduce(function(we,br){var gr=M[br];return gr===ns||gr===Ls||gr===ns||gr===Vo||gr===Rr||gr===En||ne.ext_srgb&&(gr===Vn||gr===ja)?we[gr]=gr:gr===Vs||br.indexOf("rgba")>=0?we[gr]=Ao:we[gr]=Ds,we},{});function qt(){this.internalformat=Ao,this.format=Ao,this.type=ws,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Tn,this.width=0,this.height=0,this.channels=0}function _e(we,br){we.internalformat=br.internalformat,we.format=br.format,we.type=br.type,we.compressed=br.compressed,we.premultiplyAlpha=br.premultiplyAlpha,we.flipY=br.flipY,we.unpackAlignment=br.unpackAlignment,we.colorSpace=br.colorSpace,we.width=br.width,we.height=br.height,we.channels=br.channels}function Ye(we,br){if(!(typeof br!="object"||!br)){if("premultiplyAlpha"in br&&(Lt.type(br.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),we.premultiplyAlpha=br.premultiplyAlpha),"flipY"in br&&(Lt.type(br.flipY,"boolean","invalid texture flip"),we.flipY=br.flipY),"alignment"in br&&(Lt.oneOf(br.alignment,[1,2,4,8],"invalid texture unpack alignment"),we.unpackAlignment=br.alignment),"colorSpace"in br&&(Lt.parameter(br.colorSpace,dn,"invalid colorSpace"),we.colorSpace=dn[br.colorSpace]),"type"in br){var gr=br.type;Lt(ne.oes_texture_float||!(gr==="float"||gr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Lt(ne.oes_texture_half_float||!(gr==="half float"||gr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Lt(ne.webgl_depth_texture||!(gr==="uint16"||gr==="uint32"||gr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Lt.parameter(gr,v,"invalid texture type"),we.type=v[gr]}var Pn=we.width,Ga=we.height,ve=we.channels,Jt=!1;"shape"in br?(Lt(Array.isArray(br.shape)&&br.shape.length>=2,"shape must be an array"),Pn=br.shape[0],Ga=br.shape[1],br.shape.length===3&&(ve=br.shape[2],Lt(ve>0&&ve<=4,"invalid number of channels"),Jt=!0),Lt(Pn>=0&&Pn<=Ce.maxTextureSize,"invalid width"),Lt(Ga>=0&&Ga<=Ce.maxTextureSize,"invalid height")):("radius"in br&&(Pn=Ga=br.radius,Lt(Pn>=0&&Pn<=Ce.maxTextureSize,"invalid radius")),"width"in br&&(Pn=br.width,Lt(Pn>=0&&Pn<=Ce.maxTextureSize,"invalid width")),"height"in br&&(Ga=br.height,Lt(Ga>=0&&Ga<=Ce.maxTextureSize,"invalid height")),"channels"in br&&(ve=br.channels,Lt(ve>0&&ve<=4,"invalid number of channels"),Jt=!0)),we.width=Pn|0,we.height=Ga|0,we.channels=ve|0;var Be=!1;if("format"in br){var ir=br.format;Lt(ne.webgl_depth_texture||!(ir==="depth"||ir==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Lt.parameter(ir,M,"invalid texture format");var ur=we.internalformat=M[ir];we.format=Qt[ur],ir in v&&("type"in br||(we.type=v[ir])),ir in G&&(we.compressed=!0),Be=!0}!Jt&&Be?we.channels=ta[we.format]:Jt&&!Be?we.channels!==ga[we.format]&&(we.format=we.internalformat=ga[we.channels]):Be&&Jt&&Lt(we.channels===ta[we.format],"number of channels inconsistent with specified format")}}function Cr(we){xt.pixelStorei(Qr,we.flipY),xt.pixelStorei(yn,we.premultiplyAlpha),xt.pixelStorei(kr,we.colorSpace),xt.pixelStorei(_r,we.unpackAlignment)}function $e(){qt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function er(we,br){var gr=null;if(Xf(br)?gr=br:br&&(Lt.type(br,"object","invalid pixel data type"),Ye(we,br),"x"in br&&(we.xOffset=br.x|0),"y"in br&&(we.yOffset=br.y|0),Xf(br.data)&&(gr=br.data)),Lt(!we.compressed||gr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),br.copy){Lt(!gr,"can not specify copy and data field for the same texture");var Pn=Br.viewportWidth,Ga=Br.viewportHeight;we.width=we.width||Pn-we.xOffset,we.height=we.height||Ga-we.yOffset,we.needsCopy=!0,Lt(we.xOffset>=0&&we.xOffset<Pn&&we.yOffset>=0&&we.yOffset<Ga&&we.width>0&&we.width<=Pn&&we.height>0&&we.height<=Ga,"copy texture read out of bounds")}else if(!gr)we.width=we.width||1,we.height=we.height||1,we.channels=we.channels||4;else if(U(gr))we.channels=we.channels||4,we.data=gr,!("type"in br)&&we.type===ws&&(we.type=mc(gr));else if(Ns(gr))we.channels=we.channels||4,qc(we,gr),we.alignment=1,we.needsFree=!0;else if(Ai(gr)){var ve=gr.data;!Array.isArray(ve)&&we.type===ws&&(we.type=mc(ve));var Jt=gr.shape,Be=gr.stride,ir,ur,Ue,Fe,Ze,de;Jt.length===3?(Ue=Jt[2],de=Be[2]):(Lt(Jt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Ue=1,de=1),ir=Jt[0],ur=Jt[1],Fe=Be[0],Ze=Be[1],we.alignment=1,we.width=ir,we.height=ur,we.channels=Ue,we.format=we.internalformat=ga[Ue],we.needsFree=!0,lf(we,ve,Fe,Ze,de,gr.offset)}else if(yu(gr)||Wf(gr)||Hc(gr))yu(gr)||Wf(gr)?we.element=gr:we.element=gr.canvas,we.width=we.element.width,we.height=we.element.height,we.channels=4;else if(Kc(gr))we.element=gr,we.width=gr.width,we.height=gr.height,we.channels=4;else if(Zc(gr))we.element=gr,we.width=gr.naturalWidth,we.height=gr.naturalHeight,we.channels=4;else if($c(gr))we.element=gr,we.width=gr.videoWidth,we.height=gr.videoHeight,we.channels=4;else if(_s(gr)){var Ne=we.width||gr[0].length,ce=we.height||gr.length,Qe=we.channels;Na(gr[0][0])?Qe=Qe||gr[0][0].length:Qe=Qe||1;for(var hr=po.shape(gr),Fr=1,Wr=0;Wr<hr.length;++Wr)Fr*=hr[Wr];var Or=Yf(we,Fr);po.flatten(gr,hr,"",Or),xc(we,Or),we.alignment=1,we.width=Ne,we.height=ce,we.channels=Qe,we.format=we.internalformat=ga[Qe],we.needsFree=!0}we.type===To?Lt(Ce.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):we.type===li&&Lt(Ce.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function tr(we,br,gr){var Pn=we.element,Ga=we.data,ve=we.internalformat,Jt=we.format,Be=we.type,ir=we.width,ur=we.height;Cr(we),Pn?xt.texImage2D(br,gr,Jt,Jt,Be,Pn):we.compressed?xt.compressedTexImage2D(br,gr,ve,ir,ur,0,Ga):we.needsCopy?(yr(),xt.copyTexImage2D(br,gr,Jt,we.xOffset,we.yOffset,ir,ur,0)):xt.texImage2D(br,gr,Jt,ir,ur,0,Jt,Be,Ga||null)}function $r(we,br,gr,Pn,Ga){var ve=we.element,Jt=we.data,Be=we.internalformat,ir=we.format,ur=we.type,Ue=we.width,Fe=we.height;Cr(we),ve?xt.texSubImage2D(br,Ga,gr,Pn,ir,ur,ve):we.compressed?xt.compressedTexSubImage2D(br,Ga,gr,Pn,Be,Ue,Fe,Jt):we.needsCopy?(yr(),xt.copyTexSubImage2D(br,Ga,gr,Pn,we.xOffset,we.yOffset,Ue,Fe)):xt.texSubImage2D(br,Ga,gr,Pn,Ue,Fe,ir,ur,Jt)}var _n=[];function on(){return _n.pop()||new $e}function Yn(we){we.needsFree&&pn.freeType(we.data),$e.call(we),_n.push(we)}function kn(){qt.call(this),this.genMipmaps=!1,this.mipmapHint=Oe,this.mipmask=0,this.images=Array(16)}function ea(we,br,gr){var Pn=we.images[0]=on();we.mipmask=1,Pn.width=we.width=br,Pn.height=we.height=gr,Pn.channels=we.channels=4}function da(we,br){var gr=null;if(Xf(br))gr=we.images[0]=on(),_e(gr,we),er(gr,br),we.mipmask=1;else if(Ye(we,br),Array.isArray(br.mipmap))for(var Pn=br.mipmap,Ga=0;Ga<Pn.length;++Ga)gr=we.images[Ga]=on(),_e(gr,we),gr.width>>=Ga,gr.height>>=Ga,er(gr,Pn[Ga]),we.mipmask|=1<<Ga;else gr=we.images[0]=on(),_e(gr,we),er(gr,br),we.mipmask=1;_e(we,we.images[0]),we.compressed&&(we.internalformat===fo||we.internalformat===qi||we.internalformat===js||we.internalformat===Mu)&&Lt(we.width%4===0&&we.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ia(we,br){for(var gr=we.images,Pn=0;Pn<gr.length;++Pn){if(!gr[Pn])return;tr(gr[Pn],br,Pn)}}var bi=[];function ba(){var we=bi.pop()||new kn;qt.call(we),we.mipmask=0;for(var br=0;br<16;++br)we.images[br]=null;return we}function $i(we){for(var br=we.images,gr=0;gr<br.length;++gr)br[gr]&&Yn(br[gr]),br[gr]=null;bi.push(we)}function yi(){this.minFilter=dt,this.magFilter=dt,this.wrapS=Au,this.wrapT=Au,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Oe}function Ya(we,br){if("min"in br){var gr=br.min;Lt.parameter(gr,Jr),we.minFilter=Jr[gr],wa.indexOf(we.minFilter)>=0&&!("faces"in br)&&(we.genMipmaps=!0)}if("mag"in br){var Pn=br.mag;Lt.parameter(Pn,an),we.magFilter=an[Pn]}var Ga=we.wrapS,ve=we.wrapT;if("wrap"in br){var Jt=br.wrap;typeof Jt=="string"?(Lt.parameter(Jt,en),Ga=ve=en[Jt]):Array.isArray(Jt)&&(Lt.parameter(Jt[0],en),Lt.parameter(Jt[1],en),Ga=en[Jt[0]],ve=en[Jt[1]])}else{if("wrapS"in br){var Be=br.wrapS;Lt.parameter(Be,en),Ga=en[Be]}if("wrapT"in br){var ir=br.wrapT;Lt.parameter(ir,en),ve=en[ir]}}if(we.wrapS=Ga,we.wrapT=ve,"anisotropic"in br){var ur=br.anisotropic;Lt(typeof ur=="number"&&ur>=1&&ur<=Ce.maxAnisotropic,"aniso samples must be between 1 and "),we.anisotropic=br.anisotropic}if("mipmap"in br){var Ue=!1;switch(typeof br.mipmap){case"string":Lt.parameter(br.mipmap,Zr,"invalid mipmap hint"),we.mipmapHint=Zr[br.mipmap],we.genMipmaps=!0,Ue=!0;break;case"boolean":Ue=we.genMipmaps=br.mipmap;break;case"object":Lt(Array.isArray(br.mipmap),"invalid mipmap type"),we.genMipmaps=!1,Ue=!0;break;default:Lt.raise("invalid mipmap type")}Ue&&!("min"in br)&&(we.minFilter=kt)}}function Xi(we,br){xt.texParameteri(br,O,we.minFilter),xt.texParameteri(br,h,we.magFilter),xt.texParameteri(br,ju,we.wrapS),xt.texParameteri(br,cf,we.wrapT),ne.ext_texture_filter_anisotropic&&xt.texParameteri(br,Ir,we.anisotropic),we.genMipmaps&&(xt.hint(ye,we.mipmapHint),xt.generateMipmap(br))}var Yi=0,xo={},os=Ce.maxTextureUnits,ho=Array(os).map(function(){return null});function Ma(we){qt.call(this),this.mipmask=0,this.internalformat=Ao,this.id=Yi++,this.refCount=1,this.target=we,this.texture=xt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new yi,Tr.profile&&(this.stats={size:0})}function ss(we){xt.activeTexture(Ea),xt.bindTexture(we.target,we.texture)}function ui(){var we=ho[0];we?xt.bindTexture(we.target,we.texture):xt.bindTexture(Gi,null)}function oa(we){var br=we.texture;Lt(br,"must not double destroy texture");var gr=we.unit,Pn=we.target;gr>=0&&(xt.activeTexture(Ea+gr),xt.bindTexture(Pn,null),ho[gr]=null),xt.deleteTexture(br),we.texture=null,we.params=null,we.pixels=null,we.refCount=0,delete xo[we.id],pr.textureCount--}z(Ma.prototype,{bind:function(){var we=this;we.bindCount+=1;var br=we.unit;if(br<0){for(var gr=0;gr<os;++gr){var Pn=ho[gr];if(Pn){if(Pn.bindCount>0)continue;Pn.unit=-1}ho[gr]=we,br=gr;break}br>=os&&Lt.raise("insufficient number of texture units"),Tr.profile&&pr.maxTextureUnits<br+1&&(pr.maxTextureUnits=br+1),we.unit=br,xt.activeTexture(Ea+br),xt.bindTexture(we.target,we.texture)}return br},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&oa(this)}});function Fa(we,br){var gr=new Ma(Gi);xo[gr.id]=gr,pr.textureCount++;function Pn(Jt,Be){var ir=gr.texInfo;yi.call(ir);var ur=ba();return typeof Jt=="number"?typeof Be=="number"?ea(ur,Jt|0,Be|0):ea(ur,Jt|0,Jt|0):Jt?(Lt.type(Jt,"object","invalid arguments to regl.texture"),Ya(ir,Jt),da(ur,Jt)):ea(ur,1,1),ir.genMipmaps&&(ur.mipmask=(ur.width<<1)-1),gr.mipmask=ur.mipmask,_e(gr,ur),Lt.texture2D(ir,ur,Ce),gr.internalformat=ur.internalformat,Pn.width=ur.width,Pn.height=ur.height,ss(gr),ia(ur,Gi),Xi(ir,Gi),ui(),$i(ur),Tr.profile&&(gr.stats.size=nu(gr.internalformat,gr.type,ur.width,ur.height,ir.genMipmaps,!1)),Pn.format=ct[gr.internalformat],Pn.type=yt[gr.type],Pn.mag=Et[ir.magFilter],Pn.min=It[ir.minFilter],Pn.wrapS=zt[ir.wrapS],Pn.wrapT=zt[ir.wrapT],Pn}function Ga(Jt,Be,ir,ur){Lt(!!Jt,"must specify image data");var Ue=Be|0,Fe=ir|0,Ze=ur|0,de=on();return _e(de,gr),de.width=0,de.height=0,er(de,Jt),de.width=de.width||(gr.width>>Ze)-Ue,de.height=de.height||(gr.height>>Ze)-Fe,Lt(gr.type===de.type&&gr.format===de.format&&gr.internalformat===de.internalformat,"incompatible format for texture.subimage"),Lt(Ue>=0&&Fe>=0&&Ue+de.width<=gr.width&&Fe+de.height<=gr.height,"texture.subimage write out of bounds"),Lt(gr.mipmask&1<<Ze,"missing mipmap data"),Lt(de.data||de.element||de.needsCopy,"missing image data"),ss(gr),$r(de,Gi,Ue,Fe,Ze),ui(),Yn(de),Pn}function ve(Jt,Be){var ir=Jt|0,ur=Be|0||ir;if(ir===gr.width&&ur===gr.height)return Pn;Pn.width=gr.width=ir,Pn.height=gr.height=ur,ss(gr);for(var Ue=0;gr.mipmask>>Ue;++Ue){var Fe=ir>>Ue,Ze=ur>>Ue;if(!Fe||!Ze)break;xt.texImage2D(Gi,Ue,gr.format,Fe,Ze,0,gr.format,gr.type,null)}return ui(),Tr.profile&&(gr.stats.size=nu(gr.internalformat,gr.type,ir,ur,!1,!1)),Pn}return Pn(we,br),Pn.subimage=Ga,Pn.resize=ve,Pn._reglType="texture2d",Pn._texture=gr,Tr.profile&&(Pn.stats=gr.stats),Pn.destroy=function(){gr.decRef()},Pn}function ti(we,br,gr,Pn,Ga,ve){var Jt=new Ma(mo);xo[Jt.id]=Jt,pr.cubeCount++;var Be=new Array(6);function ir(Fe,Ze,de,Ne,ce,Qe){var hr,Fr=Jt.texInfo;for(yi.call(Fr),hr=0;hr<6;++hr)Be[hr]=ba();if(typeof Fe=="number"||!Fe){var Wr=Fe|0||1;for(hr=0;hr<6;++hr)ea(Be[hr],Wr,Wr)}else if(typeof Fe=="object")if(Ze)da(Be[0],Fe),da(Be[1],Ze),da(Be[2],de),da(Be[3],Ne),da(Be[4],ce),da(Be[5],Qe);else if(Ya(Fr,Fe),Ye(Jt,Fe),"faces"in Fe){var Or=Fe.faces;for(Lt(Array.isArray(Or)&&Or.length===6,"cube faces must be a length 6 array"),hr=0;hr<6;++hr)Lt(typeof Or[hr]=="object"&&!!Or[hr],"invalid input for cube map face"),_e(Be[hr],Jt),da(Be[hr],Or[hr])}else for(hr=0;hr<6;++hr)da(Be[hr],Fe);else Lt.raise("invalid arguments to cube map");for(_e(Jt,Be[0]),Ce.npotTextureCube||Lt(Mo(Jt.width)&&Mo(Jt.height),"your browser does not support non power or two texture dimensions"),Fr.genMipmaps?Jt.mipmask=(Be[0].width<<1)-1:Jt.mipmask=Be[0].mipmask,Lt.textureCube(Jt,Fr,Be,Ce),Jt.internalformat=Be[0].internalformat,ir.width=Be[0].width,ir.height=Be[0].height,ss(Jt),hr=0;hr<6;++hr)ia(Be[hr],Co+hr);for(Xi(Fr,mo),ui(),Tr.profile&&(Jt.stats.size=nu(Jt.internalformat,Jt.type,ir.width,ir.height,Fr.genMipmaps,!0)),ir.format=ct[Jt.internalformat],ir.type=yt[Jt.type],ir.mag=Et[Fr.magFilter],ir.min=It[Fr.minFilter],ir.wrapS=zt[Fr.wrapS],ir.wrapT=zt[Fr.wrapT],hr=0;hr<6;++hr)$i(Be[hr]);return ir}function ur(Fe,Ze,de,Ne,ce){Lt(!!Ze,"must specify image data"),Lt(typeof Fe=="number"&&Fe===(Fe|0)&&Fe>=0&&Fe<6,"invalid face");var Qe=de|0,hr=Ne|0,Fr=ce|0,Wr=on();return _e(Wr,Jt),Wr.width=0,Wr.height=0,er(Wr,Ze),Wr.width=Wr.width||(Jt.width>>Fr)-Qe,Wr.height=Wr.height||(Jt.height>>Fr)-hr,Lt(Jt.type===Wr.type&&Jt.format===Wr.format&&Jt.internalformat===Wr.internalformat,"incompatible format for texture.subimage"),Lt(Qe>=0&&hr>=0&&Qe+Wr.width<=Jt.width&&hr+Wr.height<=Jt.height,"texture.subimage write out of bounds"),Lt(Jt.mipmask&1<<Fr,"missing mipmap data"),Lt(Wr.data||Wr.element||Wr.needsCopy,"missing image data"),ss(Jt),$r(Wr,Co+Fe,Qe,hr,Fr),ui(),Yn(Wr),ir}function Ue(Fe){var Ze=Fe|0;if(Ze!==Jt.width){ir.width=Jt.width=Ze,ir.height=Jt.height=Ze,ss(Jt);for(var de=0;de<6;++de)for(var Ne=0;Jt.mipmask>>Ne;++Ne)xt.texImage2D(Co+de,Ne,Jt.format,Ze>>Ne,Ze>>Ne,0,Jt.format,Jt.type,null);return ui(),Tr.profile&&(Jt.stats.size=nu(Jt.internalformat,Jt.type,ir.width,ir.height,!1,!0)),ir}}return ir(we,br,gr,Pn,Ga,ve),ir.subimage=ur,ir.resize=Ue,ir._reglType="textureCube",ir._texture=Jt,Tr.profile&&(ir.stats=Jt.stats),ir.destroy=function(){Jt.decRef()},ir}function vo(){for(var we=0;we<os;++we)xt.activeTexture(Ea+we),xt.bindTexture(Gi,null),ho[we]=null;xi(xo).forEach(oa),pr.cubeCount=0,pr.textureCount=0}Tr.profile&&(pr.getTotalTextureSize=function(){var we=0;return Object.keys(xo).forEach(function(br){we+=xo[br].stats.size}),we});function cu(){for(var we=0;we<os;++we){var br=ho[we];br&&(br.bindCount=0,br.unit=-1,ho[we]=null)}xi(xo).forEach(function(gr){gr.texture=xt.createTexture(),xt.bindTexture(gr.target,gr.texture);for(var Pn=0;Pn<32;++Pn)if(gr.mipmask&1<<Pn)if(gr.target===Gi)xt.texImage2D(Gi,Pn,gr.internalformat,gr.width>>Pn,gr.height>>Pn,0,gr.internalformat,gr.type,null);else for(var Ga=0;Ga<6;++Ga)xt.texImage2D(Co+Ga,Pn,gr.internalformat,gr.width>>Pn,gr.height>>Pn,0,gr.internalformat,gr.type,null);Xi(gr.texInfo,gr.target)})}function Gu(){for(var we=0;we<os;++we){var br=ho[we];br&&(br.bindCount=0,br.unit=-1,ho[we]=null),xt.activeTexture(Ea+we),xt.bindTexture(Gi,null),xt.bindTexture(mo,null)}}return{create2D:Fa,createCube:ti,clear:vo,getTexture:function(we){return null},restore:cu,refresh:Gu}}var In=36161,au=32854,Ka=32855,vf=36194,df=33189,Js=36168,Vf=34041,iu=35907,gf=34836,bc=34842,Tu=34843,Ss=[];Ss[au]=2,Ss[Ka]=2,Ss[vf]=2,Ss[df]=2,Ss[Js]=1,Ss[Vf]=4,Ss[iu]=4,Ss[gf]=16,Ss[bc]=8,Ss[Tu]=6;function jf(xt,ne,Ce){return Ss[xt]*ne*Ce}var Ec=function(xt,ne,Ce,yr,Br){var pr={rgba4:au,rgb565:vf,"rgb5 a1":Ka,depth:df,stencil:Js,"depth stencil":Vf};ne.ext_srgb&&(pr.srgba=iu),ne.ext_color_buffer_half_float&&(pr.rgba16f=bc,pr.rgb16f=Tu),ne.webgl_color_buffer_float&&(pr.rgba32f=gf);var Tr=[];Object.keys(pr).forEach(function(M){var G=pr[M];Tr[G]=M});var Zr=0,en={};function an(M){this.id=Zr++,this.refCount=1,this.renderbuffer=M,this.format=au,this.width=0,this.height=0,Br.profile&&(this.stats={size:0})}an.prototype.decRef=function(){--this.refCount<=0&&Jr(this)};function Jr(M){var G=M.renderbuffer;Lt(G,"must not double destroy renderbuffer"),xt.bindRenderbuffer(In,null),xt.deleteRenderbuffer(G),M.renderbuffer=null,M.refCount=0,delete en[M.id],yr.renderbufferCount--}function dn(M,G){var $=new an(xt.createRenderbuffer());en[$.id]=$,yr.renderbufferCount++;function ft(yt,Et){var It=0,zt=0,Qt=au;if(typeof yt=="object"&&yt){var qt=yt;if("shape"in qt){var _e=qt.shape;Lt(Array.isArray(_e)&&_e.length>=2,"invalid renderbuffer shape"),It=_e[0]|0,zt=_e[1]|0}else"radius"in qt&&(It=zt=qt.radius|0),"width"in qt&&(It=qt.width|0),"height"in qt&&(zt=qt.height|0);"format"in qt&&(Lt.parameter(qt.format,pr,"invalid renderbuffer format"),Qt=pr[qt.format])}else typeof yt=="number"?(It=yt|0,typeof Et=="number"?zt=Et|0:zt=It):yt?Lt.raise("invalid arguments to renderbuffer constructor"):It=zt=1;if(Lt(It>0&&zt>0&&It<=Ce.maxRenderbufferSize&&zt<=Ce.maxRenderbufferSize,"invalid renderbuffer size"),!(It===$.width&&zt===$.height&&Qt===$.format))return ft.width=$.width=It,ft.height=$.height=zt,$.format=Qt,xt.bindRenderbuffer(In,$.renderbuffer),xt.renderbufferStorage(In,Qt,It,zt),Lt(xt.getError()===0,"invalid render buffer format"),Br.profile&&($.stats.size=jf($.format,$.width,$.height)),ft.format=Tr[$.format],ft}function ct(yt,Et){var It=yt|0,zt=Et|0||It;return It===$.width&&zt===$.height||(Lt(It>0&&zt>0&&It<=Ce.maxRenderbufferSize&&zt<=Ce.maxRenderbufferSize,"invalid renderbuffer size"),ft.width=$.width=It,ft.height=$.height=zt,xt.bindRenderbuffer(In,$.renderbuffer),xt.renderbufferStorage(In,$.format,It,zt),Lt(xt.getError()===0,"invalid render buffer format"),Br.profile&&($.stats.size=jf($.format,$.width,$.height))),ft}return ft(M,G),ft.resize=ct,ft._reglType="renderbuffer",ft._renderbuffer=$,Br.profile&&(ft.stats=$.stats),ft.destroy=function(){$.decRef()},ft}Br.profile&&(yr.getTotalRenderbufferSize=function(){var M=0;return Object.keys(en).forEach(function(G){M+=en[G].stats.size}),M});function v(){xi(en).forEach(function(M){M.renderbuffer=xt.createRenderbuffer(),xt.bindRenderbuffer(In,M.renderbuffer),xt.renderbufferStorage(In,M.format,M.width,M.height)}),xt.bindRenderbuffer(In,null)}return{create:dn,clear:function(){xi(en).forEach(Jr)},restore:v}},lo=36160,pf=36161,mu=3553,ot=34069,mt=36064,Tt=36096,Yt=36128,ie=33306,ze=36053,Xe=36054,dr=36055,Yr=36057,tn=36061,On=36193,Gn=5121,Sn=5126,ua=6407,ma=6408,va=6402,fa=[ua,ma],Ra=[];Ra[ma]=4,Ra[ua]=3;var Kn=[];Kn[Gn]=1,Kn[Sn]=4,Kn[On]=2;var ka=32854,xa=32855,Qn=36194,Ba=33189,si=36168,pi=34041,ri=35907,$a=34836,Si=34842,Ui=34843,Wi=[ka,xa,Qn,ri,Si,Ui,$a],Ps={};Ps[ze]="complete",Ps[Xe]="incomplete attachment",Ps[Yr]="incomplete dimensions",Ps[dr]="incomplete, missing attachment",Ps[tn]="unsupported";function wc(xt,ne,Ce,yr,Br,pr){var Tr={cur:null,next:null,dirty:!1,setFBO:null},Zr=["rgba"],en=["rgba4","rgb565","rgb5 a1"];ne.ext_srgb&&en.push("srgba"),ne.ext_color_buffer_half_float&&en.push("rgba16f","rgb16f"),ne.webgl_color_buffer_float&&en.push("rgba32f");var an=["uint8"];ne.oes_texture_half_float&&an.push("half float","float16"),ne.oes_texture_float&&an.push("float","float32");function Jr($e,er,tr){this.target=$e,this.texture=er,this.renderbuffer=tr;var $r=0,_n=0;er?($r=er.width,_n=er.height):tr&&($r=tr.width,_n=tr.height),this.width=$r,this.height=_n}function dn($e){$e&&($e.texture&&$e.texture._texture.decRef(),$e.renderbuffer&&$e.renderbuffer._renderbuffer.decRef())}function v($e,er,tr){if($e)if($e.texture){var $r=$e.texture._texture,_n=Math.max(1,$r.width),on=Math.max(1,$r.height);Lt(_n===er&&on===tr,"inconsistent width/height for supplied texture"),$r.refCount+=1}else{var Yn=$e.renderbuffer._renderbuffer;Lt(Yn.width===er&&Yn.height===tr,"inconsistent width/height for renderbuffer"),Yn.refCount+=1}}function M($e,er){er&&(er.texture?xt.framebufferTexture2D(lo,$e,er.target,er.texture._texture.texture,0):xt.framebufferRenderbuffer(lo,$e,pf,er.renderbuffer._renderbuffer.renderbuffer))}function G($e){var er=mu,tr=null,$r=null,_n=$e;typeof $e=="object"&&(_n=$e.data,"target"in $e&&(er=$e.target|0)),Lt.type(_n,"function","invalid attachment data");var on=_n._reglType;return on==="texture2d"?(tr=_n,Lt(er===mu)):on==="textureCube"?(tr=_n,Lt(er>=ot&&er<ot+6,"invalid cube map target")):on==="renderbuffer"?($r=_n,er=pf):Lt.raise("invalid regl object for attachment"),new Jr(er,tr,$r)}function $($e,er,tr,$r,_n){if(tr){var on=yr.create2D({width:$e,height:er,format:$r,type:_n});return on._texture.refCount=0,new Jr(mu,on,null)}else{var Yn=Br.create({width:$e,height:er,format:$r});return Yn._renderbuffer.refCount=0,new Jr(pf,null,Yn)}}function ft($e){return $e&&($e.texture||$e.renderbuffer)}function ct($e,er,tr){$e&&($e.texture?$e.texture.resize(er,tr):$e.renderbuffer&&$e.renderbuffer.resize(er,tr),$e.width=er,$e.height=tr)}var yt=0,Et={};function It(){this.id=yt++,Et[this.id]=this,this.framebuffer=xt.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function zt($e){$e.colorAttachments.forEach(dn),dn($e.depthAttachment),dn($e.stencilAttachment),dn($e.depthStencilAttachment)}function Qt($e){var er=$e.framebuffer;Lt(er,"must not double destroy framebuffer"),xt.deleteFramebuffer(er),$e.framebuffer=null,pr.framebufferCount--,delete Et[$e.id]}function qt($e){var er;xt.bindFramebuffer(lo,$e.framebuffer);var tr=$e.colorAttachments;for(er=0;er<tr.length;++er)M(mt+er,tr[er]);for(er=tr.length;er<Ce.maxColorAttachments;++er)xt.framebufferTexture2D(lo,mt+er,mu,null,0);xt.framebufferTexture2D(lo,ie,mu,null,0),xt.framebufferTexture2D(lo,Tt,mu,null,0),xt.framebufferTexture2D(lo,Yt,mu,null,0),M(Tt,$e.depthAttachment),M(Yt,$e.stencilAttachment),M(ie,$e.depthStencilAttachment);var $r=xt.checkFramebufferStatus(lo);!xt.isContextLost()&&$r!==ze&&Lt.raise("framebuffer configuration not supported, status = "+Ps[$r]),xt.bindFramebuffer(lo,Tr.next?Tr.next.framebuffer:null),Tr.cur=Tr.next,xt.getError()}function _e($e,er){var tr=new It;pr.framebufferCount++;function $r(on,Yn){var kn;Lt(Tr.next!==tr,"can not update framebuffer which is currently in use");var ea=0,da=0,ia=!0,bi=!0,ba=null,$i=!0,yi="rgba",Ya="uint8",Xi=1,Yi=null,xo=null,os=null,ho=!1;if(typeof on=="number")ea=on|0,da=Yn|0||ea;else if(!on)ea=da=1;else{Lt.type(on,"object","invalid arguments for framebuffer");var Ma=on;if("shape"in Ma){var ss=Ma.shape;Lt(Array.isArray(ss)&&ss.length>=2,"invalid shape for framebuffer"),ea=ss[0],da=ss[1]}else"radius"in Ma&&(ea=da=Ma.radius),"width"in Ma&&(ea=Ma.width),"height"in Ma&&(da=Ma.height);("color"in Ma||"colors"in Ma)&&(ba=Ma.color||Ma.colors,Array.isArray(ba)&&Lt(ba.length===1||ne.webgl_draw_buffers,"multiple render targets not supported")),ba||("colorCount"in Ma&&(Xi=Ma.colorCount|0,Lt(Xi>0,"invalid color buffer count")),"colorTexture"in Ma&&($i=!!Ma.colorTexture,yi="rgba4"),"colorType"in Ma&&(Ya=Ma.colorType,$i?(Lt(ne.oes_texture_float||!(Ya==="float"||Ya==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Lt(ne.oes_texture_half_float||!(Ya==="half float"||Ya==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Ya==="half float"||Ya==="float16"?(Lt(ne.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),yi="rgba16f"):(Ya==="float"||Ya==="float32")&&(Lt(ne.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),yi="rgba32f"),Lt.oneOf(Ya,an,"invalid color type")),"colorFormat"in Ma&&(yi=Ma.colorFormat,Zr.indexOf(yi)>=0?$i=!0:en.indexOf(yi)>=0?$i=!1:$i?Lt.oneOf(Ma.colorFormat,Zr,"invalid color format for texture"):Lt.oneOf(Ma.colorFormat,en,"invalid color format for renderbuffer"))),("depthTexture"in Ma||"depthStencilTexture"in Ma)&&(ho=!!(Ma.depthTexture||Ma.depthStencilTexture),Lt(!ho||ne.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Ma&&(typeof Ma.depth=="boolean"?ia=Ma.depth:(Yi=Ma.depth,bi=!1)),"stencil"in Ma&&(typeof Ma.stencil=="boolean"?bi=Ma.stencil:(xo=Ma.stencil,ia=!1)),"depthStencil"in Ma&&(typeof Ma.depthStencil=="boolean"?ia=bi=Ma.depthStencil:(os=Ma.depthStencil,ia=!1,bi=!1))}var ui=null,oa=null,Fa=null,ti=null;if(Array.isArray(ba))ui=ba.map(G);else if(ba)ui=[G(ba)];else for(ui=new Array(Xi),kn=0;kn<Xi;++kn)ui[kn]=$(ea,da,$i,yi,Ya);Lt(ne.webgl_draw_buffers||ui.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Lt(ui.length<=Ce.maxColorAttachments,"too many color attachments, not supported"),ea=ea||ui[0].width,da=da||ui[0].height,Yi?oa=G(Yi):ia&&!bi&&(oa=$(ea,da,ho,"depth","uint32")),xo?Fa=G(xo):bi&&!ia&&(Fa=$(ea,da,!1,"stencil","uint8")),os?ti=G(os):!Yi&&!xo&&bi&&ia&&(ti=$(ea,da,ho,"depth stencil","depth stencil")),Lt(!!Yi+!!xo+!!os<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var vo=null;for(kn=0;kn<ui.length;++kn)if(v(ui[kn],ea,da),Lt(!ui[kn]||ui[kn].texture&&fa.indexOf(ui[kn].texture._texture.format)>=0||ui[kn].renderbuffer&&Wi.indexOf(ui[kn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+kn+" is invalid"),ui[kn]&&ui[kn].texture){var cu=Ra[ui[kn].texture._texture.format]*Kn[ui[kn].texture._texture.type];vo===null?vo=cu:Lt(vo===cu,"all color attachments much have the same number of bits per pixel.")}return v(oa,ea,da),Lt(!oa||oa.texture&&oa.texture._texture.format===va||oa.renderbuffer&&oa.renderbuffer._renderbuffer.format===Ba,"invalid depth attachment for framebuffer object"),v(Fa,ea,da),Lt(!Fa||Fa.renderbuffer&&Fa.renderbuffer._renderbuffer.format===si,"invalid stencil attachment for framebuffer object"),v(ti,ea,da),Lt(!ti||ti.texture&&ti.texture._texture.format===pi||ti.renderbuffer&&ti.renderbuffer._renderbuffer.format===pi,"invalid depth-stencil attachment for framebuffer object"),zt(tr),tr.width=ea,tr.height=da,tr.colorAttachments=ui,tr.depthAttachment=oa,tr.stencilAttachment=Fa,tr.depthStencilAttachment=ti,$r.color=ui.map(ft),$r.depth=ft(oa),$r.stencil=ft(Fa),$r.depthStencil=ft(ti),$r.width=tr.width,$r.height=tr.height,qt(tr),$r}function _n(on,Yn){Lt(Tr.next!==tr,"can not resize a framebuffer which is currently in use");var kn=Math.max(on|0,1),ea=Math.max(Yn|0||kn,1);if(kn===tr.width&&ea===tr.height)return $r;for(var da=tr.colorAttachments,ia=0;ia<da.length;++ia)ct(da[ia],kn,ea);return ct(tr.depthAttachment,kn,ea),ct(tr.stencilAttachment,kn,ea),ct(tr.depthStencilAttachment,kn,ea),tr.width=$r.width=kn,tr.height=$r.height=ea,qt(tr),$r}return $r($e,er),z($r,{resize:_n,_reglType:"framebuffer",_framebuffer:tr,destroy:function(){Qt(tr),zt(tr)},use:function(on){Tr.setFBO({framebuffer:$r},on)}})}function Ye($e){var er=Array(6);function tr(_n){var on;Lt(er.indexOf(Tr.next)<0,"can not update framebuffer which is currently in use");var Yn={color:null},kn=0,ea=null,da="rgba",ia="uint8",bi=1;if(typeof _n=="number")kn=_n|0;else if(!_n)kn=1;else{Lt.type(_n,"object","invalid arguments for framebuffer");var ba=_n;if("shape"in ba){var $i=ba.shape;Lt(Array.isArray($i)&&$i.length>=2,"invalid shape for framebuffer"),Lt($i[0]===$i[1],"cube framebuffer must be square"),kn=$i[0]}else"radius"in ba&&(kn=ba.radius|0),"width"in ba?(kn=ba.width|0,"height"in ba&&Lt(ba.height===kn,"must be square")):"height"in ba&&(kn=ba.height|0);("color"in ba||"colors"in ba)&&(ea=ba.color||ba.colors,Array.isArray(ea)&&Lt(ea.length===1||ne.webgl_draw_buffers,"multiple render targets not supported")),ea||("colorCount"in ba&&(bi=ba.colorCount|0,Lt(bi>0,"invalid color buffer count")),"colorType"in ba&&(Lt.oneOf(ba.colorType,an,"invalid color type"),ia=ba.colorType),"colorFormat"in ba&&(da=ba.colorFormat,Lt.oneOf(ba.colorFormat,Zr,"invalid color format for texture"))),"depth"in ba&&(Yn.depth=ba.depth),"stencil"in ba&&(Yn.stencil=ba.stencil),"depthStencil"in ba&&(Yn.depthStencil=ba.depthStencil)}var yi;if(ea)if(Array.isArray(ea))for(yi=[],on=0;on<ea.length;++on)yi[on]=ea[on];else yi=[ea];else{yi=Array(bi);var Ya={radius:kn,format:da,type:ia};for(on=0;on<bi;++on)yi[on]=yr.createCube(Ya)}for(Yn.color=Array(yi.length),on=0;on<yi.length;++on){var Xi=yi[on];Lt(typeof Xi=="function"&&Xi._reglType==="textureCube","invalid cube map"),kn=kn||Xi.width,Lt(Xi.width===kn&&Xi.height===kn,"invalid cube map shape"),Yn.color[on]={target:ot,data:yi[on]}}for(on=0;on<6;++on){for(var Yi=0;Yi<yi.length;++Yi)Yn.color[Yi].target=ot+on;on>0&&(Yn.depth=er[0].depth,Yn.stencil=er[0].stencil,Yn.depthStencil=er[0].depthStencil),er[on]?er[on](Yn):er[on]=_e(Yn)}return z(tr,{width:kn,height:kn,color:yi})}function $r(_n){var on,Yn=_n|0;if(Lt(Yn>0&&Yn<=Ce.maxCubeMapSize,"invalid radius for cube fbo"),Yn===tr.width)return tr;var kn=tr.color;for(on=0;on<kn.length;++on)kn[on].resize(Yn);for(on=0;on<6;++on)er[on].resize(Yn);return tr.width=tr.height=Yn,tr}return tr($e),z(tr,{faces:er,resize:$r,_reglType:"framebufferCube",destroy:function(){er.forEach(function(_n){_n.destroy()})}})}function Cr(){Tr.cur=null,Tr.next=null,Tr.dirty=!0,xi(Et).forEach(function($e){$e.framebuffer=xt.createFramebuffer(),qt($e)})}return z(Tr,{getFramebuffer:function($e){if(typeof $e=="function"&&$e._reglType==="framebuffer"){var er=$e._framebuffer;if(er instanceof It)return er}return null},create:_e,createCube:Ye,clear:function(){xi(Et).forEach(Qt)},restore:Cr})}var ou=5126,xu=34962;function Iu(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=ou,this.offset=0,this.stride=0,this.divisor=0}function Hu(xt,ne,Ce,yr,Br){for(var pr=Ce.maxAttributes,Tr=new Array(pr),Zr=0;Zr<pr;++Zr)Tr[Zr]=new Iu;var en=0,an={},Jr={Record:Iu,scope:{},state:Tr,currentVAO:null,targetVAO:null,restore:v()?Et:function(){},createVAO:It,getVAO:G,destroyBuffer:dn,setVAO:v()?$:ft,clear:v()?ct:function(){}};function dn(zt){for(var Qt=0;Qt<Tr.length;++Qt){var qt=Tr[Qt];qt.buffer===zt&&(xt.disableVertexAttribArray(Qt),qt.buffer=null)}}function v(){return ne.oes_vertex_array_object}function M(){return ne.angle_instanced_arrays}function G(zt){return typeof zt=="function"&&zt._vao?zt._vao:null}function $(zt){if(zt!==Jr.currentVAO){var Qt=v();zt?Qt.bindVertexArrayOES(zt.vao):Qt.bindVertexArrayOES(null),Jr.currentVAO=zt}}function ft(zt){if(zt!==Jr.currentVAO){if(zt)zt.bindAttrs();else for(var Qt=M(),qt=0;qt<Tr.length;++qt){var _e=Tr[qt];_e.buffer?(xt.enableVertexAttribArray(qt),xt.vertexAttribPointer(qt,_e.size,_e.type,_e.normalized,_e.stride,_e.offfset),Qt&&_e.divisor&&Qt.vertexAttribDivisorANGLE(qt,_e.divisor)):(xt.disableVertexAttribArray(qt),xt.vertexAttrib4f(qt,_e.x,_e.y,_e.z,_e.w))}Jr.currentVAO=zt}}function ct(){xi(an).forEach(function(zt){zt.destroy()})}function yt(){this.id=++en,this.attributes=[];var zt=v();zt?this.vao=zt.createVertexArrayOES():this.vao=null,an[this.id]=this,this.buffers=[]}yt.prototype.bindAttrs=function(){for(var zt=M(),Qt=this.attributes,qt=0;qt<Qt.length;++qt){var _e=Qt[qt];_e.buffer?(xt.enableVertexAttribArray(qt),xt.bindBuffer(xu,_e.buffer.buffer),xt.vertexAttribPointer(qt,_e.size,_e.type,_e.normalized,_e.stride,_e.offset),zt&&_e.divisor&&zt.vertexAttribDivisorANGLE(qt,_e.divisor)):(xt.disableVertexAttribArray(qt),xt.vertexAttrib4f(qt,_e.x,_e.y,_e.z,_e.w))}for(var Ye=Qt.length;Ye<pr;++Ye)xt.disableVertexAttribArray(Ye)},yt.prototype.refresh=function(){var zt=v();zt&&(zt.bindVertexArrayOES(this.vao),this.bindAttrs(),Jr.currentVAO=this)},yt.prototype.destroy=function(){if(this.vao){var zt=v();this===Jr.currentVAO&&(Jr.currentVAO=null,zt.bindVertexArrayOES(null)),zt.deleteVertexArrayOES(this.vao),this.vao=null}an[this.id]&&(delete an[this.id],yr.vaoCount-=1)};function Et(){var zt=v();zt&&xi(an).forEach(function(Qt){Qt.refresh()})}function It(zt){var Qt=new yt;yr.vaoCount+=1;function qt(_e){Lt(Array.isArray(_e),"arguments to vertex array constructor must be an array"),Lt(_e.length<pr,"too many attributes"),Lt(_e.length>0,"must specify at least one attribute");var Ye={},Cr=Qt.attributes;Cr.length=_e.length;for(var $e=0;$e<_e.length;++$e){var er=_e[$e],tr=Cr[$e]=new Iu,$r=er.data||er;if(Array.isArray($r)||U($r)||Ai($r)){var _n;Qt.buffers[$e]&&(_n=Qt.buffers[$e],U($r)&&_n._buffer.byteLength>=$r.byteLength?_n.subdata($r):(_n.destroy(),Qt.buffers[$e]=null)),Qt.buffers[$e]||(_n=Qt.buffers[$e]=Br.create(er,xu,!1,!0)),tr.buffer=Br.getBuffer(_n),tr.size=tr.buffer.dimension|0,tr.normalized=!1,tr.type=tr.buffer.dtype,tr.offset=0,tr.stride=0,tr.divisor=0,tr.state=1,Ye[$e]=1}else Br.getBuffer(er)?(tr.buffer=Br.getBuffer(er),tr.size=tr.buffer.dimension|0,tr.normalized=!1,tr.type=tr.buffer.dtype,tr.offset=0,tr.stride=0,tr.divisor=0,tr.state=1):Br.getBuffer(er.buffer)?(tr.buffer=Br.getBuffer(er.buffer),tr.size=(+er.size||tr.buffer.dimension)|0,tr.normalized=!!er.normalized||!1,"type"in er?(Lt.parameter(er.type,ao,"invalid buffer type"),tr.type=ao[er.type]):tr.type=tr.buffer.dtype,tr.offset=(er.offset||0)|0,tr.stride=(er.stride||0)|0,tr.divisor=(er.divisor||0)|0,tr.state=1,Lt(tr.size>=1&&tr.size<=4,"size must be between 1 and 4"),Lt(tr.offset>=0,"invalid offset"),Lt(tr.stride>=0&&tr.stride<=255,"stride must be between 0 and 255"),Lt(tr.divisor>=0,"divisor must be positive"),Lt(!tr.divisor||!!ne.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in er?(Lt($e>0,"first attribute must not be a constant"),tr.x=+er.x||0,tr.y=+er.y||0,tr.z=+er.z||0,tr.w=+er.w||0,tr.state=2):Lt(!1,"invalid attribute spec for location "+$e)}for(var on=0;on<Qt.buffers.length;++on)!Ye[on]&&Qt.buffers[on]&&(Qt.buffers[on].destroy(),Qt.buffers[on]=null);return Qt.refresh(),qt}return qt.destroy=function(){for(var _e=0;_e<Qt.buffers.length;++_e)Qt.buffers[_e]&&Qt.buffers[_e].destroy();Qt.buffers.length=0,Qt.destroy()},qt._vao=Qt,qt._reglType="vao",qt(zt)}return Jr}var ks=35632,Ku=35633,Ou=35718,yf=35721;function Zu(xt,ne,Ce,yr){var Br={},pr={};function Tr($,ft,ct,yt){this.name=$,this.id=ft,this.location=ct,this.info=yt}function Zr($,ft){for(var ct=0;ct<$.length;++ct)if($[ct].id===ft.id){$[ct].location=ft.location;return}$.push(ft)}function en($,ft,ct){var yt=$===ks?Br:pr,Et=yt[ft];if(!Et){var It=ne.str(ft);Et=xt.createShader($),xt.shaderSource(Et,It),xt.compileShader(Et),Lt.shaderError(xt,Et,It,$,ct),yt[ft]=Et}return Et}var an={},Jr=[],dn=0;function v($,ft){this.id=dn++,this.fragId=$,this.vertId=ft,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,yr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function M($,ft,ct){var yt,Et,It=en(ks,$.fragId),zt=en(Ku,$.vertId),Qt=$.program=xt.createProgram();if(xt.attachShader(Qt,It),xt.attachShader(Qt,zt),ct)for(yt=0;yt<ct.length;++yt){var qt=ct[yt];xt.bindAttribLocation(Qt,qt[0],qt[1])}xt.linkProgram(Qt),Lt.linkError(xt,Qt,ne.str($.fragId),ne.str($.vertId),ft);var _e=xt.getProgramParameter(Qt,Ou);yr.profile&&($.stats.uniformsCount=_e);var Ye=$.uniforms;for(yt=0;yt<_e;++yt)if(Et=xt.getActiveUniform(Qt,yt),Et)if(Et.size>1)for(var Cr=0;Cr<Et.size;++Cr){var $e=Et.name.replace("[0]","["+Cr+"]");Zr(Ye,new Tr($e,ne.id($e),xt.getUniformLocation(Qt,$e),Et))}else Zr(Ye,new Tr(Et.name,ne.id(Et.name),xt.getUniformLocation(Qt,Et.name),Et));var er=xt.getProgramParameter(Qt,yf);yr.profile&&($.stats.attributesCount=er);var tr=$.attributes;for(yt=0;yt<er;++yt)Et=xt.getActiveAttrib(Qt,yt),Et&&Zr(tr,new Tr(Et.name,ne.id(Et.name),xt.getAttribLocation(Qt,Et.name),Et))}yr.profile&&(Ce.getMaxUniformsCount=function(){var $=0;return Jr.forEach(function(ft){ft.stats.uniformsCount>$&&($=ft.stats.uniformsCount)}),$},Ce.getMaxAttributesCount=function(){var $=0;return Jr.forEach(function(ft){ft.stats.attributesCount>$&&($=ft.stats.attributesCount)}),$});function G(){Br={},pr={};for(var $=0;$<Jr.length;++$)M(Jr[$],null,Jr[$].attributes.map(function(ft){return[ft.location,ft.name]}))}return{clear:function(){var $=xt.deleteShader.bind(xt);xi(Br).forEach($),Br={},xi(pr).forEach($),pr={},Jr.forEach(function(ft){xt.deleteProgram(ft.program)}),Jr.length=0,an={},Ce.shaderCount=0},program:function($,ft,ct,yt){Lt.command($>=0,"missing vertex shader",ct),Lt.command(ft>=0,"missing fragment shader",ct);var Et=an[ft];Et||(Et=an[ft]={});var It=Et[$];if(It&&(It.refCount++,!yt))return It;var zt=new v(ft,$);return Ce.shaderCount++,M(zt,ct,yt),It||(Et[$]=zt),Jr.push(zt),z(zt,{destroy:function(){if(zt.refCount--,zt.refCount<=0){xt.deleteProgram(zt.program);var Qt=Jr.indexOf(zt);Jr.splice(Qt,1),Ce.shaderCount--}Et[zt.vertId].refCount<=0&&(xt.deleteShader(pr[zt.vertId]),delete pr[zt.vertId],delete an[zt.fragId][zt.vertId]),Object.keys(an[zt.fragId]).length||(xt.deleteShader(Br[zt.fragId]),delete Br[zt.fragId],delete an[zt.fragId])}})},restore:G,shader:en,frag:-1,vert:-1}}var Lu=6408,ds=5121,Ks=3333,su=5126;function Du(xt,ne,Ce,yr,Br,pr,Tr){function Zr(Jr){var dn;ne.next===null?(Lt(Br.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),dn=ds):(Lt(ne.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),dn=ne.next.colorAttachments[0].texture._texture.type,pr.oes_texture_float?(Lt(dn===ds||dn===su,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),dn===su&&Lt(Tr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Lt(dn===ds,"Reading from a framebuffer is only allowed for the type 'uint8'"));var v=0,M=0,G=yr.framebufferWidth,$=yr.framebufferHeight,ft=null;U(Jr)?ft=Jr:Jr&&(Lt.type(Jr,"object","invalid arguments to regl.read()"),v=Jr.x|0,M=Jr.y|0,Lt(v>=0&&v<yr.framebufferWidth,"invalid x offset for regl.read"),Lt(M>=0&&M<yr.framebufferHeight,"invalid y offset for regl.read"),G=(Jr.width||yr.framebufferWidth-v)|0,$=(Jr.height||yr.framebufferHeight-M)|0,ft=Jr.data||null),ft&&(dn===ds?Lt(ft instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):dn===su&&Lt(ft instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Lt(G>0&&G+v<=yr.framebufferWidth,"invalid width for read pixels"),Lt($>0&&$+M<=yr.framebufferHeight,"invalid height for read pixels"),Ce();var ct=G*$*4;return ft||(dn===ds?ft=new Uint8Array(ct):dn===su&&(ft=ft||new Float32Array(ct))),Lt.isTypedArray(ft,"data buffer for regl.read() must be a typedarray"),Lt(ft.byteLength>=ct,"data buffer for regl.read() too small"),xt.pixelStorei(Ks,4),xt.readPixels(v,M,G,$,Lu,dn,ft),ft}function en(Jr){var dn;return ne.setFBO({framebuffer:Jr.framebuffer},function(){dn=Zr(Jr)}),dn}function an(Jr){return!Jr||!("framebuffer"in Jr)?Zr(Jr):en(Jr)}return an}function as(xt){return Array.prototype.slice.call(xt)}function bu(xt){return as(xt).join("")}function Pl(){var xt=0,ne=[],Ce=[];function yr(dn){for(var v=0;v<Ce.length;++v)if(Ce[v]===dn)return ne[v];var M="g"+xt++;return ne.push(M),Ce.push(dn),M}function Br(){var dn=[];function v(){dn.push.apply(dn,as(arguments))}var M=[];function G(){var $="v"+xt++;return M.push($),arguments.length>0&&(dn.push($,"="),dn.push.apply(dn,as(arguments)),dn.push(";")),$}return z(v,{def:G,toString:function(){return bu([M.length>0?"var "+M.join(",")+";":"",bu(dn)])}})}function pr(){var dn=Br(),v=Br(),M=dn.toString,G=v.toString;function $(ft,ct){v(ft,ct,"=",dn.def(ft,ct),";")}return z(function(){dn.apply(dn,as(arguments))},{def:dn.def,entry:dn,exit:v,save:$,set:function(ft,ct,yt){$(ft,ct),dn(ft,ct,"=",yt,";")},toString:function(){return M()+G()}})}function Tr(){var dn=bu(arguments),v=pr(),M=pr(),G=v.toString,$=M.toString;return z(v,{then:function(){return v.apply(v,as(arguments)),this},else:function(){return M.apply(M,as(arguments)),this},toString:function(){var ft=$();return ft&&(ft="else{"+ft+"}"),bu(["if(",dn,"){",G(),"}",ft])}})}var Zr=Br(),en={};function an(dn,v){var M=[];function G(){var Et="a"+M.length;return M.push(Et),Et}v=v||0;for(var $=0;$<v;++$)G();var ft=pr(),ct=ft.toString,yt=en[dn]=z(ft,{arg:G,toString:function(){return bu(["function(",M.join(),"){",ct(),"}"])}});return yt}function Jr(){var dn=['"use strict";',Zr,"return {"];Object.keys(en).forEach(function(G){dn.push('"',G,'":',en[G].toString(),",")}),dn.push("}");var v=bu(dn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),M=Function.apply(null,ne.concat(v));return M.apply(null,Ce)}return{global:Zr,link:yr,block:Br,proc:an,scope:pr,cond:Tr,compile:Jr}}var Nu="xyzw".split(""),Qc=5121,mf=1,_c=2,Jc=0,tl=1,Hf=2,Kf=3,xf=4,el=5,bf=6,Ef="dither",Zf="blend.enable",$u="blend.color",qu="blend.equation",Zs="blend.func",kl="depth.enable",Rl="depth.func",Bl="depth.range",$f="depth.mask",rl="colorMask",Re="cull.enable",Fl="cull.face",Qu="frontFace",qf="lineWidth",Gl="polygonOffset.enable",nl="polygonOffset.offset",al="sample.alpha",wf="sample.enable",_f="sample.coverage",Ju="stencil.enable",il="stencil.mask",tf="stencil.func",hi="stencil.opFront",ef="stencil.opBack",ol="scissor.enable",Sf="scissor.box",Rs="viewport",$s="profile",Bs="framebuffer",Eu="vert",rf="frag",nf="elements",Ho="primitive",Pu="count",af="offset",Mf="instances",Cf="vao",sl="Width",ul="Height",ku=Bs+sl,Fs=Bs+ul,fl=Rs+sl,hh=Rs+ul,Sc="drawingBuffer",Mc=Sc+sl,Cc=Sc+ul,cl=[Zs,qu,tf,hi,ef,_f,Rs,Sf,nl],Af=34962,vh=34963,ll=35632,zl=35633,Ul=3553,hl=34067,dh=2884,Ac=3042,Wl=3024,vl=2960,Tc=2929,Xl=3089,Yl=32823,Vl=32926,Tf=32928,Qf=5126,Ic=35664,Oc=35665,Jf=35666,dl=5124,Lc=35667,tc=35668,of=35669,gl=35670,Dc=35671,ec=35672,rc=35673,If=35674,nc=35675,Of=35676,Lf=35678,Gs=35680,jl=4,ac=1028,Ru=1029,Hl=2304,Nc=2305,Kl=32775,pl=32776,gh=519,Bu=7680,Zl=0,$l=1,ql=32774,ph=513,Ql=36160,yh=36064,Oo={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Jl=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],uu={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Fu={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Pc={frag:ll,vert:zl},yl={cw:Hl,ccw:Nc};function kc(xt){return Array.isArray(xt)||U(xt)||Ai(xt)}function ml(xt){return xt.sort(function(ne,Ce){return ne===Rs?-1:Ce===Rs?1:ne<Ce?-1:1})}function Lo(xt,ne,Ce,yr){this.thisDep=xt,this.contextDep=ne,this.propDep=Ce,this.append=yr}function fu(xt){return xt&&!(xt.thisDep||xt.contextDep||xt.propDep)}function Zi(xt){return new Lo(!1,!1,!1,xt)}function is(xt,ne){var Ce=xt.type;if(Ce===Jc){var yr=xt.data.length;return new Lo(!0,yr>=1,yr>=2,ne)}else if(Ce===xf){var Br=xt.data;return new Lo(Br.thisDep,Br.contextDep,Br.propDep,ne)}else{if(Ce===el)return new Lo(!1,!1,!1,ne);if(Ce===bf){for(var pr=!1,Tr=!1,Zr=!1,en=0;en<xt.data.length;++en){var an=xt.data[en];if(an.type===tl)Zr=!0;else if(an.type===Hf)Tr=!0;else if(an.type===Kf)pr=!0;else if(an.type===Jc){pr=!0;var Jr=an.data;Jr>=1&&(Tr=!0),Jr>=2&&(Zr=!0)}else an.type===xf&&(pr=pr||an.data.thisDep,Tr=Tr||an.data.contextDep,Zr=Zr||an.data.propDep)}return new Lo(pr,Tr,Zr,ne)}else return new Lo(Ce===Kf,Ce===Hf,Ce===tl,ne)}}var ic=new Lo(!1,!1,!1,function(){});function mh(xt,ne,Ce,yr,Br,pr,Tr,Zr,en,an,Jr,dn,v,M,G){var $=an.Record,ft={add:32774,subtract:32778,"reverse subtract":32779};Ce.ext_blend_minmax&&(ft.min=Kl,ft.max=pl);var ct=Ce.angle_instanced_arrays,yt=Ce.webgl_draw_buffers,Et={dirty:!0,profile:G.profile},It={},zt=[],Qt={},qt={};function _e(ve){return ve.replace(".","_")}function Ye(ve,Jt,Be){var ir=_e(ve);zt.push(ve),It[ir]=Et[ir]=!!Be,Qt[ir]=Jt}function Cr(ve,Jt,Be){var ir=_e(ve);zt.push(ve),Array.isArray(Be)?(Et[ir]=Be.slice(),It[ir]=Be.slice()):Et[ir]=It[ir]=Be,qt[ir]=Jt}Ye(Ef,Wl),Ye(Zf,Ac),Cr($u,"blendColor",[0,0,0,0]),Cr(qu,"blendEquationSeparate",[ql,ql]),Cr(Zs,"blendFuncSeparate",[$l,Zl,$l,Zl]),Ye(kl,Tc,!0),Cr(Rl,"depthFunc",ph),Cr(Bl,"depthRange",[0,1]),Cr($f,"depthMask",!0),Cr(rl,rl,[!0,!0,!0,!0]),Ye(Re,dh),Cr(Fl,"cullFace",Ru),Cr(Qu,Qu,Nc),Cr(qf,qf,1),Ye(Gl,Yl),Cr(nl,"polygonOffset",[0,0]),Ye(al,Vl),Ye(wf,Tf),Cr(_f,"sampleCoverage",[1,!1]),Ye(Ju,vl),Cr(il,"stencilMask",-1),Cr(tf,"stencilFunc",[gh,0,-1]),Cr(hi,"stencilOpSeparate",[ac,Bu,Bu,Bu]),Cr(ef,"stencilOpSeparate",[Ru,Bu,Bu,Bu]),Ye(ol,Xl),Cr(Sf,"scissor",[0,0,xt.drawingBufferWidth,xt.drawingBufferHeight]),Cr(Rs,Rs,[0,0,xt.drawingBufferWidth,xt.drawingBufferHeight]);var $e={gl:xt,context:v,strings:ne,next:It,current:Et,draw:dn,elements:pr,buffer:Br,shader:Jr,attributes:an.state,vao:an,uniforms:en,framebuffer:Zr,extensions:Ce,timer:M,isBufferArgs:kc},er={primTypes:oo,compareFuncs:uu,blendFuncs:Oo,blendEquations:ft,stencilOps:Fu,glTypes:ao,orientationType:yl};Lt.optional(function(){$e.isArrayLike=Na}),yt&&(er.backBuffer=[Ru],er.drawBuffer=Bn(yr.maxDrawbuffers,function(ve){return ve===0?[0]:Bn(ve,function(Jt){return yh+Jt})}));var tr=0;function $r(){var ve=Pl(),Jt=ve.link,Be=ve.global;ve.id=tr++,ve.batchId="0";var ir=Jt($e),ur=ve.shared={props:"a0"};Object.keys($e).forEach(function(Ne){ur[Ne]=Be.def(ir,".",Ne)}),Lt.optional(function(){ve.CHECK=Jt(Lt),ve.commandStr=Lt.guessCommand(),ve.command=Jt(ve.commandStr),ve.assert=function(Ne,ce,Qe){Ne("if(!(",ce,"))",this.CHECK,".commandRaise(",Jt(Qe),",",this.command,");")},er.invalidBlendCombinations=Jl});var Ue=ve.next={},Fe=ve.current={};Object.keys(qt).forEach(function(Ne){Array.isArray(Et[Ne])&&(Ue[Ne]=Be.def(ur.next,".",Ne),Fe[Ne]=Be.def(ur.current,".",Ne))});var Ze=ve.constants={};Object.keys(er).forEach(function(Ne){Ze[Ne]=Be.def(JSON.stringify(er[Ne]))}),ve.invoke=function(Ne,ce){switch(ce.type){case Jc:var Qe=["this",ur.context,ur.props,ve.batchId];return Ne.def(Jt(ce.data),".call(",Qe.slice(0,Math.max(ce.data.length+1,4)),")");case tl:return Ne.def(ur.props,ce.data);case Hf:return Ne.def(ur.context,ce.data);case Kf:return Ne.def("this",ce.data);case xf:return ce.data.append(ve,Ne),ce.data.ref;case el:return ce.data.toString();case bf:return ce.data.map(function(hr){return ve.invoke(Ne,hr)})}},ve.attribCache={};var de={};return ve.scopeAttrib=function(Ne){var ce=ne.id(Ne);if(ce in de)return de[ce];var Qe=an.scope[ce];Qe||(Qe=an.scope[ce]=new $);var hr=de[ce]=Jt(Qe);return hr},ve}function _n(ve){var Jt=ve.static,Be=ve.dynamic,ir;if($s in Jt){var ur=!!Jt[$s];ir=Zi(function(Fe,Ze){return ur}),ir.enable=ur}else if($s in Be){var Ue=Be[$s];ir=is(Ue,function(Fe,Ze){return Fe.invoke(Ze,Ue)})}return ir}function on(ve,Jt){var Be=ve.static,ir=ve.dynamic;if(Bs in Be){var ur=Be[Bs];return ur?(ur=Zr.getFramebuffer(ur),Lt.command(ur,"invalid framebuffer object"),Zi(function(Fe,Ze){var de=Fe.link(ur),Ne=Fe.shared;Ze.set(Ne.framebuffer,".next",de);var ce=Ne.context;return Ze.set(ce,"."+ku,de+".width"),Ze.set(ce,"."+Fs,de+".height"),de})):Zi(function(Fe,Ze){var de=Fe.shared;Ze.set(de.framebuffer,".next","null");var Ne=de.context;return Ze.set(Ne,"."+ku,Ne+"."+Mc),Ze.set(Ne,"."+Fs,Ne+"."+Cc),"null"})}else if(Bs in ir){var Ue=ir[Bs];return is(Ue,function(Fe,Ze){var de=Fe.invoke(Ze,Ue),Ne=Fe.shared,ce=Ne.framebuffer,Qe=Ze.def(ce,".getFramebuffer(",de,")");Lt.optional(function(){Fe.assert(Ze,"!"+de+"||"+Qe,"invalid framebuffer object")}),Ze.set(ce,".next",Qe);var hr=Ne.context;return Ze.set(hr,"."+ku,Qe+"?"+Qe+".width:"+hr+"."+Mc),Ze.set(hr,"."+Fs,Qe+"?"+Qe+".height:"+hr+"."+Cc),Qe})}else return null}function Yn(ve,Jt,Be){var ir=ve.static,ur=ve.dynamic;function Ue(de){if(de in ir){var Ne=ir[de];Lt.commandType(Ne,"object","invalid "+de,Be.commandStr);var ce=!0,Qe=Ne.x|0,hr=Ne.y|0,Fr,Wr;return"width"in Ne?(Fr=Ne.width|0,Lt.command(Fr>=0,"invalid "+de,Be.commandStr)):ce=!1,"height"in Ne?(Wr=Ne.height|0,Lt.command(Wr>=0,"invalid "+de,Be.commandStr)):ce=!1,new Lo(!ce&&Jt&&Jt.thisDep,!ce&&Jt&&Jt.contextDep,!ce&&Jt&&Jt.propDep,function(jn,Aa){var zn=jn.shared.context,sa=Fr;"width"in Ne||(sa=Aa.def(zn,".",ku,"-",Qe));var _a=Wr;return"height"in Ne||(_a=Aa.def(zn,".",Fs,"-",hr)),[Qe,hr,sa,_a]})}else if(de in ur){var Or=ur[de],cn=is(Or,function(jn,Aa){var zn=jn.invoke(Aa,Or);Lt.optional(function(){jn.assert(Aa,zn+"&&typeof "+zn+'==="object"',"invalid "+de)});var sa=jn.shared.context,_a=Aa.def(zn,".x|0"),ai=Aa.def(zn,".y|0"),Qi=Aa.def('"width" in ',zn,"?",zn,".width|0:","(",sa,".",ku,"-",_a,")"),Ko=Aa.def('"height" in ',zn,"?",zn,".height|0:","(",sa,".",Fs,"-",ai,")");return Lt.optional(function(){jn.assert(Aa,Qi+">=0&&"+Ko+">=0","invalid "+de)}),[_a,ai,Qi,Ko]});return Jt&&(cn.thisDep=cn.thisDep||Jt.thisDep,cn.contextDep=cn.contextDep||Jt.contextDep,cn.propDep=cn.propDep||Jt.propDep),cn}else return Jt?new Lo(Jt.thisDep,Jt.contextDep,Jt.propDep,function(jn,Aa){var zn=jn.shared.context;return[0,0,Aa.def(zn,".",ku),Aa.def(zn,".",Fs)]}):null}var Fe=Ue(Rs);if(Fe){var Ze=Fe;Fe=new Lo(Fe.thisDep,Fe.contextDep,Fe.propDep,function(de,Ne){var ce=Ze.append(de,Ne),Qe=de.shared.context;return Ne.set(Qe,"."+fl,ce[2]),Ne.set(Qe,"."+hh,ce[3]),ce})}return{viewport:Fe,scissor_box:Ue(Sf)}}function kn(ve,Jt){var Be=ve.static,ir=typeof Be[rf]=="string"&&typeof Be[Eu]=="string";if(ir){if(Object.keys(Jt.dynamic).length>0)return null;var ur=Jt.static,Ue=Object.keys(ur);if(Ue.length>0&&typeof ur[Ue[0]]=="number"){for(var Fe=[],Ze=0;Ze<Ue.length;++Ze)Lt(typeof ur[Ue[Ze]]=="number","must specify all vertex attribute locations when using vaos"),Fe.push([ur[Ue[Ze]]|0,Ue[Ze]]);return Fe}}return null}function ea(ve,Jt,Be){var ir=ve.static,ur=ve.dynamic;function Ue(ce){if(ce in ir){var Qe=ne.id(ir[ce]);Lt.optional(function(){Jr.shader(Pc[ce],Qe,Lt.guessCommand())});var hr=Zi(function(){return Qe});return hr.id=Qe,hr}else if(ce in ur){var Fr=ur[ce];return is(Fr,function(Wr,Or){var cn=Wr.invoke(Or,Fr),jn=Or.def(Wr.shared.strings,".id(",cn,")");return Lt.optional(function(){Or(Wr.shared.shader,".shader(",Pc[ce],",",jn,",",Wr.command,");")}),jn})}return null}var Fe=Ue(rf),Ze=Ue(Eu),de=null,Ne;return fu(Fe)&&fu(Ze)?(de=Jr.program(Ze.id,Fe.id,null,Be),Ne=Zi(function(ce,Qe){return ce.link(de)})):Ne=new Lo(Fe&&Fe.thisDep||Ze&&Ze.thisDep,Fe&&Fe.contextDep||Ze&&Ze.contextDep,Fe&&Fe.propDep||Ze&&Ze.propDep,function(ce,Qe){var hr=ce.shared.shader,Fr;Fe?Fr=Fe.append(ce,Qe):Fr=Qe.def(hr,".",rf);var Wr;Ze?Wr=Ze.append(ce,Qe):Wr=Qe.def(hr,".",Eu);var Or=hr+".program("+Wr+","+Fr;return Lt.optional(function(){Or+=","+ce.command}),Qe.def(Or+")")}),{frag:Fe,vert:Ze,progVar:Ne,program:de}}function da(ve,Jt){var Be=ve.static,ir=ve.dynamic;function ur(){if(nf in Be){var ce=Be[nf];kc(ce)?ce=pr.getElements(pr.create(ce,!0)):ce&&(ce=pr.getElements(ce),Lt.command(ce,"invalid elements",Jt.commandStr));var Qe=Zi(function(Fr,Wr){if(ce){var Or=Fr.link(ce);return Fr.ELEMENTS=Or,Or}return Fr.ELEMENTS=null,null});return Qe.value=ce,Qe}else if(nf in ir){var hr=ir[nf];return is(hr,function(Fr,Wr){var Or=Fr.shared,cn=Or.isBufferArgs,jn=Or.elements,Aa=Fr.invoke(Wr,hr),zn=Wr.def("null"),sa=Wr.def(cn,"(",Aa,")"),_a=Fr.cond(sa).then(zn,"=",jn,".createStream(",Aa,");").else(zn,"=",jn,".getElements(",Aa,");");return Lt.optional(function(){Fr.assert(_a.else,"!"+Aa+"||"+zn,"invalid elements")}),Wr.entry(_a),Wr.exit(Fr.cond(sa).then(jn,".destroyStream(",zn,");")),Fr.ELEMENTS=zn,zn})}return null}var Ue=ur();function Fe(){if(Ho in Be){var ce=Be[Ho];return Lt.commandParameter(ce,oo,"invalid primitve",Jt.commandStr),Zi(function(hr,Fr){return oo[ce]})}else if(Ho in ir){var Qe=ir[Ho];return is(Qe,function(hr,Fr){var Wr=hr.constants.primTypes,Or=hr.invoke(Fr,Qe);return Lt.optional(function(){hr.assert(Fr,Or+" in "+Wr,"invalid primitive, must be one of "+Object.keys(oo))}),Fr.def(Wr,"[",Or,"]")})}else if(Ue)return fu(Ue)?Ue.value?Zi(function(hr,Fr){return Fr.def(hr.ELEMENTS,".primType")}):Zi(function(){return jl}):new Lo(Ue.thisDep,Ue.contextDep,Ue.propDep,function(hr,Fr){var Wr=hr.ELEMENTS;return Fr.def(Wr,"?",Wr,".primType:",jl)});return null}function Ze(ce,Qe){if(ce in Be){var hr=Be[ce]|0;return Lt.command(!Qe||hr>=0,"invalid "+ce,Jt.commandStr),Zi(function(Wr,Or){return Qe&&(Wr.OFFSET=hr),hr})}else if(ce in ir){var Fr=ir[ce];return is(Fr,function(Wr,Or){var cn=Wr.invoke(Or,Fr);return Qe&&(Wr.OFFSET=cn,Lt.optional(function(){Wr.assert(Or,cn+">=0","invalid "+ce)})),cn})}else if(Qe&&Ue)return Zi(function(Wr,Or){return Wr.OFFSET="0",0});return null}var de=Ze(af,!0);function Ne(){if(Pu in Be){var ce=Be[Pu]|0;return Lt.command(typeof ce=="number"&&ce>=0,"invalid vertex count",Jt.commandStr),Zi(function(){return ce})}else if(Pu in ir){var Qe=ir[Pu];return is(Qe,function(Wr,Or){var cn=Wr.invoke(Or,Qe);return Lt.optional(function(){Wr.assert(Or,"typeof "+cn+'==="number"&&'+cn+">=0&&"+cn+"===("+cn+"|0)","invalid vertex count")}),cn})}else if(Ue)if(fu(Ue)){if(Ue)return de?new Lo(de.thisDep,de.contextDep,de.propDep,function(Wr,Or){var cn=Or.def(Wr.ELEMENTS,".vertCount-",Wr.OFFSET);return Lt.optional(function(){Wr.assert(Or,cn+">=0","invalid vertex offset/element buffer too small")}),cn}):Zi(function(Wr,Or){return Or.def(Wr.ELEMENTS,".vertCount")});var hr=Zi(function(){return-1});return Lt.optional(function(){hr.MISSING=!0}),hr}else{var Fr=new Lo(Ue.thisDep||de.thisDep,Ue.contextDep||de.contextDep,Ue.propDep||de.propDep,function(Wr,Or){var cn=Wr.ELEMENTS;return Wr.OFFSET?Or.def(cn,"?",cn,".vertCount-",Wr.OFFSET,":-1"):Or.def(cn,"?",cn,".vertCount:-1")});return Lt.optional(function(){Fr.DYNAMIC=!0}),Fr}return null}return{elements:Ue,primitive:Fe(),count:Ne(),instances:Ze(Mf,!1),offset:de}}function ia(ve,Jt){var Be=ve.static,ir=ve.dynamic,ur={};return zt.forEach(function(Ue){var Fe=_e(Ue);function Ze(de,Ne){if(Ue in Be){var ce=de(Be[Ue]);ur[Fe]=Zi(function(){return ce})}else if(Ue in ir){var Qe=ir[Ue];ur[Fe]=is(Qe,function(hr,Fr){return Ne(hr,Fr,hr.invoke(Fr,Qe))})}}switch(Ue){case Re:case Zf:case Ef:case Ju:case kl:case ol:case Gl:case al:case wf:case $f:return Ze(function(de){return Lt.commandType(de,"boolean",Ue,Jt.commandStr),de},function(de,Ne,ce){return Lt.optional(function(){de.assert(Ne,"typeof "+ce+'==="boolean"',"invalid flag "+Ue,de.commandStr)}),ce});case Rl:return Ze(function(de){return Lt.commandParameter(de,uu,"invalid "+Ue,Jt.commandStr),uu[de]},function(de,Ne,ce){var Qe=de.constants.compareFuncs;return Lt.optional(function(){de.assert(Ne,ce+" in "+Qe,"invalid "+Ue+", must be one of "+Object.keys(uu))}),Ne.def(Qe,"[",ce,"]")});case Bl:return Ze(function(de){return Lt.command(Na(de)&&de.length===2&&typeof de[0]=="number"&&typeof de[1]=="number"&&de[0]<=de[1],"depth range is 2d array",Jt.commandStr),de},function(de,Ne,ce){Lt.optional(function(){de.assert(Ne,de.shared.isArrayLike+"("+ce+")&&"+ce+".length===2&&typeof "+ce+'[0]==="number"&&typeof '+ce+'[1]==="number"&&'+ce+"[0]<="+ce+"[1]","depth range must be a 2d array")});var Qe=Ne.def("+",ce,"[0]"),hr=Ne.def("+",ce,"[1]");return[Qe,hr]});case Zs:return Ze(function(de){Lt.commandType(de,"object","blend.func",Jt.commandStr);var Ne="srcRGB"in de?de.srcRGB:de.src,ce="srcAlpha"in de?de.srcAlpha:de.src,Qe="dstRGB"in de?de.dstRGB:de.dst,hr="dstAlpha"in de?de.dstAlpha:de.dst;return Lt.commandParameter(Ne,Oo,Fe+".srcRGB",Jt.commandStr),Lt.commandParameter(ce,Oo,Fe+".srcAlpha",Jt.commandStr),Lt.commandParameter(Qe,Oo,Fe+".dstRGB",Jt.commandStr),Lt.commandParameter(hr,Oo,Fe+".dstAlpha",Jt.commandStr),Lt.command(Jl.indexOf(Ne+", "+Qe)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Ne+", "+Qe+")",Jt.commandStr),[Oo[Ne],Oo[Qe],Oo[ce],Oo[hr]]},function(de,Ne,ce){var Qe=de.constants.blendFuncs;Lt.optional(function(){de.assert(Ne,ce+"&&typeof "+ce+'==="object"',"invalid blend func, must be an object")});function hr(zn,sa){var _a=Ne.def('"',zn,sa,'" in ',ce,"?",ce,".",zn,sa,":",ce,".",zn);return Lt.optional(function(){de.assert(Ne,_a+" in "+Qe,"invalid "+Ue+"."+zn+sa+", must be one of "+Object.keys(Oo))}),_a}var Fr=hr("src","RGB"),Wr=hr("dst","RGB");Lt.optional(function(){var zn=de.constants.invalidBlendCombinations;de.assert(Ne,zn+".indexOf("+Fr+'+", "+'+Wr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Or=Ne.def(Qe,"[",Fr,"]"),cn=Ne.def(Qe,"[",hr("src","Alpha"),"]"),jn=Ne.def(Qe,"[",Wr,"]"),Aa=Ne.def(Qe,"[",hr("dst","Alpha"),"]");return[Or,jn,cn,Aa]});case qu:return Ze(function(de){if(typeof de=="string")return Lt.commandParameter(de,ft,"invalid "+Ue,Jt.commandStr),[ft[de],ft[de]];if(typeof de=="object")return Lt.commandParameter(de.rgb,ft,Ue+".rgb",Jt.commandStr),Lt.commandParameter(de.alpha,ft,Ue+".alpha",Jt.commandStr),[ft[de.rgb],ft[de.alpha]];Lt.commandRaise("invalid blend.equation",Jt.commandStr)},function(de,Ne,ce){var Qe=de.constants.blendEquations,hr=Ne.def(),Fr=Ne.def(),Wr=de.cond("typeof ",ce,'==="string"');return Lt.optional(function(){function Or(cn,jn,Aa){de.assert(cn,Aa+" in "+Qe,"invalid "+jn+", must be one of "+Object.keys(ft))}Or(Wr.then,Ue,ce),de.assert(Wr.else,ce+"&&typeof "+ce+'==="object"',"invalid "+Ue),Or(Wr.else,Ue+".rgb",ce+".rgb"),Or(Wr.else,Ue+".alpha",ce+".alpha")}),Wr.then(hr,"=",Fr,"=",Qe,"[",ce,"];"),Wr.else(hr,"=",Qe,"[",ce,".rgb];",Fr,"=",Qe,"[",ce,".alpha];"),Ne(Wr),[hr,Fr]});case $u:return Ze(function(de){return Lt.command(Na(de)&&de.length===4,"blend.color must be a 4d array",Jt.commandStr),Bn(4,function(Ne){return+de[Ne]})},function(de,Ne,ce){return Lt.optional(function(){de.assert(Ne,de.shared.isArrayLike+"("+ce+")&&"+ce+".length===4","blend.color must be a 4d array")}),Bn(4,function(Qe){return Ne.def("+",ce,"[",Qe,"]")})});case il:return Ze(function(de){return Lt.commandType(de,"number",Fe,Jt.commandStr),de|0},function(de,Ne,ce){return Lt.optional(function(){de.assert(Ne,"typeof "+ce+'==="number"',"invalid stencil.mask")}),Ne.def(ce,"|0")});case tf:return Ze(function(de){Lt.commandType(de,"object",Fe,Jt.commandStr);var Ne=de.cmp||"keep",ce=de.ref||0,Qe="mask"in de?de.mask:-1;return Lt.commandParameter(Ne,uu,Ue+".cmp",Jt.commandStr),Lt.commandType(ce,"number",Ue+".ref",Jt.commandStr),Lt.commandType(Qe,"number",Ue+".mask",Jt.commandStr),[uu[Ne],ce,Qe]},function(de,Ne,ce){var Qe=de.constants.compareFuncs;Lt.optional(function(){function Or(){de.assert(Ne,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Or(ce+"&&typeof ",ce,'==="object"'),Or('!("cmp" in ',ce,")||(",ce,".cmp in ",Qe,")")});var hr=Ne.def('"cmp" in ',ce,"?",Qe,"[",ce,".cmp]",":",Bu),Fr=Ne.def(ce,".ref|0"),Wr=Ne.def('"mask" in ',ce,"?",ce,".mask|0:-1");return[hr,Fr,Wr]});case hi:case ef:return Ze(function(de){Lt.commandType(de,"object",Fe,Jt.commandStr);var Ne=de.fail||"keep",ce=de.zfail||"keep",Qe=de.zpass||"keep";return Lt.commandParameter(Ne,Fu,Ue+".fail",Jt.commandStr),Lt.commandParameter(ce,Fu,Ue+".zfail",Jt.commandStr),Lt.commandParameter(Qe,Fu,Ue+".zpass",Jt.commandStr),[Ue===ef?Ru:ac,Fu[Ne],Fu[ce],Fu[Qe]]},function(de,Ne,ce){var Qe=de.constants.stencilOps;Lt.optional(function(){de.assert(Ne,ce+"&&typeof "+ce+'==="object"',"invalid "+Ue)});function hr(Fr){return Lt.optional(function(){de.assert(Ne,'!("'+Fr+'" in '+ce+")||("+ce+"."+Fr+" in "+Qe+")","invalid "+Ue+"."+Fr+", must be one of "+Object.keys(Fu))}),Ne.def('"',Fr,'" in ',ce,"?",Qe,"[",ce,".",Fr,"]:",Bu)}return[Ue===ef?Ru:ac,hr("fail"),hr("zfail"),hr("zpass")]});case nl:return Ze(function(de){Lt.commandType(de,"object",Fe,Jt.commandStr);var Ne=de.factor|0,ce=de.units|0;return Lt.commandType(Ne,"number",Fe+".factor",Jt.commandStr),Lt.commandType(ce,"number",Fe+".units",Jt.commandStr),[Ne,ce]},function(de,Ne,ce){Lt.optional(function(){de.assert(Ne,ce+"&&typeof "+ce+'==="object"',"invalid "+Ue)});var Qe=Ne.def(ce,".factor|0"),hr=Ne.def(ce,".units|0");return[Qe,hr]});case Fl:return Ze(function(de){var Ne=0;return de==="front"?Ne=ac:de==="back"&&(Ne=Ru),Lt.command(!!Ne,Fe,Jt.commandStr),Ne},function(de,Ne,ce){return Lt.optional(function(){de.assert(Ne,ce+'==="front"||'+ce+'==="back"',"invalid cull.face")}),Ne.def(ce,'==="front"?',ac,":",Ru)});case qf:return Ze(function(de){return Lt.command(typeof de=="number"&&de>=yr.lineWidthDims[0]&&de<=yr.lineWidthDims[1],"invalid line width, must be a positive number between "+yr.lineWidthDims[0]+" and "+yr.lineWidthDims[1],Jt.commandStr),de},function(de,Ne,ce){return Lt.optional(function(){de.assert(Ne,"typeof "+ce+'==="number"&&'+ce+">="+yr.lineWidthDims[0]+"&&"+ce+"<="+yr.lineWidthDims[1],"invalid line width")}),ce});case Qu:return Ze(function(de){return Lt.commandParameter(de,yl,Fe,Jt.commandStr),yl[de]},function(de,Ne,ce){return Lt.optional(function(){de.assert(Ne,ce+'==="cw"||'+ce+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Ne.def(ce+'==="cw"?'+Hl+":"+Nc)});case rl:return Ze(function(de){return Lt.command(Na(de)&&de.length===4,"color.mask must be length 4 array",Jt.commandStr),de.map(function(Ne){return!!Ne})},function(de,Ne,ce){return Lt.optional(function(){de.assert(Ne,de.shared.isArrayLike+"("+ce+")&&"+ce+".length===4","invalid color.mask")}),Bn(4,function(Qe){return"!!"+ce+"["+Qe+"]"})});case _f:return Ze(function(de){Lt.command(typeof de=="object"&&de,Fe,Jt.commandStr);var Ne="value"in de?de.value:1,ce=!!de.invert;return Lt.command(typeof Ne=="number"&&Ne>=0&&Ne<=1,"sample.coverage.value must be a number between 0 and 1",Jt.commandStr),[Ne,ce]},function(de,Ne,ce){Lt.optional(function(){de.assert(Ne,ce+"&&typeof "+ce+'==="object"',"invalid sample.coverage")});var Qe=Ne.def('"value" in ',ce,"?+",ce,".value:1"),hr=Ne.def("!!",ce,".invert");return[Qe,hr]})}}),ur}function bi(ve,Jt){var Be=ve.static,ir=ve.dynamic,ur={};return Object.keys(Be).forEach(function(Ue){var Fe=Be[Ue],Ze;if(typeof Fe=="number"||typeof Fe=="boolean")Ze=Zi(function(){return Fe});else if(typeof Fe=="function"){var de=Fe._reglType;de==="texture2d"||de==="textureCube"?Ze=Zi(function(Ne){return Ne.link(Fe)}):de==="framebuffer"||de==="framebufferCube"?(Lt.command(Fe.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Ue+'"',Jt.commandStr),Ze=Zi(function(Ne){return Ne.link(Fe.color[0])})):Lt.commandRaise('invalid data for uniform "'+Ue+'"',Jt.commandStr)}else Na(Fe)?Ze=Zi(function(Ne){var ce=Ne.global.def("[",Bn(Fe.length,function(Qe){return Lt.command(typeof Fe[Qe]=="number"||typeof Fe[Qe]=="boolean","invalid uniform "+Ue,Ne.commandStr),Fe[Qe]}),"]");return ce}):Lt.commandRaise('invalid or missing data for uniform "'+Ue+'"',Jt.commandStr);Ze.value=Fe,ur[Ue]=Ze}),Object.keys(ir).forEach(function(Ue){var Fe=ir[Ue];ur[Ue]=is(Fe,function(Ze,de){return Ze.invoke(de,Fe)})}),ur}function ba(ve,Jt){var Be=ve.static,ir=ve.dynamic,ur={};return Object.keys(Be).forEach(function(Ue){var Fe=Be[Ue],Ze=ne.id(Ue),de=new $;if(kc(Fe))de.state=mf,de.buffer=Br.getBuffer(Br.create(Fe,Af,!1,!0)),de.type=0;else{var Ne=Br.getBuffer(Fe);if(Ne)de.state=mf,de.buffer=Ne,de.type=0;else if(Lt.command(typeof Fe=="object"&&Fe,"invalid data for attribute "+Ue,Jt.commandStr),"constant"in Fe){var ce=Fe.constant;de.buffer="null",de.state=_c,typeof ce=="number"?de.x=ce:(Lt.command(Na(ce)&&ce.length>0&&ce.length<=4,"invalid constant for attribute "+Ue,Jt.commandStr),Nu.forEach(function(jn,Aa){Aa<ce.length&&(de[jn]=ce[Aa])}))}else{kc(Fe.buffer)?Ne=Br.getBuffer(Br.create(Fe.buffer,Af,!1,!0)):Ne=Br.getBuffer(Fe.buffer),Lt.command(!!Ne,'missing buffer for attribute "'+Ue+'"',Jt.commandStr);var Qe=Fe.offset|0;Lt.command(Qe>=0,'invalid offset for attribute "'+Ue+'"',Jt.commandStr);var hr=Fe.stride|0;Lt.command(hr>=0&&hr<256,'invalid stride for attribute "'+Ue+'", must be integer betweeen [0, 255]',Jt.commandStr);var Fr=Fe.size|0;Lt.command(!("size"in Fe)||Fr>0&&Fr<=4,'invalid size for attribute "'+Ue+'", must be 1,2,3,4',Jt.commandStr);var Wr=!!Fe.normalized,Or=0;"type"in Fe&&(Lt.commandParameter(Fe.type,ao,"invalid type for attribute "+Ue,Jt.commandStr),Or=ao[Fe.type]);var cn=Fe.divisor|0;"divisor"in Fe&&(Lt.command(cn===0||ct,'cannot specify divisor for attribute "'+Ue+'", instancing not supported',Jt.commandStr),Lt.command(cn>=0,'invalid divisor for attribute "'+Ue+'"',Jt.commandStr)),Lt.optional(function(){var jn=Jt.commandStr,Aa=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Fe).forEach(function(zn){Lt.command(Aa.indexOf(zn)>=0,'unknown parameter "'+zn+'" for attribute pointer "'+Ue+'" (valid parameters are '+Aa+")",jn)})}),de.buffer=Ne,de.state=mf,de.size=Fr,de.normalized=Wr,de.type=Or||Ne.dtype,de.offset=Qe,de.stride=hr,de.divisor=cn}}ur[Ue]=Zi(function(jn,Aa){var zn=jn.attribCache;if(Ze in zn)return zn[Ze];var sa={isStream:!1};return Object.keys(de).forEach(function(_a){sa[_a]=de[_a]}),de.buffer&&(sa.buffer=jn.link(de.buffer),sa.type=sa.type||sa.buffer+".dtype"),zn[Ze]=sa,sa})}),Object.keys(ir).forEach(function(Ue){var Fe=ir[Ue];function Ze(de,Ne){var ce=de.invoke(Ne,Fe),Qe=de.shared,hr=de.constants,Fr=Qe.isBufferArgs,Wr=Qe.buffer;Lt.optional(function(){de.assert(Ne,ce+"&&(typeof "+ce+'==="object"||typeof '+ce+'==="function")&&('+Fr+"("+ce+")||"+Wr+".getBuffer("+ce+")||"+Wr+".getBuffer("+ce+".buffer)||"+Fr+"("+ce+'.buffer)||("constant" in '+ce+"&&(typeof "+ce+'.constant==="number"||'+Qe.isArrayLike+"("+ce+".constant))))",'invalid dynamic attribute "'+Ue+'"')});var Or={isStream:Ne.def(!1)},cn=new $;cn.state=mf,Object.keys(cn).forEach(function(sa){Or[sa]=Ne.def(""+cn[sa])});var jn=Or.buffer,Aa=Or.type;Ne("if(",Fr,"(",ce,")){",Or.isStream,"=true;",jn,"=",Wr,".createStream(",Af,",",ce,");",Aa,"=",jn,".dtype;","}else{",jn,"=",Wr,".getBuffer(",ce,");","if(",jn,"){",Aa,"=",jn,".dtype;",'}else if("constant" in ',ce,"){",Or.state,"=",_c,";","if(typeof "+ce+'.constant === "number"){',Or[Nu[0]],"=",ce,".constant;",Nu.slice(1).map(function(sa){return Or[sa]}).join("="),"=0;","}else{",Nu.map(function(sa,_a){return Or[sa]+"="+ce+".constant.length>"+_a+"?"+ce+".constant["+_a+"]:0;"}).join(""),"}}else{","if(",Fr,"(",ce,".buffer)){",jn,"=",Wr,".createStream(",Af,",",ce,".buffer);","}else{",jn,"=",Wr,".getBuffer(",ce,".buffer);","}",Aa,'="type" in ',ce,"?",hr.glTypes,"[",ce,".type]:",jn,".dtype;",Or.normalized,"=!!",ce,".normalized;");function zn(sa){Ne(Or[sa],"=",ce,".",sa,"|0;")}return zn("size"),zn("offset"),zn("stride"),zn("divisor"),Ne("}}"),Ne.exit("if(",Or.isStream,"){",Wr,".destroyStream(",jn,");","}"),Or}ur[Ue]=is(Fe,Ze)}),ur}function $i(ve,Jt){var Be=ve.static,ir=ve.dynamic;if(Cf in Be){var ur=Be[Cf];return ur!==null&&an.getVAO(ur)===null&&(ur=an.createVAO(ur)),Zi(function(Fe){return Fe.link(an.getVAO(ur))})}else if(Cf in ir){var Ue=ir[Cf];return is(Ue,function(Fe,Ze){var de=Fe.invoke(Ze,Ue);return Ze.def(Fe.shared.vao+".getVAO("+de+")")})}return null}function yi(ve){var Jt=ve.static,Be=ve.dynamic,ir={};return Object.keys(Jt).forEach(function(ur){var Ue=Jt[ur];ir[ur]=Zi(function(Fe,Ze){return typeof Ue=="number"||typeof Ue=="boolean"?""+Ue:Fe.link(Ue)})}),Object.keys(Be).forEach(function(ur){var Ue=Be[ur];ir[ur]=is(Ue,function(Fe,Ze){return Fe.invoke(Ze,Ue)})}),ir}function Ya(ve,Jt,Be,ir,ur){var Ue=ve.static,Fe=ve.dynamic;Lt.optional(function(){var zn=[Bs,Eu,rf,nf,Ho,af,Pu,Mf,$s,Cf].concat(zt);function sa(_a){Object.keys(_a).forEach(function(ai){Lt.command(zn.indexOf(ai)>=0,'unknown parameter "'+ai+'"',ur.commandStr)})}sa(Ue),sa(Fe)});var Ze=kn(ve,Jt),de=on(ve,ur),Ne=Yn(ve,de,ur),ce=da(ve,ur),Qe=ia(ve,ur),hr=ea(ve,ur,Ze);function Fr(zn){var sa=Ne[zn];sa&&(Qe[zn]=sa)}Fr(Rs),Fr(_e(Sf));var Wr=Object.keys(Qe).length>0,Or={framebuffer:de,draw:ce,shader:hr,state:Qe,dirty:Wr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Or.profile=_n(ve,ur),Or.uniforms=bi(Be,ur),Or.drawVAO=Or.scopeVAO=$i(ve,ur),!Or.drawVAO&&hr.program&&!Ze&&Ce.angle_instanced_arrays){var cn=!0,jn=hr.program.attributes.map(function(zn){var sa=Jt.static[zn];return cn=cn&&!!sa,sa});if(cn&&jn.length>0){var Aa=an.getVAO(an.createVAO(jn));Or.drawVAO=new Lo(null,null,null,function(zn,sa){return zn.link(Aa)}),Or.useVAO=!0}}return Ze?Or.useVAO=!0:Or.attributes=ba(Jt,ur),Or.context=yi(ir,ur),Or}function Xi(ve,Jt,Be){var ir=ve.shared,ur=ir.context,Ue=ve.scope();Object.keys(Be).forEach(function(Fe){Jt.save(ur,"."+Fe);var Ze=Be[Fe],de=Ze.append(ve,Jt);Array.isArray(de)?Ue(ur,".",Fe,"=[",de.join(),"];"):Ue(ur,".",Fe,"=",de,";")}),Jt(Ue)}function Yi(ve,Jt,Be,ir){var ur=ve.shared,Ue=ur.gl,Fe=ur.framebuffer,Ze;yt&&(Ze=Jt.def(ur.extensions,".webgl_draw_buffers"));var de=ve.constants,Ne=de.drawBuffer,ce=de.backBuffer,Qe;Be?Qe=Be.append(ve,Jt):Qe=Jt.def(Fe,".next"),ir||Jt("if(",Qe,"!==",Fe,".cur){"),Jt("if(",Qe,"){",Ue,".bindFramebuffer(",Ql,",",Qe,".framebuffer);"),yt&&Jt(Ze,".drawBuffersWEBGL(",Ne,"[",Qe,".colorAttachments.length]);"),Jt("}else{",Ue,".bindFramebuffer(",Ql,",null);"),yt&&Jt(Ze,".drawBuffersWEBGL(",ce,");"),Jt("}",Fe,".cur=",Qe,";"),ir||Jt("}")}function xo(ve,Jt,Be){var ir=ve.shared,ur=ir.gl,Ue=ve.current,Fe=ve.next,Ze=ir.current,de=ir.next,Ne=ve.cond(Ze,".dirty");zt.forEach(function(ce){var Qe=_e(ce);if(!(Qe in Be.state)){var hr,Fr;if(Qe in Fe){hr=Fe[Qe],Fr=Ue[Qe];var Wr=Bn(Et[Qe].length,function(cn){return Ne.def(hr,"[",cn,"]")});Ne(ve.cond(Wr.map(function(cn,jn){return cn+"!=="+Fr+"["+jn+"]"}).join("||")).then(ur,".",qt[Qe],"(",Wr,");",Wr.map(function(cn,jn){return Fr+"["+jn+"]="+cn}).join(";"),";"))}else{hr=Ne.def(de,".",Qe);var Or=ve.cond(hr,"!==",Ze,".",Qe);Ne(Or),Qe in Qt?Or(ve.cond(hr).then(ur,".enable(",Qt[Qe],");").else(ur,".disable(",Qt[Qe],");"),Ze,".",Qe,"=",hr,";"):Or(ur,".",qt[Qe],"(",hr,");",Ze,".",Qe,"=",hr,";")}}}),Object.keys(Be.state).length===0&&Ne(Ze,".dirty=false;"),Jt(Ne)}function os(ve,Jt,Be,ir){var ur=ve.shared,Ue=ve.current,Fe=ur.current,Ze=ur.gl;ml(Object.keys(Be)).forEach(function(de){var Ne=Be[de];if(!(ir&&!ir(Ne))){var ce=Ne.append(ve,Jt);if(Qt[de]){var Qe=Qt[de];fu(Ne)?ce?Jt(Ze,".enable(",Qe,");"):Jt(Ze,".disable(",Qe,");"):Jt(ve.cond(ce).then(Ze,".enable(",Qe,");").else(Ze,".disable(",Qe,");")),Jt(Fe,".",de,"=",ce,";")}else if(Na(ce)){var hr=Ue[de];Jt(Ze,".",qt[de],"(",ce,");",ce.map(function(Fr,Wr){return hr+"["+Wr+"]="+Fr}).join(";"),";")}else Jt(Ze,".",qt[de],"(",ce,");",Fe,".",de,"=",ce,";")}})}function ho(ve,Jt){ct&&(ve.instancing=Jt.def(ve.shared.extensions,".angle_instanced_arrays"))}function Ma(ve,Jt,Be,ir,ur){var Ue=ve.shared,Fe=ve.stats,Ze=Ue.current,de=Ue.timer,Ne=Be.profile;function ce(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Qe,hr;function Fr(zn){Qe=Jt.def(),zn(Qe,"=",ce(),";"),typeof ur=="string"?zn(Fe,".count+=",ur,";"):zn(Fe,".count++;"),M&&(ir?(hr=Jt.def(),zn(hr,"=",de,".getNumPendingQueries();")):zn(de,".beginQuery(",Fe,");"))}function Wr(zn){zn(Fe,".cpuTime+=",ce(),"-",Qe,";"),M&&(ir?zn(de,".pushScopeStats(",hr,",",de,".getNumPendingQueries(),",Fe,");"):zn(de,".endQuery();"))}function Or(zn){var sa=Jt.def(Ze,".profile");Jt(Ze,".profile=",zn,";"),Jt.exit(Ze,".profile=",sa,";")}var cn;if(Ne){if(fu(Ne)){Ne.enable?(Fr(Jt),Wr(Jt.exit),Or("true")):Or("false");return}cn=Ne.append(ve,Jt),Or(cn)}else cn=Jt.def(Ze,".profile");var jn=ve.block();Fr(jn),Jt("if(",cn,"){",jn,"}");var Aa=ve.block();Wr(Aa),Jt.exit("if(",cn,"){",Aa,"}")}function ss(ve,Jt,Be,ir,ur){var Ue=ve.shared;function Fe(de){switch(de){case Ic:case Lc:case Dc:return 2;case Oc:case tc:case ec:return 3;case Jf:case of:case rc:return 4;default:return 1}}function Ze(de,Ne,ce){var Qe=Ue.gl,hr=Jt.def(de,".location"),Fr=Jt.def(Ue.attributes,"[",hr,"]"),Wr=ce.state,Or=ce.buffer,cn=[ce.x,ce.y,ce.z,ce.w],jn=["buffer","normalized","offset","stride"];function Aa(){Jt("if(!",Fr,".buffer){",Qe,".enableVertexAttribArray(",hr,");}");var sa=ce.type,_a;if(ce.size?_a=Jt.def(ce.size,"||",Ne):_a=Ne,Jt("if(",Fr,".type!==",sa,"||",Fr,".size!==",_a,"||",jn.map(function(Qi){return Fr+"."+Qi+"!=="+ce[Qi]}).join("||"),"){",Qe,".bindBuffer(",Af,",",Or,".buffer);",Qe,".vertexAttribPointer(",[hr,_a,sa,ce.normalized,ce.stride,ce.offset],");",Fr,".type=",sa,";",Fr,".size=",_a,";",jn.map(function(Qi){return Fr+"."+Qi+"="+ce[Qi]+";"}).join(""),"}"),ct){var ai=ce.divisor;Jt("if(",Fr,".divisor!==",ai,"){",ve.instancing,".vertexAttribDivisorANGLE(",[hr,ai],");",Fr,".divisor=",ai,";}")}}function zn(){Jt("if(",Fr,".buffer){",Qe,".disableVertexAttribArray(",hr,");",Fr,".buffer=null;","}if(",Nu.map(function(sa,_a){return Fr+"."+sa+"!=="+cn[_a]}).join("||"),"){",Qe,".vertexAttrib4f(",hr,",",cn,");",Nu.map(function(sa,_a){return Fr+"."+sa+"="+cn[_a]+";"}).join(""),"}")}Wr===mf?Aa():Wr===_c?zn():(Jt("if(",Wr,"===",mf,"){"),Aa(),Jt("}else{"),zn(),Jt("}"))}ir.forEach(function(de){var Ne=de.name,ce=Be.attributes[Ne],Qe;if(ce){if(!ur(ce))return;Qe=ce.append(ve,Jt)}else{if(!ur(ic))return;var hr=ve.scopeAttrib(Ne);Lt.optional(function(){ve.assert(Jt,hr+".state","missing attribute "+Ne)}),Qe={},Object.keys(new $).forEach(function(Fr){Qe[Fr]=Jt.def(hr,".",Fr)})}Ze(ve.link(de),Fe(de.info.type),Qe)})}function ui(ve,Jt,Be,ir,ur){for(var Ue=ve.shared,Fe=Ue.gl,Ze,de=0;de<ir.length;++de){var Ne=ir[de],ce=Ne.name,Qe=Ne.info.type,hr=Be.uniforms[ce],Fr=ve.link(Ne),Wr=Fr+".location",Or;if(hr){if(!ur(hr))continue;if(fu(hr)){var cn=hr.value;if(Lt.command(cn!==null&&typeof cn!="undefined",'missing uniform "'+ce+'"',ve.commandStr),Qe===Lf||Qe===Gs){Lt.command(typeof cn=="function"&&(Qe===Lf&&(cn._reglType==="texture2d"||cn._reglType==="framebuffer")||Qe===Gs&&(cn._reglType==="textureCube"||cn._reglType==="framebufferCube")),"invalid texture for uniform "+ce,ve.commandStr);var jn=ve.link(cn._texture||cn.color[0]._texture);Jt(Fe,".uniform1i(",Wr,",",jn+".bind());"),Jt.exit(jn,".unbind();")}else if(Qe===If||Qe===nc||Qe===Of){Lt.optional(function(){Lt.command(Na(cn),"invalid matrix for uniform "+ce,ve.commandStr),Lt.command(Qe===If&&cn.length===4||Qe===nc&&cn.length===9||Qe===Of&&cn.length===16,"invalid length for matrix uniform "+ce,ve.commandStr)});var Aa=ve.global.def("new Float32Array(["+Array.prototype.slice.call(cn)+"])"),zn=2;Qe===nc?zn=3:Qe===Of&&(zn=4),Jt(Fe,".uniformMatrix",zn,"fv(",Wr,",false,",Aa,");")}else{switch(Qe){case Qf:Lt.commandType(cn,"number","uniform "+ce,ve.commandStr),Ze="1f";break;case Ic:Lt.command(Na(cn)&&cn.length===2,"uniform "+ce,ve.commandStr),Ze="2f";break;case Oc:Lt.command(Na(cn)&&cn.length===3,"uniform "+ce,ve.commandStr),Ze="3f";break;case Jf:Lt.command(Na(cn)&&cn.length===4,"uniform "+ce,ve.commandStr),Ze="4f";break;case gl:Lt.commandType(cn,"boolean","uniform "+ce,ve.commandStr),Ze="1i";break;case dl:Lt.commandType(cn,"number","uniform "+ce,ve.commandStr),Ze="1i";break;case Dc:Lt.command(Na(cn)&&cn.length===2,"uniform "+ce,ve.commandStr),Ze="2i";break;case Lc:Lt.command(Na(cn)&&cn.length===2,"uniform "+ce,ve.commandStr),Ze="2i";break;case ec:Lt.command(Na(cn)&&cn.length===3,"uniform "+ce,ve.commandStr),Ze="3i";break;case tc:Lt.command(Na(cn)&&cn.length===3,"uniform "+ce,ve.commandStr),Ze="3i";break;case rc:Lt.command(Na(cn)&&cn.length===4,"uniform "+ce,ve.commandStr),Ze="4i";break;case of:Lt.command(Na(cn)&&cn.length===4,"uniform "+ce,ve.commandStr),Ze="4i";break}Jt(Fe,".uniform",Ze,"(",Wr,",",Na(cn)?Array.prototype.slice.call(cn):cn,");")}continue}else Or=hr.append(ve,Jt)}else{if(!ur(ic))continue;Or=Jt.def(Ue.uniforms,"[",ne.id(ce),"]")}Qe===Lf?(Lt(!Array.isArray(Or),"must specify a scalar prop for textures"),Jt("if(",Or,"&&",Or,'._reglType==="framebuffer"){',Or,"=",Or,".color[0];","}")):Qe===Gs&&(Lt(!Array.isArray(Or),"must specify a scalar prop for cube maps"),Jt("if(",Or,"&&",Or,'._reglType==="framebufferCube"){',Or,"=",Or,".color[0];","}")),Lt.optional(function(){function Ko(wu,tv){ve.assert(Jt,wu,'bad data or missing for uniform "'+ce+'".  '+tv)}function _l(wu){Lt(!Array.isArray(Or),"must not specify an array type for uniform"),Ko("typeof "+Or+'==="'+wu+'"',"invalid type, expected "+wu)}function lu(wu,tv){Array.isArray(Or)?Lt(Or.length===wu,"must have length "+wu):Ko(Ue.isArrayLike+"("+Or+")&&"+Or+".length==="+wu,"invalid vector, should have length "+wu,ve.commandStr)}function Mh(wu){Lt(!Array.isArray(Or),"must not specify a value type"),Ko("typeof "+Or+'==="function"&&'+Or+'._reglType==="texture'+(wu===Ul?"2d":"Cube")+'"',"invalid texture type",ve.commandStr)}switch(Qe){case dl:_l("number");break;case Lc:lu(2,"number");break;case tc:lu(3,"number");break;case of:lu(4,"number");break;case Qf:_l("number");break;case Ic:lu(2,"number");break;case Oc:lu(3,"number");break;case Jf:lu(4,"number");break;case gl:_l("boolean");break;case Dc:lu(2,"boolean");break;case ec:lu(3,"boolean");break;case rc:lu(4,"boolean");break;case If:lu(4,"number");break;case nc:lu(9,"number");break;case Of:lu(16,"number");break;case Lf:Mh(Ul);break;case Gs:Mh(hl);break}});var sa=1;switch(Qe){case Lf:case Gs:var _a=Jt.def(Or,"._texture");Jt(Fe,".uniform1i(",Wr,",",_a,".bind());"),Jt.exit(_a,".unbind();");continue;case dl:case gl:Ze="1i";break;case Lc:case Dc:Ze="2i",sa=2;break;case tc:case ec:Ze="3i",sa=3;break;case of:case rc:Ze="4i",sa=4;break;case Qf:Ze="1f";break;case Ic:Ze="2f",sa=2;break;case Oc:Ze="3f",sa=3;break;case Jf:Ze="4f",sa=4;break;case If:Ze="Matrix2fv";break;case nc:Ze="Matrix3fv";break;case Of:Ze="Matrix4fv";break}if(Jt(Fe,".uniform",Ze,"(",Wr,","),Ze.charAt(0)==="M"){var ai=Math.pow(Qe-If+2,2),Qi=ve.global.def("new Float32Array(",ai,")");Array.isArray(Or)?Jt("false,(",Bn(ai,function(Ko){return Qi+"["+Ko+"]="+Or[Ko]}),",",Qi,")"):Jt("false,(Array.isArray(",Or,")||",Or," instanceof Float32Array)?",Or,":(",Bn(ai,function(Ko){return Qi+"["+Ko+"]="+Or+"["+Ko+"]"}),",",Qi,")")}else sa>1?Jt(Bn(sa,function(Ko){return Array.isArray(Or)?Or[Ko]:Or+"["+Ko+"]"})):(Lt(!Array.isArray(Or),"uniform value must not be an array"),Jt(Or));Jt(");")}}function oa(ve,Jt,Be,ir){var ur=ve.shared,Ue=ur.gl,Fe=ur.draw,Ze=ir.draw;function de(){var _a=Ze.elements,ai,Qi=Jt;return _a?((_a.contextDep&&ir.contextDynamic||_a.propDep)&&(Qi=Be),ai=_a.append(ve,Qi)):ai=Qi.def(Fe,".",nf),ai&&Qi("if("+ai+")"+Ue+".bindBuffer("+vh+","+ai+".buffer.buffer);"),ai}function Ne(){var _a=Ze.count,ai,Qi=Jt;return _a?((_a.contextDep&&ir.contextDynamic||_a.propDep)&&(Qi=Be),ai=_a.append(ve,Qi),Lt.optional(function(){_a.MISSING&&ve.assert(Jt,"false","missing vertex count"),_a.DYNAMIC&&ve.assert(Qi,ai+">=0","missing vertex count")})):(ai=Qi.def(Fe,".",Pu),Lt.optional(function(){ve.assert(Qi,ai+">=0","missing vertex count")})),ai}var ce=de();function Qe(_a){var ai=Ze[_a];return ai?ai.contextDep&&ir.contextDynamic||ai.propDep?ai.append(ve,Be):ai.append(ve,Jt):Jt.def(Fe,".",_a)}var hr=Qe(Ho),Fr=Qe(af),Wr=Ne();if(typeof Wr=="number"){if(Wr===0)return}else Be("if(",Wr,"){"),Be.exit("}");var Or,cn;ct&&(Or=Qe(Mf),cn=ve.instancing);var jn=ce+".type",Aa=Ze.elements&&fu(Ze.elements);function zn(){function _a(){Be(cn,".drawElementsInstancedANGLE(",[hr,Wr,jn,Fr+"<<(("+jn+"-"+Qc+")>>1)",Or],");")}function ai(){Be(cn,".drawArraysInstancedANGLE(",[hr,Fr,Wr,Or],");")}ce?Aa?_a():(Be("if(",ce,"){"),_a(),Be("}else{"),ai(),Be("}")):ai()}function sa(){function _a(){Be(Ue+".drawElements("+[hr,Wr,jn,Fr+"<<(("+jn+"-"+Qc+")>>1)"]+");")}function ai(){Be(Ue+".drawArrays("+[hr,Fr,Wr]+");")}ce?Aa?_a():(Be("if(",ce,"){"),_a(),Be("}else{"),ai(),Be("}")):ai()}ct&&(typeof Or!="number"||Or>=0)?typeof Or=="string"?(Be("if(",Or,">0){"),zn(),Be("}else if(",Or,"<0){"),sa(),Be("}")):zn():sa()}function Fa(ve,Jt,Be,ir,ur){var Ue=$r(),Fe=Ue.proc("body",ur);return Lt.optional(function(){Ue.commandStr=Jt.commandStr,Ue.command=Ue.link(Jt.commandStr)}),ct&&(Ue.instancing=Fe.def(Ue.shared.extensions,".angle_instanced_arrays")),ve(Ue,Fe,Be,ir),Ue.compile().body}function ti(ve,Jt,Be,ir){ho(ve,Jt),Be.useVAO?Be.drawVAO?Jt(ve.shared.vao,".setVAO(",Be.drawVAO.append(ve,Jt),");"):Jt(ve.shared.vao,".setVAO(",ve.shared.vao,".targetVAO);"):(Jt(ve.shared.vao,".setVAO(null);"),ss(ve,Jt,Be,ir.attributes,function(){return!0})),ui(ve,Jt,Be,ir.uniforms,function(){return!0}),oa(ve,Jt,Jt,Be)}function vo(ve,Jt){var Be=ve.proc("draw",1);ho(ve,Be),Xi(ve,Be,Jt.context),Yi(ve,Be,Jt.framebuffer),xo(ve,Be,Jt),os(ve,Be,Jt.state),Ma(ve,Be,Jt,!1,!0);var ir=Jt.shader.progVar.append(ve,Be);if(Be(ve.shared.gl,".useProgram(",ir,".program);"),Jt.shader.program)ti(ve,Be,Jt,Jt.shader.program);else{Be(ve.shared.vao,".setVAO(null);");var ur=ve.global.def("{}"),Ue=Be.def(ir,".id"),Fe=Be.def(ur,"[",Ue,"]");Be(ve.cond(Fe).then(Fe,".call(this,a0);").else(Fe,"=",ur,"[",Ue,"]=",ve.link(function(Ze){return Fa(ti,ve,Jt,Ze,1)}),"(",ir,");",Fe,".call(this,a0);"))}Object.keys(Jt.state).length>0&&Be(ve.shared.current,".dirty=true;")}function cu(ve,Jt,Be,ir){ve.batchId="a1",ho(ve,Jt);function ur(){return!0}ss(ve,Jt,Be,ir.attributes,ur),ui(ve,Jt,Be,ir.uniforms,ur),oa(ve,Jt,Jt,Be)}function Gu(ve,Jt,Be,ir){ho(ve,Jt);var ur=Be.contextDep,Ue=Jt.def(),Fe="a0",Ze="a1",de=Jt.def();ve.shared.props=de,ve.batchId=Ue;var Ne=ve.scope(),ce=ve.scope();Jt(Ne.entry,"for(",Ue,"=0;",Ue,"<",Ze,";++",Ue,"){",de,"=",Fe,"[",Ue,"];",ce,"}",Ne.exit);function Qe(jn){return jn.contextDep&&ur||jn.propDep}function hr(jn){return!Qe(jn)}if(Be.needsContext&&Xi(ve,ce,Be.context),Be.needsFramebuffer&&Yi(ve,ce,Be.framebuffer),os(ve,ce,Be.state,Qe),Be.profile&&Qe(Be.profile)&&Ma(ve,ce,Be,!1,!0),ir)Be.useVAO?Be.drawVAO?Qe(Be.drawVAO)?ce(ve.shared.vao,".setVAO(",Be.drawVAO.append(ve,ce),");"):Ne(ve.shared.vao,".setVAO(",Be.drawVAO.append(ve,Ne),");"):Ne(ve.shared.vao,".setVAO(",ve.shared.vao,".targetVAO);"):(Ne(ve.shared.vao,".setVAO(null);"),ss(ve,Ne,Be,ir.attributes,hr),ss(ve,ce,Be,ir.attributes,Qe)),ui(ve,Ne,Be,ir.uniforms,hr),ui(ve,ce,Be,ir.uniforms,Qe),oa(ve,Ne,ce,Be);else{var Fr=ve.global.def("{}"),Wr=Be.shader.progVar.append(ve,ce),Or=ce.def(Wr,".id"),cn=ce.def(Fr,"[",Or,"]");ce(ve.shared.gl,".useProgram(",Wr,".program);","if(!",cn,"){",cn,"=",Fr,"[",Or,"]=",ve.link(function(jn){return Fa(cu,ve,Be,jn,2)}),"(",Wr,");}",cn,".call(this,a0[",Ue,"],",Ue,");")}}function we(ve,Jt){var Be=ve.proc("batch",2);ve.batchId="0",ho(ve,Be);var ir=!1,ur=!0;Object.keys(Jt.context).forEach(function(Fr){ir=ir||Jt.context[Fr].propDep}),ir||(Xi(ve,Be,Jt.context),ur=!1);var Ue=Jt.framebuffer,Fe=!1;Ue?(Ue.propDep?ir=Fe=!0:Ue.contextDep&&ir&&(Fe=!0),Fe||Yi(ve,Be,Ue)):Yi(ve,Be,null),Jt.state.viewport&&Jt.state.viewport.propDep&&(ir=!0);function Ze(Fr){return Fr.contextDep&&ir||Fr.propDep}xo(ve,Be,Jt),os(ve,Be,Jt.state,function(Fr){return!Ze(Fr)}),(!Jt.profile||!Ze(Jt.profile))&&Ma(ve,Be,Jt,!1,"a1"),Jt.contextDep=ir,Jt.needsContext=ur,Jt.needsFramebuffer=Fe;var de=Jt.shader.progVar;if(de.contextDep&&ir||de.propDep)Gu(ve,Be,Jt,null);else{var Ne=de.append(ve,Be);if(Be(ve.shared.gl,".useProgram(",Ne,".program);"),Jt.shader.program)Gu(ve,Be,Jt,Jt.shader.program);else{Be(ve.shared.vao,".setVAO(null);");var ce=ve.global.def("{}"),Qe=Be.def(Ne,".id"),hr=Be.def(ce,"[",Qe,"]");Be(ve.cond(hr).then(hr,".call(this,a0,a1);").else(hr,"=",ce,"[",Qe,"]=",ve.link(function(Fr){return Fa(Gu,ve,Jt,Fr,2)}),"(",Ne,");",hr,".call(this,a0,a1);"))}}Object.keys(Jt.state).length>0&&Be(ve.shared.current,".dirty=true;")}function br(ve,Jt){var Be=ve.proc("scope",3);ve.batchId="a2";var ir=ve.shared,ur=ir.current;Xi(ve,Be,Jt.context),Jt.framebuffer&&Jt.framebuffer.append(ve,Be),ml(Object.keys(Jt.state)).forEach(function(Fe){var Ze=Jt.state[Fe],de=Ze.append(ve,Be);Na(de)?de.forEach(function(Ne,ce){Be.set(ve.next[Fe],"["+ce+"]",Ne)}):Be.set(ir.next,"."+Fe,de)}),Ma(ve,Be,Jt,!0,!0),[nf,af,Pu,Mf,Ho].forEach(function(Fe){var Ze=Jt.draw[Fe];Ze&&Be.set(ir.draw,"."+Fe,""+Ze.append(ve,Be))}),Object.keys(Jt.uniforms).forEach(function(Fe){var Ze=Jt.uniforms[Fe].append(ve,Be);Array.isArray(Ze)&&(Ze="["+Ze.join()+"]"),Be.set(ir.uniforms,"["+ne.id(Fe)+"]",Ze)}),Object.keys(Jt.attributes).forEach(function(Fe){var Ze=Jt.attributes[Fe].append(ve,Be),de=ve.scopeAttrib(Fe);Object.keys(new $).forEach(function(Ne){Be.set(de,"."+Ne,Ze[Ne])})}),Jt.scopeVAO&&Be.set(ir.vao,".targetVAO",Jt.scopeVAO.append(ve,Be));function Ue(Fe){var Ze=Jt.shader[Fe];Ze&&Be.set(ir.shader,"."+Fe,Ze.append(ve,Be))}Ue(Eu),Ue(rf),Object.keys(Jt.state).length>0&&(Be(ur,".dirty=true;"),Be.exit(ur,".dirty=true;")),Be("a1(",ve.shared.context,",a0,",ve.batchId,");")}function gr(ve){if(!(typeof ve!="object"||Na(ve))){for(var Jt=Object.keys(ve),Be=0;Be<Jt.length;++Be)if(sr.isDynamic(ve[Jt[Be]]))return!0;return!1}}function Pn(ve,Jt,Be){var ir=Jt.static[Be];if(!ir||!gr(ir))return;var ur=ve.global,Ue=Object.keys(ir),Fe=!1,Ze=!1,de=!1,Ne=ve.global.def("{}");Ue.forEach(function(Qe){var hr=ir[Qe];if(sr.isDynamic(hr)){typeof hr=="function"&&(hr=ir[Qe]=sr.unbox(hr));var Fr=is(hr,null);Fe=Fe||Fr.thisDep,de=de||Fr.propDep,Ze=Ze||Fr.contextDep}else{switch(ur(Ne,".",Qe,"="),typeof hr){case"number":ur(hr);break;case"string":ur('"',hr,'"');break;case"object":Array.isArray(hr)&&ur("[",hr.join(),"]");break;default:ur(ve.link(hr));break}ur(";")}});function ce(Qe,hr){Ue.forEach(function(Fr){var Wr=ir[Fr];if(sr.isDynamic(Wr)){var Or=Qe.invoke(hr,Wr);hr(Ne,".",Fr,"=",Or,";")}})}Jt.dynamic[Be]=new sr.DynamicVariable(xf,{thisDep:Fe,contextDep:Ze,propDep:de,ref:Ne,append:ce}),delete Jt.static[Be]}function Ga(ve,Jt,Be,ir,ur){var Ue=$r();Ue.stats=Ue.link(ur),Object.keys(Jt.static).forEach(function(Ze){Pn(Ue,Jt,Ze)}),cl.forEach(function(Ze){Pn(Ue,ve,Ze)});var Fe=Ya(ve,Jt,Be,ir,Ue);return vo(Ue,Fe),br(Ue,Fe),we(Ue,Fe),z(Ue.compile(),{destroy:function(){Fe.shader.program.destroy()}})}return{next:It,current:Et,procs:function(){var ve=$r(),Jt=ve.proc("poll"),Be=ve.proc("refresh"),ir=ve.block();Jt(ir),Be(ir);var ur=ve.shared,Ue=ur.gl,Fe=ur.next,Ze=ur.current;ir(Ze,".dirty=false;"),Yi(ve,Jt),Yi(ve,Be,null,!0);var de;ct&&(de=ve.link(ct)),Ce.oes_vertex_array_object&&Be(ve.link(Ce.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Ne=0;Ne<yr.maxAttributes;++Ne){var ce=Be.def(ur.attributes,"[",Ne,"]"),Qe=ve.cond(ce,".buffer");Qe.then(Ue,".enableVertexAttribArray(",Ne,");",Ue,".bindBuffer(",Af,",",ce,".buffer.buffer);",Ue,".vertexAttribPointer(",Ne,",",ce,".size,",ce,".type,",ce,".normalized,",ce,".stride,",ce,".offset);").else(Ue,".disableVertexAttribArray(",Ne,");",Ue,".vertexAttrib4f(",Ne,",",ce,".x,",ce,".y,",ce,".z,",ce,".w);",ce,".buffer=null;"),Be(Qe),ct&&Be(de,".vertexAttribDivisorANGLE(",Ne,",",ce,".divisor);")}return Be(ve.shared.vao,".currentVAO=null;",ve.shared.vao,".setVAO(",ve.shared.vao,".targetVAO);"),Object.keys(Qt).forEach(function(hr){var Fr=Qt[hr],Wr=ir.def(Fe,".",hr),Or=ve.block();Or("if(",Wr,"){",Ue,".enable(",Fr,")}else{",Ue,".disable(",Fr,")}",Ze,".",hr,"=",Wr,";"),Be(Or),Jt("if(",Wr,"!==",Ze,".",hr,"){",Or,"}")}),Object.keys(qt).forEach(function(hr){var Fr=qt[hr],Wr=Et[hr],Or,cn,jn=ve.block();if(jn(Ue,".",Fr,"("),Na(Wr)){var Aa=Wr.length;Or=ve.global.def(Fe,".",hr),cn=ve.global.def(Ze,".",hr),jn(Bn(Aa,function(zn){return Or+"["+zn+"]"}),");",Bn(Aa,function(zn){return cn+"["+zn+"]="+Or+"["+zn+"];"}).join("")),Jt("if(",Bn(Aa,function(zn){return Or+"["+zn+"]!=="+cn+"["+zn+"]"}).join("||"),"){",jn,"}")}else Or=ir.def(Fe,".",hr),cn=ir.def(Ze,".",hr),jn(Or,");",Ze,".",hr,"=",Or,";"),Jt("if(",Or,"!==",cn,"){",jn,"}");Be(jn)}),ve.compile()}(),compile:Ga}}function xl(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var xh=34918,Jh=34919,th=35007,bh=function(xt,ne){if(!ne.ext_disjoint_timer_query)return null;var Ce=[];function yr(){return Ce.pop()||ne.ext_disjoint_timer_query.createQueryEXT()}function Br(ct){Ce.push(ct)}var pr=[];function Tr(ct){var yt=yr();ne.ext_disjoint_timer_query.beginQueryEXT(th,yt),pr.push(yt),M(pr.length-1,pr.length,ct)}function Zr(){ne.ext_disjoint_timer_query.endQueryEXT(th)}function en(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var an=[];function Jr(){return an.pop()||new en}function dn(ct){an.push(ct)}var v=[];function M(ct,yt,Et){var It=Jr();It.startQueryIndex=ct,It.endQueryIndex=yt,It.sum=0,It.stats=Et,v.push(It)}var G=[],$=[];function ft(){var ct,yt,Et=pr.length;if(Et!==0){$.length=Math.max($.length,Et+1),G.length=Math.max(G.length,Et+1),G[0]=0,$[0]=0;var It=0;for(ct=0,yt=0;yt<pr.length;++yt){var zt=pr[yt];ne.ext_disjoint_timer_query.getQueryObjectEXT(zt,Jh)?(It+=ne.ext_disjoint_timer_query.getQueryObjectEXT(zt,xh),Br(zt)):pr[ct++]=zt,G[yt+1]=It,$[yt+1]=ct}for(pr.length=ct,ct=0,yt=0;yt<v.length;++yt){var Qt=v[yt],qt=Qt.startQueryIndex,_e=Qt.endQueryIndex;Qt.sum+=G[_e]-G[qt];var Ye=$[qt],Cr=$[_e];Cr===Ye?(Qt.stats.gpuTime+=Qt.sum/1e6,dn(Qt)):(Qt.startQueryIndex=Ye,Qt.endQueryIndex=Cr,v[ct++]=Qt)}v.length=ct}}return{beginQuery:Tr,endQuery:Zr,pushScopeStats:M,update:ft,getNumPendingQueries:function(){return pr.length},clear:function(){Ce.push.apply(Ce,pr);for(var ct=0;ct<Ce.length;ct++)ne.ext_disjoint_timer_query.deleteQueryEXT(Ce[ct]);pr.length=0,Ce.length=0},restore:function(){pr.length=0,Ce.length=0}}},eh=16384,Eh=256,wh=1024,rh=34962,bl="webglcontextlost",Rc="webglcontextrestored",El=1,_h=2,wl=3;function Sh(xt,ne){for(var Ce=0;Ce<xt.length;++Ce)if(xt[Ce]===ne)return Ce;return-1}function oc(xt){var ne=Hn(xt);if(!ne)return null;var Ce=ne.gl,yr=Ce.getContextAttributes(),Br=Ce.isContextLost(),pr=Wn(Ce,ne);if(!pr)return null;var Tr=fn(),Zr=xl(),en=pr.extensions,an=bh(Ce,en),Jr=zr(),dn=Ce.drawingBufferWidth,v=Ce.drawingBufferHeight,M={tick:0,time:0,viewportWidth:dn,viewportHeight:v,framebufferWidth:dn,framebufferHeight:v,drawingBufferWidth:dn,drawingBufferHeight:v,pixelRatio:ne.pixelRatio},G={},$={elements:null,primitive:4,count:-1,offset:0,instances:-1},ft=Bo(Ce,en),ct=Ri(Ce,Zr,ne,Et),yt=Hu(Ce,en,ft,Zr,ct);function Et(oa){return yt.destroyBuffer(oa)}var It=Yo(Ce,en,ct,Zr),zt=Zu(Ce,Tr,Zr,ne),Qt=hf(Ce,en,ft,function(){Ye.procs.poll()},M,Zr,ne),qt=Ec(Ce,en,ft,Zr,ne),_e=wc(Ce,en,ft,Qt,qt,Zr),Ye=mh(Ce,Tr,en,ft,ct,It,Qt,_e,G,yt,zt,$,M,an,ne),Cr=Du(Ce,_e,Ye.procs.poll,M,yr,en,ft),$e=Ye.next,er=Ce.canvas,tr=[],$r=[],_n=[],on=[ne.onDestroy],Yn=null;function kn(){if(tr.length===0){an&&an.update(),Yn=null;return}Yn=lr.next(kn),os();for(var oa=tr.length-1;oa>=0;--oa){var Fa=tr[oa];Fa&&Fa(M,null,0)}Ce.flush(),an&&an.update()}function ea(){!Yn&&tr.length>0&&(Yn=lr.next(kn))}function da(){Yn&&(lr.cancel(kn),Yn=null)}function ia(oa){oa.preventDefault(),Br=!0,da(),$r.forEach(function(Fa){Fa()})}function bi(oa){Ce.getError(),Br=!1,pr.restore(),zt.restore(),ct.restore(),Qt.restore(),qt.restore(),_e.restore(),yt.restore(),an&&an.restore(),Ye.procs.refresh(),ea(),_n.forEach(function(Fa){Fa()})}er&&(er.addEventListener(bl,ia,!1),er.addEventListener(Rc,bi,!1));function ba(){tr.length=0,da(),er&&(er.removeEventListener(bl,ia),er.removeEventListener(Rc,bi)),zt.clear(),_e.clear(),qt.clear(),Qt.clear(),It.clear(),ct.clear(),yt.clear(),an&&an.clear(),on.forEach(function(oa){oa()})}function $i(oa){Lt(!!oa,"invalid args to regl({...})"),Lt.type(oa,"object","invalid args to regl({...})");function Fa(ur){var Ue=z({},ur);delete Ue.uniforms,delete Ue.attributes,delete Ue.context,delete Ue.vao,"stencil"in Ue&&Ue.stencil.op&&(Ue.stencil.opBack=Ue.stencil.opFront=Ue.stencil.op,delete Ue.stencil.op);function Fe(Ze){if(Ze in Ue){var de=Ue[Ze];delete Ue[Ze],Object.keys(de).forEach(function(Ne){Ue[Ze+"."+Ne]=de[Ne]})}}return Fe("blend"),Fe("depth"),Fe("cull"),Fe("stencil"),Fe("polygonOffset"),Fe("scissor"),Fe("sample"),"vao"in ur&&(Ue.vao=ur.vao),Ue}function ti(ur,Ue){var Fe={},Ze={};return Object.keys(ur).forEach(function(de){var Ne=ur[de];if(sr.isDynamic(Ne)){Ze[de]=sr.unbox(Ne,de);return}else if(Ue&&Array.isArray(Ne)){for(var ce=0;ce<Ne.length;++ce)if(sr.isDynamic(Ne[ce])){Ze[de]=sr.unbox(Ne,de);return}}Fe[de]=Ne}),{dynamic:Ze,static:Fe}}var vo=ti(oa.context||{},!0),cu=ti(oa.uniforms||{},!0),Gu=ti(oa.attributes||{},!1),we=ti(Fa(oa),!1),br={gpuTime:0,cpuTime:0,count:0},gr=Ye.compile(we,Gu,cu,vo,br),Pn=gr.draw,Ga=gr.batch,ve=gr.scope,Jt=[];function Be(ur){for(;Jt.length<ur;)Jt.push(null);return Jt}function ir(ur,Ue){var Fe;if(Br&&Lt.raise("context lost"),typeof ur=="function")return ve.call(this,null,ur,0);if(typeof Ue=="function")if(typeof ur=="number")for(Fe=0;Fe<ur;++Fe)ve.call(this,null,Ue,Fe);else if(Array.isArray(ur))for(Fe=0;Fe<ur.length;++Fe)ve.call(this,ur[Fe],Ue,Fe);else return ve.call(this,ur,Ue,0);else if(typeof ur=="number"){if(ur>0)return Ga.call(this,Be(ur|0),ur|0)}else if(Array.isArray(ur)){if(ur.length)return Ga.call(this,ur,ur.length)}else return Pn.call(this,ur)}return z(ir,{stats:br,destroy:function(){gr.destroy()}})}var yi=_e.setFBO=$i({framebuffer:sr.define.call(null,El,"framebuffer")});function Ya(oa,Fa){var ti=0;Ye.procs.poll();var vo=Fa.color;vo&&(Ce.clearColor(+vo[0]||0,+vo[1]||0,+vo[2]||0,+vo[3]||0),ti|=eh),"depth"in Fa&&(Ce.clearDepth(+Fa.depth),ti|=Eh),"stencil"in Fa&&(Ce.clearStencil(Fa.stencil|0),ti|=wh),Lt(!!ti,"called regl.clear with no buffer specified"),Ce.clear(ti)}function Xi(oa){if(Lt(typeof oa=="object"&&oa,"regl.clear() takes an object as input"),"framebuffer"in oa)if(oa.framebuffer&&oa.framebuffer_reglType==="framebufferCube")for(var Fa=0;Fa<6;++Fa)yi(z({framebuffer:oa.framebuffer.faces[Fa]},oa),Ya);else yi(oa,Ya);else Ya(null,oa)}function Yi(oa){Lt.type(oa,"function","regl.frame() callback must be a function"),tr.push(oa);function Fa(){var ti=Sh(tr,oa);Lt(ti>=0,"cannot cancel a frame twice");function vo(){var cu=Sh(tr,vo);tr[cu]=tr[tr.length-1],tr.length-=1,tr.length<=0&&da()}tr[ti]=vo}return ea(),{cancel:Fa}}function xo(){var oa=$e.viewport,Fa=$e.scissor_box;oa[0]=oa[1]=Fa[0]=Fa[1]=0,M.viewportWidth=M.framebufferWidth=M.drawingBufferWidth=oa[2]=Fa[2]=Ce.drawingBufferWidth,M.viewportHeight=M.framebufferHeight=M.drawingBufferHeight=oa[3]=Fa[3]=Ce.drawingBufferHeight}function os(){M.tick+=1,M.time=Ma(),xo(),Ye.procs.poll()}function ho(){Qt.refresh(),xo(),Ye.procs.refresh(),an&&an.update()}function Ma(){return(zr()-Jr)/1e3}ho();function ss(oa,Fa){Lt.type(Fa,"function","listener callback must be a function");var ti;switch(oa){case"frame":return Yi(Fa);case"lost":ti=$r;break;case"restore":ti=_n;break;case"destroy":ti=on;break;default:Lt.raise("invalid event, must be one of frame,lost,restore,destroy")}return ti.push(Fa),{cancel:function(){for(var vo=0;vo<ti.length;++vo)if(ti[vo]===Fa){ti[vo]=ti[ti.length-1],ti.pop();return}}}}var ui=z($i,{clear:Xi,prop:sr.define.bind(null,El),context:sr.define.bind(null,_h),this:sr.define.bind(null,wl),draw:$i({}),buffer:function(oa){return ct.create(oa,rh,!1,!1)},elements:function(oa){return It.create(oa,!1)},texture:Qt.create2D,cube:Qt.createCube,renderbuffer:qt.create,framebuffer:_e.create,framebufferCube:_e.createCube,vao:yt.createVAO,attributes:yr,frame:Yi,on:ss,limits:ft,hasExtension:function(oa){return ft.extensions.indexOf(oa.toLowerCase())>=0},read:Cr,destroy:ba,_gl:Ce,_refresh:ho,poll:function(){os(),an&&an.update()},now:Ma,stats:Zr});return ne.onDone(null,ui),ui}return oc})},86851:function(xr,U,z){"use strict";var F=z(89594),j=Array.prototype.concat,B=Array.prototype.slice,L=xr.exports=function(D){for(var w=[],b=0,g=D.length;b<g;b++){var y=D[b];F(y)?w=j.call(w,B.call(y)):w.push(y)}return w};L.wrap=function(k){return function(){return k(L(arguments))}}},89594:function(xr){xr.exports=function(z){return!z||typeof z=="string"?!1:z instanceof Array||Array.isArray(z)||z.length>=0&&(z.splice instanceof Function||Object.getOwnPropertyDescriptor(z,z.length-1)&&z.constructor.name!=="String")}},17061:function(xr,U,z){var F=z(18698).default;function j(){"use strict";xr.exports=j=function(){return L},xr.exports.__esModule=!0,xr.exports.default=xr.exports;var B,L={},k=Object.prototype,D=k.hasOwnProperty,w=Object.defineProperty||function(at,ht,wt){at[ht]=wt.value},b=typeof Symbol=="function"?Symbol:{},g=b.iterator||"@@iterator",y=b.asyncIterator||"@@asyncIterator",d=b.toStringTag||"@@toStringTag";function S(at,ht,wt){return Object.defineProperty(at,ht,{value:wt,enumerable:!0,configurable:!0,writable:!0}),at[ht]}try{S({},"")}catch(at){S=function(wt,Mt,Ut){return wt[Mt]=Ut}}function _(at,ht,wt,Mt){var Ut=ht&&ht.prototype instanceof X?ht:X,Vt=Object.create(Ut.prototype),Me=new K(Mt||[]);return w(Vt,"_invoke",{value:Dt(at,wt,Me)}),Vt}function E(at,ht,wt){try{return{type:"normal",arg:at.call(ht,wt)}}catch(Mt){return{type:"throw",arg:Mt}}}L.wrap=_;var I="suspendedStart",P="suspendedYield",N="executing",H="completed",nt={};function X(){}function Y(){}function Z(){}var J={};S(J,g,function(){return this});var it=Object.getPrototypeOf,tt=it&&it(it(p([])));tt&&tt!==k&&D.call(tt,g)&&(J=tt);var ut=Z.prototype=X.prototype=Object.create(J);function vt(at){["next","throw","return"].forEach(function(ht){S(at,ht,function(wt){return this._invoke(ht,wt)})})}function pt(at,ht){function wt(Ut,Vt,Me,Wt){var ae=E(at[Ut],at,Vt);if(ae.type!=="throw"){var he=ae.arg,Se=he.value;return Se&&F(Se)=="object"&&D.call(Se,"__await")?ht.resolve(Se.__await).then(function(xe){wt("next",xe,Me,Wt)},function(xe){wt("throw",xe,Me,Wt)}):ht.resolve(Se).then(function(xe){he.value=xe,Me(he)},function(xe){return wt("throw",xe,Me,Wt)})}Wt(ae.arg)}var Mt;w(this,"_invoke",{value:function(Vt,Me){function Wt(){return new ht(function(ae,he){wt(Vt,Me,ae,he)})}return Mt=Mt?Mt.then(Wt,Wt):Wt()}})}function Dt(at,ht,wt){var Mt=I;return function(Ut,Vt){if(Mt===N)throw new Error("Generator is already running");if(Mt===H){if(Ut==="throw")throw Vt;return{value:B,done:!0}}for(wt.method=Ut,wt.arg=Vt;;){var Me=wt.delegate;if(Me){var Wt=Ot(Me,wt);if(Wt){if(Wt===nt)continue;return Wt}}if(wt.method==="next")wt.sent=wt._sent=wt.arg;else if(wt.method==="throw"){if(Mt===I)throw Mt=H,wt.arg;wt.dispatchException(wt.arg)}else wt.method==="return"&&wt.abrupt("return",wt.arg);Mt=N;var ae=E(at,ht,wt);if(ae.type==="normal"){if(Mt=wt.done?H:P,ae.arg===nt)continue;return{value:ae.arg,done:wt.done}}ae.type==="throw"&&(Mt=H,wt.method="throw",wt.arg=ae.arg)}}}function Ot(at,ht){var wt=ht.method,Mt=at.iterator[wt];if(Mt===B)return ht.delegate=null,wt==="throw"&&at.iterator.return&&(ht.method="return",ht.arg=B,Ot(at,ht),ht.method==="throw")||wt!=="return"&&(ht.method="throw",ht.arg=new TypeError("The iterator does not provide a '"+wt+"' method")),nt;var Ut=E(Mt,at.iterator,ht.arg);if(Ut.type==="throw")return ht.method="throw",ht.arg=Ut.arg,ht.delegate=null,nt;var Vt=Ut.arg;return Vt?Vt.done?(ht[at.resultName]=Vt.value,ht.next=at.nextLoc,ht.method!=="return"&&(ht.method="next",ht.arg=B),ht.delegate=null,nt):Vt:(ht.method="throw",ht.arg=new TypeError("iterator result is not an object"),ht.delegate=null,nt)}function te(at){var ht={tryLoc:at[0]};1 in at&&(ht.catchLoc=at[1]),2 in at&&(ht.finallyLoc=at[2],ht.afterLoc=at[3]),this.tryEntries.push(ht)}function Gt(at){var ht=at.completion||{};ht.type="normal",delete ht.arg,at.completion=ht}function K(at){this.tryEntries=[{tryLoc:"root"}],at.forEach(te,this),this.reset(!0)}function p(at){if(at||at===""){var ht=at[g];if(ht)return ht.call(at);if(typeof at.next=="function")return at;if(!isNaN(at.length)){var wt=-1,Mt=function Ut(){for(;++wt<at.length;)if(D.call(at,wt))return Ut.value=at[wt],Ut.done=!1,Ut;return Ut.value=B,Ut.done=!0,Ut};return Mt.next=Mt}}throw new TypeError(F(at)+" is not iterable")}return Y.prototype=Z,w(ut,"constructor",{value:Z,configurable:!0}),w(Z,"constructor",{value:Y,configurable:!0}),Y.displayName=S(Z,d,"GeneratorFunction"),L.isGeneratorFunction=function(at){var ht=typeof at=="function"&&at.constructor;return!!ht&&(ht===Y||(ht.displayName||ht.name)==="GeneratorFunction")},L.mark=function(at){return Object.setPrototypeOf?Object.setPrototypeOf(at,Z):(at.__proto__=Z,S(at,d,"GeneratorFunction")),at.prototype=Object.create(ut),at},L.awrap=function(at){return{__await:at}},vt(pt.prototype),S(pt.prototype,y,function(){return this}),L.AsyncIterator=pt,L.async=function(at,ht,wt,Mt,Ut){Ut===void 0&&(Ut=Promise);var Vt=new pt(_(at,ht,wt,Mt),Ut);return L.isGeneratorFunction(ht)?Vt:Vt.next().then(function(Me){return Me.done?Me.value:Vt.next()})},vt(ut),S(ut,d,"Generator"),S(ut,g,function(){return this}),S(ut,"toString",function(){return"[object Generator]"}),L.keys=function(at){var ht=Object(at),wt=[];for(var Mt in ht)wt.push(Mt);return wt.reverse(),function Ut(){for(;wt.length;){var Vt=wt.pop();if(Vt in ht)return Ut.value=Vt,Ut.done=!1,Ut}return Ut.done=!0,Ut}},L.values=p,K.prototype={constructor:K,reset:function(ht){if(this.prev=0,this.next=0,this.sent=this._sent=B,this.done=!1,this.delegate=null,this.method="next",this.arg=B,this.tryEntries.forEach(Gt),!ht)for(var wt in this)wt.charAt(0)==="t"&&D.call(this,wt)&&!isNaN(+wt.slice(1))&&(this[wt]=B)},stop:function(){this.done=!0;var ht=this.tryEntries[0].completion;if(ht.type==="throw")throw ht.arg;return this.rval},dispatchException:function(ht){if(this.done)throw ht;var wt=this;function Mt(he,Se){return Me.type="throw",Me.arg=ht,wt.next=he,Se&&(wt.method="next",wt.arg=B),!!Se}for(var Ut=this.tryEntries.length-1;Ut>=0;--Ut){var Vt=this.tryEntries[Ut],Me=Vt.completion;if(Vt.tryLoc==="root")return Mt("end");if(Vt.tryLoc<=this.prev){var Wt=D.call(Vt,"catchLoc"),ae=D.call(Vt,"finallyLoc");if(Wt&&ae){if(this.prev<Vt.catchLoc)return Mt(Vt.catchLoc,!0);if(this.prev<Vt.finallyLoc)return Mt(Vt.finallyLoc)}else if(Wt){if(this.prev<Vt.catchLoc)return Mt(Vt.catchLoc,!0)}else{if(!ae)throw new Error("try statement without catch or finally");if(this.prev<Vt.finallyLoc)return Mt(Vt.finallyLoc)}}}},abrupt:function(ht,wt){for(var Mt=this.tryEntries.length-1;Mt>=0;--Mt){var Ut=this.tryEntries[Mt];if(Ut.tryLoc<=this.prev&&D.call(Ut,"finallyLoc")&&this.prev<Ut.finallyLoc){var Vt=Ut;break}}Vt&&(ht==="break"||ht==="continue")&&Vt.tryLoc<=wt&&wt<=Vt.finallyLoc&&(Vt=null);var Me=Vt?Vt.completion:{};return Me.type=ht,Me.arg=wt,Vt?(this.method="next",this.next=Vt.finallyLoc,nt):this.complete(Me)},complete:function(ht,wt){if(ht.type==="throw")throw ht.arg;return ht.type==="break"||ht.type==="continue"?this.next=ht.arg:ht.type==="return"?(this.rval=this.arg=ht.arg,this.method="return",this.next="end"):ht.type==="normal"&&wt&&(this.next=wt),nt},finish:function(ht){for(var wt=this.tryEntries.length-1;wt>=0;--wt){var Mt=this.tryEntries[wt];if(Mt.finallyLoc===ht)return this.complete(Mt.completion,Mt.afterLoc),Gt(Mt),nt}},catch:function(ht){for(var wt=this.tryEntries.length-1;wt>=0;--wt){var Mt=this.tryEntries[wt];if(Mt.tryLoc===ht){var Ut=Mt.completion;if(Ut.type==="throw"){var Vt=Ut.arg;Gt(Mt)}return Vt}}throw new Error("illegal catch attempt")},delegateYield:function(ht,wt,Mt){return this.delegate={iterator:p(ht),resultName:wt,nextLoc:Mt},this.method==="next"&&(this.arg=B),nt}},L}xr.exports=j,xr.exports.__esModule=!0,xr.exports.default=xr.exports},18698:function(xr){function U(z){"@babel/helpers - typeof";return xr.exports=U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},xr.exports.__esModule=!0,xr.exports.default=xr.exports,U(z)}xr.exports=U,xr.exports.__esModule=!0,xr.exports.default=xr.exports},64687:function(xr,U,z){var F=z(17061)();xr.exports=F;try{regeneratorRuntime=F}catch(j){typeof globalThis=="object"?globalThis.regeneratorRuntime=F:Function("r","regeneratorRuntime = r")(F)}},97582:function(xr,U,z){"use strict";z.r(U),z.d(U,{__addDisposableResource:function(){return Gt},__assign:function(){return B},__asyncDelegator:function(){return J},__asyncGenerator:function(){return Z},__asyncValues:function(){return it},__await:function(){return Y},__awaiter:function(){return S},__classPrivateFieldGet:function(){return Dt},__classPrivateFieldIn:function(){return te},__classPrivateFieldSet:function(){return Ot},__createBinding:function(){return E},__decorate:function(){return k},__disposeResources:function(){return p},__esDecorate:function(){return w},__exportStar:function(){return I},__extends:function(){return j},__generator:function(){return _},__importDefault:function(){return pt},__importStar:function(){return vt},__makeTemplateObject:function(){return tt},__metadata:function(){return d},__param:function(){return D},__propKey:function(){return g},__read:function(){return N},__rest:function(){return L},__runInitializers:function(){return b},__setFunctionName:function(){return y},__spread:function(){return H},__spreadArray:function(){return X},__spreadArrays:function(){return nt},__values:function(){return P}});var F=function(at,ht){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(wt,Mt){wt.__proto__=Mt}||function(wt,Mt){for(var Ut in Mt)Object.prototype.hasOwnProperty.call(Mt,Ut)&&(wt[Ut]=Mt[Ut])},F(at,ht)};function j(at,ht){if(typeof ht!="function"&&ht!==null)throw new TypeError("Class extends value "+String(ht)+" is not a constructor or null");F(at,ht);function wt(){this.constructor=at}at.prototype=ht===null?Object.create(ht):(wt.prototype=ht.prototype,new wt)}var B=function(){return B=Object.assign||function(ht){for(var wt,Mt=1,Ut=arguments.length;Mt<Ut;Mt++){wt=arguments[Mt];for(var Vt in wt)Object.prototype.hasOwnProperty.call(wt,Vt)&&(ht[Vt]=wt[Vt])}return ht},B.apply(this,arguments)};function L(at,ht){var wt={};for(var Mt in at)Object.prototype.hasOwnProperty.call(at,Mt)&&ht.indexOf(Mt)<0&&(wt[Mt]=at[Mt]);if(at!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ut=0,Mt=Object.getOwnPropertySymbols(at);Ut<Mt.length;Ut++)ht.indexOf(Mt[Ut])<0&&Object.prototype.propertyIsEnumerable.call(at,Mt[Ut])&&(wt[Mt[Ut]]=at[Mt[Ut]]);return wt}function k(at,ht,wt,Mt){var Ut=arguments.length,Vt=Ut<3?ht:Mt===null?Mt=Object.getOwnPropertyDescriptor(ht,wt):Mt,Me;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Vt=Reflect.decorate(at,ht,wt,Mt);else for(var Wt=at.length-1;Wt>=0;Wt--)(Me=at[Wt])&&(Vt=(Ut<3?Me(Vt):Ut>3?Me(ht,wt,Vt):Me(ht,wt))||Vt);return Ut>3&&Vt&&Object.defineProperty(ht,wt,Vt),Vt}function D(at,ht){return function(wt,Mt){ht(wt,Mt,at)}}function w(at,ht,wt,Mt,Ut,Vt){function Me(Te){if(Te!==void 0&&typeof Te!="function")throw new TypeError("Function expected");return Te}for(var Wt=Mt.kind,ae=Wt==="getter"?"get":Wt==="setter"?"set":"value",he=!ht&&at?Mt.static?at:at.prototype:null,Se=ht||(he?Object.getOwnPropertyDescriptor(he,Mt.name):{}),xe,Bt=!1,fe=wt.length-1;fe>=0;fe--){var Le={};for(var jt in Mt)Le[jt]=jt==="access"?{}:Mt[jt];for(var jt in Mt.access)Le.access[jt]=Mt.access[jt];Le.addInitializer=function(Te){if(Bt)throw new TypeError("Cannot add initializers after decoration has completed");Vt.push(Me(Te||null))};var oe=(0,wt[fe])(Wt==="accessor"?{get:Se.get,set:Se.set}:Se[ae],Le);if(Wt==="accessor"){if(oe===void 0)continue;if(oe===null||typeof oe!="object")throw new TypeError("Object expected");(xe=Me(oe.get))&&(Se.get=xe),(xe=Me(oe.set))&&(Se.set=xe),(xe=Me(oe.init))&&Ut.unshift(xe)}else(xe=Me(oe))&&(Wt==="field"?Ut.unshift(xe):Se[ae]=xe)}he&&Object.defineProperty(he,Mt.name,Se),Bt=!0}function b(at,ht,wt){for(var Mt=arguments.length>2,Ut=0;Ut<ht.length;Ut++)wt=Mt?ht[Ut].call(at,wt):ht[Ut].call(at);return Mt?wt:void 0}function g(at){return typeof at=="symbol"?at:"".concat(at)}function y(at,ht,wt){return typeof ht=="symbol"&&(ht=ht.description?"[".concat(ht.description,"]"):""),Object.defineProperty(at,"name",{configurable:!0,value:wt?"".concat(wt," ",ht):ht})}function d(at,ht){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(at,ht)}function S(at,ht,wt,Mt){function Ut(Vt){return Vt instanceof wt?Vt:new wt(function(Me){Me(Vt)})}return new(wt||(wt=Promise))(function(Vt,Me){function Wt(Se){try{he(Mt.next(Se))}catch(xe){Me(xe)}}function ae(Se){try{he(Mt.throw(Se))}catch(xe){Me(xe)}}function he(Se){Se.done?Vt(Se.value):Ut(Se.value).then(Wt,ae)}he((Mt=Mt.apply(at,ht||[])).next())})}function _(at,ht){var wt={label:0,sent:function(){if(Vt[0]&1)throw Vt[1];return Vt[1]},trys:[],ops:[]},Mt,Ut,Vt,Me;return Me={next:Wt(0),throw:Wt(1),return:Wt(2)},typeof Symbol=="function"&&(Me[Symbol.iterator]=function(){return this}),Me;function Wt(he){return function(Se){return ae([he,Se])}}function ae(he){if(Mt)throw new TypeError("Generator is already executing.");for(;Me&&(Me=0,he[0]&&(wt=0)),wt;)try{if(Mt=1,Ut&&(Vt=he[0]&2?Ut.return:he[0]?Ut.throw||((Vt=Ut.return)&&Vt.call(Ut),0):Ut.next)&&!(Vt=Vt.call(Ut,he[1])).done)return Vt;switch(Ut=0,Vt&&(he=[he[0]&2,Vt.value]),he[0]){case 0:case 1:Vt=he;break;case 4:return wt.label++,{value:he[1],done:!1};case 5:wt.label++,Ut=he[1],he=[0];continue;case 7:he=wt.ops.pop(),wt.trys.pop();continue;default:if(Vt=wt.trys,!(Vt=Vt.length>0&&Vt[Vt.length-1])&&(he[0]===6||he[0]===2)){wt=0;continue}if(he[0]===3&&(!Vt||he[1]>Vt[0]&&he[1]<Vt[3])){wt.label=he[1];break}if(he[0]===6&&wt.label<Vt[1]){wt.label=Vt[1],Vt=he;break}if(Vt&&wt.label<Vt[2]){wt.label=Vt[2],wt.ops.push(he);break}Vt[2]&&wt.ops.pop(),wt.trys.pop();continue}he=ht.call(at,wt)}catch(Se){he=[6,Se],Ut=0}finally{Mt=Vt=0}if(he[0]&5)throw he[1];return{value:he[0]?he[1]:void 0,done:!0}}}var E=Object.create?function(at,ht,wt,Mt){Mt===void 0&&(Mt=wt);var Ut=Object.getOwnPropertyDescriptor(ht,wt);(!Ut||("get"in Ut?!ht.__esModule:Ut.writable||Ut.configurable))&&(Ut={enumerable:!0,get:function(){return ht[wt]}}),Object.defineProperty(at,Mt,Ut)}:function(at,ht,wt,Mt){Mt===void 0&&(Mt=wt),at[Mt]=ht[wt]};function I(at,ht){for(var wt in at)wt!=="default"&&!Object.prototype.hasOwnProperty.call(ht,wt)&&E(ht,at,wt)}function P(at){var ht=typeof Symbol=="function"&&Symbol.iterator,wt=ht&&at[ht],Mt=0;if(wt)return wt.call(at);if(at&&typeof at.length=="number")return{next:function(){return at&&Mt>=at.length&&(at=void 0),{value:at&&at[Mt++],done:!at}}};throw new TypeError(ht?"Object is not iterable.":"Symbol.iterator is not defined.")}function N(at,ht){var wt=typeof Symbol=="function"&&at[Symbol.iterator];if(!wt)return at;var Mt=wt.call(at),Ut,Vt=[],Me;try{for(;(ht===void 0||ht-- >0)&&!(Ut=Mt.next()).done;)Vt.push(Ut.value)}catch(Wt){Me={error:Wt}}finally{try{Ut&&!Ut.done&&(wt=Mt.return)&&wt.call(Mt)}finally{if(Me)throw Me.error}}return Vt}function H(){for(var at=[],ht=0;ht<arguments.length;ht++)at=at.concat(N(arguments[ht]));return at}function nt(){for(var at=0,ht=0,wt=arguments.length;ht<wt;ht++)at+=arguments[ht].length;for(var Mt=Array(at),Ut=0,ht=0;ht<wt;ht++)for(var Vt=arguments[ht],Me=0,Wt=Vt.length;Me<Wt;Me++,Ut++)Mt[Ut]=Vt[Me];return Mt}function X(at,ht,wt){if(wt||arguments.length===2)for(var Mt=0,Ut=ht.length,Vt;Mt<Ut;Mt++)(Vt||!(Mt in ht))&&(Vt||(Vt=Array.prototype.slice.call(ht,0,Mt)),Vt[Mt]=ht[Mt]);return at.concat(Vt||Array.prototype.slice.call(ht))}function Y(at){return this instanceof Y?(this.v=at,this):new Y(at)}function Z(at,ht,wt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Mt=wt.apply(at,ht||[]),Ut,Vt=[];return Ut={},Me("next"),Me("throw"),Me("return"),Ut[Symbol.asyncIterator]=function(){return this},Ut;function Me(Bt){Mt[Bt]&&(Ut[Bt]=function(fe){return new Promise(function(Le,jt){Vt.push([Bt,fe,Le,jt])>1||Wt(Bt,fe)})})}function Wt(Bt,fe){try{ae(Mt[Bt](fe))}catch(Le){xe(Vt[0][3],Le)}}function ae(Bt){Bt.value instanceof Y?Promise.resolve(Bt.value.v).then(he,Se):xe(Vt[0][2],Bt)}function he(Bt){Wt("next",Bt)}function Se(Bt){Wt("throw",Bt)}function xe(Bt,fe){Bt(fe),Vt.shift(),Vt.length&&Wt(Vt[0][0],Vt[0][1])}}function J(at){var ht,wt;return ht={},Mt("next"),Mt("throw",function(Ut){throw Ut}),Mt("return"),ht[Symbol.iterator]=function(){return this},ht;function Mt(Ut,Vt){ht[Ut]=at[Ut]?function(Me){return(wt=!wt)?{value:Y(at[Ut](Me)),done:!1}:Vt?Vt(Me):Me}:Vt}}function it(at){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ht=at[Symbol.asyncIterator],wt;return ht?ht.call(at):(at=typeof P=="function"?P(at):at[Symbol.iterator](),wt={},Mt("next"),Mt("throw"),Mt("return"),wt[Symbol.asyncIterator]=function(){return this},wt);function Mt(Vt){wt[Vt]=at[Vt]&&function(Me){return new Promise(function(Wt,ae){Me=at[Vt](Me),Ut(Wt,ae,Me.done,Me.value)})}}function Ut(Vt,Me,Wt,ae){Promise.resolve(ae).then(function(he){Vt({value:he,done:Wt})},Me)}}function tt(at,ht){return Object.defineProperty?Object.defineProperty(at,"raw",{value:ht}):at.raw=ht,at}var ut=Object.create?function(at,ht){Object.defineProperty(at,"default",{enumerable:!0,value:ht})}:function(at,ht){at.default=ht};function vt(at){if(at&&at.__esModule)return at;var ht={};if(at!=null)for(var wt in at)wt!=="default"&&Object.prototype.hasOwnProperty.call(at,wt)&&E(ht,at,wt);return ut(ht,at),ht}function pt(at){return at&&at.__esModule?at:{default:at}}function Dt(at,ht,wt,Mt){if(wt==="a"&&!Mt)throw new TypeError("Private accessor was defined without a getter");if(typeof ht=="function"?at!==ht||!Mt:!ht.has(at))throw new TypeError("Cannot read private member from an object whose class did not declare it");return wt==="m"?Mt:wt==="a"?Mt.call(at):Mt?Mt.value:ht.get(at)}function Ot(at,ht,wt,Mt,Ut){if(Mt==="m")throw new TypeError("Private method is not writable");if(Mt==="a"&&!Ut)throw new TypeError("Private accessor was defined without a setter");if(typeof ht=="function"?at!==ht||!Ut:!ht.has(at))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Mt==="a"?Ut.call(at,wt):Ut?Ut.value=wt:ht.set(at,wt),wt}function te(at,ht){if(ht===null||typeof ht!="object"&&typeof ht!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof at=="function"?ht===at:at.has(ht)}function Gt(at,ht,wt){if(ht!=null){if(typeof ht!="object"&&typeof ht!="function")throw new TypeError("Object expected.");var Mt;if(wt){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");Mt=ht[Symbol.asyncDispose]}if(Mt===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");Mt=ht[Symbol.dispose]}if(typeof Mt!="function")throw new TypeError("Object not disposable.");at.stack.push({value:ht,dispose:Mt,async:wt})}else wt&&at.stack.push({async:!0});return ht}var K=typeof SuppressedError=="function"?SuppressedError:function(at,ht,wt){var Mt=new Error(wt);return Mt.name="SuppressedError",Mt.error=at,Mt.suppressed=ht,Mt};function p(at){function ht(Mt){at.error=at.hasError?new K(Mt,at.error,"An error was suppressed during disposal."):Mt,at.hasError=!0}function wt(){for(;at.stack.length;){var Mt=at.stack.pop();try{var Ut=Mt.dispose&&Mt.dispose.call(Mt.value);if(Mt.async)return Promise.resolve(Ut).then(wt,function(Vt){return ht(Vt),wt()})}catch(Vt){ht(Vt)}}if(at.hasError)throw at.error}return wt()}U.default={__extends:j,__assign:B,__rest:L,__decorate:k,__param:D,__metadata:d,__awaiter:S,__generator:_,__createBinding:E,__exportStar:I,__values:P,__read:N,__spread:H,__spreadArrays:nt,__spreadArray:X,__await:Y,__asyncGenerator:Z,__asyncDelegator:J,__asyncValues:it,__makeTemplateObject:tt,__importStar:vt,__importDefault:pt,__classPrivateFieldGet:Dt,__classPrivateFieldSet:Ot,__classPrivateFieldIn:te,__addDisposableResource:Gt,__disposeResources:p}}}]);
